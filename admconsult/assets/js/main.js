
/*! jQuery v2.1.4 | (c) 2005, 2015 jQuery Foundation, Inc. | jquery.org/license */
!function(a,b){"object"==typeof module&&"object"==typeof module.exports?module.exports=a.document?b(a,!0):function(a){if(!a.document)throw new Error("jQuery requires a window with a document");return b(a)}:b(a)}("undefined"!=typeof window?window:this,function(a,b){var c=[],d=c.slice,e=c.concat,f=c.push,g=c.indexOf,h={},i=h.toString,j=h.hasOwnProperty,k={},l=a.document,m="2.1.4",n=function(a,b){return new n.fn.init(a,b)},o=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,p=/^-ms-/,q=/-([\da-z])/gi,r=function(a,b){return b.toUpperCase()};n.fn=n.prototype={jquery:m,constructor:n,selector:"",length:0,toArray:function(){return d.call(this)},get:function(a){return null!=a?0>a?this[a+this.length]:this[a]:d.call(this)},pushStack:function(a){var b=n.merge(this.constructor(),a);return b.prevObject=this,b.context=this.context,b},each:function(a,b){return n.each(this,a,b)},map:function(a){return this.pushStack(n.map(this,function(b,c){return a.call(b,c,b)}))},slice:function(){return this.pushStack(d.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(a){var b=this.length,c=+a+(0>a?b:0);return this.pushStack(c>=0&&b>c?[this[c]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:f,sort:c.sort,splice:c.splice},n.extend=n.fn.extend=function(){var a,b,c,d,e,f,g=arguments[0]||{},h=1,i=arguments.length,j=!1;for("boolean"==typeof g&&(j=g,g=arguments[h]||{},h++),"object"==typeof g||n.isFunction(g)||(g={}),h===i&&(g=this,h--);i>h;h++)if(null!=(a=arguments[h]))for(b in a)c=g[b],d=a[b],g!==d&&(j&&d&&(n.isPlainObject(d)||(e=n.isArray(d)))?(e?(e=!1,f=c&&n.isArray(c)?c:[]):f=c&&n.isPlainObject(c)?c:{},g[b]=n.extend(j,f,d)):void 0!==d&&(g[b]=d));return g},n.extend({expando:"jQuery"+(m+Math.random()).replace(/\D/g,""),isReady:!0,error:function(a){throw new Error(a)},noop:function(){},isFunction:function(a){return"function"===n.type(a)},isArray:Array.isArray,isWindow:function(a){return null!=a&&a===a.window},isNumeric:function(a){return!n.isArray(a)&&a-parseFloat(a)+1>=0},isPlainObject:function(a){return"object"!==n.type(a)||a.nodeType||n.isWindow(a)?!1:a.constructor&&!j.call(a.constructor.prototype,"isPrototypeOf")?!1:!0},isEmptyObject:function(a){var b;for(b in a)return!1;return!0},type:function(a){return null==a?a+"":"object"==typeof a||"function"==typeof a?h[i.call(a)]||"object":typeof a},globalEval:function(a){var b,c=eval;a=n.trim(a),a&&(1===a.indexOf("use strict")?(b=l.createElement("script"),b.text=a,l.head.appendChild(b).parentNode.removeChild(b)):c(a))},camelCase:function(a){return a.replace(p,"ms-").replace(q,r)},nodeName:function(a,b){return a.nodeName&&a.nodeName.toLowerCase()===b.toLowerCase()},each:function(a,b,c){var d,e=0,f=a.length,g=s(a);if(c){if(g){for(;f>e;e++)if(d=b.apply(a[e],c),d===!1)break}else for(e in a)if(d=b.apply(a[e],c),d===!1)break}else if(g){for(;f>e;e++)if(d=b.call(a[e],e,a[e]),d===!1)break}else for(e in a)if(d=b.call(a[e],e,a[e]),d===!1)break;return a},trim:function(a){return null==a?"":(a+"").replace(o,"")},makeArray:function(a,b){var c=b||[];return null!=a&&(s(Object(a))?n.merge(c,"string"==typeof a?[a]:a):f.call(c,a)),c},inArray:function(a,b,c){return null==b?-1:g.call(b,a,c)},merge:function(a,b){for(var c=+b.length,d=0,e=a.length;c>d;d++)a[e++]=b[d];return a.length=e,a},grep:function(a,b,c){for(var d,e=[],f=0,g=a.length,h=!c;g>f;f++)d=!b(a[f],f),d!==h&&e.push(a[f]);return e},map:function(a,b,c){var d,f=0,g=a.length,h=s(a),i=[];if(h)for(;g>f;f++)d=b(a[f],f,c),null!=d&&i.push(d);else for(f in a)d=b(a[f],f,c),null!=d&&i.push(d);return e.apply([],i)},guid:1,proxy:function(a,b){var c,e,f;return"string"==typeof b&&(c=a[b],b=a,a=c),n.isFunction(a)?(e=d.call(arguments,2),f=function(){return a.apply(b||this,e.concat(d.call(arguments)))},f.guid=a.guid=a.guid||n.guid++,f):void 0},now:Date.now,support:k}),n.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(a,b){h["[object "+b+"]"]=b.toLowerCase()});function s(a){var b="length"in a&&a.length,c=n.type(a);return"function"===c||n.isWindow(a)?!1:1===a.nodeType&&b?!0:"array"===c||0===b||"number"==typeof b&&b>0&&b-1 in a}var t=function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u="sizzle"+1*new Date,v=a.document,w=0,x=0,y=ha(),z=ha(),A=ha(),B=function(a,b){return a===b&&(l=!0),0},C=1<<31,D={}.hasOwnProperty,E=[],F=E.pop,G=E.push,H=E.push,I=E.slice,J=function(a,b){for(var c=0,d=a.length;d>c;c++)if(a[c]===b)return c;return-1},K="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",L="[\\x20\\t\\r\\n\\f]",M="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",N=M.replace("w","w#"),O="\\["+L+"*("+M+")(?:"+L+"*([*^$|!~]?=)"+L+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+N+"))|)"+L+"*\\]",P=":("+M+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+O+")*)|.*)\\)|)",Q=new RegExp(L+"+","g"),R=new RegExp("^"+L+"+|((?:^|[^\\\\])(?:\\\\.)*)"+L+"+$","g"),S=new RegExp("^"+L+"*,"+L+"*"),T=new RegExp("^"+L+"*([>+~]|"+L+")"+L+"*"),U=new RegExp("="+L+"*([^\\]'\"]*?)"+L+"*\\]","g"),V=new RegExp(P),W=new RegExp("^"+N+"$"),X={ID:new RegExp("^#("+M+")"),CLASS:new RegExp("^\\.("+M+")"),TAG:new RegExp("^("+M.replace("w","w*")+")"),ATTR:new RegExp("^"+O),PSEUDO:new RegExp("^"+P),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+L+"*(even|odd|(([+-]|)(\\d*)n|)"+L+"*(?:([+-]|)"+L+"*(\\d+)|))"+L+"*\\)|)","i"),bool:new RegExp("^(?:"+K+")$","i"),needsContext:new RegExp("^"+L+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+L+"*((?:-\\d)?\\d*)"+L+"*\\)|)(?=[^-]|$)","i")},Y=/^(?:input|select|textarea|button)$/i,Z=/^h\d$/i,$=/^[^{]+\{\s*\[native \w/,_=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,aa=/[+~]/,ba=/'|\\/g,ca=new RegExp("\\\\([\\da-f]{1,6}"+L+"?|("+L+")|.)","ig"),da=function(a,b,c){var d="0x"+b-65536;return d!==d||c?b:0>d?String.fromCharCode(d+65536):String.fromCharCode(d>>10|55296,1023&d|56320)},ea=function(){m()};try{H.apply(E=I.call(v.childNodes),v.childNodes),E[v.childNodes.length].nodeType}catch(fa){H={apply:E.length?function(a,b){G.apply(a,I.call(b))}:function(a,b){var c=a.length,d=0;while(a[c++]=b[d++]);a.length=c-1}}}function ga(a,b,d,e){var f,h,j,k,l,o,r,s,w,x;if((b?b.ownerDocument||b:v)!==n&&m(b),b=b||n,d=d||[],k=b.nodeType,"string"!=typeof a||!a||1!==k&&9!==k&&11!==k)return d;if(!e&&p){if(11!==k&&(f=_.exec(a)))if(j=f[1]){if(9===k){if(h=b.getElementById(j),!h||!h.parentNode)return d;if(h.id===j)return d.push(h),d}else if(b.ownerDocument&&(h=b.ownerDocument.getElementById(j))&&t(b,h)&&h.id===j)return d.push(h),d}else{if(f[2])return H.apply(d,b.getElementsByTagName(a)),d;if((j=f[3])&&c.getElementsByClassName)return H.apply(d,b.getElementsByClassName(j)),d}if(c.qsa&&(!q||!q.test(a))){if(s=r=u,w=b,x=1!==k&&a,1===k&&"object"!==b.nodeName.toLowerCase()){o=g(a),(r=b.getAttribute("id"))?s=r.replace(ba,"\\$&"):b.setAttribute("id",s),s="[id='"+s+"'] ",l=o.length;while(l--)o[l]=s+ra(o[l]);w=aa.test(a)&&pa(b.parentNode)||b,x=o.join(",")}if(x)try{return H.apply(d,w.querySelectorAll(x)),d}catch(y){}finally{r||b.removeAttribute("id")}}}return i(a.replace(R,"$1"),b,d,e)}function ha(){var a=[];function b(c,e){return a.push(c+" ")>d.cacheLength&&delete b[a.shift()],b[c+" "]=e}return b}function ia(a){return a[u]=!0,a}function ja(a){var b=n.createElement("div");try{return!!a(b)}catch(c){return!1}finally{b.parentNode&&b.parentNode.removeChild(b),b=null}}function ka(a,b){var c=a.split("|"),e=a.length;while(e--)d.attrHandle[c[e]]=b}function la(a,b){var c=b&&a,d=c&&1===a.nodeType&&1===b.nodeType&&(~b.sourceIndex||C)-(~a.sourceIndex||C);if(d)return d;if(c)while(c=c.nextSibling)if(c===b)return-1;return a?1:-1}function ma(a){return function(b){var c=b.nodeName.toLowerCase();return"input"===c&&b.type===a}}function na(a){return function(b){var c=b.nodeName.toLowerCase();return("input"===c||"button"===c)&&b.type===a}}function oa(a){return ia(function(b){return b=+b,ia(function(c,d){var e,f=a([],c.length,b),g=f.length;while(g--)c[e=f[g]]&&(c[e]=!(d[e]=c[e]))})})}function pa(a){return a&&"undefined"!=typeof a.getElementsByTagName&&a}c=ga.support={},f=ga.isXML=function(a){var b=a&&(a.ownerDocument||a).documentElement;return b?"HTML"!==b.nodeName:!1},m=ga.setDocument=function(a){var b,e,g=a?a.ownerDocument||a:v;return g!==n&&9===g.nodeType&&g.documentElement?(n=g,o=g.documentElement,e=g.defaultView,e&&e!==e.top&&(e.addEventListener?e.addEventListener("unload",ea,!1):e.attachEvent&&e.attachEvent("onunload",ea)),p=!f(g),c.attributes=ja(function(a){return a.className="i",!a.getAttribute("className")}),c.getElementsByTagName=ja(function(a){return a.appendChild(g.createComment("")),!a.getElementsByTagName("*").length}),c.getElementsByClassName=$.test(g.getElementsByClassName),c.getById=ja(function(a){return o.appendChild(a).id=u,!g.getElementsByName||!g.getElementsByName(u).length}),c.getById?(d.find.ID=function(a,b){if("undefined"!=typeof b.getElementById&&p){var c=b.getElementById(a);return c&&c.parentNode?[c]:[]}},d.filter.ID=function(a){var b=a.replace(ca,da);return function(a){return a.getAttribute("id")===b}}):(delete d.find.ID,d.filter.ID=function(a){var b=a.replace(ca,da);return function(a){var c="undefined"!=typeof a.getAttributeNode&&a.getAttributeNode("id");return c&&c.value===b}}),d.find.TAG=c.getElementsByTagName?function(a,b){return"undefined"!=typeof b.getElementsByTagName?b.getElementsByTagName(a):c.qsa?b.querySelectorAll(a):void 0}:function(a,b){var c,d=[],e=0,f=b.getElementsByTagName(a);if("*"===a){while(c=f[e++])1===c.nodeType&&d.push(c);return d}return f},d.find.CLASS=c.getElementsByClassName&&function(a,b){return p?b.getElementsByClassName(a):void 0},r=[],q=[],(c.qsa=$.test(g.querySelectorAll))&&(ja(function(a){o.appendChild(a).innerHTML="<a id='"+u+"'></a><select id='"+u+"-\f]' msallowcapture=''><option selected=''></option></select>",a.querySelectorAll("[msallowcapture^='']").length&&q.push("[*^$]="+L+"*(?:''|\"\")"),a.querySelectorAll("[selected]").length||q.push("\\["+L+"*(?:value|"+K+")"),a.querySelectorAll("[id~="+u+"-]").length||q.push("~="),a.querySelectorAll(":checked").length||q.push(":checked"),a.querySelectorAll("a#"+u+"+*").length||q.push(".#.+[+~]")}),ja(function(a){var b=g.createElement("input");b.setAttribute("type","hidden"),a.appendChild(b).setAttribute("name","D"),a.querySelectorAll("[name=d]").length&&q.push("name"+L+"*[*^$|!~]?="),a.querySelectorAll(":enabled").length||q.push(":enabled",":disabled"),a.querySelectorAll("*,:x"),q.push(",.*:")})),(c.matchesSelector=$.test(s=o.matches||o.webkitMatchesSelector||o.mozMatchesSelector||o.oMatchesSelector||o.msMatchesSelector))&&ja(function(a){c.disconnectedMatch=s.call(a,"div"),s.call(a,"[s!='']:x"),r.push("!=",P)}),q=q.length&&new RegExp(q.join("|")),r=r.length&&new RegExp(r.join("|")),b=$.test(o.compareDocumentPosition),t=b||$.test(o.contains)?function(a,b){var c=9===a.nodeType?a.documentElement:a,d=b&&b.parentNode;return a===d||!(!d||1!==d.nodeType||!(c.contains?c.contains(d):a.compareDocumentPosition&&16&a.compareDocumentPosition(d)))}:function(a,b){if(b)while(b=b.parentNode)if(b===a)return!0;return!1},B=b?function(a,b){if(a===b)return l=!0,0;var d=!a.compareDocumentPosition-!b.compareDocumentPosition;return d?d:(d=(a.ownerDocument||a)===(b.ownerDocument||b)?a.compareDocumentPosition(b):1,1&d||!c.sortDetached&&b.compareDocumentPosition(a)===d?a===g||a.ownerDocument===v&&t(v,a)?-1:b===g||b.ownerDocument===v&&t(v,b)?1:k?J(k,a)-J(k,b):0:4&d?-1:1)}:function(a,b){if(a===b)return l=!0,0;var c,d=0,e=a.parentNode,f=b.parentNode,h=[a],i=[b];if(!e||!f)return a===g?-1:b===g?1:e?-1:f?1:k?J(k,a)-J(k,b):0;if(e===f)return la(a,b);c=a;while(c=c.parentNode)h.unshift(c);c=b;while(c=c.parentNode)i.unshift(c);while(h[d]===i[d])d++;return d?la(h[d],i[d]):h[d]===v?-1:i[d]===v?1:0},g):n},ga.matches=function(a,b){return ga(a,null,null,b)},ga.matchesSelector=function(a,b){if((a.ownerDocument||a)!==n&&m(a),b=b.replace(U,"='$1']"),!(!c.matchesSelector||!p||r&&r.test(b)||q&&q.test(b)))try{var d=s.call(a,b);if(d||c.disconnectedMatch||a.document&&11!==a.document.nodeType)return d}catch(e){}return ga(b,n,null,[a]).length>0},ga.contains=function(a,b){return(a.ownerDocument||a)!==n&&m(a),t(a,b)},ga.attr=function(a,b){(a.ownerDocument||a)!==n&&m(a);var e=d.attrHandle[b.toLowerCase()],f=e&&D.call(d.attrHandle,b.toLowerCase())?e(a,b,!p):void 0;return void 0!==f?f:c.attributes||!p?a.getAttribute(b):(f=a.getAttributeNode(b))&&f.specified?f.value:null},ga.error=function(a){throw new Error("Syntax error, unrecognized expression: "+a)},ga.uniqueSort=function(a){var b,d=[],e=0,f=0;if(l=!c.detectDuplicates,k=!c.sortStable&&a.slice(0),a.sort(B),l){while(b=a[f++])b===a[f]&&(e=d.push(f));while(e--)a.splice(d[e],1)}return k=null,a},e=ga.getText=function(a){var b,c="",d=0,f=a.nodeType;if(f){if(1===f||9===f||11===f){if("string"==typeof a.textContent)return a.textContent;for(a=a.firstChild;a;a=a.nextSibling)c+=e(a)}else if(3===f||4===f)return a.nodeValue}else while(b=a[d++])c+=e(b);return c},d=ga.selectors={cacheLength:50,createPseudo:ia,match:X,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(a){return a[1]=a[1].replace(ca,da),a[3]=(a[3]||a[4]||a[5]||"").replace(ca,da),"~="===a[2]&&(a[3]=" "+a[3]+" "),a.slice(0,4)},CHILD:function(a){return a[1]=a[1].toLowerCase(),"nth"===a[1].slice(0,3)?(a[3]||ga.error(a[0]),a[4]=+(a[4]?a[5]+(a[6]||1):2*("even"===a[3]||"odd"===a[3])),a[5]=+(a[7]+a[8]||"odd"===a[3])):a[3]&&ga.error(a[0]),a},PSEUDO:function(a){var b,c=!a[6]&&a[2];return X.CHILD.test(a[0])?null:(a[3]?a[2]=a[4]||a[5]||"":c&&V.test(c)&&(b=g(c,!0))&&(b=c.indexOf(")",c.length-b)-c.length)&&(a[0]=a[0].slice(0,b),a[2]=c.slice(0,b)),a.slice(0,3))}},filter:{TAG:function(a){var b=a.replace(ca,da).toLowerCase();return"*"===a?function(){return!0}:function(a){return a.nodeName&&a.nodeName.toLowerCase()===b}},CLASS:function(a){var b=y[a+" "];return b||(b=new RegExp("(^|"+L+")"+a+"("+L+"|$)"))&&y(a,function(a){return b.test("string"==typeof a.className&&a.className||"undefined"!=typeof a.getAttribute&&a.getAttribute("class")||"")})},ATTR:function(a,b,c){return function(d){var e=ga.attr(d,a);return null==e?"!="===b:b?(e+="","="===b?e===c:"!="===b?e!==c:"^="===b?c&&0===e.indexOf(c):"*="===b?c&&e.indexOf(c)>-1:"$="===b?c&&e.slice(-c.length)===c:"~="===b?(" "+e.replace(Q," ")+" ").indexOf(c)>-1:"|="===b?e===c||e.slice(0,c.length+1)===c+"-":!1):!0}},CHILD:function(a,b,c,d,e){var f="nth"!==a.slice(0,3),g="last"!==a.slice(-4),h="of-type"===b;return 1===d&&0===e?function(a){return!!a.parentNode}:function(b,c,i){var j,k,l,m,n,o,p=f!==g?"nextSibling":"previousSibling",q=b.parentNode,r=h&&b.nodeName.toLowerCase(),s=!i&&!h;if(q){if(f){while(p){l=b;while(l=l[p])if(h?l.nodeName.toLowerCase()===r:1===l.nodeType)return!1;o=p="only"===a&&!o&&"nextSibling"}return!0}if(o=[g?q.firstChild:q.lastChild],g&&s){k=q[u]||(q[u]={}),j=k[a]||[],n=j[0]===w&&j[1],m=j[0]===w&&j[2],l=n&&q.childNodes[n];while(l=++n&&l&&l[p]||(m=n=0)||o.pop())if(1===l.nodeType&&++m&&l===b){k[a]=[w,n,m];break}}else if(s&&(j=(b[u]||(b[u]={}))[a])&&j[0]===w)m=j[1];else while(l=++n&&l&&l[p]||(m=n=0)||o.pop())if((h?l.nodeName.toLowerCase()===r:1===l.nodeType)&&++m&&(s&&((l[u]||(l[u]={}))[a]=[w,m]),l===b))break;return m-=e,m===d||m%d===0&&m/d>=0}}},PSEUDO:function(a,b){var c,e=d.pseudos[a]||d.setFilters[a.toLowerCase()]||ga.error("unsupported pseudo: "+a);return e[u]?e(b):e.length>1?(c=[a,a,"",b],d.setFilters.hasOwnProperty(a.toLowerCase())?ia(function(a,c){var d,f=e(a,b),g=f.length;while(g--)d=J(a,f[g]),a[d]=!(c[d]=f[g])}):function(a){return e(a,0,c)}):e}},pseudos:{not:ia(function(a){var b=[],c=[],d=h(a.replace(R,"$1"));return d[u]?ia(function(a,b,c,e){var f,g=d(a,null,e,[]),h=a.length;while(h--)(f=g[h])&&(a[h]=!(b[h]=f))}):function(a,e,f){return b[0]=a,d(b,null,f,c),b[0]=null,!c.pop()}}),has:ia(function(a){return function(b){return ga(a,b).length>0}}),contains:ia(function(a){return a=a.replace(ca,da),function(b){return(b.textContent||b.innerText||e(b)).indexOf(a)>-1}}),lang:ia(function(a){return W.test(a||"")||ga.error("unsupported lang: "+a),a=a.replace(ca,da).toLowerCase(),function(b){var c;do if(c=p?b.lang:b.getAttribute("xml:lang")||b.getAttribute("lang"))return c=c.toLowerCase(),c===a||0===c.indexOf(a+"-");while((b=b.parentNode)&&1===b.nodeType);return!1}}),target:function(b){var c=a.location&&a.location.hash;return c&&c.slice(1)===b.id},root:function(a){return a===o},focus:function(a){return a===n.activeElement&&(!n.hasFocus||n.hasFocus())&&!!(a.type||a.href||~a.tabIndex)},enabled:function(a){return a.disabled===!1},disabled:function(a){return a.disabled===!0},checked:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&!!a.checked||"option"===b&&!!a.selected},selected:function(a){return a.parentNode&&a.parentNode.selectedIndex,a.selected===!0},empty:function(a){for(a=a.firstChild;a;a=a.nextSibling)if(a.nodeType<6)return!1;return!0},parent:function(a){return!d.pseudos.empty(a)},header:function(a){return Z.test(a.nodeName)},input:function(a){return Y.test(a.nodeName)},button:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&"button"===a.type||"button"===b},text:function(a){var b;return"input"===a.nodeName.toLowerCase()&&"text"===a.type&&(null==(b=a.getAttribute("type"))||"text"===b.toLowerCase())},first:oa(function(){return[0]}),last:oa(function(a,b){return[b-1]}),eq:oa(function(a,b,c){return[0>c?c+b:c]}),even:oa(function(a,b){for(var c=0;b>c;c+=2)a.push(c);return a}),odd:oa(function(a,b){for(var c=1;b>c;c+=2)a.push(c);return a}),lt:oa(function(a,b,c){for(var d=0>c?c+b:c;--d>=0;)a.push(d);return a}),gt:oa(function(a,b,c){for(var d=0>c?c+b:c;++d<b;)a.push(d);return a})}},d.pseudos.nth=d.pseudos.eq;for(b in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})d.pseudos[b]=ma(b);for(b in{submit:!0,reset:!0})d.pseudos[b]=na(b);function qa(){}qa.prototype=d.filters=d.pseudos,d.setFilters=new qa,g=ga.tokenize=function(a,b){var c,e,f,g,h,i,j,k=z[a+" "];if(k)return b?0:k.slice(0);h=a,i=[],j=d.preFilter;while(h){(!c||(e=S.exec(h)))&&(e&&(h=h.slice(e[0].length)||h),i.push(f=[])),c=!1,(e=T.exec(h))&&(c=e.shift(),f.push({value:c,type:e[0].replace(R," ")}),h=h.slice(c.length));for(g in d.filter)!(e=X[g].exec(h))||j[g]&&!(e=j[g](e))||(c=e.shift(),f.push({value:c,type:g,matches:e}),h=h.slice(c.length));if(!c)break}return b?h.length:h?ga.error(a):z(a,i).slice(0)};function ra(a){for(var b=0,c=a.length,d="";c>b;b++)d+=a[b].value;return d}function sa(a,b,c){var d=b.dir,e=c&&"parentNode"===d,f=x++;return b.first?function(b,c,f){while(b=b[d])if(1===b.nodeType||e)return a(b,c,f)}:function(b,c,g){var h,i,j=[w,f];if(g){while(b=b[d])if((1===b.nodeType||e)&&a(b,c,g))return!0}else while(b=b[d])if(1===b.nodeType||e){if(i=b[u]||(b[u]={}),(h=i[d])&&h[0]===w&&h[1]===f)return j[2]=h[2];if(i[d]=j,j[2]=a(b,c,g))return!0}}}function ta(a){return a.length>1?function(b,c,d){var e=a.length;while(e--)if(!a[e](b,c,d))return!1;return!0}:a[0]}function ua(a,b,c){for(var d=0,e=b.length;e>d;d++)ga(a,b[d],c);return c}function va(a,b,c,d,e){for(var f,g=[],h=0,i=a.length,j=null!=b;i>h;h++)(f=a[h])&&(!c||c(f,d,e))&&(g.push(f),j&&b.push(h));return g}function wa(a,b,c,d,e,f){return d&&!d[u]&&(d=wa(d)),e&&!e[u]&&(e=wa(e,f)),ia(function(f,g,h,i){var j,k,l,m=[],n=[],o=g.length,p=f||ua(b||"*",h.nodeType?[h]:h,[]),q=!a||!f&&b?p:va(p,m,a,h,i),r=c?e||(f?a:o||d)?[]:g:q;if(c&&c(q,r,h,i),d){j=va(r,n),d(j,[],h,i),k=j.length;while(k--)(l=j[k])&&(r[n[k]]=!(q[n[k]]=l))}if(f){if(e||a){if(e){j=[],k=r.length;while(k--)(l=r[k])&&j.push(q[k]=l);e(null,r=[],j,i)}k=r.length;while(k--)(l=r[k])&&(j=e?J(f,l):m[k])>-1&&(f[j]=!(g[j]=l))}}else r=va(r===g?r.splice(o,r.length):r),e?e(null,g,r,i):H.apply(g,r)})}function xa(a){for(var b,c,e,f=a.length,g=d.relative[a[0].type],h=g||d.relative[" "],i=g?1:0,k=sa(function(a){return a===b},h,!0),l=sa(function(a){return J(b,a)>-1},h,!0),m=[function(a,c,d){var e=!g&&(d||c!==j)||((b=c).nodeType?k(a,c,d):l(a,c,d));return b=null,e}];f>i;i++)if(c=d.relative[a[i].type])m=[sa(ta(m),c)];else{if(c=d.filter[a[i].type].apply(null,a[i].matches),c[u]){for(e=++i;f>e;e++)if(d.relative[a[e].type])break;return wa(i>1&&ta(m),i>1&&ra(a.slice(0,i-1).concat({value:" "===a[i-2].type?"*":""})).replace(R,"$1"),c,e>i&&xa(a.slice(i,e)),f>e&&xa(a=a.slice(e)),f>e&&ra(a))}m.push(c)}return ta(m)}function ya(a,b){var c=b.length>0,e=a.length>0,f=function(f,g,h,i,k){var l,m,o,p=0,q="0",r=f&&[],s=[],t=j,u=f||e&&d.find.TAG("*",k),v=w+=null==t?1:Math.random()||.1,x=u.length;for(k&&(j=g!==n&&g);q!==x&&null!=(l=u[q]);q++){if(e&&l){m=0;while(o=a[m++])if(o(l,g,h)){i.push(l);break}k&&(w=v)}c&&((l=!o&&l)&&p--,f&&r.push(l))}if(p+=q,c&&q!==p){m=0;while(o=b[m++])o(r,s,g,h);if(f){if(p>0)while(q--)r[q]||s[q]||(s[q]=F.call(i));s=va(s)}H.apply(i,s),k&&!f&&s.length>0&&p+b.length>1&&ga.uniqueSort(i)}return k&&(w=v,j=t),r};return c?ia(f):f}return h=ga.compile=function(a,b){var c,d=[],e=[],f=A[a+" "];if(!f){b||(b=g(a)),c=b.length;while(c--)f=xa(b[c]),f[u]?d.push(f):e.push(f);f=A(a,ya(e,d)),f.selector=a}return f},i=ga.select=function(a,b,e,f){var i,j,k,l,m,n="function"==typeof a&&a,o=!f&&g(a=n.selector||a);if(e=e||[],1===o.length){if(j=o[0]=o[0].slice(0),j.length>2&&"ID"===(k=j[0]).type&&c.getById&&9===b.nodeType&&p&&d.relative[j[1].type]){if(b=(d.find.ID(k.matches[0].replace(ca,da),b)||[])[0],!b)return e;n&&(b=b.parentNode),a=a.slice(j.shift().value.length)}i=X.needsContext.test(a)?0:j.length;while(i--){if(k=j[i],d.relative[l=k.type])break;if((m=d.find[l])&&(f=m(k.matches[0].replace(ca,da),aa.test(j[0].type)&&pa(b.parentNode)||b))){if(j.splice(i,1),a=f.length&&ra(j),!a)return H.apply(e,f),e;break}}}return(n||h(a,o))(f,b,!p,e,aa.test(a)&&pa(b.parentNode)||b),e},c.sortStable=u.split("").sort(B).join("")===u,c.detectDuplicates=!!l,m(),c.sortDetached=ja(function(a){return 1&a.compareDocumentPosition(n.createElement("div"))}),ja(function(a){return a.innerHTML="<a href='#'></a>","#"===a.firstChild.getAttribute("href")})||ka("type|href|height|width",function(a,b,c){return c?void 0:a.getAttribute(b,"type"===b.toLowerCase()?1:2)}),c.attributes&&ja(function(a){return a.innerHTML="<input/>",a.firstChild.setAttribute("value",""),""===a.firstChild.getAttribute("value")})||ka("value",function(a,b,c){return c||"input"!==a.nodeName.toLowerCase()?void 0:a.defaultValue}),ja(function(a){return null==a.getAttribute("disabled")})||ka(K,function(a,b,c){var d;return c?void 0:a[b]===!0?b.toLowerCase():(d=a.getAttributeNode(b))&&d.specified?d.value:null}),ga}(a);n.find=t,n.expr=t.selectors,n.expr[":"]=n.expr.pseudos,n.unique=t.uniqueSort,n.text=t.getText,n.isXMLDoc=t.isXML,n.contains=t.contains;var u=n.expr.match.needsContext,v=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,w=/^.[^:#\[\.,]*$/;function x(a,b,c){if(n.isFunction(b))return n.grep(a,function(a,d){return!!b.call(a,d,a)!==c});if(b.nodeType)return n.grep(a,function(a){return a===b!==c});if("string"==typeof b){if(w.test(b))return n.filter(b,a,c);b=n.filter(b,a)}return n.grep(a,function(a){return g.call(b,a)>=0!==c})}n.filter=function(a,b,c){var d=b[0];return c&&(a=":not("+a+")"),1===b.length&&1===d.nodeType?n.find.matchesSelector(d,a)?[d]:[]:n.find.matches(a,n.grep(b,function(a){return 1===a.nodeType}))},n.fn.extend({find:function(a){var b,c=this.length,d=[],e=this;if("string"!=typeof a)return this.pushStack(n(a).filter(function(){for(b=0;c>b;b++)if(n.contains(e[b],this))return!0}));for(b=0;c>b;b++)n.find(a,e[b],d);return d=this.pushStack(c>1?n.unique(d):d),d.selector=this.selector?this.selector+" "+a:a,d},filter:function(a){return this.pushStack(x(this,a||[],!1))},not:function(a){return this.pushStack(x(this,a||[],!0))},is:function(a){return!!x(this,"string"==typeof a&&u.test(a)?n(a):a||[],!1).length}});var y,z=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,A=n.fn.init=function(a,b){var c,d;if(!a)return this;if("string"==typeof a){if(c="<"===a[0]&&">"===a[a.length-1]&&a.length>=3?[null,a,null]:z.exec(a),!c||!c[1]&&b)return!b||b.jquery?(b||y).find(a):this.constructor(b).find(a);if(c[1]){if(b=b instanceof n?b[0]:b,n.merge(this,n.parseHTML(c[1],b&&b.nodeType?b.ownerDocument||b:l,!0)),v.test(c[1])&&n.isPlainObject(b))for(c in b)n.isFunction(this[c])?this[c](b[c]):this.attr(c,b[c]);return this}return d=l.getElementById(c[2]),d&&d.parentNode&&(this.length=1,this[0]=d),this.context=l,this.selector=a,this}return a.nodeType?(this.context=this[0]=a,this.length=1,this):n.isFunction(a)?"undefined"!=typeof y.ready?y.ready(a):a(n):(void 0!==a.selector&&(this.selector=a.selector,this.context=a.context),n.makeArray(a,this))};A.prototype=n.fn,y=n(l);var B=/^(?:parents|prev(?:Until|All))/,C={children:!0,contents:!0,next:!0,prev:!0};n.extend({dir:function(a,b,c){var d=[],e=void 0!==c;while((a=a[b])&&9!==a.nodeType)if(1===a.nodeType){if(e&&n(a).is(c))break;d.push(a)}return d},sibling:function(a,b){for(var c=[];a;a=a.nextSibling)1===a.nodeType&&a!==b&&c.push(a);return c}}),n.fn.extend({has:function(a){var b=n(a,this),c=b.length;return this.filter(function(){for(var a=0;c>a;a++)if(n.contains(this,b[a]))return!0})},closest:function(a,b){for(var c,d=0,e=this.length,f=[],g=u.test(a)||"string"!=typeof a?n(a,b||this.context):0;e>d;d++)for(c=this[d];c&&c!==b;c=c.parentNode)if(c.nodeType<11&&(g?g.index(c)>-1:1===c.nodeType&&n.find.matchesSelector(c,a))){f.push(c);break}return this.pushStack(f.length>1?n.unique(f):f)},index:function(a){return a?"string"==typeof a?g.call(n(a),this[0]):g.call(this,a.jquery?a[0]:a):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(a,b){return this.pushStack(n.unique(n.merge(this.get(),n(a,b))))},addBack:function(a){return this.add(null==a?this.prevObject:this.prevObject.filter(a))}});function D(a,b){while((a=a[b])&&1!==a.nodeType);return a}n.each({parent:function(a){var b=a.parentNode;return b&&11!==b.nodeType?b:null},parents:function(a){return n.dir(a,"parentNode")},parentsUntil:function(a,b,c){return n.dir(a,"parentNode",c)},next:function(a){return D(a,"nextSibling")},prev:function(a){return D(a,"previousSibling")},nextAll:function(a){return n.dir(a,"nextSibling")},prevAll:function(a){return n.dir(a,"previousSibling")},nextUntil:function(a,b,c){return n.dir(a,"nextSibling",c)},prevUntil:function(a,b,c){return n.dir(a,"previousSibling",c)},siblings:function(a){return n.sibling((a.parentNode||{}).firstChild,a)},children:function(a){return n.sibling(a.firstChild)},contents:function(a){return a.contentDocument||n.merge([],a.childNodes)}},function(a,b){n.fn[a]=function(c,d){var e=n.map(this,b,c);return"Until"!==a.slice(-5)&&(d=c),d&&"string"==typeof d&&(e=n.filter(d,e)),this.length>1&&(C[a]||n.unique(e),B.test(a)&&e.reverse()),this.pushStack(e)}});var E=/\S+/g,F={};function G(a){var b=F[a]={};return n.each(a.match(E)||[],function(a,c){b[c]=!0}),b}n.Callbacks=function(a){a="string"==typeof a?F[a]||G(a):n.extend({},a);var b,c,d,e,f,g,h=[],i=!a.once&&[],j=function(l){for(b=a.memory&&l,c=!0,g=e||0,e=0,f=h.length,d=!0;h&&f>g;g++)if(h[g].apply(l[0],l[1])===!1&&a.stopOnFalse){b=!1;break}d=!1,h&&(i?i.length&&j(i.shift()):b?h=[]:k.disable())},k={add:function(){if(h){var c=h.length;!function g(b){n.each(b,function(b,c){var d=n.type(c);"function"===d?a.unique&&k.has(c)||h.push(c):c&&c.length&&"string"!==d&&g(c)})}(arguments),d?f=h.length:b&&(e=c,j(b))}return this},remove:function(){return h&&n.each(arguments,function(a,b){var c;while((c=n.inArray(b,h,c))>-1)h.splice(c,1),d&&(f>=c&&f--,g>=c&&g--)}),this},has:function(a){return a?n.inArray(a,h)>-1:!(!h||!h.length)},empty:function(){return h=[],f=0,this},disable:function(){return h=i=b=void 0,this},disabled:function(){return!h},lock:function(){return i=void 0,b||k.disable(),this},locked:function(){return!i},fireWith:function(a,b){return!h||c&&!i||(b=b||[],b=[a,b.slice?b.slice():b],d?i.push(b):j(b)),this},fire:function(){return k.fireWith(this,arguments),this},fired:function(){return!!c}};return k},n.extend({Deferred:function(a){var b=[["resolve","done",n.Callbacks("once memory"),"resolved"],["reject","fail",n.Callbacks("once memory"),"rejected"],["notify","progress",n.Callbacks("memory")]],c="pending",d={state:function(){return c},always:function(){return e.done(arguments).fail(arguments),this},then:function(){var a=arguments;return n.Deferred(function(c){n.each(b,function(b,f){var g=n.isFunction(a[b])&&a[b];e[f[1]](function(){var a=g&&g.apply(this,arguments);a&&n.isFunction(a.promise)?a.promise().done(c.resolve).fail(c.reject).progress(c.notify):c[f[0]+"With"](this===d?c.promise():this,g?[a]:arguments)})}),a=null}).promise()},promise:function(a){return null!=a?n.extend(a,d):d}},e={};return d.pipe=d.then,n.each(b,function(a,f){var g=f[2],h=f[3];d[f[1]]=g.add,h&&g.add(function(){c=h},b[1^a][2].disable,b[2][2].lock),e[f[0]]=function(){return e[f[0]+"With"](this===e?d:this,arguments),this},e[f[0]+"With"]=g.fireWith}),d.promise(e),a&&a.call(e,e),e},when:function(a){var b=0,c=d.call(arguments),e=c.length,f=1!==e||a&&n.isFunction(a.promise)?e:0,g=1===f?a:n.Deferred(),h=function(a,b,c){return function(e){b[a]=this,c[a]=arguments.length>1?d.call(arguments):e,c===i?g.notifyWith(b,c):--f||g.resolveWith(b,c)}},i,j,k;if(e>1)for(i=new Array(e),j=new Array(e),k=new Array(e);e>b;b++)c[b]&&n.isFunction(c[b].promise)?c[b].promise().done(h(b,k,c)).fail(g.reject).progress(h(b,j,i)):--f;return f||g.resolveWith(k,c),g.promise()}});var H;n.fn.ready=function(a){return n.ready.promise().done(a),this},n.extend({isReady:!1,readyWait:1,holdReady:function(a){a?n.readyWait++:n.ready(!0)},ready:function(a){(a===!0?--n.readyWait:n.isReady)||(n.isReady=!0,a!==!0&&--n.readyWait>0||(H.resolveWith(l,[n]),n.fn.triggerHandler&&(n(l).triggerHandler("ready"),n(l).off("ready"))))}});function I(){l.removeEventListener("DOMContentLoaded",I,!1),a.removeEventListener("load",I,!1),n.ready()}n.ready.promise=function(b){return H||(H=n.Deferred(),"complete"===l.readyState?setTimeout(n.ready):(l.addEventListener("DOMContentLoaded",I,!1),a.addEventListener("load",I,!1))),H.promise(b)},n.ready.promise();var J=n.access=function(a,b,c,d,e,f,g){var h=0,i=a.length,j=null==c;if("object"===n.type(c)){e=!0;for(h in c)n.access(a,b,h,c[h],!0,f,g)}else if(void 0!==d&&(e=!0,n.isFunction(d)||(g=!0),j&&(g?(b.call(a,d),b=null):(j=b,b=function(a,b,c){return j.call(n(a),c)})),b))for(;i>h;h++)b(a[h],c,g?d:d.call(a[h],h,b(a[h],c)));return e?a:j?b.call(a):i?b(a[0],c):f};n.acceptData=function(a){return 1===a.nodeType||9===a.nodeType||!+a.nodeType};function K(){Object.defineProperty(this.cache={},0,{get:function(){return{}}}),this.expando=n.expando+K.uid++}K.uid=1,K.accepts=n.acceptData,K.prototype={key:function(a){if(!K.accepts(a))return 0;var b={},c=a[this.expando];if(!c){c=K.uid++;try{b[this.expando]={value:c},Object.defineProperties(a,b)}catch(d){b[this.expando]=c,n.extend(a,b)}}return this.cache[c]||(this.cache[c]={}),c},set:function(a,b,c){var d,e=this.key(a),f=this.cache[e];if("string"==typeof b)f[b]=c;else if(n.isEmptyObject(f))n.extend(this.cache[e],b);else for(d in b)f[d]=b[d];return f},get:function(a,b){var c=this.cache[this.key(a)];return void 0===b?c:c[b]},access:function(a,b,c){var d;return void 0===b||b&&"string"==typeof b&&void 0===c?(d=this.get(a,b),void 0!==d?d:this.get(a,n.camelCase(b))):(this.set(a,b,c),void 0!==c?c:b)},remove:function(a,b){var c,d,e,f=this.key(a),g=this.cache[f];if(void 0===b)this.cache[f]={};else{n.isArray(b)?d=b.concat(b.map(n.camelCase)):(e=n.camelCase(b),b in g?d=[b,e]:(d=e,d=d in g?[d]:d.match(E)||[])),c=d.length;while(c--)delete g[d[c]]}},hasData:function(a){return!n.isEmptyObject(this.cache[a[this.expando]]||{})},discard:function(a){a[this.expando]&&delete this.cache[a[this.expando]]}};var L=new K,M=new K,N=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,O=/([A-Z])/g;function P(a,b,c){var d;if(void 0===c&&1===a.nodeType)if(d="data-"+b.replace(O,"-$1").toLowerCase(),c=a.getAttribute(d),"string"==typeof c){try{c="true"===c?!0:"false"===c?!1:"null"===c?null:+c+""===c?+c:N.test(c)?n.parseJSON(c):c}catch(e){}M.set(a,b,c)}else c=void 0;return c}n.extend({hasData:function(a){return M.hasData(a)||L.hasData(a)},data:function(a,b,c){
return M.access(a,b,c)},removeData:function(a,b){M.remove(a,b)},_data:function(a,b,c){return L.access(a,b,c)},_removeData:function(a,b){L.remove(a,b)}}),n.fn.extend({data:function(a,b){var c,d,e,f=this[0],g=f&&f.attributes;if(void 0===a){if(this.length&&(e=M.get(f),1===f.nodeType&&!L.get(f,"hasDataAttrs"))){c=g.length;while(c--)g[c]&&(d=g[c].name,0===d.indexOf("data-")&&(d=n.camelCase(d.slice(5)),P(f,d,e[d])));L.set(f,"hasDataAttrs",!0)}return e}return"object"==typeof a?this.each(function(){M.set(this,a)}):J(this,function(b){var c,d=n.camelCase(a);if(f&&void 0===b){if(c=M.get(f,a),void 0!==c)return c;if(c=M.get(f,d),void 0!==c)return c;if(c=P(f,d,void 0),void 0!==c)return c}else this.each(function(){var c=M.get(this,d);M.set(this,d,b),-1!==a.indexOf("-")&&void 0!==c&&M.set(this,a,b)})},null,b,arguments.length>1,null,!0)},removeData:function(a){return this.each(function(){M.remove(this,a)})}}),n.extend({queue:function(a,b,c){var d;return a?(b=(b||"fx")+"queue",d=L.get(a,b),c&&(!d||n.isArray(c)?d=L.access(a,b,n.makeArray(c)):d.push(c)),d||[]):void 0},dequeue:function(a,b){b=b||"fx";var c=n.queue(a,b),d=c.length,e=c.shift(),f=n._queueHooks(a,b),g=function(){n.dequeue(a,b)};"inprogress"===e&&(e=c.shift(),d--),e&&("fx"===b&&c.unshift("inprogress"),delete f.stop,e.call(a,g,f)),!d&&f&&f.empty.fire()},_queueHooks:function(a,b){var c=b+"queueHooks";return L.get(a,c)||L.access(a,c,{empty:n.Callbacks("once memory").add(function(){L.remove(a,[b+"queue",c])})})}}),n.fn.extend({queue:function(a,b){var c=2;return"string"!=typeof a&&(b=a,a="fx",c--),arguments.length<c?n.queue(this[0],a):void 0===b?this:this.each(function(){var c=n.queue(this,a,b);n._queueHooks(this,a),"fx"===a&&"inprogress"!==c[0]&&n.dequeue(this,a)})},dequeue:function(a){return this.each(function(){n.dequeue(this,a)})},clearQueue:function(a){return this.queue(a||"fx",[])},promise:function(a,b){var c,d=1,e=n.Deferred(),f=this,g=this.length,h=function(){--d||e.resolveWith(f,[f])};"string"!=typeof a&&(b=a,a=void 0),a=a||"fx";while(g--)c=L.get(f[g],a+"queueHooks"),c&&c.empty&&(d++,c.empty.add(h));return h(),e.promise(b)}});var Q=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,R=["Top","Right","Bottom","Left"],S=function(a,b){return a=b||a,"none"===n.css(a,"display")||!n.contains(a.ownerDocument,a)},T=/^(?:checkbox|radio)$/i;!function(){var a=l.createDocumentFragment(),b=a.appendChild(l.createElement("div")),c=l.createElement("input");c.setAttribute("type","radio"),c.setAttribute("checked","checked"),c.setAttribute("name","t"),b.appendChild(c),k.checkClone=b.cloneNode(!0).cloneNode(!0).lastChild.checked,b.innerHTML="<textarea>x</textarea>",k.noCloneChecked=!!b.cloneNode(!0).lastChild.defaultValue}();var U="undefined";k.focusinBubbles="onfocusin"in a;var V=/^key/,W=/^(?:mouse|pointer|contextmenu)|click/,X=/^(?:focusinfocus|focusoutblur)$/,Y=/^([^.]*)(?:\.(.+)|)$/;function Z(){return!0}function $(){return!1}function _(){try{return l.activeElement}catch(a){}}n.event={global:{},add:function(a,b,c,d,e){var f,g,h,i,j,k,l,m,o,p,q,r=L.get(a);if(r){c.handler&&(f=c,c=f.handler,e=f.selector),c.guid||(c.guid=n.guid++),(i=r.events)||(i=r.events={}),(g=r.handle)||(g=r.handle=function(b){return typeof n!==U&&n.event.triggered!==b.type?n.event.dispatch.apply(a,arguments):void 0}),b=(b||"").match(E)||[""],j=b.length;while(j--)h=Y.exec(b[j])||[],o=q=h[1],p=(h[2]||"").split(".").sort(),o&&(l=n.event.special[o]||{},o=(e?l.delegateType:l.bindType)||o,l=n.event.special[o]||{},k=n.extend({type:o,origType:q,data:d,handler:c,guid:c.guid,selector:e,needsContext:e&&n.expr.match.needsContext.test(e),namespace:p.join(".")},f),(m=i[o])||(m=i[o]=[],m.delegateCount=0,l.setup&&l.setup.call(a,d,p,g)!==!1||a.addEventListener&&a.addEventListener(o,g,!1)),l.add&&(l.add.call(a,k),k.handler.guid||(k.handler.guid=c.guid)),e?m.splice(m.delegateCount++,0,k):m.push(k),n.event.global[o]=!0)}},remove:function(a,b,c,d,e){var f,g,h,i,j,k,l,m,o,p,q,r=L.hasData(a)&&L.get(a);if(r&&(i=r.events)){b=(b||"").match(E)||[""],j=b.length;while(j--)if(h=Y.exec(b[j])||[],o=q=h[1],p=(h[2]||"").split(".").sort(),o){l=n.event.special[o]||{},o=(d?l.delegateType:l.bindType)||o,m=i[o]||[],h=h[2]&&new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"),g=f=m.length;while(f--)k=m[f],!e&&q!==k.origType||c&&c.guid!==k.guid||h&&!h.test(k.namespace)||d&&d!==k.selector&&("**"!==d||!k.selector)||(m.splice(f,1),k.selector&&m.delegateCount--,l.remove&&l.remove.call(a,k));g&&!m.length&&(l.teardown&&l.teardown.call(a,p,r.handle)!==!1||n.removeEvent(a,o,r.handle),delete i[o])}else for(o in i)n.event.remove(a,o+b[j],c,d,!0);n.isEmptyObject(i)&&(delete r.handle,L.remove(a,"events"))}},trigger:function(b,c,d,e){var f,g,h,i,k,m,o,p=[d||l],q=j.call(b,"type")?b.type:b,r=j.call(b,"namespace")?b.namespace.split("."):[];if(g=h=d=d||l,3!==d.nodeType&&8!==d.nodeType&&!X.test(q+n.event.triggered)&&(q.indexOf(".")>=0&&(r=q.split("."),q=r.shift(),r.sort()),k=q.indexOf(":")<0&&"on"+q,b=b[n.expando]?b:new n.Event(q,"object"==typeof b&&b),b.isTrigger=e?2:3,b.namespace=r.join("."),b.namespace_re=b.namespace?new RegExp("(^|\\.)"+r.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,b.result=void 0,b.target||(b.target=d),c=null==c?[b]:n.makeArray(c,[b]),o=n.event.special[q]||{},e||!o.trigger||o.trigger.apply(d,c)!==!1)){if(!e&&!o.noBubble&&!n.isWindow(d)){for(i=o.delegateType||q,X.test(i+q)||(g=g.parentNode);g;g=g.parentNode)p.push(g),h=g;h===(d.ownerDocument||l)&&p.push(h.defaultView||h.parentWindow||a)}f=0;while((g=p[f++])&&!b.isPropagationStopped())b.type=f>1?i:o.bindType||q,m=(L.get(g,"events")||{})[b.type]&&L.get(g,"handle"),m&&m.apply(g,c),m=k&&g[k],m&&m.apply&&n.acceptData(g)&&(b.result=m.apply(g,c),b.result===!1&&b.preventDefault());return b.type=q,e||b.isDefaultPrevented()||o._default&&o._default.apply(p.pop(),c)!==!1||!n.acceptData(d)||k&&n.isFunction(d[q])&&!n.isWindow(d)&&(h=d[k],h&&(d[k]=null),n.event.triggered=q,d[q](),n.event.triggered=void 0,h&&(d[k]=h)),b.result}},dispatch:function(a){a=n.event.fix(a);var b,c,e,f,g,h=[],i=d.call(arguments),j=(L.get(this,"events")||{})[a.type]||[],k=n.event.special[a.type]||{};if(i[0]=a,a.delegateTarget=this,!k.preDispatch||k.preDispatch.call(this,a)!==!1){h=n.event.handlers.call(this,a,j),b=0;while((f=h[b++])&&!a.isPropagationStopped()){a.currentTarget=f.elem,c=0;while((g=f.handlers[c++])&&!a.isImmediatePropagationStopped())(!a.namespace_re||a.namespace_re.test(g.namespace))&&(a.handleObj=g,a.data=g.data,e=((n.event.special[g.origType]||{}).handle||g.handler).apply(f.elem,i),void 0!==e&&(a.result=e)===!1&&(a.preventDefault(),a.stopPropagation()))}return k.postDispatch&&k.postDispatch.call(this,a),a.result}},handlers:function(a,b){var c,d,e,f,g=[],h=b.delegateCount,i=a.target;if(h&&i.nodeType&&(!a.button||"click"!==a.type))for(;i!==this;i=i.parentNode||this)if(i.disabled!==!0||"click"!==a.type){for(d=[],c=0;h>c;c++)f=b[c],e=f.selector+" ",void 0===d[e]&&(d[e]=f.needsContext?n(e,this).index(i)>=0:n.find(e,this,null,[i]).length),d[e]&&d.push(f);d.length&&g.push({elem:i,handlers:d})}return h<b.length&&g.push({elem:this,handlers:b.slice(h)}),g},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(a,b){return null==a.which&&(a.which=null!=b.charCode?b.charCode:b.keyCode),a}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(a,b){var c,d,e,f=b.button;return null==a.pageX&&null!=b.clientX&&(c=a.target.ownerDocument||l,d=c.documentElement,e=c.body,a.pageX=b.clientX+(d&&d.scrollLeft||e&&e.scrollLeft||0)-(d&&d.clientLeft||e&&e.clientLeft||0),a.pageY=b.clientY+(d&&d.scrollTop||e&&e.scrollTop||0)-(d&&d.clientTop||e&&e.clientTop||0)),a.which||void 0===f||(a.which=1&f?1:2&f?3:4&f?2:0),a}},fix:function(a){if(a[n.expando])return a;var b,c,d,e=a.type,f=a,g=this.fixHooks[e];g||(this.fixHooks[e]=g=W.test(e)?this.mouseHooks:V.test(e)?this.keyHooks:{}),d=g.props?this.props.concat(g.props):this.props,a=new n.Event(f),b=d.length;while(b--)c=d[b],a[c]=f[c];return a.target||(a.target=l),3===a.target.nodeType&&(a.target=a.target.parentNode),g.filter?g.filter(a,f):a},special:{load:{noBubble:!0},focus:{trigger:function(){return this!==_()&&this.focus?(this.focus(),!1):void 0},delegateType:"focusin"},blur:{trigger:function(){return this===_()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return"checkbox"===this.type&&this.click&&n.nodeName(this,"input")?(this.click(),!1):void 0},_default:function(a){return n.nodeName(a.target,"a")}},beforeunload:{postDispatch:function(a){void 0!==a.result&&a.originalEvent&&(a.originalEvent.returnValue=a.result)}}},simulate:function(a,b,c,d){var e=n.extend(new n.Event,c,{type:a,isSimulated:!0,originalEvent:{}});d?n.event.trigger(e,null,b):n.event.dispatch.call(b,e),e.isDefaultPrevented()&&c.preventDefault()}},n.removeEvent=function(a,b,c){a.removeEventListener&&a.removeEventListener(b,c,!1)},n.Event=function(a,b){return this instanceof n.Event?(a&&a.type?(this.originalEvent=a,this.type=a.type,this.isDefaultPrevented=a.defaultPrevented||void 0===a.defaultPrevented&&a.returnValue===!1?Z:$):this.type=a,b&&n.extend(this,b),this.timeStamp=a&&a.timeStamp||n.now(),void(this[n.expando]=!0)):new n.Event(a,b)},n.Event.prototype={isDefaultPrevented:$,isPropagationStopped:$,isImmediatePropagationStopped:$,preventDefault:function(){var a=this.originalEvent;this.isDefaultPrevented=Z,a&&a.preventDefault&&a.preventDefault()},stopPropagation:function(){var a=this.originalEvent;this.isPropagationStopped=Z,a&&a.stopPropagation&&a.stopPropagation()},stopImmediatePropagation:function(){var a=this.originalEvent;this.isImmediatePropagationStopped=Z,a&&a.stopImmediatePropagation&&a.stopImmediatePropagation(),this.stopPropagation()}},n.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(a,b){n.event.special[a]={delegateType:b,bindType:b,handle:function(a){var c,d=this,e=a.relatedTarget,f=a.handleObj;return(!e||e!==d&&!n.contains(d,e))&&(a.type=f.origType,c=f.handler.apply(this,arguments),a.type=b),c}}}),k.focusinBubbles||n.each({focus:"focusin",blur:"focusout"},function(a,b){var c=function(a){n.event.simulate(b,a.target,n.event.fix(a),!0)};n.event.special[b]={setup:function(){var d=this.ownerDocument||this,e=L.access(d,b);e||d.addEventListener(a,c,!0),L.access(d,b,(e||0)+1)},teardown:function(){var d=this.ownerDocument||this,e=L.access(d,b)-1;e?L.access(d,b,e):(d.removeEventListener(a,c,!0),L.remove(d,b))}}}),n.fn.extend({on:function(a,b,c,d,e){var f,g;if("object"==typeof a){"string"!=typeof b&&(c=c||b,b=void 0);for(g in a)this.on(g,b,c,a[g],e);return this}if(null==c&&null==d?(d=b,c=b=void 0):null==d&&("string"==typeof b?(d=c,c=void 0):(d=c,c=b,b=void 0)),d===!1)d=$;else if(!d)return this;return 1===e&&(f=d,d=function(a){return n().off(a),f.apply(this,arguments)},d.guid=f.guid||(f.guid=n.guid++)),this.each(function(){n.event.add(this,a,d,c,b)})},one:function(a,b,c,d){return this.on(a,b,c,d,1)},off:function(a,b,c){var d,e;if(a&&a.preventDefault&&a.handleObj)return d=a.handleObj,n(a.delegateTarget).off(d.namespace?d.origType+"."+d.namespace:d.origType,d.selector,d.handler),this;if("object"==typeof a){for(e in a)this.off(e,b,a[e]);return this}return(b===!1||"function"==typeof b)&&(c=b,b=void 0),c===!1&&(c=$),this.each(function(){n.event.remove(this,a,c,b)})},trigger:function(a,b){return this.each(function(){n.event.trigger(a,b,this)})},triggerHandler:function(a,b){var c=this[0];return c?n.event.trigger(a,b,c,!0):void 0}});var aa=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,ba=/<([\w:]+)/,ca=/<|&#?\w+;/,da=/<(?:script|style|link)/i,ea=/checked\s*(?:[^=]|=\s*.checked.)/i,fa=/^$|\/(?:java|ecma)script/i,ga=/^true\/(.*)/,ha=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,ia={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};ia.optgroup=ia.option,ia.tbody=ia.tfoot=ia.colgroup=ia.caption=ia.thead,ia.th=ia.td;function ja(a,b){return n.nodeName(a,"table")&&n.nodeName(11!==b.nodeType?b:b.firstChild,"tr")?a.getElementsByTagName("tbody")[0]||a.appendChild(a.ownerDocument.createElement("tbody")):a}function ka(a){return a.type=(null!==a.getAttribute("type"))+"/"+a.type,a}function la(a){var b=ga.exec(a.type);return b?a.type=b[1]:a.removeAttribute("type"),a}function ma(a,b){for(var c=0,d=a.length;d>c;c++)L.set(a[c],"globalEval",!b||L.get(b[c],"globalEval"))}function na(a,b){var c,d,e,f,g,h,i,j;if(1===b.nodeType){if(L.hasData(a)&&(f=L.access(a),g=L.set(b,f),j=f.events)){delete g.handle,g.events={};for(e in j)for(c=0,d=j[e].length;d>c;c++)n.event.add(b,e,j[e][c])}M.hasData(a)&&(h=M.access(a),i=n.extend({},h),M.set(b,i))}}function oa(a,b){var c=a.getElementsByTagName?a.getElementsByTagName(b||"*"):a.querySelectorAll?a.querySelectorAll(b||"*"):[];return void 0===b||b&&n.nodeName(a,b)?n.merge([a],c):c}function pa(a,b){var c=b.nodeName.toLowerCase();"input"===c&&T.test(a.type)?b.checked=a.checked:("input"===c||"textarea"===c)&&(b.defaultValue=a.defaultValue)}n.extend({clone:function(a,b,c){var d,e,f,g,h=a.cloneNode(!0),i=n.contains(a.ownerDocument,a);if(!(k.noCloneChecked||1!==a.nodeType&&11!==a.nodeType||n.isXMLDoc(a)))for(g=oa(h),f=oa(a),d=0,e=f.length;e>d;d++)pa(f[d],g[d]);if(b)if(c)for(f=f||oa(a),g=g||oa(h),d=0,e=f.length;e>d;d++)na(f[d],g[d]);else na(a,h);return g=oa(h,"script"),g.length>0&&ma(g,!i&&oa(a,"script")),h},buildFragment:function(a,b,c,d){for(var e,f,g,h,i,j,k=b.createDocumentFragment(),l=[],m=0,o=a.length;o>m;m++)if(e=a[m],e||0===e)if("object"===n.type(e))n.merge(l,e.nodeType?[e]:e);else if(ca.test(e)){f=f||k.appendChild(b.createElement("div")),g=(ba.exec(e)||["",""])[1].toLowerCase(),h=ia[g]||ia._default,f.innerHTML=h[1]+e.replace(aa,"<$1></$2>")+h[2],j=h[0];while(j--)f=f.lastChild;n.merge(l,f.childNodes),f=k.firstChild,f.textContent=""}else l.push(b.createTextNode(e));k.textContent="",m=0;while(e=l[m++])if((!d||-1===n.inArray(e,d))&&(i=n.contains(e.ownerDocument,e),f=oa(k.appendChild(e),"script"),i&&ma(f),c)){j=0;while(e=f[j++])fa.test(e.type||"")&&c.push(e)}return k},cleanData:function(a){for(var b,c,d,e,f=n.event.special,g=0;void 0!==(c=a[g]);g++){if(n.acceptData(c)&&(e=c[L.expando],e&&(b=L.cache[e]))){if(b.events)for(d in b.events)f[d]?n.event.remove(c,d):n.removeEvent(c,d,b.handle);L.cache[e]&&delete L.cache[e]}delete M.cache[c[M.expando]]}}}),n.fn.extend({text:function(a){return J(this,function(a){return void 0===a?n.text(this):this.empty().each(function(){(1===this.nodeType||11===this.nodeType||9===this.nodeType)&&(this.textContent=a)})},null,a,arguments.length)},append:function(){return this.domManip(arguments,function(a){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var b=ja(this,a);b.appendChild(a)}})},prepend:function(){return this.domManip(arguments,function(a){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var b=ja(this,a);b.insertBefore(a,b.firstChild)}})},before:function(){return this.domManip(arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this)})},after:function(){return this.domManip(arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this.nextSibling)})},remove:function(a,b){for(var c,d=a?n.filter(a,this):this,e=0;null!=(c=d[e]);e++)b||1!==c.nodeType||n.cleanData(oa(c)),c.parentNode&&(b&&n.contains(c.ownerDocument,c)&&ma(oa(c,"script")),c.parentNode.removeChild(c));return this},empty:function(){for(var a,b=0;null!=(a=this[b]);b++)1===a.nodeType&&(n.cleanData(oa(a,!1)),a.textContent="");return this},clone:function(a,b){return a=null==a?!1:a,b=null==b?a:b,this.map(function(){return n.clone(this,a,b)})},html:function(a){return J(this,function(a){var b=this[0]||{},c=0,d=this.length;if(void 0===a&&1===b.nodeType)return b.innerHTML;if("string"==typeof a&&!da.test(a)&&!ia[(ba.exec(a)||["",""])[1].toLowerCase()]){a=a.replace(aa,"<$1></$2>");try{for(;d>c;c++)b=this[c]||{},1===b.nodeType&&(n.cleanData(oa(b,!1)),b.innerHTML=a);b=0}catch(e){}}b&&this.empty().append(a)},null,a,arguments.length)},replaceWith:function(){var a=arguments[0];return this.domManip(arguments,function(b){a=this.parentNode,n.cleanData(oa(this)),a&&a.replaceChild(b,this)}),a&&(a.length||a.nodeType)?this:this.remove()},detach:function(a){return this.remove(a,!0)},domManip:function(a,b){a=e.apply([],a);var c,d,f,g,h,i,j=0,l=this.length,m=this,o=l-1,p=a[0],q=n.isFunction(p);if(q||l>1&&"string"==typeof p&&!k.checkClone&&ea.test(p))return this.each(function(c){var d=m.eq(c);q&&(a[0]=p.call(this,c,d.html())),d.domManip(a,b)});if(l&&(c=n.buildFragment(a,this[0].ownerDocument,!1,this),d=c.firstChild,1===c.childNodes.length&&(c=d),d)){for(f=n.map(oa(c,"script"),ka),g=f.length;l>j;j++)h=c,j!==o&&(h=n.clone(h,!0,!0),g&&n.merge(f,oa(h,"script"))),b.call(this[j],h,j);if(g)for(i=f[f.length-1].ownerDocument,n.map(f,la),j=0;g>j;j++)h=f[j],fa.test(h.type||"")&&!L.access(h,"globalEval")&&n.contains(i,h)&&(h.src?n._evalUrl&&n._evalUrl(h.src):n.globalEval(h.textContent.replace(ha,"")))}return this}}),n.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,b){n.fn[a]=function(a){for(var c,d=[],e=n(a),g=e.length-1,h=0;g>=h;h++)c=h===g?this:this.clone(!0),n(e[h])[b](c),f.apply(d,c.get());return this.pushStack(d)}});var qa,ra={};function sa(b,c){var d,e=n(c.createElement(b)).appendTo(c.body),f=a.getDefaultComputedStyle&&(d=a.getDefaultComputedStyle(e[0]))?d.display:n.css(e[0],"display");return e.detach(),f}function ta(a){var b=l,c=ra[a];return c||(c=sa(a,b),"none"!==c&&c||(qa=(qa||n("<iframe frameborder='0' width='0' height='0'/>")).appendTo(b.documentElement),b=qa[0].contentDocument,b.write(),b.close(),c=sa(a,b),qa.detach()),ra[a]=c),c}var ua=/^margin/,va=new RegExp("^("+Q+")(?!px)[a-z%]+$","i"),wa=function(b){return b.ownerDocument.defaultView.opener?b.ownerDocument.defaultView.getComputedStyle(b,null):a.getComputedStyle(b,null)};function xa(a,b,c){var d,e,f,g,h=a.style;return c=c||wa(a),c&&(g=c.getPropertyValue(b)||c[b]),c&&(""!==g||n.contains(a.ownerDocument,a)||(g=n.style(a,b)),va.test(g)&&ua.test(b)&&(d=h.width,e=h.minWidth,f=h.maxWidth,h.minWidth=h.maxWidth=h.width=g,g=c.width,h.width=d,h.minWidth=e,h.maxWidth=f)),void 0!==g?g+"":g}function ya(a,b){return{get:function(){return a()?void delete this.get:(this.get=b).apply(this,arguments)}}}!function(){var b,c,d=l.documentElement,e=l.createElement("div"),f=l.createElement("div");if(f.style){f.style.backgroundClip="content-box",f.cloneNode(!0).style.backgroundClip="",k.clearCloneStyle="content-box"===f.style.backgroundClip,e.style.cssText="border:0;width:0;height:0;top:0;left:-9999px;margin-top:1px;position:absolute",e.appendChild(f);function g(){f.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:block;margin-top:1%;top:1%;border:1px;padding:1px;width:4px;position:absolute",f.innerHTML="",d.appendChild(e);var g=a.getComputedStyle(f,null);b="1%"!==g.top,c="4px"===g.width,d.removeChild(e)}a.getComputedStyle&&n.extend(k,{pixelPosition:function(){return g(),b},boxSizingReliable:function(){return null==c&&g(),c},reliableMarginRight:function(){var b,c=f.appendChild(l.createElement("div"));return c.style.cssText=f.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",c.style.marginRight=c.style.width="0",f.style.width="1px",d.appendChild(e),b=!parseFloat(a.getComputedStyle(c,null).marginRight),d.removeChild(e),f.removeChild(c),b}})}}(),n.swap=function(a,b,c,d){var e,f,g={};for(f in b)g[f]=a.style[f],a.style[f]=b[f];e=c.apply(a,d||[]);for(f in b)a.style[f]=g[f];return e};var za=/^(none|table(?!-c[ea]).+)/,Aa=new RegExp("^("+Q+")(.*)$","i"),Ba=new RegExp("^([+-])=("+Q+")","i"),Ca={position:"absolute",visibility:"hidden",display:"block"},Da={letterSpacing:"0",fontWeight:"400"},Ea=["Webkit","O","Moz","ms"];function Fa(a,b){if(b in a)return b;var c=b[0].toUpperCase()+b.slice(1),d=b,e=Ea.length;while(e--)if(b=Ea[e]+c,b in a)return b;return d}function Ga(a,b,c){var d=Aa.exec(b);return d?Math.max(0,d[1]-(c||0))+(d[2]||"px"):b}function Ha(a,b,c,d,e){for(var f=c===(d?"border":"content")?4:"width"===b?1:0,g=0;4>f;f+=2)"margin"===c&&(g+=n.css(a,c+R[f],!0,e)),d?("content"===c&&(g-=n.css(a,"padding"+R[f],!0,e)),"margin"!==c&&(g-=n.css(a,"border"+R[f]+"Width",!0,e))):(g+=n.css(a,"padding"+R[f],!0,e),"padding"!==c&&(g+=n.css(a,"border"+R[f]+"Width",!0,e)));return g}function Ia(a,b,c){var d=!0,e="width"===b?a.offsetWidth:a.offsetHeight,f=wa(a),g="border-box"===n.css(a,"boxSizing",!1,f);if(0>=e||null==e){if(e=xa(a,b,f),(0>e||null==e)&&(e=a.style[b]),va.test(e))return e;d=g&&(k.boxSizingReliable()||e===a.style[b]),e=parseFloat(e)||0}return e+Ha(a,b,c||(g?"border":"content"),d,f)+"px"}function Ja(a,b){for(var c,d,e,f=[],g=0,h=a.length;h>g;g++)d=a[g],d.style&&(f[g]=L.get(d,"olddisplay"),c=d.style.display,b?(f[g]||"none"!==c||(d.style.display=""),""===d.style.display&&S(d)&&(f[g]=L.access(d,"olddisplay",ta(d.nodeName)))):(e=S(d),"none"===c&&e||L.set(d,"olddisplay",e?c:n.css(d,"display"))));for(g=0;h>g;g++)d=a[g],d.style&&(b&&"none"!==d.style.display&&""!==d.style.display||(d.style.display=b?f[g]||"":"none"));return a}n.extend({cssHooks:{opacity:{get:function(a,b){if(b){var c=xa(a,"opacity");return""===c?"1":c}}}},cssNumber:{columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":"cssFloat"},style:function(a,b,c,d){if(a&&3!==a.nodeType&&8!==a.nodeType&&a.style){var e,f,g,h=n.camelCase(b),i=a.style;return b=n.cssProps[h]||(n.cssProps[h]=Fa(i,h)),g=n.cssHooks[b]||n.cssHooks[h],void 0===c?g&&"get"in g&&void 0!==(e=g.get(a,!1,d))?e:i[b]:(f=typeof c,"string"===f&&(e=Ba.exec(c))&&(c=(e[1]+1)*e[2]+parseFloat(n.css(a,b)),f="number"),null!=c&&c===c&&("number"!==f||n.cssNumber[h]||(c+="px"),k.clearCloneStyle||""!==c||0!==b.indexOf("background")||(i[b]="inherit"),g&&"set"in g&&void 0===(c=g.set(a,c,d))||(i[b]=c)),void 0)}},css:function(a,b,c,d){var e,f,g,h=n.camelCase(b);return b=n.cssProps[h]||(n.cssProps[h]=Fa(a.style,h)),g=n.cssHooks[b]||n.cssHooks[h],g&&"get"in g&&(e=g.get(a,!0,c)),void 0===e&&(e=xa(a,b,d)),"normal"===e&&b in Da&&(e=Da[b]),""===c||c?(f=parseFloat(e),c===!0||n.isNumeric(f)?f||0:e):e}}),n.each(["height","width"],function(a,b){n.cssHooks[b]={get:function(a,c,d){return c?za.test(n.css(a,"display"))&&0===a.offsetWidth?n.swap(a,Ca,function(){return Ia(a,b,d)}):Ia(a,b,d):void 0},set:function(a,c,d){var e=d&&wa(a);return Ga(a,c,d?Ha(a,b,d,"border-box"===n.css(a,"boxSizing",!1,e),e):0)}}}),n.cssHooks.marginRight=ya(k.reliableMarginRight,function(a,b){return b?n.swap(a,{display:"inline-block"},xa,[a,"marginRight"]):void 0}),n.each({margin:"",padding:"",border:"Width"},function(a,b){n.cssHooks[a+b]={expand:function(c){for(var d=0,e={},f="string"==typeof c?c.split(" "):[c];4>d;d++)e[a+R[d]+b]=f[d]||f[d-2]||f[0];return e}},ua.test(a)||(n.cssHooks[a+b].set=Ga)}),n.fn.extend({css:function(a,b){return J(this,function(a,b,c){var d,e,f={},g=0;if(n.isArray(b)){for(d=wa(a),e=b.length;e>g;g++)f[b[g]]=n.css(a,b[g],!1,d);return f}return void 0!==c?n.style(a,b,c):n.css(a,b)},a,b,arguments.length>1)},show:function(){return Ja(this,!0)},hide:function(){return Ja(this)},toggle:function(a){return"boolean"==typeof a?a?this.show():this.hide():this.each(function(){S(this)?n(this).show():n(this).hide()})}});function Ka(a,b,c,d,e){return new Ka.prototype.init(a,b,c,d,e)}n.Tween=Ka,Ka.prototype={constructor:Ka,init:function(a,b,c,d,e,f){this.elem=a,this.prop=c,this.easing=e||"swing",this.options=b,this.start=this.now=this.cur(),this.end=d,this.unit=f||(n.cssNumber[c]?"":"px")},cur:function(){var a=Ka.propHooks[this.prop];return a&&a.get?a.get(this):Ka.propHooks._default.get(this)},run:function(a){var b,c=Ka.propHooks[this.prop];return this.options.duration?this.pos=b=n.easing[this.easing](a,this.options.duration*a,0,1,this.options.duration):this.pos=b=a,this.now=(this.end-this.start)*b+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),c&&c.set?c.set(this):Ka.propHooks._default.set(this),this}},Ka.prototype.init.prototype=Ka.prototype,Ka.propHooks={_default:{get:function(a){var b;return null==a.elem[a.prop]||a.elem.style&&null!=a.elem.style[a.prop]?(b=n.css(a.elem,a.prop,""),b&&"auto"!==b?b:0):a.elem[a.prop]},set:function(a){n.fx.step[a.prop]?n.fx.step[a.prop](a):a.elem.style&&(null!=a.elem.style[n.cssProps[a.prop]]||n.cssHooks[a.prop])?n.style(a.elem,a.prop,a.now+a.unit):a.elem[a.prop]=a.now}}},Ka.propHooks.scrollTop=Ka.propHooks.scrollLeft={set:function(a){a.elem.nodeType&&a.elem.parentNode&&(a.elem[a.prop]=a.now)}},n.easing={linear:function(a){return a},swing:function(a){return.5-Math.cos(a*Math.PI)/2}},n.fx=Ka.prototype.init,n.fx.step={};var La,Ma,Na=/^(?:toggle|show|hide)$/,Oa=new RegExp("^(?:([+-])=|)("+Q+")([a-z%]*)$","i"),Pa=/queueHooks$/,Qa=[Va],Ra={"*":[function(a,b){var c=this.createTween(a,b),d=c.cur(),e=Oa.exec(b),f=e&&e[3]||(n.cssNumber[a]?"":"px"),g=(n.cssNumber[a]||"px"!==f&&+d)&&Oa.exec(n.css(c.elem,a)),h=1,i=20;if(g&&g[3]!==f){f=f||g[3],e=e||[],g=+d||1;do h=h||".5",g/=h,n.style(c.elem,a,g+f);while(h!==(h=c.cur()/d)&&1!==h&&--i)}return e&&(g=c.start=+g||+d||0,c.unit=f,c.end=e[1]?g+(e[1]+1)*e[2]:+e[2]),c}]};function Sa(){return setTimeout(function(){La=void 0}),La=n.now()}function Ta(a,b){var c,d=0,e={height:a};for(b=b?1:0;4>d;d+=2-b)c=R[d],e["margin"+c]=e["padding"+c]=a;return b&&(e.opacity=e.width=a),e}function Ua(a,b,c){for(var d,e=(Ra[b]||[]).concat(Ra["*"]),f=0,g=e.length;g>f;f++)if(d=e[f].call(c,b,a))return d}function Va(a,b,c){var d,e,f,g,h,i,j,k,l=this,m={},o=a.style,p=a.nodeType&&S(a),q=L.get(a,"fxshow");c.queue||(h=n._queueHooks(a,"fx"),null==h.unqueued&&(h.unqueued=0,i=h.empty.fire,h.empty.fire=function(){h.unqueued||i()}),h.unqueued++,l.always(function(){l.always(function(){h.unqueued--,n.queue(a,"fx").length||h.empty.fire()})})),1===a.nodeType&&("height"in b||"width"in b)&&(c.overflow=[o.overflow,o.overflowX,o.overflowY],j=n.css(a,"display"),k="none"===j?L.get(a,"olddisplay")||ta(a.nodeName):j,"inline"===k&&"none"===n.css(a,"float")&&(o.display="inline-block")),c.overflow&&(o.overflow="hidden",l.always(function(){o.overflow=c.overflow[0],o.overflowX=c.overflow[1],o.overflowY=c.overflow[2]}));for(d in b)if(e=b[d],Na.exec(e)){if(delete b[d],f=f||"toggle"===e,e===(p?"hide":"show")){if("show"!==e||!q||void 0===q[d])continue;p=!0}m[d]=q&&q[d]||n.style(a,d)}else j=void 0;if(n.isEmptyObject(m))"inline"===("none"===j?ta(a.nodeName):j)&&(o.display=j);else{q?"hidden"in q&&(p=q.hidden):q=L.access(a,"fxshow",{}),f&&(q.hidden=!p),p?n(a).show():l.done(function(){n(a).hide()}),l.done(function(){var b;L.remove(a,"fxshow");for(b in m)n.style(a,b,m[b])});for(d in m)g=Ua(p?q[d]:0,d,l),d in q||(q[d]=g.start,p&&(g.end=g.start,g.start="width"===d||"height"===d?1:0))}}function Wa(a,b){var c,d,e,f,g;for(c in a)if(d=n.camelCase(c),e=b[d],f=a[c],n.isArray(f)&&(e=f[1],f=a[c]=f[0]),c!==d&&(a[d]=f,delete a[c]),g=n.cssHooks[d],g&&"expand"in g){f=g.expand(f),delete a[d];for(c in f)c in a||(a[c]=f[c],b[c]=e)}else b[d]=e}function Xa(a,b,c){var d,e,f=0,g=Qa.length,h=n.Deferred().always(function(){delete i.elem}),i=function(){if(e)return!1;for(var b=La||Sa(),c=Math.max(0,j.startTime+j.duration-b),d=c/j.duration||0,f=1-d,g=0,i=j.tweens.length;i>g;g++)j.tweens[g].run(f);return h.notifyWith(a,[j,f,c]),1>f&&i?c:(h.resolveWith(a,[j]),!1)},j=h.promise({elem:a,props:n.extend({},b),opts:n.extend(!0,{specialEasing:{}},c),originalProperties:b,originalOptions:c,startTime:La||Sa(),duration:c.duration,tweens:[],createTween:function(b,c){var d=n.Tween(a,j.opts,b,c,j.opts.specialEasing[b]||j.opts.easing);return j.tweens.push(d),d},stop:function(b){var c=0,d=b?j.tweens.length:0;if(e)return this;for(e=!0;d>c;c++)j.tweens[c].run(1);return b?h.resolveWith(a,[j,b]):h.rejectWith(a,[j,b]),this}}),k=j.props;for(Wa(k,j.opts.specialEasing);g>f;f++)if(d=Qa[f].call(j,a,k,j.opts))return d;return n.map(k,Ua,j),n.isFunction(j.opts.start)&&j.opts.start.call(a,j),n.fx.timer(n.extend(i,{elem:a,anim:j,queue:j.opts.queue})),j.progress(j.opts.progress).done(j.opts.done,j.opts.complete).fail(j.opts.fail).always(j.opts.always)}n.Animation=n.extend(Xa,{tweener:function(a,b){n.isFunction(a)?(b=a,a=["*"]):a=a.split(" ");for(var c,d=0,e=a.length;e>d;d++)c=a[d],Ra[c]=Ra[c]||[],Ra[c].unshift(b)},prefilter:function(a,b){b?Qa.unshift(a):Qa.push(a)}}),n.speed=function(a,b,c){var d=a&&"object"==typeof a?n.extend({},a):{complete:c||!c&&b||n.isFunction(a)&&a,duration:a,easing:c&&b||b&&!n.isFunction(b)&&b};return d.duration=n.fx.off?0:"number"==typeof d.duration?d.duration:d.duration in n.fx.speeds?n.fx.speeds[d.duration]:n.fx.speeds._default,(null==d.queue||d.queue===!0)&&(d.queue="fx"),d.old=d.complete,d.complete=function(){n.isFunction(d.old)&&d.old.call(this),d.queue&&n.dequeue(this,d.queue)},d},n.fn.extend({fadeTo:function(a,b,c,d){return this.filter(S).css("opacity",0).show().end().animate({opacity:b},a,c,d)},animate:function(a,b,c,d){var e=n.isEmptyObject(a),f=n.speed(b,c,d),g=function(){var b=Xa(this,n.extend({},a),f);(e||L.get(this,"finish"))&&b.stop(!0)};return g.finish=g,e||f.queue===!1?this.each(g):this.queue(f.queue,g)},stop:function(a,b,c){var d=function(a){var b=a.stop;delete a.stop,b(c)};return"string"!=typeof a&&(c=b,b=a,a=void 0),b&&a!==!1&&this.queue(a||"fx",[]),this.each(function(){var b=!0,e=null!=a&&a+"queueHooks",f=n.timers,g=L.get(this);if(e)g[e]&&g[e].stop&&d(g[e]);else for(e in g)g[e]&&g[e].stop&&Pa.test(e)&&d(g[e]);for(e=f.length;e--;)f[e].elem!==this||null!=a&&f[e].queue!==a||(f[e].anim.stop(c),b=!1,f.splice(e,1));(b||!c)&&n.dequeue(this,a)})},finish:function(a){return a!==!1&&(a=a||"fx"),this.each(function(){var b,c=L.get(this),d=c[a+"queue"],e=c[a+"queueHooks"],f=n.timers,g=d?d.length:0;for(c.finish=!0,n.queue(this,a,[]),e&&e.stop&&e.stop.call(this,!0),b=f.length;b--;)f[b].elem===this&&f[b].queue===a&&(f[b].anim.stop(!0),f.splice(b,1));for(b=0;g>b;b++)d[b]&&d[b].finish&&d[b].finish.call(this);delete c.finish})}}),n.each(["toggle","show","hide"],function(a,b){var c=n.fn[b];n.fn[b]=function(a,d,e){return null==a||"boolean"==typeof a?c.apply(this,arguments):this.animate(Ta(b,!0),a,d,e)}}),n.each({slideDown:Ta("show"),slideUp:Ta("hide"),slideToggle:Ta("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(a,b){n.fn[a]=function(a,c,d){return this.animate(b,a,c,d)}}),n.timers=[],n.fx.tick=function(){var a,b=0,c=n.timers;for(La=n.now();b<c.length;b++)a=c[b],a()||c[b]!==a||c.splice(b--,1);c.length||n.fx.stop(),La=void 0},n.fx.timer=function(a){n.timers.push(a),a()?n.fx.start():n.timers.pop()},n.fx.interval=13,n.fx.start=function(){Ma||(Ma=setInterval(n.fx.tick,n.fx.interval))},n.fx.stop=function(){clearInterval(Ma),Ma=null},n.fx.speeds={slow:600,fast:200,_default:400},n.fn.delay=function(a,b){return a=n.fx?n.fx.speeds[a]||a:a,b=b||"fx",this.queue(b,function(b,c){var d=setTimeout(b,a);c.stop=function(){clearTimeout(d)}})},function(){var a=l.createElement("input"),b=l.createElement("select"),c=b.appendChild(l.createElement("option"));a.type="checkbox",k.checkOn=""!==a.value,k.optSelected=c.selected,b.disabled=!0,k.optDisabled=!c.disabled,a=l.createElement("input"),a.value="t",a.type="radio",k.radioValue="t"===a.value}();var Ya,Za,$a=n.expr.attrHandle;n.fn.extend({attr:function(a,b){return J(this,n.attr,a,b,arguments.length>1)},removeAttr:function(a){return this.each(function(){n.removeAttr(this,a)})}}),n.extend({attr:function(a,b,c){var d,e,f=a.nodeType;if(a&&3!==f&&8!==f&&2!==f)return typeof a.getAttribute===U?n.prop(a,b,c):(1===f&&n.isXMLDoc(a)||(b=b.toLowerCase(),d=n.attrHooks[b]||(n.expr.match.bool.test(b)?Za:Ya)),
void 0===c?d&&"get"in d&&null!==(e=d.get(a,b))?e:(e=n.find.attr(a,b),null==e?void 0:e):null!==c?d&&"set"in d&&void 0!==(e=d.set(a,c,b))?e:(a.setAttribute(b,c+""),c):void n.removeAttr(a,b))},removeAttr:function(a,b){var c,d,e=0,f=b&&b.match(E);if(f&&1===a.nodeType)while(c=f[e++])d=n.propFix[c]||c,n.expr.match.bool.test(c)&&(a[d]=!1),a.removeAttribute(c)},attrHooks:{type:{set:function(a,b){if(!k.radioValue&&"radio"===b&&n.nodeName(a,"input")){var c=a.value;return a.setAttribute("type",b),c&&(a.value=c),b}}}}}),Za={set:function(a,b,c){return b===!1?n.removeAttr(a,c):a.setAttribute(c,c),c}},n.each(n.expr.match.bool.source.match(/\w+/g),function(a,b){var c=$a[b]||n.find.attr;$a[b]=function(a,b,d){var e,f;return d||(f=$a[b],$a[b]=e,e=null!=c(a,b,d)?b.toLowerCase():null,$a[b]=f),e}});var _a=/^(?:input|select|textarea|button)$/i;n.fn.extend({prop:function(a,b){return J(this,n.prop,a,b,arguments.length>1)},removeProp:function(a){return this.each(function(){delete this[n.propFix[a]||a]})}}),n.extend({propFix:{"for":"htmlFor","class":"className"},prop:function(a,b,c){var d,e,f,g=a.nodeType;if(a&&3!==g&&8!==g&&2!==g)return f=1!==g||!n.isXMLDoc(a),f&&(b=n.propFix[b]||b,e=n.propHooks[b]),void 0!==c?e&&"set"in e&&void 0!==(d=e.set(a,c,b))?d:a[b]=c:e&&"get"in e&&null!==(d=e.get(a,b))?d:a[b]},propHooks:{tabIndex:{get:function(a){return a.hasAttribute("tabindex")||_a.test(a.nodeName)||a.href?a.tabIndex:-1}}}}),k.optSelected||(n.propHooks.selected={get:function(a){var b=a.parentNode;return b&&b.parentNode&&b.parentNode.selectedIndex,null}}),n.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){n.propFix[this.toLowerCase()]=this});var ab=/[\t\r\n\f]/g;n.fn.extend({addClass:function(a){var b,c,d,e,f,g,h="string"==typeof a&&a,i=0,j=this.length;if(n.isFunction(a))return this.each(function(b){n(this).addClass(a.call(this,b,this.className))});if(h)for(b=(a||"").match(E)||[];j>i;i++)if(c=this[i],d=1===c.nodeType&&(c.className?(" "+c.className+" ").replace(ab," "):" ")){f=0;while(e=b[f++])d.indexOf(" "+e+" ")<0&&(d+=e+" ");g=n.trim(d),c.className!==g&&(c.className=g)}return this},removeClass:function(a){var b,c,d,e,f,g,h=0===arguments.length||"string"==typeof a&&a,i=0,j=this.length;if(n.isFunction(a))return this.each(function(b){n(this).removeClass(a.call(this,b,this.className))});if(h)for(b=(a||"").match(E)||[];j>i;i++)if(c=this[i],d=1===c.nodeType&&(c.className?(" "+c.className+" ").replace(ab," "):"")){f=0;while(e=b[f++])while(d.indexOf(" "+e+" ")>=0)d=d.replace(" "+e+" "," ");g=a?n.trim(d):"",c.className!==g&&(c.className=g)}return this},toggleClass:function(a,b){var c=typeof a;return"boolean"==typeof b&&"string"===c?b?this.addClass(a):this.removeClass(a):this.each(n.isFunction(a)?function(c){n(this).toggleClass(a.call(this,c,this.className,b),b)}:function(){if("string"===c){var b,d=0,e=n(this),f=a.match(E)||[];while(b=f[d++])e.hasClass(b)?e.removeClass(b):e.addClass(b)}else(c===U||"boolean"===c)&&(this.className&&L.set(this,"__className__",this.className),this.className=this.className||a===!1?"":L.get(this,"__className__")||"")})},hasClass:function(a){for(var b=" "+a+" ",c=0,d=this.length;d>c;c++)if(1===this[c].nodeType&&(" "+this[c].className+" ").replace(ab," ").indexOf(b)>=0)return!0;return!1}});var bb=/\r/g;n.fn.extend({val:function(a){var b,c,d,e=this[0];{if(arguments.length)return d=n.isFunction(a),this.each(function(c){var e;1===this.nodeType&&(e=d?a.call(this,c,n(this).val()):a,null==e?e="":"number"==typeof e?e+="":n.isArray(e)&&(e=n.map(e,function(a){return null==a?"":a+""})),b=n.valHooks[this.type]||n.valHooks[this.nodeName.toLowerCase()],b&&"set"in b&&void 0!==b.set(this,e,"value")||(this.value=e))});if(e)return b=n.valHooks[e.type]||n.valHooks[e.nodeName.toLowerCase()],b&&"get"in b&&void 0!==(c=b.get(e,"value"))?c:(c=e.value,"string"==typeof c?c.replace(bb,""):null==c?"":c)}}}),n.extend({valHooks:{option:{get:function(a){var b=n.find.attr(a,"value");return null!=b?b:n.trim(n.text(a))}},select:{get:function(a){for(var b,c,d=a.options,e=a.selectedIndex,f="select-one"===a.type||0>e,g=f?null:[],h=f?e+1:d.length,i=0>e?h:f?e:0;h>i;i++)if(c=d[i],!(!c.selected&&i!==e||(k.optDisabled?c.disabled:null!==c.getAttribute("disabled"))||c.parentNode.disabled&&n.nodeName(c.parentNode,"optgroup"))){if(b=n(c).val(),f)return b;g.push(b)}return g},set:function(a,b){var c,d,e=a.options,f=n.makeArray(b),g=e.length;while(g--)d=e[g],(d.selected=n.inArray(d.value,f)>=0)&&(c=!0);return c||(a.selectedIndex=-1),f}}}}),n.each(["radio","checkbox"],function(){n.valHooks[this]={set:function(a,b){return n.isArray(b)?a.checked=n.inArray(n(a).val(),b)>=0:void 0}},k.checkOn||(n.valHooks[this].get=function(a){return null===a.getAttribute("value")?"on":a.value})}),n.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(a,b){n.fn[b]=function(a,c){return arguments.length>0?this.on(b,null,a,c):this.trigger(b)}}),n.fn.extend({hover:function(a,b){return this.mouseenter(a).mouseleave(b||a)},bind:function(a,b,c){return this.on(a,null,b,c)},unbind:function(a,b){return this.off(a,null,b)},delegate:function(a,b,c,d){return this.on(b,a,c,d)},undelegate:function(a,b,c){return 1===arguments.length?this.off(a,"**"):this.off(b,a||"**",c)}});var cb=n.now(),db=/\?/;n.parseJSON=function(a){return JSON.parse(a+"")},n.parseXML=function(a){var b,c;if(!a||"string"!=typeof a)return null;try{c=new DOMParser,b=c.parseFromString(a,"text/xml")}catch(d){b=void 0}return(!b||b.getElementsByTagName("parsererror").length)&&n.error("Invalid XML: "+a),b};var eb=/#.*$/,fb=/([?&])_=[^&]*/,gb=/^(.*?):[ \t]*([^\r\n]*)$/gm,hb=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,ib=/^(?:GET|HEAD)$/,jb=/^\/\//,kb=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,lb={},mb={},nb="*/".concat("*"),ob=a.location.href,pb=kb.exec(ob.toLowerCase())||[];function qb(a){return function(b,c){"string"!=typeof b&&(c=b,b="*");var d,e=0,f=b.toLowerCase().match(E)||[];if(n.isFunction(c))while(d=f[e++])"+"===d[0]?(d=d.slice(1)||"*",(a[d]=a[d]||[]).unshift(c)):(a[d]=a[d]||[]).push(c)}}function rb(a,b,c,d){var e={},f=a===mb;function g(h){var i;return e[h]=!0,n.each(a[h]||[],function(a,h){var j=h(b,c,d);return"string"!=typeof j||f||e[j]?f?!(i=j):void 0:(b.dataTypes.unshift(j),g(j),!1)}),i}return g(b.dataTypes[0])||!e["*"]&&g("*")}function sb(a,b){var c,d,e=n.ajaxSettings.flatOptions||{};for(c in b)void 0!==b[c]&&((e[c]?a:d||(d={}))[c]=b[c]);return d&&n.extend(!0,a,d),a}function tb(a,b,c){var d,e,f,g,h=a.contents,i=a.dataTypes;while("*"===i[0])i.shift(),void 0===d&&(d=a.mimeType||b.getResponseHeader("Content-Type"));if(d)for(e in h)if(h[e]&&h[e].test(d)){i.unshift(e);break}if(i[0]in c)f=i[0];else{for(e in c){if(!i[0]||a.converters[e+" "+i[0]]){f=e;break}g||(g=e)}f=f||g}return f?(f!==i[0]&&i.unshift(f),c[f]):void 0}function ub(a,b,c,d){var e,f,g,h,i,j={},k=a.dataTypes.slice();if(k[1])for(g in a.converters)j[g.toLowerCase()]=a.converters[g];f=k.shift();while(f)if(a.responseFields[f]&&(c[a.responseFields[f]]=b),!i&&d&&a.dataFilter&&(b=a.dataFilter(b,a.dataType)),i=f,f=k.shift())if("*"===f)f=i;else if("*"!==i&&i!==f){if(g=j[i+" "+f]||j["* "+f],!g)for(e in j)if(h=e.split(" "),h[1]===f&&(g=j[i+" "+h[0]]||j["* "+h[0]])){g===!0?g=j[e]:j[e]!==!0&&(f=h[0],k.unshift(h[1]));break}if(g!==!0)if(g&&a["throws"])b=g(b);else try{b=g(b)}catch(l){return{state:"parsererror",error:g?l:"No conversion from "+i+" to "+f}}}return{state:"success",data:b}}n.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:ob,type:"GET",isLocal:hb.test(pb[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":nb,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":n.parseJSON,"text xml":n.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(a,b){return b?sb(sb(a,n.ajaxSettings),b):sb(n.ajaxSettings,a)},ajaxPrefilter:qb(lb),ajaxTransport:qb(mb),ajax:function(a,b){"object"==typeof a&&(b=a,a=void 0),b=b||{};var c,d,e,f,g,h,i,j,k=n.ajaxSetup({},b),l=k.context||k,m=k.context&&(l.nodeType||l.jquery)?n(l):n.event,o=n.Deferred(),p=n.Callbacks("once memory"),q=k.statusCode||{},r={},s={},t=0,u="canceled",v={readyState:0,getResponseHeader:function(a){var b;if(2===t){if(!f){f={};while(b=gb.exec(e))f[b[1].toLowerCase()]=b[2]}b=f[a.toLowerCase()]}return null==b?null:b},getAllResponseHeaders:function(){return 2===t?e:null},setRequestHeader:function(a,b){var c=a.toLowerCase();return t||(a=s[c]=s[c]||a,r[a]=b),this},overrideMimeType:function(a){return t||(k.mimeType=a),this},statusCode:function(a){var b;if(a)if(2>t)for(b in a)q[b]=[q[b],a[b]];else v.always(a[v.status]);return this},abort:function(a){var b=a||u;return c&&c.abort(b),x(0,b),this}};if(o.promise(v).complete=p.add,v.success=v.done,v.error=v.fail,k.url=((a||k.url||ob)+"").replace(eb,"").replace(jb,pb[1]+"//"),k.type=b.method||b.type||k.method||k.type,k.dataTypes=n.trim(k.dataType||"*").toLowerCase().match(E)||[""],null==k.crossDomain&&(h=kb.exec(k.url.toLowerCase()),k.crossDomain=!(!h||h[1]===pb[1]&&h[2]===pb[2]&&(h[3]||("http:"===h[1]?"80":"443"))===(pb[3]||("http:"===pb[1]?"80":"443")))),k.data&&k.processData&&"string"!=typeof k.data&&(k.data=n.param(k.data,k.traditional)),rb(lb,k,b,v),2===t)return v;i=n.event&&k.global,i&&0===n.active++&&n.event.trigger("ajaxStart"),k.type=k.type.toUpperCase(),k.hasContent=!ib.test(k.type),d=k.url,k.hasContent||(k.data&&(d=k.url+=(db.test(d)?"&":"?")+k.data,delete k.data),k.cache===!1&&(k.url=fb.test(d)?d.replace(fb,"$1_="+cb++):d+(db.test(d)?"&":"?")+"_="+cb++)),k.ifModified&&(n.lastModified[d]&&v.setRequestHeader("If-Modified-Since",n.lastModified[d]),n.etag[d]&&v.setRequestHeader("If-None-Match",n.etag[d])),(k.data&&k.hasContent&&k.contentType!==!1||b.contentType)&&v.setRequestHeader("Content-Type",k.contentType),v.setRequestHeader("Accept",k.dataTypes[0]&&k.accepts[k.dataTypes[0]]?k.accepts[k.dataTypes[0]]+("*"!==k.dataTypes[0]?", "+nb+"; q=0.01":""):k.accepts["*"]);for(j in k.headers)v.setRequestHeader(j,k.headers[j]);if(k.beforeSend&&(k.beforeSend.call(l,v,k)===!1||2===t))return v.abort();u="abort";for(j in{success:1,error:1,complete:1})v[j](k[j]);if(c=rb(mb,k,b,v)){v.readyState=1,i&&m.trigger("ajaxSend",[v,k]),k.async&&k.timeout>0&&(g=setTimeout(function(){v.abort("timeout")},k.timeout));try{t=1,c.send(r,x)}catch(w){if(!(2>t))throw w;x(-1,w)}}else x(-1,"No Transport");function x(a,b,f,h){var j,r,s,u,w,x=b;2!==t&&(t=2,g&&clearTimeout(g),c=void 0,e=h||"",v.readyState=a>0?4:0,j=a>=200&&300>a||304===a,f&&(u=tb(k,v,f)),u=ub(k,u,v,j),j?(k.ifModified&&(w=v.getResponseHeader("Last-Modified"),w&&(n.lastModified[d]=w),w=v.getResponseHeader("etag"),w&&(n.etag[d]=w)),204===a||"HEAD"===k.type?x="nocontent":304===a?x="notmodified":(x=u.state,r=u.data,s=u.error,j=!s)):(s=x,(a||!x)&&(x="error",0>a&&(a=0))),v.status=a,v.statusText=(b||x)+"",j?o.resolveWith(l,[r,x,v]):o.rejectWith(l,[v,x,s]),v.statusCode(q),q=void 0,i&&m.trigger(j?"ajaxSuccess":"ajaxError",[v,k,j?r:s]),p.fireWith(l,[v,x]),i&&(m.trigger("ajaxComplete",[v,k]),--n.active||n.event.trigger("ajaxStop")))}return v},getJSON:function(a,b,c){return n.get(a,b,c,"json")},getScript:function(a,b){return n.get(a,void 0,b,"script")}}),n.each(["get","post"],function(a,b){n[b]=function(a,c,d,e){return n.isFunction(c)&&(e=e||d,d=c,c=void 0),n.ajax({url:a,type:b,dataType:e,data:c,success:d})}}),n._evalUrl=function(a){return n.ajax({url:a,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})},n.fn.extend({wrapAll:function(a){var b;return n.isFunction(a)?this.each(function(b){n(this).wrapAll(a.call(this,b))}):(this[0]&&(b=n(a,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&b.insertBefore(this[0]),b.map(function(){var a=this;while(a.firstElementChild)a=a.firstElementChild;return a}).append(this)),this)},wrapInner:function(a){return this.each(n.isFunction(a)?function(b){n(this).wrapInner(a.call(this,b))}:function(){var b=n(this),c=b.contents();c.length?c.wrapAll(a):b.append(a)})},wrap:function(a){var b=n.isFunction(a);return this.each(function(c){n(this).wrapAll(b?a.call(this,c):a)})},unwrap:function(){return this.parent().each(function(){n.nodeName(this,"body")||n(this).replaceWith(this.childNodes)}).end()}}),n.expr.filters.hidden=function(a){return a.offsetWidth<=0&&a.offsetHeight<=0},n.expr.filters.visible=function(a){return!n.expr.filters.hidden(a)};var vb=/%20/g,wb=/\[\]$/,xb=/\r?\n/g,yb=/^(?:submit|button|image|reset|file)$/i,zb=/^(?:input|select|textarea|keygen)/i;function Ab(a,b,c,d){var e;if(n.isArray(b))n.each(b,function(b,e){c||wb.test(a)?d(a,e):Ab(a+"["+("object"==typeof e?b:"")+"]",e,c,d)});else if(c||"object"!==n.type(b))d(a,b);else for(e in b)Ab(a+"["+e+"]",b[e],c,d)}n.param=function(a,b){var c,d=[],e=function(a,b){b=n.isFunction(b)?b():null==b?"":b,d[d.length]=encodeURIComponent(a)+"="+encodeURIComponent(b)};if(void 0===b&&(b=n.ajaxSettings&&n.ajaxSettings.traditional),n.isArray(a)||a.jquery&&!n.isPlainObject(a))n.each(a,function(){e(this.name,this.value)});else for(c in a)Ab(c,a[c],b,e);return d.join("&").replace(vb,"+")},n.fn.extend({serialize:function(){return n.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var a=n.prop(this,"elements");return a?n.makeArray(a):this}).filter(function(){var a=this.type;return this.name&&!n(this).is(":disabled")&&zb.test(this.nodeName)&&!yb.test(a)&&(this.checked||!T.test(a))}).map(function(a,b){var c=n(this).val();return null==c?null:n.isArray(c)?n.map(c,function(a){return{name:b.name,value:a.replace(xb,"\r\n")}}):{name:b.name,value:c.replace(xb,"\r\n")}}).get()}}),n.ajaxSettings.xhr=function(){try{return new XMLHttpRequest}catch(a){}};var Bb=0,Cb={},Db={0:200,1223:204},Eb=n.ajaxSettings.xhr();a.attachEvent&&a.attachEvent("onunload",function(){for(var a in Cb)Cb[a]()}),k.cors=!!Eb&&"withCredentials"in Eb,k.ajax=Eb=!!Eb,n.ajaxTransport(function(a){var b;return k.cors||Eb&&!a.crossDomain?{send:function(c,d){var e,f=a.xhr(),g=++Bb;if(f.open(a.type,a.url,a.async,a.username,a.password),a.xhrFields)for(e in a.xhrFields)f[e]=a.xhrFields[e];a.mimeType&&f.overrideMimeType&&f.overrideMimeType(a.mimeType),a.crossDomain||c["X-Requested-With"]||(c["X-Requested-With"]="XMLHttpRequest");for(e in c)f.setRequestHeader(e,c[e]);b=function(a){return function(){b&&(delete Cb[g],b=f.onload=f.onerror=null,"abort"===a?f.abort():"error"===a?d(f.status,f.statusText):d(Db[f.status]||f.status,f.statusText,"string"==typeof f.responseText?{text:f.responseText}:void 0,f.getAllResponseHeaders()))}},f.onload=b(),f.onerror=b("error"),b=Cb[g]=b("abort");try{f.send(a.hasContent&&a.data||null)}catch(h){if(b)throw h}},abort:function(){b&&b()}}:void 0}),n.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(a){return n.globalEval(a),a}}}),n.ajaxPrefilter("script",function(a){void 0===a.cache&&(a.cache=!1),a.crossDomain&&(a.type="GET")}),n.ajaxTransport("script",function(a){if(a.crossDomain){var b,c;return{send:function(d,e){b=n("<script>").prop({async:!0,charset:a.scriptCharset,src:a.url}).on("load error",c=function(a){b.remove(),c=null,a&&e("error"===a.type?404:200,a.type)}),l.head.appendChild(b[0])},abort:function(){c&&c()}}}});var Fb=[],Gb=/(=)\?(?=&|$)|\?\?/;n.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var a=Fb.pop()||n.expando+"_"+cb++;return this[a]=!0,a}}),n.ajaxPrefilter("json jsonp",function(b,c,d){var e,f,g,h=b.jsonp!==!1&&(Gb.test(b.url)?"url":"string"==typeof b.data&&!(b.contentType||"").indexOf("application/x-www-form-urlencoded")&&Gb.test(b.data)&&"data");return h||"jsonp"===b.dataTypes[0]?(e=b.jsonpCallback=n.isFunction(b.jsonpCallback)?b.jsonpCallback():b.jsonpCallback,h?b[h]=b[h].replace(Gb,"$1"+e):b.jsonp!==!1&&(b.url+=(db.test(b.url)?"&":"?")+b.jsonp+"="+e),b.converters["script json"]=function(){return g||n.error(e+" was not called"),g[0]},b.dataTypes[0]="json",f=a[e],a[e]=function(){g=arguments},d.always(function(){a[e]=f,b[e]&&(b.jsonpCallback=c.jsonpCallback,Fb.push(e)),g&&n.isFunction(f)&&f(g[0]),g=f=void 0}),"script"):void 0}),n.parseHTML=function(a,b,c){if(!a||"string"!=typeof a)return null;"boolean"==typeof b&&(c=b,b=!1),b=b||l;var d=v.exec(a),e=!c&&[];return d?[b.createElement(d[1])]:(d=n.buildFragment([a],b,e),e&&e.length&&n(e).remove(),n.merge([],d.childNodes))};var Hb=n.fn.load;n.fn.load=function(a,b,c){if("string"!=typeof a&&Hb)return Hb.apply(this,arguments);var d,e,f,g=this,h=a.indexOf(" ");return h>=0&&(d=n.trim(a.slice(h)),a=a.slice(0,h)),n.isFunction(b)?(c=b,b=void 0):b&&"object"==typeof b&&(e="POST"),g.length>0&&n.ajax({url:a,type:e,dataType:"html",data:b}).done(function(a){f=arguments,g.html(d?n("<div>").append(n.parseHTML(a)).find(d):a)}).complete(c&&function(a,b){g.each(c,f||[a.responseText,b,a])}),this},n.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(a,b){n.fn[b]=function(a){return this.on(b,a)}}),n.expr.filters.animated=function(a){return n.grep(n.timers,function(b){return a===b.elem}).length};var Ib=a.document.documentElement;function Jb(a){return n.isWindow(a)?a:9===a.nodeType&&a.defaultView}n.offset={setOffset:function(a,b,c){var d,e,f,g,h,i,j,k=n.css(a,"position"),l=n(a),m={};"static"===k&&(a.style.position="relative"),h=l.offset(),f=n.css(a,"top"),i=n.css(a,"left"),j=("absolute"===k||"fixed"===k)&&(f+i).indexOf("auto")>-1,j?(d=l.position(),g=d.top,e=d.left):(g=parseFloat(f)||0,e=parseFloat(i)||0),n.isFunction(b)&&(b=b.call(a,c,h)),null!=b.top&&(m.top=b.top-h.top+g),null!=b.left&&(m.left=b.left-h.left+e),"using"in b?b.using.call(a,m):l.css(m)}},n.fn.extend({offset:function(a){if(arguments.length)return void 0===a?this:this.each(function(b){n.offset.setOffset(this,a,b)});var b,c,d=this[0],e={top:0,left:0},f=d&&d.ownerDocument;if(f)return b=f.documentElement,n.contains(b,d)?(typeof d.getBoundingClientRect!==U&&(e=d.getBoundingClientRect()),c=Jb(f),{top:e.top+c.pageYOffset-b.clientTop,left:e.left+c.pageXOffset-b.clientLeft}):e},position:function(){if(this[0]){var a,b,c=this[0],d={top:0,left:0};return"fixed"===n.css(c,"position")?b=c.getBoundingClientRect():(a=this.offsetParent(),b=this.offset(),n.nodeName(a[0],"html")||(d=a.offset()),d.top+=n.css(a[0],"borderTopWidth",!0),d.left+=n.css(a[0],"borderLeftWidth",!0)),{top:b.top-d.top-n.css(c,"marginTop",!0),left:b.left-d.left-n.css(c,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){var a=this.offsetParent||Ib;while(a&&!n.nodeName(a,"html")&&"static"===n.css(a,"position"))a=a.offsetParent;return a||Ib})}}),n.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(b,c){var d="pageYOffset"===c;n.fn[b]=function(e){return J(this,function(b,e,f){var g=Jb(b);return void 0===f?g?g[c]:b[e]:void(g?g.scrollTo(d?a.pageXOffset:f,d?f:a.pageYOffset):b[e]=f)},b,e,arguments.length,null)}}),n.each(["top","left"],function(a,b){n.cssHooks[b]=ya(k.pixelPosition,function(a,c){return c?(c=xa(a,b),va.test(c)?n(a).position()[b]+"px":c):void 0})}),n.each({Height:"height",Width:"width"},function(a,b){n.each({padding:"inner"+a,content:b,"":"outer"+a},function(c,d){n.fn[d]=function(d,e){var f=arguments.length&&(c||"boolean"!=typeof d),g=c||(d===!0||e===!0?"margin":"border");return J(this,function(b,c,d){var e;return n.isWindow(b)?b.document.documentElement["client"+a]:9===b.nodeType?(e=b.documentElement,Math.max(b.body["scroll"+a],e["scroll"+a],b.body["offset"+a],e["offset"+a],e["client"+a])):void 0===d?n.css(b,c,g):n.style(b,c,d,g)},b,f?d:void 0,f,null)}})}),n.fn.size=function(){return this.length},n.fn.andSelf=n.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],function(){return n});var Kb=a.jQuery,Lb=a.$;return n.noConflict=function(b){return a.$===n&&(a.$=Lb),b&&a.jQuery===n&&(a.jQuery=Kb),n},typeof b===U&&(a.jQuery=a.$=n),n});
//# sourceMappingURL=jquery.min.map
 /*
 * # Semantic UI - 2.1.4
 * https://github.com/Semantic-Org/Semantic-UI
 * http://www.semantic-ui.com/
 *
 * Copyright 2014 Contributors
 * Released under the MIT license
 * http://opensource.org/licenses/MIT
 *
 */
!function(e,t,n,i){e.site=e.fn.site=function(o){var a,r,s=(new Date).getTime(),c=[],l=arguments[0],u="string"==typeof l,d=[].slice.call(arguments,1),m=e.isPlainObject(o)?e.extend(!0,{},e.site.settings,o):e.extend({},e.site.settings),f=m.namespace,g=m.error,p="module-"+f,v=e(n),h=v,b=this,y=h.data(p);return a={initialize:function(){a.instantiate()},instantiate:function(){a.verbose("Storing instance of site",a),y=a,h.data(p,a)},normalize:function(){a.fix.console(),a.fix.requestAnimationFrame()},fix:{console:function(){a.debug("Normalizing window.console"),(console===i||console.log===i)&&(a.verbose("Console not available, normalizing events"),a.disable.console()),("undefined"==typeof console.group||"undefined"==typeof console.groupEnd||"undefined"==typeof console.groupCollapsed)&&(a.verbose("Console group not available, normalizing events"),t.console.group=function(){},t.console.groupEnd=function(){},t.console.groupCollapsed=function(){}),"undefined"==typeof console.markTimeline&&(a.verbose("Mark timeline not available, normalizing events"),t.console.markTimeline=function(){})},consoleClear:function(){a.debug("Disabling programmatic console clearing"),t.console.clear=function(){}},requestAnimationFrame:function(){a.debug("Normalizing requestAnimationFrame"),t.requestAnimationFrame===i&&(a.debug("RequestAnimationFrame not available, normalizing event"),t.requestAnimationFrame=t.requestAnimationFrame||t.mozRequestAnimationFrame||t.webkitRequestAnimationFrame||t.msRequestAnimationFrame||function(e){setTimeout(e,0)})}},moduleExists:function(t){return e.fn[t]!==i&&e.fn[t].settings!==i},enabled:{modules:function(t){var n=[];return t=t||m.modules,e.each(t,function(e,t){a.moduleExists(t)&&n.push(t)}),n}},disabled:{modules:function(t){var n=[];return t=t||m.modules,e.each(t,function(e,t){a.moduleExists(t)||n.push(t)}),n}},change:{setting:function(t,n,o,r){o="string"==typeof o?"all"===o?m.modules:[o]:o||m.modules,r=r!==i?r:!0,e.each(o,function(i,o){var s,c=a.moduleExists(o)?e.fn[o].settings.namespace||!1:!0;a.moduleExists(o)&&(a.verbose("Changing default setting",t,n,o),e.fn[o].settings[t]=n,r&&c&&(s=e(":data(module-"+c+")"),s.length>0&&(a.verbose("Modifying existing settings",s),s[o]("setting",t,n))))})},settings:function(t,n,o){n="string"==typeof n?[n]:n||m.modules,o=o!==i?o:!0,e.each(n,function(n,i){var r;a.moduleExists(i)&&(a.verbose("Changing default setting",t,i),e.extend(!0,e.fn[i].settings,t),o&&f&&(r=e(":data(module-"+f+")"),r.length>0&&(a.verbose("Modifying existing settings",r),r[i]("setting",t))))})}},enable:{console:function(){a.console(!0)},debug:function(e,t){e=e||m.modules,a.debug("Enabling debug for modules",e),a.change.setting("debug",!0,e,t)},verbose:function(e,t){e=e||m.modules,a.debug("Enabling verbose debug for modules",e),a.change.setting("verbose",!0,e,t)}},disable:{console:function(){a.console(!1)},debug:function(e,t){e=e||m.modules,a.debug("Disabling debug for modules",e),a.change.setting("debug",!1,e,t)},verbose:function(e,t){e=e||m.modules,a.debug("Disabling verbose debug for modules",e),a.change.setting("verbose",!1,e,t)}},console:function(e){if(e){if(y.cache.console===i)return void a.error(g.console);a.debug("Restoring console function"),t.console=y.cache.console}else a.debug("Disabling console function"),y.cache.console=t.console,t.console={clear:function(){},error:function(){},group:function(){},groupCollapsed:function(){},groupEnd:function(){},info:function(){},log:function(){},markTimeline:function(){},warn:function(){}}},destroy:function(){a.verbose("Destroying previous site for",h),h.removeData(p)},cache:{},setting:function(t,n){if(e.isPlainObject(t))e.extend(!0,m,t);else{if(n===i)return m[t];m[t]=n}},internal:function(t,n){if(e.isPlainObject(t))e.extend(!0,a,t);else{if(n===i)return a[t];a[t]=n}},debug:function(){m.debug&&(m.performance?a.performance.log(arguments):(a.debug=Function.prototype.bind.call(console.info,console,m.name+":"),a.debug.apply(console,arguments)))},verbose:function(){m.verbose&&m.debug&&(m.performance?a.performance.log(arguments):(a.verbose=Function.prototype.bind.call(console.info,console,m.name+":"),a.verbose.apply(console,arguments)))},error:function(){a.error=Function.prototype.bind.call(console.error,console,m.name+":"),a.error.apply(console,arguments)},performance:{log:function(e){var t,n,i;m.performance&&(t=(new Date).getTime(),i=s||t,n=t-i,s=t,c.push({Element:b,Name:e[0],Arguments:[].slice.call(e,1)||"","Execution Time":n})),clearTimeout(a.performance.timer),a.performance.timer=setTimeout(a.performance.display,500)},display:function(){var t=m.name+":",n=0;s=!1,clearTimeout(a.performance.timer),e.each(c,function(e,t){n+=t["Execution Time"]}),t+=" "+n+"ms",(console.group!==i||console.table!==i)&&c.length>0&&(console.groupCollapsed(t),console.table?console.table(c):e.each(c,function(e,t){console.log(t.Name+": "+t["Execution Time"]+"ms")}),console.groupEnd()),c=[]}},invoke:function(t,n,o){var s,c,l,u=y;return n=n||d,o=b||o,"string"==typeof t&&u!==i&&(t=t.split(/[\. ]/),s=t.length-1,e.each(t,function(n,o){var r=n!=s?o+t[n+1].charAt(0).toUpperCase()+t[n+1].slice(1):t;if(e.isPlainObject(u[r])&&n!=s)u=u[r];else{if(u[r]!==i)return c=u[r],!1;if(!e.isPlainObject(u[o])||n==s)return u[o]!==i?(c=u[o],!1):(a.error(g.method,t),!1);u=u[o]}})),e.isFunction(c)?l=c.apply(o,n):c!==i&&(l=c),e.isArray(r)?r.push(l):r!==i?r=[r,l]:l!==i&&(r=l),c}},u?(y===i&&a.initialize(),a.invoke(l)):(y!==i&&a.destroy(),a.initialize()),r!==i?r:this},e.site.settings={name:"Site",namespace:"site",error:{console:"Console cannot be restored, most likely it was overwritten outside of module",method:"The method you called is not defined."},debug:!1,verbose:!1,performance:!0,modules:["accordion","api","checkbox","dimmer","dropdown","embed","form","modal","nag","popup","rating","shape","sidebar","state","sticky","tab","transition","visit","visibility"],siteNamespace:"site",namespaceStub:{cache:{},config:{},sections:{},section:{},utilities:{}}},e.extend(e.expr[":"],{data:e.expr.createPseudo?e.expr.createPseudo(function(t){return function(n){return!!e.data(n,t)}}):function(t,n,i){return!!e.data(t,i[3])}})}(jQuery,window,document),function(e,t,n,i){"use strict";e.fn.form=function(t){var o,a=e(this),r=a.selector||"",s=(new Date).getTime(),c=[],l=arguments[0],u=arguments[1],d="string"==typeof l,m=[].slice.call(arguments,1);return a.each(function(){var f,g,p,v,h,b,y,x,C,w,k,S,T,A,R,P,E,F,D=e(this),O=this,q=[],j=!1;F={initialize:function(){F.get.settings(),d?(E===i&&F.instantiate(),F.invoke(l)):(F.verbose("Initializing form validation",D,x),F.bindEvents(),F.set.defaults(),F.instantiate())},instantiate:function(){F.verbose("Storing instance of module",F),E=F,D.data(R,F)},destroy:function(){F.verbose("Destroying previous module",E),F.removeEvents(),D.removeData(R)},refresh:function(){F.verbose("Refreshing selector cache"),f=D.find(k.field),g=D.find(k.group),p=D.find(k.message),v=D.find(k.prompt),h=D.find(k.submit),b=D.find(k.clear),y=D.find(k.reset)},submit:function(){F.verbose("Submitting form",D),D.submit()},attachEvents:function(t,n){n=n||"submit",e(t).on("click"+P,function(e){F[n](),e.preventDefault()})},bindEvents:function(){F.verbose("Attaching form events"),D.on("submit"+P,F.validate.form).on("blur"+P,k.field,F.event.field.blur).on("click"+P,k.submit,F.submit).on("click"+P,k.reset,F.reset).on("click"+P,k.clear,F.clear),x.keyboardShortcuts&&D.on("keydown"+P,k.field,F.event.field.keydown),f.each(function(){var t=e(this),n=t.prop("type"),i=F.get.changeEvent(n,t);e(this).on(i+P,F.event.field.change)})},clear:function(){f.each(function(){var t=e(this),n=t.parent(),i=t.closest(g),o=i.find(k.prompt),a=t.data(w.defaultValue)||"",r=n.is(k.uiCheckbox),s=n.is(k.uiDropdown),c=i.hasClass(S.error);c&&(F.verbose("Resetting error on field",i),i.removeClass(S.error),o.remove()),s?(F.verbose("Resetting dropdown value",n,a),n.dropdown("clear")):r?t.prop("checked",!1):(F.verbose("Resetting field value",t,a),t.val(""))})},reset:function(){f.each(function(){var t=e(this),n=t.parent(),o=t.closest(g),a=o.find(k.prompt),r=t.data(w.defaultValue),s=n.is(k.uiCheckbox),c=n.is(k.uiDropdown),l=o.hasClass(S.error);r!==i&&(l&&(F.verbose("Resetting error on field",o),o.removeClass(S.error),a.remove()),c?(F.verbose("Resetting dropdown value",n,r),n.dropdown("restore defaults")):s?(F.verbose("Resetting checkbox value",n,r),t.prop("checked",r)):(F.verbose("Resetting field value",t,r),t.val(r)))})},is:{bracketedRule:function(e){return e.type&&e.type.match(x.regExp.bracket)},valid:function(){var t=!0;return F.verbose("Checking if form is valid"),e.each(C,function(e,n){F.validate.field(n,e)||(t=!1)}),t}},removeEvents:function(){D.off(P),f.off(P),h.off(P),f.off(P)},event:{field:{keydown:function(t){var n=e(this),i=t.which,o={enter:13,escape:27};i==o.escape&&(F.verbose("Escape key pressed blurring field"),n.blur()),!t.ctrlKey&&i==o.enter&&n.is(k.input)&&n.not(k.checkbox).length>0&&(j||(n.one("keyup"+P,F.event.field.keyup),F.submit(),F.debug("Enter pressed on input submitting form")),j=!0)},keyup:function(){j=!1},blur:function(t){var n=e(this),i=n.closest(g),o=F.get.validation(n);i.hasClass(S.error)?(F.debug("Revalidating field",n,o),F.validate.form.call(F,t,!0)):("blur"==x.on||"change"==x.on)&&F.validate.field(o)},change:function(t){var n=e(this),i=n.closest(g);("change"==x.on||i.hasClass(S.error)&&x.revalidate)&&(clearTimeout(F.timer),F.timer=setTimeout(function(){F.debug("Revalidating field",n,F.get.validation(n)),F.validate.form.call(F,t,!0)},x.delay))}}},get:{ancillaryValue:function(e){return e.type&&F.is.bracketedRule(e)?e.type.match(x.regExp.bracket)[1]+"":!1},ruleName:function(e){return F.is.bracketedRule(e)?e.type.replace(e.type.match(x.regExp.bracket)[0],""):e.type},changeEvent:function(e,t){return"checkbox"==e||"radio"==e||"hidden"==e||t.is("select")?"change":F.get.inputEvent()},inputEvent:function(){return n.createElement("input").oninput!==i?"input":n.createElement("input").onpropertychange!==i?"propertychange":"keyup"},prompt:function(e,t){var n,i,o,a=F.get.ruleName(e),r=F.get.ancillaryValue(e),s=e.prompt||x.prompt[a]||x.text.unspecifiedRule,c=-1!==s.search("{value}"),l=-1!==s.search("{name}");return(l||c)&&(i=F.get.field(t.identifier)),c&&(s=s.replace("{value}",i.val())),l&&(n=i.closest(k.group).find("label").eq(0),o=1==n.size()?n.text():i.prop("placeholder")||x.text.unspecifiedField,s=s.replace("{name}",o)),s=s.replace("{identifier}",t.identifier),s=s.replace("{ruleValue}",r),e.prompt||F.verbose("Using default validation prompt for type",s,a),s},settings:function(){if(e.isPlainObject(t)){var n,o=Object.keys(t),a=o.length>0?t[o[0]].identifier!==i&&t[o[0]].rules!==i:!1;a?(x=e.extend(!0,{},e.fn.form.settings,u),C=e.extend({},e.fn.form.settings.defaults,t),F.error(x.error.oldSyntax,O),F.verbose("Extending settings from legacy parameters",C,x)):(t.fields&&(n=Object.keys(t.fields),("string"==typeof t.fields[n[0]]||e.isArray(t.fields[n[0]]))&&e.each(t.fields,function(n,i){"string"==typeof i&&(i=[i]),t.fields[n]={rules:[]},e.each(i,function(e,i){t.fields[n].rules.push({type:i})})})),x=e.extend(!0,{},e.fn.form.settings,t),C=e.extend({},e.fn.form.settings.defaults,x.fields),F.verbose("Extending settings",C,x))}else x=e.fn.form.settings,C=e.fn.form.settings.defaults,F.verbose("Using default form validation",C,x);A=x.namespace,w=x.metadata,k=x.selector,S=x.className,T=x.error,R="module-"+A,P="."+A,E=D.data(R),F.refresh()},field:function(t){return F.verbose("Finding field with identifier",t),f.filter("#"+t).length>0?f.filter("#"+t):f.filter('[name="'+t+'"]').length>0?f.filter('[name="'+t+'"]'):f.filter('[name="'+t+'[]"]').length>0?f.filter('[name="'+t+'[]"]'):f.filter("[data-"+w.validate+'="'+t+'"]').length>0?f.filter("[data-"+w.validate+'="'+t+'"]'):e("<input/>")},fields:function(t){var n=e();return e.each(t,function(e,t){n=n.add(F.get.field(t))}),n},validation:function(t){var n,i;return C?(e.each(C,function(e,o){i=o.identifier||e,F.get.field(i)[0]==t[0]&&(o.identifier=i,n=o)}),n||!1):!1},value:function(e){var t,n=[];return n.push(e),t=F.get.values.call(O,n),t[e]},values:function(t){var n=e.isArray(t)?F.get.fields(t):f,i={};return n.each(function(t,n){var o=e(n),a=(o.prop("type"),o.prop("name")),r=o.val(),s=o.is(k.checkbox),c=o.is(k.radio),l=-1!==a.indexOf("[]"),u=s?o.is(":checked"):!1;a&&(l?(a=a.replace("[]",""),i[a]||(i[a]=[]),i[a].push(s?u?r||!0:!1:r)):c?u&&(i[a]=r):i[a]=s?u?r||!0:!1:r)}),i}},has:{field:function(e){return F.verbose("Checking for existence of a field with identifier",e),"string"!=typeof e&&F.error(T.identifier,e),f.filter("#"+e).length>0?!0:f.filter('[name="'+e+'"]').length>0?!0:f.filter("[data-"+w.validate+'="'+e+'"]').length>0?!0:!1}},add:{prompt:function(t,n){var o=F.get.field(t),a=o.closest(g),r=a.children(k.prompt),s=0!==r.length;n="string"==typeof n?[n]:n,F.verbose("Adding field error state",t),a.addClass(S.error),x.inline&&(s||(r=x.templates.prompt(n),r.appendTo(a)),r.html(n[0]),s?F.verbose("Inline errors are disabled, no inline error added",t):x.transition&&e.fn.transition!==i&&D.transition("is supported")?(F.verbose("Displaying error with css transition",x.transition),r.transition(x.transition+" in",x.duration)):(F.verbose("Displaying error with fallback javascript animation"),r.fadeIn(x.duration)))},errors:function(e){F.debug("Adding form error messages",e),F.set.error(),p.html(x.templates.error(e))}},remove:{prompt:function(t){var n=F.get.field(t),o=n.closest(g),a=o.children(k.prompt);o.removeClass(S.error),x.inline&&a.is(":visible")&&(F.verbose("Removing prompt for field",t),x.transition&&e.fn.transition!==i&&D.transition("is supported")?a.transition(x.transition+" out",x.duration,function(){a.remove()}):a.fadeOut(x.duration,function(){a.remove()}))}},set:{success:function(){D.removeClass(S.error).addClass(S.success)},defaults:function(){f.each(function(){var t=e(this),n=t.filter(k.checkbox).length>0,i=n?t.is(":checked"):t.val();t.data(w.defaultValue,i)})},error:function(){D.removeClass(S.success).addClass(S.error)},value:function(e,t){var n={};return n[e]=t,F.set.values.call(O,n)},values:function(t){e.isEmptyObject(t)||e.each(t,function(t,n){var i,o=F.get.field(t),a=o.parent(),r=e.isArray(n),s=a.is(k.uiCheckbox),c=a.is(k.uiDropdown),l=o.is(k.radio)&&s,u=o.length>0;u&&(r&&s?(F.verbose("Selecting multiple",n,o),a.checkbox("uncheck"),e.each(n,function(e,t){i=o.filter('[value="'+t+'"]'),a=i.parent(),i.length>0&&a.checkbox("check")})):l?(F.verbose("Selecting radio value",n,o),o.filter('[value="'+n+'"]').parent(k.uiCheckbox).checkbox("check")):s?(F.verbose("Setting checkbox value",n,a),a.checkbox(n===!0?"check":"uncheck")):c?(F.verbose("Setting dropdown value",n,a),a.dropdown("set selected",n)):(F.verbose("Setting field value",n,o),o.val(n)))})}},validate:{form:function(e,t){var n=F.get.values();if(j)return!1;if(q=[],F.is.valid()){if(F.debug("Form has no validation errors, submitting"),F.set.success(),t!==!0)return x.onSuccess.call(O,e,n)}else if(F.debug("Form has errors"),F.set.error(),x.inline||F.add.errors(q),D.data("moduleApi")!==i&&e.stopImmediatePropagation(),t!==!0)return x.onFailure.call(O,q,n)},field:function(t,n){var o=t.identifier||n,a=F.get.field(o),r=!0,s=[];return t.identifier||(F.debug("Using field name as identifier",o),t.identifier=o),a.prop("disabled")?(F.debug("Field is disabled. Skipping",o),r=!0):t.optional&&""===e.trim(a.val())?(F.debug("Field is optional and empty. Skipping",o),r=!0):t.rules!==i&&e.each(t.rules,function(e,n){F.has.field(o)&&!F.validate.rule(t,n)&&(F.debug("Field is invalid",o,n.type),s.push(F.get.prompt(n,t)),r=!1)}),r?(F.remove.prompt(o,s),x.onValid.call(a),!0):(q=q.concat(s),F.add.prompt(o,s),x.onInvalid.call(a,s),!1)},rule:function(t,n){var o=F.get.field(t.identifier),a=(n.type,o.val()),r=F.get.ancillaryValue(n),s=F.get.ruleName(n),c=x.rules[s];return e.isFunction(c)?(a=a===i||""===a||null===a?"":e.trim(a+""),c.call(o,a,r)):void F.error(T.noRule,s)}},setting:function(t,n){if(e.isPlainObject(t))e.extend(!0,x,t);else{if(n===i)return x[t];x[t]=n}},internal:function(t,n){if(e.isPlainObject(t))e.extend(!0,F,t);else{if(n===i)return F[t];F[t]=n}},debug:function(){x.debug&&(x.performance?F.performance.log(arguments):(F.debug=Function.prototype.bind.call(console.info,console,x.name+":"),F.debug.apply(console,arguments)))},verbose:function(){x.verbose&&x.debug&&(x.performance?F.performance.log(arguments):(F.verbose=Function.prototype.bind.call(console.info,console,x.name+":"),F.verbose.apply(console,arguments)))},error:function(){F.error=Function.prototype.bind.call(console.error,console,x.name+":"),F.error.apply(console,arguments)},performance:{log:function(e){var t,n,i;x.performance&&(t=(new Date).getTime(),i=s||t,n=t-i,s=t,c.push({Name:e[0],Arguments:[].slice.call(e,1)||"",Element:O,"Execution Time":n})),clearTimeout(F.performance.timer),F.performance.timer=setTimeout(F.performance.display,500)},display:function(){var t=x.name+":",n=0;s=!1,clearTimeout(F.performance.timer),e.each(c,function(e,t){n+=t["Execution Time"]}),t+=" "+n+"ms",r&&(t+=" '"+r+"'"),a.length>1&&(t+=" ("+a.length+")"),(console.group!==i||console.table!==i)&&c.length>0&&(console.groupCollapsed(t),console.table?console.table(c):e.each(c,function(e,t){console.log(t.Name+": "+t["Execution Time"]+"ms")}),console.groupEnd()),c=[]}},invoke:function(t,n,a){var r,s,c,l=E;return n=n||m,a=O||a,"string"==typeof t&&l!==i&&(t=t.split(/[\. ]/),r=t.length-1,e.each(t,function(n,o){var a=n!=r?o+t[n+1].charAt(0).toUpperCase()+t[n+1].slice(1):t;if(e.isPlainObject(l[a])&&n!=r)l=l[a];else{if(l[a]!==i)return s=l[a],!1;if(!e.isPlainObject(l[o])||n==r)return l[o]!==i?(s=l[o],!1):!1;l=l[o]}})),e.isFunction(s)?c=s.apply(a,n):s!==i&&(c=s),e.isArray(o)?o.push(c):o!==i?o=[o,c]:c!==i&&(o=c),s}},F.initialize()}),o!==i?o:this},e.fn.form.settings={name:"Form",namespace:"form",debug:!1,verbose:!1,performance:!0,fields:!1,keyboardShortcuts:!0,on:"submit",inline:!1,delay:200,revalidate:!0,transition:"scale",duration:200,onValid:function(){},onInvalid:function(){},onSuccess:function(){return!0},onFailure:function(){return!1},metadata:{defaultValue:"default",validate:"validate"},regExp:{bracket:/\[(.*)\]/i,decimal:/^\-?\d*(\.\d+)?$/,email:"[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?",escape:/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,flags:/^\/(.*)\/(.*)?/,integer:/^\-?\d+$/,number:/^\-?\d*(\.\d+)?$/,url:/(https?:\/\/(?:www\.|(?!www))[^\s\.]+\.[^\s]{2,}|www\.[^\s]+\.[^\s]{2,})/i},text:{unspecifiedRule:"Please enter a valid value",unspecifiedField:"This field"},prompt:{empty:"{name} must have a value",checked:"{name} must be checked",email:"{name} must be a valid e-mail",url:"{name} must be a valid url",regExp:"{name} is not formatted correctly",integer:"{name} must be an integer",decimal:"{name} must be a decimal number",number:"{name} must be set to a number",is:'{name} must be "{ruleValue}"',isExactly:'{name} must be exactly "{ruleValue}"',not:'{name} cannot be set to "{ruleValue}"',notExactly:'{name} cannot be set to exactly "{ruleValue}"',contain:'{name} cannot contain "{ruleValue}"',containExactly:'{name} cannot contain exactly "{ruleValue}"',doesntContain:'{name} must contain  "{ruleValue}"',doesntContainExactly:'{name} must contain exactly "{ruleValue}"',minLength:"{name} must be at least {ruleValue} characters",length:"{name} must be at least {ruleValue} characters",exactLength:"{name} must be exactly {ruleValue} characters",maxLength:"{name} cannot be longer than {ruleValue} characters",match:"{name} must match {ruleValue} field",different:"{name} must have a different value than {ruleValue} field",creditCard:"{name} must be a valid credit card number",minCount:"{name} must have at least {ruleValue} choices",exactCount:"{name} must have exactly {ruleValue} choices",maxCount:"{name} must have {ruleValue} or less choices"},selector:{checkbox:'input[type="checkbox"], input[type="radio"]',clear:".clear",field:"input, textarea, select",group:".field",input:"input",message:".error.message",prompt:".prompt.label",radio:'input[type="radio"]',reset:'.reset:not([type="reset"])',submit:'.submit:not([type="submit"])',uiCheckbox:".ui.checkbox",uiDropdown:".ui.dropdown"},className:{error:"error",label:"ui prompt label",pressed:"down",success:"success"},error:{identifier:"You must specify a string identifier for each field",method:"The method you called is not defined.",noRule:"There is no rule matching the one you specified",oldSyntax:"Starting in 2.0 forms now only take a single settings object. Validation settings converted to new syntax automatically."},templates:{error:function(t){var n='<ul class="list">';return e.each(t,function(e,t){n+="<li>"+t+"</li>"}),n+="</ul>",e(n)},prompt:function(t){return e("<div/>").addClass("ui basic red pointing prompt label").html(t[0])}},rules:{empty:function(t){return!(t===i||""===t||e.isArray(t)&&0===t.length)},checked:function(){return e(this).filter(":checked").length>0},email:function(t){var n=new RegExp(e.fn.form.settings.regExp.email,"i");return n.test(t)},url:function(t){return e.fn.form.settings.regExp.url.test(t)},regExp:function(t,n){var i,o=n.match(e.fn.form.settings.regExp.flags);return o&&(n=o.length>=2?o[1]:n,i=o.length>=3?o[2]:""),t.match(new RegExp(n,i))},integer:function(t,n){var o,a,r,s=e.fn.form.settings.regExp.integer;return n===i||""===n||".."===n||(-1==n.indexOf("..")?s.test(n)&&(o=a=n-0):(r=n.split("..",2),s.test(r[0])&&(o=r[0]-0),s.test(r[1])&&(a=r[1]-0))),s.test(t)&&(o===i||t>=o)&&(a===i||a>=t)},decimal:function(t){return e.fn.form.settings.regExp.decimal.test(t)},number:function(t){return e.fn.form.settings.regExp.number.test(t)},is:function(e,t){return t="string"==typeof t?t.toLowerCase():t,e="string"==typeof e?e.toLowerCase():e,e==t},isExactly:function(e,t){return e==t},not:function(e,t){return e="string"==typeof e?e.toLowerCase():e,t="string"==typeof t?t.toLowerCase():t,e!=t},notExactly:function(e,t){return e!=t},contains:function(t,n){return n=n.replace(e.fn.form.settings.regExp.escape,"\\$&"),-1!==t.search(new RegExp(n,"i"))},containsExactly:function(t,n){return n=n.replace(e.fn.form.settings.regExp.escape,"\\$&"),-1!==t.search(new RegExp(n))},doesntContain:function(t,n){return n=n.replace(e.fn.form.settings.regExp.escape,"\\$&"),-1===t.search(new RegExp(n,"i"))},doesntContainExactly:function(t,n){return n=n.replace(e.fn.form.settings.regExp.escape,"\\$&"),-1===t.search(new RegExp(n))},minLength:function(e,t){return e!==i?e.length>=t:!1},length:function(e,t){return e!==i?e.length>=t:!1},exactLength:function(e,t){return e!==i?e.length==t:!1},maxLength:function(e,t){return e!==i?e.length<=t:!1},match:function(t,n){{var o;e(this)}return e('[data-validate="'+n+'"]').length>0?o=e('[data-validate="'+n+'"]').val():e("#"+n).length>0?o=e("#"+n).val():e('[name="'+n+'"]').length>0?o=e('[name="'+n+'"]').val():e('[name="'+n+'[]"]').length>0&&(o=e('[name="'+n+'[]"]')),o!==i?t.toString()==o.toString():!1},different:function(t,n){{var o;e(this)}return e('[data-validate="'+n+'"]').length>0?o=e('[data-validate="'+n+'"]').val():e("#"+n).length>0?o=e("#"+n).val():e('[name="'+n+'"]').length>0?o=e('[name="'+n+'"]').val():e('[name="'+n+'[]"]').length>0&&(o=e('[name="'+n+'[]"]')),o!==i?t.toString()!==o.toString():!1},creditCard:function(t,n){var i,o,a={visa:{pattern:/^4/,length:[16]},amex:{pattern:/^3[47]/,length:[15]},mastercard:{pattern:/^5[1-5]/,length:[16]},discover:{pattern:/^(6011|622(12[6-9]|1[3-9][0-9]|[2-8][0-9]{2}|9[0-1][0-9]|92[0-5]|64[4-9])|65)/,length:[16]},unionPay:{pattern:/^(62|88)/,length:[16,17,18,19]},jcb:{pattern:/^35(2[89]|[3-8][0-9])/,length:[16]},maestro:{pattern:/^(5018|5020|5038|6304|6759|676[1-3])/,length:[12,13,14,15,16,17,18,19]},dinersClub:{pattern:/^(30[0-5]|^36)/,length:[14]},laser:{pattern:/^(6304|670[69]|6771)/,length:[16,17,18,19]},visaElectron:{pattern:/^(4026|417500|4508|4844|491(3|7))/,length:[16]}},r={},s=!1,c="string"==typeof n?n.split(","):!1;if("string"==typeof t&&0!==t.length){if(c&&(e.each(c,function(n,i){o=a[i],o&&(r={length:-1!==e.inArray(t.length,o.length),pattern:-1!==t.search(o.pattern)},r.length&&r.pattern&&(s=!0))}),!s))return!1;if(i={number:-1!==e.inArray(t.length,a.unionPay.length),pattern:-1!==t.search(a.unionPay.pattern)},i.number&&i.pattern)return!0;for(var l=t.length,u=0,d=[[0,1,2,3,4,5,6,7,8,9],[0,2,4,6,8,1,3,5,7,9]],m=0;l--;)m+=d[u][parseInt(t.charAt(l),10)],u^=1;return m%10===0&&m>0}},minCount:function(e,t){return 0==t?!0:1==t?""!==e:e.split(",").length>=t},exactCount:function(e,t){return 0==t?""===e:1==t?""!==e&&-1===e.search(","):e.split(",").length==t},maxCount:function(e,t){return 0==t?!1:1==t?-1===e.search(","):e.split(",").length<=t}}}}(jQuery,window,document),function(e,t,n,i){"use strict";e.fn.accordion=function(n){{var o,a=e(this),r=(new Date).getTime(),s=[],c=arguments[0],l="string"==typeof c,u=[].slice.call(arguments,1);t.requestAnimationFrame||t.mozRequestAnimationFrame||t.webkitRequestAnimationFrame||t.msRequestAnimationFrame||function(e){setTimeout(e,0)}}return a.each(function(){var d,m,f=e.isPlainObject(n)?e.extend(!0,{},e.fn.accordion.settings,n):e.extend({},e.fn.accordion.settings),g=f.className,p=f.namespace,v=f.selector,h=f.error,b="."+p,y="module-"+p,x=a.selector||"",C=e(this),w=C.find(v.title),k=C.find(v.content),S=this,T=C.data(y);m={initialize:function(){m.debug("Initializing",C),m.bind.events(),f.observeChanges&&m.observeChanges(),m.instantiate()},instantiate:function(){T=m,C.data(y,m)},destroy:function(){m.debug("Destroying previous instance",C),C.off(b).removeData(y)},refresh:function(){w=C.find(v.title),k=C.find(v.content)},observeChanges:function(){"MutationObserver"in t&&(d=new MutationObserver(function(e){m.debug("DOM tree modified, updating selector cache"),m.refresh()}),d.observe(S,{childList:!0,subtree:!0}),m.debug("Setting up mutation observer",d))},bind:{events:function(){m.debug("Binding delegated events"),C.on(f.on+b,v.trigger,m.event.click)}},event:{click:function(){m.toggle.call(this)}},toggle:function(t){var n=t!==i?"number"==typeof t?w.eq(t):e(t).closest(v.title):e(this).closest(v.title),o=n.next(k),a=o.hasClass(g.animating),r=o.hasClass(g.active),s=r&&!a,c=!r&&a;m.debug("Toggling visibility of content",n),s||c?f.collapsible?m.close.call(n):m.debug("Cannot close accordion content collapsing is disabled"):m.open.call(n)},open:function(t){var n=t!==i?"number"==typeof t?w.eq(t):e(t).closest(v.title):e(this).closest(v.title),o=n.next(k),a=o.hasClass(g.animating),r=o.hasClass(g.active),s=r||a;return s?void m.debug("Accordion already open, skipping",o):(m.debug("Opening accordion content",n),f.onOpening.call(o),f.exclusive&&m.closeOthers.call(n),n.addClass(g.active),o.stop(!0,!0).addClass(g.animating),f.animateChildren&&(e.fn.transition!==i&&C.transition("is supported")?o.children().transition({animation:"fade in",queue:!1,useFailSafe:!0,debug:f.debug,verbose:f.verbose,duration:f.duration}):o.children().stop(!0,!0).animate({opacity:1},f.duration,m.resetOpacity)),void o.slideDown(f.duration,f.easing,function(){o.removeClass(g.animating).addClass(g.active),m.reset.display.call(this),f.onOpen.call(this),f.onChange.call(this)}))},close:function(t){var n=t!==i?"number"==typeof t?w.eq(t):e(t).closest(v.title):e(this).closest(v.title),o=n.next(k),a=o.hasClass(g.animating),r=o.hasClass(g.active),s=!r&&a,c=r&&a;!r&&!s||c||(m.debug("Closing accordion content",o),f.onClosing.call(o),n.removeClass(g.active),o.stop(!0,!0).addClass(g.animating),f.animateChildren&&(e.fn.transition!==i&&C.transition("is supported")?o.children().transition({animation:"fade out",queue:!1,useFailSafe:!0,debug:f.debug,verbose:f.verbose,duration:f.duration}):o.children().stop(!0,!0).animate({opacity:0},f.duration,m.resetOpacity)),o.slideUp(f.duration,f.easing,function(){o.removeClass(g.animating).removeClass(g.active),m.reset.display.call(this),f.onClose.call(this),f.onChange.call(this)}))},closeOthers:function(t){var n,o,a,r=t!==i?w.eq(t):e(this).closest(v.title),s=r.parents(v.content).prev(v.title),c=r.closest(v.accordion),l=v.title+"."+g.active+":visible",u=v.content+"."+g.active+":visible";f.closeNested?(n=c.find(l).not(s),a=n.next(k)):(n=c.find(l).not(s),o=c.find(u).find(l).not(s),n=n.not(o),a=n.next(k)),n.length>0&&(m.debug("Exclusive enabled, closing other content",n),n.removeClass(g.active),a.removeClass(g.animating).stop(!0,!0),f.animateChildren&&(e.fn.transition!==i&&C.transition("is supported")?a.children().transition({animation:"fade out",useFailSafe:!0,debug:f.debug,verbose:f.verbose,duration:f.duration}):a.children().stop(!0,!0).animate({opacity:0},f.duration,m.resetOpacity)),a.slideUp(f.duration,f.easing,function(){e(this).removeClass(g.active),m.reset.display.call(this)}))},reset:{display:function(){m.verbose("Removing inline display from element",this),e(this).css("display",""),""===e(this).attr("style")&&e(this).attr("style","").removeAttr("style")},opacity:function(){m.verbose("Removing inline opacity from element",this),e(this).css("opacity",""),""===e(this).attr("style")&&e(this).attr("style","").removeAttr("style")}},setting:function(t,n){if(m.debug("Changing setting",t,n),e.isPlainObject(t))e.extend(!0,f,t);else{if(n===i)return f[t];f[t]=n}},internal:function(t,n){return m.debug("Changing internal",t,n),n===i?m[t]:void(e.isPlainObject(t)?e.extend(!0,m,t):m[t]=n)},debug:function(){f.debug&&(f.performance?m.performance.log(arguments):(m.debug=Function.prototype.bind.call(console.info,console,f.name+":"),m.debug.apply(console,arguments)))},verbose:function(){f.verbose&&f.debug&&(f.performance?m.performance.log(arguments):(m.verbose=Function.prototype.bind.call(console.info,console,f.name+":"),m.verbose.apply(console,arguments)))},error:function(){m.error=Function.prototype.bind.call(console.error,console,f.name+":"),m.error.apply(console,arguments)},performance:{log:function(e){var t,n,i;f.performance&&(t=(new Date).getTime(),i=r||t,n=t-i,r=t,s.push({Name:e[0],Arguments:[].slice.call(e,1)||"",Element:S,"Execution Time":n})),clearTimeout(m.performance.timer),m.performance.timer=setTimeout(m.performance.display,500)},display:function(){var t=f.name+":",n=0;r=!1,clearTimeout(m.performance.timer),e.each(s,function(e,t){n+=t["Execution Time"]}),t+=" "+n+"ms",x&&(t+=" '"+x+"'"),(console.group!==i||console.table!==i)&&s.length>0&&(console.groupCollapsed(t),console.table?console.table(s):e.each(s,function(e,t){console.log(t.Name+": "+t["Execution Time"]+"ms")}),console.groupEnd()),s=[]}},invoke:function(t,n,a){var r,s,c,l=T;return n=n||u,a=S||a,"string"==typeof t&&l!==i&&(t=t.split(/[\. ]/),r=t.length-1,e.each(t,function(n,o){var a=n!=r?o+t[n+1].charAt(0).toUpperCase()+t[n+1].slice(1):t;if(e.isPlainObject(l[a])&&n!=r)l=l[a];else{if(l[a]!==i)return s=l[a],!1;if(!e.isPlainObject(l[o])||n==r)return l[o]!==i?(s=l[o],!1):(m.error(h.method,t),!1);l=l[o]}})),e.isFunction(s)?c=s.apply(a,n):s!==i&&(c=s),e.isArray(o)?o.push(c):o!==i?o=[o,c]:c!==i&&(o=c),s}},l?(T===i&&m.initialize(),m.invoke(c)):(T!==i&&T.invoke("destroy"),m.initialize())}),o!==i?o:this},e.fn.accordion.settings={name:"Accordion",namespace:"accordion",debug:!1,verbose:!1,performance:!0,on:"click",observeChanges:!0,exclusive:!0,collapsible:!0,closeNested:!1,animateChildren:!0,duration:350,easing:"easeOutQuad",onOpening:function(){},onOpen:function(){},onClosing:function(){},onClose:function(){},onChange:function(){},error:{method:"The method you called is not defined"},className:{active:"active",animating:"animating"},selector:{accordion:".accordion",title:".title",trigger:".title",content:".content"}},e.extend(e.easing,{easeOutQuad:function(e,t,n,i,o){return-i*(t/=o)*(t-2)+n}})}(jQuery,window,document),function(e,t,n,i){"use strict";e.fn.checkbox=function(n){var o,a=e(this),r=a.selector||"",s=(new Date).getTime(),c=[],l=arguments[0],u="string"==typeof l,d=[].slice.call(arguments,1);return a.each(function(){var a,m,f=e.extend(!0,{},e.fn.checkbox.settings,n),g=f.className,p=f.namespace,v=f.selector,h=f.error,b="."+p,y="module-"+p,x=e(this),C=e(this).children(v.label),w=e(this).children(v.input),k=w[0],S=!1,T=!1,A=x.data(y),R=this;

m={initialize:function(){m.verbose("Initializing checkbox",f),m.create.label(),m.bind.events(),m.set.tabbable(),m.hide.input(),m.observeChanges(),m.instantiate(),m.setup()},instantiate:function(){m.verbose("Storing instance of module",m),A=m,x.data(y,m)},destroy:function(){m.verbose("Destroying module"),m.unbind.events(),m.show.input(),x.removeData(y)},fix:{reference:function(){x.is(v.input)&&(m.debug("Behavior called on <input> adjusting invoked element"),x=x.closest(v.checkbox),m.refresh())}},setup:function(){m.set.initialLoad(),m.is.indeterminate()?(m.debug("Initial value is indeterminate"),m.indeterminate()):m.is.checked()?(m.debug("Initial value is checked"),m.check()):(m.debug("Initial value is unchecked"),m.uncheck()),m.remove.initialLoad()},refresh:function(){C=x.children(v.label),w=x.children(v.input),k=w[0]},hide:{input:function(){m.verbose("Modfying <input> z-index to be unselectable"),w.addClass(g.hidden)}},show:{input:function(){m.verbose("Modfying <input> z-index to be selectable"),w.removeClass(g.hidden)}},observeChanges:function(){"MutationObserver"in t&&(a=new MutationObserver(function(e){m.debug("DOM tree modified, updating selector cache"),m.refresh()}),a.observe(R,{childList:!0,subtree:!0}),m.debug("Setting up mutation observer",a))},attachEvents:function(t,n){var i=e(t);n=e.isFunction(m[n])?m[n]:m.toggle,i.length>0?(m.debug("Attaching checkbox events to element",t,n),i.on("click"+b,n)):m.error(h.notFound)},event:{click:function(t){var n=e(t.target);return n.is(v.input)?void m.verbose("Using default check action on initialized checkbox"):n.is(v.link)?void m.debug("Clicking link inside checkbox, skipping toggle"):(m.toggle(),w.focus(),void t.preventDefault())},keydown:function(e){var t=e.which,n={enter:13,space:32,escape:27};t==n.escape?(m.verbose("Escape key pressed blurring field"),w.blur(),T=!0):e.ctrlKey||t!=n.space&&t!=n.enter?T=!1:(m.verbose("Enter/space key pressed, toggling checkbox"),m.toggle(),T=!0)},keyup:function(e){T&&e.preventDefault()}},check:function(){m.should.allowCheck()&&(m.debug("Checking checkbox",w),m.set.checked(),m.should.ignoreCallbacks()||(f.onChecked.call(k),f.onChange.call(k)))},uncheck:function(){m.should.allowUncheck()&&(m.debug("Unchecking checkbox"),m.set.unchecked(),m.should.ignoreCallbacks()||(f.onUnchecked.call(k),f.onChange.call(k)))},indeterminate:function(){return m.should.allowIndeterminate()?void m.debug("Checkbox is already indeterminate"):(m.debug("Making checkbox indeterminate"),m.set.indeterminate(),void(m.should.ignoreCallbacks()||(f.onIndeterminate.call(k),f.onChange.call(k))))},determinate:function(){return m.should.allowDeterminate()?void m.debug("Checkbox is already determinate"):(m.debug("Making checkbox determinate"),m.set.determinate(),void(m.should.ignoreCallbacks()||(f.onDeterminate.call(k),f.onChange.call(k))))},enable:function(){return m.is.enabled()?void m.debug("Checkbox is already enabled"):(m.debug("Enabling checkbox"),m.set.enabled(),void f.onEnable.call(k))},disable:function(){return m.is.disabled()?void m.debug("Checkbox is already disabled"):(m.debug("Disabling checkbox"),m.set.disabled(),void f.onDisable.call(k))},get:{radios:function(){var t=m.get.name();return e('input[name="'+t+'"]').closest(v.checkbox)},otherRadios:function(){return m.get.radios().not(x)},name:function(){return w.attr("name")}},is:{initialLoad:function(){return S},radio:function(){return w.hasClass(g.radio)||"radio"==w.attr("type")},indeterminate:function(){return w.prop("indeterminate")!==i&&w.prop("indeterminate")},checked:function(){return w.prop("checked")!==i&&w.prop("checked")},disabled:function(){return w.prop("disabled")!==i&&w.prop("disabled")},enabled:function(){return!m.is.disabled()},determinate:function(){return!m.is.indeterminate()},unchecked:function(){return!m.is.checked()}},should:{allowCheck:function(){return m.is.determinate()&&m.is.checked()&&!m.should.forceCallbacks()?(m.debug("Should not allow check, checkbox is already checked"),!1):f.beforeChecked.apply(k)===!1?(m.debug("Should not allow check, beforeChecked cancelled"),!1):!0},allowUncheck:function(){return m.is.determinate()&&m.is.unchecked()&&!m.should.forceCallbacks()?(m.debug("Should not allow uncheck, checkbox is already unchecked"),!1):f.beforeUnchecked.apply(k)===!1?(m.debug("Should not allow uncheck, beforeUnchecked cancelled"),!1):!0},allowIndeterminate:function(){return m.is.indeterminate()&&!m.should.forceCallbacks()?(m.debug("Should not allow indeterminate, checkbox is already indeterminate"),!1):f.beforeIndeterminate.apply(k)===!1?(m.debug("Should not allow indeterminate, beforeIndeterminate cancelled"),!1):!0},allowDeterminate:function(){return m.is.determinate()&&!m.should.forceCallbacks()?(m.debug("Should not allow determinate, checkbox is already determinate"),!1):f.beforeDeterminate.apply(k)===!1?(m.debug("Should not allow determinate, beforeDeterminate cancelled"),!1):!0},forceCallbacks:function(){return m.is.initialLoad()&&f.fireOnInit},ignoreCallbacks:function(){return S&&!f.fireOnInit}},can:{change:function(){return!(x.hasClass(g.disabled)||x.hasClass(g.readOnly)||w.prop("disabled")||w.prop("readonly"))},uncheck:function(){return"boolean"==typeof f.uncheckable?f.uncheckable:!m.is.radio()}},set:{initialLoad:function(){S=!0},checked:function(){return m.verbose("Setting class to checked"),x.removeClass(g.indeterminate).addClass(g.checked),m.is.radio()&&m.uncheckOthers(),!m.is.indeterminate()&&m.is.checked()?void m.debug("Input is already checked, skipping input property change"):(m.verbose("Setting state to checked",k),w.prop("indeterminate",!1).prop("checked",!0),void m.trigger.change())},unchecked:function(){return m.verbose("Removing checked class"),x.removeClass(g.indeterminate).removeClass(g.checked),!m.is.indeterminate()&&m.is.unchecked()?void m.debug("Input is already unchecked"):(m.debug("Setting state to unchecked"),w.prop("indeterminate",!1).prop("checked",!1),void m.trigger.change())},indeterminate:function(){return m.verbose("Setting class to indeterminate"),x.addClass(g.indeterminate),m.is.indeterminate()?void m.debug("Input is already indeterminate, skipping input property change"):(m.debug("Setting state to indeterminate"),w.prop("indeterminate",!0),void m.trigger.change())},determinate:function(){return m.verbose("Removing indeterminate class"),x.removeClass(g.indeterminate),m.is.determinate()?void m.debug("Input is already determinate, skipping input property change"):(m.debug("Setting state to determinate"),void w.prop("indeterminate",!1))},disabled:function(){return m.verbose("Setting class to disabled"),x.addClass(g.disabled),m.is.disabled()?void m.debug("Input is already disabled, skipping input property change"):(m.debug("Setting state to disabled"),w.prop("disabled","disabled"),void m.trigger.change())},enabled:function(){return m.verbose("Removing disabled class"),x.removeClass(g.disabled),m.is.enabled()?void m.debug("Input is already enabled, skipping input property change"):(m.debug("Setting state to enabled"),w.prop("disabled",!1),void m.trigger.change())},tabbable:function(){m.verbose("Adding tabindex to checkbox"),w.attr("tabindex")===i&&w.attr("tabindex",0)}},remove:{initialLoad:function(){S=!1}},trigger:{change:function(){m.verbose("Triggering change event from programmatic change"),w.trigger("change")}},create:{label:function(){w.prevAll(v.label).length>0?(w.prev(v.label).detach().insertAfter(w),m.debug("Moving existing label",C)):m.has.label()||(C=e("<label>").insertAfter(w),m.debug("Creating label",C))}},has:{label:function(){return C.length>0}},bind:{events:function(){m.verbose("Attaching checkbox events"),x.on("click"+b,m.event.click).on("keydown"+b,v.input,m.event.keydown).on("keyup"+b,v.input,m.event.keyup)}},unbind:{events:function(){m.debug("Removing events"),x.off(b)}},uncheckOthers:function(){var e=m.get.otherRadios();m.debug("Unchecking other radios",e),e.removeClass(g.checked)},toggle:function(){return m.can.change()?void(m.is.indeterminate()||m.is.unchecked()?(m.debug("Currently unchecked"),m.check()):m.is.checked()&&m.can.uncheck()&&(m.debug("Currently checked"),m.uncheck())):void(m.is.radio()||m.debug("Checkbox is read-only or disabled, ignoring toggle"))},setting:function(t,n){if(m.debug("Changing setting",t,n),e.isPlainObject(t))e.extend(!0,f,t);else{if(n===i)return f[t];f[t]=n}},internal:function(t,n){if(e.isPlainObject(t))e.extend(!0,m,t);else{if(n===i)return m[t];m[t]=n}},debug:function(){f.debug&&(f.performance?m.performance.log(arguments):(m.debug=Function.prototype.bind.call(console.info,console,f.name+":"),m.debug.apply(console,arguments)))},verbose:function(){f.verbose&&f.debug&&(f.performance?m.performance.log(arguments):(m.verbose=Function.prototype.bind.call(console.info,console,f.name+":"),m.verbose.apply(console,arguments)))},error:function(){m.error=Function.prototype.bind.call(console.error,console,f.name+":"),m.error.apply(console,arguments)},performance:{log:function(e){var t,n,i;f.performance&&(t=(new Date).getTime(),i=s||t,n=t-i,s=t,c.push({Name:e[0],Arguments:[].slice.call(e,1)||"",Element:R,"Execution Time":n})),clearTimeout(m.performance.timer),m.performance.timer=setTimeout(m.performance.display,500)},display:function(){var t=f.name+":",n=0;s=!1,clearTimeout(m.performance.timer),e.each(c,function(e,t){n+=t["Execution Time"]}),t+=" "+n+"ms",r&&(t+=" '"+r+"'"),(console.group!==i||console.table!==i)&&c.length>0&&(console.groupCollapsed(t),console.table?console.table(c):e.each(c,function(e,t){console.log(t.Name+": "+t["Execution Time"]+"ms")}),console.groupEnd()),c=[]}},invoke:function(t,n,a){var r,s,c,l=A;return n=n||d,a=R||a,"string"==typeof t&&l!==i&&(t=t.split(/[\. ]/),r=t.length-1,e.each(t,function(n,o){var a=n!=r?o+t[n+1].charAt(0).toUpperCase()+t[n+1].slice(1):t;if(e.isPlainObject(l[a])&&n!=r)l=l[a];else{if(l[a]!==i)return s=l[a],!1;if(!e.isPlainObject(l[o])||n==r)return l[o]!==i?(s=l[o],!1):(m.error(h.method,t),!1);l=l[o]}})),e.isFunction(s)?c=s.apply(a,n):s!==i&&(c=s),e.isArray(o)?o.push(c):o!==i?o=[o,c]:c!==i&&(o=c),s}},u?(A===i&&m.initialize(),m.invoke(l)):(A!==i&&A.invoke("destroy"),m.initialize())}),o!==i?o:this},e.fn.checkbox.settings={name:"Checkbox",namespace:"checkbox",debug:!1,verbose:!0,performance:!0,uncheckable:"auto",fireOnInit:!1,onChange:function(){},beforeChecked:function(){},beforeUnchecked:function(){},beforeDeterminate:function(){},beforeIndeterminate:function(){},onChecked:function(){},onUnchecked:function(){},onDeterminate:function(){},onIndeterminate:function(){},onEnabled:function(){},onDisabled:function(){},className:{checked:"checked",indeterminate:"indeterminate",disabled:"disabled",hidden:"hidden",radio:"radio",readOnly:"read-only"},error:{method:"The method you called is not defined"},selector:{checkbox:".ui.checkbox",label:"label, .box",input:'input[type="checkbox"], input[type="radio"]',link:"a[href]"}}}(jQuery,window,document),function(e,t,n,i){"use strict";e.fn.dimmer=function(t){var o,a=e(this),r=(new Date).getTime(),s=[],c=arguments[0],l="string"==typeof c,u=[].slice.call(arguments,1);return a.each(function(){var d,m,f,g=e.isPlainObject(t)?e.extend(!0,{},e.fn.dimmer.settings,t):e.extend({},e.fn.dimmer.settings),p=g.selector,v=g.namespace,h=g.className,b=g.error,y="."+v,x="module-"+v,C=a.selector||"",w="ontouchstart"in n.documentElement?"touchstart":"click",k=e(this),S=this,T=k.data(x);f={preinitialize:function(){f.is.dimmer()?(m=k.parent(),d=k):(m=k,d=f.has.dimmer()?g.dimmerName?m.find(p.dimmer).filter("."+g.dimmerName):m.find(p.dimmer):f.create())},initialize:function(){f.debug("Initializing dimmer",g),f.bind.events(),f.set.dimmable(),f.instantiate()},instantiate:function(){f.verbose("Storing instance of module",f),T=f,k.data(x,T)},destroy:function(){f.verbose("Destroying previous module",d),f.unbind.events(),f.remove.variation(),m.off(y)},bind:{events:function(){"hover"==g.on?m.on("mouseenter"+y,f.show).on("mouseleave"+y,f.hide):"click"==g.on&&m.on(w+y,f.toggle),f.is.page()&&(f.debug("Setting as a page dimmer",m),f.set.pageDimmer()),f.is.closable()&&(f.verbose("Adding dimmer close event",d),m.on(w+y,p.dimmer,f.event.click))}},unbind:{events:function(){k.removeData(x)}},event:{click:function(t){f.verbose("Determining if event occured on dimmer",t),(0===d.find(t.target).length||e(t.target).is(p.content))&&(f.hide(),t.stopImmediatePropagation())}},addContent:function(t){var n=e(t);f.debug("Add content to dimmer",n),n.parent()[0]!==d[0]&&n.detach().appendTo(d)},create:function(){var t=e(g.template.dimmer());return g.variation&&(f.debug("Creating dimmer with variation",g.variation),t.addClass(g.variation)),g.dimmerName&&(f.debug("Creating named dimmer",g.dimmerName),t.addClass(g.dimmerName)),t.appendTo(m),t},show:function(t){t=e.isFunction(t)?t:function(){},f.debug("Showing dimmer",d,g),f.is.dimmed()&&!f.is.animating()||!f.is.enabled()?f.debug("Dimmer is already shown or disabled"):(f.animate.show(t),g.onShow.call(S),g.onChange.call(S))},hide:function(t){t=e.isFunction(t)?t:function(){},f.is.dimmed()||f.is.animating()?(f.debug("Hiding dimmer",d),f.animate.hide(t),g.onHide.call(S),g.onChange.call(S)):f.debug("Dimmer is not visible")},toggle:function(){f.verbose("Toggling dimmer visibility",d),f.is.dimmed()?f.hide():f.show()},animate:{show:function(t){t=e.isFunction(t)?t:function(){},g.useCSS&&e.fn.transition!==i&&d.transition("is supported")?("auto"!==g.opacity&&f.set.opacity(),d.transition({animation:g.transition+" in",queue:!1,duration:f.get.duration(),useFailSafe:!0,onStart:function(){f.set.dimmed()},onComplete:function(){f.set.active(),t()}})):(f.verbose("Showing dimmer animation with javascript"),f.set.dimmed(),"auto"==g.opacity&&(g.opacity=.8),d.stop().css({opacity:0,width:"100%",height:"100%"}).fadeTo(f.get.duration(),g.opacity,function(){d.removeAttr("style"),f.set.active(),t()}))},hide:function(t){t=e.isFunction(t)?t:function(){},g.useCSS&&e.fn.transition!==i&&d.transition("is supported")?(f.verbose("Hiding dimmer with css"),d.transition({animation:g.transition+" out",queue:!1,duration:f.get.duration(),useFailSafe:!0,onStart:function(){f.remove.dimmed()},onComplete:function(){f.remove.active(),t()}})):(f.verbose("Hiding dimmer with javascript"),f.remove.dimmed(),d.stop().fadeOut(f.get.duration(),function(){f.remove.active(),d.removeAttr("style"),t()}))}},get:{dimmer:function(){return d},duration:function(){return"object"==typeof g.duration?f.is.active()?g.duration.hide:g.duration.show:g.duration}},has:{dimmer:function(){return g.dimmerName?k.find(p.dimmer).filter("."+g.dimmerName).length>0:k.find(p.dimmer).length>0}},is:{active:function(){return d.hasClass(h.active)},animating:function(){return d.is(":animated")||d.hasClass(h.animating)},closable:function(){return"auto"==g.closable?"hover"==g.on?!1:!0:g.closable},dimmer:function(){return k.hasClass(h.dimmer)},dimmable:function(){return k.hasClass(h.dimmable)},dimmed:function(){return m.hasClass(h.dimmed)},disabled:function(){return m.hasClass(h.disabled)},enabled:function(){return!f.is.disabled()},page:function(){return m.is("body")},pageDimmer:function(){return d.hasClass(h.pageDimmer)}},can:{show:function(){return!d.hasClass(h.disabled)}},set:{opacity:function(e){var t=d.css("background-color"),n=t.split(","),i=n&&4==n.length;e=g.opacity||e,i?(n[3]=e+")",t=n.join(",")):t="rgba(0, 0, 0, "+e+")",f.debug("Setting opacity to",e),d.css("background-color",t)},active:function(){d.addClass(h.active)},dimmable:function(){m.addClass(h.dimmable)},dimmed:function(){m.addClass(h.dimmed)},pageDimmer:function(){d.addClass(h.pageDimmer)},disabled:function(){d.addClass(h.disabled)},variation:function(e){e=e||g.variation,e&&d.addClass(e)}},remove:{active:function(){d.removeClass(h.active)},dimmed:function(){m.removeClass(h.dimmed)},disabled:function(){d.removeClass(h.disabled)},variation:function(e){e=e||g.variation,e&&d.removeClass(e)}},setting:function(t,n){if(f.debug("Changing setting",t,n),e.isPlainObject(t))e.extend(!0,g,t);else{if(n===i)return g[t];g[t]=n}},internal:function(t,n){if(e.isPlainObject(t))e.extend(!0,f,t);else{if(n===i)return f[t];f[t]=n}},debug:function(){g.debug&&(g.performance?f.performance.log(arguments):(f.debug=Function.prototype.bind.call(console.info,console,g.name+":"),f.debug.apply(console,arguments)))},verbose:function(){g.verbose&&g.debug&&(g.performance?f.performance.log(arguments):(f.verbose=Function.prototype.bind.call(console.info,console,g.name+":"),f.verbose.apply(console,arguments)))},error:function(){f.error=Function.prototype.bind.call(console.error,console,g.name+":"),f.error.apply(console,arguments)},performance:{log:function(e){var t,n,i;g.performance&&(t=(new Date).getTime(),i=r||t,n=t-i,r=t,s.push({Name:e[0],Arguments:[].slice.call(e,1)||"",Element:S,"Execution Time":n})),clearTimeout(f.performance.timer),f.performance.timer=setTimeout(f.performance.display,500)},display:function(){var t=g.name+":",n=0;r=!1,clearTimeout(f.performance.timer),e.each(s,function(e,t){n+=t["Execution Time"]}),t+=" "+n+"ms",C&&(t+=" '"+C+"'"),a.length>1&&(t+=" ("+a.length+")"),(console.group!==i||console.table!==i)&&s.length>0&&(console.groupCollapsed(t),console.table?console.table(s):e.each(s,function(e,t){console.log(t.Name+": "+t["Execution Time"]+"ms")}),console.groupEnd()),s=[]}},invoke:function(t,n,a){var r,s,c,l=T;return n=n||u,a=S||a,"string"==typeof t&&l!==i&&(t=t.split(/[\. ]/),r=t.length-1,e.each(t,function(n,o){var a=n!=r?o+t[n+1].charAt(0).toUpperCase()+t[n+1].slice(1):t;if(e.isPlainObject(l[a])&&n!=r)l=l[a];else{if(l[a]!==i)return s=l[a],!1;if(!e.isPlainObject(l[o])||n==r)return l[o]!==i?(s=l[o],!1):(f.error(b.method,t),!1);l=l[o]}})),e.isFunction(s)?c=s.apply(a,n):s!==i&&(c=s),e.isArray(o)?o.push(c):o!==i?o=[o,c]:c!==i&&(o=c),s}},f.preinitialize(),l?(T===i&&f.initialize(),f.invoke(c)):(T!==i&&T.invoke("destroy"),f.initialize())}),o!==i?o:this},e.fn.dimmer.settings={name:"Dimmer",namespace:"dimmer",debug:!1,verbose:!1,performance:!0,dimmerName:!1,variation:!1,closable:"auto",useCSS:!0,transition:"fade",on:!1,opacity:"auto",duration:{show:500,hide:500},onChange:function(){},onShow:function(){},onHide:function(){},error:{method:"The method you called is not defined."},className:{active:"active",animating:"animating",dimmable:"dimmable",dimmed:"dimmed",dimmer:"dimmer",disabled:"disabled",hide:"hide",pageDimmer:"page",show:"show"},selector:{dimmer:"> .ui.dimmer",content:".ui.dimmer > .content, .ui.dimmer > .content > .center"},template:{dimmer:function(){return e("<div />").attr("class","ui dimmer")}}}}(jQuery,window,document),function(e,t,n,i){"use strict";e.fn.dropdown=function(o){var a,r=e(this),s=e(n),c=r.selector||"",l="ontouchstart"in n.documentElement,u=(new Date).getTime(),d=[],m=arguments[0],f="string"==typeof m,g=[].slice.call(arguments,1);return r.each(function(p){var v,h,b,y,x,C,w,k=e.isPlainObject(o)?e.extend(!0,{},e.fn.dropdown.settings,o):e.extend({},e.fn.dropdown.settings),S=k.className,T=k.message,A=k.fields,R=k.metadata,P=k.namespace,E=k.regExp,F=k.selector,D=k.error,O=k.templates,q="."+P,j="module-"+P,z=e(this),I=e(k.context),L=z.find(F.text),N=z.find(F.search),V=z.find(F.input),H=z.find(F.icon),M=z.prev().find(F.text).length>0?z.prev().find(F.text):z.prev(),U=z.children(F.menu),W=U.find(F.item),B=!1,Q=!1,X=!1,$=this,Y=z.data(j);w={initialize:function(){w.debug("Initializing dropdown",k),w.is.alreadySetup()?w.setup.reference():(w.setup.layout(),w.refreshData(),w.save.defaults(),w.restore.selected(),w.create.id(),w.bind.events(),w.observeChanges(),w.instantiate())},instantiate:function(){w.verbose("Storing instance of dropdown",w),Y=w,z.data(j,w)},destroy:function(){w.verbose("Destroying previous dropdown",z),w.remove.tabbable(),z.off(q).removeData(j),U.off(q),s.off(b),x&&x.disconnect(),C&&C.disconnect()},observeChanges:function(){"MutationObserver"in t&&(x=new MutationObserver(function(e){w.debug("<select> modified, recreating menu"),w.setup.select()}),C=new MutationObserver(function(e){w.debug("Menu modified, updating selector cache"),w.refresh()}),w.has.input()&&x.observe(V[0],{childList:!0,subtree:!0}),w.has.menu()&&C.observe(U[0],{childList:!0,subtree:!0}),w.debug("Setting up mutation observer",x,C))},create:{id:function(){y=(Math.random().toString(16)+"000000000").substr(2,8),b="."+y,w.verbose("Creating unique id for element",y)},userChoice:function(t){var n,o,a;return(t=t||w.get.userValues())?(t=e.isArray(t)?t:[t],e.each(t,function(t,r){w.get.item(r)===!1&&(a=k.templates.addition(w.add.variables(T.addResult,r)),o=e("<div />").html(a).attr("data-"+R.value,r).attr("data-"+R.text,r).addClass(S.addition).addClass(S.item),n=n===i?o:n.add(o),w.verbose("Creating user choices for value",r,o))}),n):!1},userLabels:function(t){var n=w.get.userValues();n&&(w.debug("Adding user labels",n),e.each(n,function(e,t){w.verbose("Adding custom user value"),w.add.label(t,t)}))},menu:function(){U=e("<div />").addClass(S.menu).appendTo(z)}},search:function(e){e=e!==i?e:w.get.query(),w.verbose("Searching for query",e),w.filter(e)},select:{firstUnfiltered:function(){w.verbose("Selecting first non-filtered element"),w.remove.selectedItem(),W.not(F.unselectable).eq(0).addClass(S.selected)},nextAvailable:function(e){e=e.eq(0);var t=e.nextAll(F.item).not(F.unselectable).eq(0),n=e.prevAll(F.item).not(F.unselectable).eq(0),i=t.length>0;i?(w.verbose("Moving selection to",t),t.addClass(S.selected)):(w.verbose("Moving selection to",n),n.addClass(S.selected))}},setup:{api:function(){var e={debug:k.debug,on:!1};w.verbose("First request, initializing API"),z.api(e)},layout:function(){z.is("select")&&(w.setup.select(),w.setup.returnedObject()),w.has.menu()||w.create.menu(),w.is.search()&&!w.has.search()&&(w.verbose("Adding search input"),N=e("<input />").addClass(S.search).insertBefore(L)),k.allowTab&&w.set.tabbable()},select:function(){var t=w.get.selectValues();w.debug("Dropdown initialized on a select",t),z.is("select")&&(V=z),V.parent(F.dropdown).length>0?(w.debug("UI dropdown already exists. Creating dropdown menu only"),z=V.closest(F.dropdown),w.has.menu()||w.create.menu(),U=z.children(F.menu),w.setup.menu(t)):(w.debug("Creating entire dropdown from select"),z=e("<div />").attr("class",V.attr("class")).addClass(S.selection).addClass(S.dropdown).html(O.dropdown(t)).insertBefore(V),V.hasClass(S.multiple)&&V.prop("multiple")===!1&&(w.error(D.missingMultiple),V.prop("multiple",!0)),V.is("[multiple]")&&w.set.multiple(),V.prop("disabled")&&(w.debug("Disabling dropdown"),z.addClass(S.disabled)),V.removeAttr("class").detach().prependTo(z)),w.refresh()},menu:function(e){U.html(O.menu(e,A)),W=U.find(F.item)},reference:function(){w.debug("Dropdown behavior was called on select, replacing with closest dropdown"),z=z.parent(F.dropdown),w.refresh(),w.setup.returnedObject(),f&&(Y=w,w.invoke(m))},returnedObject:function(){var e=r.slice(0,p),t=r.slice(p+1);r=e.add(z).add(t)}},refresh:function(){w.refreshSelectors(),w.refreshData()},refreshSelectors:function(){w.verbose("Refreshing selector cache"),L=z.find(F.text),N=z.find(F.search),V=z.find(F.input),H=z.find(F.icon),M=z.prev().find(F.text).length>0?z.prev().find(F.text):z.prev(),U=z.children(F.menu),W=U.find(F.item)},refreshData:function(){w.verbose("Refreshing cached metadata"),W.removeData(R.text).removeData(R.value),z.removeData(R.defaultText).removeData(R.defaultValue).removeData(R.placeholderText)},toggle:function(){w.verbose("Toggling menu visibility"),w.is.active()?w.hide():w.show()},show:function(t){if(t=e.isFunction(t)?t:function(){},w.can.show()&&!w.is.active()){if(w.debug("Showing dropdown"),w.is.multiple()&&!w.has.search()&&w.is.allFiltered())return!0;w.has.message()&&!w.has.maxSelections()&&w.remove.message(),k.onShow.call($)!==!1&&w.animate.show(function(){w.can.click()&&w.bind.intent(),w.set.visible(),t.call($)})}},hide:function(t){t=e.isFunction(t)?t:function(){},w.is.active()&&(w.debug("Hiding dropdown"),k.onHide.call($)!==!1&&w.animate.hide(function(){w.remove.visible(),t.call($)}))},hideOthers:function(){w.verbose("Finding other dropdowns to hide"),r.not(z).has(F.menu+"."+S.visible).dropdown("hide")},hideMenu:function(){w.verbose("Hiding menu  instantaneously"),w.remove.active(),w.remove.visible(),U.transition("hide")},hideSubMenus:function(){var e=U.children(F.item).find(F.menu);w.verbose("Hiding sub menus",e),e.transition("hide")},bind:{events:function(){l&&w.bind.touchEvents(),w.bind.keyboardEvents(),w.bind.inputEvents(),w.bind.mouseEvents()},touchEvents:function(){w.debug("Touch device detected binding additional touch events"),w.is.searchSelection()||w.is.single()&&z.on("touchstart"+q,w.event.test.toggle),U.on("touchstart"+q,F.item,w.event.item.mouseenter)},keyboardEvents:function(){w.verbose("Binding keyboard events"),z.on("keydown"+q,w.event.keydown),w.has.search()&&z.on(w.get.inputEvent()+q,F.search,w.event.input),w.is.multiple()&&s.on("keydown"+b,w.event.document.keydown)},inputEvents:function(){w.verbose("Binding input change events"),z.on("change"+q,F.input,w.event.change)},mouseEvents:function(){w.verbose("Binding mouse events"),w.is.multiple()&&z.on("click"+q,F.label,w.event.label.click).on("click"+q,F.remove,w.event.remove.click),w.is.searchSelection()?(z.on("mousedown"+q,F.menu,w.event.menu.mousedown).on("mouseup"+q,F.menu,w.event.menu.mouseup).on("click"+q,F.icon,w.event.icon.click).on("click"+q,F.search,w.show).on("focus"+q,F.search,w.event.search.focus).on("blur"+q,F.search,w.event.search.blur).on("click"+q,F.text,w.event.text.focus),w.is.multiple()&&z.on("click"+q,w.event.click)):("click"==k.on?z.on("click"+q,F.icon,w.event.icon.click).on("click"+q,w.event.test.toggle):"hover"==k.on?z.on("mouseenter"+q,w.delay.show).on("mouseleave"+q,w.delay.hide):z.on(k.on+q,w.toggle),z.on("mousedown"+q,w.event.mousedown).on("mouseup"+q,w.event.mouseup).on("focus"+q,w.event.focus).on("blur"+q,w.event.blur)),U.on("mouseenter"+q,F.item,w.event.item.mouseenter).on("mouseleave"+q,F.item,w.event.item.mouseleave).on("click"+q,F.item,w.event.item.click)},intent:function(){w.verbose("Binding hide intent event to document"),l&&s.on("touchstart"+b,w.event.test.touch).on("touchmove"+b,w.event.test.touch),s.on("click"+b,w.event.test.hide)}},unbind:{intent:function(){w.verbose("Removing hide intent event from document"),l&&s.off("touchstart"+b).off("touchmove"+b),s.off("click"+b)}},filter:function(e){var t=e!==i?e:w.get.query(),n=function(){w.is.multiple()&&w.filterActive(),w.select.firstUnfiltered(),w.has.allResultsFiltered()?k.onNoResults.call($,t)?k.allowAdditions||(w.verbose("All items filtered, showing message",t),w.add.message(T.noResults)):(w.verbose("All items filtered, hiding dropdown",t),w.hideMenu()):w.remove.message(),k.allowAdditions&&w.add.userSuggestion(e),w.is.searchSelection()&&w.can.show()&&w.is.focusedOnSearch()&&w.show()};k.useLabels&&w.has.maxSelections()||(k.apiSettings?w.can.useAPI()?w.queryRemote(t,function(){n()}):w.error(D.noAPI):(w.filterItems(t),n()))},queryRemote:function(t,n){var i={errorDuration:!1,throttle:k.throttle,urlData:{query:t},onError:function(){w.add.message(T.serverError),n()},onFailure:function(){w.add.message(T.serverError),n()},onSuccess:function(e){w.remove.message(),w.setup.menu({values:e.results}),n()}};z.api("get request")||w.setup.api(),i=e.extend(!0,{},i,k.apiSettings),z.api("setting",i).api("query")},filterItems:function(t){var n=t!==i?t:w.get.query(),o=e(),a=w.escape.regExp(n),r=new RegExp("^"+a,"igm");w.has.query()?(w.verbose("Searching for matching values",n),W.each(function(){var t,i,a=e(this);if("both"==k.match||"text"==k.match){if(t=String(w.get.choiceText(a,!1)),-1!==t.search(r))return o=o.add(a),!0;if(k.fullTextSearch&&w.fuzzySearch(n,t))return o=o.add(a),!0}if("both"==k.match||"value"==k.match){if(i=String(w.get.choiceValue(a,t)),-1!==i.search(r))return o=o.add(a),!0;if(k.fullTextSearch&&w.fuzzySearch(n,i))return o=o.add(a),!0}})):o=W,w.debug("Showing only matched items",n),w.remove.filteredItem(),W.not(o).addClass(S.filtered)},fuzzySearch:function(e,t){var n=t.length,i=e.length;if(e=e.toLowerCase(),t=t.toLowerCase(),i>n)return!1;if(i===n)return e===t;e:for(var o=0,a=0;i>o;o++){for(var r=e.charCodeAt(o);n>a;)if(t.charCodeAt(a++)===r)continue e;return!1}return!0},filterActive:function(){k.useLabels&&W.filter("."+S.active).addClass(S.filtered)},focusSearch:function(){w.is.search()&&!w.is.focusedOnSearch()&&N[0].focus()},forceSelection:function(){var e=W.not(S.filtered).filter("."+S.selected).eq(0),t=W.not(S.filtered).filter("."+S.active).eq(0),n=e.length>0?e:t,i=n.size()>0;i&&w.has.query()?(w.debug("Forcing partial selection to selected item",n),w.event.item.click.call(n)):w.hide()},event:{change:function(){X||(w.debug("Input changed, updating selection"),w.set.selected())},focus:function(){k.showOnFocus&&!B&&w.is.hidden()&&!h&&w.show()},click:function(t){var n=e(t.target);n.is(z)&&!w.is.focusedOnSearch()&&w.focusSearch()},blur:function(e){h=n.activeElement===this,B||h||(w.remove.activeLabel(),w.hide())},mousedown:function(){B=!0},mouseup:function(){B=!1},search:{focus:function(){B=!0,w.is.multiple()&&w.remove.activeLabel(),k.showOnFocus&&w.show()},blur:function(e){h=n.activeElement===this,Q||h?h&&k.forceSelection&&w.forceSelection():w.is.multiple()?(w.remove.activeLabel(),w.hide()):k.forceSelection?w.forceSelection():w.hide()}},icon:{click:function(e){w.toggle(),e.stopPropagation()}},text:{focus:function(e){B=!0,w.focusSearch()}},input:function(e){(w.is.multiple()||w.is.searchSelection())&&w.set.filtered(),clearTimeout(w.timer),w.timer=setTimeout(w.search,k.delay.search)},label:{click:function(t){var n=e(this),i=z.find(F.label),o=i.filter("."+S.active),a=n.nextAll("."+S.active),r=n.prevAll("."+S.active),s=a.length>0?n.nextUntil(a).add(o).add(n):n.prevUntil(r).add(o).add(n);t.shiftKey?(o.removeClass(S.active),s.addClass(S.active)):t.ctrlKey?n.toggleClass(S.active):(o.removeClass(S.active),n.addClass(S.active)),k.onLabelSelect.apply(this,i.filter("."+S.active))}},remove:{click:function(){var t=e(this).parent();t.hasClass(S.active)?w.remove.activeLabels():w.remove.activeLabels(t)}},test:{toggle:function(e){var t=w.is.multiple()?w.show:w.toggle;w.determine.eventOnElement(e,t)&&e.preventDefault()},touch:function(e){w.determine.eventOnElement(e,function(){"touchstart"==e.type?w.timer=setTimeout(function(){w.hide()},k.delay.touch):"touchmove"==e.type&&clearTimeout(w.timer)}),e.stopPropagation()},hide:function(e){w.determine.eventInModule(e,w.hide)}},menu:{mousedown:function(){Q=!0},mouseup:function(){Q=!1}},item:{mouseenter:function(t){var n=e(this).children(F.menu),i=e(this).siblings(F.item).children(F.menu);n.length>0&&(clearTimeout(w.itemTimer),w.itemTimer=setTimeout(function(){w.verbose("Showing sub-menu",n),e.each(i,function(){w.animate.hide(!1,e(this))}),w.animate.show(!1,n)},k.delay.show),t.preventDefault())},mouseleave:function(t){var n=e(this).children(F.menu);n.length>0&&(clearTimeout(w.itemTimer),w.itemTimer=setTimeout(function(){w.verbose("Hiding sub-menu",n),w.animate.hide(!1,n)},k.delay.hide))},touchend:function(){},click:function(t){var n=e(this),i=e(t?t.target:""),o=n.find(F.menu),a=w.get.choiceText(n),r=w.get.choiceValue(n,a),s=o.length>0,c=o.find(i).length>0;c||s&&!k.allowCategorySelection||(k.useLabels||(w.remove.filteredItem(),w.remove.searchTerm(),w.set.scrollPosition(n)),w.determine.selectAction.call(this,a,r))}},document:{keydown:function(e){var t=e.which,n=w.get.shortcutKeys(),i=w.is.inObject(t,n);if(i){var o=z.find(F.label),a=o.filter("."+S.active),r=(a.data(R.value),o.index(a)),s=o.length,c=a.length>0,l=a.length>1,u=0===r,d=r+1==s,m=w.is.searchSelection(),f=w.is.focusedOnSearch(),g=w.is.focused(),p=f&&0===w.get.caretPosition();if(m&&!c&&!f)return;t==n.leftArrow?!g&&!p||c?c&&(e.shiftKey?w.verbose("Adding previous label to selection"):(w.verbose("Selecting previous label"),o.removeClass(S.active)),u&&!l?a.addClass(S.active):a.prev(F.siblingLabel).addClass(S.active).end(),e.preventDefault()):(w.verbose("Selecting previous label"),o.last().addClass(S.active)):t==n.rightArrow?(g&&!c&&o.first().addClass(S.active),c&&(e.shiftKey?w.verbose("Adding next label to selection"):(w.verbose("Selecting next label"),
o.removeClass(S.active)),d?m?f?o.removeClass(S.active):w.focusSearch():l?a.next(F.siblingLabel).addClass(S.active):a.addClass(S.active):a.next(F.siblingLabel).addClass(S.active),e.preventDefault())):t==n.deleteKey||t==n.backspace?c?(w.verbose("Removing active labels"),d&&m&&!f&&w.focusSearch(),a.last().next(F.siblingLabel).addClass(S.active),w.remove.activeLabels(a),e.preventDefault()):p&&!c&&t==n.backspace&&(w.verbose("Removing last label on input backspace"),a=o.last().addClass(S.active),w.remove.activeLabels(a)):a.removeClass(S.active)}}},keydown:function(e){var t=e.which,n=w.get.shortcutKeys(),i=w.is.inObject(t,n);if(i){var o,a,r=W.not(F.unselectable).filter("."+S.selected).eq(0),s=U.children("."+S.active).eq(0),c=r.length>0?r:s,l=c.length>0?c.siblings(":not(."+S.filtered+")").andSelf():U.children(":not(."+S.filtered+")"),u=c.children(F.menu),d=c.closest(F.menu),m=d.hasClass(S.visible)||d.hasClass(S.animating)||d.parent(F.menu).length>0,f=u.length>0,g=c.length>0,p=c.not(F.unselectable).length>0,v=t==n.delimiter&&k.allowAdditions&&w.is.multiple();if(w.is.visible()){if((t==n.enter||v)&&(t==n.enter&&g&&f&&!k.allowCategorySelection?(w.verbose("Pressed enter on unselectable category, opening sub menu"),t=n.rightArrow):p&&(w.verbose("Selecting item from keyboard shortcut",c),w.event.item.click.call(c,e),w.is.searchSelection()&&w.remove.searchTerm()),e.preventDefault()),t==n.leftArrow&&(a=d[0]!==U[0],a&&(w.verbose("Left key pressed, closing sub-menu"),w.animate.hide(!1,d),c.removeClass(S.selected),d.closest(F.item).addClass(S.selected),e.preventDefault())),t==n.rightArrow&&f&&(w.verbose("Right key pressed, opening sub-menu"),w.animate.show(!1,u),c.removeClass(S.selected),u.find(F.item).eq(0).addClass(S.selected),e.preventDefault()),t==n.upArrow){if(o=g&&m?c.prevAll(F.item+":not("+F.unselectable+")").eq(0):W.eq(0),l.index(o)<0)return w.verbose("Up key pressed but reached top of current menu"),void e.preventDefault();w.verbose("Up key pressed, changing active item"),c.removeClass(S.selected),o.addClass(S.selected),w.set.scrollPosition(o),e.preventDefault()}if(t==n.downArrow){if(o=g&&m?o=c.nextAll(F.item+":not("+F.unselectable+")").eq(0):W.eq(0),0===o.length)return w.verbose("Down key pressed but reached bottom of current menu"),void e.preventDefault();w.verbose("Down key pressed, changing active item"),W.removeClass(S.selected),o.addClass(S.selected),w.set.scrollPosition(o),e.preventDefault()}t==n.pageUp&&(w.scrollPage("up"),e.preventDefault()),t==n.pageDown&&(w.scrollPage("down"),e.preventDefault()),t==n.escape&&(w.verbose("Escape key pressed, closing dropdown"),w.hide())}else v&&e.preventDefault(),t==n.downArrow&&(w.verbose("Down key pressed, showing dropdown"),w.show(),e.preventDefault())}else w.is.selection()&&!w.is.search()&&w.set.selectedLetter(String.fromCharCode(t))}},determine:{selectAction:function(t,n){w.verbose("Determining action",k.action),e.isFunction(w.action[k.action])?(w.verbose("Triggering preset action",k.action,t,n),w.action[k.action].call(this,t,n)):e.isFunction(k.action)?(w.verbose("Triggering user action",k.action,t,n),k.action.call(this,t,n)):w.error(D.action,k.action)},eventInModule:function(t,i){var o=e(t.target),a=o.closest(n.documentElement).length>0,r=o.closest(z).length>0;return i=e.isFunction(i)?i:function(){},a&&!r?(w.verbose("Triggering event",i),i(),!0):(w.verbose("Event occurred in dropdown, canceling callback"),!1)},eventOnElement:function(t,n){var i=e(t.target),o=i.closest(F.siblingLabel),a=0===z.find(o).length,r=0===i.closest(U).length;return n=e.isFunction(n)?n:function(){},a&&r?(w.verbose("Triggering event",n),n(),!0):(w.verbose("Event occurred in dropdown menu, canceling callback"),!1)}},action:{nothing:function(){},activate:function(t,n){if(n=n!==i?n:t,w.can.activate(e(this))){if(w.set.selected(n,e(this)),w.is.multiple()&&!w.is.allFiltered())return;w.hideAndClear()}},select:function(e,t){w.action.activate.call(this)},combo:function(t,n){n=n!==i?n:t,w.set.selected(n,e(this)),w.hideAndClear()},hide:function(e,t){w.set.value(t),w.hideAndClear()}},get:{id:function(){return y},defaultText:function(){return z.data(R.defaultText)},defaultValue:function(){return z.data(R.defaultValue)},placeholderText:function(){return z.data(R.placeholderText)||""},text:function(){return L.text()},query:function(){return e.trim(N.val())},searchWidth:function(e){return e*k.glyphWidth+"em"},selectionCount:function(){var t,n=w.get.values();return t=w.is.multiple()?e.isArray(n)?n.length:0:""!==w.get.value()?1:0},transition:function(e){return"auto"==k.transition?w.is.upward(e)?"slide up":"slide down":k.transition},userValues:function(){var t=w.get.values();return t?(t=e.isArray(t)?t:[t],e.grep(t,function(e){return w.get.item(e)===!1})):!1},uniqueArray:function(t){return e.grep(t,function(n,i){return e.inArray(n,t)===i})},caretPosition:function(){var e,t,i=N.get(0);return"selectionStart"in i?i.selectionStart:n.selection?(i.focus(),e=n.selection.createRange(),t=e.text.length,e.moveStart("character",-i.value.length),e.text.length-t):void 0},shortcutKeys:function(){return{backspace:8,delimiter:188,deleteKey:46,enter:13,escape:27,pageUp:33,pageDown:34,leftArrow:37,upArrow:38,rightArrow:39,downArrow:40}},value:function(){var t=V.length>0?V.val():z.data(R.value);return e.isArray(t)&&1===t.length&&""===t[0]?"":t},values:function(){var e=w.get.value();return""===e?"":!w.has.selectInput()&&w.is.multiple()?"string"==typeof e?e.split(k.delimiter):"":e},remoteValues:function(){var t=w.get.values(),n=!1;return t&&("string"==typeof t&&(t=[t]),n={},e.each(t,function(e,t){var i=w.read.remoteData(t);w.verbose("Restoring value from session data",i,t),n[t]=i?i:t})),n},choiceText:function(t,n){return n=n!==i?n:k.preserveHTML,t?(t.find(F.menu).length>0&&(w.verbose("Retreiving text of element with sub-menu"),t=t.clone(),t.find(F.menu).remove(),t.find(F.menuIcon).remove()),t.data(R.text)!==i?t.data(R.text):e.trim(n?t.html():t.text())):void 0},choiceValue:function(t,n){return n=n||w.get.choiceText(t),t?t.data(R.value)!==i?String(t.data(R.value)):"string"==typeof n?e.trim(n.toLowerCase()):String(n):!1},inputEvent:function(){var e=N[0];return e?e.oninput!==i?"input":e.onpropertychange!==i?"propertychange":"keyup":!1},selectValues:function(){var t={};return t.values=[],z.find("option").each(function(){var n=e(this),o=n.html(),a=n.attr("disabled"),r=n.attr("value")!==i?n.attr("value"):o;"auto"===k.placeholder&&""===r?t.placeholder=o:t.values.push({name:o,value:r,disabled:a})}),k.placeholder&&"auto"!==k.placeholder&&(w.debug("Setting placeholder value to",k.placeholder),t.placeholder=k.placeholder),k.sortSelect?(t.values.sort(function(e,t){return e.name>t.name?1:-1}),w.debug("Retrieved and sorted values from select",t)):w.debug("Retreived values from select",t),t},activeItem:function(){return W.filter("."+S.active)},selectedItem:function(){var e=W.not(F.unselectable).filter("."+S.selected);return e.length>0?e:W.eq(0)},itemWithAdditions:function(e){var t=w.get.item(e),n=w.create.userChoice(e),i=n&&n.length>0;return i&&(t=t.length>0?t.add(n):n),t},item:function(t,n){var o,a,r=!1;return t=t!==i?t:w.get.values()!==i?w.get.values():w.get.text(),o=a?t.length>0:t!==i&&null!==t,a=w.is.multiple()&&e.isArray(t),n=""===t||0===t?!0:n||!1,o&&W.each(function(){var o=e(this),s=w.get.choiceText(o),c=w.get.choiceValue(o,s);if(null!==c&&c!==i)if(a)(-1!==e.inArray(String(c),t)||-1!==e.inArray(s,t))&&(r=r?r.add(o):o);else if(n){if(w.verbose("Ambiguous dropdown value using strict type check",o,t),c===t||s===t)return r=o,!0}else if(String(c)==String(t)||s==t)return w.verbose("Found select item by value",c,t),r=o,!0}),r}},check:{maxSelections:function(e){return k.maxSelections?(e=e!==i?e:w.get.selectionCount(),e>=k.maxSelections?(w.debug("Maximum selection count reached"),k.useLabels&&(W.addClass(S.filtered),w.add.message(T.maxSelections)),!0):(w.verbose("No longer at maximum selection count"),w.remove.message(),w.remove.filteredItem(),w.is.searchSelection()&&w.filterItems(),!1)):!0}},restore:{defaults:function(){w.clear(),w.restore.defaultText(),w.restore.defaultValue()},defaultText:function(){var e=w.get.defaultText(),t=w.get.placeholderText;e===t?(w.debug("Restoring default placeholder text",e),w.set.placeholderText(e)):(w.debug("Restoring default text",e),w.set.text(e))},defaultValue:function(){var e=w.get.defaultValue();e!==i&&(w.debug("Restoring default value",e),""!==e?(w.set.value(e),w.set.selected()):(w.remove.activeItem(),w.remove.selectedItem()))},labels:function(){k.allowAdditions&&(k.useLabels||(w.error(D.labels),k.useLabels=!0),w.debug("Restoring selected values"),w.create.userLabels()),w.check.maxSelections()},selected:function(){w.restore.values(),w.is.multiple()?(w.debug("Restoring previously selected values and labels"),w.restore.labels()):w.debug("Restoring previously selected values")},values:function(){w.set.initialLoad(),k.apiSettings?k.saveRemoteData?w.restore.remoteValues():w.clearValue():w.set.selected(),w.remove.initialLoad()},remoteValues:function(){var t=w.get.remoteValues();w.debug("Recreating selected from session data",t),t&&(w.is.single()?e.each(t,function(e,t){w.set.text(t)}):e.each(t,function(e,t){w.add.label(e,t)}))}},read:{remoteData:function(e){var n;return t.Storage===i?void w.error(D.noStorage):(n=sessionStorage.getItem(e),n!==i?n:!1)}},save:{defaults:function(){w.save.defaultText(),w.save.placeholderText(),w.save.defaultValue()},defaultValue:function(){var e=w.get.value();w.verbose("Saving default value as",e),z.data(R.defaultValue,e)},defaultText:function(){var e=w.get.text();w.verbose("Saving default text as",e),z.data(R.defaultText,e)},placeholderText:function(){var e;k.placeholder!==!1&&L.hasClass(S.placeholder)&&(e=w.get.text(),w.verbose("Saving placeholder text as",e),z.data(R.placeholderText,e))},remoteData:function(e,n){return t.Storage===i?void w.error(D.noStorage):(w.verbose("Saving remote data to session storage",n,e),void sessionStorage.setItem(n,e))}},clear:function(){w.is.multiple()?w.remove.labels():(w.remove.activeItem(),w.remove.selectedItem()),w.set.placeholderText(),w.clearValue()},clearValue:function(){w.set.value("")},scrollPage:function(e,t){var n,i,o,a=t||w.get.selectedItem(),r=a.closest(F.menu),s=r.outerHeight(),c=r.scrollTop(),l=W.eq(0).outerHeight(),u=Math.floor(s/l),d=(r.prop("scrollHeight"),"up"==e?c-l*u:c+l*u),m=W.not(F.unselectable);o="up"==e?m.index(a)-u:m.index(a)+u,n="up"==e?o>=0:o<m.length,i=n?m.eq(o):"up"==e?m.first():m.last(),i.length>0&&(w.debug("Scrolling page",e,i),a.removeClass(S.selected),i.addClass(S.selected),r.scrollTop(d))},set:{filtered:function(){var e=w.is.multiple(),t=w.is.searchSelection(),n=e&&t,i=t?w.get.query():"",o="string"==typeof i&&i.length>0,a=w.get.searchWidth(i.length),r=""!==i;e&&o&&(w.verbose("Adjusting input width",a,k.glyphWidth),N.css("width",a)),o||n&&r?(w.verbose("Hiding placeholder text"),L.addClass(S.filtered)):(!e||n&&!r)&&(w.verbose("Showing placeholder text"),L.removeClass(S.filtered))},loading:function(){z.addClass(S.loading)},placeholderText:function(e){e=e||w.get.placeholderText(),w.debug("Setting placeholder text",e),w.set.text(e),L.addClass(S.placeholder)},tabbable:function(){w.has.search()?(w.debug("Added tabindex to searchable dropdown"),N.val("").attr("tabindex",0),U.attr("tabindex",-1)):(w.debug("Added tabindex to dropdown"),z.attr("tabindex")||(z.attr("tabindex",0),U.attr("tabindex",-1)))},initialLoad:function(){w.verbose("Setting initial load"),v=!0},activeItem:function(e){e.addClass(k.allowAdditions&&e.filter(F.addition).length>0?S.filtered:S.active)},scrollPosition:function(e,t){var n,o,a,r,s,c,l,u,d,m=5;e=e||w.get.selectedItem(),n=e.closest(F.menu),o=e&&e.length>0,t=t!==i?t:!1,e&&n.length>0&&o&&(r=e.position().top,n.addClass(S.loading),c=n.scrollTop(),s=n.offset().top,r=e.offset().top,a=c-s+r,t||(l=n.height(),d=a+m>c+l,u=c>a-m),w.debug("Scrolling to active item",a),(t||u||d)&&n.scrollTop(a),n.removeClass(S.loading))},text:function(e){"select"!==k.action&&("combo"==k.action?(w.debug("Changing combo button text",e,M),k.preserveHTML?M.html(e):M.text(e)):(e!==w.get.placeholderText()&&L.removeClass(S.placeholder),w.debug("Changing text",e,L),L.removeClass(S.filtered),k.preserveHTML?L.html(e):L.text(e)))},selectedLetter:function(t){var n,i=W.filter("."+S.selected),o=i.length>0&&w.has.firstLetter(i,t),a=!1;o&&(n=i.nextAll(W).eq(0),w.has.firstLetter(n,t)&&(a=n)),a||W.each(function(){return w.has.firstLetter(e(this),t)?(a=e(this),!1):void 0}),a&&(w.verbose("Scrolling to next value with letter",t),w.set.scrollPosition(a),i.removeClass(S.selected),a.addClass(S.selected))},direction:function(e){"auto"==k.direction?w.is.onScreen(e)?w.remove.upward(e):w.set.upward(e):"upward"==k.direction&&w.set.upward(e)},upward:function(e){var t=e||z;t.addClass(S.upward)},value:function(e,t,n){var o=V.length>0,a=(!w.has.value(e),w.get.values()),r=e!==i?String(e):e;if(o){if(r==a&&(w.verbose("Skipping value update already same value",e,a),!w.is.initialLoad()))return;w.is.single()&&w.has.selectInput()&&w.can.extendSelect()&&(w.debug("Adding user option",e),w.add.optionValue(e)),w.debug("Updating input value",e,a),X=!0,V.val(e),k.fireOnInit===!1&&w.is.initialLoad()?w.debug("Input native change event ignored on initial load"):V.trigger("change"),X=!1}else w.verbose("Storing value in metadata",e,V),e!==a&&z.data(R.value,r);k.fireOnInit===!1&&w.is.initialLoad()?w.verbose("No callback on initial load",k.onChange):k.onChange.call($,e,t,n)},active:function(){z.addClass(S.active)},multiple:function(){z.addClass(S.multiple)},visible:function(){z.addClass(S.visible)},exactly:function(e,t){w.debug("Setting selected to exact values"),w.clear(),w.set.selected(e,t)},selected:function(t,n){var i=w.is.multiple();n=k.allowAdditions?n||w.get.itemWithAdditions(t):n||w.get.item(t),n&&(w.debug("Setting selected menu item to",n),w.is.single()?(w.remove.activeItem(),w.remove.selectedItem()):k.useLabels&&w.remove.selectedItem(),n.each(function(){var t=e(this),o=w.get.choiceText(t),a=w.get.choiceValue(t,o),r=t.hasClass(S.filtered),s=t.hasClass(S.active),c=t.hasClass(S.addition),l=i&&1==n.length;i?!s||c?(k.apiSettings&&k.saveRemoteData&&w.save.remoteData(o,a),k.useLabels?(w.add.value(a,o,t),w.add.label(a,o,l),w.set.activeItem(t),w.filterActive(),w.select.nextAvailable(n)):(w.add.value(a,o,t),w.set.text(w.add.variables(T.count)),w.set.activeItem(t))):r||(w.debug("Selected active value, removing label"),w.remove.selected(a)):(k.apiSettings&&k.saveRemoteData&&w.save.remoteData(o,a),w.set.text(o),w.set.value(a,o,t),t.addClass(S.active).addClass(S.selected))}))}},add:{label:function(t,n,i){var o,a=w.is.searchSelection()?N:L;return o=e("<a />").addClass(S.label).attr("data-value",t).html(O.label(t,n)),o=k.onLabelCreate.call(o,t,n),w.has.label(t)?void w.debug("Label already exists, skipping",t):(k.label.variation&&o.addClass(k.label.variation),void(i===!0?(w.debug("Animating in label",o),o.addClass(S.hidden).insertBefore(a).transition(k.label.transition,k.label.duration)):(w.debug("Adding selection label",o),o.insertBefore(a))))},message:function(t){var n=U.children(F.message),i=k.templates.message(w.add.variables(t));n.length>0?n.html(i):n=e("<div/>").html(i).addClass(S.message).appendTo(U)},optionValue:function(t){var n=V.find('option[value="'+t+'"]'),i=n.length>0;i||(x&&(x.disconnect(),w.verbose("Temporarily disconnecting mutation observer",t)),w.is.single()&&(w.verbose("Removing previous user addition"),V.find("option."+S.addition).remove()),e("<option/>").prop("value",t).addClass(S.addition).html(t).appendTo(V),w.verbose("Adding user addition as an <option>",t),x&&x.observe(V[0],{childList:!0,subtree:!0}))},userSuggestion:function(e){var t,n=U.children(F.addition),i=w.get.item(e),o=i&&i.not(F.addition).length,a=n.length>0;if(!k.useLabels||!w.has.maxSelections()){if(""===e||o)return void n.remove();W.removeClass(S.selected),a?(t=k.templates.addition(w.add.variables(T.addResult,e)),n.html(t).attr("data-"+R.value,e).attr("data-"+R.text,e).removeClass(S.filtered).addClass(S.selected),w.verbose("Replacing user suggestion with new value",n)):(n=w.create.userChoice(e),n.prependTo(U).addClass(S.selected),w.verbose("Adding item choice to menu corresponding with user choice addition",n))}},variables:function(e,t){var n,i,o=-1!==e.search("{count}"),a=-1!==e.search("{maxCount}"),r=-1!==e.search("{term}");return w.verbose("Adding templated variables to message",e),o&&(n=w.get.selectionCount(),e=e.replace("{count}",n)),a&&(n=w.get.selectionCount(),e=e.replace("{maxCount}",k.maxSelections)),r&&(i=t||w.get.query(),e=e.replace("{term}",i)),e},value:function(t,n,i){var o,a=w.get.values();return""===t?void w.debug("Cannot select blank values from multiselect"):(e.isArray(a)?(o=a.concat([t]),o=w.get.uniqueArray(o)):o=[t],w.has.selectInput()?w.can.extendSelect()&&(w.debug("Adding value to select",t,o,V),w.add.optionValue(t)):(o=o.join(k.delimiter),w.debug("Setting hidden input to delimited value",o,V)),k.fireOnInit===!1&&w.is.initialLoad()?w.verbose("Skipping onadd callback on initial load",k.onAdd):k.onAdd.call($,t,n,i),w.set.value(o,t,n,i),void w.check.maxSelections())}},remove:{active:function(){z.removeClass(S.active)},activeLabel:function(){z.find(F.label).removeClass(S.active)},loading:function(){z.removeClass(S.loading)},initialLoad:function(){v=!1},upward:function(e){var t=e||z;t.removeClass(S.upward)},visible:function(){z.removeClass(S.visible)},activeItem:function(){W.removeClass(S.active)},filteredItem:function(){k.useLabels&&w.has.maxSelections()||(k.useLabels&&w.is.multiple()?W.not("."+S.active).removeClass(S.filtered):W.removeClass(S.filtered))},optionValue:function(e){var t=V.find('option[value="'+e+'"]'),n=t.length>0;n&&t.hasClass(S.addition)&&(x&&(x.disconnect(),w.verbose("Temporarily disconnecting mutation observer",e)),t.remove(),w.verbose("Removing user addition as an <option>",e),x&&x.observe(V[0],{childList:!0,subtree:!0}))},message:function(){U.children(F.message).remove()},searchTerm:function(){w.verbose("Cleared search term"),N.val(""),w.set.filtered()},selected:function(t,n){return(n=k.allowAdditions?n||w.get.itemWithAdditions(t):n||w.get.item(t))?void n.each(function(){var t=e(this),n=w.get.choiceText(t),i=w.get.choiceValue(t,n);w.is.multiple()?k.useLabels?(w.remove.value(i,n,t),w.remove.label(i)):(w.remove.value(i,n,t),0===w.get.selectionCount()?w.set.placeholderText():w.set.text(w.add.variables(T.count))):w.remove.value(i,n,t),t.removeClass(S.filtered).removeClass(S.active),k.useLabels&&t.removeClass(S.selected)}):!1},selectedItem:function(){W.removeClass(S.selected)},value:function(e,t,n){var i,o=w.get.values();w.has.selectInput()?(w.verbose("Input is <select> removing selected option",e),i=w.remove.arrayValue(e,o),w.remove.optionValue(e)):(w.verbose("Removing from delimited values",e),i=w.remove.arrayValue(e,o),i=i.join(k.delimiter)),k.fireOnInit===!1&&w.is.initialLoad()?w.verbose("No callback on initial load",k.onRemove):k.onRemove.call($,e,t,n),w.set.value(i,t,n),w.check.maxSelections()},arrayValue:function(t,n){return e.isArray(n)||(n=[n]),n=e.grep(n,function(e){return t!=e}),w.verbose("Removed value from delimited string",t,n),n},label:function(e,t){var n=z.find(F.label),i=n.filter('[data-value="'+e+'"]');w.verbose("Removing label",i),i.remove()},activeLabels:function(e){e=e||z.find(F.label).filter("."+S.active),w.verbose("Removing active label selections",e),w.remove.labels(e)},labels:function(t){t=t||z.find(F.label),w.verbose("Removing labels",t),t.each(function(){var t=e(this).data(R.value),n=t!==i?String(t):t,o=w.is.userValue(n);o?(w.remove.value(n),w.remove.label(n)):w.remove.selected(n)})},tabbable:function(){w.has.search()?(w.debug("Searchable dropdown initialized"),N.attr("tabindex","-1"),U.attr("tabindex","-1")):(w.debug("Simple selection dropdown initialized"),z.attr("tabindex","-1"),U.attr("tabindex","-1"))}},has:{search:function(){return N.length>0},selectInput:function(){return V.is("select")},firstLetter:function(e,t){var n,i;return e&&0!==e.length&&"string"==typeof t?(n=w.get.choiceText(e,!1),t=t.toLowerCase(),i=String(n).charAt(0).toLowerCase(),t==i):!1},input:function(){return V.length>0},items:function(){return W.length>0},menu:function(){return U.length>0},message:function(){return 0!==U.children(F.message).length},label:function(e){var t=z.find(F.label);return t.filter('[data-value="'+e+'"]').length>0},maxSelections:function(){return k.maxSelections&&w.get.selectionCount()>=k.maxSelections},allResultsFiltered:function(){return W.filter(F.unselectable).length===W.length},query:function(){return""!==w.get.query()},value:function(t){var n=w.get.values(),i=e.isArray(n)?n&&-1!==e.inArray(t,n):n==t;return i?!0:!1}},is:{active:function(){return z.hasClass(S.active)},alreadySetup:function(){return z.is("select")&&z.parent(F.dropdown).length>0&&0===z.prev().length},animating:function(e){return e?e.transition&&e.transition("is animating"):U.transition&&U.transition("is animating")},disabled:function(){return z.hasClass(S.disabled)},focused:function(){return n.activeElement===z[0]},focusedOnSearch:function(){return n.activeElement===N[0]},allFiltered:function(){return(w.is.multiple()||w.has.search())&&!w.has.message()&&w.has.allResultsFiltered()},hidden:function(e){return!w.is.visible(e)},initialLoad:function(){return v},onScreen:function(e){var t,n=e||U,i=!0,o={};return n.addClass(S.loading),t={context:{scrollTop:I.scrollTop(),height:I.outerHeight()},menu:{offset:n.offset(),height:n.outerHeight()}},o={above:t.context.scrollTop<=t.menu.offset.top-t.menu.height,below:t.context.scrollTop+t.context.height>=t.menu.offset.top+t.menu.height},o.below?(w.verbose("Dropdown can fit in context downward",o),i=!0):o.below||o.above?(w.verbose("Dropdown cannot fit below, opening upward",o),i=!1):(w.verbose("Dropdown cannot fit in either direction, favoring downward",o),i=!0),n.removeClass(S.loading),i},inObject:function(t,n){var i=!1;return e.each(n,function(e,n){return n==t?(i=!0,!0):void 0}),i},multiple:function(){return z.hasClass(S.multiple)},single:function(){return!w.is.multiple()},selectMutation:function(t){var n=!1;return e.each(t,function(t,i){return i.target&&e(i.target).is("select")?(n=!0,!0):void 0}),n},search:function(){return z.hasClass(S.search)},searchSelection:function(){return w.has.search()&&1===N.parent(F.dropdown).length},selection:function(){return z.hasClass(S.selection)},userValue:function(t){return-1!==e.inArray(t,w.get.userValues())},upward:function(e){var t=e||z;return t.hasClass(S.upward)},visible:function(e){return e?e.hasClass(S.visible):U.hasClass(S.visible)}},can:{activate:function(e){return k.useLabels?!0:w.has.maxSelections()?w.has.maxSelections()&&e.hasClass(S.active)?!0:!1:!0},click:function(){return l||"click"==k.on},extendSelect:function(){return k.allowAdditions||k.apiSettings},show:function(){return!w.is.disabled()&&(w.has.items()||w.has.message())},useAPI:function(){return e.fn.api!==i}},animate:{show:function(t,n){var o,a=n||U,r=n?function(){}:function(){w.hideSubMenus(),w.hideOthers(),w.set.active()};t=e.isFunction(t)?t:function(){},w.verbose("Doing menu show animation",a),w.set.direction(n),o=w.get.transition(n),w.is.selection()&&w.set.scrollPosition(w.get.selectedItem(),!0),(w.is.hidden(a)||w.is.animating(a))&&("none"==o?(r(),a.transition("show"),t.call($)):e.fn.transition!==i&&z.transition("is supported")?a.transition({animation:o+" in",debug:k.debug,verbose:k.verbose,duration:k.duration,queue:!0,onStart:r,onComplete:function(){t.call($)}}):w.error(D.noTransition,o))},hide:function(t,n){var o=n||U,a=(n?.9*k.duration:k.duration,n?function(){}:function(){w.can.click()&&w.unbind.intent(),w.remove.active()}),r=w.get.transition(n);t=e.isFunction(t)?t:function(){},(w.is.visible(o)||w.is.animating(o))&&(w.verbose("Doing menu hide animation",o),"none"==r?(a(),o.transition("hide"),t.call($)):e.fn.transition!==i&&z.transition("is supported")?o.transition({animation:r+" out",duration:k.duration,debug:k.debug,verbose:k.verbose,queue:!0,onStart:a,onComplete:function(){"auto"==k.direction&&w.remove.upward(n),t.call($)}}):w.error(D.transition))}},hideAndClear:function(){w.remove.searchTerm(),w.has.maxSelections()||(w.has.search()?w.hide(function(){w.remove.filteredItem()}):w.hide())},delay:{show:function(){w.verbose("Delaying show event to ensure user intent"),clearTimeout(w.timer),w.timer=setTimeout(w.show,k.delay.show)},hide:function(){w.verbose("Delaying hide event to ensure user intent"),clearTimeout(w.timer),w.timer=setTimeout(w.hide,k.delay.hide)}},escape:{regExp:function(e){return e=String(e),e.replace(E.escape,"\\$&")}},setting:function(t,n){if(w.debug("Changing setting",t,n),e.isPlainObject(t))e.extend(!0,k,t);else{if(n===i)return k[t];k[t]=n}},internal:function(t,n){if(e.isPlainObject(t))e.extend(!0,w,t);else{if(n===i)return w[t];w[t]=n}},debug:function(){k.debug&&(k.performance?w.performance.log(arguments):(w.debug=Function.prototype.bind.call(console.info,console,k.name+":"),w.debug.apply(console,arguments)))},verbose:function(){k.verbose&&k.debug&&(k.performance?w.performance.log(arguments):(w.verbose=Function.prototype.bind.call(console.info,console,k.name+":"),w.verbose.apply(console,arguments)))},error:function(){w.error=Function.prototype.bind.call(console.error,console,k.name+":"),w.error.apply(console,arguments)},performance:{log:function(e){var t,n,i;k.performance&&(t=(new Date).getTime(),i=u||t,n=t-i,u=t,d.push({Name:e[0],Arguments:[].slice.call(e,1)||"",Element:$,"Execution Time":n})),clearTimeout(w.performance.timer),w.performance.timer=setTimeout(w.performance.display,500)},display:function(){var t=k.name+":",n=0;u=!1,clearTimeout(w.performance.timer),e.each(d,function(e,t){n+=t["Execution Time"]}),t+=" "+n+"ms",c&&(t+=" '"+c+"'"),(console.group!==i||console.table!==i)&&d.length>0&&(console.groupCollapsed(t),console.table?console.table(d):e.each(d,function(e,t){console.log(t.Name+": "+t["Execution Time"]+"ms")}),console.groupEnd()),d=[]}},invoke:function(t,n,o){var r,s,c,l=Y;return n=n||g,o=$||o,"string"==typeof t&&l!==i&&(t=t.split(/[\. ]/),r=t.length-1,e.each(t,function(n,o){var a=n!=r?o+t[n+1].charAt(0).toUpperCase()+t[n+1].slice(1):t;if(e.isPlainObject(l[a])&&n!=r)l=l[a];else{if(l[a]!==i)return s=l[a],!1;if(!e.isPlainObject(l[o])||n==r)return l[o]!==i?(s=l[o],!1):(w.error(D.method,t),!1);l=l[o]}})),e.isFunction(s)?c=s.apply(o,n):s!==i&&(c=s),e.isArray(a)?a.push(c):a!==i?a=[a,c]:c!==i&&(a=c),s}},f?(Y===i&&w.initialize(),w.invoke(m)):(Y!==i&&Y.invoke("destroy"),w.initialize())}),a!==i?a:r},e.fn.dropdown.settings={debug:!1,verbose:!1,performance:!0,on:"click",action:"activate",apiSettings:!1,saveRemoteData:!0,throttle:200,context:t,direction:"auto",keepOnScreen:!0,match:"both",fullTextSearch:!1,placeholder:"auto",preserveHTML:!0,sortSelect:!1,forceSelection:!0,allowAdditions:!1,maxSelections:!1,useLabels:!0,delimiter:",",showOnFocus:!0,allowTab:!0,allowCategorySelection:!1,fireOnInit:!1,transition:"auto",duration:200,glyphWidth:1.0714,label:{transition:"scale",duration:200,variation:!1},delay:{hide:300,show:200,search:20,touch:50},onChange:function(e,t,n){},onAdd:function(e,t,n){},onRemove:function(e,t,n){},onLabelSelect:function(e){},onLabelCreate:function(t,n){return e(this)},onNoResults:function(e){return!0},onShow:function(){},onHide:function(){},name:"Dropdown",namespace:"dropdown",message:{addResult:"Add <b>{term}</b>",count:"{count} selected",maxSelections:"Max {maxCount} selections",noResults:"No results found.",serverError:"There was an error contacting the server"},error:{action:"You called a dropdown action that was not defined",alreadySetup:"Once a select has been initialized behaviors must be called on the created ui dropdown",labels:"Allowing user additions currently requires the use of labels.",missingMultiple:"<select> requires multiple property to be set to correctly preserve multiple values",method:"The method you called is not defined.",noAPI:"The API module is required to load resources remotely",noStorage:"Saving remote data requires session storage",noTransition:"This module requires ui transitions <https://github.com/Semantic-Org/UI-Transition>"},regExp:{escape:/[-[\]{}()*+?.,\\^$|#\s]/g},metadata:{defaultText:"defaultText",defaultValue:"defaultValue",placeholderText:"placeholder",text:"text",value:"value"},fields:{values:"values",name:"name",value:"value"},selector:{addition:".addition",dropdown:".ui.dropdown",icon:"> .dropdown.icon",input:'> input[type="hidden"], > select',item:".item",label:"> .label",remove:"> .label > .delete.icon",siblingLabel:".label",menu:".menu",message:".message",menuIcon:".dropdown.icon",search:"input.search, .menu > .search > input",text:"> .text:not(.icon)",unselectable:".disabled, .filtered"},className:{active:"active",addition:"addition",animating:"animating",disabled:"disabled",dropdown:"ui dropdown",filtered:"filtered",hidden:"hidden transition",item:"item",label:"ui label",loading:"loading",menu:"menu",message:"message",multiple:"multiple",placeholder:"default",search:"search",selected:"selected",selection:"selection",upward:"upward",visible:"visible"}},e.fn.dropdown.settings.templates={dropdown:function(t){var n=t.placeholder||!1,i=(t.values||{},"");return i+='<i class="dropdown icon"></i>',i+=t.placeholder?'<div class="default text">'+n+"</div>":'<div class="text"></div>',i+='<div class="menu">',e.each(t.values,function(e,t){i+=t.disabled?'<div class="disabled item" data-value="'+t.value+'">'+t.name+"</div>":'<div class="item" data-value="'+t.value+'">'+t.name+"</div>"}),i+="</div>"},menu:function(t,n){var i=(t.values||{},"");return e.each(t[n.values],function(e,t){i+='<div class="item" data-value="'+t[n.value]+'">'+t[n.name]+"</div>"}),i},label:function(e,t){return t+'<i class="delete icon"></i>'},message:function(e){return e},addition:function(e){return e}}}(jQuery,window,document),function(e,t,n,i){"use strict";e.fn.embed=function(n){var o,a=e(this),r=a.selector||"",s=(new Date).getTime(),c=[],l=arguments[0],u="string"==typeof l,d=[].slice.call(arguments,1);return a.each(function(){var m,f=e.isPlainObject(n)?e.extend(!0,{},e.fn.embed.settings,n):e.extend({},e.fn.embed.settings),g=f.selector,p=f.className,v=f.sources,h=f.error,b=f.metadata,y=f.namespace,x=f.templates,C="."+y,w="module-"+y,k=(e(t),e(this)),S=k.find(g.placeholder),T=k.find(g.icon),A=k.find(g.embed),R=this,P=k.data(w);m={initialize:function(){m.debug("Initializing embed"),m.determine.autoplay(),m.create(),m.bind.events(),m.instantiate()},instantiate:function(){m.verbose("Storing instance of module",m),P=m,k.data(w,m)},destroy:function(){m.verbose("Destroying previous instance of embed"),m.reset(),k.removeData(w).off(C)},refresh:function(){m.verbose("Refreshing selector cache"),S=k.find(g.placeholder),T=k.find(g.icon),A=k.find(g.embed)},bind:{events:function(){m.has.placeholder()&&(m.debug("Adding placeholder events"),k.on("click"+C,g.placeholder,m.createAndShow).on("click"+C,g.icon,m.createAndShow))}},create:function(){var e=m.get.placeholder();e?m.createPlaceholder():m.createAndShow()},createPlaceholder:function(e){{var t=m.get.icon(),n=m.get.url();m.generate.embed(n)}e=e||m.get.placeholder(),k.html(x.placeholder(e,t)),m.debug("Creating placeholder for embed",e,t)},createEmbed:function(t){m.refresh(),t=t||m.get.url(),A=e("<div/>").addClass(p.embed).html(m.generate.embed(t)).appendTo(k),f.onCreate.call(R,t),m.debug("Creating embed object",A)},createAndShow:function(){m.createEmbed(),m.show()},change:function(e,t,n){m.debug("Changing video to ",e,t,n),k.data(b.source,e).data(b.id,t).data(b.url,n),m.create()},reset:function(){m.debug("Clearing embed and showing placeholder"),m.remove.active(),m.remove.embed(),m.showPlaceholder(),f.onReset.call(R)},show:function(){m.debug("Showing embed"),m.set.active(),f.onDisplay.call(R)},hide:function(){m.debug("Hiding embed"),m.showPlaceholder()},showPlaceholder:function(){m.debug("Showing placeholder image"),m.remove.active(),f.onPlaceholderDisplay.call(R)},get:{id:function(){return f.id||k.data(b.id)},placeholder:function(){return f.placeholder||k.data(b.placeholder);

},icon:function(){return f.icon?f.icon:k.data(b.icon)!==i?k.data(b.icon):m.determine.icon()},source:function(e){return f.source?f.source:k.data(b.source)!==i?k.data(b.source):m.determine.source()},type:function(){var e=m.get.source();return v[e]!==i?v[e].type:!1},url:function(){return f.url?f.url:k.data(b.url)!==i?k.data(b.url):m.determine.url()}},determine:{autoplay:function(){m.should.autoplay()&&(f.autoplay=!0)},source:function(t){var n=!1;return t=t||m.get.url(),t&&e.each(v,function(e,i){return-1!==t.search(i.domain)?(n=e,!1):void 0}),n},icon:function(){var e=m.get.source();return v[e]!==i?v[e].icon:!1},url:function(){var e,t=f.id||k.data(b.id),n=f.source||k.data(b.source);return e=v[n]!==i?v[n].url.replace("{id}",t):!1,e&&k.data(b.url,e),e}},set:{active:function(){k.addClass(p.active)}},remove:{active:function(){k.removeClass(p.active)},embed:function(){A.empty()}},encode:{parameters:function(e){var t,n=[];for(t in e)n.push(encodeURIComponent(t)+"="+encodeURIComponent(e[t]));return n.join("&amp;")}},generate:{embed:function(e){m.debug("Generating embed html");var t,n,i=m.get.source();return e=m.get.url(e),e?(n=m.generate.parameters(i),t=x.iframe(e,n)):m.error(h.noURL,k),t},parameters:function(t,n){var o=v[t]&&v[t].parameters!==i?v[t].parameters(f):{};return n=n||f.parameters,n&&(o=e.extend({},o,n)),o=f.onEmbed(o),m.encode.parameters(o)}},has:{placeholder:function(){return f.placeholder||k.data(b.placeholder)}},should:{autoplay:function(){return"auto"===f.autoplay?f.placeholder||k.data(b.placeholder)!==i:f.autoplay}},is:{video:function(){return"video"==m.get.type()}},setting:function(t,n){if(m.debug("Changing setting",t,n),e.isPlainObject(t))e.extend(!0,f,t);else{if(n===i)return f[t];f[t]=n}},internal:function(t,n){if(e.isPlainObject(t))e.extend(!0,m,t);else{if(n===i)return m[t];m[t]=n}},debug:function(){f.debug&&(f.performance?m.performance.log(arguments):(m.debug=Function.prototype.bind.call(console.info,console,f.name+":"),m.debug.apply(console,arguments)))},verbose:function(){f.verbose&&f.debug&&(f.performance?m.performance.log(arguments):(m.verbose=Function.prototype.bind.call(console.info,console,f.name+":"),m.verbose.apply(console,arguments)))},error:function(){m.error=Function.prototype.bind.call(console.error,console,f.name+":"),m.error.apply(console,arguments)},performance:{log:function(e){var t,n,i;f.performance&&(t=(new Date).getTime(),i=s||t,n=t-i,s=t,c.push({Name:e[0],Arguments:[].slice.call(e,1)||"",Element:R,"Execution Time":n})),clearTimeout(m.performance.timer),m.performance.timer=setTimeout(m.performance.display,500)},display:function(){var t=f.name+":",n=0;s=!1,clearTimeout(m.performance.timer),e.each(c,function(e,t){n+=t["Execution Time"]}),t+=" "+n+"ms",r&&(t+=" '"+r+"'"),a.length>1&&(t+=" ("+a.length+")"),(console.group!==i||console.table!==i)&&c.length>0&&(console.groupCollapsed(t),console.table?console.table(c):e.each(c,function(e,t){console.log(t.Name+": "+t["Execution Time"]+"ms")}),console.groupEnd()),c=[]}},invoke:function(t,n,a){var r,s,c,l=P;return n=n||d,a=R||a,"string"==typeof t&&l!==i&&(t=t.split(/[\. ]/),r=t.length-1,e.each(t,function(n,o){var a=n!=r?o+t[n+1].charAt(0).toUpperCase()+t[n+1].slice(1):t;if(e.isPlainObject(l[a])&&n!=r)l=l[a];else{if(l[a]!==i)return s=l[a],!1;if(!e.isPlainObject(l[o])||n==r)return l[o]!==i?(s=l[o],!1):(m.error(h.method,t),!1);l=l[o]}})),e.isFunction(s)?c=s.apply(a,n):s!==i&&(c=s),e.isArray(o)?o.push(c):o!==i?o=[o,c]:c!==i&&(o=c),s}},u?(P===i&&m.initialize(),m.invoke(l)):(P!==i&&P.invoke("destroy"),m.initialize())}),o!==i?o:this},e.fn.embed.settings={name:"Embed",namespace:"embed",debug:!1,verbose:!1,performance:!0,icon:!1,source:!1,url:!1,id:!1,autoplay:"auto",color:"#444444",hd:!0,brandedUI:!1,parameters:!1,onDisplay:function(){},onPlaceholderDisplay:function(){},onReset:function(){},onCreate:function(e){},onEmbed:function(e){return e},metadata:{id:"id",icon:"icon",placeholder:"placeholder",source:"source",url:"url"},error:{noURL:"No URL specified",method:"The method you called is not defined"},className:{active:"active",embed:"embed"},selector:{embed:".embed",placeholder:".placeholder",icon:".icon"},sources:{youtube:{name:"youtube",type:"video",icon:"video play",domain:"youtube.com",url:"//www.youtube.com/embed/{id}",parameters:function(e){return{autohide:!e.brandedUI,autoplay:e.autoplay,color:e.colors||i,hq:e.hd,jsapi:e.api,modestbranding:!e.brandedUI}}},vimeo:{name:"vimeo",type:"video",icon:"video play",domain:"vimeo.com",url:"//player.vimeo.com/video/{id}",parameters:function(e){return{api:e.api,autoplay:e.autoplay,byline:e.brandedUI,color:e.colors||i,portrait:e.brandedUI,title:e.brandedUI}}}},templates:{iframe:function(e,t){return'<iframe src="'+e+"?"+t+'" width="100%" height="100%" frameborder="0" scrolling="no" webkitAllowFullScreen mozallowfullscreen allowFullScreen></iframe>'},placeholder:function(e,t){var n="";return t&&(n+='<i class="'+t+' icon"></i>'),e&&(n+='<img class="placeholder" src="'+e+'">'),n}},api:!0,onPause:function(){},onPlay:function(){},onStop:function(){}}}(jQuery,window,document),function(e,t,n,i){"use strict";e.fn.modal=function(o){var a,r=e(this),s=e(t),c=e(n),l=e("body"),u=r.selector||"",d=(new Date).getTime(),m=[],f=arguments[0],g="string"==typeof f,p=[].slice.call(arguments,1),v=t.requestAnimationFrame||t.mozRequestAnimationFrame||t.webkitRequestAnimationFrame||t.msRequestAnimationFrame||function(e){setTimeout(e,0)};return r.each(function(){var r,h,b,y,x,C,w,k,S,T=e.isPlainObject(o)?e.extend(!0,{},e.fn.modal.settings,o):e.extend({},e.fn.modal.settings),A=T.selector,R=T.className,P=T.namespace,E=T.error,F="."+P,D="module-"+P,O=e(this),q=e(T.context),j=O.find(A.close),z=this,I=O.data(D);S={initialize:function(){S.verbose("Initializing dimmer",q),S.create.id(),S.create.dimmer(),S.refreshModals(),S.bind.events(),T.observeChanges&&S.observeChanges(),S.instantiate()},instantiate:function(){S.verbose("Storing instance of modal"),I=S,O.data(D,I)},create:{dimmer:function(){var t={debug:T.debug,dimmerName:"modals",duration:{show:T.duration,hide:T.duration}},n=e.extend(!0,t,T.dimmerSettings);return T.inverted&&(n.variation=n.variation!==i?n.variation+" inverted":"inverted"),e.fn.dimmer===i?void S.error(E.dimmer):(S.debug("Creating dimmer with settings",n),y=q.dimmer(n),T.detachable?(S.verbose("Modal is detachable, moving content into dimmer"),y.dimmer("add content",O)):S.set.undetached(),T.blurring&&y.addClass(R.blurring),void(x=y.dimmer("get dimmer")))},id:function(){w=(Math.random().toString(16)+"000000000").substr(2,8),C="."+w,S.verbose("Creating unique id for element",w)}},destroy:function(){S.verbose("Destroying previous modal"),O.removeData(D).off(F),s.off(C),j.off(F),q.dimmer("destroy")},observeChanges:function(){"MutationObserver"in t&&(k=new MutationObserver(function(e){S.debug("DOM tree modified, refreshing"),S.refresh()}),k.observe(z,{childList:!0,subtree:!0}),S.debug("Setting up mutation observer",k))},refresh:function(){S.remove.scrolling(),S.cacheSizes(),S.set.screenHeight(),S.set.type(),S.set.position()},refreshModals:function(){h=O.siblings(A.modal),r=h.add(O)},attachEvents:function(t,n){var i=e(t);n=e.isFunction(S[n])?S[n]:S.toggle,i.length>0?(S.debug("Attaching modal events to element",t,n),i.off(F).on("click"+F,n)):S.error(E.notFound,t)},bind:{events:function(){S.verbose("Attaching events"),O.on("click"+F,A.close,S.event.close).on("click"+F,A.approve,S.event.approve).on("click"+F,A.deny,S.event.deny),s.on("resize"+C,S.event.resize)}},get:{id:function(){return(Math.random().toString(16)+"000000000").substr(2,8)}},event:{approve:function(){return T.onApprove.call(z,e(this))===!1?void S.verbose("Approve callback returned false cancelling hide"):void S.hide()},deny:function(){return T.onDeny.call(z,e(this))===!1?void S.verbose("Deny callback returned false cancelling hide"):void S.hide()},close:function(){S.hide()},click:function(t){var i=e(t.target),o=i.closest(A.modal).length>0,a=e.contains(n.documentElement,t.target);!o&&a&&(S.debug("Dimmer clicked, hiding all modals"),S.is.active()&&(S.remove.clickaway(),T.allowMultiple?S.hide():S.hideAll()))},debounce:function(e,t){clearTimeout(S.timer),S.timer=setTimeout(e,t)},keyboard:function(e){var t=e.which,n=27;t==n&&(T.closable?(S.debug("Escape key pressed hiding modal"),S.hide()):S.debug("Escape key pressed, but closable is set to false"),e.preventDefault())},resize:function(){y.dimmer("is active")&&v(S.refresh)}},toggle:function(){S.is.active()||S.is.animating()?S.hide():S.show()},show:function(t){t=e.isFunction(t)?t:function(){},S.refreshModals(),S.showModal(t)},hide:function(t){t=e.isFunction(t)?t:function(){},S.refreshModals(),S.hideModal(t)},showModal:function(t){t=e.isFunction(t)?t:function(){},S.is.animating()||!S.is.active()?(S.showDimmer(),S.cacheSizes(),S.set.position(),S.set.screenHeight(),S.set.type(),S.set.clickaway(),!T.allowMultiple&&S.others.active()?S.hideOthers(S.showModal):(T.onShow.call(z),T.transition&&e.fn.transition!==i&&O.transition("is supported")?(S.debug("Showing modal with css animations"),O.transition({debug:T.debug,animation:T.transition+" in",queue:T.queue,duration:T.duration,useFailSafe:!0,onComplete:function(){T.onVisible.apply(z),S.add.keyboardShortcuts(),S.save.focus(),S.set.active(),T.autofocus&&S.set.autofocus(),t()}})):S.error(E.noTransition))):S.debug("Modal is already visible")},hideModal:function(t,n){t=e.isFunction(t)?t:function(){},S.debug("Hiding modal"),T.onHide.call(z),(S.is.animating()||S.is.active())&&(T.transition&&e.fn.transition!==i&&O.transition("is supported")?(S.remove.active(),O.transition({debug:T.debug,animation:T.transition+" out",queue:T.queue,duration:T.duration,useFailSafe:!0,onStart:function(){S.others.active()||n||S.hideDimmer(),S.remove.keyboardShortcuts()},onComplete:function(){T.onHidden.call(z),S.restore.focus(),t()}})):S.error(E.noTransition))},showDimmer:function(){y.dimmer("is animating")||!y.dimmer("is active")?(S.debug("Showing dimmer"),y.dimmer("show")):S.debug("Dimmer already visible")},hideDimmer:function(){return y.dimmer("is animating")||y.dimmer("is active")?void y.dimmer("hide",function(){S.remove.clickaway(),S.remove.screenHeight()}):void S.debug("Dimmer is not visible cannot hide")},hideAll:function(t){var n=r.filter("."+R.active+", ."+R.animating);t=e.isFunction(t)?t:function(){},n.length>0&&(S.debug("Hiding all visible modals"),S.hideDimmer(),n.modal("hide modal",t))},hideOthers:function(t){var n=h.filter("."+R.active+", ."+R.animating);t=e.isFunction(t)?t:function(){},n.length>0&&(S.debug("Hiding other modals",h),n.modal("hide modal",t,!0))},others:{active:function(){return h.filter("."+R.active).length>0},animating:function(){return h.filter("."+R.animating).length>0}},add:{keyboardShortcuts:function(){S.verbose("Adding keyboard shortcuts"),c.on("keyup"+F,S.event.keyboard)}},save:{focus:function(){b=e(n.activeElement).blur()}},restore:{focus:function(){b&&b.length>0&&b.focus()}},remove:{active:function(){O.removeClass(R.active)},clickaway:function(){T.closable&&x.off("click"+C)},bodyStyle:function(){""===l.attr("style")&&(S.verbose("Removing style attribute"),l.removeAttr("style"))},screenHeight:function(){S.debug("Removing page height"),l.css("height","")},keyboardShortcuts:function(){S.verbose("Removing keyboard shortcuts"),c.off("keyup"+F)},scrolling:function(){y.removeClass(R.scrolling),O.removeClass(R.scrolling)}},cacheSizes:function(){var o=O.outerHeight();(S.cache===i||0!==o)&&(S.cache={pageHeight:e(n).outerHeight(),height:o+T.offset,contextHeight:"body"==T.context?e(t).height():y.height()}),S.debug("Caching modal and container sizes",S.cache)},can:{fit:function(){return S.cache.height+2*T.padding<S.cache.contextHeight}},is:{active:function(){return O.hasClass(R.active)},animating:function(){return O.transition("is supported")?O.transition("is animating"):O.is(":visible")},scrolling:function(){return y.hasClass(R.scrolling)},modernBrowser:function(){return!(t.ActiveXObject||"ActiveXObject"in t)}},set:{autofocus:function(){var e=O.find(":input").filter(":visible"),t=e.filter("[autofocus]"),n=t.length>0?t.first():e.first();n.length>0&&n.focus()},clickaway:function(){T.closable&&x.on("click"+C,S.event.click)},screenHeight:function(){S.can.fit()?l.css("height",""):(S.debug("Modal is taller than page content, resizing page height"),l.css("height",S.cache.height+2*T.padding))},active:function(){O.addClass(R.active)},scrolling:function(){y.addClass(R.scrolling),O.addClass(R.scrolling)},type:function(){S.can.fit()?(S.verbose("Modal fits on screen"),S.others.active()||S.others.animating()||S.remove.scrolling()):(S.verbose("Modal cannot fit on screen setting to scrolling"),S.set.scrolling())},position:function(){S.verbose("Centering modal on page",S.cache),O.css(S.can.fit()?{top:"",marginTop:-(S.cache.height/2)}:{marginTop:"",top:c.scrollTop()})},undetached:function(){y.addClass(R.undetached)}},setting:function(t,n){if(S.debug("Changing setting",t,n),e.isPlainObject(t))e.extend(!0,T,t);else{if(n===i)return T[t];T[t]=n}},internal:function(t,n){if(e.isPlainObject(t))e.extend(!0,S,t);else{if(n===i)return S[t];S[t]=n}},debug:function(){T.debug&&(T.performance?S.performance.log(arguments):(S.debug=Function.prototype.bind.call(console.info,console,T.name+":"),S.debug.apply(console,arguments)))},verbose:function(){T.verbose&&T.debug&&(T.performance?S.performance.log(arguments):(S.verbose=Function.prototype.bind.call(console.info,console,T.name+":"),S.verbose.apply(console,arguments)))},error:function(){S.error=Function.prototype.bind.call(console.error,console,T.name+":"),S.error.apply(console,arguments)},performance:{log:function(e){var t,n,i;T.performance&&(t=(new Date).getTime(),i=d||t,n=t-i,d=t,m.push({Name:e[0],Arguments:[].slice.call(e,1)||"",Element:z,"Execution Time":n})),clearTimeout(S.performance.timer),S.performance.timer=setTimeout(S.performance.display,500)},display:function(){var t=T.name+":",n=0;d=!1,clearTimeout(S.performance.timer),e.each(m,function(e,t){n+=t["Execution Time"]}),t+=" "+n+"ms",u&&(t+=" '"+u+"'"),(console.group!==i||console.table!==i)&&m.length>0&&(console.groupCollapsed(t),console.table?console.table(m):e.each(m,function(e,t){console.log(t.Name+": "+t["Execution Time"]+"ms")}),console.groupEnd()),m=[]}},invoke:function(t,n,o){var r,s,c,l=I;return n=n||p,o=z||o,"string"==typeof t&&l!==i&&(t=t.split(/[\. ]/),r=t.length-1,e.each(t,function(n,o){var a=n!=r?o+t[n+1].charAt(0).toUpperCase()+t[n+1].slice(1):t;if(e.isPlainObject(l[a])&&n!=r)l=l[a];else{if(l[a]!==i)return s=l[a],!1;if(!e.isPlainObject(l[o])||n==r)return l[o]!==i?(s=l[o],!1):!1;l=l[o]}})),e.isFunction(s)?c=s.apply(o,n):s!==i&&(c=s),e.isArray(a)?a.push(c):a!==i?a=[a,c]:c!==i&&(a=c),s}},g?(I===i&&S.initialize(),S.invoke(f)):(I!==i&&I.invoke("destroy"),S.initialize())}),a!==i?a:this},e.fn.modal.settings={name:"Modal",namespace:"modal",debug:!1,verbose:!1,performance:!0,observeChanges:!1,allowMultiple:!1,detachable:!0,closable:!0,autofocus:!0,inverted:!1,blurring:!1,dimmerSettings:{closable:!1,useCSS:!0},context:"body",queue:!1,duration:500,offset:0,transition:"scale",padding:50,onShow:function(){},onVisible:function(){},onHide:function(){},onHidden:function(){},onApprove:function(){return!0},onDeny:function(){return!0},selector:{close:"> .close",approve:".actions .positive, .actions .approve, .actions .ok",deny:".actions .negative, .actions .deny, .actions .cancel",modal:".ui.modal"},error:{dimmer:"UI Dimmer, a required component is not included in this page",method:"The method you called is not defined.",notFound:"The element you specified could not be found"},className:{active:"active",animating:"animating",blurring:"blurring",scrolling:"scrolling",undetached:"undetached"}}}(jQuery,window,document),function(e,t,n,i){"use strict";e.fn.nag=function(n){var o,a=e(this),r=a.selector||"",s=(new Date).getTime(),c=[],l=arguments[0],u="string"==typeof l,d=[].slice.call(arguments,1);return a.each(function(){{var a,m=e.isPlainObject(n)?e.extend(!0,{},e.fn.nag.settings,n):e.extend({},e.fn.nag.settings),f=(m.className,m.selector),g=m.error,p=m.namespace,v="."+p,h=p+"-module",b=e(this),y=(b.find(f.close),e(m.context?m.context:"body")),x=this,C=b.data(h);t.requestAnimationFrame||t.mozRequestAnimationFrame||t.webkitRequestAnimationFrame||t.msRequestAnimationFrame||function(e){setTimeout(e,0)}}a={initialize:function(){a.verbose("Initializing element"),b.on("click"+v,f.close,a.dismiss).data(h,a),m.detachable&&b.parent()[0]!==y[0]&&b.detach().prependTo(y),m.displayTime>0&&setTimeout(a.hide,m.displayTime),a.show()},destroy:function(){a.verbose("Destroying instance"),b.removeData(h).off(v)},show:function(){a.should.show()&&!b.is(":visible")&&(a.debug("Showing nag",m.animation.show),"fade"==m.animation.show?b.fadeIn(m.duration,m.easing):b.slideDown(m.duration,m.easing))},hide:function(){a.debug("Showing nag",m.animation.hide),"fade"==m.animation.show?b.fadeIn(m.duration,m.easing):b.slideUp(m.duration,m.easing)},onHide:function(){a.debug("Removing nag",m.animation.hide),b.remove(),m.onHide&&m.onHide()},dismiss:function(e){m.storageMethod&&a.storage.set(m.key,m.value),a.hide(),e.stopImmediatePropagation(),e.preventDefault()},should:{show:function(){return m.persist?(a.debug("Persistent nag is set, can show nag"),!0):a.storage.get(m.key)!=m.value.toString()?(a.debug("Stored value is not set, can show nag",a.storage.get(m.key)),!0):(a.debug("Stored value is set, cannot show nag",a.storage.get(m.key)),!1)}},get:{storageOptions:function(){var e={};return m.expires&&(e.expires=m.expires),m.domain&&(e.domain=m.domain),m.path&&(e.path=m.path),e}},clear:function(){a.storage.remove(m.key)},storage:{set:function(n,o){var r=a.get.storageOptions();if("localstorage"==m.storageMethod&&t.localStorage!==i)t.localStorage.setItem(n,o),a.debug("Value stored using local storage",n,o);else if("sessionstorage"==m.storageMethod&&t.sessionStorage!==i)t.sessionStorage.setItem(n,o),a.debug("Value stored using session storage",n,o);else{if(e.cookie===i)return void a.error(g.noCookieStorage);e.cookie(n,o,r),a.debug("Value stored using cookie",n,o,r)}},get:function(n,o){var r;return"localstorage"==m.storageMethod&&t.localStorage!==i?r=t.localStorage.getItem(n):"sessionstorage"==m.storageMethod&&t.sessionStorage!==i?r=t.sessionStorage.getItem(n):e.cookie!==i?r=e.cookie(n):a.error(g.noCookieStorage),("undefined"==r||"null"==r||r===i||null===r)&&(r=i),r},remove:function(n){var o=a.get.storageOptions();"localstorage"==m.storageMethod&&t.localStorage!==i?t.localStorage.removeItem(n):"sessionstorage"==m.storageMethod&&t.sessionStorage!==i?t.sessionStorage.removeItem(n):e.cookie!==i?e.removeCookie(n,o):a.error(g.noStorage)}},setting:function(t,n){if(a.debug("Changing setting",t,n),e.isPlainObject(t))e.extend(!0,m,t);else{if(n===i)return m[t];m[t]=n}},internal:function(t,n){if(e.isPlainObject(t))e.extend(!0,a,t);else{if(n===i)return a[t];a[t]=n}},debug:function(){m.debug&&(m.performance?a.performance.log(arguments):(a.debug=Function.prototype.bind.call(console.info,console,m.name+":"),a.debug.apply(console,arguments)))},verbose:function(){m.verbose&&m.debug&&(m.performance?a.performance.log(arguments):(a.verbose=Function.prototype.bind.call(console.info,console,m.name+":"),a.verbose.apply(console,arguments)))},error:function(){a.error=Function.prototype.bind.call(console.error,console,m.name+":"),a.error.apply(console,arguments)},performance:{log:function(e){var t,n,i;m.performance&&(t=(new Date).getTime(),i=s||t,n=t-i,s=t,c.push({Name:e[0],Arguments:[].slice.call(e,1)||"",Element:x,"Execution Time":n})),clearTimeout(a.performance.timer),a.performance.timer=setTimeout(a.performance.display,500)},display:function(){var t=m.name+":",n=0;s=!1,clearTimeout(a.performance.timer),e.each(c,function(e,t){n+=t["Execution Time"]}),t+=" "+n+"ms",r&&(t+=" '"+r+"'"),(console.group!==i||console.table!==i)&&c.length>0&&(console.groupCollapsed(t),console.table?console.table(c):e.each(c,function(e,t){console.log(t.Name+": "+t["Execution Time"]+"ms")}),console.groupEnd()),c=[]}},invoke:function(t,n,r){var s,c,l,u=C;return n=n||d,r=x||r,"string"==typeof t&&u!==i&&(t=t.split(/[\. ]/),s=t.length-1,e.each(t,function(n,o){var r=n!=s?o+t[n+1].charAt(0).toUpperCase()+t[n+1].slice(1):t;if(e.isPlainObject(u[r])&&n!=s)u=u[r];else{if(u[r]!==i)return c=u[r],!1;if(!e.isPlainObject(u[o])||n==s)return u[o]!==i?(c=u[o],!1):(a.error(g.method,t),!1);u=u[o]}})),e.isFunction(c)?l=c.apply(r,n):c!==i&&(l=c),e.isArray(o)?o.push(l):o!==i?o=[o,l]:l!==i&&(o=l),c}},u?(C===i&&a.initialize(),a.invoke(l)):(C!==i&&C.invoke("destroy"),a.initialize())}),o!==i?o:this},e.fn.nag.settings={name:"Nag",debug:!1,verbose:!1,performance:!0,namespace:"Nag",persist:!1,displayTime:0,animation:{show:"slide",hide:"slide"},context:!1,detachable:!1,expires:30,domain:!1,path:"/",storageMethod:"cookie",key:"nag",value:"dismiss",error:{noCookieStorage:"$.cookie is not included. A storage solution is required.",noStorage:"Neither $.cookie or store is defined. A storage solution is required for storing state",method:"The method you called is not defined."},className:{bottom:"bottom",fixed:"fixed"},selector:{close:".close.icon"},speed:500,easing:"easeOutQuad",onHide:function(){}}}(jQuery,window,document),function(e,t,n,i){"use strict";e.fn.popup=function(o){var a,r=e(this),s=e(n),c=e(t),l=e("body"),u=r.selector||"",d=!0,m=(new Date).getTime(),f=[],g=arguments[0],p="string"==typeof g,v=[].slice.call(arguments,1);return r.each(function(){var n,r,h,b,y,x=e.isPlainObject(o)?e.extend(!0,{},e.fn.popup.settings,o):e.extend({},e.fn.popup.settings),C=x.selector,w=x.className,k=x.error,S=x.metadata,T=x.namespace,A="."+x.namespace,R="module-"+T,P=e(this),E=e(x.context),F=x.target?e(x.target):P,D=0,O=!1,q=!1,j=this,z=P.data(R);y={initialize:function(){y.debug("Initializing",P),y.createID(),y.bind.events(),!y.exists()&&x.preserve&&y.create(),y.instantiate()},instantiate:function(){y.verbose("Storing instance",y),z=y,P.data(R,z)},refresh:function(){x.popup?n=e(x.popup).eq(0):x.inline&&(n=F.nextAll(C.popup).eq(0),x.popup=n),x.popup?(n.addClass(w.loading),r=y.get.offsetParent(),n.removeClass(w.loading),x.movePopup&&y.has.popup()&&y.get.offsetParent(n)[0]!==r[0]&&(y.debug("Moving popup to the same offset parent as activating element"),n.detach().appendTo(r))):r=x.inline?y.get.offsetParent(F):y.has.popup()?y.get.offsetParent(n):l,r.is("html")&&r[0]!==l[0]&&(y.debug("Setting page as offset parent"),r=l),y.get.variation()&&y.set.variation()},reposition:function(){y.refresh(),y.set.position()},destroy:function(){y.debug("Destroying previous module"),n&&!x.preserve&&y.removePopup(),clearTimeout(y.hideTimer),clearTimeout(y.showTimer),c.off(h),P.off(A).removeData(R)},event:{start:function(t){var n=e.isPlainObject(x.delay)?x.delay.show:x.delay;clearTimeout(y.hideTimer),q||(y.showTimer=setTimeout(y.show,n))},end:function(){var t=e.isPlainObject(x.delay)?x.delay.hide:x.delay;clearTimeout(y.showTimer),y.hideTimer=setTimeout(y.hide,t)},touchstart:function(e){q=!0,y.show()},resize:function(){y.is.visible()&&y.set.position()},hideGracefully:function(t){t&&0===e(t.target).closest(C.popup).length?(y.debug("Click occurred outside popup hiding popup"),y.hide()):y.debug("Click was inside popup, keeping popup open")}},create:function(){var t=y.get.html(),i=y.get.title(),o=y.get.content();t||o||i?(y.debug("Creating pop-up html"),t||(t=x.templates.popup({title:i,content:o})),n=e("<div/>").addClass(w.popup).data(S.activator,P).html(t),x.inline?(y.verbose("Inserting popup element inline",n),n.insertAfter(P)):(y.verbose("Appending popup element to body",n),n.appendTo(E)),y.refresh(),y.set.variation(),x.hoverable&&y.bind.popup(),x.onCreate.call(n,j)):0!==F.next(C.popup).length?(y.verbose("Pre-existing popup found"),x.inline=!0,x.popups=F.next(C.popup).data(S.activator,P),y.refresh(),x.hoverable&&y.bind.popup()):x.popup?(e(x.popup).data(S.activator,P),y.verbose("Used popup specified in settings"),y.refresh(),x.hoverable&&y.bind.popup()):y.debug("No content specified skipping display",j)},createID:function(){b=(Math.random().toString(16)+"000000000").substr(2,8),h="."+b,y.verbose("Creating unique id for element",b)},toggle:function(){y.debug("Toggling pop-up"),y.is.hidden()?(y.debug("Popup is hidden, showing pop-up"),y.unbind.close(),y.show()):(y.debug("Popup is visible, hiding pop-up"),y.hide())},show:function(e){if(e=e||function(){},y.debug("Showing pop-up",x.transition),y.is.hidden()&&(!y.is.active()||!y.is.dropdown())){if(y.exists()||y.create(),x.onShow.call(n,j)===!1)return void y.debug("onShow callback returned false, cancelling popup animation");x.preserve||x.popup||y.refresh(),n&&y.set.position()&&(y.save.conditions(),x.exclusive&&y.hideAll(),y.animate.show(e))}},hide:function(e){if(e=e||function(){},y.is.visible()||y.is.animating()){if(x.onHide.call(n,j)===!1)return void y.debug("onHide callback returned false, cancelling popup animation");y.remove.visible(),y.unbind.close(),y.restore.conditions(),y.animate.hide(e)}},hideAll:function(){e(C.popup).filter("."+w.visible).each(function(){e(this).data(S.activator).popup("hide")})},exists:function(){return n?x.inline||x.popup?y.has.popup():n.closest(E).length>=1?!0:!1:!1},removePopup:function(){y.has.popup()&&!x.popup&&(y.debug("Removing popup",n),n.remove(),n=i,x.onRemove.call(n,j))},save:{conditions:function(){y.cache={title:P.attr("title")},y.cache.title&&P.removeAttr("title"),y.verbose("Saving original attributes",y.cache.title)}},restore:{conditions:function(){return y.cache&&y.cache.title&&(P.attr("title",y.cache.title),y.verbose("Restoring original attributes",y.cache.title)),!0}},animate:{show:function(t){t=e.isFunction(t)?t:function(){},x.transition&&e.fn.transition!==i&&P.transition("is supported")?(y.set.visible(),n.transition({animation:x.transition+" in",queue:!1,debug:x.debug,verbose:x.verbose,duration:x.duration,onComplete:function(){y.bind.close(),t.call(n,j),x.onVisible.call(n,j)}})):y.error(k.noTransition)},hide:function(t){return t=e.isFunction(t)?t:function(){},y.debug("Hiding pop-up"),x.onHide.call(n,j)===!1?void y.debug("onHide callback returned false, cancelling popup animation"):void(x.transition&&e.fn.transition!==i&&P.transition("is supported")?n.transition({animation:x.transition+" out",queue:!1,duration:x.duration,debug:x.debug,verbose:x.verbose,onComplete:function(){y.reset(),t.call(n,j),x.onHidden.call(n,j)}}):y.error(k.noTransition))}},get:{html:function(){return P.removeData(S.html),P.data(S.html)||x.html},title:function(){return P.removeData(S.title),P.data(S.title)||x.title},content:function(){return P.removeData(S.content),P.data(S.content)||P.attr("title")||x.content},variation:function(){return P.removeData(S.variation),P.data(S.variation)||x.variation},popupOffset:function(){return n.offset()},calculations:function(){var e,i=F[0],o=x.inline||x.popup?F.position():F.offset(),a={};return a={target:{element:F[0],width:F.outerWidth(),height:F.outerHeight(),top:o.top,left:o.left,margin:{}},popup:{width:n.outerWidth(),height:n.outerHeight()},parent:{width:r.outerWidth(),height:r.outerHeight()},screen:{scroll:{top:c.scrollTop(),left:c.scrollLeft()},width:c.width(),height:c.height()}},x.setFluidWidth&&y.is.fluid()&&(a.container={width:n.parent().outerWidth()},a.popup.width=a.container.width),a.target.margin.top=x.inline?parseInt(t.getComputedStyle(i).getPropertyValue("margin-top"),10):0,a.target.margin.left=x.inline?y.is.rtl()?parseInt(t.getComputedStyle(i).getPropertyValue("margin-right"),10):parseInt(t.getComputedStyle(i).getPropertyValue("margin-left"),10):0,e=a.screen,a.boundary={top:e.scroll.top,bottom:e.scroll.top+e.height,left:e.scroll.left,right:e.scroll.left+e.width},a},id:function(){return b},startEvent:function(){return"hover"==x.on?"mouseenter":"focus"==x.on?"focus":!1},scrollEvent:function(){return"scroll"},endEvent:function(){return"hover"==x.on?"mouseleave":"focus"==x.on?"blur":!1},distanceFromBoundary:function(e,t){var n,i,o={};return e=e||y.get.offset(),t=t||y.get.calculations(),n=t.popup,i=t.boundary,e&&(o={top:e.top-i.top,left:e.left-i.left,right:i.right-(e.left+n.width),bottom:i.bottom-(e.top+n.height)},y.verbose("Distance from boundaries determined",e,o)),o},offsetParent:function(t){var n=t!==i?t[0]:P[0],o=n.parentNode,a=e(o);if(o)for(var r="none"===a.css("transform"),s="static"===a.css("position"),c=a.is("html");o&&!c&&s&&r;)o=o.parentNode,a=e(o),r="none"===a.css("transform"),s="static"===a.css("position"),c=a.is("html");return a&&a.length>0?a:e()},positions:function(){return{"top left":!1,"top center":!1,"top right":!1,"bottom left":!1,"bottom center":!1,"bottom right":!1,"left center":!1,"right center":!1}},nextPosition:function(e){var t=e.split(" "),n=t[0],i=t[1],o={top:"bottom",bottom:"top",left:"right",right:"left"},a={left:"center",center:"right",right:"left"},r={"top left":"top center","top center":"top right","top right":"right center","right center":"bottom right","bottom right":"bottom center","bottom center":"bottom left","bottom left":"left center","left center":"top left"},s="top"==n||"bottom"==n,c=!1,l=!1,u=!1;return O||(y.verbose("All available positions available"),O=y.get.positions()),y.debug("Recording last position tried",e),O[e]=!0,"opposite"===x.prefer&&(u=[o[n],i],u=u.join(" "),c=O[u]===!0,y.debug("Trying opposite strategy",u)),"adjacent"===x.prefer&&s&&(u=[n,a[i]],u=u.join(" "),l=O[u]===!0,y.debug("Trying adjacent strategy",u)),(l||c)&&(y.debug("Using backup position",u),u=r[e]),u}},set:{position:function(e,t){if(0===F.length||0===n.length)return void y.error(k.notFound);var o,a,r,s,c,l,u,d;if(t=t||y.get.calculations(),e=e||P.data(S.position)||x.position,o=P.data(S.offset)||x.offset,a=x.distanceAway,r=t.target,s=t.popup,c=t.parent,0===r.width&&0===r.height)return y.debug("Popup target is hidden, no action taken"),!1;switch(x.inline&&(y.debug("Adding margin to calculation",r.margin),"left center"==e||"right center"==e?(o+=r.margin.top,a+=-r.margin.left):"top left"==e||"top center"==e||"top right"==e?(o+=r.margin.left,a-=r.margin.top):(o+=r.margin.left,a+=r.margin.top)),y.debug("Determining popup position from calculations",e,t),y.is.rtl()&&(e=e.replace(/left|right/g,function(e){return"left"==e?"right":"left"}),y.debug("RTL: Popup position updated",e)),D==x.maxSearchDepth&&"string"==typeof x.lastResort&&(e=x.lastResort),e){case"top left":l={top:"auto",bottom:c.height-r.top+a,left:r.left+o,right:"auto"};break;case"top center":l={bottom:c.height-r.top+a,left:r.left+r.width/2-s.width/2+o,top:"auto",right:"auto"};break;case"top right":l={bottom:c.height-r.top+a,right:c.width-r.left-r.width-o,top:"auto",left:"auto"};break;case"left center":l={top:r.top+r.height/2-s.height/2+o,right:c.width-r.left+a,left:"auto",bottom:"auto"};break;case"right center":l={top:r.top+r.height/2-s.height/2+o,left:r.left+r.width+a,bottom:"auto",right:"auto"};break;case"bottom left":l={top:r.top+r.height+a,left:r.left+o,bottom:"auto",right:"auto"};break;case"bottom center":l={top:r.top+r.height+a,left:r.left+r.width/2-s.width/2+o,bottom:"auto",right:"auto"};break;case"bottom right":l={top:r.top+r.height+a,right:c.width-r.left-r.width-o,left:"auto",bottom:"auto"}}if(l===i&&y.error(k.invalidPosition,e),y.debug("Calculated popup positioning values",l),n.css(l).removeClass(w.position).addClass(e).addClass(w.loading),u=y.get.popupOffset(),d=y.get.distanceFromBoundary(u,t),y.is.offstage(d,e)){if(y.debug("Position is outside viewport",e),D<x.maxSearchDepth)return D++,e=y.get.nextPosition(e),y.debug("Trying new position",e),n?y.set.position(e,t):!1;if(!x.lastResort)return y.debug("Popup could not find a position to display",n),y.error(k.cannotPlace,j),y.remove.attempts(),y.remove.loading(),y.reset(),!1;y.debug("No position found, showing with last position")}return y.debug("Position is on stage",e),y.remove.attempts(),y.remove.loading(),x.setFluidWidth&&y.is.fluid()&&y.set.fluidWidth(t),!0},fluidWidth:function(e){e=e||y.get.calculations(),y.debug("Automatically setting element width to parent width",e.parent.width),n.css("width",e.container.width)},variation:function(e){
e=e||y.get.variation(),e&&y.has.popup()&&(y.verbose("Adding variation to popup",e),n.addClass(e))},visible:function(){P.addClass(w.visible)}},remove:{loading:function(){n.removeClass(w.loading)},variation:function(e){e=e||y.get.variation(),e&&(y.verbose("Removing variation",e),n.removeClass(e))},visible:function(){P.removeClass(w.visible)},attempts:function(){y.verbose("Resetting all searched positions"),D=0,O=!1}},bind:{events:function(){y.debug("Binding popup events to module"),"click"==x.on&&P.on("click"+A,y.toggle),"hover"==x.on&&d&&P.on("touchstart"+A,y.event.touchstart),y.get.startEvent()&&P.on(y.get.startEvent()+A,y.event.start).on(y.get.endEvent()+A,y.event.end),x.target&&y.debug("Target set to element",F),c.on("resize"+h,y.event.resize)},popup:function(){y.verbose("Allowing hover events on popup to prevent closing"),n&&y.has.popup()&&n.on("mouseenter"+A,y.event.start).on("mouseleave"+A,y.event.end)},close:function(){(x.hideOnScroll===!0||"auto"==x.hideOnScroll&&"click"!=x.on)&&(s.one(y.get.scrollEvent()+h,y.event.hideGracefully),E.one(y.get.scrollEvent()+h,y.event.hideGracefully)),"hover"==x.on&&q&&(y.verbose("Binding popup close event to document"),s.on("touchstart"+h,function(e){y.verbose("Touched away from popup"),y.event.hideGracefully.call(j,e)})),"click"==x.on&&x.closable&&(y.verbose("Binding popup close event to document"),s.on("click"+h,function(e){y.verbose("Clicked away from popup"),y.event.hideGracefully.call(j,e)}))}},unbind:{close:function(){(x.hideOnScroll===!0||"auto"==x.hideOnScroll&&"click"!=x.on)&&(s.off("scroll"+h,y.hide),E.off("scroll"+h,y.hide)),"hover"==x.on&&q&&(s.off("touchstart"+h),q=!1),"click"==x.on&&x.closable&&(y.verbose("Removing close event from document"),s.off("click"+h))}},has:{popup:function(){return n&&n.length>0}},is:{offstage:function(t,n){var i=[];return e.each(t,function(e,t){t<-x.jitter&&(y.debug("Position exceeds allowable distance from edge",e,t,n),i.push(e))}),i.length>0?!0:!1},active:function(){return P.hasClass(w.active)},animating:function(){return n&&n.hasClass(w.animating)},fluid:function(){return n&&n.hasClass(w.fluid)},visible:function(){return n&&n.hasClass(w.visible)},dropdown:function(){return P.hasClass(w.dropdown)},hidden:function(){return!y.is.visible()},rtl:function(){return"rtl"==P.css("direction")}},reset:function(){y.remove.visible(),x.preserve?e.fn.transition!==i&&n.transition("remove transition"):y.removePopup()},setting:function(t,n){if(e.isPlainObject(t))e.extend(!0,x,t);else{if(n===i)return x[t];x[t]=n}},internal:function(t,n){if(e.isPlainObject(t))e.extend(!0,y,t);else{if(n===i)return y[t];y[t]=n}},debug:function(){x.debug&&(x.performance?y.performance.log(arguments):(y.debug=Function.prototype.bind.call(console.info,console,x.name+":"),y.debug.apply(console,arguments)))},verbose:function(){x.verbose&&x.debug&&(x.performance?y.performance.log(arguments):(y.verbose=Function.prototype.bind.call(console.info,console,x.name+":"),y.verbose.apply(console,arguments)))},error:function(){y.error=Function.prototype.bind.call(console.error,console,x.name+":"),y.error.apply(console,arguments)},performance:{log:function(e){var t,n,i;x.performance&&(t=(new Date).getTime(),i=m||t,n=t-i,m=t,f.push({Name:e[0],Arguments:[].slice.call(e,1)||"",Element:j,"Execution Time":n})),clearTimeout(y.performance.timer),y.performance.timer=setTimeout(y.performance.display,500)},display:function(){var t=x.name+":",n=0;m=!1,clearTimeout(y.performance.timer),e.each(f,function(e,t){n+=t["Execution Time"]}),t+=" "+n+"ms",u&&(t+=" '"+u+"'"),(console.group!==i||console.table!==i)&&f.length>0&&(console.groupCollapsed(t),console.table?console.table(f):e.each(f,function(e,t){console.log(t.Name+": "+t["Execution Time"]+"ms")}),console.groupEnd()),f=[]}},invoke:function(t,n,o){var r,s,c,l=z;return n=n||v,o=j||o,"string"==typeof t&&l!==i&&(t=t.split(/[\. ]/),r=t.length-1,e.each(t,function(n,o){var a=n!=r?o+t[n+1].charAt(0).toUpperCase()+t[n+1].slice(1):t;if(e.isPlainObject(l[a])&&n!=r)l=l[a];else{if(l[a]!==i)return s=l[a],!1;if(!e.isPlainObject(l[o])||n==r)return l[o]!==i?(s=l[o],!1):!1;l=l[o]}})),e.isFunction(s)?c=s.apply(o,n):s!==i&&(c=s),e.isArray(a)?a.push(c):a!==i?a=[a,c]:c!==i&&(a=c),s}},p?(z===i&&y.initialize(),y.invoke(g)):(z!==i&&z.invoke("destroy"),y.initialize())}),a!==i?a:this},e.fn.popup.settings={name:"Popup",debug:!1,verbose:!1,performance:!0,namespace:"popup",onCreate:function(){},onRemove:function(){},onShow:function(){},onVisible:function(){},onHide:function(){},onHidden:function(){},on:"hover",addTouchEvents:!0,position:"top left",variation:"",movePopup:!0,target:!1,popup:!1,inline:!1,preserve:!1,hoverable:!1,content:!1,html:!1,title:!1,closable:!0,hideOnScroll:"auto",exclusive:!1,context:"body",prefer:"opposite",lastResort:!1,delay:{show:50,hide:70},setFluidWidth:!0,duration:200,transition:"scale",distanceAway:0,jitter:2,offset:0,maxSearchDepth:15,error:{invalidPosition:"The position you specified is not a valid position",cannotPlace:"Popup does not fit within the boundaries of the viewport",method:"The method you called is not defined.",noTransition:"This module requires ui transitions <https://github.com/Semantic-Org/UI-Transition>",notFound:"The target or popup you specified does not exist on the page"},metadata:{activator:"activator",content:"content",html:"html",offset:"offset",position:"position",title:"title",variation:"variation"},className:{active:"active",animating:"animating",dropdown:"dropdown",fluid:"fluid",loading:"loading",popup:"ui popup",position:"top left center bottom right",visible:"visible"},selector:{popup:".ui.popup"},templates:{escape:function(e){var t=/[&<>"'`]/g,n=/[&<>"'`]/,i={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},o=function(e){return i[e]};return n.test(e)?e.replace(t,o):e},popup:function(t){var n="",o=e.fn.popup.settings.templates.escape;return typeof t!==i&&(typeof t.title!==i&&t.title&&(t.title=o(t.title),n+='<div class="header">'+t.title+"</div>"),typeof t.content!==i&&t.content&&(t.content=o(t.content),n+='<div class="content">'+t.content+"</div>")),n}}}}(jQuery,window,document),function(e,t,n,i){"use strict";e.fn.progress=function(t){var o,a=e(this),r=a.selector||"",s=(new Date).getTime(),c=[],l=arguments[0],u="string"==typeof l,d=[].slice.call(arguments,1);return a.each(function(){var a,m,f=e.isPlainObject(t)?e.extend(!0,{},e.fn.progress.settings,t):e.extend({},e.fn.progress.settings),g=f.className,p=f.metadata,v=f.namespace,h=f.selector,b=f.error,y="."+v,x="module-"+v,C=e(this),w=e(this).find(h.bar),k=e(this).find(h.progress),S=e(this).find(h.label),T=this,A=C.data(x),R=!1;m={initialize:function(){m.debug("Initializing progress bar",f),m.set.duration(),m.set.transitionEvent(),m.read.metadata(),m.read.settings(),m.instantiate()},instantiate:function(){m.verbose("Storing instance of progress",m),A=m,C.data(x,m)},destroy:function(){m.verbose("Destroying previous progress for",C),clearInterval(A.interval),m.remove.state(),C.removeData(x),A=i},reset:function(){m.set.percent(0)},complete:function(){(m.percent===i||m.percent<100)&&m.set.percent(100)},read:{metadata:function(){var e={percent:C.data(p.percent),total:C.data(p.total),value:C.data(p.value)};e.percent&&(m.debug("Current percent value set from metadata",e.percent),m.set.percent(e.percent)),e.total&&(m.debug("Total value set from metadata",e.total),m.set.total(e.total)),e.value&&(m.debug("Current value set from metadata",e.value),m.set.value(e.value),m.set.progress(e.value))},settings:function(){f.total!==!1&&(m.debug("Current total set in settings",f.total),m.set.total(f.total)),f.value!==!1&&(m.debug("Current value set in settings",f.value),m.set.value(f.value),m.set.progress(m.value)),f.percent!==!1&&(m.debug("Current percent set in settings",f.percent),m.set.percent(f.percent))}},increment:function(e){var t,n,i;m.has.total()?(n=m.get.value(),e=e||1,i=n+e,t=m.get.total(),m.debug("Incrementing value",n,i,t),i>t&&(m.debug("Value cannot increment above total",t),i=t)):(n=m.get.percent(),e=e||m.get.randomValue(),i=n+e,t=100,m.debug("Incrementing percentage by",n,i),i>t&&(m.debug("Value cannot increment above 100 percent"),i=t)),m.set.progress(i)},decrement:function(e){var t,n,i=m.get.total();i?(t=m.get.value(),e=e||1,n=t-e,m.debug("Decrementing value by",e,t)):(t=m.get.percent(),e=e||m.get.randomValue(),n=t-e,m.debug("Decrementing percentage by",e,t)),0>n&&(m.debug("Value cannot decrement below 0"),n=0),m.set.progress(n)},has:{total:function(){return m.get.total()!==!1}},get:{text:function(e){var t=m.value||0,n=m.total||0,i=R?m.get.displayPercent():m.percent||0,o=m.total>0?n-t:100-i;return e=e||"",e=e.replace("{value}",t).replace("{total}",n).replace("{left}",o).replace("{percent}",i),m.debug("Adding variables to progress bar text",e),e},randomValue:function(){return m.debug("Generating random increment percentage"),Math.floor(Math.random()*f.random.max+f.random.min)},numericValue:function(e){return"string"==typeof e?""!==e.replace(/[^\d.]/g,"")?+e.replace(/[^\d.]/g,""):!1:e},transitionEnd:function(){var e,t=n.createElement("element"),o={transition:"transitionend",OTransition:"oTransitionEnd",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"};for(e in o)if(t.style[e]!==i)return o[e]},displayPercent:function(){var e=w.width(),t=C.width(),n=parseInt(w.css("min-width"),10),i=e>n?e/t*100:m.percent;return f.precision>0?Math.round(10*i*f.precision)/(10*f.precision):Math.round(i)},percent:function(){return m.percent||0},value:function(){return m.value||0},total:function(){return m.total||!1}},is:{success:function(){return C.hasClass(g.success)},warning:function(){return C.hasClass(g.warning)},error:function(){return C.hasClass(g.error)},active:function(){return C.hasClass(g.active)},visible:function(){return C.is(":visible")}},remove:{state:function(){m.verbose("Removing stored state"),delete m.total,delete m.percent,delete m.value},active:function(){m.verbose("Removing active state"),C.removeClass(g.active)},success:function(){m.verbose("Removing success state"),C.removeClass(g.success)},warning:function(){m.verbose("Removing warning state"),C.removeClass(g.warning)},error:function(){m.verbose("Removing error state"),C.removeClass(g.error)}},set:{barWidth:function(e){e>100?m.error(b.tooHigh,e):0>e?m.error(b.tooLow,e):(w.css("width",e+"%"),C.attr("data-percent",parseInt(e,10)))},duration:function(e){e=e||f.duration,e="number"==typeof e?e+"ms":e,m.verbose("Setting progress bar transition duration",e),w.css({"transition-duration":e})},percent:function(e){e="string"==typeof e?+e.replace("%",""):e,e=f.precision>0?Math.round(10*e*f.precision)/(10*f.precision):Math.round(e),m.percent=e,m.has.total()||(m.value=f.precision>0?Math.round(e/100*m.total*10*f.precision)/(10*f.precision):Math.round(e/100*m.total*10)/10,f.limitValues&&(m.value=m.value>100?100:m.value<0?0:m.value)),m.set.barWidth(e),m.set.labelInterval(),m.set.labels(),f.onChange.call(T,e,m.value,m.total)},labelInterval:function(){var e=function(){m.verbose("Bar finished animating, removing continuous label updates"),clearInterval(m.interval),R=!1,m.set.labels()};clearInterval(m.interval),w.one(a+y,e),m.timer=setTimeout(e,f.duration+100),R=!0,m.interval=setInterval(m.set.labels,f.framerate)},labels:function(){m.verbose("Setting both bar progress and outer label text"),m.set.barLabel(),m.set.state()},label:function(e){e=e||"",e&&(e=m.get.text(e),m.debug("Setting label to text",e),S.text(e))},state:function(e){e=e!==i?e:m.percent,100===e?!f.autoSuccess||m.is.warning()||m.is.error()?(m.verbose("Reached 100% removing active state"),m.remove.active()):(m.set.success(),m.debug("Automatically triggering success at 100%")):e>0?(m.verbose("Adjusting active progress bar label",e),m.set.active()):(m.remove.active(),m.set.label(f.text.active))},barLabel:function(e){e!==i?k.text(m.get.text(e)):"ratio"==f.label&&m.total?(m.debug("Adding ratio to bar label"),k.text(m.get.text(f.text.ratio))):"percent"==f.label&&(m.debug("Adding percentage to bar label"),k.text(m.get.text(f.text.percent)))},active:function(e){e=e||f.text.active,m.debug("Setting active state"),f.showActivity&&!m.is.active()&&C.addClass(g.active),m.remove.warning(),m.remove.error(),m.remove.success(),e&&m.set.label(e),f.onActive.call(T,m.value,m.total)},success:function(e){e=e||f.text.success,m.debug("Setting success state"),C.addClass(g.success),m.remove.active(),m.remove.warning(),m.remove.error(),m.complete(),e&&m.set.label(e),f.onSuccess.call(T,m.total)},warning:function(e){e=e||f.text.warning,m.debug("Setting warning state"),C.addClass(g.warning),m.remove.active(),m.remove.success(),m.remove.error(),m.complete(),e&&m.set.label(e),f.onWarning.call(T,m.value,m.total)},error:function(e){e=e||f.text.error,m.debug("Setting error state"),C.addClass(g.error),m.remove.active(),m.remove.success(),m.remove.warning(),m.complete(),e&&m.set.label(e),f.onError.call(T,m.value,m.total)},transitionEvent:function(){a=m.get.transitionEnd()},total:function(e){m.total=e},value:function(e){m.value=e},progress:function(e){var t,n=m.get.numericValue(e);n===!1&&m.error(b.nonNumeric,e),m.has.total()?(m.set.value(n),t=n/m.total*100,m.debug("Calculating percent complete from total",t),m.set.percent(t)):(t=n,m.debug("Setting value to exact percentage value",t),m.set.percent(t))}},setting:function(t,n){if(m.debug("Changing setting",t,n),e.isPlainObject(t))e.extend(!0,f,t);else{if(n===i)return f[t];f[t]=n}},internal:function(t,n){if(e.isPlainObject(t))e.extend(!0,m,t);else{if(n===i)return m[t];m[t]=n}},debug:function(){f.debug&&(f.performance?m.performance.log(arguments):(m.debug=Function.prototype.bind.call(console.info,console,f.name+":"),m.debug.apply(console,arguments)))},verbose:function(){f.verbose&&f.debug&&(f.performance?m.performance.log(arguments):(m.verbose=Function.prototype.bind.call(console.info,console,f.name+":"),m.verbose.apply(console,arguments)))},error:function(){m.error=Function.prototype.bind.call(console.error,console,f.name+":"),m.error.apply(console,arguments)},performance:{log:function(e){var t,n,i;f.performance&&(t=(new Date).getTime(),i=s||t,n=t-i,s=t,c.push({Name:e[0],Arguments:[].slice.call(e,1)||"",Element:T,"Execution Time":n})),clearTimeout(m.performance.timer),m.performance.timer=setTimeout(m.performance.display,500)},display:function(){var t=f.name+":",n=0;s=!1,clearTimeout(m.performance.timer),e.each(c,function(e,t){n+=t["Execution Time"]}),t+=" "+n+"ms",r&&(t+=" '"+r+"'"),(console.group!==i||console.table!==i)&&c.length>0&&(console.groupCollapsed(t),console.table?console.table(c):e.each(c,function(e,t){console.log(t.Name+": "+t["Execution Time"]+"ms")}),console.groupEnd()),c=[]}},invoke:function(t,n,a){var r,s,c,l=A;return n=n||d,a=T||a,"string"==typeof t&&l!==i&&(t=t.split(/[\. ]/),r=t.length-1,e.each(t,function(n,o){var a=n!=r?o+t[n+1].charAt(0).toUpperCase()+t[n+1].slice(1):t;if(e.isPlainObject(l[a])&&n!=r)l=l[a];else{if(l[a]!==i)return s=l[a],!1;if(!e.isPlainObject(l[o])||n==r)return l[o]!==i?(s=l[o],!1):(m.error(b.method,t),!1);l=l[o]}})),e.isFunction(s)?c=s.apply(a,n):s!==i&&(c=s),e.isArray(o)?o.push(c):o!==i?o=[o,c]:c!==i&&(o=c),s}},u?(A===i&&m.initialize(),m.invoke(l)):(A!==i&&A.invoke("destroy"),m.initialize())}),o!==i?o:this},e.fn.progress.settings={name:"Progress",namespace:"progress",debug:!1,verbose:!1,performance:!0,random:{min:2,max:5},duration:300,autoSuccess:!0,showActivity:!0,limitValues:!0,label:"percent",precision:0,framerate:1e3/30,percent:!1,total:!1,value:!1,onChange:function(e,t,n){},onSuccess:function(e){},onActive:function(e,t){},onError:function(e,t){},onWarning:function(e,t){},error:{method:"The method you called is not defined.",nonNumeric:"Progress value is non numeric",tooHigh:"Value specified is above 100%",tooLow:"Value specified is below 0%"},regExp:{variable:/\{\$*[A-z0-9]+\}/g},metadata:{percent:"percent",total:"total",value:"value"},selector:{bar:"> .bar",label:"> .label",progress:".bar > .progress"},text:{active:!1,error:!1,success:!1,warning:!1,percent:"{percent}%",ratio:"{value} of {total}"},className:{active:"active",error:"error",success:"success",warning:"warning"}}}(jQuery,window,document),function(e,t,n,i){"use strict";e.fn.rating=function(t){var n,o=e(this),a=o.selector||"",r=(new Date).getTime(),s=[],c=arguments[0],l="string"==typeof c,u=[].slice.call(arguments,1);return o.each(function(){var d,m=e.isPlainObject(t)?e.extend(!0,{},e.fn.rating.settings,t):e.extend({},e.fn.rating.settings),f=m.namespace,g=m.className,p=m.metadata,v=m.selector,h=(m.error,"."+f),b="module-"+f,y=this,x=e(this).data(b),C=e(this),w=C.find(v.icon);d={initialize:function(){d.verbose("Initializing rating module",m),0===w.length&&d.setup.layout(),m.interactive?d.enable():d.disable(),d.set.rating(d.get.initialRating()),d.instantiate()},instantiate:function(){d.verbose("Instantiating module",m),x=d,C.data(b,d)},destroy:function(){d.verbose("Destroying previous instance",x),d.remove.events(),C.removeData(b)},refresh:function(){w=C.find(v.icon)},setup:{layout:function(){var t=d.get.maxRating(),n=e.fn.rating.settings.templates.icon(t);d.debug("Generating icon html dynamically"),C.html(n),d.refresh()}},event:{mouseenter:function(){var t=e(this);t.nextAll().removeClass(g.selected),C.addClass(g.selected),t.addClass(g.selected).prevAll().addClass(g.selected)},mouseleave:function(){C.removeClass(g.selected),w.removeClass(g.selected)},click:function(){var t=e(this),n=d.get.rating(),i=w.index(t)+1,o="auto"==m.clearable?1===w.length:m.clearable;o&&n==i?d.clearRating():d.set.rating(i)}},clearRating:function(){d.debug("Clearing current rating"),d.set.rating(0)},bind:{events:function(){d.verbose("Binding events"),C.on("mouseenter"+h,v.icon,d.event.mouseenter).on("mouseleave"+h,v.icon,d.event.mouseleave).on("click"+h,v.icon,d.event.click)}},remove:{events:function(){d.verbose("Removing events"),C.off(h)}},enable:function(){d.debug("Setting rating to interactive mode"),d.bind.events(),C.removeClass(g.disabled)},disable:function(){d.debug("Setting rating to read-only mode"),d.remove.events(),C.addClass(g.disabled)},get:{initialRating:function(){return C.data(p.rating)!==i?(C.removeData(p.rating),C.data(p.rating)):m.initialRating},maxRating:function(){return C.data(p.maxRating)!==i?(C.removeData(p.maxRating),C.data(p.maxRating)):m.maxRating},rating:function(){var e=w.filter("."+g.active).length;return d.verbose("Current rating retrieved",e),e}},set:{rating:function(e){var t=e-1>=0?e-1:0,n=w.eq(t);C.removeClass(g.selected),w.removeClass(g.selected).removeClass(g.active),e>0&&(d.verbose("Setting current rating to",e),n.prevAll().andSelf().addClass(g.active)),m.onRate.call(y,e)}},setting:function(t,n){if(d.debug("Changing setting",t,n),e.isPlainObject(t))e.extend(!0,m,t);else{if(n===i)return m[t];m[t]=n}},internal:function(t,n){if(e.isPlainObject(t))e.extend(!0,d,t);else{if(n===i)return d[t];d[t]=n}},debug:function(){m.debug&&(m.performance?d.performance.log(arguments):(d.debug=Function.prototype.bind.call(console.info,console,m.name+":"),d.debug.apply(console,arguments)))},verbose:function(){m.verbose&&m.debug&&(m.performance?d.performance.log(arguments):(d.verbose=Function.prototype.bind.call(console.info,console,m.name+":"),d.verbose.apply(console,arguments)))},error:function(){d.error=Function.prototype.bind.call(console.error,console,m.name+":"),d.error.apply(console,arguments)},performance:{log:function(e){var t,n,i;m.performance&&(t=(new Date).getTime(),i=r||t,n=t-i,r=t,s.push({Name:e[0],Arguments:[].slice.call(e,1)||"",Element:y,"Execution Time":n})),clearTimeout(d.performance.timer),d.performance.timer=setTimeout(d.performance.display,500)},display:function(){var t=m.name+":",n=0;r=!1,clearTimeout(d.performance.timer),e.each(s,function(e,t){n+=t["Execution Time"]}),t+=" "+n+"ms",a&&(t+=" '"+a+"'"),o.length>1&&(t+=" ("+o.length+")"),(console.group!==i||console.table!==i)&&s.length>0&&(console.groupCollapsed(t),console.table?console.table(s):e.each(s,function(e,t){console.log(t.Name+": "+t["Execution Time"]+"ms")}),console.groupEnd()),s=[]}},invoke:function(t,o,a){var r,s,c,l=x;return o=o||u,a=y||a,"string"==typeof t&&l!==i&&(t=t.split(/[\. ]/),r=t.length-1,e.each(t,function(n,o){var a=n!=r?o+t[n+1].charAt(0).toUpperCase()+t[n+1].slice(1):t;if(e.isPlainObject(l[a])&&n!=r)l=l[a];else{if(l[a]!==i)return s=l[a],!1;if(!e.isPlainObject(l[o])||n==r)return l[o]!==i?(s=l[o],!1):!1;l=l[o]}})),e.isFunction(s)?c=s.apply(a,o):s!==i&&(c=s),e.isArray(n)?n.push(c):n!==i?n=[n,c]:c!==i&&(n=c),s}},l?(x===i&&d.initialize(),d.invoke(c)):(x!==i&&x.invoke("destroy"),d.initialize())}),n!==i?n:this},e.fn.rating.settings={name:"Rating",namespace:"rating",debug:!1,verbose:!1,performance:!0,initialRating:0,interactive:!0,maxRating:4,clearable:"auto",onRate:function(e){},error:{method:"The method you called is not defined",noMaximum:"No maximum rating specified. Cannot generate HTML automatically"},metadata:{rating:"rating",maxRating:"maxRating"},className:{active:"active",disabled:"disabled",selected:"selected",loading:"loading"},selector:{icon:".icon"},templates:{icon:function(e){for(var t=1,n="";e>=t;)n+='<i class="icon"></i>',t++;return n}}}}(jQuery,window,document),function(e,t,n,i){"use strict";e.fn.search=function(o){var a,r=e(this),s=r.selector||"",c=(new Date).getTime(),l=[],u=arguments[0],d="string"==typeof u,m=[].slice.call(arguments,1);return e(this).each(function(){var f,g=e.isPlainObject(o)?e.extend(!0,{},e.fn.search.settings,o):e.extend({},e.fn.search.settings),p=g.className,v=g.metadata,h=g.regExp,b=g.fields,y=g.selector,x=g.error,C=g.namespace,w="."+C,k=C+"-module",S=e(this),T=S.find(y.prompt),A=S.find(y.searchButton),R=S.find(y.results),P=(S.find(y.result),S.find(y.category),this),E=S.data(k);f={initialize:function(){f.verbose("Initializing module"),f.determine.searchFields(),f.bind.events(),f.set.type(),f.create.results(),f.instantiate()},instantiate:function(){f.verbose("Storing instance of module",f),E=f,S.data(k,f)},destroy:function(){f.verbose("Destroying instance"),S.off(w).removeData(k)},bind:{events:function(){f.verbose("Binding events to search"),g.automatic&&(S.on(f.get.inputEvent()+w,y.prompt,f.event.input),T.attr("autocomplete","off")),S.on("focus"+w,y.prompt,f.event.focus).on("blur"+w,y.prompt,f.event.blur).on("keydown"+w,y.prompt,f.handleKeyboard).on("click"+w,y.searchButton,f.query).on("mousedown"+w,y.results,f.event.result.mousedown).on("mouseup"+w,y.results,f.event.result.mouseup).on("click"+w,y.result,f.event.result.click)}},determine:{searchFields:function(){o&&o.searchFields!==i&&(g.searchFields=o.searchFields)}},event:{input:function(){clearTimeout(f.timer),f.timer=setTimeout(f.query,g.searchDelay)},focus:function(){f.set.focus(),f.has.minimumCharacters()&&(f.query(),f.can.show()&&f.showResults())},blur:function(e){var t=n.activeElement===this;t||f.resultsClicked||(f.cancel.query(),f.remove.focus(),f.timer=setTimeout(f.hideResults,g.hideDelay))},result:{mousedown:function(){f.resultsClicked=!0},mouseup:function(){f.resultsClicked=!1},click:function(n){f.debug("Search result selected");var i=e(this),o=i.find(y.title).eq(0),a=i.find("a[href]").eq(0),r=a.attr("href")||!1,s=a.attr("target")||!1,c=(o.html(),o.length>0?o.text():!1),l=f.get.results(),u=i.data(v.result)||f.get.result(c,l);return e.isFunction(g.onSelect)&&g.onSelect.call(P,u,l)===!1?void f.debug("Custom onSelect callback cancelled default select action"):(f.hideResults(),c&&f.set.value(c),void(r&&(f.verbose("Opening search link found in result",a),"_blank"==s||n.ctrlKey?t.open(r):t.location.href=r)))}}},handleKeyboard:function(e){var t,n=S.find(y.result),i=S.find(y.category),o=n.index(n.filter("."+p.active)),a=n.length,r=e.which,s={backspace:8,enter:13,escape:27,upArrow:38,downArrow:40};if(r==s.escape&&(f.verbose("Escape key pressed, blurring search field"),T.trigger("blur")),f.is.visible())if(r==s.enter){if(f.verbose("Enter key pressed, selecting active result"),n.filter("."+p.active).length>0)return f.event.result.click.call(n.filter("."+p.active),e),e.preventDefault(),!1}else r==s.upArrow?(f.verbose("Up key pressed, changing active result"),t=0>o-1?o:o-1,i.removeClass(p.active),n.removeClass(p.active).eq(t).addClass(p.active).closest(i).addClass(p.active),e.preventDefault()):r==s.downArrow&&(f.verbose("Down key pressed, changing active result"),t=o+1>=a?o:o+1,i.removeClass(p.active),n.removeClass(p.active).eq(t).addClass(p.active).closest(i).addClass(p.active),e.preventDefault());else r==s.enter&&(f.verbose("Enter key pressed, executing query"),f.query(),f.set.buttonPressed(),T.one("keyup",f.remove.buttonFocus))},setup:{api:function(){var e={debug:g.debug,on:!1,cache:"local",action:"search",onError:f.error};f.verbose("First request, initializing API"),S.api(e)}},can:{useAPI:function(){return e.fn.api!==i},show:function(){return f.is.focused()&&!f.is.visible()&&!f.is.empty()},transition:function(){return g.transition&&e.fn.transition!==i&&S.transition("is supported")}},is:{empty:function(){return""===R.html()},visible:function(){return R.filter(":visible").length>0},focused:function(){return T.filter(":focus").length>0}},get:{inputEvent:function(){var e=T[0],t=e!==i&&e.oninput!==i?"input":e!==i&&e.onpropertychange!==i?"propertychange":"keyup";return t},value:function(){return T.val()},results:function(){var e=S.data(v.results);return e},result:function(t,n){var o=["title","id"],a=!1;return t=t!==i?t:f.get.value(),n=n!==i?n:f.get.results(),"category"===g.type?(f.debug("Finding result that matches",t),e.each(n,function(n,i){return e.isArray(i.results)&&(a=f.search.object(t,i.results,o)[0])?!1:void 0})):(f.debug("Finding result in results object",t),a=f.search.object(t,n,o)[0]),a||!1}},set:{focus:function(){S.addClass(p.focus)},loading:function(){S.addClass(p.loading)},value:function(e){f.verbose("Setting search input value",e),T.val(e)},type:function(e){e=e||g.type,"category"==g.type&&S.addClass(g.type)},buttonPressed:function(){A.addClass(p.pressed)}},remove:{loading:function(){S.removeClass(p.loading)},focus:function(){S.removeClass(p.focus)},buttonPressed:function(){A.removeClass(p.pressed)}},query:function(){var t=f.get.value(),n=f.read.cache(t);f.has.minimumCharacters()?n?(f.debug("Reading result from cache",t),f.save.results(n.results),f.addResults(n.html),f.inject.id(n.results)):(f.debug("Querying for",t),e.isPlainObject(g.source)||e.isArray(g.source)?f.search.local(t):f.can.useAPI()?f.search.remote(t):f.error(x.source),g.onSearchQuery.call(P,t)):f.hideResults()},search:{local:function(e){var t,n=f.search.object(e,g.content);f.set.loading(),f.save.results(n),f.debug("Returned local search results",n),t=f.generateResults({results:n}),f.remove.loading(),f.addResults(t),f.inject.id(n),f.write.cache(e,{html:t,results:n})},remote:function(t){var n={onSuccess:function(e){f.parse.response.call(P,e,t)},onFailure:function(){f.displayMessage(x.serverError)},urlData:{query:t}};S.api("get request")||f.setup.api(),e.extend(!0,n,g.apiSettings),f.debug("Executing search",n),f.cancel.query(),S.api("setting",n).api("query")},object:function(t,n,o){var a=[],r=[],s=t.toString().replace(h.escape,"\\$&"),c=new RegExp(h.beginsWith+s,"i"),l=function(t,n){var i=-1==e.inArray(n,a),o=-1==e.inArray(n,r);i&&o&&t.push(n)};return n=n||g.source,o=o!==i?o:g.searchFields,e.isArray(o)||(o=[o]),n===i||n===!1?(f.error(x.source),[]):(e.each(o,function(i,o){e.each(n,function(e,n){var i="string"==typeof n[o];i&&(-1!==n[o].search(c)?l(a,n):g.searchFullText&&f.fuzzySearch(t,n[o])&&l(r,n))})}),e.merge(a,r))}},fuzzySearch:function(e,t){var n=t.length,i=e.length;if("string"!=typeof e)return!1;if(e=e.toLowerCase(),t=t.toLowerCase(),i>n)return!1;if(i===n)return e===t;e:for(var o=0,a=0;i>o;o++){for(var r=e.charCodeAt(o);n>a;)if(t.charCodeAt(a++)===r)continue e;return!1}return!0},parse:{response:function(e,t){var n=f.generateResults(e);f.verbose("Parsing server response",e),e!==i&&t!==i&&e[b.results]!==i&&(f.addResults(n),f.inject.id(e[b.results]),f.write.cache(t,{html:n,results:e[b.results]}),f.save.results(e[b.results]))}},cancel:{query:function(){f.can.useAPI()&&S.api("abort")}},has:{minimumCharacters:function(){var e=f.get.value(),t=e.length;return t>=g.minCharacters}},clear:{cache:function(e){var t=S.data(v.cache);e?e&&t&&t[e]&&(f.debug("Removing value from cache",e),delete t[e],S.data(v.cache,t)):(f.debug("Clearing cache",e),S.removeData(v.cache))}},read:{cache:function(e){var t=S.data(v.cache);return g.cache?(f.verbose("Checking cache for generated html for query",e),"object"==typeof t&&t[e]!==i?t[e]:!1):!1}},create:{id:function(e,t){var n,o,a=e+1;return t!==i?(n=String.fromCharCode(97+t),o=n+a,f.verbose("Creating category result id",o)):(o=a,f.verbose("Creating result id",o)),o},results:function(){0===R.length&&(R=e("<div />").addClass(p.results).appendTo(S))}},inject:{result:function(e,t,n){f.verbose("Injecting result into results");var o=n!==i?R.children().eq(n).children(y.result).eq(t):R.children(y.result).eq(t);f.verbose("Injecting results metadata",o),o.data(v.result,e)},id:function(t){f.debug("Injecting unique ids into results");var n=0,o=0;return"category"===g.type?e.each(t,function(t,a){o=0,e.each(a.results,function(e,t){var r=a.results[e];r.id===i&&(r.id=f.create.id(o,n)),f.inject.result(r,o,n),o++}),n++}):e.each(t,function(e,n){var a=t[e];a.id===i&&(a.id=f.create.id(o)),f.inject.result(a,o),o++}),t}},save:{results:function(e){f.verbose("Saving current search results to metadata",e),S.data(v.results,e)}},write:{cache:function(e,t){var n=S.data(v.cache)!==i?S.data(v.cache):{};g.cache&&(f.verbose("Writing generated html to cache",e,t),n[e]=t,S.data(v.cache,n))}},addResults:function(t){return e.isFunction(g.onResultsAdd)&&g.onResultsAdd.call(R,t)===!1?(f.debug("onResultsAdd callback cancelled default action"),!1):(R.html(t),void(f.can.show()&&f.showResults()))},showResults:function(){f.is.visible()||(f.can.transition()?(f.debug("Showing results with css animations"),R.transition({animation:g.transition+" in",debug:g.debug,verbose:g.verbose,duration:g.duration,queue:!0})):(f.debug("Showing results with javascript"),R.stop().fadeIn(g.duration,g.easing)),g.onResultsOpen.call(R))},hideResults:function(){f.is.visible()&&(f.can.transition()?(f.debug("Hiding results with css animations"),R.transition({animation:g.transition+" out",debug:g.debug,verbose:g.verbose,duration:g.duration,queue:!0})):(f.debug("Hiding results with javascript"),R.stop().fadeOut(g.duration,g.easing)),g.onResultsClose.call(R))},generateResults:function(t){f.debug("Generating html from response",t);var n=g.templates[g.type],i=e.isPlainObject(t[b.results])&&!e.isEmptyObject(t[b.results]),o=e.isArray(t[b.results])&&t[b.results].length>0,a="";return i||o?(g.maxResults>0&&(i?"standard"==g.type&&f.error(x.maxResults):t[b.results]=t[b.results].slice(0,g.maxResults)),e.isFunction(n)?a=n(t,b):f.error(x.noTemplate,!1)):a=f.displayMessage(x.noResults,"empty"),g.onResults.call(P,t),a},displayMessage:function(e,t){return t=t||"standard",f.debug("Displaying message",e,t),f.addResults(g.templates.message(e,t)),g.templates.message(e,t)},setting:function(t,n){if(e.isPlainObject(t))e.extend(!0,g,t);else{if(n===i)return g[t];g[t]=n}},internal:function(t,n){if(e.isPlainObject(t))e.extend(!0,f,t);else{if(n===i)return f[t];f[t]=n}},debug:function(){g.debug&&(g.performance?f.performance.log(arguments):(f.debug=Function.prototype.bind.call(console.info,console,g.name+":"),f.debug.apply(console,arguments)))},verbose:function(){g.verbose&&g.debug&&(g.performance?f.performance.log(arguments):(f.verbose=Function.prototype.bind.call(console.info,console,g.name+":"),f.verbose.apply(console,arguments)))},error:function(){f.error=Function.prototype.bind.call(console.error,console,g.name+":"),f.error.apply(console,arguments)},performance:{log:function(e){var t,n,i;g.performance&&(t=(new Date).getTime(),i=c||t,n=t-i,c=t,l.push({Name:e[0],Arguments:[].slice.call(e,1)||"",Element:P,"Execution Time":n})),clearTimeout(f.performance.timer),f.performance.timer=setTimeout(f.performance.display,500)},display:function(){
var t=g.name+":",n=0;c=!1,clearTimeout(f.performance.timer),e.each(l,function(e,t){n+=t["Execution Time"]}),t+=" "+n+"ms",s&&(t+=" '"+s+"'"),r.length>1&&(t+=" ("+r.length+")"),(console.group!==i||console.table!==i)&&l.length>0&&(console.groupCollapsed(t),console.table?console.table(l):e.each(l,function(e,t){console.log(t.Name+": "+t["Execution Time"]+"ms")}),console.groupEnd()),l=[]}},invoke:function(t,n,o){var r,s,c,l=E;return n=n||m,o=P||o,"string"==typeof t&&l!==i&&(t=t.split(/[\. ]/),r=t.length-1,e.each(t,function(n,o){var a=n!=r?o+t[n+1].charAt(0).toUpperCase()+t[n+1].slice(1):t;if(e.isPlainObject(l[a])&&n!=r)l=l[a];else{if(l[a]!==i)return s=l[a],!1;if(!e.isPlainObject(l[o])||n==r)return l[o]!==i?(s=l[o],!1):!1;l=l[o]}})),e.isFunction(s)?c=s.apply(o,n):s!==i&&(c=s),e.isArray(a)?a.push(c):a!==i?a=[a,c]:c!==i&&(a=c),s}},d?(E===i&&f.initialize(),f.invoke(u)):(E!==i&&E.invoke("destroy"),f.initialize())}),a!==i?a:this},e.fn.search.settings={name:"Search",namespace:"search",debug:!1,verbose:!1,performance:!0,type:"standard",minCharacters:1,apiSettings:!1,source:!1,searchFields:["title","description"],displayField:"",searchFullText:!0,automatic:!0,hideDelay:0,searchDelay:200,maxResults:7,cache:!0,transition:"scale",duration:200,easing:"easeOutExpo",onSelect:!1,onResultsAdd:!1,onSearchQuery:function(e){},onResults:function(e){},onResultsOpen:function(){},onResultsClose:function(){},className:{active:"active",empty:"empty",focus:"focus",loading:"loading",results:"results",pressed:"down"},error:{source:"Cannot search. No source used, and Semantic API module was not included",noResults:"Your search returned no results",logging:"Error in debug logging, exiting.",noEndpoint:"No search endpoint was specified",noTemplate:"A valid template name was not specified.",serverError:"There was an issue querying the server.",maxResults:"Results must be an array to use maxResults setting",method:"The method you called is not defined."},metadata:{cache:"cache",results:"results",result:"result"},regExp:{escape:/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,beginsWith:"(?:s|^)"},fields:{categories:"results",categoryName:"name",categoryResults:"results",description:"description",image:"image",price:"price",results:"results",title:"title",action:"action",actionText:"text",actionURL:"url"},selector:{prompt:".prompt",searchButton:".search.button",results:".results",category:".category",result:".result",title:".title, .name"},templates:{escape:function(e){var t=/[&<>"'`]/g,n=/[&<>"'`]/,i={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},o=function(e){return i[e]};return n.test(e)?e.replace(t,o):e},message:function(e,t){var n="";return e!==i&&t!==i&&(n+='<div class="message '+t+'">',n+="empty"==t?'<div class="header">No Results</div class="header"><div class="description">'+e+'</div class="description">':' <div class="description">'+e+"</div>",n+="</div>"),n},category:function(t,n){{var o="";e.fn.search.settings.templates.escape}return t[n.categoryResults]!==i?(e.each(t[n.categoryResults],function(a,r){r[n.results]!==i&&r.results.length>0&&(o+='<div class="category">',r[n.categoryName]!==i&&(o+='<div class="name">'+r[n.categoryName]+"</div>"),e.each(r.results,function(e,a){o+=t[n.url]?'<a class="result" href="'+t[n.url]+'">':'<a class="result">',a[n.image]!==i&&(o+='<div class="image"> <img src="'+a[n.image]+'"></div>'),o+='<div class="content">',a[n.price]!==i&&(o+='<div class="price">'+a[n.price]+"</div>"),a[n.title]!==i&&(o+='<div class="title">'+a[n.title]+"</div>"),a[n.description]!==i&&(o+='<div class="description">'+a[n.description]+"</div>"),o+="</div>",o+="</a>"}),o+="</div>")}),t[n.action]&&(o+='<a href="'+t[n.action][n.actionURL]+'" class="action">'+t[n.action][n.actionText]+"</a>"),o):!1},standard:function(t,n){var o="";return t[n.results]!==i?(e.each(t[n.results],function(e,a){o+=t[n.url]?'<a class="result" href="'+t[n.url]+'">':'<a class="result">',a[n.image]!==i&&(o+='<div class="image"> <img src="'+a[n.image]+'"></div>'),o+='<div class="content">',a[n.price]!==i&&(o+='<div class="price">'+a[n.price]+"</div>"),a[n.title]!==i&&(o+='<div class="title">'+a[n.title]+"</div>"),a[n.description]!==i&&(o+='<div class="description">'+a[n.description]+"</div>"),o+="</div>",o+="</a>"}),t[n.action]&&(o+='<a href="'+t[n.action][n.actionURL]+'" class="action">'+t[n.action][n.actionText]+"</a>"),o):!1}}}}(jQuery,window,document),function(e,t,n,i){"use strict";e.fn.shape=function(o){var a,r=e(this),s=(e("body"),(new Date).getTime()),c=[],l=arguments[0],u="string"==typeof l,d=[].slice.call(arguments,1),m=t.requestAnimationFrame||t.mozRequestAnimationFrame||t.webkitRequestAnimationFrame||t.msRequestAnimationFrame||function(e){setTimeout(e,0)};return r.each(function(){var t,f,g,p=r.selector||"",v=e.isPlainObject(o)?e.extend(!0,{},e.fn.shape.settings,o):e.extend({},e.fn.shape.settings),h=v.namespace,b=v.selector,y=v.error,x=v.className,C="."+h,w="module-"+h,k=e(this),S=k.find(b.sides),T=k.find(b.side),A=!1,R=this,P=k.data(w);g={initialize:function(){g.verbose("Initializing module for",R),g.set.defaultSide(),g.instantiate()},instantiate:function(){g.verbose("Storing instance of module",g),P=g,k.data(w,P)},destroy:function(){g.verbose("Destroying previous module for",R),k.removeData(w).off(C)},refresh:function(){g.verbose("Refreshing selector cache for",R),k=e(R),S=e(this).find(b.shape),T=e(this).find(b.side)},repaint:function(){g.verbose("Forcing repaint event");{var e=S[0]||n.createElement("div");e.offsetWidth}},animate:function(e,n){g.verbose("Animating box with properties",e),n=n||function(e){g.verbose("Executing animation callback"),e!==i&&e.stopPropagation(),g.reset(),g.set.active()},v.beforeChange.call(f[0]),g.get.transitionEvent()?(g.verbose("Starting CSS animation"),k.addClass(x.animating),S.css(e).one(g.get.transitionEvent(),n),g.set.duration(v.duration),m(function(){k.addClass(x.animating),t.addClass(x.hidden)})):n()},queue:function(e){g.debug("Queueing animation of",e),S.one(g.get.transitionEvent(),function(){g.debug("Executing queued animation"),setTimeout(function(){k.shape(e)},0)})},reset:function(){g.verbose("Animating states reset"),k.removeClass(x.animating).attr("style","").removeAttr("style"),S.attr("style","").removeAttr("style"),T.attr("style","").removeAttr("style").removeClass(x.hidden),f.removeClass(x.animating).attr("style","").removeAttr("style")},is:{complete:function(){return T.filter("."+x.active)[0]==f[0]},animating:function(){return k.hasClass(x.animating)}},set:{defaultSide:function(){t=k.find("."+v.className.active),f=t.next(b.side).length>0?t.next(b.side):k.find(b.side).first(),A=!1,g.verbose("Active side set to",t),g.verbose("Next side set to",f)},duration:function(e){e=e||v.duration,e="number"==typeof e?e+"ms":e,g.verbose("Setting animation duration",e),(v.duration||0===v.duration)&&S.add(T).css({"-webkit-transition-duration":e,"-moz-transition-duration":e,"-ms-transition-duration":e,"-o-transition-duration":e,"transition-duration":e})},currentStageSize:function(){var e=k.find("."+v.className.active),t=e.outerWidth(!0),n=e.outerHeight(!0);k.css({width:t,height:n})},stageSize:function(){var e=k.clone().addClass(x.loading),t=e.find("."+v.className.active),n=A?e.find(b.side).eq(A):t.next(b.side).length>0?t.next(b.side):e.find(b.side).first(),i={};g.set.currentStageSize(),t.removeClass(x.active),n.addClass(x.active),e.insertAfter(k),i={width:n.outerWidth(!0),height:n.outerHeight(!0)},e.remove(),k.css(i),g.verbose("Resizing stage to fit new content",i)},nextSide:function(e){A=e,f=T.filter(e),A=T.index(f),0===f.length&&(g.set.defaultSide(),g.error(y.side)),g.verbose("Next side manually set to",f)},active:function(){g.verbose("Setting new side to active",f),T.removeClass(x.active),f.addClass(x.active),v.onChange.call(f[0]),g.set.defaultSide()}},flip:{up:function(){return!g.is.complete()||g.is.animating()||v.allowRepeats?void(g.is.animating()?g.queue("flip up"):(g.debug("Flipping up",f),g.set.stageSize(),g.stage.above(),g.animate(g.get.transform.up()))):void g.debug("Side already visible",f)},down:function(){return!g.is.complete()||g.is.animating()||v.allowRepeats?void(g.is.animating()?g.queue("flip down"):(g.debug("Flipping down",f),g.set.stageSize(),g.stage.below(),g.animate(g.get.transform.down()))):void g.debug("Side already visible",f)},left:function(){return!g.is.complete()||g.is.animating()||v.allowRepeats?void(g.is.animating()?g.queue("flip left"):(g.debug("Flipping left",f),g.set.stageSize(),g.stage.left(),g.animate(g.get.transform.left()))):void g.debug("Side already visible",f)},right:function(){return!g.is.complete()||g.is.animating()||v.allowRepeats?void(g.is.animating()?g.queue("flip right"):(g.debug("Flipping right",f),g.set.stageSize(),g.stage.right(),g.animate(g.get.transform.right()))):void g.debug("Side already visible",f)},over:function(){return!g.is.complete()||g.is.animating()||v.allowRepeats?void(g.is.animating()?g.queue("flip over"):(g.debug("Flipping over",f),g.set.stageSize(),g.stage.behind(),g.animate(g.get.transform.over()))):void g.debug("Side already visible",f)},back:function(){return!g.is.complete()||g.is.animating()||v.allowRepeats?void(g.is.animating()?g.queue("flip back"):(g.debug("Flipping back",f),g.set.stageSize(),g.stage.behind(),g.animate(g.get.transform.back()))):void g.debug("Side already visible",f)}},get:{transform:{up:function(){var e={y:-((t.outerHeight(!0)-f.outerHeight(!0))/2),z:-(t.outerHeight(!0)/2)};return{transform:"translateY("+e.y+"px) translateZ("+e.z+"px) rotateX(-90deg)"}},down:function(){var e={y:-((t.outerHeight(!0)-f.outerHeight(!0))/2),z:-(t.outerHeight(!0)/2)};return{transform:"translateY("+e.y+"px) translateZ("+e.z+"px) rotateX(90deg)"}},left:function(){var e={x:-((t.outerWidth(!0)-f.outerWidth(!0))/2),z:-(t.outerWidth(!0)/2)};return{transform:"translateX("+e.x+"px) translateZ("+e.z+"px) rotateY(90deg)"}},right:function(){var e={x:-((t.outerWidth(!0)-f.outerWidth(!0))/2),z:-(t.outerWidth(!0)/2)};return{transform:"translateX("+e.x+"px) translateZ("+e.z+"px) rotateY(-90deg)"}},over:function(){var e={x:-((t.outerWidth(!0)-f.outerWidth(!0))/2)};return{transform:"translateX("+e.x+"px) rotateY(180deg)"}},back:function(){var e={x:-((t.outerWidth(!0)-f.outerWidth(!0))/2)};return{transform:"translateX("+e.x+"px) rotateY(-180deg)"}}},transitionEvent:function(){var e,t=n.createElement("element"),o={transition:"transitionend",OTransition:"oTransitionEnd",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"};for(e in o)if(t.style[e]!==i)return o[e]},nextSide:function(){return t.next(b.side).length>0?t.next(b.side):k.find(b.side).first()}},stage:{above:function(){var e={origin:(t.outerHeight(!0)-f.outerHeight(!0))/2,depth:{active:f.outerHeight(!0)/2,next:t.outerHeight(!0)/2}};g.verbose("Setting the initial animation position as above",f,e),S.css({transform:"translateZ(-"+e.depth.active+"px)"}),t.css({transform:"rotateY(0deg) translateZ("+e.depth.active+"px)"}),f.addClass(x.animating).css({top:e.origin+"px",transform:"rotateX(90deg) translateZ("+e.depth.next+"px)"})},below:function(){var e={origin:(t.outerHeight(!0)-f.outerHeight(!0))/2,depth:{active:f.outerHeight(!0)/2,next:t.outerHeight(!0)/2}};g.verbose("Setting the initial animation position as below",f,e),S.css({transform:"translateZ(-"+e.depth.active+"px)"}),t.css({transform:"rotateY(0deg) translateZ("+e.depth.active+"px)"}),f.addClass(x.animating).css({top:e.origin+"px",transform:"rotateX(-90deg) translateZ("+e.depth.next+"px)"})},left:function(){var e={active:t.outerWidth(!0),next:f.outerWidth(!0)},n={origin:(e.active-e.next)/2,depth:{active:e.next/2,next:e.active/2}};g.verbose("Setting the initial animation position as left",f,n),S.css({transform:"translateZ(-"+n.depth.active+"px)"}),t.css({transform:"rotateY(0deg) translateZ("+n.depth.active+"px)"}),f.addClass(x.animating).css({left:n.origin+"px",transform:"rotateY(-90deg) translateZ("+n.depth.next+"px)"})},right:function(){var e={active:t.outerWidth(!0),next:f.outerWidth(!0)},n={origin:(e.active-e.next)/2,depth:{active:e.next/2,next:e.active/2}};g.verbose("Setting the initial animation position as left",f,n),S.css({transform:"translateZ(-"+n.depth.active+"px)"}),t.css({transform:"rotateY(0deg) translateZ("+n.depth.active+"px)"}),f.addClass(x.animating).css({left:n.origin+"px",transform:"rotateY(90deg) translateZ("+n.depth.next+"px)"})},behind:function(){var e={active:t.outerWidth(!0),next:f.outerWidth(!0)},n={origin:(e.active-e.next)/2,depth:{active:e.next/2,next:e.active/2}};g.verbose("Setting the initial animation position as behind",f,n),t.css({transform:"rotateY(0deg)"}),f.addClass(x.animating).css({left:n.origin+"px",transform:"rotateY(-180deg)"})}},setting:function(t,n){if(g.debug("Changing setting",t,n),e.isPlainObject(t))e.extend(!0,v,t);else{if(n===i)return v[t];v[t]=n}},internal:function(t,n){if(e.isPlainObject(t))e.extend(!0,g,t);else{if(n===i)return g[t];g[t]=n}},debug:function(){v.debug&&(v.performance?g.performance.log(arguments):(g.debug=Function.prototype.bind.call(console.info,console,v.name+":"),g.debug.apply(console,arguments)))},verbose:function(){v.verbose&&v.debug&&(v.performance?g.performance.log(arguments):(g.verbose=Function.prototype.bind.call(console.info,console,v.name+":"),g.verbose.apply(console,arguments)))},error:function(){g.error=Function.prototype.bind.call(console.error,console,v.name+":"),g.error.apply(console,arguments)},performance:{log:function(e){var t,n,i;v.performance&&(t=(new Date).getTime(),i=s||t,n=t-i,s=t,c.push({Name:e[0],Arguments:[].slice.call(e,1)||"",Element:R,"Execution Time":n})),clearTimeout(g.performance.timer),g.performance.timer=setTimeout(g.performance.display,500)},display:function(){var t=v.name+":",n=0;s=!1,clearTimeout(g.performance.timer),e.each(c,function(e,t){n+=t["Execution Time"]}),t+=" "+n+"ms",p&&(t+=" '"+p+"'"),r.length>1&&(t+=" ("+r.length+")"),(console.group!==i||console.table!==i)&&c.length>0&&(console.groupCollapsed(t),console.table?console.table(c):e.each(c,function(e,t){console.log(t.Name+": "+t["Execution Time"]+"ms")}),console.groupEnd()),c=[]}},invoke:function(t,n,o){var r,s,c,l=P;return n=n||d,o=R||o,"string"==typeof t&&l!==i&&(t=t.split(/[\. ]/),r=t.length-1,e.each(t,function(n,o){var a=n!=r?o+t[n+1].charAt(0).toUpperCase()+t[n+1].slice(1):t;if(e.isPlainObject(l[a])&&n!=r)l=l[a];else{if(l[a]!==i)return s=l[a],!1;if(!e.isPlainObject(l[o])||n==r)return l[o]!==i?(s=l[o],!1):!1;l=l[o]}})),e.isFunction(s)?c=s.apply(o,n):s!==i&&(c=s),e.isArray(a)?a.push(c):a!==i?a=[a,c]:c!==i&&(a=c),s}},u?(P===i&&g.initialize(),g.invoke(l)):(P!==i&&P.invoke("destroy"),g.initialize())}),a!==i?a:this},e.fn.shape.settings={name:"Shape",debug:!1,verbose:!1,performance:!0,namespace:"shape",beforeChange:function(){},onChange:function(){},allowRepeats:!1,duration:!1,error:{side:"You tried to switch to a side that does not exist.",method:"The method you called is not defined"},className:{animating:"animating",hidden:"hidden",loading:"loading",active:"active"},selector:{sides:".sides",side:".side"}}}(jQuery,window,document),function(e,t,n,i){"use strict";e.fn.sidebar=function(o){var a,r=e(this),s=e(t),c=e(n),l=e("html"),u=e("head"),d=r.selector||"",m=(new Date).getTime(),f=[],g=arguments[0],p="string"==typeof g,v=[].slice.call(arguments,1),h=t.requestAnimationFrame||t.mozRequestAnimationFrame||t.webkitRequestAnimationFrame||t.msRequestAnimationFrame||function(e){setTimeout(e,0)};return r.each(function(){var r,b,y,x,C,w,k=e.isPlainObject(o)?e.extend(!0,{},e.fn.sidebar.settings,o):e.extend({},e.fn.sidebar.settings),S=k.selector,T=k.className,A=k.namespace,R=k.regExp,P=k.error,E="."+A,F="module-"+A,D=e(this),O=e(k.context),q=D.children(S.sidebar),j=O.children(S.fixed),z=O.children(S.pusher),I=this,L=D.data(F);w={initialize:function(){w.debug("Initializing sidebar",o),w.create.id(),C=w.get.transitionEvent(),w.is.ios()&&w.set.ios(),k.delaySetup?h(w.setup.layout):w.setup.layout(),h(function(){w.setup.cache()}),w.instantiate()},instantiate:function(){w.verbose("Storing instance of module",w),L=w,D.data(F,w)},create:{id:function(){y=(Math.random().toString(16)+"000000000").substr(2,8),b="."+y,w.verbose("Creating unique id for element",y)}},destroy:function(){w.verbose("Destroying previous module for",D),D.off(E).removeData(F),w.is.ios()&&w.remove.ios(),O.off(b),s.off(b),c.off(b)},event:{clickaway:function(e){var t=z.find(e.target).length>0||z.is(e.target),n=O.is(e.target);t&&(w.verbose("User clicked on dimmed page"),w.hide()),n&&(w.verbose("User clicked on dimmable context (scaled out page)"),w.hide())},touch:function(e){},containScroll:function(e){I.scrollTop<=0&&(I.scrollTop=1),I.scrollTop+I.offsetHeight>=I.scrollHeight&&(I.scrollTop=I.scrollHeight-I.offsetHeight-1)},scroll:function(t){0===e(t.target).closest(S.sidebar).length&&t.preventDefault()}},bind:{clickaway:function(){w.verbose("Adding clickaway events to context",O),k.closable&&O.on("click"+b,w.event.clickaway).on("touchend"+b,w.event.clickaway)},scrollLock:function(){k.scrollLock&&(w.debug("Disabling page scroll"),s.on("DOMMouseScroll"+b,w.event.scroll)),w.verbose("Adding events to contain sidebar scroll"),c.on("touchmove"+b,w.event.touch),D.on("scroll"+E,w.event.containScroll)}},unbind:{clickaway:function(){w.verbose("Removing clickaway events from context",O),O.off(b)},scrollLock:function(){w.verbose("Removing scroll lock from page"),c.off(b),s.off(b),D.off("scroll"+E)}},add:{inlineCSS:function(){var t,n=w.cache.width||D.outerWidth(),i=w.cache.height||D.outerHeight(),o=w.is.rtl(),a=w.get.direction(),s={left:n,right:-n,top:i,bottom:-i};o&&(w.verbose("RTL detected, flipping widths"),s.left=-n,s.right=n),t="<style>","left"===a||"right"===a?(w.debug("Adding CSS rules for animation distance",n),t+=" .ui.visible."+a+".sidebar ~ .fixed, .ui.visible."+a+".sidebar ~ .pusher {   -webkit-transform: translate3d("+s[a]+"px, 0, 0);           transform: translate3d("+s[a]+"px, 0, 0); }"):("top"===a||"bottom"==a)&&(t+=" .ui.visible."+a+".sidebar ~ .fixed, .ui.visible."+a+".sidebar ~ .pusher {   -webkit-transform: translate3d(0, "+s[a]+"px, 0);           transform: translate3d(0, "+s[a]+"px, 0); }"),w.is.ie()&&("left"===a||"right"===a?(w.debug("Adding CSS rules for animation distance",n),t+=" body.pushable > .ui.visible."+a+".sidebar ~ .pusher:after {   -webkit-transform: translate3d("+s[a]+"px, 0, 0);           transform: translate3d("+s[a]+"px, 0, 0); }"):("top"===a||"bottom"==a)&&(t+=" body.pushable > .ui.visible."+a+".sidebar ~ .pusher:after {   -webkit-transform: translate3d(0, "+s[a]+"px, 0);           transform: translate3d(0, "+s[a]+"px, 0); }"),t+=" body.pushable > .ui.visible.left.sidebar ~ .ui.visible.right.sidebar ~ .pusher:after, body.pushable > .ui.visible.right.sidebar ~ .ui.visible.left.sidebar ~ .pusher:after {   -webkit-transform: translate3d(0px, 0, 0);           transform: translate3d(0px, 0, 0); }"),t+="</style>",r=e(t).appendTo(u),w.debug("Adding sizing css to head",r)}},refresh:function(){w.verbose("Refreshing selector cache"),O=e(k.context),q=O.children(S.sidebar),z=O.children(S.pusher),j=O.children(S.fixed),w.clear.cache()},refreshSidebars:function(){w.verbose("Refreshing other sidebars"),q=O.children(S.sidebar)},repaint:function(){w.verbose("Forcing repaint event"),I.style.display="none";I.offsetHeight;I.scrollTop=I.scrollTop,I.style.display=""},setup:{cache:function(){w.cache={width:D.outerWidth(),height:D.outerHeight(),rtl:"rtl"==D.css("direction")}},layout:function(){0===O.children(S.pusher).length&&(w.debug("Adding wrapper element for sidebar"),w.error(P.pusher),z=e('<div class="pusher" />'),O.children().not(S.omitted).not(q).wrapAll(z),w.refresh()),(0===D.nextAll(S.pusher).length||D.nextAll(S.pusher)[0]!==z[0])&&(w.debug("Moved sidebar to correct parent element"),w.error(P.movedSidebar,I),D.detach().prependTo(O),w.refresh()),w.clear.cache(),w.set.pushable(),w.set.direction()}},attachEvents:function(t,n){var i=e(t);n=e.isFunction(w[n])?w[n]:w.toggle,i.length>0?(w.debug("Attaching sidebar events to element",t,n),i.on("click"+E,n)):w.error(P.notFound,t)},show:function(t){if(t=e.isFunction(t)?t:function(){},w.is.hidden()){if(w.refreshSidebars(),k.overlay&&(w.error(P.overlay),k.transition="overlay"),w.refresh(),w.othersActive())if(w.debug("Other sidebars currently visible"),k.exclusive){if("overlay"!=k.transition)return void w.hideOthers(w.show);w.hideOthers()}else k.transition="overlay";w.pushPage(function(){t.call(I),k.onShow.call(I)}),k.onChange.call(I),k.onVisible.call(I)}else w.debug("Sidebar is already visible")},hide:function(t){t=e.isFunction(t)?t:function(){},(w.is.visible()||w.is.animating())&&(w.debug("Hiding sidebar",t),w.refreshSidebars(),w.pullPage(function(){t.call(I),k.onHidden.call(I)}),k.onChange.call(I),k.onHide.call(I))},othersAnimating:function(){return q.not(D).filter("."+T.animating).length>0},othersVisible:function(){return q.not(D).filter("."+T.visible).length>0},othersActive:function(){return w.othersVisible()||w.othersAnimating()},hideOthers:function(e){var t=q.not(D).filter("."+T.visible),n=t.length,i=0;e=e||function(){},t.sidebar("hide",function(){i++,i==n&&e()})},toggle:function(){w.verbose("Determining toggled direction"),w.is.hidden()?w.show():w.hide()},pushPage:function(t){var n,i,o,a=w.get.transition(),r="overlay"===a||w.othersActive()?D:z;t=e.isFunction(t)?t:function(){},"scale down"==k.transition&&w.scrollToTop(),w.set.transition(a),w.repaint(),n=function(){w.bind.clickaway(),w.add.inlineCSS(),w.set.animating(),w.set.visible()},i=function(){w.set.dimmed()},o=function(e){e.target==r[0]&&(r.off(C+b,o),w.remove.animating(),w.bind.scrollLock(),t.call(I))},r.off(C+b),r.on(C+b,o),h(n),k.dimPage&&!w.othersVisible()&&h(i)},pullPage:function(t){var n,i,o=w.get.transition(),a="overlay"==o||w.othersActive()?D:z;t=e.isFunction(t)?t:function(){},w.verbose("Removing context push state",w.get.direction()),w.unbind.clickaway(),w.unbind.scrollLock(),n=function(){w.set.transition(o),w.set.animating(),w.remove.visible(),k.dimPage&&!w.othersVisible()&&z.removeClass(T.dimmed)},i=function(e){e.target==a[0]&&(a.off(C+b,i),w.remove.animating(),w.remove.transition(),w.remove.inlineCSS(),("scale down"==o||k.returnScroll&&w.is.mobile())&&w.scrollBack(),t.call(I))},a.off(C+b),a.on(C+b,i),h(n)},scrollToTop:function(){w.verbose("Scrolling to top of page to avoid animation issues"),x=e(t).scrollTop(),D.scrollTop(0),t.scrollTo(0,0)},scrollBack:function(){w.verbose("Scrolling back to original page position"),t.scrollTo(0,x)},clear:{cache:function(){w.verbose("Clearing cached dimensions"),w.cache={}}},set:{ios:function(){l.addClass(T.ios)},pushed:function(){O.addClass(T.pushed)},pushable:function(){O.addClass(T.pushable)},dimmed:function(){z.addClass(T.dimmed)},active:function(){D.addClass(T.active)},animating:function(){D.addClass(T.animating)},transition:function(e){e=e||w.get.transition(),D.addClass(e)},direction:function(e){e=e||w.get.direction(),D.addClass(T[e])},visible:function(){D.addClass(T.visible)},overlay:function(){D.addClass(T.overlay)}},remove:{inlineCSS:function(){w.debug("Removing inline css styles",r),r&&r.length>0&&r.remove()},ios:function(){l.removeClass(T.ios)},pushed:function(){O.removeClass(T.pushed)},pushable:function(){O.removeClass(T.pushable)},active:function(){D.removeClass(T.active)},animating:function(){D.removeClass(T.animating)},transition:function(e){e=e||w.get.transition(),D.removeClass(e)},direction:function(e){e=e||w.get.direction(),D.removeClass(T[e])},visible:function(){D.removeClass(T.visible)},overlay:function(){D.removeClass(T.overlay)}},get:{direction:function(){return D.hasClass(T.top)?T.top:D.hasClass(T.right)?T.right:D.hasClass(T.bottom)?T.bottom:T.left},transition:function(){var e,t=w.get.direction();return e=w.is.mobile()?"auto"==k.mobileTransition?k.defaultTransition.mobile[t]:k.mobileTransition:"auto"==k.transition?k.defaultTransition.computer[t]:k.transition,w.verbose("Determined transition",e),e},transitionEvent:function(){var e,t=n.createElement("element"),o={transition:"transitionend",OTransition:"oTransitionEnd",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"};for(e in o)if(t.style[e]!==i)return o[e]}},is:{ie:function(){var e=!t.ActiveXObject&&"ActiveXObject"in t,n="ActiveXObject"in t;return e||n},ios:function(){var e=navigator.userAgent,t=e.match(R.ios),n=e.match(R.mobileChrome);return t&&!n?(w.verbose("Browser was found to be iOS",e),!0):!1},mobile:function(){var e=navigator.userAgent,t=e.match(R.mobile);return t?(w.verbose("Browser was found to be mobile",e),!0):(w.verbose("Browser is not mobile, using regular transition",e),!1)},hidden:function(){return!w.is.visible()},visible:function(){return D.hasClass(T.visible)},open:function(){return w.is.visible()},closed:function(){return w.is.hidden()},vertical:function(){return D.hasClass(T.top)},animating:function(){return O.hasClass(T.animating)},rtl:function(){return w.cache.rtl===i&&(w.cache.rtl="rtl"==D.css("direction")),w.cache.rtl}},setting:function(t,n){if(w.debug("Changing setting",t,n),e.isPlainObject(t))e.extend(!0,k,t);else{if(n===i)return k[t];k[t]=n}},internal:function(t,n){if(e.isPlainObject(t))e.extend(!0,w,t);else{if(n===i)return w[t];w[t]=n}},debug:function(){k.debug&&(k.performance?w.performance.log(arguments):(w.debug=Function.prototype.bind.call(console.info,console,k.name+":"),w.debug.apply(console,arguments)))},verbose:function(){k.verbose&&k.debug&&(k.performance?w.performance.log(arguments):(w.verbose=Function.prototype.bind.call(console.info,console,k.name+":"),w.verbose.apply(console,arguments)))},error:function(){w.error=Function.prototype.bind.call(console.error,console,k.name+":"),w.error.apply(console,arguments)},performance:{log:function(e){var t,n,i;k.performance&&(t=(new Date).getTime(),i=m||t,n=t-i,m=t,f.push({Name:e[0],Arguments:[].slice.call(e,1)||"",Element:I,"Execution Time":n})),clearTimeout(w.performance.timer),w.performance.timer=setTimeout(w.performance.display,500)},display:function(){var t=k.name+":",n=0;m=!1,clearTimeout(w.performance.timer),e.each(f,function(e,t){n+=t["Execution Time"]}),t+=" "+n+"ms",d&&(t+=" '"+d+"'"),(console.group!==i||console.table!==i)&&f.length>0&&(console.groupCollapsed(t),console.table?console.table(f):e.each(f,function(e,t){console.log(t.Name+": "+t["Execution Time"]+"ms")}),console.groupEnd()),f=[]}},invoke:function(t,n,o){var r,s,c,l=L;return n=n||v,o=I||o,"string"==typeof t&&l!==i&&(t=t.split(/[\. ]/),r=t.length-1,e.each(t,function(n,o){var a=n!=r?o+t[n+1].charAt(0).toUpperCase()+t[n+1].slice(1):t;if(e.isPlainObject(l[a])&&n!=r)l=l[a];else{if(l[a]!==i)return s=l[a],!1;if(!e.isPlainObject(l[o])||n==r)return l[o]!==i?(s=l[o],!1):(w.error(P.method,t),!1);l=l[o]}})),e.isFunction(s)?c=s.apply(o,n):s!==i&&(c=s),e.isArray(a)?a.push(c):a!==i?a=[a,c]:c!==i&&(a=c),s}},p?(L===i&&w.initialize(),w.invoke(g)):(L!==i&&w.invoke("destroy"),w.initialize())}),a!==i?a:this},e.fn.sidebar.settings={name:"Sidebar",namespace:"sidebar",debug:!1,verbose:!1,performance:!0,transition:"auto",mobileTransition:"auto",defaultTransition:{computer:{left:"uncover",right:"uncover",top:"overlay",bottom:"overlay"},mobile:{left:"uncover",right:"uncover",top:"overlay",bottom:"overlay"}},context:"body",exclusive:!1,closable:!0,dimPage:!0,scrollLock:!1,returnScroll:!1,delaySetup:!1,duration:500,onChange:function(){},onShow:function(){},onHide:function(){},onHidden:function(){},onVisible:function(){},className:{active:"active",animating:"animating",dimmed:"dimmed",ios:"ios",pushable:"pushable",pushed:"pushed",right:"right",top:"top",left:"left",bottom:"bottom",visible:"visible"},selector:{fixed:".fixed",omitted:"script, link, style, .ui.modal, .ui.dimmer, .ui.nag, .ui.fixed",pusher:".pusher",sidebar:".ui.sidebar"},regExp:{ios:/(iPad|iPhone|iPod)/g,mobileChrome:/(CriOS)/g,mobile:/Mobile|iP(hone|od|ad)|Android|BlackBerry|IEMobile|Kindle|NetFront|Silk-Accelerated|(hpw|web)OS|Fennec|Minimo|Opera M(obi|ini)|Blazer|Dolfin|Dolphin|Skyfire|Zune/g},error:{method:"The method you called is not defined.",pusher:"Had to add pusher element. For optimal performance make sure body content is inside a pusher element",movedSidebar:"Had to move sidebar. For optimal performance make sure sidebar and pusher are direct children of your body tag",overlay:"The overlay setting is no longer supported, use animation: overlay",notFound:"There were no elements that matched the specified selector"}}}(jQuery,window,document),function(e,t,n,i){"use strict";e.fn.sticky=function(n){var o,a=e(this),r=a.selector||"",s=(new Date).getTime(),c=[],l=arguments[0],u="string"==typeof l,d=[].slice.call(arguments,1);return a.each(function(){var a,m,f,g,p=e.isPlainObject(n)?e.extend(!0,{},e.fn.sticky.settings,n):e.extend({},e.fn.sticky.settings),v=p.className,h=p.namespace,b=p.error,y="."+h,x="module-"+h,C=e(this),w=e(t),k=e(p.scrollContext),S=(C.selector||"",C.data(x)),T=t.requestAnimationFrame||t.mozRequestAnimationFrame||t.webkitRequestAnimationFrame||t.msRequestAnimationFrame||function(e){setTimeout(e,0)},A=this;g={initialize:function(){g.determineContainer(),g.determineContext(),g.verbose("Initializing sticky",p,a),g.save.positions(),g.checkErrors(),g.bind.events(),p.observeChanges&&g.observeChanges(),g.instantiate()},instantiate:function(){g.verbose("Storing instance of module",g),S=g,C.data(x,g)},destroy:function(){g.verbose("Destroying previous instance"),g.reset(),f&&f.disconnect(),w.off("load"+y,g.event.load).off("resize"+y,g.event.resize),k.off("scrollchange"+y,g.event.scrollchange),C.removeData(x)},observeChanges:function(){var e=m[0];"MutationObserver"in t&&(f=new MutationObserver(function(e){clearTimeout(g.timer),g.timer=setTimeout(function(){g.verbose("DOM tree modified, updating sticky menu",e),g.refresh()},100)}),f.observe(A,{childList:!0,subtree:!0}),f.observe(e,{childList:!0,subtree:!0}),g.debug("Setting up mutation observer",f))},determineContainer:function(){a=C.offsetParent()},determineContext:function(){return m=p.context?e(p.context):a,0===m.length?void g.error(b.invalidContext,p.context,C):void 0},checkErrors:function(){return g.is.hidden()&&g.error(b.visible,C),g.cache.element.height>g.cache.context.height?(g.reset(),void g.error(b.elementSize,C)):void 0},bind:{events:function(){w.on("load"+y,g.event.load).on("resize"+y,g.event.resize),k.off("scroll"+y).on("scroll"+y,g.event.scroll).on("scrollchange"+y,g.event.scrollchange)}},event:{load:function(){g.verbose("Page contents finished loading"),T(g.refresh)},resize:function(){g.verbose("Window resized"),T(g.refresh)},scroll:function(){T(function(){k.triggerHandler("scrollchange"+y,k.scrollTop())})},scrollchange:function(e,t){g.stick(t),p.onScroll.call(A)}},refresh:function(e){g.reset(),p.context||g.determineContext(),e&&g.determineContainer(),g.save.positions(),g.stick(),p.onReposition.call(A)},supports:{sticky:function(){{var t=e("<div/>");t[0]}return t.addClass(v.supported),t.css("position").match("sticky")}},save:{lastScroll:function(e){g.lastScroll=e},elementScroll:function(e){g.elementScroll=e},positions:function(){{var e={height:w.height()},t={margin:{top:parseInt(C.css("margin-top"),10),bottom:parseInt(C.css("margin-bottom"),10)},offset:C.offset(),width:C.outerWidth(),height:C.outerHeight()},n={offset:m.offset(),height:m.outerHeight()};({height:a.outerHeight()})}g.cache={fits:t.height<e.height,window:{height:e.height},element:{margin:t.margin,top:t.offset.top-t.margin.top,left:t.offset.left,width:t.width,height:t.height,bottom:t.offset.top+t.height},context:{top:n.offset.top,height:n.height,bottom:n.offset.top+n.height}},g.set.containerSize(),g.set.size(),g.stick(),g.debug("Caching element positions",g.cache)}},get:{direction:function(e){var t="down";return e=e||k.scrollTop(),g.lastScroll!==i&&(g.lastScroll<e?t="down":g.lastScroll>e&&(t="up")),t},scrollChange:function(e){return e=e||k.scrollTop(),g.lastScroll?e-g.lastScroll:0},currentElementScroll:function(){return g.elementScroll?g.elementScroll:g.is.top()?Math.abs(parseInt(C.css("top"),10))||0:Math.abs(parseInt(C.css("bottom"),10))||0},elementScroll:function(e){
e=e||k.scrollTop();var t=g.cache.element,n=g.cache.window,i=g.get.scrollChange(e),o=t.height-n.height+p.offset,a=g.get.currentElementScroll(),r=a+i;return a=g.cache.fits||0>r?0:r>o?o:r}},remove:{lastScroll:function(){delete g.lastScroll},elementScroll:function(e){delete g.elementScroll},offset:function(){C.css("margin-top","")}},set:{offset:function(){g.verbose("Setting offset on element",p.offset),C.css("margin-top",p.offset)},containerSize:function(){var e=a.get(0).tagName;"HTML"===e||"body"==e?g.determineContainer():Math.abs(a.outerHeight()-g.cache.context.height)>p.jitter&&(g.debug("Context has padding, specifying exact height for container",g.cache.context.height),a.css({height:g.cache.context.height}))},minimumSize:function(){var e=g.cache.element;a.css("min-height",e.height)},scroll:function(e){g.debug("Setting scroll on element",e),g.elementScroll!=e&&(g.is.top()&&C.css("bottom","").css("top",-e),g.is.bottom()&&C.css("top","").css("bottom",e))},size:function(){0!==g.cache.element.height&&0!==g.cache.element.width&&(A.style.setProperty("width",g.cache.element.width+"px","important"),A.style.setProperty("height",g.cache.element.height+"px","important"))}},is:{top:function(){return C.hasClass(v.top)},bottom:function(){return C.hasClass(v.bottom)},initialPosition:function(){return!g.is.fixed()&&!g.is.bound()},hidden:function(){return!C.is(":visible")},bound:function(){return C.hasClass(v.bound)},fixed:function(){return C.hasClass(v.fixed)}},stick:function(e){var t=e||k.scrollTop(),n=g.cache,i=n.fits,o=n.element,a=n.window,r=n.context,s=g.is.bottom()&&p.pushing?p.bottomOffset:p.offset,e={top:t+s,bottom:t+s+a.height},c=(g.get.direction(e.top),i?0:g.get.elementScroll(e.top)),l=!i,u=0!==o.height;u&&(g.is.initialPosition()?e.top>=r.bottom?(g.debug("Initial element position is bottom of container"),g.bindBottom()):e.top>o.top&&(o.height+e.top-c>=r.bottom?(g.debug("Initial element position is bottom of container"),g.bindBottom()):(g.debug("Initial element position is fixed"),g.fixTop())):g.is.fixed()?g.is.top()?e.top<=o.top?(g.debug("Fixed element reached top of container"),g.setInitialPosition()):o.height+e.top-c>=r.bottom?(g.debug("Fixed element reached bottom of container"),g.bindBottom()):l&&(g.set.scroll(c),g.save.lastScroll(e.top),g.save.elementScroll(c)):g.is.bottom()&&(e.bottom-o.height<=o.top?(g.debug("Bottom fixed rail has reached top of container"),g.setInitialPosition()):e.bottom>=r.bottom?(g.debug("Bottom fixed rail has reached bottom of container"),g.bindBottom()):l&&(g.set.scroll(c),g.save.lastScroll(e.top),g.save.elementScroll(c))):g.is.bottom()&&(p.pushing?g.is.bound()&&e.bottom<=r.bottom&&(g.debug("Fixing bottom attached element to bottom of browser."),g.fixBottom()):g.is.bound()&&e.top<=r.bottom-o.height&&(g.debug("Fixing bottom attached element to top of browser."),g.fixTop())))},bindTop:function(){g.debug("Binding element to top of parent container"),g.remove.offset(),C.css({left:"",top:"",marginBottom:""}).removeClass(v.fixed).removeClass(v.bottom).addClass(v.bound).addClass(v.top),p.onTop.call(A),p.onUnstick.call(A)},bindBottom:function(){g.debug("Binding element to bottom of parent container"),g.remove.offset(),C.css({left:"",top:""}).removeClass(v.fixed).removeClass(v.top).addClass(v.bound).addClass(v.bottom),p.onBottom.call(A),p.onUnstick.call(A)},setInitialPosition:function(){g.debug("Returning to initial position"),g.unfix(),g.unbind()},fixTop:function(){g.debug("Fixing element to top of page"),g.set.minimumSize(),g.set.offset(),C.css({left:g.cache.element.left,bottom:"",marginBottom:""}).removeClass(v.bound).removeClass(v.bottom).addClass(v.fixed).addClass(v.top),p.onStick.call(A)},fixBottom:function(){g.debug("Sticking element to bottom of page"),g.set.minimumSize(),g.set.offset(),C.css({left:g.cache.element.left,bottom:"",marginBottom:""}).removeClass(v.bound).removeClass(v.top).addClass(v.fixed).addClass(v.bottom),p.onStick.call(A)},unbind:function(){g.is.bound()&&(g.debug("Removing container bound position on element"),g.remove.offset(),C.removeClass(v.bound).removeClass(v.top).removeClass(v.bottom))},unfix:function(){g.is.fixed()&&(g.debug("Removing fixed position on element"),g.remove.offset(),C.removeClass(v.fixed).removeClass(v.top).removeClass(v.bottom),p.onUnstick.call(A))},reset:function(){g.debug("Reseting elements position"),g.unbind(),g.unfix(),g.resetCSS(),g.remove.offset(),g.remove.lastScroll()},resetCSS:function(){C.css({width:"",height:""}),a.css({height:""})},setting:function(t,n){if(e.isPlainObject(t))e.extend(!0,p,t);else{if(n===i)return p[t];p[t]=n}},internal:function(t,n){if(e.isPlainObject(t))e.extend(!0,g,t);else{if(n===i)return g[t];g[t]=n}},debug:function(){p.debug&&(p.performance?g.performance.log(arguments):(g.debug=Function.prototype.bind.call(console.info,console,p.name+":"),g.debug.apply(console,arguments)))},verbose:function(){p.verbose&&p.debug&&(p.performance?g.performance.log(arguments):(g.verbose=Function.prototype.bind.call(console.info,console,p.name+":"),g.verbose.apply(console,arguments)))},error:function(){g.error=Function.prototype.bind.call(console.error,console,p.name+":"),g.error.apply(console,arguments)},performance:{log:function(e){var t,n,i;p.performance&&(t=(new Date).getTime(),i=s||t,n=t-i,s=t,c.push({Name:e[0],Arguments:[].slice.call(e,1)||"",Element:A,"Execution Time":n})),clearTimeout(g.performance.timer),g.performance.timer=setTimeout(g.performance.display,0)},display:function(){var t=p.name+":",n=0;s=!1,clearTimeout(g.performance.timer),e.each(c,function(e,t){n+=t["Execution Time"]}),t+=" "+n+"ms",r&&(t+=" '"+r+"'"),(console.group!==i||console.table!==i)&&c.length>0&&(console.groupCollapsed(t),console.table?console.table(c):e.each(c,function(e,t){console.log(t.Name+": "+t["Execution Time"]+"ms")}),console.groupEnd()),c=[]}},invoke:function(t,n,a){var r,s,c,l=S;return n=n||d,a=A||a,"string"==typeof t&&l!==i&&(t=t.split(/[\. ]/),r=t.length-1,e.each(t,function(n,o){var a=n!=r?o+t[n+1].charAt(0).toUpperCase()+t[n+1].slice(1):t;if(e.isPlainObject(l[a])&&n!=r)l=l[a];else{if(l[a]!==i)return s=l[a],!1;if(!e.isPlainObject(l[o])||n==r)return l[o]!==i?(s=l[o],!1):!1;l=l[o]}})),e.isFunction(s)?c=s.apply(a,n):s!==i&&(c=s),e.isArray(o)?o.push(c):o!==i?o=[o,c]:c!==i&&(o=c),s}},u?(S===i&&g.initialize(),g.invoke(l)):(S!==i&&S.invoke("destroy"),g.initialize())}),o!==i?o:this},e.fn.sticky.settings={name:"Sticky",namespace:"sticky",debug:!1,verbose:!0,performance:!0,pushing:!1,context:!1,scrollContext:t,offset:0,bottomOffset:0,jitter:5,observeChanges:!1,onReposition:function(){},onScroll:function(){},onStick:function(){},onUnstick:function(){},onTop:function(){},onBottom:function(){},error:{container:"Sticky element must be inside a relative container",visible:"Element is hidden, you must call refresh after element becomes visible",method:"The method you called is not defined.",invalidContext:"Context specified does not exist",elementSize:"Sticky element is larger than its container, cannot create sticky."},className:{bound:"bound",fixed:"fixed",supported:"native",top:"top",bottom:"bottom"}}}(jQuery,window,document),function(e,t,n,i){"use strict";e.fn.tab=function(o){var a,r=e(e.isFunction(this)?t:this),s=r.selector||"",c=(new Date).getTime(),l=[],u=arguments[0],d="string"==typeof u,m=[].slice.call(arguments,1),f=!1;return r.each(function(){var g,p,v,h,b,y,x=e.isPlainObject(o)?e.extend(!0,{},e.fn.tab.settings,o):e.extend({},e.fn.tab.settings),C=x.className,w=x.metadata,k=x.selector,S=x.error,T="."+x.namespace,A="module-"+x.namespace,R=e(this),P={},E=!0,F=0,D=this,O=R.data(A);b={initialize:function(){b.debug("Initializing tab menu item",R),b.fix.callbacks(),b.determineTabs(),b.debug("Determining tabs",x.context,p),x.auto&&b.set.auto(),b.bind.events(),x.history&&!f&&(b.initializeHistory(),f=!0),b.instantiate()},instantiate:function(){b.verbose("Storing instance of module",b),O=b,R.data(A,b)},destroy:function(){b.debug("Destroying tabs",R),R.removeData(A).off(T)},bind:{events:function(){e.isWindow(D)||(b.debug("Attaching tab activation events to element",R),R.on("click"+T,b.event.click))}},determineTabs:function(){var t;"parent"===x.context?(R.closest(k.ui).length>0?(t=R.closest(k.ui),b.verbose("Using closest UI element as parent",t)):t=R,g=t.parent(),b.verbose("Determined parent element for creating context",g)):x.context?(g=e(x.context),b.verbose("Using selector for tab context",x.context,g)):g=e("body"),x.childrenOnly?(p=g.children(k.tabs),b.debug("Searching tab context children for tabs",g,p)):(p=g.find(k.tabs),b.debug("Searching tab context for tabs",g,p))},fix:{callbacks:function(){e.isPlainObject(o)&&(o.onTabLoad||o.onTabInit)&&(o.onTabLoad&&(o.onLoad=o.onTabLoad,delete o.onTabLoad,b.error(S.legacyLoad,o.onLoad)),o.onTabInit&&(o.onFirstLoad=o.onTabInit,delete o.onTabInit,b.error(S.legacyInit,o.onFirstLoad)),x=e.extend(!0,{},e.fn.tab.settings,o))}},initializeHistory:function(){if(b.debug("Initializing page state"),e.address===i)return b.error(S.state),!1;if("state"==x.historyType){if(b.debug("Using HTML5 to manage state"),x.path===!1)return b.error(S.path),!1;e.address.history(!0).state(x.path)}e.address.bind("change",b.event.history.change)},event:{click:function(t){var n=e(this).data(w.tab);n!==i?(x.history?(b.verbose("Updating page state",t),e.address.value(n)):(b.verbose("Changing tab",t),b.changeTab(n)),t.preventDefault()):b.debug("No tab specified")},history:{change:function(t){var n=t.pathNames.join("/")||b.get.initialPath(),o=x.templates.determineTitle(n)||!1;b.performance.display(),b.debug("History change event",n,t),y=t,n!==i&&b.changeTab(n),o&&e.address.title(o)}}},refresh:function(){v&&(b.debug("Refreshing tab",v),b.changeTab(v))},cache:{read:function(e){return e!==i?P[e]:!1},add:function(e,t){e=e||v,b.debug("Adding cached content for",e),P[e]=t},remove:function(e){e=e||v,b.debug("Removing cached content for",e),delete P[e]}},set:{auto:function(){var t="string"==typeof x.path?x.path.replace(/\/$/,"")+"/{$tab}":"/{$tab}";b.verbose("Setting up automatic tab retrieval from server",t),e.isPlainObject(x.apiSettings)?x.apiSettings.url=t:x.apiSettings={url:t}},loading:function(e){var t=b.get.tabElement(e),n=t.hasClass(C.loading);n||(b.verbose("Setting loading state for",t),t.addClass(C.loading).siblings(p).removeClass(C.active+" "+C.loading),t.length>0&&x.onRequest.call(t[0],e))},state:function(t){e.address.value(t)}},changeTab:function(n){var i=t.history&&t.history.pushState,o=i&&x.ignoreFirstLoad&&E,a=x.auto||e.isPlainObject(x.apiSettings),r=a&&!o?b.utilities.pathToArray(n):b.get.defaultPathArray(n);n=b.utilities.arrayToPath(r),e.each(r,function(t,i){var s,c,l,u,d=r.slice(0,t+1),m=b.utilities.arrayToPath(d),f=b.is.tab(m),p=t+1==r.length,k=b.get.tabElement(m);if(b.verbose("Looking for tab",i),f){if(b.verbose("Tab was found",i),v=m,h=b.utilities.filterArray(r,d),p?u=!0:(c=r.slice(0,t+2),l=b.utilities.arrayToPath(c),u=!b.is.tab(l),u&&b.verbose("Tab parameters found",c)),u&&a)return o?(b.debug("Ignoring remote content on first tab load",m),E=!1,b.cache.add(n,k.html()),b.activate.all(m),x.onFirstLoad.call(k[0],m,h,y),x.onLoad.call(k[0],m,h,y)):(b.activate.navigation(m),b.fetch.content(m,n)),!1;b.debug("Opened local tab",m),b.activate.all(m),b.cache.read(m)||(b.cache.add(m,!0),b.debug("First time tab loaded calling tab init"),x.onFirstLoad.call(k[0],m,h,y)),x.onLoad.call(k[0],m,h,y)}else{if(-1!=n.search("/")||""===n)return b.error(S.missingTab,R,g,m),!1;if(s=e("#"+n+', a[name="'+n+'"]'),m=s.closest("[data-tab]").data(w.tab),k=b.get.tabElement(m),s&&s.length>0&&m)return b.debug("Anchor link used, opening parent tab",k,s),k.hasClass(C.active)||setTimeout(function(){b.scrollTo(s)},0),b.activate.all(m),b.cache.read(m)||(b.cache.add(m,!0),b.debug("First time tab loaded calling tab init"),x.onFirstLoad.call(k[0],m,h,y)),x.onLoad.call(k[0],m,h,y),!1}})},scrollTo:function(t){var i=t&&t.length>0?t.offset().top:!1;i!==!1&&(b.debug("Forcing scroll to an in-page link in a hidden tab",i,t),e(n).scrollTop(i))},update:{content:function(e,t,n){var o=b.get.tabElement(e),a=o[0];n=n!==i?n:x.evaluateScripts,n?(b.debug("Updating HTML and evaluating inline scripts",e,t),o.html(t)):(b.debug("Updating HTML",e,t),a.innerHTML=t)}},fetch:{content:function(t,n){var o,a,r=b.get.tabElement(t),s={dataType:"html",encodeParameters:!1,on:"now",cache:x.alwaysRefresh,headers:{"X-Remote":!0},onSuccess:function(e){b.cache.add(n,e),b.update.content(t,e),t==v?(b.debug("Content loaded",t),b.activate.tab(t)):b.debug("Content loaded in background",t),x.onFirstLoad.call(r[0],t,h,y),x.onLoad.call(r[0],t,h,y)},urlData:{tab:n}},c=r.api("get request")||!1,l=c&&"pending"===c.state();n=n||t,a=b.cache.read(n),x.cache&&a?(b.activate.tab(t),b.debug("Adding cached content",n),"once"==x.evaluateScripts?b.update.content(t,a,!1):b.update.content(t,a),x.onLoad.call(r[0],t,h,y)):l?(b.set.loading(t),b.debug("Content is already loading",n)):e.api!==i?(o=e.extend(!0,{},x.apiSettings,s),b.debug("Retrieving remote content",n,o),b.set.loading(t),r.api(o)):b.error(S.api)}},activate:{all:function(e){b.activate.tab(e),b.activate.navigation(e)},tab:function(e){var t=b.get.tabElement(e),n=t.hasClass(C.active);b.verbose("Showing tab content for",t),n||(t.addClass(C.active).siblings(p).removeClass(C.active+" "+C.loading),t.length>0&&x.onVisible.call(t[0],e))},navigation:function(e){var t=b.get.navElement(e),n=t.hasClass(C.active);b.verbose("Activating tab navigation for",t,e),n||t.addClass(C.active).siblings(r).removeClass(C.active+" "+C.loading)}},deactivate:{all:function(){b.deactivate.navigation(),b.deactivate.tabs()},navigation:function(){r.removeClass(C.active)},tabs:function(){p.removeClass(C.active+" "+C.loading)}},is:{tab:function(e){return e!==i?b.get.tabElement(e).length>0:!1}},get:{initialPath:function(){return r.eq(0).data(w.tab)||p.eq(0).data(w.tab)},path:function(){return e.address.value()},defaultPathArray:function(e){return b.utilities.pathToArray(b.get.defaultPath(e))},defaultPath:function(e){var t=r.filter("[data-"+w.tab+'^="'+e+'/"]').eq(0),n=t.data(w.tab)||!1;if(n){if(b.debug("Found default tab",n),F<x.maxDepth)return F++,b.get.defaultPath(n);b.error(S.recursion)}else b.debug("No default tabs found for",e,p);return F=0,e},navElement:function(e){return e=e||v,r.filter("[data-"+w.tab+'="'+e+'"]')},tabElement:function(e){var t,n,i,o;return e=e||v,i=b.utilities.pathToArray(e),o=b.utilities.last(i),t=p.filter("[data-"+w.tab+'="'+e+'"]'),n=p.filter("[data-"+w.tab+'="'+o+'"]'),t.length>0?t:n},tab:function(){return v}},utilities:{filterArray:function(t,n){return e.grep(t,function(t){return-1==e.inArray(t,n)})},last:function(t){return e.isArray(t)?t[t.length-1]:!1},pathToArray:function(e){return e===i&&(e=v),"string"==typeof e?e.split("/"):[e]},arrayToPath:function(t){return e.isArray(t)?t.join("/"):!1}},setting:function(t,n){if(b.debug("Changing setting",t,n),e.isPlainObject(t))e.extend(!0,x,t);else{if(n===i)return x[t];x[t]=n}},internal:function(t,n){if(e.isPlainObject(t))e.extend(!0,b,t);else{if(n===i)return b[t];b[t]=n}},debug:function(){x.debug&&(x.performance?b.performance.log(arguments):(b.debug=Function.prototype.bind.call(console.info,console,x.name+":"),b.debug.apply(console,arguments)))},verbose:function(){x.verbose&&x.debug&&(x.performance?b.performance.log(arguments):(b.verbose=Function.prototype.bind.call(console.info,console,x.name+":"),b.verbose.apply(console,arguments)))},error:function(){b.error=Function.prototype.bind.call(console.error,console,x.name+":"),b.error.apply(console,arguments)},performance:{log:function(e){var t,n,i;x.performance&&(t=(new Date).getTime(),i=c||t,n=t-i,c=t,l.push({Name:e[0],Arguments:[].slice.call(e,1)||"",Element:D,"Execution Time":n})),clearTimeout(b.performance.timer),b.performance.timer=setTimeout(b.performance.display,500)},display:function(){var t=x.name+":",n=0;c=!1,clearTimeout(b.performance.timer),e.each(l,function(e,t){n+=t["Execution Time"]}),t+=" "+n+"ms",s&&(t+=" '"+s+"'"),(console.group!==i||console.table!==i)&&l.length>0&&(console.groupCollapsed(t),console.table?console.table(l):e.each(l,function(e,t){console.log(t.Name+": "+t["Execution Time"]+"ms")}),console.groupEnd()),l=[]}},invoke:function(t,n,o){var r,s,c,l=O;return n=n||m,o=D||o,"string"==typeof t&&l!==i&&(t=t.split(/[\. ]/),r=t.length-1,e.each(t,function(n,o){var a=n!=r?o+t[n+1].charAt(0).toUpperCase()+t[n+1].slice(1):t;if(e.isPlainObject(l[a])&&n!=r)l=l[a];else{if(l[a]!==i)return s=l[a],!1;if(!e.isPlainObject(l[o])||n==r)return l[o]!==i?(s=l[o],!1):(b.error(S.method,t),!1);l=l[o]}})),e.isFunction(s)?c=s.apply(o,n):s!==i&&(c=s),e.isArray(a)?a.push(c):a!==i?a=[a,c]:c!==i&&(a=c),s}},d?(O===i&&b.initialize(),b.invoke(u)):(O!==i&&O.invoke("destroy"),b.initialize())}),a!==i?a:this},e.tab=function(){e(t).tab.apply(this,arguments)},e.fn.tab.settings={name:"Tab",namespace:"tab",debug:!1,verbose:!1,performance:!0,auto:!1,history:!1,historyType:"hash",path:!1,context:!1,childrenOnly:!1,maxDepth:25,alwaysRefresh:!1,cache:!0,ignoreFirstLoad:!1,apiSettings:!1,evaluateScripts:"once",onFirstLoad:function(e,t,n){},onLoad:function(e,t,n){},onVisible:function(e,t,n){},onRequest:function(e,t,n){},templates:{determineTitle:function(e){}},error:{api:"You attempted to load content without API module",method:"The method you called is not defined",missingTab:"Activated tab cannot be found. Tabs are case-sensitive.",noContent:"The tab you specified is missing a content url.",path:"History enabled, but no path was specified",recursion:"Max recursive depth reached",legacyInit:"onTabInit has been renamed to onFirstLoad in 2.0, please adjust your code.",legacyLoad:"onTabLoad has been renamed to onLoad in 2.0. Please adjust your code",state:"History requires Asual's Address library <https://github.com/asual/jquery-address>"},metadata:{tab:"tab",loaded:"loaded",promise:"promise"},className:{loading:"loading",active:"active"},selector:{tabs:".ui.tab",ui:".ui"}}}(jQuery,window,document),function(e,t,n,i){"use strict";e.fn.transition=function(){{var o,a=e(this),r=a.selector||"",s=(new Date).getTime(),c=[],l=arguments,u=l[0],d=[].slice.call(arguments,1),m="string"==typeof u;t.requestAnimationFrame||t.mozRequestAnimationFrame||t.webkitRequestAnimationFrame||t.msRequestAnimationFrame||function(e){setTimeout(e,0)}}return a.each(function(t){var f,g,p,v,h,b,y,x,C,w=e(this),k=this;C={initialize:function(){f=C.get.settings.apply(k,l),v=f.className,p=f.error,h=f.metadata,x="."+f.namespace,y="module-"+f.namespace,g=w.data(y)||C,b=C.get.animationEndEvent(),m&&(m=C.invoke(u)),m===!1&&(C.verbose("Converted arguments into settings object",f),f.interval?C.delay(f.animate):C.animate(),C.instantiate())},instantiate:function(){C.verbose("Storing instance of module",C),g=C,w.data(y,g)},destroy:function(){C.verbose("Destroying previous module for",k),w.removeData(y)},refresh:function(){C.verbose("Refreshing display type on next animation"),delete C.displayType},forceRepaint:function(){C.verbose("Forcing element repaint");var e=w.parent(),t=w.next();0===t.length?w.detach().appendTo(e):w.detach().insertBefore(t)},repaint:function(){C.verbose("Repainting element");k.offsetWidth},delay:function(e){var n,o,r=C.get.animationDirection();r||(r=C.can.transition()?C.get.direction():"static"),e=e!==i?e:f.interval,n="auto"==f.reverse&&r==v.outward,o=n||1==f.reverse?(a.length-t)*f.interval:t*f.interval,C.debug("Delaying animation by",o),setTimeout(C.animate,o)},animate:function(e){if(f=e||f,!C.is.supported())return C.error(p.support),!1;if(C.debug("Preparing animation",f.animation),C.is.animating()){if(f.queue)return!f.allowRepeats&&C.has.direction()&&C.is.occurring()&&C.queuing!==!0?C.debug("Animation is currently occurring, preventing queueing same animation",f.animation):C.queue(f.animation),!1;if(!f.allowRepeats&&C.is.occurring())return C.debug("Animation is already occurring, will not execute repeated animation",f.animation),!1;C.debug("New animation started, completing previous early",f.animation),g.complete()}C.can.animate()?C.set.animating(f.animation):C.error(p.noAnimation,f.animation,k)},reset:function(){C.debug("Resetting animation to beginning conditions"),C.remove.animationCallbacks(),C.restore.conditions(),C.remove.animating()},queue:function(e){C.debug("Queueing animation of",e),C.queuing=!0,w.one(b+".queue"+x,function(){C.queuing=!1,C.repaint(),C.animate.apply(this,f)})},complete:function(e){C.debug("Animation complete",f.animation),C.remove.completeCallback(),C.remove.failSafe(),C.is.looping()||(C.is.outward()?(C.verbose("Animation is outward, hiding element"),C.restore.conditions(),C.hide()):C.is.inward()?(C.verbose("Animation is outward, showing element"),C.restore.conditions(),C.show()):C.restore.conditions())},force:{visible:function(){var e=w.attr("style"),t=C.get.userStyle(),n=C.get.displayType(),o=t+"display: "+n+" !important;",a=w.css("display"),r=e===i||""===e;a!==n?(C.verbose("Overriding default display to show element",n),w.attr("style",o)):r&&w.removeAttr("style")},hidden:function(){var e=w.attr("style"),t=w.css("display"),n=e===i||""===e;"none"===t||C.is.hidden()?n&&w.removeAttr("style"):(C.verbose("Overriding default display to hide element"),w.css("display","none"))}},has:{direction:function(t){var n=!1;return t=t||f.animation,"string"==typeof t&&(t=t.split(" "),e.each(t,function(e,t){(t===v.inward||t===v.outward)&&(n=!0)})),n},inlineDisplay:function(){var t=w.attr("style")||"";return e.isArray(t.match(/display.*?;/,""))}},set:{animating:function(e){var t;C.remove.completeCallback(),e=e||f.animation,t=C.get.animationClass(e),C.save.animation(t),C.force.visible(),C.remove.hidden(),C.remove.direction(),C.start.animation(t)},duration:function(e,t){t=t||f.duration,t="number"==typeof t?t+"ms":t,(t||0===t)&&(C.verbose("Setting animation duration",t),w.css({"animation-duration":t}))},direction:function(e){e=e||C.get.direction(),e==v.inward?C.set.inward():C.set.outward()},looping:function(){C.debug("Transition set to loop"),w.addClass(v.looping)},hidden:function(){w.addClass(v.transition).addClass(v.hidden)},inward:function(){C.debug("Setting direction to inward"),w.removeClass(v.outward).addClass(v.inward)},outward:function(){C.debug("Setting direction to outward"),w.removeClass(v.inward).addClass(v.outward)},visible:function(){w.addClass(v.transition).addClass(v.visible)}},start:{animation:function(e){e=e||C.get.animationClass(),C.debug("Starting tween",e),w.addClass(e).one(b+".complete"+x,C.complete),f.useFailSafe&&C.add.failSafe(),C.set.duration(f.duration),f.onStart.call(k)}},save:{animation:function(e){C.cache||(C.cache={}),C.cache.animation=e},displayType:function(e){"none"!==e&&w.data(h.displayType,e)},transitionExists:function(t,n){e.fn.transition.exists[t]=n,C.verbose("Saving existence of transition",t,n)}},restore:{conditions:function(){var e=C.get.currentAnimation();e&&(w.removeClass(e),C.verbose("Removing animation class",C.cache)),C.remove.duration()}},add:{failSafe:function(){var e=C.get.duration();C.timer=setTimeout(function(){w.triggerHandler(b)},e+f.failSafeDelay),C.verbose("Adding fail safe timer",C.timer)}},remove:{animating:function(){w.removeClass(v.animating)},animationCallbacks:function(){C.remove.queueCallback(),C.remove.completeCallback()},queueCallback:function(){w.off(".queue"+x)},completeCallback:function(){w.off(".complete"+x)},display:function(){w.css("display","")},direction:function(){w.removeClass(v.inward).removeClass(v.outward)},duration:function(){w.css("animation-duration","")},failSafe:function(){C.verbose("Removing fail safe timer",C.timer),C.timer&&clearTimeout(C.timer)},hidden:function(){w.removeClass(v.hidden)},visible:function(){w.removeClass(v.visible)},looping:function(){C.debug("Transitions are no longer looping"),C.is.looping()&&(C.reset(),w.removeClass(v.looping))},transition:function(){w.removeClass(v.visible).removeClass(v.hidden)}},get:{settings:function(t,n,i){return"object"==typeof t?e.extend(!0,{},e.fn.transition.settings,t):"function"==typeof i?e.extend({},e.fn.transition.settings,{animation:t,onComplete:i,duration:n}):"string"==typeof n||"number"==typeof n?e.extend({},e.fn.transition.settings,{animation:t,duration:n}):"object"==typeof n?e.extend({},e.fn.transition.settings,n,{animation:t}):"function"==typeof n?e.extend({},e.fn.transition.settings,{animation:t,onComplete:n}):e.extend({},e.fn.transition.settings,{animation:t})},animationClass:function(e){var t=e||f.animation,n=C.can.transition()&&!C.has.direction()?C.get.direction()+" ":"";return v.animating+" "+v.transition+" "+n+t},currentAnimation:function(){return C.cache&&C.cache.animation!==i?C.cache.animation:!1},currentDirection:function(){return C.is.inward()?v.inward:v.outward},direction:function(){return C.is.hidden()||!C.is.visible()?v.inward:v.outward},animationDirection:function(t){var n;return t=t||f.animation,"string"==typeof t&&(t=t.split(" "),e.each(t,function(e,t){t===v.inward?n=v.inward:t===v.outward&&(n=v.outward)})),n?n:!1},duration:function(e){return e=e||f.duration,e===!1&&(e=w.css("animation-duration")||0),"string"==typeof e?e.indexOf("ms")>-1?parseFloat(e):1e3*parseFloat(e):e},displayType:function(){return f.displayType?f.displayType:(w.data(h.displayType)===i&&C.can.transition(!0),w.data(h.displayType))},userStyle:function(e){return e=e||w.attr("style")||"",e.replace(/display.*?;/,"")},transitionExists:function(t){return e.fn.transition.exists[t]},animationStartEvent:function(){var e,t=n.createElement("div"),o={animation:"animationstart",OAnimation:"oAnimationStart",MozAnimation:"mozAnimationStart",WebkitAnimation:"webkitAnimationStart"};for(e in o)if(t.style[e]!==i)return o[e];return!1},animationEndEvent:function(){var e,t=n.createElement("div"),o={animation:"animationend",OAnimation:"oAnimationEnd",MozAnimation:"mozAnimationEnd",WebkitAnimation:"webkitAnimationEnd"};for(e in o)if(t.style[e]!==i)return o[e];return!1}},can:{transition:function(t){var n,o,a,r,s,c,l,u=f.animation,d=C.get.transitionExists(u);if(d===i||t){if(C.verbose("Determining whether animation exists"),n=w.attr("class"),o=w.prop("tagName"),a=e("<"+o+" />").addClass(n).insertAfter(w),r=a.addClass(u).removeClass(v.inward).removeClass(v.outward).addClass(v.animating).addClass(v.transition).css("animationName"),s=a.addClass(v.inward).css("animationName"),l=a.attr("class",n).removeAttr("style").removeClass(v.hidden).removeClass(v.visible).show().css("display"),C.verbose("Determining final display state",l),C.save.displayType(l),a.remove(),r!=s)C.debug("Direction exists for animation",u),c=!0;else{if("none"==r||!r)return void C.debug("No animation defined in css",u);C.debug("Static animation found",u,l),c=!1}C.save.transitionExists(u,c)}return d!==i?d:c},animate:function(){return C.can.transition()!==i}},is:{animating:function(){return w.hasClass(v.animating)},inward:function(){return w.hasClass(v.inward)},outward:function(){return w.hasClass(v.outward)},looping:function(){return w.hasClass(v.looping)},occurring:function(e){return e=e||f.animation,e="."+e.replace(" ","."),w.filter(e).length>0},visible:function(){return w.is(":visible")},hidden:function(){return"hidden"===w.css("visibility")},supported:function(){return b!==!1}},hide:function(){C.verbose("Hiding element"),C.is.animating()&&C.reset(),k.blur(),C.remove.display(),C.remove.visible(),C.set.hidden(),C.force.hidden(),f.onHide.call(k),f.onComplete.call(k)},show:function(e){C.verbose("Showing element",e),C.remove.hidden(),C.set.visible(),C.force.visible(),f.onShow.call(k),f.onComplete.call(k)},toggle:function(){C.is.visible()?C.hide():C.show()},stop:function(){C.debug("Stopping current animation"),w.triggerHandler(b)},stopAll:function(){C.debug("Stopping all animation"),C.remove.queueCallback(),w.triggerHandler(b)},clear:{queue:function(){C.debug("Clearing animation queue"),C.remove.queueCallback()}},enable:function(){C.verbose("Starting animation"),w.removeClass(v.disabled)},disable:function(){C.debug("Stopping animation"),w.addClass(v.disabled)},setting:function(t,n){if(C.debug("Changing setting",t,n),e.isPlainObject(t))e.extend(!0,f,t);else{if(n===i)return f[t];f[t]=n}},internal:function(t,n){if(e.isPlainObject(t))e.extend(!0,C,t);else{if(n===i)return C[t];C[t]=n}},debug:function(){f.debug&&(f.performance?C.performance.log(arguments):(C.debug=Function.prototype.bind.call(console.info,console,f.name+":"),C.debug.apply(console,arguments)))},verbose:function(){f.verbose&&f.debug&&(f.performance?C.performance.log(arguments):(C.verbose=Function.prototype.bind.call(console.info,console,f.name+":"),C.verbose.apply(console,arguments)))},error:function(){C.error=Function.prototype.bind.call(console.error,console,f.name+":"),C.error.apply(console,arguments)},performance:{log:function(e){var t,n,i;f.performance&&(t=(new Date).getTime(),i=s||t,n=t-i,s=t,c.push({Name:e[0],Arguments:[].slice.call(e,1)||"",Element:k,"Execution Time":n})),clearTimeout(C.performance.timer),C.performance.timer=setTimeout(C.performance.display,500)},display:function(){var t=f.name+":",n=0;s=!1,clearTimeout(C.performance.timer),e.each(c,function(e,t){n+=t["Execution Time"]}),t+=" "+n+"ms",r&&(t+=" '"+r+"'"),a.length>1&&(t+=" ("+a.length+")"),(console.group!==i||console.table!==i)&&c.length>0&&(console.groupCollapsed(t),console.table?console.table(c):e.each(c,function(e,t){console.log(t.Name+": "+t["Execution Time"]+"ms")}),console.groupEnd()),c=[]}},invoke:function(t,n,a){var r,s,c,l=g;return n=n||d,a=k||a,"string"==typeof t&&l!==i&&(t=t.split(/[\. ]/),r=t.length-1,e.each(t,function(n,o){var a=n!=r?o+t[n+1].charAt(0).toUpperCase()+t[n+1].slice(1):t;if(e.isPlainObject(l[a])&&n!=r)l=l[a];else{if(l[a]!==i)return s=l[a],!1;if(!e.isPlainObject(l[o])||n==r)return l[o]!==i?(s=l[o],!1):!1;l=l[o]}})),e.isFunction(s)?c=s.apply(a,n):s!==i&&(c=s),e.isArray(o)?o.push(c):o!==i?o=[o,c]:c!==i&&(o=c),s!==i?s:!1}},C.initialize()}),o!==i?o:this},e.fn.transition.exists={},e.fn.transition.settings={name:"Transition",debug:!1,verbose:!1,performance:!0,namespace:"transition",interval:0,reverse:"auto",onStart:function(){},onComplete:function(){},onShow:function(){},onHide:function(){},useFailSafe:!0,failSafeDelay:100,allowRepeats:!1,displayType:!1,animation:"fade",duration:!1,queue:!0,metadata:{displayType:"display"},className:{animating:"animating",disabled:"disabled",hidden:"hidden",inward:"in",loading:"loading",looping:"looping",outward:"out",transition:"transition",visible:"visible"},error:{noAnimation:"There is no css animation matching the one you specified. Please make sure your css is vendor prefixed, and you have included transition css.",repeated:"That animation is already occurring, cancelling repeated animation",method:"The method you called is not defined",support:"This browser does not support CSS animations"}}}(jQuery,window,document),function(e,t,n,i){"use strict";e.api=e.fn.api=function(n){var o,a=e(e.isFunction(this)?t:this),r=a.selector||"",s=(new Date).getTime(),c=[],l=arguments[0],u="string"==typeof l,d=[].slice.call(arguments,1);return a.each(function(){var a,m,f,g,p,v,h=e.isPlainObject(n)?e.extend(!0,{},e.fn.api.settings,n):e.extend({},e.fn.api.settings),b=h.namespace,y=h.metadata,x=h.selector,C=h.error,w=h.className,k="."+b,S="module-"+b,T=e(this),A=T.closest(x.form),R=h.stateContext?e(h.stateContext):T,P=this,E=R[0],F=T.data(S);v={initialize:function(){u||v.bind.events(),v.instantiate()},instantiate:function(){v.verbose("Storing instance of module",v),F=v,T.data(S,F)},destroy:function(){v.verbose("Destroying previous module for",P),T.removeData(S).off(k)},bind:{events:function(){var e=v.get.event();e?(v.verbose("Attaching API events to element",e),T.on(e+k,v.event.trigger)):"now"==h.on&&(v.debug("Querying API endpoint immediately"),v.query())}},decode:{json:function(e){if(e!==i&&"string"==typeof e)try{e=JSON.parse(e)}catch(t){}return e}},read:{cachedResponse:function(e){var n;return t.Storage===i?void v.error(C.noStorage):(n=sessionStorage.getItem(e),v.debug("Using cached response",e,n),n=v.decode.json(n),!1)}},write:{cachedResponse:function(n,o){return o&&""===o?void v.debug("Response empty, not caching",o):t.Storage===i?void v.error(C.noStorage):(e.isPlainObject(o)&&(o=JSON.stringify(o)),
sessionStorage.setItem(n,o),void v.verbose("Storing cached response for url",n,o))}},query:function(){if(v.is.disabled())return void v.debug("Element is disabled API request aborted");if(v.is.loading()){if(!h.interruptRequests)return void v.debug("Cancelling request, previous request is still pending");v.debug("Interrupting previous request"),v.abort()}return h.defaultData&&e.extend(!0,h.urlData,v.get.defaultData()),h.serializeForm&&(h.data=v.add.formData(h.data)),m=v.get.settings(),m===!1?(v.cancelled=!0,void v.error(C.beforeSend)):(v.cancelled=!1,f=v.get.templatedURL(),f||v.is.mocked()?(f=v.add.urlData(f),f||v.is.mocked()?(a=e.extend(!0,{},h,{type:h.method||h.type,data:g,url:h.base+f,beforeSend:h.beforeXHR,success:function(){},failure:function(){},complete:function(){}}),v.debug("Querying URL",a.url),v.verbose("Using AJAX settings",a),"local"===h.cache&&v.read.cachedResponse(f)?(v.debug("Response returned from local cache"),v.request=v.create.request(),void v.request.resolveWith(E,[v.read.cachedResponse(f)])):void(h.throttle?h.throttleFirstRequest||v.timer?(v.debug("Throttling request",h.throttle),clearTimeout(v.timer),v.timer=setTimeout(function(){v.timer&&delete v.timer,v.debug("Sending throttled request",g,a.method),v.send.request()},h.throttle)):(v.debug("Sending request",g,a.method),v.send.request(),v.timer=setTimeout(function(){},h.throttle)):(v.debug("Sending request",g,a.method),v.send.request()))):void 0):void v.error(C.missingURL))},should:{removeError:function(){return h.hideError===!0||"auto"===h.hideError&&!v.is.form()}},is:{disabled:function(){return T.filter(x.disabled).length>0},form:function(){return T.is("form")||R.is("form")},mocked:function(){return h.mockResponse||h.mockResponseAsync},input:function(){return T.is("input")},loading:function(){return v.request&&"pending"==v.request.state()},abortedRequest:function(e){return e&&e.readyState!==i&&0===e.readyState?(v.verbose("XHR request determined to be aborted"),!0):(v.verbose("XHR request was not aborted"),!1)},validResponse:function(t){return"json"!==h.dataType&&"jsonp"!==h.dataType||!e.isFunction(h.successTest)?(v.verbose("Response is not JSON, skipping validation",h.successTest,t),!0):(v.debug("Checking JSON returned success",h.successTest,t),h.successTest(t)?(v.debug("Response passed success test",t),!0):(v.debug("Response failed success test",t),!1))}},was:{cancelled:function(){return v.cancelled||!1},succesful:function(){return v.request&&"resolved"==v.request.state()},failure:function(){return v.request&&"rejected"==v.request.state()},complete:function(){return v.request&&("resolved"==v.request.state()||"rejected"==v.request.state())}},add:{urlData:function(t,n){var o,a;return t&&(o=t.match(h.regExp.required),a=t.match(h.regExp.optional),n=n||h.urlData,o&&(v.debug("Looking for required URL variables",o),e.each(o,function(o,a){var r=-1!==a.indexOf("$")?a.substr(2,a.length-3):a.substr(1,a.length-2),s=e.isPlainObject(n)&&n[r]!==i?n[r]:T.data(r)!==i?T.data(r):R.data(r)!==i?R.data(r):n[r];return s===i?(v.error(C.requiredParameter,r,t),t=!1,!1):(v.verbose("Found required variable",r,s),s=h.encodeParameters?v.get.urlEncodedValue(s):s,t=t.replace(a,s),void 0)})),a&&(v.debug("Looking for optional URL variables",o),e.each(a,function(o,a){var r=-1!==a.indexOf("$")?a.substr(3,a.length-4):a.substr(2,a.length-3),s=e.isPlainObject(n)&&n[r]!==i?n[r]:T.data(r)!==i?T.data(r):R.data(r)!==i?R.data(r):n[r];s!==i?(v.verbose("Optional variable Found",r,s),t=t.replace(a,s)):(v.verbose("Optional variable not found",r),t=-1!==t.indexOf("/"+a)?t.replace("/"+a,""):t.replace(a,""))}))),t},formData:function(t){var n,o=e.fn.serializeObject!==i,a=o?A.serializeObject():A.serialize();return t=t||h.data,n=e.isPlainObject(t),n?o?(v.debug("Extending existing data with form data",t,a),t=e.extend(!0,{},t,a)):(v.error(C.missingSerialize),v.debug("Cant extend data. Replacing data with form data",t,a),t=a):(v.debug("Adding form data",a),t=a),t}},send:{request:function(){v.set.loading(),v.request=v.create.request(),v.is.mocked()?v.mockedXHR=v.create.mockedXHR():v.xhr=v.create.xhr(),h.onRequest.call(E,v.request,v.xhr)}},event:{trigger:function(e){v.query(),("submit"==e.type||"click"==e.type)&&e.preventDefault()},xhr:{always:function(){},done:function(t,n,i){var o=this,a=(new Date).getTime()-p,r=h.loadingDuration-a,s=e.isFunction(h.onResponse)?h.onResponse.call(o,e.extend(!0,{},t)):!1;r=r>0?r:0,s&&(v.debug("Modified API response in onResponse callback",h.onResponse,s,t),t=s),r>0&&v.debug("Response completed early delaying state change by",r),setTimeout(function(){v.is.validResponse(t)?v.request.resolveWith(o,[t,i]):v.request.rejectWith(o,[i,"invalid"])},r)},fail:function(e,t,n){var i=this,o=(new Date).getTime()-p,a=h.loadingDuration-o;a=a>0?a:0,a>0&&v.debug("Response completed early delaying state change by",a),setTimeout(function(){v.is.abortedRequest(e)?v.request.rejectWith(i,[e,"aborted",n]):v.request.rejectWith(i,[e,"error",t,n])},a)}},request:{done:function(e,t){v.debug("Successful API Response",e),"local"===h.cache&&f&&(v.write.cachedResponse(f,e),v.debug("Saving server response locally",v.cache)),h.onSuccess.call(E,e,T,t)},complete:function(e,t){var n,i;v.was.succesful()?(i=e,n=t):(n=e,i=v.get.responseFromXHR(n)),v.remove.loading(),h.onComplete.call(E,i,T,n)},fail:function(e,t,n){var o=v.get.responseFromXHR(e),r=v.get.errorFromRequest(o,t,n);"aborted"==t?(v.debug("XHR Aborted (Most likely caused by page navigation or CORS Policy)",t,n),h.onAbort.call(E,t,T,e)):"invalid"==t?v.debug("JSON did not pass success test. A server-side error has most likely occurred",o):"error"==t&&e!==i&&(v.debug("XHR produced a server error",t,n),200!=e.status&&n!==i&&""!==n&&v.error(C.statusMessage+n,a.url),h.onError.call(E,r,T,e)),h.errorDuration&&"aborted"!==t&&(v.debug("Adding error state"),v.set.error(),v.should.removeError()&&setTimeout(v.remove.error,h.errorDuration)),v.debug("API Request failed",r,e),h.onFailure.call(E,o,T,e)}}},create:{request:function(){return e.Deferred().always(v.event.request.complete).done(v.event.request.done).fail(v.event.request.fail)},mockedXHR:function(){var t,n,i,o=!1,a=!1,r=!1;return i=e.Deferred().always(v.event.xhr.complete).done(v.event.xhr.done).fail(v.event.xhr.fail),h.mockResponse?(e.isFunction(h.mockResponse)?(v.debug("Using mocked callback returning response",h.mockResponse),n=h.mockResponse.call(E,h)):(v.debug("Using specified response",h.mockResponse),n=h.mockResponse),i.resolveWith(E,[n,o,{responseText:n}])):e.isFunction(h.mockResponseAsync)&&(t=function(e){v.debug("Async callback returned response",e),e?i.resolveWith(E,[e,o,{responseText:e}]):i.rejectWith(E,[{responseText:e},a,r])},v.debug("Using async mocked response",h.mockResponseAsync),h.mockResponseAsync.call(E,h,t)),i},xhr:function(){var t;return t=e.ajax(a).always(v.event.xhr.always).done(v.event.xhr.done).fail(v.event.xhr.fail),v.verbose("Created server request",t),t}},set:{error:function(){v.verbose("Adding error state to element",R),R.addClass(w.error)},loading:function(){v.verbose("Adding loading state to element",R),R.addClass(w.loading),p=(new Date).getTime()}},remove:{error:function(){v.verbose("Removing error state from element",R),R.removeClass(w.error)},loading:function(){v.verbose("Removing loading state from element",R),R.removeClass(w.loading)}},get:{responseFromXHR:function(t){return e.isPlainObject(t)?"json"==h.dataType||"jsonp"==h.dataType?v.decode.json(t.responseText):t.responseText:!1},errorFromRequest:function(t,n,o){return e.isPlainObject(t)&&t.error!==i?t.error:h.error[n]!==i?h.error[n]:o},request:function(){return v.request||!1},xhr:function(){return v.xhr||!1},settings:function(){var e;return e=h.beforeSend.call(E,h),e&&(e.success!==i&&(v.debug("Legacy success callback detected",e),v.error(C.legacyParameters,e.success),e.onSuccess=e.success),e.failure!==i&&(v.debug("Legacy failure callback detected",e),v.error(C.legacyParameters,e.failure),e.onFailure=e.failure),e.complete!==i&&(v.debug("Legacy complete callback detected",e),v.error(C.legacyParameters,e.complete),e.onComplete=e.complete)),e===i&&v.error(C.noReturnedValue),e!==i?e:h},urlEncodedValue:function(e){var n=t.decodeURIComponent(e),i=t.encodeURIComponent(e),o=n!==e;return o?(v.debug("URL value is already encoded, avoiding double encoding",e),e):(v.verbose("Encoding value using encodeURIComponent",e,i),i)},defaultData:function(){var t={};return e.isWindow(P)||(v.is.input()?t.value=T.val():v.is.form()&&(t.text=T.text())),t},event:function(){return e.isWindow(P)||"now"==h.on?(v.debug("API called without element, no events attached"),!1):"auto"==h.on?T.is("input")?P.oninput!==i?"input":P.onpropertychange!==i?"propertychange":"keyup":T.is("form")?"submit":"click":h.on},templatedURL:function(e){if(e=e||T.data(y.action)||h.action||!1,f=T.data(y.url)||h.url||!1)return v.debug("Using specified url",f),f;if(e){if(v.debug("Looking up url for action",e,h.api),h.api[e]===i&&!v.is.mocked())return void v.error(C.missingAction,h.action,h.api);f=h.api[e]}else v.is.form()&&(f=T.attr("action")||R.attr("action")||!1,v.debug("No url or action specified, defaulting to form action",f));return f}},abort:function(){var e=v.get.xhr();e&&"resolved"!==e.state()&&(v.debug("Cancelling API request"),e.abort())},reset:function(){v.remove.error(),v.remove.loading()},setting:function(t,n){if(v.debug("Changing setting",t,n),e.isPlainObject(t))e.extend(!0,h,t);else{if(n===i)return h[t];h[t]=n}},internal:function(t,n){if(e.isPlainObject(t))e.extend(!0,v,t);else{if(n===i)return v[t];v[t]=n}},debug:function(){h.debug&&(h.performance?v.performance.log(arguments):(v.debug=Function.prototype.bind.call(console.info,console,h.name+":"),v.debug.apply(console,arguments)))},verbose:function(){h.verbose&&h.debug&&(h.performance?v.performance.log(arguments):(v.verbose=Function.prototype.bind.call(console.info,console,h.name+":"),v.verbose.apply(console,arguments)))},error:function(){v.error=Function.prototype.bind.call(console.error,console,h.name+":"),v.error.apply(console,arguments)},performance:{log:function(e){var t,n,i;h.performance&&(t=(new Date).getTime(),i=s||t,n=t-i,s=t,c.push({Name:e[0],Arguments:[].slice.call(e,1)||"","Execution Time":n})),clearTimeout(v.performance.timer),v.performance.timer=setTimeout(v.performance.display,500)},display:function(){var t=h.name+":",n=0;s=!1,clearTimeout(v.performance.timer),e.each(c,function(e,t){n+=t["Execution Time"]}),t+=" "+n+"ms",r&&(t+=" '"+r+"'"),(console.group!==i||console.table!==i)&&c.length>0&&(console.groupCollapsed(t),console.table?console.table(c):e.each(c,function(e,t){console.log(t.Name+": "+t["Execution Time"]+"ms")}),console.groupEnd()),c=[]}},invoke:function(t,n,a){var r,s,c,l=F;return n=n||d,a=P||a,"string"==typeof t&&l!==i&&(t=t.split(/[\. ]/),r=t.length-1,e.each(t,function(n,o){var a=n!=r?o+t[n+1].charAt(0).toUpperCase()+t[n+1].slice(1):t;if(e.isPlainObject(l[a])&&n!=r)l=l[a];else{if(l[a]!==i)return s=l[a],!1;if(!e.isPlainObject(l[o])||n==r)return l[o]!==i?(s=l[o],!1):(v.error(C.method,t),!1);l=l[o]}})),e.isFunction(s)?c=s.apply(a,n):s!==i&&(c=s),e.isArray(o)?o.push(c):o!==i?o=[o,c]:c!==i&&(o=c),s}},u?(F===i&&v.initialize(),v.invoke(l)):(F!==i&&F.invoke("destroy"),v.initialize())}),o!==i?o:this},e.api.settings={name:"API",namespace:"api",debug:!1,verbose:!1,performance:!0,api:{},cache:!0,interruptRequests:!0,on:"auto",stateContext:!1,loadingDuration:0,hideError:"auto",errorDuration:2e3,encodeParameters:!0,action:!1,url:!1,base:"",urlData:{},defaultData:!0,serializeForm:!1,throttle:0,throttleFirstRequest:!0,method:"get",data:{},dataType:"json",mockResponse:!1,mockResponseAsync:!1,beforeSend:function(e){return e},beforeXHR:function(e){},onRequest:function(e,t){},onResponse:!1,onSuccess:function(e,t){},onComplete:function(e,t){},onFailure:function(e,t){},onError:function(e,t){},onAbort:function(e,t){},successTest:!1,error:{beforeSend:"The before send function has aborted the request",error:"There was an error with your request",exitConditions:"API Request Aborted. Exit conditions met",JSONParse:"JSON could not be parsed during error handling",legacyParameters:"You are using legacy API success callback names",method:"The method you called is not defined",missingAction:"API action used but no url was defined",missingSerialize:"jquery-serialize-object is required to add form data to an existing data object",missingURL:"No URL specified for api event",noReturnedValue:"The beforeSend callback must return a settings object, beforeSend ignored.",noStorage:"Caching responses locally requires session storage",parseError:"There was an error parsing your request",requiredParameter:"Missing a required URL parameter: ",statusMessage:"Server gave an error: ",timeout:"Your request timed out"},regExp:{required:/\{\$*[A-z0-9]+\}/g,optional:/\{\/\$*[A-z0-9]+\}/g},className:{loading:"loading",error:"error"},selector:{disabled:".disabled",form:"form"},metadata:{action:"action",url:"url"}}}(jQuery,window,document),function(e,t,n,i){"use strict";e.fn.state=function(t){var o,a=e(this),r=a.selector||"",s=("ontouchstart"in n.documentElement,(new Date).getTime()),c=[],l=arguments[0],u="string"==typeof l,d=[].slice.call(arguments,1);return a.each(function(){var n,m=e.isPlainObject(t)?e.extend(!0,{},e.fn.state.settings,t):e.extend({},e.fn.state.settings),f=m.error,g=m.metadata,p=m.className,v=m.namespace,h=m.states,b=m.text,y="."+v,x=v+"-module",C=e(this),w=this,k=C.data(x);n={initialize:function(){n.verbose("Initializing module"),m.automatic&&n.add.defaults(),m.context&&""!==r?e(m.context).on(r,"mouseenter"+y,n.change.text).on(r,"mouseleave"+y,n.reset.text).on(r,"click"+y,n.toggle.state):C.on("mouseenter"+y,n.change.text).on("mouseleave"+y,n.reset.text).on("click"+y,n.toggle.state),n.instantiate()},instantiate:function(){n.verbose("Storing instance of module",n),k=n,C.data(x,n)},destroy:function(){n.verbose("Destroying previous module",k),C.off(y).removeData(x)},refresh:function(){n.verbose("Refreshing selector cache"),C=e(w)},add:{defaults:function(){var o=t&&e.isPlainObject(t.states)?t.states:{};e.each(m.defaults,function(t,a){n.is[t]!==i&&n.is[t]()&&(n.verbose("Adding default states",t,w),e.extend(m.states,a,o))})}},is:{active:function(){return C.hasClass(p.active)},loading:function(){return C.hasClass(p.loading)},inactive:function(){return!C.hasClass(p.active)},state:function(e){return p[e]===i?!1:C.hasClass(p[e])},enabled:function(){return!C.is(m.filter.active)},disabled:function(){return C.is(m.filter.active)},textEnabled:function(){return!C.is(m.filter.text)},button:function(){return C.is(".button:not(a, .submit)")},input:function(){return C.is("input")},progress:function(){return C.is(".ui.progress")}},allow:function(e){n.debug("Now allowing state",e),h[e]=!0},disallow:function(e){n.debug("No longer allowing",e),h[e]=!1},allows:function(e){return h[e]||!1},enable:function(){C.removeClass(p.disabled)},disable:function(){C.addClass(p.disabled)},setState:function(e){n.allows(e)&&C.addClass(p[e])},removeState:function(e){n.allows(e)&&C.removeClass(p[e])},toggle:{state:function(){var t,o;if(n.allows("active")&&n.is.enabled()){if(n.refresh(),e.fn.api!==i)if(t=C.api("get request"),o=C.api("was cancelled"))n.debug("API Request cancelled by beforesend"),m.activateTest=function(){return!1},m.deactivateTest=function(){return!1};else if(t)return void n.listenTo(t);n.change.state()}}},listenTo:function(t){n.debug("API request detected, waiting for state signal",t),t&&(b.loading&&n.update.text(b.loading),e.when(t).then(function(){"resolved"==t.state()?(n.debug("API request succeeded"),m.activateTest=function(){return!0},m.deactivateTest=function(){return!0}):(n.debug("API request failed"),m.activateTest=function(){return!1},m.deactivateTest=function(){return!1}),n.change.state()}))},change:{state:function(){n.debug("Determining state change direction"),n.is.inactive()?n.activate():n.deactivate(),m.sync&&n.sync(),m.onChange.call(w)},text:function(){n.is.textEnabled()&&(n.is.disabled()?(n.verbose("Changing text to disabled text",b.hover),n.update.text(b.disabled)):n.is.active()?b.hover?(n.verbose("Changing text to hover text",b.hover),n.update.text(b.hover)):b.deactivate&&(n.verbose("Changing text to deactivating text",b.deactivate),n.update.text(b.deactivate)):b.hover?(n.verbose("Changing text to hover text",b.hover),n.update.text(b.hover)):b.activate&&(n.verbose("Changing text to activating text",b.activate),n.update.text(b.activate)))}},activate:function(){m.activateTest.call(w)&&(n.debug("Setting state to active"),C.addClass(p.active),n.update.text(b.active),m.onActivate.call(w))},deactivate:function(){m.deactivateTest.call(w)&&(n.debug("Setting state to inactive"),C.removeClass(p.active),n.update.text(b.inactive),m.onDeactivate.call(w))},sync:function(){n.verbose("Syncing other buttons to current state"),a.not(C).state(n.is.active()?"activate":"deactivate")},get:{text:function(){return m.selector.text?C.find(m.selector.text).text():C.html()},textFor:function(e){return b[e]||!1}},flash:{text:function(e,t,i){var o=n.get.text();n.debug("Flashing text message",e,t),e=e||m.text.flash,t=t||m.flashDuration,i=i||function(){},n.update.text(e),setTimeout(function(){n.update.text(o),i.call(w)},t)}},reset:{text:function(){var e=b.active||C.data(g.storedText),t=b.inactive||C.data(g.storedText);n.is.textEnabled()&&(n.is.active()&&e?(n.verbose("Resetting active text",e),n.update.text(e)):t&&(n.verbose("Resetting inactive text",e),n.update.text(t)))}},update:{text:function(e){var t=n.get.text();e&&e!==t?(n.debug("Updating text",e),m.selector.text?C.data(g.storedText,e).find(m.selector.text).text(e):C.data(g.storedText,e).html(e)):n.debug("Text is already set, ignoring update",e)}},setting:function(t,o){if(n.debug("Changing setting",t,o),e.isPlainObject(t))e.extend(!0,m,t);else{if(o===i)return m[t];m[t]=o}},internal:function(t,o){if(e.isPlainObject(t))e.extend(!0,n,t);else{if(o===i)return n[t];n[t]=o}},debug:function(){m.debug&&(m.performance?n.performance.log(arguments):(n.debug=Function.prototype.bind.call(console.info,console,m.name+":"),n.debug.apply(console,arguments)))},verbose:function(){m.verbose&&m.debug&&(m.performance?n.performance.log(arguments):(n.verbose=Function.prototype.bind.call(console.info,console,m.name+":"),n.verbose.apply(console,arguments)))},error:function(){n.error=Function.prototype.bind.call(console.error,console,m.name+":"),n.error.apply(console,arguments)},performance:{log:function(e){var t,i,o;m.performance&&(t=(new Date).getTime(),o=s||t,i=t-o,s=t,c.push({Name:e[0],Arguments:[].slice.call(e,1)||"",Element:w,"Execution Time":i})),clearTimeout(n.performance.timer),n.performance.timer=setTimeout(n.performance.display,500)},display:function(){var t=m.name+":",o=0;s=!1,clearTimeout(n.performance.timer),e.each(c,function(e,t){o+=t["Execution Time"]}),t+=" "+o+"ms",r&&(t+=" '"+r+"'"),(console.group!==i||console.table!==i)&&c.length>0&&(console.groupCollapsed(t),console.table?console.table(c):e.each(c,function(e,t){console.log(t.Name+": "+t["Execution Time"]+"ms")}),console.groupEnd()),c=[]}},invoke:function(t,a,r){var s,c,l,u=k;return a=a||d,r=w||r,"string"==typeof t&&u!==i&&(t=t.split(/[\. ]/),s=t.length-1,e.each(t,function(o,a){var r=o!=s?a+t[o+1].charAt(0).toUpperCase()+t[o+1].slice(1):t;if(e.isPlainObject(u[r])&&o!=s)u=u[r];else{if(u[r]!==i)return c=u[r],!1;if(!e.isPlainObject(u[a])||o==s)return u[a]!==i?(c=u[a],!1):(n.error(f.method,t),!1);u=u[a]}})),e.isFunction(c)?l=c.apply(r,a):c!==i&&(l=c),e.isArray(o)?o.push(l):o!==i?o=[o,l]:l!==i&&(o=l),c}},u?(k===i&&n.initialize(),n.invoke(l)):(k!==i&&k.invoke("destroy"),n.initialize())}),o!==i?o:this},e.fn.state.settings={name:"State",debug:!1,verbose:!1,namespace:"state",performance:!0,onActivate:function(){},onDeactivate:function(){},onChange:function(){},activateTest:function(){return!0},deactivateTest:function(){return!0},automatic:!0,sync:!1,flashDuration:1e3,filter:{text:".loading, .disabled",active:".disabled"},context:!1,error:{beforeSend:"The before send function has cancelled state change",method:"The method you called is not defined."},metadata:{promise:"promise",storedText:"stored-text"},className:{active:"active",disabled:"disabled",error:"error",loading:"loading",success:"success",warning:"warning"},selector:{text:!1},defaults:{input:{disabled:!0,loading:!0,active:!0},button:{disabled:!0,loading:!0,active:!0},progress:{active:!0,success:!0,warning:!0,error:!0}},states:{active:!0,disabled:!0,error:!0,loading:!0,success:!0,warning:!0},text:{disabled:!1,flash:!1,hover:!1,active:!1,inactive:!1,activate:!1,deactivate:!1}}}(jQuery,window,document),function(e,t,n,i){"use strict";e.fn.visibility=function(o){var a,r=e(this),s=r.selector||"",c=(new Date).getTime(),l=[],u=arguments[0],d="string"==typeof u,m=[].slice.call(arguments,1);return r.each(function(){var r,f,g,p=e.isPlainObject(o)?e.extend(!0,{},e.fn.visibility.settings,o):e.extend({},e.fn.visibility.settings),v=p.className,h=p.namespace,b=p.error,y=p.metadata,x="."+h,C="module-"+h,w=e(t),k=e(this),S=e(p.context),T=(k.selector||"",k.data(C)),A=t.requestAnimationFrame||t.mozRequestAnimationFrame||t.webkitRequestAnimationFrame||t.msRequestAnimationFrame||function(e){setTimeout(e,0)},R=this,P=!1;g={initialize:function(){g.debug("Initializing",p),g.setup.cache(),g.should.trackChanges()&&("image"==p.type&&g.setup.image(),"fixed"==p.type&&g.setup.fixed(),p.observeChanges&&g.observeChanges(),g.bind.events()),g.save.position(),g.is.visible()||g.error(b.visible,k),p.initialCheck&&g.checkVisibility(),g.instantiate()},instantiate:function(){g.debug("Storing instance",g),k.data(C,g),T=g},destroy:function(){g.verbose("Destroying previous module"),f&&f.disconnect(),w.off("load"+x,g.event.load).off("resize"+x,g.event.resize),S.off("scrollchange"+x,g.event.scrollchange),k.off(x).removeData(C)},observeChanges:function(){"MutationObserver"in t&&(f=new MutationObserver(function(e){g.verbose("DOM tree modified, updating visibility calculations"),g.timer=setTimeout(function(){g.verbose("DOM tree modified, updating sticky menu"),g.refresh()},100)}),f.observe(R,{childList:!0,subtree:!0}),g.debug("Setting up mutation observer",f))},bind:{events:function(){g.verbose("Binding visibility events to scroll and resize"),p.refreshOnLoad&&w.on("load"+x,g.event.load),w.on("resize"+x,g.event.resize),S.off("scroll"+x).on("scroll"+x,g.event.scroll).on("scrollchange"+x,g.event.scrollchange)}},event:{resize:function(){g.debug("Window resized"),p.refreshOnResize&&A(g.refresh)},load:function(){g.debug("Page finished loading"),A(g.refresh)},scroll:function(){p.throttle?(clearTimeout(g.timer),g.timer=setTimeout(function(){S.triggerHandler("scrollchange"+x,[S.scrollTop()])},p.throttle)):A(function(){S.triggerHandler("scrollchange"+x,[S.scrollTop()])})},scrollchange:function(e,t){g.checkVisibility(t)}},precache:function(t,i){t instanceof Array||(t=[t]);for(var o=t.length,a=0,r=[],s=n.createElement("img"),c=function(){a++,a>=t.length&&e.isFunction(i)&&i()};o--;)s=n.createElement("img"),s.onload=c,s.onerror=c,s.src=t[o],r.push(s)},enableCallbacks:function(){g.debug("Allowing callbacks to occur"),P=!1},disableCallbacks:function(){g.debug("Disabling all callbacks temporarily"),P=!0},should:{trackChanges:function(){return d?(g.debug("One time query, no need to bind events"),!1):(g.debug("Callbacks being attached"),!0)}},setup:{cache:function(){g.cache={occurred:{},screen:{},element:{}}},image:function(){var e=k.data(y.src);e&&(g.verbose("Lazy loading image",e),p.once=!0,p.observeChanges=!1,p.onOnScreen=function(){g.debug("Image on screen",R),g.precache(e,function(){g.set.image(e)})})},fixed:function(){g.debug("Setting up fixed"),p.once=!1,p.observeChanges=!1,p.initialCheck=!0,p.refreshOnLoad=!0,o.transition||(p.transition=!1),g.create.placeholder(),g.debug("Added placeholder",r),p.onTopPassed=function(){g.debug("Element passed, adding fixed position",k),g.show.placeholder(),g.set.fixed(),p.transition&&e.fn.transition!==i&&k.transition(p.transition,p.duration)},p.onTopPassedReverse=function(){g.debug("Element returned to position, removing fixed",k),g.hide.placeholder(),g.remove.fixed()}}},create:{placeholder:function(){g.verbose("Creating fixed position placeholder"),r=k.clone(!1).css("display","none").addClass(v.placeholder).insertAfter(k)}},show:{placeholder:function(){g.verbose("Showing placeholder"),r.css("display","block").css("visibility","hidden")}},hide:{placeholder:function(){g.verbose("Hiding placeholder"),r.css("display","none").css("visibility","")}},set:{fixed:function(){g.verbose("Setting element to fixed position"),k.addClass(v.fixed).css({position:"fixed",top:p.offset+"px",left:"auto",zIndex:"1"})},image:function(t){k.attr("src",t),p.transition?e.fn.transition!==i?k.transition(p.transition,p.duration):k.fadeIn(p.duration):k.show()}},is:{onScreen:function(){var e=g.get.elementCalculations();return e.onScreen},offScreen:function(){var e=g.get.elementCalculations();return e.offScreen},visible:function(){return g.cache&&g.cache.element?!(0===g.cache.element.width&&0===g.cache.element.offset.top):!1}},refresh:function(){g.debug("Refreshing constants (width/height)"),"fixed"==p.type&&(g.remove.fixed(),g.remove.occurred()),g.reset(),g.save.position(),p.checkOnRefresh&&g.checkVisibility(),p.onRefresh.call(R)},reset:function(){g.verbose("Reseting all cached values"),e.isPlainObject(g.cache)&&(g.cache.screen={},g.cache.element={})},checkVisibility:function(e){g.verbose("Checking visibility of element",g.cache.element),!P&&g.is.visible()&&(g.save.scroll(e),g.save.calculations(),g.passed(),g.passingReverse(),g.topVisibleReverse(),g.bottomVisibleReverse(),g.topPassedReverse(),g.bottomPassedReverse(),g.onScreen(),g.offScreen(),g.passing(),g.topVisible(),g.bottomVisible(),g.topPassed(),g.bottomPassed(),p.onUpdate&&p.onUpdate.call(R,g.get.elementCalculations()))},passed:function(t,n){var o=g.get.elementCalculations();if(t&&n)p.onPassed[t]=n;else{if(t!==i)return g.get.pixelsPassed(t)>o.pixelsPassed;o.passing&&e.each(p.onPassed,function(e,t){o.bottomVisible||o.pixelsPassed>g.get.pixelsPassed(e)?g.execute(t,e):p.once||g.remove.occurred(t)})}},onScreen:function(e){var t=g.get.elementCalculations(),n=e||p.onOnScreen,o="onScreen";return e&&(g.debug("Adding callback for onScreen",e),p.onOnScreen=e),t.onScreen?g.execute(n,o):p.once||g.remove.occurred(o),e!==i?t.onOnScreen:void 0},offScreen:function(e){var t=g.get.elementCalculations(),n=e||p.onOffScreen,o="offScreen";return e&&(g.debug("Adding callback for offScreen",e),p.onOffScreen=e),t.offScreen?g.execute(n,o):p.once||g.remove.occurred(o),e!==i?t.onOffScreen:void 0},passing:function(e){var t=g.get.elementCalculations(),n=e||p.onPassing,o="passing";return e&&(g.debug("Adding callback for passing",e),p.onPassing=e),t.passing?g.execute(n,o):p.once||g.remove.occurred(o),e!==i?t.passing:void 0},topVisible:function(e){var t=g.get.elementCalculations(),n=e||p.onTopVisible,o="topVisible";return e&&(g.debug("Adding callback for top visible",e),p.onTopVisible=e),t.topVisible?g.execute(n,o):p.once||g.remove.occurred(o),e===i?t.topVisible:void 0},bottomVisible:function(e){var t=g.get.elementCalculations(),n=e||p.onBottomVisible,o="bottomVisible";return e&&(g.debug("Adding callback for bottom visible",e),p.onBottomVisible=e),t.bottomVisible?g.execute(n,o):p.once||g.remove.occurred(o),e===i?t.bottomVisible:void 0},topPassed:function(e){var t=g.get.elementCalculations(),n=e||p.onTopPassed,o="topPassed";return e&&(g.debug("Adding callback for top passed",e),p.onTopPassed=e),t.topPassed?g.execute(n,o):p.once||g.remove.occurred(o),e===i?t.topPassed:void 0},bottomPassed:function(e){var t=g.get.elementCalculations(),n=e||p.onBottomPassed,o="bottomPassed";return e&&(g.debug("Adding callback for bottom passed",e),p.onBottomPassed=e),t.bottomPassed?g.execute(n,o):p.once||g.remove.occurred(o),e===i?t.bottomPassed:void 0},passingReverse:function(e){var t=g.get.elementCalculations(),n=e||p.onPassingReverse,o="passingReverse";return e&&(g.debug("Adding callback for passing reverse",e),p.onPassingReverse=e),t.passing?p.once||g.remove.occurred(o):g.get.occurred("passing")&&g.execute(n,o),e!==i?!t.passing:void 0},topVisibleReverse:function(e){var t=g.get.elementCalculations(),n=e||p.onTopVisibleReverse,o="topVisibleReverse";return e&&(g.debug("Adding callback for top visible reverse",e),p.onTopVisibleReverse=e),t.topVisible?p.once||g.remove.occurred(o):g.get.occurred("topVisible")&&g.execute(n,o),e===i?!t.topVisible:void 0},bottomVisibleReverse:function(e){var t=g.get.elementCalculations(),n=e||p.onBottomVisibleReverse,o="bottomVisibleReverse";return e&&(g.debug("Adding callback for bottom visible reverse",e),p.onBottomVisibleReverse=e),t.bottomVisible?p.once||g.remove.occurred(o):g.get.occurred("bottomVisible")&&g.execute(n,o),e===i?!t.bottomVisible:void 0},topPassedReverse:function(e){var t=g.get.elementCalculations(),n=e||p.onTopPassedReverse,o="topPassedReverse";return e&&(g.debug("Adding callback for top passed reverse",e),p.onTopPassedReverse=e),t.topPassed?p.once||g.remove.occurred(o):g.get.occurred("topPassed")&&g.execute(n,o),e===i?!t.onTopPassed:void 0},bottomPassedReverse:function(e){var t=g.get.elementCalculations(),n=e||p.onBottomPassedReverse,o="bottomPassedReverse";return e&&(g.debug("Adding callback for bottom passed reverse",e),p.onBottomPassedReverse=e),t.bottomPassed?p.once||g.remove.occurred(o):g.get.occurred("bottomPassed")&&g.execute(n,o),e===i?!t.bottomPassed:void 0},execute:function(e,t){var n=g.get.elementCalculations(),i=g.get.screenCalculations();e=e||!1,e&&(p.continuous?(g.debug("Callback being called continuously",t,n),e.call(R,n,i)):g.get.occurred(t)||(g.debug("Conditions met",t,n),e.call(R,n,i))),g.save.occurred(t)},remove:{fixed:function(){g.debug("Removing fixed position"),k.removeClass(v.fixed).css({position:"",top:"",left:"",zIndex:""})},occurred:function(e){if(e){var t=g.cache.occurred;t[e]!==i&&t[e]===!0&&(g.debug("Callback can now be called again",e),g.cache.occurred[e]=!1)}else g.cache.occurred={}}},save:{calculations:function(){g.verbose("Saving all calculations necessary to determine positioning"),g.save.direction(),g.save.screenCalculations(),g.save.elementCalculations()},occurred:function(e){e&&(g.cache.occurred[e]===i||g.cache.occurred[e]!==!0)&&(g.verbose("Saving callback occurred",e),g.cache.occurred[e]=!0)},scroll:function(e){e=e+p.offset||S.scrollTop()+p.offset,g.cache.scroll=e},direction:function(){var e,t=g.get.scroll(),n=g.get.lastScroll();return e=t>n&&n?"down":n>t&&n?"up":"static",g.cache.direction=e,g.cache.direction},elementPosition:function(){var e=g.cache.element,t=g.get.screenSize();return g.verbose("Saving element position"),e.fits=e.height<t.height,e.offset=k.offset(),e.width=k.outerWidth(),e.height=k.outerHeight(),g.cache.element=e,e},elementCalculations:function(){var e=g.get.screenCalculations(),t=g.get.elementPosition();return p.includeMargin?(t.margin={},t.margin.top=parseInt(k.css("margin-top"),10),t.margin.bottom=parseInt(k.css("margin-bottom"),10),t.top=t.offset.top-t.margin.top,t.bottom=t.offset.top+t.height+t.margin.bottom):(t.top=t.offset.top,t.bottom=t.offset.top+t.height),t.topVisible=e.bottom>=t.top,t.topPassed=e.top>=t.top,t.bottomVisible=e.bottom>=t.bottom,t.bottomPassed=e.top>=t.bottom,t.pixelsPassed=0,t.percentagePassed=0,t.onScreen=t.topVisible&&!t.bottomPassed,t.passing=t.topPassed&&!t.bottomPassed,t.offScreen=!t.onScreen,t.passing&&(t.pixelsPassed=e.top-t.top,t.percentagePassed=(e.top-t.top)/t.height),g.cache.element=t,g.verbose("Updated element calculations",t),t},screenCalculations:function(){var e=g.get.scroll();return g.save.direction(),g.cache.screen.top=e,g.cache.screen.bottom=e+g.cache.screen.height,g.cache.screen},screenSize:function(){g.verbose("Saving window position"),g.cache.screen={height:S.height()}},position:function(){g.save.screenSize(),g.save.elementPosition()}},get:{pixelsPassed:function(e){var t=g.get.elementCalculations();return e.search("%")>-1?t.height*(parseInt(e,10)/100):parseInt(e,10)},occurred:function(e){
return g.cache.occurred!==i?g.cache.occurred[e]||!1:!1},direction:function(){return g.cache.direction===i&&g.save.direction(),g.cache.direction},elementPosition:function(){return g.cache.element===i&&g.save.elementPosition(),g.cache.element},elementCalculations:function(){return g.cache.element===i&&g.save.elementCalculations(),g.cache.element},screenCalculations:function(){return g.cache.screen===i&&g.save.screenCalculations(),g.cache.screen},screenSize:function(){return g.cache.screen===i&&g.save.screenSize(),g.cache.screen},scroll:function(){return g.cache.scroll===i&&g.save.scroll(),g.cache.scroll},lastScroll:function(){return g.cache.screen===i?(g.debug("First scroll event, no last scroll could be found"),!1):g.cache.screen.top}},setting:function(t,n){if(e.isPlainObject(t))e.extend(!0,p,t);else{if(n===i)return p[t];p[t]=n}},internal:function(t,n){if(e.isPlainObject(t))e.extend(!0,g,t);else{if(n===i)return g[t];g[t]=n}},debug:function(){p.debug&&(p.performance?g.performance.log(arguments):(g.debug=Function.prototype.bind.call(console.info,console,p.name+":"),g.debug.apply(console,arguments)))},verbose:function(){p.verbose&&p.debug&&(p.performance?g.performance.log(arguments):(g.verbose=Function.prototype.bind.call(console.info,console,p.name+":"),g.verbose.apply(console,arguments)))},error:function(){g.error=Function.prototype.bind.call(console.error,console,p.name+":"),g.error.apply(console,arguments)},performance:{log:function(e){var t,n,i;p.performance&&(t=(new Date).getTime(),i=c||t,n=t-i,c=t,l.push({Name:e[0],Arguments:[].slice.call(e,1)||"",Element:R,"Execution Time":n})),clearTimeout(g.performance.timer),g.performance.timer=setTimeout(g.performance.display,500)},display:function(){var t=p.name+":",n=0;c=!1,clearTimeout(g.performance.timer),e.each(l,function(e,t){n+=t["Execution Time"]}),t+=" "+n+"ms",s&&(t+=" '"+s+"'"),(console.group!==i||console.table!==i)&&l.length>0&&(console.groupCollapsed(t),console.table?console.table(l):e.each(l,function(e,t){console.log(t.Name+": "+t["Execution Time"]+"ms")}),console.groupEnd()),l=[]}},invoke:function(t,n,o){var r,s,c,l=T;return n=n||m,o=R||o,"string"==typeof t&&l!==i&&(t=t.split(/[\. ]/),r=t.length-1,e.each(t,function(n,o){var a=n!=r?o+t[n+1].charAt(0).toUpperCase()+t[n+1].slice(1):t;if(e.isPlainObject(l[a])&&n!=r)l=l[a];else{if(l[a]!==i)return s=l[a],!1;if(!e.isPlainObject(l[o])||n==r)return l[o]!==i?(s=l[o],!1):(g.error(b.method,t),!1);l=l[o]}})),e.isFunction(s)?c=s.apply(o,n):s!==i&&(c=s),e.isArray(a)?a.push(c):a!==i?a=[a,c]:c!==i&&(a=c),s}},d?(T===i&&g.initialize(),T.save.scroll(),T.save.calculations(),g.invoke(u)):(T!==i&&T.invoke("destroy"),g.initialize())}),a!==i?a:this},e.fn.visibility.settings={name:"Visibility",namespace:"visibility",debug:!1,verbose:!1,performance:!0,observeChanges:!0,initialCheck:!0,refreshOnLoad:!0,refreshOnResize:!0,checkOnRefresh:!0,once:!0,continuous:!1,offset:0,includeMargin:!1,context:t,throttle:!1,type:!1,transition:"fade in",duration:1e3,onPassed:{},onOnScreen:!1,onOffScreen:!1,onPassing:!1,onTopVisible:!1,onBottomVisible:!1,onTopPassed:!1,onBottomPassed:!1,onPassingReverse:!1,onTopVisibleReverse:!1,onBottomVisibleReverse:!1,onTopPassedReverse:!1,onBottomPassedReverse:!1,onUpdate:!1,onRefresh:function(){},metadata:{src:"src"},className:{fixed:"fixed",placeholder:"placeholder"},error:{method:"The method you called is not defined.",visible:"Element is hidden, you must call refresh after element becomes visible"}}}(jQuery,window,document);


/*! UIkit 2.22.0 | http://www.getuikit.com | (c) 2014 YOOtheme | MIT License */
(function(core) {

    if (typeof define == "function" && define.amd) { // AMD

        define("uikit", function(){

            var uikit = window.UIkit || core(window, window.jQuery, window.document);

            uikit.load = function(res, req, onload, config) {

                var resources = res.split(','), load = [], i, base = (config.config && config.config.uikit && config.config.uikit.base ? config.config.uikit.base : "").replace(/\/+$/g, "");

                if (!base) {
                    throw new Error( "Please define base path to UIkit in the requirejs config." );
                }

                for (i = 0; i < resources.length; i += 1) {
                    var resource = resources[i].replace(/\./g, '/');
                    load.push(base+'/components/'+resource);
                }

                req(load, function() {
                    onload(uikit);
                });
            };

            return uikit;
        });
    }

    if (!window.jQuery) {
        throw new Error( "UIkit requires jQuery" );
    }

    if (window && window.jQuery) {
        core(window, window.jQuery, window.document);
    }


})(function(global, $, doc) {

    "use strict";

    var UI = {}, _UI = global.UIkit ? Object.create(global.UIkit) : undefined;

    UI.version = '2.22.0';

    UI.noConflict = function() {
        // restore UIkit version
        if (_UI) {
            global.UIkit = _UI;
            $.UIkit      = _UI;
            $.fn.uk      = _UI.fn;
        }

        return UI;
    };

    UI.prefix = function(str) {
        return str;
    };

    // cache jQuery
    UI.$ = $;

    UI.$doc  = UI.$(document);
    UI.$win  = UI.$(window);
    UI.$html = UI.$('html');

    UI.support = {};
    UI.support.transition = (function() {

        var transitionEnd = (function() {

            var element = doc.body || doc.documentElement,
                transEndEventNames = {
                    WebkitTransition : 'webkitTransitionEnd',
                    MozTransition    : 'transitionend',
                    OTransition      : 'oTransitionEnd otransitionend',
                    transition       : 'transitionend'
                }, name;

            for (name in transEndEventNames) {
                if (element.style[name] !== undefined) return transEndEventNames[name];
            }
        }());

        return transitionEnd && { end: transitionEnd };
    })();

    UI.support.animation = (function() {

        var animationEnd = (function() {

            var element = doc.body || doc.documentElement,
                animEndEventNames = {
                    WebkitAnimation : 'webkitAnimationEnd',
                    MozAnimation    : 'animationend',
                    OAnimation      : 'oAnimationEnd oanimationend',
                    animation       : 'animationend'
                }, name;

            for (name in animEndEventNames) {
                if (element.style[name] !== undefined) return animEndEventNames[name];
            }
        }());

        return animationEnd && { end: animationEnd };
    })();

    // requestAnimationFrame polyfill
    // https://gist.github.com/paulirish/1579671
    (function(){

        var lastTime = 0;

        global.requestAnimationFrame = global.requestAnimationFrame || global.webkitRequestAnimationFrame || function(callback, element) {
            var currTime = new Date().getTime();
            var timeToCall = Math.max(0, 16 - (currTime - lastTime));
            var id = global.setTimeout(function() { callback(currTime + timeToCall); }, timeToCall);
            lastTime = currTime + timeToCall;
            return id;
        };

        if (!global.cancelAnimationFrame) {

            global.cancelAnimationFrame = function(id) {
                clearTimeout(id);
            };
        }

    })();

    UI.support.touch = (
        ('ontouchstart' in document) ||
        (global.DocumentTouch && document instanceof global.DocumentTouch)  ||
        (global.navigator.msPointerEnabled && global.navigator.msMaxTouchPoints > 0) || //IE 10
        (global.navigator.pointerEnabled && global.navigator.maxTouchPoints > 0) || //IE >=11
        false
    );

    UI.support.mutationobserver = (global.MutationObserver || global.WebKitMutationObserver || null);

    UI.Utils = {};

    UI.Utils.isFullscreen = function() {
        return document.webkitFullscreenElement || document.mozFullScreenElement ||document.msFullscreenElement || document.fullscreenElement || false;
    };

    UI.Utils.str2json = function(str, notevil) {
        try {
            if (notevil) {
                return JSON.parse(str
                    // wrap keys without quote with valid double quote
                    .replace(/([\$\w]+)\s*:/g, function(_, $1){return '"'+$1+'":';})
                    // replacing single quote wrapped ones to double quote
                    .replace(/'([^']+)'/g, function(_, $1){return '"'+$1+'"';})
                );
            } else {
                return (new Function("", "var json = " + str + "; return JSON.parse(JSON.stringify(json));"))();
            }
        } catch(e) { return false; }
    };

    UI.Utils.debounce = function(func, wait, immediate) {
        var timeout;
        return function() {
            var context = this, args = arguments;
            var later = function() {
                timeout = null;
                if (!immediate) func.apply(context, args);
            };
            var callNow = immediate && !timeout;
            clearTimeout(timeout);
            timeout = setTimeout(later, wait);
            if (callNow) func.apply(context, args);
        };
    };

    UI.Utils.removeCssRules = function(selectorRegEx) {
        var idx, idxs, stylesheet, _i, _j, _k, _len, _len1, _len2, _ref;

        if(!selectorRegEx) return;

        setTimeout(function(){
            try {
              _ref = document.styleSheets;
              for (_i = 0, _len = _ref.length; _i < _len; _i++) {
                stylesheet = _ref[_i];
                idxs = [];
                stylesheet.cssRules = stylesheet.cssRules;
                for (idx = _j = 0, _len1 = stylesheet.cssRules.length; _j < _len1; idx = ++_j) {
                  if (stylesheet.cssRules[idx].type === CSSRule.STYLE_RULE && selectorRegEx.test(stylesheet.cssRules[idx].selectorText)) {
                    idxs.unshift(idx);
                  }
                }
                for (_k = 0, _len2 = idxs.length; _k < _len2; _k++) {
                  stylesheet.deleteRule(idxs[_k]);
                }
              }
            } catch (_error) {}
        }, 0);
    };

    UI.Utils.isInView = function(element, options) {

        var $element = $(element);

        if (!$element.is(':visible')) {
            return false;
        }

        var window_left = UI.$win.scrollLeft(), window_top = UI.$win.scrollTop(), offset = $element.offset(), left = offset.left, top = offset.top;

        options = $.extend({topoffset:0, leftoffset:0}, options);

        if (top + $element.height() >= window_top && top - options.topoffset <= window_top + UI.$win.height() &&
            left + $element.width() >= window_left && left - options.leftoffset <= window_left + UI.$win.width()) {
          return true;
        } else {
          return false;
        }
    };

    UI.Utils.checkDisplay = function(context, initanimation) {

        var elements = UI.$('[data-uk-margin], [data-uk-grid-match], [data-uk-grid-margin], [data-uk-check-display]', context || document), animated;

        if (context && !elements.length) {
            elements = $(context);
        }

        elements.trigger('display.uk.check');

        // fix firefox / IE animations
        if (initanimation) {

            if (typeof(initanimation)!='string') {
                initanimation = '[class*="uk-animation-"]';
            }

            elements.find(initanimation).each(function(){

                var ele  = UI.$(this),
                    cls  = ele.attr('class'),
                    anim = cls.match(/uk\-animation\-(.+)/);

                ele.removeClass(anim[0]).width();

                ele.addClass(anim[0]);
            });
        }

        return elements;
    };

    UI.Utils.options = function(string) {

        if ($.isPlainObject(string)) return string;

        var start = (string ? string.indexOf("{") : -1), options = {};

        if (start != -1) {
            try {
                options = UI.Utils.str2json(string.substr(start));
            } catch (e) {}
        }

        return options;
    };

    UI.Utils.animate = function(element, cls) {

        var d = $.Deferred();

        element = UI.$(element);
        cls     = cls;

        element.css('display', 'none').addClass(cls).one(UI.support.animation.end, function() {
            element.removeClass(cls);
            d.resolve();
        }).width();

        element.css('display', '');

        return d.promise();
    };

    UI.Utils.uid = function(prefix) {
        return (prefix || 'id') + (new Date().getTime())+"RAND"+(Math.ceil(Math.random() * 100000));
    };

    UI.Utils.template = function(str, data) {

        var tokens = str.replace(/\n/g, '\\n').replace(/\{\{\{\s*(.+?)\s*\}\}\}/g, "{{!$1}}").split(/(\{\{\s*(.+?)\s*\}\})/g),
            i=0, toc, cmd, prop, val, fn, output = [], openblocks = 0;

        while(i < tokens.length) {

            toc = tokens[i];

            if(toc.match(/\{\{\s*(.+?)\s*\}\}/)) {
                i = i + 1;
                toc  = tokens[i];
                cmd  = toc[0];
                prop = toc.substring(toc.match(/^(\^|\#|\!|\~|\:)/) ? 1:0);

                switch(cmd) {
                    case '~':
                        output.push("for(var $i=0;$i<"+prop+".length;$i++) { var $item = "+prop+"[$i];");
                        openblocks++;
                        break;
                    case ':':
                        output.push("for(var $key in "+prop+") { var $val = "+prop+"[$key];");
                        openblocks++;
                        break;
                    case '#':
                        output.push("if("+prop+") {");
                        openblocks++;
                        break;
                    case '^':
                        output.push("if(!"+prop+") {");
                        openblocks++;
                        break;
                    case '/':
                        output.push("}");
                        openblocks--;
                        break;
                    case '!':
                        output.push("__ret.push("+prop+");");
                        break;
                    default:
                        output.push("__ret.push(escape("+prop+"));");
                        break;
                }
            } else {
                output.push("__ret.push('"+toc.replace(/\'/g, "\\'")+"');");
            }
            i = i + 1;
        }

        fn  = new Function('$data', [
            'var __ret = [];',
            'try {',
            'with($data){', (!openblocks ? output.join('') : '__ret = ["Not all blocks are closed correctly."]'), '};',
            '}catch(e){__ret = [e.message];}',
            'return __ret.join("").replace(/\\n\\n/g, "\\n");',
            "function escape(html) { return String(html).replace(/&/g, '&amp;').replace(/\"/g, '&quot;').replace(/</g, '&lt;').replace(/>/g, '&gt;');}"
        ].join("\n"));

        return data ? fn(data) : fn;
    };

    UI.Utils.events       = {};
    UI.Utils.events.click = UI.support.touch ? 'tap' : 'click';

    global.UIkit = UI;

    // deprecated

    UI.fn = function(command, options) {

        var args = arguments, cmd = command.match(/^([a-z\-]+)(?:\.([a-z]+))?/i), component = cmd[1], method = cmd[2];

        if (!UI[component]) {
            $.error("UIkit component [" + component + "] does not exist.");
            return this;
        }

        return this.each(function() {
            var $this = $(this), data = $this.data(component);
            if (!data) $this.data(component, (data = UI[component](this, method ? undefined : options)));
            if (method) data[method].apply(data, Array.prototype.slice.call(args, 1));
        });
    };

    $.UIkit          = UI;
    $.fn.uk          = UI.fn;

    UI.langdirection = UI.$html.attr("dir") == "rtl" ? "right" : "left";

    UI.components    = {};

    UI.component = function(name, def) {

        var fn = function(element, options) {

            var $this = this;

            this.UIkit   = UI;
            this.element = element ? UI.$(element) : null;
            this.options = $.extend(true, {}, this.defaults, options);
            this.plugins = {};

            if (this.element) {
                this.element.data(name, this);
            }

            this.init();

            (this.options.plugins.length ? this.options.plugins : Object.keys(fn.plugins)).forEach(function(plugin) {

                if (fn.plugins[plugin].init) {
                    fn.plugins[plugin].init($this);
                    $this.plugins[plugin] = true;
                }

            });

            this.trigger('init.uk.component', [name, this]);

            return this;
        };

        fn.plugins = {};

        $.extend(true, fn.prototype, {

            defaults : {plugins: []},

            boot: function(){},
            init: function(){},

            on: function(a1,a2,a3){
                return UI.$(this.element || this).on(a1,a2,a3);
            },

            one: function(a1,a2,a3){
                return UI.$(this.element || this).one(a1,a2,a3);
            },

            off: function(evt){
                return UI.$(this.element || this).off(evt);
            },

            trigger: function(evt, params) {
                return UI.$(this.element || this).trigger(evt, params);
            },

            find: function(selector) {
                return UI.$(this.element ? this.element: []).find(selector);
            },

            proxy: function(obj, methods) {

                var $this = this;

                methods.split(' ').forEach(function(method) {
                    if (!$this[method]) $this[method] = function() { return obj[method].apply(obj, arguments); };
                });
            },

            mixin: function(obj, methods) {

                var $this = this;

                methods.split(' ').forEach(function(method) {
                    if (!$this[method]) $this[method] = obj[method].bind($this);
                });
            },

            option: function() {

                if (arguments.length == 1) {
                    return this.options[arguments[0]] || undefined;
                } else if (arguments.length == 2) {
                    this.options[arguments[0]] = arguments[1];
                }
            }

        }, def);

        this.components[name] = fn;

        this[name] = function() {

            var element, options;

            if (arguments.length) {

                switch(arguments.length) {
                    case 1:

                        if (typeof arguments[0] === "string" || arguments[0].nodeType || arguments[0] instanceof jQuery) {
                            element = $(arguments[0]);
                        } else {
                            options = arguments[0];
                        }

                        break;
                    case 2:

                        element = $(arguments[0]);
                        options = arguments[1];
                        break;
                }
            }

            if (element && element.data(name)) {
                return element.data(name);
            }

            return (new UI.components[name](element, options));
        };

        if (UI.domready) {
            UI.component.boot(name);
        }

        return fn;
    };

    UI.plugin = function(component, name, def) {
        this.components[component].plugins[name] = def;
    };

    UI.component.boot = function(name) {

        if (UI.components[name].prototype && UI.components[name].prototype.boot && !UI.components[name].booted) {
            UI.components[name].prototype.boot.apply(UI, []);
            UI.components[name].booted = true;
        }
    };

    UI.component.bootComponents = function() {

        for (var component in UI.components) {
            UI.component.boot(component);
        }
    };


    // DOM mutation save ready helper function

    UI.domObservers = [];
    UI.domready     = false;

    UI.ready = function(fn) {

        UI.domObservers.push(fn);

        if (UI.domready) {
            fn(document);
        }
    };

    UI.on = function(a1,a2,a3){

        if (a1 && a1.indexOf('ready.uk.dom') > -1 && UI.domready) {
            a2.apply(UI.$doc);
        }

        return UI.$doc.on(a1,a2,a3);
    };

    UI.one = function(a1,a2,a3){

        if (a1 && a1.indexOf('ready.uk.dom') > -1 && UI.domready) {
            a2.apply(UI.$doc);
            return UI.$doc;
        }

        return UI.$doc.one(a1,a2,a3);
    };

    UI.trigger = function(evt, params) {
        return UI.$doc.trigger(evt, params);
    };

    UI.domObserve = function(selector, fn) {

        if(!UI.support.mutationobserver) return;

        fn = fn || function() {};

        UI.$(selector).each(function() {

            var element  = this,
                $element = UI.$(element);

            if ($element.data('observer')) {
                return;
            }

            try {

                var observer = new UI.support.mutationobserver(UI.Utils.debounce(function(mutations) {
                    fn.apply(element, []);
                    $element.trigger('changed.uk.dom');
                }, 50));

                // pass in the target node, as well as the observer options
                observer.observe(element, { childList: true, subtree: true });

                $element.data('observer', observer);

            } catch(e) {}
        });
    };

    UI.init = function(root) {

        root = root || document;

        UI.domObservers.forEach(function(fn){
            fn(root);
        });
    };

    UI.on('domready.uk.dom', function(){

        UI.init();

        if (UI.domready) UI.Utils.checkDisplay();
    });

    $(function(){

        UI.$body = UI.$('body');

        UI.ready(function(context){
            UI.domObserve('[data-uk-observe]');
        });

        UI.on('changed.uk.dom', function(e) {
            UI.init(e.target);
            UI.Utils.checkDisplay(e.target);
        });

        UI.trigger('beforeready.uk.dom');

        UI.component.bootComponents();

        // custom scroll observer
        setInterval((function(){

            var memory = {x: window.pageXOffset, y:window.pageYOffset}, dir;

            var fn = function(){

                if (memory.x != window.pageXOffset || memory.y != window.pageYOffset) {

                    dir = {x: 0 , y: 0};

                    if (window.pageXOffset != memory.x) dir.x = window.pageXOffset > memory.x ? 1:-1;
                    if (window.pageYOffset != memory.y) dir.y = window.pageYOffset > memory.y ? 1:-1;

                    memory = {
                        "dir": dir, "x": window.pageXOffset, "y": window.pageYOffset
                    };

                    UI.$doc.trigger('scrolling.uk.document', [memory]);
                }
            };

            if (UI.support.touch) {
                UI.$html.on('touchmove touchend MSPointerMove MSPointerUp pointermove pointerup', fn);
            }

            if (memory.x || memory.y) fn();

            return fn;

        })(), 15);

        // run component init functions on dom
        UI.trigger('domready.uk.dom');

        if (UI.support.touch) {

            // remove css hover rules for touch devices
            // UI.Utils.removeCssRules(/\.uk-(?!navbar).*:hover/);

            // viewport unit fix for uk-height-viewport - should be fixed in iOS 8
            if (navigator.userAgent.match(/(iPad|iPhone|iPod)/g)) {

                UI.$win.on('load orientationchange resize', UI.Utils.debounce((function(){

                    var fn = function() {
                        $('.uk-height-viewport').css('height', window.innerHeight);
                        return fn;
                    };

                    return fn();

                })(), 100));
            }
        }

        UI.trigger('afterready.uk.dom');

        // mark that domready is left behind
        UI.domready = true;
    });

    // add touch identifier class
    UI.$html.addClass(UI.support.touch ? "uk-touch" : "uk-notouch");

    // add uk-hover class on tap to support overlays on touch devices
    if (UI.support.touch) {

        var hoverset = false,
            exclude,
            hovercls = 'uk-hover',
            selector = '.uk-overlay, .uk-overlay-hover, .uk-overlay-toggle, .uk-animation-hover, .uk-has-hover';

        UI.$html.on('mouseenter touchstart MSPointerDown pointerdown', selector, function() {

            if (hoverset) $('.'+hovercls).removeClass(hovercls);

            hoverset = $(this).addClass(hovercls);

        }).on('mouseleave touchend MSPointerUp pointerup', function(e) {

            exclude = $(e.target).parents(selector);

            if (hoverset) {
                hoverset.not(exclude).removeClass(hovercls);
            }
        });
    }

    return UI;
});
/*! UIkit 2.22.0 | http://www.getuikit.com | (c) 2014 YOOtheme | MIT License */
//  Based on Zeptos touch.js
//  https://raw.github.com/madrobby/zepto/master/src/touch.js
//  Zepto.js may be freely distributed under the MIT license.

;(function($){

  if ($.fn.swipeLeft) {
    return;
  }


  var touch = {}, touchTimeout, tapTimeout, swipeTimeout, longTapTimeout, longTapDelay = 750, gesture;

  function swipeDirection(x1, x2, y1, y2) {
    return Math.abs(x1 - x2) >= Math.abs(y1 - y2) ? (x1 - x2 > 0 ? 'Left' : 'Right') : (y1 - y2 > 0 ? 'Up' : 'Down');
  }

  function longTap() {
    longTapTimeout = null;
    if (touch.last) {
      touch.el.trigger('longTap');
      touch = {};
    }
  }

  function cancelLongTap() {
    if (longTapTimeout) clearTimeout(longTapTimeout);
    longTapTimeout = null;
  }

  function cancelAll() {
    if (touchTimeout)   clearTimeout(touchTimeout);
    if (tapTimeout)     clearTimeout(tapTimeout);
    if (swipeTimeout)   clearTimeout(swipeTimeout);
    if (longTapTimeout) clearTimeout(longTapTimeout);
    touchTimeout = tapTimeout = swipeTimeout = longTapTimeout = null;
    touch = {};
  }

  function isPrimaryTouch(event){
    return event.pointerType == event.MSPOINTER_TYPE_TOUCH && event.isPrimary;
  }

  $(function(){
    var now, delta, deltaX = 0, deltaY = 0, firstTouch;

    if ('MSGesture' in window) {
      gesture = new MSGesture();
      gesture.target = document.body;
    }

    $(document)
      .on('MSGestureEnd gestureend', function(e){

        var swipeDirectionFromVelocity = e.originalEvent.velocityX > 1 ? 'Right' : e.originalEvent.velocityX < -1 ? 'Left' : e.originalEvent.velocityY > 1 ? 'Down' : e.originalEvent.velocityY < -1 ? 'Up' : null;

        if (swipeDirectionFromVelocity) {
          touch.el.trigger('swipe');
          touch.el.trigger('swipe'+ swipeDirectionFromVelocity);
        }
      })
      // MSPointerDown: for IE10
      // pointerdown: for IE11
      .on('touchstart MSPointerDown pointerdown', function(e){

        if(e.type == 'MSPointerDown' && !isPrimaryTouch(e.originalEvent)) return;

        firstTouch = (e.type == 'MSPointerDown' || e.type == 'pointerdown') ? e : e.originalEvent.touches[0];

        now      = Date.now();
        delta    = now - (touch.last || now);
        touch.el = $('tagName' in firstTouch.target ? firstTouch.target : firstTouch.target.parentNode);

        if(touchTimeout) clearTimeout(touchTimeout);

        touch.x1 = firstTouch.pageX;
        touch.y1 = firstTouch.pageY;

        if (delta > 0 && delta <= 250) touch.isDoubleTap = true;

        touch.last = now;
        longTapTimeout = setTimeout(longTap, longTapDelay);

        // adds the current touch contact for IE gesture recognition
        if (gesture && ( e.type == 'MSPointerDown' || e.type == 'pointerdown' || e.type == 'touchstart' ) ) {
          gesture.addPointer(e.originalEvent.pointerId);
        }

      })
      // MSPointerMove: for IE10
      // pointermove: for IE11
      .on('touchmove MSPointerMove pointermove', function(e){

        if (e.type == 'MSPointerMove' && !isPrimaryTouch(e.originalEvent)) return;

        firstTouch = (e.type == 'MSPointerMove' || e.type == 'pointermove') ? e : e.originalEvent.touches[0];

        cancelLongTap();
        touch.x2 = firstTouch.pageX;
        touch.y2 = firstTouch.pageY;

        deltaX += Math.abs(touch.x1 - touch.x2);
        deltaY += Math.abs(touch.y1 - touch.y2);
      })
      // MSPointerUp: for IE10
      // pointerup: for IE11
      .on('touchend MSPointerUp pointerup', function(e){

        if (e.type == 'MSPointerUp' && !isPrimaryTouch(e.originalEvent)) return;

        cancelLongTap();

        // swipe
        if ((touch.x2 && Math.abs(touch.x1 - touch.x2) > 30) || (touch.y2 && Math.abs(touch.y1 - touch.y2) > 30)){

          swipeTimeout = setTimeout(function() {
            touch.el.trigger('swipe');
            touch.el.trigger('swipe' + (swipeDirection(touch.x1, touch.x2, touch.y1, touch.y2)));
            touch = {};
          }, 0);

        // normal tap
        } else if ('last' in touch) {

          // don't fire tap when delta position changed by more than 30 pixels,
          // for instance when moving to a point and back to origin
          if (isNaN(deltaX) || (deltaX < 30 && deltaY < 30)) {
            // delay by one tick so we can cancel the 'tap' event if 'scroll' fires
            // ('tap' fires before 'scroll')
            tapTimeout = setTimeout(function() {

              // trigger universal 'tap' with the option to cancelTouch()
              // (cancelTouch cancels processing of single vs double taps for faster 'tap' response)
              var event = $.Event('tap');
              event.cancelTouch = cancelAll;
              touch.el.trigger(event);

              // trigger double tap immediately
              if (touch.isDoubleTap) {
                touch.el.trigger('doubleTap');
                touch = {};
              }

              // trigger single tap after 250ms of inactivity
              else {
                touchTimeout = setTimeout(function(){
                  touchTimeout = null;
                  touch.el.trigger('singleTap');
                  touch = {};
                }, 250);
              }
            }, 0);
          } else {
            touch = {};
          }
          deltaX = deltaY = 0;
        }
      })
      // when the browser window loses focus,
      // for example when a modal dialog is shown,
      // cancel all ongoing events
      .on('touchcancel MSPointerCancel', cancelAll);

    // scrolling the window indicates intention of the user
    // to scroll, not tap or swipe, so cancel all ongoing events
    $(window).on('scroll', cancelAll);
  });

  ['swipe', 'swipeLeft', 'swipeRight', 'swipeUp', 'swipeDown', 'doubleTap', 'tap', 'singleTap', 'longTap'].forEach(function(eventName){
    $.fn[eventName] = function(callback){ return $(this).on(eventName, callback); };
  });
})(jQuery);
/*! UIkit 2.22.0 | http://www.getuikit.com | (c) 2014 YOOtheme | MIT License */
(function(UI) {

    "use strict";

    var stacks = [];

    UI.component('stackMargin', {

        defaults: {
            'cls': 'uk-margin-small-top'
        },

        boot: function() {

            // init code
            UI.ready(function(context) {

                UI.$("[data-uk-margin]", context).each(function() {

                    var ele = UI.$(this), obj;

                    if (!ele.data("stackMargin")) {
                        obj = UI.stackMargin(ele, UI.Utils.options(ele.attr("data-uk-margin")));
                    }
                });
            });
        },

        init: function() {

            var $this = this;

            this.columns = [];

            UI.$win.on('resize orientationchange', (function() {

                var fn = function() {
                    $this.process();
                };

                UI.$(function() {
                    fn();
                    UI.$win.on("load", fn);
                });

                return UI.Utils.debounce(fn, 20);
            })());

            UI.$html.on("changed.uk.dom", function(e) {
                $this.process();
            });

            this.on("display.uk.check", function(e) {
                if (this.element.is(":visible")) this.process();
            }.bind(this));

            stacks.push(this);
        },

        process: function() {

            this.columns = this.element.children();

            UI.Utils.stackMargin(this.columns, this.options);

            return this;
        },

        revert: function() {
            this.columns.removeClass(this.options.cls);
            return this;
        }
    });


    // responsive element e.g. iframes

    (function(){

        var elements = [], check = function(ele) {

            if (!ele.is(':visible')) return;

            var width  = ele.parent().width(),
                iwidth = ele.data('width'),
                ratio  = (width / iwidth),
                height = Math.floor(ratio * ele.data('height'));

            ele.css({'height': (width < iwidth) ? height : ele.data('height')});
        };

        UI.component('responsiveElement', {

            defaults: {},

            boot: function() {

                // init code
                UI.ready(function(context) {

                    UI.$("iframe.uk-responsive-width, [data-uk-responsive]", context).each(function() {

                        var ele = UI.$(this), obj;

                        if (!ele.data("responsiveIframe")) {
                            obj = UI.responsiveElement(ele, {});
                        }
                    });
                });
            },

            init: function() {

                var ele = this.element;

                if (ele.attr('width') && ele.attr('height')) {

                    ele.data({

                        'width' : ele.attr('width'),
                        'height': ele.attr('height')

                    }).on('display.uk.check', function(){
                        check(ele);
                    });

                    check(ele);

                    elements.push(ele);
                }
            }
        });

        UI.$win.on('resize load', UI.Utils.debounce(function(){

            elements.forEach(function(ele){
                check(ele);
            });

        }, 15));

    })();



    // helper

    UI.Utils.stackMargin = function(elements, options) {

        options = UI.$.extend({
            'cls': 'uk-margin-small-top'
        }, options);

        options.cls = options.cls;

        elements = UI.$(elements).removeClass(options.cls);

        var skip         = false,
            firstvisible = elements.filter(":visible:first"),
            offset       = firstvisible.length ? (firstvisible.position().top + firstvisible.outerHeight()) - 1 : false; // (-1): weird firefox bug when parent container is display:flex

        if (offset === false) return;

        elements.each(function() {

            var column = UI.$(this);

            if (column.is(":visible")) {

                if (skip) {
                    column.addClass(options.cls);
                } else {

                    if (column.position().top >= offset) {
                        skip = column.addClass(options.cls);
                    }
                }
            }
        });
    };

    UI.Utils.matchHeights = function(elements, options) {

        elements = UI.$(elements).css('min-height', '');
        options  = UI.$.extend({ row : true }, options);

        var matchHeights = function(group){

            if (group.length < 2) return;

            var max = 0;

            group.each(function() {
                max = Math.max(max, UI.$(this).outerHeight());
            }).each(function() {

                var element = UI.$(this),
                    height  = max - (element.css('box-sizing') == 'border-box' ? 0 : (element.outerHeight() - element.height()));

                element.css('min-height', height + 'px');
            });
        };

        if (options.row) {

            elements.first().width(); // force redraw

            setTimeout(function(){

                var lastoffset = false, group = [];

                elements.each(function() {

                    var ele = UI.$(this), offset = ele.offset().top;

                    if (offset != lastoffset && group.length) {

                        matchHeights(UI.$(group));
                        group  = [];
                        offset = ele.offset().top;
                    }

                    group.push(ele);
                    lastoffset = offset;
                });

                if (group.length) {
                    matchHeights(UI.$(group));
                }

            }, 0);

        } else {
            matchHeights(elements);
        }
    };

})(UIkit);
/*! UIkit 2.22.0 | http://www.getuikit.com | (c) 2014 YOOtheme | MIT License */
(function(UI) {

    "use strict";

    UI.component('smoothScroll', {

        boot: function() {

            // init code
            UI.$html.on("click.smooth-scroll.uikit", "[data-uk-smooth-scroll]", function(e) {
                var ele = UI.$(this);

                if (!ele.data("smoothScroll")) {
                    var obj = UI.smoothScroll(ele, UI.Utils.options(ele.attr("data-uk-smooth-scroll")));
                    ele.trigger("click");
                }

                return false;
            });
        },

        init: function() {

            var $this = this;

            this.on("click", function(e) {
                e.preventDefault();
                scrollToElement(UI.$(this.hash).length ? UI.$(this.hash) : UI.$("body"), $this.options);
            });
        }
    });

    function scrollToElement(ele, options) {

        options = UI.$.extend({
            duration: 1000,
            transition: 'easeOutExpo',
            offset: 0,
            complete: function(){}
        }, options);

        // get / set parameters
        var target    = ele.offset().top - options.offset,
            docheight = UI.$doc.height(),
            winheight = window.innerHeight;

        if ((target + winheight) > docheight) {
            target = docheight - winheight;
        }

        // animate to target, fire callback when done
        UI.$("html,body").stop().animate({scrollTop: target}, options.duration, options.transition).promise().done(options.complete);
    }

    UI.Utils.scrollToElement = scrollToElement;

    if (!UI.$.easing.easeOutExpo) {
        UI.$.easing.easeOutExpo = function(x, t, b, c, d) { return (t == d) ? b + c : c * (-Math.pow(2, -10 * t / d) + 1) + b; };
    }

})(UIkit);
/*! UIkit 2.22.0 | http://www.getuikit.com | (c) 2014 YOOtheme | MIT License */
(function(UI) {

    "use strict";

    var $win           = UI.$win,
        $doc           = UI.$doc,
        scrollspies    = [],
        checkScrollSpy = function() {
            for(var i=0; i < scrollspies.length; i++) {
                window.requestAnimationFrame.apply(window, [scrollspies[i].check]);
            }
        };

    UI.component('scrollspy', {

        defaults: {
            "target"     : false,
            "cls"        : "uk-scrollspy-inview",
            "initcls"    : "uk-scrollspy-init-inview",
            "topoffset"  : 0,
            "leftoffset" : 0,
            "repeat"     : false,
            "delay"      : 0
        },

        boot: function() {

            // listen to scroll and resize
            $doc.on("scrolling.uk.document", checkScrollSpy);
            $win.on("load resize orientationchange", UI.Utils.debounce(checkScrollSpy, 50));

            // init code
            UI.ready(function(context) {

                UI.$("[data-uk-scrollspy]", context).each(function() {

                    var element = UI.$(this);

                    if (!element.data("scrollspy")) {
                        var obj = UI.scrollspy(element, UI.Utils.options(element.attr("data-uk-scrollspy")));
                    }
                });
            });
        },

        init: function() {

            var $this = this, inviewstate, initinview, togglecls = this.options.cls.split(/,/), fn = function(){

                var elements     = $this.options.target ? $this.element.find($this.options.target) : $this.element,
                    delayIdx     = elements.length === 1 ? 1 : 0,
                    toggleclsIdx = 0;

                elements.each(function(idx){

                    var element     = UI.$(this),
                        inviewstate = element.data('inviewstate'),
                        inview      = UI.Utils.isInView(element, $this.options),
                        toggle      = element.data('ukScrollspyCls') || togglecls[toggleclsIdx].trim();

                    if (inview && !inviewstate && !element.data('scrollspy-idle')) {

                        if (!initinview) {
                            element.addClass($this.options.initcls);
                            $this.offset = element.offset();
                            initinview = true;

                            element.trigger("init.uk.scrollspy");
                        }

                        element.data('scrollspy-idle', setTimeout(function(){

                            element.addClass("uk-scrollspy-inview").toggleClass(toggle).width();
                            element.trigger("inview.uk.scrollspy");

                            element.data('scrollspy-idle', false);
                            element.data('inviewstate', true);

                        }, $this.options.delay * delayIdx));

                        delayIdx++;
                    }

                    if (!inview && inviewstate && $this.options.repeat) {

                        if (element.data('scrollspy-idle')) {
                            clearTimeout(element.data('scrollspy-idle'));
                        }

                        element.removeClass("uk-scrollspy-inview").toggleClass(toggle);
                        element.data('inviewstate', false);

                        element.trigger("outview.uk.scrollspy");
                    }

                    toggleclsIdx = togglecls[toggleclsIdx + 1] ? (toggleclsIdx + 1) : 0;

                });
            };

            fn();

            this.check = fn;

            scrollspies.push(this);
        }
    });


    var scrollspynavs = [],
        checkScrollSpyNavs = function() {
            for(var i=0; i < scrollspynavs.length; i++) {
                window.requestAnimationFrame.apply(window, [scrollspynavs[i].check]);
            }
        };

    UI.component('scrollspynav', {

        defaults: {
            "cls"          : 'uk-active',
            "closest"      : false,
            "topoffset"    : 0,
            "leftoffset"   : 0,
            "smoothscroll" : false
        },

        boot: function() {

            // listen to scroll and resize
            $doc.on("scrolling.uk.document", checkScrollSpyNavs);
            $win.on("resize orientationchange", UI.Utils.debounce(checkScrollSpyNavs, 50));

            // init code
            UI.ready(function(context) {

                UI.$("[data-uk-scrollspy-nav]", context).each(function() {

                    var element = UI.$(this);

                    if (!element.data("scrollspynav")) {
                        var obj = UI.scrollspynav(element, UI.Utils.options(element.attr("data-uk-scrollspy-nav")));
                    }
                });
            });
        },

        init: function() {

            var ids     = [],
                links   = this.find("a[href^='#']").each(function(){ ids.push(UI.$(this).attr("href")); }),
                targets = UI.$(ids.join(",")),

                clsActive  = this.options.cls,
                clsClosest = this.options.closest || this.options.closest;

            var $this = this, inviews, fn = function(){

                inviews = [];

                for (var i=0 ; i < targets.length ; i++) {
                    if (UI.Utils.isInView(targets.eq(i), $this.options)) {
                        inviews.push(targets.eq(i));
                    }
                }

                if (inviews.length) {

                    var navitems,
                        scrollTop = $win.scrollTop(),
                        target = (function(){
                            for(var i=0; i< inviews.length;i++){
                                if(inviews[i].offset().top >= scrollTop){
                                    return inviews[i];
                                }
                            }
                        })();

                    if (!target) return;

                    if ($this.options.closest) {
                        links.closest(clsClosest).removeClass(clsActive);
                        navitems = links.filter("a[href='#"+target.attr("id")+"']").closest(clsClosest).addClass(clsActive);
                    } else {
                        navitems = links.removeClass(clsActive).filter("a[href='#"+target.attr("id")+"']").addClass(clsActive);
                    }

                    $this.element.trigger("inview.uk.scrollspynav", [target, navitems]);
                }
            };

            if (this.options.smoothscroll && UI.smoothScroll) {
                links.each(function(){
                    UI.smoothScroll(this, $this.options.smoothscroll);
                });
            }

            fn();

            this.element.data("scrollspynav", this);

            this.check = fn;
            scrollspynavs.push(this);

        }
    });

})(UIkit);
/*! UIkit 2.22.0 | http://www.getuikit.com | (c) 2014 YOOtheme | MIT License */
(function(UI){

    "use strict";

    var toggles = [];

    UI.component('toggle', {

        defaults: {
            target    : false,
            cls       : 'uk-hidden',
            animation : false,
            duration  : 200
        },

        boot: function(){

            // init code
            UI.ready(function(context) {

                UI.$("[data-uk-toggle]", context).each(function() {
                    var ele = UI.$(this);

                    if (!ele.data("toggle")) {
                        var obj = UI.toggle(ele, UI.Utils.options(ele.attr("data-uk-toggle")));
                    }
                });

                setTimeout(function(){

                    toggles.forEach(function(toggle){
                        toggle.getToggles();
                    });

                }, 0);
            });
        },

        init: function() {

            var $this = this;

            this.aria = (this.options.cls.indexOf('uk-hidden') !== -1);

            this.getToggles();

            this.on("click", function(e) {
                if ($this.element.is('a[href="#"]')) e.preventDefault();
                $this.toggle();
            });

            toggles.push(this);
        },

        toggle: function() {

            if(!this.totoggle.length) return;

            if (this.options.animation && UI.support.animation) {

                var $this = this, animations = this.options.animation.split(',');

                if (animations.length == 1) {
                    animations[1] = animations[0];
                }

                animations[0] = animations[0].trim();
                animations[1] = animations[1].trim();

                this.totoggle.css('animation-duration', this.options.duration+'ms');

                this.totoggle.each(function(){

                    var ele = UI.$(this);

                    if (ele.hasClass($this.options.cls)) {

                        ele.toggleClass($this.options.cls);

                        UI.Utils.animate(ele, animations[0]).then(function(){
                            ele.css('animation-duration', '');
                            UI.Utils.checkDisplay(ele);
                        });

                    } else {

                        UI.Utils.animate(this, animations[1]+' uk-animation-reverse').then(function(){
                            ele.toggleClass($this.options.cls).css('animation-duration', '');
                            UI.Utils.checkDisplay(ele);
                        });

                    }

                });

            } else {
                this.totoggle.toggleClass(this.options.cls);
                UI.Utils.checkDisplay(this.totoggle);
            }

            this.updateAria();

        },

        getToggles: function() {
            this.totoggle = this.options.target ? UI.$(this.options.target):[];
            this.updateAria();
        },

        updateAria: function() {
            if (this.aria && this.totoggle.length) {
                this.totoggle.each(function(){
                    UI.$(this).attr('aria-hidden', UI.$(this).hasClass('uk-hidden'));
                });
            }
        }
    });

})(UIkit);
/*! UIkit 2.22.0 | http://www.getuikit.com | (c) 2014 YOOtheme | MIT License */
(function(UI) {

    "use strict";

    UI.component('alert', {

        defaults: {
            "fade": true,
            "duration": 200,
            "trigger": ".uk-alert-close"
        },

        boot: function() {

            // init code
            UI.$html.on("click.alert.uikit", "[data-uk-alert]", function(e) {

                var ele = UI.$(this);

                if (!ele.data("alert")) {

                    var alert = UI.alert(ele, UI.Utils.options(ele.attr("data-uk-alert")));

                    if (UI.$(e.target).is(alert.options.trigger)) {
                        e.preventDefault();
                        alert.close();
                    }
                }
            });
        },

        init: function() {

            var $this = this;

            this.on("click", this.options.trigger, function(e) {
                e.preventDefault();
                $this.close();
            });
        },

        close: function() {

            var element       = this.trigger("close.uk.alert"),
                removeElement = function () {
                    this.trigger("closed.uk.alert").remove();
                }.bind(this);

            if (this.options.fade) {
                element.css("overflow", "hidden").css("max-height", element.height()).animate({
                    "height"         : 0,
                    "opacity"        : 0,
                    "padding-top"    : 0,
                    "padding-bottom" : 0,
                    "margin-top"     : 0,
                    "margin-bottom"  : 0
                }, this.options.duration, removeElement);
            } else {
                removeElement();
            }
        }

    });

})(UIkit);
/*! UIkit 2.22.0 | http://www.getuikit.com | (c) 2014 YOOtheme | MIT License */
(function(UI) {

    "use strict";

    UI.component('buttonRadio', {

        defaults: {
            "activeClass": 'uk-active',
            "target": ".uk-button"
        },

        boot: function() {

            // init code
            UI.$html.on("click.buttonradio.uikit", "[data-uk-button-radio]", function(e) {

                var ele = UI.$(this);

                if (!ele.data("buttonRadio")) {

                    var obj    = UI.buttonRadio(ele, UI.Utils.options(ele.attr("data-uk-button-radio"))),
                        target = UI.$(e.target);

                    if (target.is(obj.options.target)) {
                        target.trigger("click");
                    }
                }
            });
        },

        init: function() {

            var $this = this;

            // Init ARIA
            this.find($this.options.target).attr('aria-checked', 'false').filter('.' + $this.options.activeClass).attr('aria-checked', 'true');

            this.on("click", this.options.target, function(e) {

                var ele = UI.$(this);

                if (ele.is('a[href="#"]')) e.preventDefault();

                $this.find($this.options.target).not(ele).removeClass($this.options.activeClass).blur();
                ele.addClass($this.options.activeClass);

                // Update ARIA
                $this.find($this.options.target).not(ele).attr('aria-checked', 'false');
                ele.attr('aria-checked', 'true');

                $this.trigger("change.uk.button", [ele]);
            });

        },

        getSelected: function() {
            return this.find('.' + this.options.activeClass);
        }
    });

    UI.component('buttonCheckbox', {

        defaults: {
            "activeClass": 'uk-active',
            "target": ".uk-button"
        },

        boot: function() {

            UI.$html.on("click.buttoncheckbox.uikit", "[data-uk-button-checkbox]", function(e) {
                var ele = UI.$(this);

                if (!ele.data("buttonCheckbox")) {

                    var obj    = UI.buttonCheckbox(ele, UI.Utils.options(ele.attr("data-uk-button-checkbox"))),
                        target = UI.$(e.target);

                    if (target.is(obj.options.target)) {
                        target.trigger("click");
                    }
                }
            });
        },

        init: function() {

            var $this = this;

            // Init ARIA
            this.find($this.options.target).attr('aria-checked', 'false').filter('.' + $this.options.activeClass).attr('aria-checked', 'true');

            this.on("click", this.options.target, function(e) {
                var ele = UI.$(this);

                if (ele.is('a[href="#"]')) e.preventDefault();

                ele.toggleClass($this.options.activeClass).blur();

                // Update ARIA
                ele.attr('aria-checked', ele.hasClass($this.options.activeClass));

                $this.trigger("change.uk.button", [ele]);
            });

        },

        getSelected: function() {
            return this.find('.' + this.options.activeClass);
        }
    });


    UI.component('button', {

        defaults: {},

        boot: function() {

            UI.$html.on("click.button.uikit", "[data-uk-button]", function(e) {
                var ele = UI.$(this);

                if (!ele.data("button")) {

                    var obj = UI.button(ele, UI.Utils.options(ele.attr("data-uk-button")));
                    ele.trigger("click");
                }
            });
        },

        init: function() {

            var $this = this;

            // Init ARIA
            this.element.attr('aria-pressed', this.element.hasClass("uk-active"));

            this.on("click", function(e) {

                if ($this.element.is('a[href="#"]')) e.preventDefault();

                $this.toggle();
                $this.trigger("change.uk.button", [$this.element.blur().hasClass("uk-active")]);
            });

        },

        toggle: function() {
            this.element.toggleClass("uk-active");

            // Update ARIA
            this.element.attr('aria-pressed', this.element.hasClass("uk-active"));
        }
    });

})(UIkit);
/*! UIkit 2.22.0 | http://www.getuikit.com | (c) 2014 YOOtheme | MIT License */
(function(UI) {

    "use strict";

    var active = false, hoverIdle;

    UI.component('dropdown', {

        defaults: {
           'mode'       : 'hover',
           'remaintime' : 800,
           'justify'    : false,
           'boundary'   : UI.$win,
           'delay'      : 0,
           'hoverDelayIdle'  : 250
        },

        remainIdle: false,

        boot: function() {

            var triggerevent = UI.support.touch ? "click" : "mouseenter";

            // init code
            UI.$html.on(triggerevent+".dropdown.uikit", "[data-uk-dropdown]", function(e) {

                var ele = UI.$(this);

                if (!ele.data("dropdown")) {

                    var dropdown = UI.dropdown(ele, UI.Utils.options(ele.attr("data-uk-dropdown")));

                    if (triggerevent=="click" || (triggerevent=="mouseenter" && dropdown.options.mode=="hover")) {
                        dropdown.element.trigger(triggerevent);
                    }

                    if (dropdown.element.find('.uk-dropdown').length) {
                        e.preventDefault();
                    }
                }
            });
        },

        init: function() {

            var $this = this;

            this.dropdown  = this.find('.uk-dropdown');

            this.centered  = this.dropdown.hasClass('uk-dropdown-center');
            this.justified = this.options.justify ? UI.$(this.options.justify) : false;

            this.boundary  = UI.$(this.options.boundary);
            this.flipped   = this.dropdown.hasClass('uk-dropdown-flip');

            if (!this.boundary.length) {
                this.boundary = UI.$win;
            }

            // Init ARIA
            this.element.attr('aria-haspopup', 'true');
            this.element.attr('aria-expanded', this.element.hasClass("uk-open"));

            if (this.options.mode == "click" || UI.support.touch) {

                this.on("click.uikit.dropdown", function(e) {

                    var $target = UI.$(e.target);

                    if (!$target.parents(".uk-dropdown").length) {

                        if ($target.is("a[href='#']") || $target.parent().is("a[href='#']") || ($this.dropdown.length && !$this.dropdown.is(":visible")) ){
                            e.preventDefault();
                        }

                        $target.blur();
                    }

                    if (!$this.element.hasClass('uk-open')) {

                        $this.show();

                    } else {

                        if (!$this.dropdown.find(e.target).length || $target.is(".uk-dropdown-close") || $target.parents(".uk-dropdown-close").length) {
                            $this.hide();
                        }
                    }
                });

            } else {

                this.on("mouseenter", function(e) {

                    $this.trigger('pointerenter.uk.dropdown', [$this]);

                    if ($this.remainIdle) {
                        clearTimeout($this.remainIdle);
                    }

                    if (hoverIdle) {
                        clearTimeout(hoverIdle);
                    }

                    if (active && active == $this) {
                        return;
                    }

                    // pseudo manuAim
                    if (active && active != $this) {

                        hoverIdle = setTimeout(function() {
                            hoverIdle = setTimeout($this.show.bind($this), $this.options.delay);
                        }, $this.options.hoverDelayIdle);

                    } else {

                        hoverIdle = setTimeout($this.show.bind($this), $this.options.delay);
                    }

                }).on("mouseleave", function() {

                    if (hoverIdle) {
                        clearTimeout(hoverIdle);
                    }

                    $this.remainIdle = setTimeout(function() {
                        if (active && active == $this) $this.hide();
                    }, $this.options.remaintime);

                    $this.trigger('pointerleave.uk.dropdown', [$this]);

                }).on("click", function(e){

                    var $target = UI.$(e.target);

                    if ($this.remainIdle) {
                        clearTimeout($this.remainIdle);
                    }

                    if (active && active == $this) {
                        return;
                    }

                    if ($target.is("a[href='#']") || $target.parent().is("a[href='#']")){
                        e.preventDefault();
                    }

                    $this.show();
                });
            }
        },

        show: function(){

            UI.$html.off("click.outer.dropdown");

            if (active && active != this) {
                active.hide(true);
            }

            if (hoverIdle) {
                clearTimeout(hoverIdle);
            }

            this.trigger('beforeshow.uk.dropdown', [this]);

            this.checkDimensions();
            this.element.addClass('uk-open');

            // Update ARIA
            this.element.attr('aria-expanded', 'true');

            this.trigger('show.uk.dropdown', [this]);

            UI.Utils.checkDisplay(this.dropdown, true);
            active = this;

            this.registerOuterClick();
        },

        hide: function(force) {

            this.trigger('beforehide.uk.dropdown', [this, force]);

            this.element.removeClass('uk-open');

            if (this.remainIdle) {
                clearTimeout(this.remainIdle);
            }

            this.remainIdle = false;

            // Update ARIA
            this.element.attr('aria-expanded', 'false');

            this.trigger('hide.uk.dropdown', [this, force]);

            if (active == this) active = false;
        },

        registerOuterClick: function(){

            var $this = this;

            UI.$html.off("click.outer.dropdown");

            setTimeout(function() {

                UI.$html.on("click.outer.dropdown", function(e) {

                    if (hoverIdle) {
                        clearTimeout(hoverIdle);
                    }

                    var $target = UI.$(e.target);

                    if (active == $this && !$this.element.find(e.target).length) {
                        $this.hide(true);
                        UI.$html.off("click.outer.dropdown");
                    }
                });
            }, 10);
        },

        checkDimensions: function() {

            if (!this.dropdown.length) return;

            if (this.justified && this.justified.length) {
                this.dropdown.css("min-width", "");
            }

            var $this     = this,
                dropdown  = this.dropdown.css("margin-" + UI.langdirection, ""),
                offset    = dropdown.show().offset(),
                width     = dropdown.outerWidth(),
                boundarywidth  = this.boundary.width(),
                boundaryoffset = this.boundary.offset() ? this.boundary.offset().left:0;

            // centered dropdown
            if (this.centered) {
                dropdown.css("margin-" + UI.langdirection, (parseFloat(width) / 2 - dropdown.parent().width() / 2) * -1);
                offset = dropdown.offset();

                // reset dropdown
                if ((width + offset.left) > boundarywidth || offset.left < 0) {
                    dropdown.css("margin-" + UI.langdirection, "");
                    offset = dropdown.offset();
                }
            }

            // justify dropdown
            if (this.justified && this.justified.length) {
                justify(dropdown, this.justified, boundarywidth, offset);
                offset = dropdown.offset();
            }

            if ((width + (offset.left-boundaryoffset)) > boundarywidth) {
                dropdown.addClass('uk-dropdown-flip');
                offset = dropdown.offset();
            }

            if ((offset.left-boundaryoffset) < 0) {

                dropdown.addClass("uk-dropdown-stack");

                if (dropdown.hasClass('uk-dropdown-flip')) {

                    if (!this.flipped) {
                        dropdown.removeClass('uk-dropdown-flip');
                        offset = dropdown.offset();
                        dropdown.addClass('uk-dropdown-flip');
                    }

                    setTimeout(function(){

                        if ((dropdown.offset().left-boundaryoffset) < 0 || !$this.flipped && (dropdown.outerWidth() + (offset.left-boundaryoffset)) < boundarywidth) {
                            dropdown.removeClass('uk-dropdown-flip');
                        }
                    }, 0);
                }

                this.trigger('stack.uk.dropdown', [this]);
            }

            dropdown.css("display", "");
        }

    });


    UI.component('dropdownOverlay', {

        defaults: {
           'justify' : false,
           'cls'     : '',
           'duration': 200
        },

        boot: function() {

            // init code
            UI.ready(function(context) {

                UI.$("[data-uk-dropdown-overlay]", context).each(function() {
                    var ele = UI.$(this);

                    if (!ele.data("dropdownOverlay")) {
                        UI.dropdownOverlay(ele, UI.Utils.options(ele.attr("data-uk-dropdown-overlay")));
                    }
                });
            });
        },

        init: function() {

            var $this = this;

            this.justified = this.options.justify ? UI.$(this.options.justify) : false;
            this.overlay   = this.element.find('uk-dropdown-overlay');

            if (!this.overlay.length) {
                this.overlay = UI.$('<div class="uk-dropdown-overlay"></div>').appendTo(this.element);
            }

            this.overlay.addClass(this.options.cls);

            this.on({

                'beforeshow.uk.dropdown': function(e, dropdown) {
                    $this.dropdown = dropdown;

                    if ($this.justified && $this.justified.length) {
                        justify($this.overlay.css({'display':'block', 'margin-left':'','margin-right':''}), $this.justified, $this.justified.outerWidth());
                    }
                },

                'show.uk.dropdown': function(e, dropdown) {

                    var h = $this.dropdown.dropdown.outerHeight(true);

                    $this.dropdown.element.removeClass('uk-open');

                    $this.overlay.stop().css('display', 'block').animate({height: h}, $this.options.duration, function() {

                       $this.dropdown.dropdown.css('visibility', '');
                       $this.dropdown.element.addClass('uk-open');

                       UI.Utils.checkDisplay($this.dropdown.dropdown, true);
                    });

                    $this.pointerleave = false;
                },

                'hide.uk.dropdown': function() {
                    $this.overlay.stop().animate({height: 0}, $this.options.duration);
                },

                'pointerenter.uk.dropdown': function(e, dropdown) {
                    clearTimeout($this.remainIdle);
                },

                'pointerleave.uk.dropdown': function(e, dropdown) {
                    $this.pointerleave = true;
                }
            });


            this.overlay.on({

                'mouseenter': function() {
                    if ($this.remainIdle) {
                        clearTimeout($this.dropdown.remainIdle);
                        clearTimeout($this.remainIdle);
                    }
                },

                'mouseleave': function(){

                    if ($this.pointerleave && active) {

                        $this.remainIdle = setTimeout(function() {
                           if(active) active.hide();
                        }, active.options.remaintime);
                    }
                }
            })
        }

    });


    function justify(ele, justifyTo, boundarywidth, offset) {

        ele           = UI.$(ele);
        justifyTo     = UI.$(justifyTo);
        boundarywidth = boundarywidth || window.innerWidth;
        offset        = offset || ele.offset();

        if (justifyTo.length) {

            var jwidth = justifyTo.outerWidth();

            ele.css("min-width", jwidth);

            if (UI.langdirection == 'right') {

                var right1   = boundarywidth - (justifyTo.offset().left + jwidth),
                    right2   = boundarywidth - (ele.offset().left + ele.outerWidth());

                ele.css("margin-right", right1 - right2);

            } else {
                ele.css("margin-left", justifyTo.offset().left - offset.left);
            }
        }
    }

})(UIkit);
/*! UIkit 2.22.0 | http://www.getuikit.com | (c) 2014 YOOtheme | MIT License */
(function(UI) {

    "use strict";

    var grids = [];

    UI.component('gridMatchHeight', {

        defaults: {
            "target"        : false,
            "row"           : true,
            "ignorestacked" : false
        },

        boot: function() {

            // init code
            UI.ready(function(context) {

                UI.$("[data-uk-grid-match]", context).each(function() {
                    var grid = UI.$(this), obj;

                    if (!grid.data("gridMatchHeight")) {
                        obj = UI.gridMatchHeight(grid, UI.Utils.options(grid.attr("data-uk-grid-match")));
                    }
                });
            });
        },

        init: function() {

            var $this = this;

            this.columns  = this.element.children();
            this.elements = this.options.target ? this.find(this.options.target) : this.columns;

            if (!this.columns.length) return;

            UI.$win.on('load resize orientationchange', (function() {

                var fn = function() {
                    $this.match();
                };

                UI.$(function() { fn(); });

                return UI.Utils.debounce(fn, 50);
            })());

            UI.$html.on("changed.uk.dom", function(e) {
                $this.columns  = $this.element.children();
                $this.elements = $this.options.target ? $this.find($this.options.target) : $this.columns;
                $this.match();
            });

            this.on("display.uk.check", function(e) {
                if(this.element.is(":visible")) this.match();
            }.bind(this));

            grids.push(this);
        },

        match: function() {

            var firstvisible = this.columns.filter(":visible:first");

            if (!firstvisible.length) return;

            var stacked = Math.ceil(100 * parseFloat(firstvisible.css('width')) / parseFloat(firstvisible.parent().css('width'))) >= 100;

            if (stacked && !this.options.ignorestacked) {
                this.revert();
            } else {
                UI.Utils.matchHeights(this.elements, this.options);
            }

            return this;
        },

        revert: function() {
            this.elements.css('min-height', '');
            return this;
        }
    });

    UI.component('gridMargin', {

        defaults: {
            "cls": "uk-grid-margin"
        },

        boot: function() {

            // init code
            UI.ready(function(context) {

                UI.$("[data-uk-grid-margin]", context).each(function() {
                    var grid = UI.$(this), obj;

                    if (!grid.data("gridMargin")) {
                        obj = UI.gridMargin(grid, UI.Utils.options(grid.attr("data-uk-grid-margin")));
                    }
                });
            });
        },

        init: function() {

            var stackMargin = UI.stackMargin(this.element, this.options);
        }
    });

})(UIkit);
/*! UIkit 2.22.0 | http://www.getuikit.com | (c) 2014 YOOtheme | MIT License */
(function(UI) {

    "use strict";

    var active = false, activeCount = 0, $html = UI.$html, body;

    UI.component('modal', {

        defaults: {
            keyboard: true,
            bgclose: true,
            minScrollHeight: 150,
            center: false,
            modal: true
        },

        scrollable: false,
        transition: false,

        init: function() {

            if (!body) body = UI.$('body');

            if (!this.element.length) return;

            var $this = this;

            this.paddingdir = "padding-" + (UI.langdirection == 'left' ? "right":"left");
            this.dialog     = this.find(".uk-modal-dialog");

            this.active     = false;

            // Update ARIA
            this.element.attr('aria-hidden', this.element.hasClass("uk-open"));

            this.on("click", ".uk-modal-close", function(e) {
                e.preventDefault();
                $this.hide();
            }).on("click", function(e) {

                var target = UI.$(e.target);

                if (target[0] == $this.element[0] && $this.options.bgclose) {
                    $this.hide();
                }
            });
        },

        toggle: function() {
            return this[this.isActive() ? "hide" : "show"]();
        },

        show: function() {

            if (!this.element.length) return;

            var $this = this;

            if (this.isActive()) return;

            if (this.options.modal && active) {
                active.hide(true);
            }

            this.element.removeClass("uk-open").show();
            this.resize();

            if (this.options.modal) {
                active = this;
            }

            this.active = true;

            activeCount++;

            this.element.addClass("uk-open");

            $html.addClass("uk-modal-page").height(); // force browser engine redraw

            // Update ARIA
            this.element.attr('aria-hidden', 'false');

            this.element.trigger("show.uk.modal");

            UI.Utils.checkDisplay(this.dialog, true);

            return this;
        },

        hide: function(force) {

            if (!force && UI.support.transition) {

                var $this = this;

                this.one(UI.support.transition.end, function() {
                    $this._hide();
                }).removeClass("uk-open");

            } else {

                this._hide();
            }

            return this;
        },

        resize: function() {

            var bodywidth  = body.width();

            this.scrollbarwidth = window.innerWidth - bodywidth;

            body.css(this.paddingdir, this.scrollbarwidth);

            this.element.css('overflow-y', this.scrollbarwidth ? 'scroll' : 'auto');

            if (!this.updateScrollable() && this.options.center) {

                var dh  = this.dialog.outerHeight(),
                pad = parseInt(this.dialog.css('margin-top'), 10) + parseInt(this.dialog.css('margin-bottom'), 10);

                if ((dh + pad) < window.innerHeight) {
                    this.dialog.css({'top': (window.innerHeight/2 - dh/2) - pad });
                } else {
                    this.dialog.css({'top': ''});
                }
            }
        },

        updateScrollable: function() {

            // has scrollable?
            var scrollable = this.dialog.find('.uk-overflow-container:visible:first');

            if (scrollable.length) {

                scrollable.css("height", 0);

                var offset = Math.abs(parseInt(this.dialog.css("margin-top"), 10)),
                dh     = this.dialog.outerHeight(),
                wh     = window.innerHeight,
                h      = wh - 2*(offset < 20 ? 20:offset) - dh;

                scrollable.css("height", h < this.options.minScrollHeight ? "":h);

                return true;
            }

            return false;
        },

        _hide: function() {

            this.active = false;
            activeCount--;

            this.element.hide().removeClass("uk-open");

            // Update ARIA
            this.element.attr('aria-hidden', 'true');

            if (!activeCount) {
                $html.removeClass("uk-modal-page");
                body.css(this.paddingdir, "");
            }

            if(active===this) active = false;

            this.trigger("hide.uk.modal");
        },

        isActive: function() {
            return this.active;
        }

    });

    UI.component('modalTrigger', {

        boot: function() {

            // init code
            UI.$html.on("click.modal.uikit", "[data-uk-modal]", function(e) {

                var ele = UI.$(this);

                if (ele.is("a")) {
                    e.preventDefault();
                }

                if (!ele.data("modalTrigger")) {
                    var modal = UI.modalTrigger(ele, UI.Utils.options(ele.attr("data-uk-modal")));
                    modal.show();
                }

            });

            // close modal on esc button
            UI.$html.on('keydown.modal.uikit', function (e) {

                if (active && e.keyCode === 27 && active.options.keyboard) { // ESC
                    e.preventDefault();
                    active.hide();
                }
            });

            UI.$win.on("resize orientationchange", UI.Utils.debounce(function(){
                if (active) active.resize();
            }, 150));
        },

        init: function() {

            var $this = this;

            this.options = UI.$.extend({
                "target": $this.element.is("a") ? $this.element.attr("href") : false
            }, this.options);

            this.modal = UI.modal(this.options.target, this.options);

            this.on("click", function(e) {
                e.preventDefault();
                $this.show();
            });

            //methods
            this.proxy(this.modal, "show hide isActive");
        }
    });

    UI.modal.dialog = function(content, options) {

        var modal = UI.modal(UI.$(UI.modal.dialog.template).appendTo("body"), options);

        modal.on("hide.uk.modal", function(){
            if (modal.persist) {
                modal.persist.appendTo(modal.persist.data("modalPersistParent"));
                modal.persist = false;
            }
            modal.element.remove();
        });

        setContent(content, modal);

        return modal;
    };

    UI.modal.dialog.template = '<div class="uk-modal"><div class="uk-modal-dialog" style="min-height:0;"></div></div>';

    UI.modal.alert = function(content, options) {

        options = UI.$.extend(true, {bgclose:false, keyboard:false, modal:false, labels:UI.modal.labels}, options);

        var modal = UI.modal.dialog(([
            '<div class="uk-margin uk-modal-content">'+String(content)+'</div>',
            '<div class="uk-modal-footer uk-text-right"><button class="uk-button uk-button-primary uk-modal-close">'+options.labels.Ok+'</button></div>'
        ]).join(""), options);

        modal.on('show.uk.modal', function(){
            setTimeout(function(){
                modal.element.find('button:first').focus();
            }, 50);
        });

        return modal.show();
    };

    UI.modal.confirm = function(content, onconfirm, options) {

        onconfirm = UI.$.isFunction(onconfirm) ? onconfirm : function(){};
        options   = UI.$.extend(true, {bgclose:false, keyboard:false, modal:false, labels:UI.modal.labels}, options);

        var modal = UI.modal.dialog(([
            '<div class="uk-margin uk-modal-content">'+String(content)+'</div>',
            '<div class="uk-modal-footer uk-text-right"><button class="uk-button uk-modal-close">'+options.labels.Cancel+'</button> <button class="uk-button uk-button-primary js-modal-confirm">'+options.labels.Ok+'</button></div>'
        ]).join(""), options);

        modal.element.find(".js-modal-confirm").on("click", function(){
            onconfirm();
            modal.hide();
        });

        modal.on('show.uk.modal', function(){
            setTimeout(function(){
                modal.element.find('.js-modal-confirm').focus();
            }, 50);
        });

        return modal.show();
    };

    UI.modal.prompt = function(text, value, onsubmit, options) {

        onsubmit = UI.$.isFunction(onsubmit) ? onsubmit : function(value){};
        options  = UI.$.extend(true, {bgclose:false, keyboard:false, modal:false, labels:UI.modal.labels}, options);

        var modal = UI.modal.dialog(([
            text ? '<div class="uk-modal-content uk-form">'+String(text)+'</div>':'',
            '<div class="uk-margin-small-top uk-modal-content uk-form"><p><input type="text" class="uk-width-1-1"></p></div>',
            '<div class="uk-modal-footer uk-text-right"><button class="uk-button uk-modal-close">'+options.labels.Cancel+'</button> <button class="uk-button uk-button-primary js-modal-ok">'+options.labels.Ok+'</button></div>'
        ]).join(""), options),

        input = modal.element.find("input[type='text']").val(value || '').on('keyup', function(e){
            if (e.keyCode == 13) {
                modal.element.find(".js-modal-ok").trigger('click');
            }
        });

        modal.element.find(".js-modal-ok").on("click", function(){
            if (onsubmit(input.val())!==false){
                modal.hide();
            }
        });

        modal.on('show.uk.modal', function(){
            setTimeout(function(){
                input.focus();
            }, 50);
        });

        return modal.show();
    };

    UI.modal.blockUI = function(content, options) {

        var modal = UI.modal.dialog(([
            '<div class="uk-margin uk-modal-content">'+String(content || '<div class="uk-text-center">...</div>')+'</div>'
        ]).join(""), UI.$.extend({bgclose:false, keyboard:false, modal:false}, options));

        modal.content = modal.element.find('.uk-modal-content:first');

        return modal.show();
    };


    UI.modal.labels = {
        'Ok': 'Ok',
        'Cancel': 'Cancel'
    };


    // helper functions
    function setContent(content, modal){

        if(!modal) return;

        if (typeof content === 'object') {

            // convert DOM object to a jQuery object
            content = content instanceof jQuery ? content : UI.$(content);

            if(content.parent().length) {
                modal.persist = content;
                modal.persist.data("modalPersistParent", content.parent());
            }
        }else if (typeof content === 'string' || typeof content === 'number') {
                // just insert the data as innerHTML
                content = UI.$('<div></div>').html(content);
        }else {
                // unsupported data type!
                content = UI.$('<div></div>').html('UIkit.modal Error: Unsupported data type: ' + typeof content);
        }

        content.appendTo(modal.element.find('.uk-modal-dialog'));

        return modal;
    }

})(UIkit);
/*! UIkit 2.22.0 | http://www.getuikit.com | (c) 2014 YOOtheme | MIT License */
(function(UI) {

    "use strict";

    UI.component('nav', {

        defaults: {
            "toggle": ">li.uk-parent > a[href='#']",
            "lists": ">li.uk-parent > ul",
            "multiple": false
        },

        boot: function() {

            // init code
            UI.ready(function(context) {

                UI.$("[data-uk-nav]", context).each(function() {
                    var nav = UI.$(this);

                    if (!nav.data("nav")) {
                        var obj = UI.nav(nav, UI.Utils.options(nav.attr("data-uk-nav")));
                    }
                });
            });
        },

        init: function() {

            var $this = this;

            this.on("click.uikit.nav", this.options.toggle, function(e) {
                e.preventDefault();
                var ele = UI.$(this);
                $this.open(ele.parent()[0] == $this.element[0] ? ele : ele.parent("li"));
            });

            this.find(this.options.lists).each(function() {
                var $ele   = UI.$(this),
                    parent = $ele.parent(),
                    active = parent.hasClass("uk-active");

                $ele.wrap('<div style="overflow:hidden;height:0;position:relative;"></div>');
                parent.data("list-container", $ele.parent()[active ? 'removeClass':'addClass']('uk-hidden'));

                // Init ARIA
                parent.attr('aria-expanded', parent.hasClass("uk-open"));

                if (active) $this.open(parent, true);
            });

        },

        open: function(li, noanimation) {

            var $this = this, element = this.element, $li = UI.$(li), $container = $li.data('list-container');

            if (!this.options.multiple) {

                element.children('.uk-open').not(li).each(function() {

                    var ele = UI.$(this);

                    if (ele.data('list-container')) {
                        ele.data('list-container').stop().animate({height: 0}, function() {
                            UI.$(this).parent().removeClass('uk-open').end().addClass('uk-hidden');
                        });
                    }
                });
            }

            $li.toggleClass('uk-open');

            // Update ARIA
            $li.attr('aria-expanded', $li.hasClass('uk-open'));

            if ($container) {

                if ($li.hasClass('uk-open')) {
                    $container.removeClass('uk-hidden');
                }

                if (noanimation) {

                    $container.stop().height($li.hasClass('uk-open') ? 'auto' : 0);

                    if (!$li.hasClass('uk-open')) {
                        $container.addClass('uk-hidden');
                    }

                    this.trigger('display.uk.check');

                } else {

                    $container.stop().animate({
                        height: ($li.hasClass('uk-open') ? getHeight($container.find('ul:first')) : 0)
                    }, function() {

                        if (!$li.hasClass('uk-open')) {
                            $container.addClass('uk-hidden');
                        } else {
                            $container.css('height', '');
                        }

                        $this.trigger('display.uk.check');
                    });
                }
            }
        }
    });


    // helper

    function getHeight(ele) {
        var $ele = UI.$(ele), height = "auto";

        if ($ele.is(":visible")) {
            height = $ele.outerHeight();
        } else {
            var tmp = {
                position: $ele.css("position"),
                visibility: $ele.css("visibility"),
                display: $ele.css("display")
            };

            height = $ele.css({position: 'absolute', visibility: 'hidden', display: 'block'}).outerHeight();

            $ele.css(tmp); // reset element
        }

        return height;
    }

})(UIkit);
/*! UIkit 2.22.0 | http://www.getuikit.com | (c) 2014 YOOtheme | MIT License */
(function(UI) {

    "use strict";

    var scrollpos = {x: window.scrollX, y: window.scrollY},
        $win      = UI.$win,
        $doc      = UI.$doc,
        $html     = UI.$html,
        Offcanvas = {

        show: function(element) {

            element = UI.$(element);

            if (!element.length) return;

            var $body     = UI.$('body'),
                bar       = element.find(".uk-offcanvas-bar:first"),
                rtl       = (UI.langdirection == "right"),
                flip      = bar.hasClass("uk-offcanvas-bar-flip") ? -1:1,
                dir       = flip * (rtl ? -1 : 1),

                scrollbarwidth =  window.innerWidth - $body.width();

            scrollpos = {x: window.pageXOffset, y: window.pageYOffset};

            element.addClass("uk-active");

            $body.css({"width": window.innerWidth - scrollbarwidth, "height": window.innerHeight}).addClass("uk-offcanvas-page");
            $body.css((rtl ? "margin-right" : "margin-left"), (rtl ? -1 : 1) * (bar.outerWidth() * dir)).width(); // .width() - force redraw

            $html.css('margin-top', scrollpos.y * -1);

            bar.addClass("uk-offcanvas-bar-show");

            this._initElement(element);

            bar.trigger('show.uk.offcanvas', [element, bar]);

            // Update ARIA
            element.attr('aria-hidden', 'false');
        },

        hide: function(force) {

            var $body = UI.$('body'),
                panel = UI.$(".uk-offcanvas.uk-active"),
                rtl   = (UI.langdirection == "right"),
                bar   = panel.find(".uk-offcanvas-bar:first"),
                finalize = function() {
                    $body.removeClass("uk-offcanvas-page").css({"width": "", "height": "", "margin-left": "", "margin-right": ""});
                    panel.removeClass("uk-active");

                    bar.removeClass("uk-offcanvas-bar-show");
                    $html.css('margin-top', '');
                    window.scrollTo(scrollpos.x, scrollpos.y);
                    bar.trigger('hide.uk.offcanvas', [panel, bar]);

                    // Update ARIA
                    panel.attr('aria-hidden', 'true');
                };

            if (!panel.length) return;

            if (UI.support.transition && !force) {

                $body.one(UI.support.transition.end, function() {
                    finalize();
                }).css((rtl ? "margin-right" : "margin-left"), "");

                setTimeout(function(){
                    bar.removeClass("uk-offcanvas-bar-show");
                }, 0);

            } else {
                finalize();
            }
        },

        _initElement: function(element) {

            if (element.data("OffcanvasInit")) return;

            element.on("click.uk.offcanvas swipeRight.uk.offcanvas swipeLeft.uk.offcanvas", function(e) {

                var target = UI.$(e.target);

                if (!e.type.match(/swipe/)) {

                    if (!target.hasClass("uk-offcanvas-close")) {
                        if (target.hasClass("uk-offcanvas-bar")) return;
                        if (target.parents(".uk-offcanvas-bar:first").length) return;
                    }
                }

                e.stopImmediatePropagation();
                Offcanvas.hide();
            });

            element.on("click", "a[href^='#']", function(e){

                var link = UI.$(this),
                    href = link.attr("href");

                if (href == "#") {
                    return;
                }

                UI.$doc.one('hide.uk.offcanvas', function() {

                    var target;

                    try {
                        target = UI.$(href);
                    } catch (e){
                        target = ""
                    }

                    if (!target.length) {
                        target = UI.$('[name="'+href.replace('#','')+'"]');
                    }

                    if (target.length && link.attr('data-uk-smooth-scroll') && UI.Utils.scrollToElement) {
                        UI.Utils.scrollToElement(target, UI.Utils.options(link.attr('data-uk-smooth-scroll') || '{}'));
                    } else {
                        window.location.href = href;
                    }
                });

                Offcanvas.hide();
            });

            element.data("OffcanvasInit", true);
        }
    };

    UI.component('offcanvasTrigger', {

        boot: function() {

            // init code
            $html.on("click.offcanvas.uikit", "[data-uk-offcanvas]", function(e) {

                e.preventDefault();

                var ele = UI.$(this);

                if (!ele.data("offcanvasTrigger")) {
                    var obj = UI.offcanvasTrigger(ele, UI.Utils.options(ele.attr("data-uk-offcanvas")));
                    ele.trigger("click");
                }
            });

            $html.on('keydown.uk.offcanvas', function(e) {

                if (e.keyCode === 27) { // ESC
                    Offcanvas.hide();
                }
            });
        },

        init: function() {

            var $this = this;

            this.options = UI.$.extend({
                "target": $this.element.is("a") ? $this.element.attr("href") : false
            }, this.options);

            this.on("click", function(e) {
                e.preventDefault();
                Offcanvas.show($this.options.target);
            });
        }
    });

    UI.offcanvas = Offcanvas;

})(UIkit);
/*! UIkit 2.22.0 | http://www.getuikit.com | (c) 2014 YOOtheme | MIT License */
(function(UI) {

    "use strict";

    var Animations;

    UI.component('switcher', {

        defaults: {
            connect   : false,
            toggle    : ">*",
            active    : 0,
            animation : false,
            duration  : 200,
            swiping   : true
        },

        animating: false,

        boot: function() {

            // init code
            UI.ready(function(context) {

                UI.$("[data-uk-switcher]", context).each(function() {
                    var switcher = UI.$(this);

                    if (!switcher.data("switcher")) {
                        var obj = UI.switcher(switcher, UI.Utils.options(switcher.attr("data-uk-switcher")));
                    }
                });
            });
        },

        init: function() {

            var $this = this;

            this.on("click.uikit.switcher", this.options.toggle, function(e) {
                e.preventDefault();
                $this.show(this);
            });

            if (this.options.connect) {

                this.connect = UI.$(this.options.connect);

                this.connect.find(".uk-active").removeClass(".uk-active");

                // delegate switch commands within container content
                if (this.connect.length) {

                    // Init ARIA for connect
                    this.connect.children().attr('aria-hidden', 'true');

                    this.connect.on("click", '[data-uk-switcher-item]', function(e) {

                        e.preventDefault();

                        var item = UI.$(this).attr('data-uk-switcher-item');

                        if ($this.index == item) return;

                        switch(item) {
                            case 'next':
                            case 'previous':
                                $this.show($this.index + (item=='next' ? 1:-1));
                                break;
                            default:
                                $this.show(parseInt(item, 10));
                        }
                    })

                    if (this.options.swiping) {

                        this.connect.on('swipeRight swipeLeft', function(e) {
                            e.preventDefault();
                            if(!window.getSelection().toString()) {
                                $this.show($this.index + (e.type == 'swipeLeft' ? 1 : -1));
                            }
                        });
                    }
                }

                var toggles = this.find(this.options.toggle),
                    active  = toggles.filter(".uk-active");

                if (active.length) {
                    this.show(active, false);
                } else {

                    if (this.options.active===false) return;

                    active = toggles.eq(this.options.active);
                    this.show(active.length ? active : toggles.eq(0), false);
                }

                // Init ARIA for toggles
                toggles.not(active).attr('aria-expanded', 'false');
                active.attr('aria-expanded', 'true');

                this.on('changed.uk.dom', function() {
                    $this.connect = UI.$($this.options.connect);
                });
            }

        },

        show: function(tab, animate) {

            if (this.animating) {
                return;
            }

            if (isNaN(tab)) {
                tab = UI.$(tab);
            } else {

                var toggles = this.find(this.options.toggle);

                tab = tab < 0 ? toggles.length-1 : tab;
                tab = toggles.eq(toggles[tab] ? tab : 0);
            }

            var $this     = this,
                toggles   = this.find(this.options.toggle),
                active    = UI.$(tab),
                animation = Animations[this.options.animation] || function(current, next) {

                    if (!$this.options.animation) {
                        return Animations.none.apply($this);
                    }

                    var anim = $this.options.animation.split(',');

                    if (anim.length == 1) {
                        anim[1] = anim[0];
                    }

                    anim[0] = anim[0].trim();
                    anim[1] = anim[1].trim();

                    return coreAnimation.apply($this, [anim, current, next]);
                };

            if (animate===false || !UI.support.animation) {
                animation = Animations.none;
            }

            if (active.hasClass("uk-disabled")) return;

            // Update ARIA for Toggles
            toggles.attr('aria-expanded', 'false');
            active.attr('aria-expanded', 'true');

            toggles.filter(".uk-active").removeClass("uk-active");
            active.addClass("uk-active");

            if (this.options.connect && this.connect.length) {

                this.index = this.find(this.options.toggle).index(active);

                if (this.index == -1 ) {
                    this.index = 0;
                }

                this.connect.each(function() {

                    var container = UI.$(this),
                        children  = UI.$(container.children()),
                        current   = UI.$(children.filter('.uk-active')),
                        next      = UI.$(children.eq($this.index));

                        $this.animating = true;

                        animation.apply($this, [current, next]).then(function(){

                            current.removeClass("uk-active");
                            next.addClass("uk-active");

                            // Update ARIA for connect
                            current.attr('aria-hidden', 'true');
                            next.attr('aria-hidden', 'false');

                            UI.Utils.checkDisplay(next, true);

                            $this.animating = false;
                        });
                });
            }

            this.trigger("show.uk.switcher", [active]);
        }
    });

    Animations = {

        'none': function() {
            var d = UI.$.Deferred();
            d.resolve();
            return d.promise();
        },

        'fade': function(current, next) {
            return coreAnimation.apply(this, ['uk-animation-fade', current, next]);
        },

        'slide-bottom': function(current, next) {
            return coreAnimation.apply(this, ['uk-animation-slide-bottom', current, next]);
        },

        'slide-top': function(current, next) {
            return coreAnimation.apply(this, ['uk-animation-slide-top', current, next]);
        },

        'slide-vertical': function(current, next, dir) {

            var anim = ['uk-animation-slide-top', 'uk-animation-slide-bottom'];

            if (current && current.index() > next.index()) {
                anim.reverse();
            }

            return coreAnimation.apply(this, [anim, current, next]);
        },

        'slide-left': function(current, next) {
            return coreAnimation.apply(this, ['uk-animation-slide-left', current, next]);
        },

        'slide-right': function(current, next) {
            return coreAnimation.apply(this, ['uk-animation-slide-right', current, next]);
        },

        'slide-horizontal': function(current, next, dir) {

            var anim = ['uk-animation-slide-right', 'uk-animation-slide-left'];

            if (current && current.index() > next.index()) {
                anim.reverse();
            }

            return coreAnimation.apply(this, [anim, current, next]);
        },

        'scale': function(current, next) {
            return coreAnimation.apply(this, ['uk-animation-scale-up', current, next]);
        }
    };

    UI.switcher.animations = Animations;


    // helpers

    function coreAnimation(cls, current, next) {

        var d = UI.$.Deferred(), clsIn = cls, clsOut = cls, release;

        if (next[0]===current[0]) {
            d.resolve();
            return d.promise();
        }

        if (typeof(cls) == 'object') {
            clsIn  = cls[0];
            clsOut = cls[1] || cls[0];
        }

        release = function() {

            if (current) current.hide().removeClass('uk-active '+clsOut+' uk-animation-reverse');

            next.addClass(clsIn).one(UI.support.animation.end, function() {

                next.removeClass(''+clsIn+'').css({opacity:'', display:''});

                d.resolve();

                if (current) current.css({opacity:'', display:''});

            }.bind(this)).show();
        };

        next.css('animation-duration', this.options.duration+'ms');

        if (current && current.length) {

            current.css('animation-duration', this.options.duration+'ms');

            current.css('display', 'none').addClass(clsOut+' uk-animation-reverse').one(UI.support.animation.end, function() {
                release();
            }.bind(this)).css('display', '');

        } else {
            next.addClass('uk-active');
            release();
        }

        return d.promise();
    }

})(UIkit);
/*! UIkit 2.22.0 | http://www.getuikit.com | (c) 2014 YOOtheme | MIT License */
(function(UI) {

    "use strict";

    UI.component('tab', {

        defaults: {
            'target'    : '>li:not(.uk-tab-responsive, .uk-disabled)',
            'connect'   : false,
            'active'    : 0,
            'animation' : false,
            'duration'  : 200
        },

        boot: function() {

            // init code
            UI.ready(function(context) {

                UI.$("[data-uk-tab]", context).each(function() {

                    var tab = UI.$(this);

                    if (!tab.data("tab")) {
                        var obj = UI.tab(tab, UI.Utils.options(tab.attr("data-uk-tab")));
                    }
                });
            });
        },

        init: function() {

            var $this = this;

            this.current = false;

            this.on("click.uikit.tab", this.options.target, function(e) {

                e.preventDefault();

                if ($this.switcher && $this.switcher.animating) {
                    return;
                }

                var current = $this.find($this.options.target).not(this);

                current.removeClass("uk-active").blur();

                $this.trigger("change.uk.tab", [UI.$(this).addClass("uk-active"), $this.current]);

                $this.current = UI.$(this);

                // Update ARIA
                if (!$this.options.connect) {
                    current.attr('aria-expanded', 'false');
                    UI.$(this).attr('aria-expanded', 'true');
                }
            });

            if (this.options.connect) {
                this.connect = UI.$(this.options.connect);
            }

            // init responsive tab
            this.responsivetab = UI.$('<li class="uk-tab-responsive uk-active"><a></a></li>').append('<div class="uk-dropdown uk-dropdown-small"><ul class="uk-nav uk-nav-dropdown"></ul><div>');

            this.responsivetab.dropdown = this.responsivetab.find('.uk-dropdown');
            this.responsivetab.lst      = this.responsivetab.dropdown.find('ul');
            this.responsivetab.caption  = this.responsivetab.find('a:first');

            if (this.element.hasClass("uk-tab-bottom")) this.responsivetab.dropdown.addClass("uk-dropdown-up");

            // handle click
            this.responsivetab.lst.on('click.uikit.tab', 'a', function(e) {

                e.preventDefault();
                e.stopPropagation();

                var link = UI.$(this);

                $this.element.children('li:not(.uk-tab-responsive)').eq(link.data('index')).trigger('click');
            });

            this.on('show.uk.switcher change.uk.tab', function(e, tab) {
                $this.responsivetab.caption.html(tab.text());
            });

            this.element.append(this.responsivetab);

            // init UIkit components
            if (this.options.connect) {
                this.switcher = UI.switcher(this.element, {
                    "toggle"    : ">li:not(.uk-tab-responsive)",
                    "connect"   : this.options.connect,
                    "active"    : this.options.active,
                    "animation" : this.options.animation,
                    "duration"  : this.options.duration
                });
            }

            UI.dropdown(this.responsivetab, {"mode": "click"});

            // init
            $this.trigger("change.uk.tab", [this.element.find(this.options.target).not('.uk-tab-responsive').filter('.uk-active')]);

            this.check();

            UI.$win.on('resize orientationchange', UI.Utils.debounce(function(){
                if ($this.element.is(":visible"))  $this.check();
            }, 100));

            this.on('display.uk.check', function(){
                if ($this.element.is(":visible"))  $this.check();
            });
        },

        check: function() {

            var children = this.element.children('li:not(.uk-tab-responsive)').removeClass('uk-hidden');

            if (!children.length) {
                this.responsivetab.addClass('uk-hidden');
                return;
            }

            var top          = (children.eq(0).offset().top + Math.ceil(children.eq(0).height()/2)),
                doresponsive = false,
                item, link, clone;

            this.responsivetab.lst.empty();

            children.each(function(){

                if (UI.$(this).offset().top > top) {
                    doresponsive = true;
                }
            });

            if (doresponsive) {

                for (var i = 0; i < children.length; i++) {

                    item  = UI.$(children.eq(i));
                    link  = item.find('a');

                    if (item.css('float') != 'none' && !item.attr('uk-dropdown')) {

                        if (!item.hasClass('uk-disabled')) {

                            clone = item[0].outerHTML.replace('<a ', '<a data-index="'+i+'" ');

                            this.responsivetab.lst.append(clone);
                        }

                        item.addClass('uk-hidden');
                    }
                }
            }

            this.responsivetab[this.responsivetab.lst.children('li').length ? 'removeClass':'addClass']('uk-hidden');
        }
    });

})(UIkit);
/*! UIkit 2.22.0 | http://www.getuikit.com | (c) 2014 YOOtheme | MIT License */
(function(UI){

    "use strict";

    UI.component('cover', {

        defaults: {
            automute : true
        },

        boot: function() {

            // auto init
            UI.ready(function(context) {

                UI.$("[data-uk-cover]", context).each(function(){

                    var ele = UI.$(this);

                    if(!ele.data("cover")) {
                        var plugin = UI.cover(ele, UI.Utils.options(ele.attr("data-uk-cover")));
                    }
                });
            });
        },

        init: function() {

            this.parent = this.element.parent();

            UI.$win.on('load resize orientationchange', UI.Utils.debounce(function(){
                this.check();
            }.bind(this), 100));

            this.on("display.uk.check", function(e) {
                if(this.element.is(":visible")) this.check();
            }.bind(this));

            this.check();

            if (this.element.is('iframe') && this.options.automute) {

                var src = this.element.attr('src');

                this.element.attr('src', '').on('load', function(){

                    this.contentWindow.postMessage('{ "event": "command", "func": "mute", "method":"setVolume", "value":0}', '*');

                }).attr('src', [src, (src.indexOf('?') > -1 ? '&':'?'), 'enablejsapi=1&api=1'].join(''));
            }
        },

        check: function() {

            this.element.css({
                'width'  : '',
                'height' : ''
            });

            this.dimension = {w: this.element.width(), h: this.element.height()};

            if (this.element.attr('width') && !isNaN(this.element.attr('width'))) {
                this.dimension.w = this.element.attr('width');
            }

            if (this.element.attr('height') && !isNaN(this.element.attr('height'))) {
                this.dimension.h = this.element.attr('height');
            }

            this.ratio     = this.dimension.w / this.dimension.h;

            var w = this.parent.width(), h = this.parent.height(), width, height;

            // if element height < parent height (gap underneath)
            if ((w / this.ratio) < h) {

                width  = Math.ceil(h * this.ratio);
                height = h;

            // element width < parent width (gap to right)
            } else {

                width  = w;
                height = Math.ceil(w / this.ratio);
            }

            this.element.css({
                'width'  : width,
                'height' : height
            });
        }
    });

})(UIkit);
/*! UIkit 2.22.0 | http://www.getuikit.com | (c) 2014 YOOtheme | MIT License */
(function(addon) {

    var component;

    if (window.UIkit) {
        component = addon(UIkit);
    }

    if (typeof define == "function" && define.amd) {
        define("uikit-sticky", ["uikit"], function(){
            return component || addon(UIkit);
        });
    }

})(function(UI){

    "use strict";

    var $win         = UI.$win,
        $doc         = UI.$doc,
        sticked      = [],
        direction    = 1;

    UI.component('sticky', {

        defaults: {
            top          : 0,
            bottom       : 0,
            animation    : '',
            clsinit      : 'uk-sticky-init',
            clsactive    : 'uk-active',
            clsinactive  : '',
            getWidthFrom : '',
            showup      : false,
            boundary     : false,
            media        : false,
            target       : false,
            disabled     : false
        },

        boot: function() {

            // should be more efficient than using $win.scroll(checkscrollposition):
            UI.$doc.on('scrolling.uk.document', function(e, data) {
                direction = data.dir.y;
                checkscrollposition();
            });

            UI.$win.on('resize orientationchange', UI.Utils.debounce(function() {

                if (!sticked.length) return;

                for (var i = 0; i < sticked.length; i++) {
                    sticked[i].reset(true);
                    sticked[i].self.computeWrapper();
                }

                checkscrollposition();
            }, 100));

            // init code
            UI.ready(function(context) {

                setTimeout(function(){

                    UI.$("[data-uk-sticky]", context).each(function(){

                        var $ele = UI.$(this);

                        if(!$ele.data("sticky")) {
                            UI.sticky($ele, UI.Utils.options($ele.attr('data-uk-sticky')));
                        }
                    });

                    checkscrollposition();
                }, 0);
            });
        },

        init: function() {

            var wrapper  = UI.$('<div class="uk-sticky-placeholder"></div>'), boundary = this.options.boundary, boundtoparent;

            this.wrapper = this.element.css('margin', 0).wrap(wrapper).parent();

            this.computeWrapper();

            if (boundary) {

                if (boundary === true) {

                    boundary      = this.wrapper.parent();
                    boundtoparent = true;

                } else if (typeof boundary === "string") {
                    boundary = UI.$(boundary);
                }
            }

            this.sticky = {
                self          : this,
                options       : this.options,
                element       : this.element,
                currentTop    : null,
                wrapper       : this.wrapper,
                init          : false,
                getWidthFrom  : this.options.getWidthFrom || this.wrapper,
                boundary      : boundary,
                boundtoparent : boundtoparent,
                top           : 0,
                calcTop       : function() {

                    var top = this.options.top;

                    // dynamic top parameter
                    if (this.options.top && typeof(this.options.top) == 'string') {

                        // e.g. 50vh
                        if (this.options.top.match(/^(-|)(\d+)vh$/)) {
                            top = window.innerHeight * parseInt(this.options.top, 10)/100;
                        // e.g. #elementId, or .class-1,class-2,.class-3 (first found is used)
                        } else {

                            var topElement = UI.$(this.options.top).first();

                            if (topElement.length && topElement.is(':visible')) {
                                top = -1 * ((topElement.offset().top + topElement.outerHeight()) - this.wrapper.offset().top);
                            }
                        }

                    }

                    this.top = top;
                },
                reset         : function(force) {

                    this.calcTop();

                    var finalize = function() {
                        this.element.css({"position":"", "top":"", "width":"", "left":"", "margin":"0"});
                        this.element.removeClass([this.options.animation, 'uk-animation-reverse', this.options.clsactive].join(' '));
                        this.element.addClass(this.options.clsinactive);

                        this.currentTop = null;
                        this.animate    = false;
                    }.bind(this);


                    if (!force && this.options.animation && UI.support.animation && !UI.Utils.isInView(this.wrapper)) {

                        this.animate = true;

                        this.element.removeClass(this.options.animation).one(UI.support.animation.end, function(){
                            finalize();
                        }).width(); // force redraw

                        this.element.addClass(this.options.animation+' '+'uk-animation-reverse');
                    } else {
                        finalize();
                    }
                },

                check: function() {

                    if (this.options.disabled) {
                        return false;
                    }

                    if (this.options.media) {

                        switch(typeof(this.options.media)) {
                            case 'number':
                                if (window.innerWidth < this.options.media) {
                                    return false;
                                }
                                break;
                            case 'string':
                                if (window.matchMedia && !window.matchMedia(this.options.media).matches) {
                                    return false;
                                }
                                break;
                        }
                    }

                    var scrollTop      = $win.scrollTop(),
                        documentHeight = $doc.height(),
                        dwh            = documentHeight - window.innerHeight,
                        extra          = (scrollTop > dwh) ? dwh - scrollTop : 0,
                        elementTop     = this.wrapper.offset().top,
                        etse           = elementTop - this.top - extra,
                        active         = (scrollTop  >= etse);

                    if (active && this.options.showup) {

                        // set inactiv if scrolling down
                        if (direction == 1) {
                            active = false;
                        }

                        // set inactive when wrapper is still in view
                        if (direction == -1 && !this.element.hasClass(this.options.clsactive) && UI.Utils.isInView(this.wrapper)) {
                            active = false;
                        }
                    }

                    return active;
                }
            };

            this.sticky.calcTop();

            sticked.push(this.sticky);
        },

        update: function() {
            checkscrollposition(this.sticky);
        },

        enable: function() {
            this.options.disabled = false;
            this.update();
        },

        disable: function(force) {
            this.options.disabled = true;
            this.sticky.reset(force);
        },

        computeWrapper: function() {

            this.wrapper.css({
                'height' : ['absolute','fixed'].indexOf(this.element.css('position')) == -1 ? this.element.outerHeight() : '',
                'float'  : this.element.css('float') != 'none' ? this.element.css('float') : '',
                'margin' : this.element.css('margin')
            });
        }
    });

    function checkscrollposition(direction) {

        var stickies = arguments.length ? arguments : sticked;

        if (!stickies.length || $win.scrollTop() < 0) return;

        var scrollTop       = $win.scrollTop(),
            documentHeight  = $doc.height(),
            windowHeight    = $win.height(),
            dwh             = documentHeight - windowHeight,
            extra           = (scrollTop > dwh) ? dwh - scrollTop : 0,
            newTop, containerBottom, stickyHeight, sticky;

        for (var i = 0; i < stickies.length; i++) {

            sticky = stickies[i];

            if (!sticky.element.is(":visible") || sticky.animate) {
                continue;
            }

            if (!sticky.check()) {

                if (sticky.currentTop !== null) {
                    sticky.reset();
                }

            } else {

                if (sticky.top < 0) {
                    newTop = 0;
                } else {
                    stickyHeight = sticky.element.outerHeight();
                    newTop = documentHeight - stickyHeight - sticky.top - sticky.options.bottom - scrollTop - extra;
                    newTop = newTop < 0 ? newTop + sticky.top : sticky.top;
                }

                if (sticky.boundary && sticky.boundary.length) {

                    var bTop = sticky.boundary.offset().top;

                    if (sticky.boundtoparent) {
                        containerBottom = documentHeight - (bTop + sticky.boundary.outerHeight()) + parseInt(sticky.boundary.css('padding-bottom'));
                    } else {
                        containerBottom = documentHeight - bTop - parseInt(sticky.boundary.css('margin-top'));
                    }

                    newTop = (scrollTop + stickyHeight) > (documentHeight - containerBottom - (sticky.top < 0 ? 0 : sticky.top)) ? (documentHeight - containerBottom) - (scrollTop + stickyHeight) : newTop;
                }


                if (sticky.currentTop != newTop) {

                    sticky.element.css({
                        "position" : "fixed",
                        "top"      : newTop,
                        "width"    : (typeof sticky.getWidthFrom !== 'undefined') ? UI.$(sticky.getWidthFrom).width() : sticky.element.width(),
                        "left"     : sticky.wrapper.offset().left
                    });

                    if (!sticky.init) {

                        sticky.element.addClass(sticky.options.clsinit);

                        if (location.hash && scrollTop > 0 && sticky.options.target) {

                            var $target = UI.$(location.hash);

                            if ($target.length) {

                                setTimeout((function($target, sticky){

                                    return function() {

                                        sticky.element.width(); // force redraw

                                        var offset       = $target.offset(),
                                            maxoffset    = offset.top + $target.outerHeight(),
                                            stickyOffset = sticky.element.offset(),
                                            stickyHeight = sticky.element.outerHeight(),
                                            stickyMaxOffset = stickyOffset.top + stickyHeight;

                                        if (stickyOffset.top < maxoffset && offset.top < stickyMaxOffset) {
                                            scrollTop = offset.top - stickyHeight - sticky.options.target;
                                            window.scrollTo(0, scrollTop);
                                        }
                                    };

                                })($target, sticky), 0);
                            }
                        }
                    }

                    sticky.element.addClass(sticky.options.clsactive).removeClass(sticky.options.clsinactive);
                    sticky.element.css('margin', '');

                    if (sticky.options.animation && sticky.init && !UI.Utils.isInView(sticky.wrapper)) {
                        sticky.element.addClass(sticky.options.animation);
                    }

                    sticky.currentTop = newTop;
                }
            }

            sticky.init = true;
        }
    }

    return UI.sticky;
});


var topToolbarOffsetTop = 200;
var areTopToolbarElementsVisible = false;

$(document).ready(function(){
    topToolbarOffsetTop = $('.toolbar-top').offset().top;
    areTopToolbarElementsVisible = false;

    $("#copy-year").html(new Date().getFullYear());
});

$(window).on('scroll', function(e){

    if(!areTopToolbarElementsVisible && window.pageYOffset >= topToolbarOffsetTop){
        $("#toolbar-logo,#toolbar-lang,#toolbar-divider").addClass("visible");
        areTopToolbarElementsVisible = true;
    } else if(areTopToolbarElementsVisible && window.pageYOffset <= 20) {
        $("#toolbar-logo,#toolbar-lang,#toolbar-divider").removeClass("visible");
        areTopToolbarElementsVisible = false;
    }

});

function submitMessage(){
    sendMail(
        content = function(){
            return "From: " + $("#send-message-form-connection").val() + "\n\n<br><br>Message:" + $("#send-message-form-message").val();
        },
        onSuccess = function () {
            $("#send-message-form-connection").val("");
            $("#send-message-form-message").val("");
        }
    );
}

function sendMail(content, callBack) {
    $.ajax({
        type: "POST",
        url: 'https://mandrillapp.com/api/1.0/messages/send.json',
        data: {
            'key': 'q5m-17tGhHoYATouRzxK6A',
            'message': {
                'from_email': 'info@admconsult.by',
                'to': [
                    {
                        'email': 'danila.dedkov@gmail.com',
                        'name': '',
                        'type': 'to'
                    }
                ],
                'autotext': 'true',
                'subject': 'ADM consult website message',
                'html': content
            }
        }
    }).done(function (response) {
        if(callBack!=null)
            callBack();
    });
}


function translate(lang) {
    var currentPath = window.location.pathname;
    var normalizedPath = currentPath.replace('en/', '').replace('de/', '').replace('ru/', '');

    var newPath = '/' + lang + normalizedPath;
    if(lang === 'ru')
        newPath = normalizedPath;

    window.location.pathname = newPath;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiIiwic291cmNlcyI6WyJtYWluLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIlxyXG4vKiEgalF1ZXJ5IHYyLjEuNCB8IChjKSAyMDA1LCAyMDE1IGpRdWVyeSBGb3VuZGF0aW9uLCBJbmMuIHwganF1ZXJ5Lm9yZy9saWNlbnNlICovXHJcbiFmdW5jdGlvbihhLGIpe1wib2JqZWN0XCI9PXR5cGVvZiBtb2R1bGUmJlwib2JqZWN0XCI9PXR5cGVvZiBtb2R1bGUuZXhwb3J0cz9tb2R1bGUuZXhwb3J0cz1hLmRvY3VtZW50P2IoYSwhMCk6ZnVuY3Rpb24oYSl7aWYoIWEuZG9jdW1lbnQpdGhyb3cgbmV3IEVycm9yKFwialF1ZXJ5IHJlcXVpcmVzIGEgd2luZG93IHdpdGggYSBkb2N1bWVudFwiKTtyZXR1cm4gYihhKX06YihhKX0oXCJ1bmRlZmluZWRcIiE9dHlwZW9mIHdpbmRvdz93aW5kb3c6dGhpcyxmdW5jdGlvbihhLGIpe3ZhciBjPVtdLGQ9Yy5zbGljZSxlPWMuY29uY2F0LGY9Yy5wdXNoLGc9Yy5pbmRleE9mLGg9e30saT1oLnRvU3RyaW5nLGo9aC5oYXNPd25Qcm9wZXJ0eSxrPXt9LGw9YS5kb2N1bWVudCxtPVwiMi4xLjRcIixuPWZ1bmN0aW9uKGEsYil7cmV0dXJuIG5ldyBuLmZuLmluaXQoYSxiKX0sbz0vXltcXHNcXHVGRUZGXFx4QTBdK3xbXFxzXFx1RkVGRlxceEEwXSskL2cscD0vXi1tcy0vLHE9Ly0oW1xcZGEtel0pL2dpLHI9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYi50b1VwcGVyQ2FzZSgpfTtuLmZuPW4ucHJvdG90eXBlPXtqcXVlcnk6bSxjb25zdHJ1Y3RvcjpuLHNlbGVjdG9yOlwiXCIsbGVuZ3RoOjAsdG9BcnJheTpmdW5jdGlvbigpe3JldHVybiBkLmNhbGwodGhpcyl9LGdldDpmdW5jdGlvbihhKXtyZXR1cm4gbnVsbCE9YT8wPmE/dGhpc1thK3RoaXMubGVuZ3RoXTp0aGlzW2FdOmQuY2FsbCh0aGlzKX0scHVzaFN0YWNrOmZ1bmN0aW9uKGEpe3ZhciBiPW4ubWVyZ2UodGhpcy5jb25zdHJ1Y3RvcigpLGEpO3JldHVybiBiLnByZXZPYmplY3Q9dGhpcyxiLmNvbnRleHQ9dGhpcy5jb250ZXh0LGJ9LGVhY2g6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gbi5lYWNoKHRoaXMsYSxiKX0sbWFwOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLnB1c2hTdGFjayhuLm1hcCh0aGlzLGZ1bmN0aW9uKGIsYyl7cmV0dXJuIGEuY2FsbChiLGMsYil9KSl9LHNsaWNlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucHVzaFN0YWNrKGQuYXBwbHkodGhpcyxhcmd1bWVudHMpKX0sZmlyc3Q6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5lcSgwKX0sbGFzdDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmVxKC0xKX0sZXE6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5sZW5ndGgsYz0rYSsoMD5hP2I6MCk7cmV0dXJuIHRoaXMucHVzaFN0YWNrKGM+PTAmJmI+Yz9bdGhpc1tjXV06W10pfSxlbmQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5wcmV2T2JqZWN0fHx0aGlzLmNvbnN0cnVjdG9yKG51bGwpfSxwdXNoOmYsc29ydDpjLnNvcnQsc3BsaWNlOmMuc3BsaWNlfSxuLmV4dGVuZD1uLmZuLmV4dGVuZD1mdW5jdGlvbigpe3ZhciBhLGIsYyxkLGUsZixnPWFyZ3VtZW50c1swXXx8e30saD0xLGk9YXJndW1lbnRzLmxlbmd0aCxqPSExO2ZvcihcImJvb2xlYW5cIj09dHlwZW9mIGcmJihqPWcsZz1hcmd1bWVudHNbaF18fHt9LGgrKyksXCJvYmplY3RcIj09dHlwZW9mIGd8fG4uaXNGdW5jdGlvbihnKXx8KGc9e30pLGg9PT1pJiYoZz10aGlzLGgtLSk7aT5oO2grKylpZihudWxsIT0oYT1hcmd1bWVudHNbaF0pKWZvcihiIGluIGEpYz1nW2JdLGQ9YVtiXSxnIT09ZCYmKGomJmQmJihuLmlzUGxhaW5PYmplY3QoZCl8fChlPW4uaXNBcnJheShkKSkpPyhlPyhlPSExLGY9YyYmbi5pc0FycmF5KGMpP2M6W10pOmY9YyYmbi5pc1BsYWluT2JqZWN0KGMpP2M6e30sZ1tiXT1uLmV4dGVuZChqLGYsZCkpOnZvaWQgMCE9PWQmJihnW2JdPWQpKTtyZXR1cm4gZ30sbi5leHRlbmQoe2V4cGFuZG86XCJqUXVlcnlcIisobStNYXRoLnJhbmRvbSgpKS5yZXBsYWNlKC9cXEQvZyxcIlwiKSxpc1JlYWR5OiEwLGVycm9yOmZ1bmN0aW9uKGEpe3Rocm93IG5ldyBFcnJvcihhKX0sbm9vcDpmdW5jdGlvbigpe30saXNGdW5jdGlvbjpmdW5jdGlvbihhKXtyZXR1cm5cImZ1bmN0aW9uXCI9PT1uLnR5cGUoYSl9LGlzQXJyYXk6QXJyYXkuaXNBcnJheSxpc1dpbmRvdzpmdW5jdGlvbihhKXtyZXR1cm4gbnVsbCE9YSYmYT09PWEud2luZG93fSxpc051bWVyaWM6ZnVuY3Rpb24oYSl7cmV0dXJuIW4uaXNBcnJheShhKSYmYS1wYXJzZUZsb2F0KGEpKzE+PTB9LGlzUGxhaW5PYmplY3Q6ZnVuY3Rpb24oYSl7cmV0dXJuXCJvYmplY3RcIiE9PW4udHlwZShhKXx8YS5ub2RlVHlwZXx8bi5pc1dpbmRvdyhhKT8hMTphLmNvbnN0cnVjdG9yJiYhai5jYWxsKGEuY29uc3RydWN0b3IucHJvdG90eXBlLFwiaXNQcm90b3R5cGVPZlwiKT8hMTohMH0saXNFbXB0eU9iamVjdDpmdW5jdGlvbihhKXt2YXIgYjtmb3IoYiBpbiBhKXJldHVybiExO3JldHVybiEwfSx0eXBlOmZ1bmN0aW9uKGEpe3JldHVybiBudWxsPT1hP2ErXCJcIjpcIm9iamVjdFwiPT10eXBlb2YgYXx8XCJmdW5jdGlvblwiPT10eXBlb2YgYT9oW2kuY2FsbChhKV18fFwib2JqZWN0XCI6dHlwZW9mIGF9LGdsb2JhbEV2YWw6ZnVuY3Rpb24oYSl7dmFyIGIsYz1ldmFsO2E9bi50cmltKGEpLGEmJigxPT09YS5pbmRleE9mKFwidXNlIHN0cmljdFwiKT8oYj1sLmNyZWF0ZUVsZW1lbnQoXCJzY3JpcHRcIiksYi50ZXh0PWEsbC5oZWFkLmFwcGVuZENoaWxkKGIpLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoYikpOmMoYSkpfSxjYW1lbENhc2U6ZnVuY3Rpb24oYSl7cmV0dXJuIGEucmVwbGFjZShwLFwibXMtXCIpLnJlcGxhY2UocSxyKX0sbm9kZU5hbWU6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYS5ub2RlTmFtZSYmYS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpPT09Yi50b0xvd2VyQ2FzZSgpfSxlYWNoOmZ1bmN0aW9uKGEsYixjKXt2YXIgZCxlPTAsZj1hLmxlbmd0aCxnPXMoYSk7aWYoYyl7aWYoZyl7Zm9yKDtmPmU7ZSsrKWlmKGQ9Yi5hcHBseShhW2VdLGMpLGQ9PT0hMSlicmVha31lbHNlIGZvcihlIGluIGEpaWYoZD1iLmFwcGx5KGFbZV0sYyksZD09PSExKWJyZWFrfWVsc2UgaWYoZyl7Zm9yKDtmPmU7ZSsrKWlmKGQ9Yi5jYWxsKGFbZV0sZSxhW2VdKSxkPT09ITEpYnJlYWt9ZWxzZSBmb3IoZSBpbiBhKWlmKGQ9Yi5jYWxsKGFbZV0sZSxhW2VdKSxkPT09ITEpYnJlYWs7cmV0dXJuIGF9LHRyaW06ZnVuY3Rpb24oYSl7cmV0dXJuIG51bGw9PWE/XCJcIjooYStcIlwiKS5yZXBsYWNlKG8sXCJcIil9LG1ha2VBcnJheTpmdW5jdGlvbihhLGIpe3ZhciBjPWJ8fFtdO3JldHVybiBudWxsIT1hJiYocyhPYmplY3QoYSkpP24ubWVyZ2UoYyxcInN0cmluZ1wiPT10eXBlb2YgYT9bYV06YSk6Zi5jYWxsKGMsYSkpLGN9LGluQXJyYXk6ZnVuY3Rpb24oYSxiLGMpe3JldHVybiBudWxsPT1iPy0xOmcuY2FsbChiLGEsYyl9LG1lcmdlOmZ1bmN0aW9uKGEsYil7Zm9yKHZhciBjPStiLmxlbmd0aCxkPTAsZT1hLmxlbmd0aDtjPmQ7ZCsrKWFbZSsrXT1iW2RdO3JldHVybiBhLmxlbmd0aD1lLGF9LGdyZXA6ZnVuY3Rpb24oYSxiLGMpe2Zvcih2YXIgZCxlPVtdLGY9MCxnPWEubGVuZ3RoLGg9IWM7Zz5mO2YrKylkPSFiKGFbZl0sZiksZCE9PWgmJmUucHVzaChhW2ZdKTtyZXR1cm4gZX0sbWFwOmZ1bmN0aW9uKGEsYixjKXt2YXIgZCxmPTAsZz1hLmxlbmd0aCxoPXMoYSksaT1bXTtpZihoKWZvcig7Zz5mO2YrKylkPWIoYVtmXSxmLGMpLG51bGwhPWQmJmkucHVzaChkKTtlbHNlIGZvcihmIGluIGEpZD1iKGFbZl0sZixjKSxudWxsIT1kJiZpLnB1c2goZCk7cmV0dXJuIGUuYXBwbHkoW10saSl9LGd1aWQ6MSxwcm94eTpmdW5jdGlvbihhLGIpe3ZhciBjLGUsZjtyZXR1cm5cInN0cmluZ1wiPT10eXBlb2YgYiYmKGM9YVtiXSxiPWEsYT1jKSxuLmlzRnVuY3Rpb24oYSk/KGU9ZC5jYWxsKGFyZ3VtZW50cywyKSxmPWZ1bmN0aW9uKCl7cmV0dXJuIGEuYXBwbHkoYnx8dGhpcyxlLmNvbmNhdChkLmNhbGwoYXJndW1lbnRzKSkpfSxmLmd1aWQ9YS5ndWlkPWEuZ3VpZHx8bi5ndWlkKyssZik6dm9pZCAwfSxub3c6RGF0ZS5ub3csc3VwcG9ydDprfSksbi5lYWNoKFwiQm9vbGVhbiBOdW1iZXIgU3RyaW5nIEZ1bmN0aW9uIEFycmF5IERhdGUgUmVnRXhwIE9iamVjdCBFcnJvclwiLnNwbGl0KFwiIFwiKSxmdW5jdGlvbihhLGIpe2hbXCJbb2JqZWN0IFwiK2IrXCJdXCJdPWIudG9Mb3dlckNhc2UoKX0pO2Z1bmN0aW9uIHMoYSl7dmFyIGI9XCJsZW5ndGhcImluIGEmJmEubGVuZ3RoLGM9bi50eXBlKGEpO3JldHVyblwiZnVuY3Rpb25cIj09PWN8fG4uaXNXaW5kb3coYSk/ITE6MT09PWEubm9kZVR5cGUmJmI/ITA6XCJhcnJheVwiPT09Y3x8MD09PWJ8fFwibnVtYmVyXCI9PXR5cGVvZiBiJiZiPjAmJmItMSBpbiBhfXZhciB0PWZ1bmN0aW9uKGEpe3ZhciBiLGMsZCxlLGYsZyxoLGksaixrLGwsbSxuLG8scCxxLHIscyx0LHU9XCJzaXp6bGVcIisxKm5ldyBEYXRlLHY9YS5kb2N1bWVudCx3PTAseD0wLHk9aGEoKSx6PWhhKCksQT1oYSgpLEI9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYT09PWImJihsPSEwKSwwfSxDPTE8PDMxLEQ9e30uaGFzT3duUHJvcGVydHksRT1bXSxGPUUucG9wLEc9RS5wdXNoLEg9RS5wdXNoLEk9RS5zbGljZSxKPWZ1bmN0aW9uKGEsYil7Zm9yKHZhciBjPTAsZD1hLmxlbmd0aDtkPmM7YysrKWlmKGFbY109PT1iKXJldHVybiBjO3JldHVybi0xfSxLPVwiY2hlY2tlZHxzZWxlY3RlZHxhc3luY3xhdXRvZm9jdXN8YXV0b3BsYXl8Y29udHJvbHN8ZGVmZXJ8ZGlzYWJsZWR8aGlkZGVufGlzbWFwfGxvb3B8bXVsdGlwbGV8b3BlbnxyZWFkb25seXxyZXF1aXJlZHxzY29wZWRcIixMPVwiW1xcXFx4MjBcXFxcdFxcXFxyXFxcXG5cXFxcZl1cIixNPVwiKD86XFxcXFxcXFwufFtcXFxcdy1dfFteXFxcXHgwMC1cXFxceGEwXSkrXCIsTj1NLnJlcGxhY2UoXCJ3XCIsXCJ3I1wiKSxPPVwiXFxcXFtcIitMK1wiKihcIitNK1wiKSg/OlwiK0wrXCIqKFsqXiR8IX5dPz0pXCIrTCtcIiooPzonKCg/OlxcXFxcXFxcLnxbXlxcXFxcXFxcJ10pKiknfFxcXCIoKD86XFxcXFxcXFwufFteXFxcXFxcXFxcXFwiXSkqKVxcXCJ8KFwiK04rXCIpKXwpXCIrTCtcIipcXFxcXVwiLFA9XCI6KFwiK00rXCIpKD86XFxcXCgoKCcoKD86XFxcXFxcXFwufFteXFxcXFxcXFwnXSkqKSd8XFxcIigoPzpcXFxcXFxcXC58W15cXFxcXFxcXFxcXCJdKSopXFxcIil8KCg/OlxcXFxcXFxcLnxbXlxcXFxcXFxcKClbXFxcXF1dfFwiK08rXCIpKil8LiopXFxcXCl8KVwiLFE9bmV3IFJlZ0V4cChMK1wiK1wiLFwiZ1wiKSxSPW5ldyBSZWdFeHAoXCJeXCIrTCtcIit8KCg/Ol58W15cXFxcXFxcXF0pKD86XFxcXFxcXFwuKSopXCIrTCtcIiskXCIsXCJnXCIpLFM9bmV3IFJlZ0V4cChcIl5cIitMK1wiKixcIitMK1wiKlwiKSxUPW5ldyBSZWdFeHAoXCJeXCIrTCtcIiooWz4rfl18XCIrTCtcIilcIitMK1wiKlwiKSxVPW5ldyBSZWdFeHAoXCI9XCIrTCtcIiooW15cXFxcXSdcXFwiXSo/KVwiK0wrXCIqXFxcXF1cIixcImdcIiksVj1uZXcgUmVnRXhwKFApLFc9bmV3IFJlZ0V4cChcIl5cIitOK1wiJFwiKSxYPXtJRDpuZXcgUmVnRXhwKFwiXiMoXCIrTStcIilcIiksQ0xBU1M6bmV3IFJlZ0V4cChcIl5cXFxcLihcIitNK1wiKVwiKSxUQUc6bmV3IFJlZ0V4cChcIl4oXCIrTS5yZXBsYWNlKFwid1wiLFwidypcIikrXCIpXCIpLEFUVFI6bmV3IFJlZ0V4cChcIl5cIitPKSxQU0VVRE86bmV3IFJlZ0V4cChcIl5cIitQKSxDSElMRDpuZXcgUmVnRXhwKFwiXjoob25seXxmaXJzdHxsYXN0fG50aHxudGgtbGFzdCktKGNoaWxkfG9mLXR5cGUpKD86XFxcXChcIitMK1wiKihldmVufG9kZHwoKFsrLV18KShcXFxcZCopbnwpXCIrTCtcIiooPzooWystXXwpXCIrTCtcIiooXFxcXGQrKXwpKVwiK0wrXCIqXFxcXCl8KVwiLFwiaVwiKSxib29sOm5ldyBSZWdFeHAoXCJeKD86XCIrSytcIikkXCIsXCJpXCIpLG5lZWRzQ29udGV4dDpuZXcgUmVnRXhwKFwiXlwiK0wrXCIqWz4rfl18OihldmVufG9kZHxlcXxndHxsdHxudGh8Zmlyc3R8bGFzdCkoPzpcXFxcKFwiK0wrXCIqKCg/Oi1cXFxcZCk/XFxcXGQqKVwiK0wrXCIqXFxcXCl8KSg/PVteLV18JClcIixcImlcIil9LFk9L14oPzppbnB1dHxzZWxlY3R8dGV4dGFyZWF8YnV0dG9uKSQvaSxaPS9eaFxcZCQvaSwkPS9eW157XStcXHtcXHMqXFxbbmF0aXZlIFxcdy8sXz0vXig/OiMoW1xcdy1dKyl8KFxcdyspfFxcLihbXFx3LV0rKSkkLyxhYT0vWyt+XS8sYmE9Lyd8XFxcXC9nLGNhPW5ldyBSZWdFeHAoXCJcXFxcXFxcXChbXFxcXGRhLWZdezEsNn1cIitMK1wiP3woXCIrTCtcIil8LilcIixcImlnXCIpLGRhPWZ1bmN0aW9uKGEsYixjKXt2YXIgZD1cIjB4XCIrYi02NTUzNjtyZXR1cm4gZCE9PWR8fGM/YjowPmQ/U3RyaW5nLmZyb21DaGFyQ29kZShkKzY1NTM2KTpTdHJpbmcuZnJvbUNoYXJDb2RlKGQ+PjEwfDU1Mjk2LDEwMjMmZHw1NjMyMCl9LGVhPWZ1bmN0aW9uKCl7bSgpfTt0cnl7SC5hcHBseShFPUkuY2FsbCh2LmNoaWxkTm9kZXMpLHYuY2hpbGROb2RlcyksRVt2LmNoaWxkTm9kZXMubGVuZ3RoXS5ub2RlVHlwZX1jYXRjaChmYSl7SD17YXBwbHk6RS5sZW5ndGg/ZnVuY3Rpb24oYSxiKXtHLmFwcGx5KGEsSS5jYWxsKGIpKX06ZnVuY3Rpb24oYSxiKXt2YXIgYz1hLmxlbmd0aCxkPTA7d2hpbGUoYVtjKytdPWJbZCsrXSk7YS5sZW5ndGg9Yy0xfX19ZnVuY3Rpb24gZ2EoYSxiLGQsZSl7dmFyIGYsaCxqLGssbCxvLHIscyx3LHg7aWYoKGI/Yi5vd25lckRvY3VtZW50fHxiOnYpIT09biYmbShiKSxiPWJ8fG4sZD1kfHxbXSxrPWIubm9kZVR5cGUsXCJzdHJpbmdcIiE9dHlwZW9mIGF8fCFhfHwxIT09ayYmOSE9PWsmJjExIT09aylyZXR1cm4gZDtpZighZSYmcCl7aWYoMTEhPT1rJiYoZj1fLmV4ZWMoYSkpKWlmKGo9ZlsxXSl7aWYoOT09PWspe2lmKGg9Yi5nZXRFbGVtZW50QnlJZChqKSwhaHx8IWgucGFyZW50Tm9kZSlyZXR1cm4gZDtpZihoLmlkPT09ailyZXR1cm4gZC5wdXNoKGgpLGR9ZWxzZSBpZihiLm93bmVyRG9jdW1lbnQmJihoPWIub3duZXJEb2N1bWVudC5nZXRFbGVtZW50QnlJZChqKSkmJnQoYixoKSYmaC5pZD09PWopcmV0dXJuIGQucHVzaChoKSxkfWVsc2V7aWYoZlsyXSlyZXR1cm4gSC5hcHBseShkLGIuZ2V0RWxlbWVudHNCeVRhZ05hbWUoYSkpLGQ7aWYoKGo9ZlszXSkmJmMuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSlyZXR1cm4gSC5hcHBseShkLGIuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShqKSksZH1pZihjLnFzYSYmKCFxfHwhcS50ZXN0KGEpKSl7aWYocz1yPXUsdz1iLHg9MSE9PWsmJmEsMT09PWsmJlwib2JqZWN0XCIhPT1iLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkpe289ZyhhKSwocj1iLmdldEF0dHJpYnV0ZShcImlkXCIpKT9zPXIucmVwbGFjZShiYSxcIlxcXFwkJlwiKTpiLnNldEF0dHJpYnV0ZShcImlkXCIscykscz1cIltpZD0nXCIrcytcIiddIFwiLGw9by5sZW5ndGg7d2hpbGUobC0tKW9bbF09cytyYShvW2xdKTt3PWFhLnRlc3QoYSkmJnBhKGIucGFyZW50Tm9kZSl8fGIseD1vLmpvaW4oXCIsXCIpfWlmKHgpdHJ5e3JldHVybiBILmFwcGx5KGQsdy5xdWVyeVNlbGVjdG9yQWxsKHgpKSxkfWNhdGNoKHkpe31maW5hbGx5e3J8fGIucmVtb3ZlQXR0cmlidXRlKFwiaWRcIil9fX1yZXR1cm4gaShhLnJlcGxhY2UoUixcIiQxXCIpLGIsZCxlKX1mdW5jdGlvbiBoYSgpe3ZhciBhPVtdO2Z1bmN0aW9uIGIoYyxlKXtyZXR1cm4gYS5wdXNoKGMrXCIgXCIpPmQuY2FjaGVMZW5ndGgmJmRlbGV0ZSBiW2Euc2hpZnQoKV0sYltjK1wiIFwiXT1lfXJldHVybiBifWZ1bmN0aW9uIGlhKGEpe3JldHVybiBhW3VdPSEwLGF9ZnVuY3Rpb24gamEoYSl7dmFyIGI9bi5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO3RyeXtyZXR1cm4hIWEoYil9Y2F0Y2goYyl7cmV0dXJuITF9ZmluYWxseXtiLnBhcmVudE5vZGUmJmIucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChiKSxiPW51bGx9fWZ1bmN0aW9uIGthKGEsYil7dmFyIGM9YS5zcGxpdChcInxcIiksZT1hLmxlbmd0aDt3aGlsZShlLS0pZC5hdHRySGFuZGxlW2NbZV1dPWJ9ZnVuY3Rpb24gbGEoYSxiKXt2YXIgYz1iJiZhLGQ9YyYmMT09PWEubm9kZVR5cGUmJjE9PT1iLm5vZGVUeXBlJiYofmIuc291cmNlSW5kZXh8fEMpLSh+YS5zb3VyY2VJbmRleHx8Qyk7aWYoZClyZXR1cm4gZDtpZihjKXdoaWxlKGM9Yy5uZXh0U2libGluZylpZihjPT09YilyZXR1cm4tMTtyZXR1cm4gYT8xOi0xfWZ1bmN0aW9uIG1hKGEpe3JldHVybiBmdW5jdGlvbihiKXt2YXIgYz1iLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk7cmV0dXJuXCJpbnB1dFwiPT09YyYmYi50eXBlPT09YX19ZnVuY3Rpb24gbmEoYSl7cmV0dXJuIGZ1bmN0aW9uKGIpe3ZhciBjPWIubm9kZU5hbWUudG9Mb3dlckNhc2UoKTtyZXR1cm4oXCJpbnB1dFwiPT09Y3x8XCJidXR0b25cIj09PWMpJiZiLnR5cGU9PT1hfX1mdW5jdGlvbiBvYShhKXtyZXR1cm4gaWEoZnVuY3Rpb24oYil7cmV0dXJuIGI9K2IsaWEoZnVuY3Rpb24oYyxkKXt2YXIgZSxmPWEoW10sYy5sZW5ndGgsYiksZz1mLmxlbmd0aDt3aGlsZShnLS0pY1tlPWZbZ11dJiYoY1tlXT0hKGRbZV09Y1tlXSkpfSl9KX1mdW5jdGlvbiBwYShhKXtyZXR1cm4gYSYmXCJ1bmRlZmluZWRcIiE9dHlwZW9mIGEuZ2V0RWxlbWVudHNCeVRhZ05hbWUmJmF9Yz1nYS5zdXBwb3J0PXt9LGY9Z2EuaXNYTUw9ZnVuY3Rpb24oYSl7dmFyIGI9YSYmKGEub3duZXJEb2N1bWVudHx8YSkuZG9jdW1lbnRFbGVtZW50O3JldHVybiBiP1wiSFRNTFwiIT09Yi5ub2RlTmFtZTohMX0sbT1nYS5zZXREb2N1bWVudD1mdW5jdGlvbihhKXt2YXIgYixlLGc9YT9hLm93bmVyRG9jdW1lbnR8fGE6djtyZXR1cm4gZyE9PW4mJjk9PT1nLm5vZGVUeXBlJiZnLmRvY3VtZW50RWxlbWVudD8obj1nLG89Zy5kb2N1bWVudEVsZW1lbnQsZT1nLmRlZmF1bHRWaWV3LGUmJmUhPT1lLnRvcCYmKGUuYWRkRXZlbnRMaXN0ZW5lcj9lLmFkZEV2ZW50TGlzdGVuZXIoXCJ1bmxvYWRcIixlYSwhMSk6ZS5hdHRhY2hFdmVudCYmZS5hdHRhY2hFdmVudChcIm9udW5sb2FkXCIsZWEpKSxwPSFmKGcpLGMuYXR0cmlidXRlcz1qYShmdW5jdGlvbihhKXtyZXR1cm4gYS5jbGFzc05hbWU9XCJpXCIsIWEuZ2V0QXR0cmlidXRlKFwiY2xhc3NOYW1lXCIpfSksYy5nZXRFbGVtZW50c0J5VGFnTmFtZT1qYShmdW5jdGlvbihhKXtyZXR1cm4gYS5hcHBlbmRDaGlsZChnLmNyZWF0ZUNvbW1lbnQoXCJcIikpLCFhLmdldEVsZW1lbnRzQnlUYWdOYW1lKFwiKlwiKS5sZW5ndGh9KSxjLmdldEVsZW1lbnRzQnlDbGFzc05hbWU9JC50ZXN0KGcuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSksYy5nZXRCeUlkPWphKGZ1bmN0aW9uKGEpe3JldHVybiBvLmFwcGVuZENoaWxkKGEpLmlkPXUsIWcuZ2V0RWxlbWVudHNCeU5hbWV8fCFnLmdldEVsZW1lbnRzQnlOYW1lKHUpLmxlbmd0aH0pLGMuZ2V0QnlJZD8oZC5maW5kLklEPWZ1bmN0aW9uKGEsYil7aWYoXCJ1bmRlZmluZWRcIiE9dHlwZW9mIGIuZ2V0RWxlbWVudEJ5SWQmJnApe3ZhciBjPWIuZ2V0RWxlbWVudEJ5SWQoYSk7cmV0dXJuIGMmJmMucGFyZW50Tm9kZT9bY106W119fSxkLmZpbHRlci5JRD1mdW5jdGlvbihhKXt2YXIgYj1hLnJlcGxhY2UoY2EsZGEpO3JldHVybiBmdW5jdGlvbihhKXtyZXR1cm4gYS5nZXRBdHRyaWJ1dGUoXCJpZFwiKT09PWJ9fSk6KGRlbGV0ZSBkLmZpbmQuSUQsZC5maWx0ZXIuSUQ9ZnVuY3Rpb24oYSl7dmFyIGI9YS5yZXBsYWNlKGNhLGRhKTtyZXR1cm4gZnVuY3Rpb24oYSl7dmFyIGM9XCJ1bmRlZmluZWRcIiE9dHlwZW9mIGEuZ2V0QXR0cmlidXRlTm9kZSYmYS5nZXRBdHRyaWJ1dGVOb2RlKFwiaWRcIik7cmV0dXJuIGMmJmMudmFsdWU9PT1ifX0pLGQuZmluZC5UQUc9Yy5nZXRFbGVtZW50c0J5VGFnTmFtZT9mdW5jdGlvbihhLGIpe3JldHVyblwidW5kZWZpbmVkXCIhPXR5cGVvZiBiLmdldEVsZW1lbnRzQnlUYWdOYW1lP2IuZ2V0RWxlbWVudHNCeVRhZ05hbWUoYSk6Yy5xc2E/Yi5xdWVyeVNlbGVjdG9yQWxsKGEpOnZvaWQgMH06ZnVuY3Rpb24oYSxiKXt2YXIgYyxkPVtdLGU9MCxmPWIuZ2V0RWxlbWVudHNCeVRhZ05hbWUoYSk7aWYoXCIqXCI9PT1hKXt3aGlsZShjPWZbZSsrXSkxPT09Yy5ub2RlVHlwZSYmZC5wdXNoKGMpO3JldHVybiBkfXJldHVybiBmfSxkLmZpbmQuQ0xBU1M9Yy5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lJiZmdW5jdGlvbihhLGIpe3JldHVybiBwP2IuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShhKTp2b2lkIDB9LHI9W10scT1bXSwoYy5xc2E9JC50ZXN0KGcucXVlcnlTZWxlY3RvckFsbCkpJiYoamEoZnVuY3Rpb24oYSl7by5hcHBlbmRDaGlsZChhKS5pbm5lckhUTUw9XCI8YSBpZD0nXCIrdStcIic+PC9hPjxzZWxlY3QgaWQ9J1wiK3UrXCItXFxmXScgbXNhbGxvd2NhcHR1cmU9Jyc+PG9wdGlvbiBzZWxlY3RlZD0nJz48L29wdGlvbj48L3NlbGVjdD5cIixhLnF1ZXJ5U2VsZWN0b3JBbGwoXCJbbXNhbGxvd2NhcHR1cmVePScnXVwiKS5sZW5ndGgmJnEucHVzaChcIlsqXiRdPVwiK0wrXCIqKD86Jyd8XFxcIlxcXCIpXCIpLGEucXVlcnlTZWxlY3RvckFsbChcIltzZWxlY3RlZF1cIikubGVuZ3RofHxxLnB1c2goXCJcXFxcW1wiK0wrXCIqKD86dmFsdWV8XCIrSytcIilcIiksYS5xdWVyeVNlbGVjdG9yQWxsKFwiW2lkfj1cIit1K1wiLV1cIikubGVuZ3RofHxxLnB1c2goXCJ+PVwiKSxhLnF1ZXJ5U2VsZWN0b3JBbGwoXCI6Y2hlY2tlZFwiKS5sZW5ndGh8fHEucHVzaChcIjpjaGVja2VkXCIpLGEucXVlcnlTZWxlY3RvckFsbChcImEjXCIrdStcIisqXCIpLmxlbmd0aHx8cS5wdXNoKFwiLiMuK1srfl1cIil9KSxqYShmdW5jdGlvbihhKXt2YXIgYj1nLmNyZWF0ZUVsZW1lbnQoXCJpbnB1dFwiKTtiLnNldEF0dHJpYnV0ZShcInR5cGVcIixcImhpZGRlblwiKSxhLmFwcGVuZENoaWxkKGIpLnNldEF0dHJpYnV0ZShcIm5hbWVcIixcIkRcIiksYS5xdWVyeVNlbGVjdG9yQWxsKFwiW25hbWU9ZF1cIikubGVuZ3RoJiZxLnB1c2goXCJuYW1lXCIrTCtcIipbKl4kfCF+XT89XCIpLGEucXVlcnlTZWxlY3RvckFsbChcIjplbmFibGVkXCIpLmxlbmd0aHx8cS5wdXNoKFwiOmVuYWJsZWRcIixcIjpkaXNhYmxlZFwiKSxhLnF1ZXJ5U2VsZWN0b3JBbGwoXCIqLDp4XCIpLHEucHVzaChcIiwuKjpcIil9KSksKGMubWF0Y2hlc1NlbGVjdG9yPSQudGVzdChzPW8ubWF0Y2hlc3x8by53ZWJraXRNYXRjaGVzU2VsZWN0b3J8fG8ubW96TWF0Y2hlc1NlbGVjdG9yfHxvLm9NYXRjaGVzU2VsZWN0b3J8fG8ubXNNYXRjaGVzU2VsZWN0b3IpKSYmamEoZnVuY3Rpb24oYSl7Yy5kaXNjb25uZWN0ZWRNYXRjaD1zLmNhbGwoYSxcImRpdlwiKSxzLmNhbGwoYSxcIltzIT0nJ106eFwiKSxyLnB1c2goXCIhPVwiLFApfSkscT1xLmxlbmd0aCYmbmV3IFJlZ0V4cChxLmpvaW4oXCJ8XCIpKSxyPXIubGVuZ3RoJiZuZXcgUmVnRXhwKHIuam9pbihcInxcIikpLGI9JC50ZXN0KG8uY29tcGFyZURvY3VtZW50UG9zaXRpb24pLHQ9Ynx8JC50ZXN0KG8uY29udGFpbnMpP2Z1bmN0aW9uKGEsYil7dmFyIGM9OT09PWEubm9kZVR5cGU/YS5kb2N1bWVudEVsZW1lbnQ6YSxkPWImJmIucGFyZW50Tm9kZTtyZXR1cm4gYT09PWR8fCEoIWR8fDEhPT1kLm5vZGVUeXBlfHwhKGMuY29udGFpbnM/Yy5jb250YWlucyhkKTphLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uJiYxNiZhLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uKGQpKSl9OmZ1bmN0aW9uKGEsYil7aWYoYil3aGlsZShiPWIucGFyZW50Tm9kZSlpZihiPT09YSlyZXR1cm4hMDtyZXR1cm4hMX0sQj1iP2Z1bmN0aW9uKGEsYil7aWYoYT09PWIpcmV0dXJuIGw9ITAsMDt2YXIgZD0hYS5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbi0hYi5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbjtyZXR1cm4gZD9kOihkPShhLm93bmVyRG9jdW1lbnR8fGEpPT09KGIub3duZXJEb2N1bWVudHx8Yik/YS5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbihiKToxLDEmZHx8IWMuc29ydERldGFjaGVkJiZiLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uKGEpPT09ZD9hPT09Z3x8YS5vd25lckRvY3VtZW50PT09diYmdCh2LGEpPy0xOmI9PT1nfHxiLm93bmVyRG9jdW1lbnQ9PT12JiZ0KHYsYik/MTprP0ooayxhKS1KKGssYik6MDo0JmQ/LTE6MSl9OmZ1bmN0aW9uKGEsYil7aWYoYT09PWIpcmV0dXJuIGw9ITAsMDt2YXIgYyxkPTAsZT1hLnBhcmVudE5vZGUsZj1iLnBhcmVudE5vZGUsaD1bYV0saT1bYl07aWYoIWV8fCFmKXJldHVybiBhPT09Zz8tMTpiPT09Zz8xOmU/LTE6Zj8xOms/SihrLGEpLUooayxiKTowO2lmKGU9PT1mKXJldHVybiBsYShhLGIpO2M9YTt3aGlsZShjPWMucGFyZW50Tm9kZSloLnVuc2hpZnQoYyk7Yz1iO3doaWxlKGM9Yy5wYXJlbnROb2RlKWkudW5zaGlmdChjKTt3aGlsZShoW2RdPT09aVtkXSlkKys7cmV0dXJuIGQ/bGEoaFtkXSxpW2RdKTpoW2RdPT09dj8tMTppW2RdPT09dj8xOjB9LGcpOm59LGdhLm1hdGNoZXM9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gZ2EoYSxudWxsLG51bGwsYil9LGdhLm1hdGNoZXNTZWxlY3Rvcj1mdW5jdGlvbihhLGIpe2lmKChhLm93bmVyRG9jdW1lbnR8fGEpIT09biYmbShhKSxiPWIucmVwbGFjZShVLFwiPSckMSddXCIpLCEoIWMubWF0Y2hlc1NlbGVjdG9yfHwhcHx8ciYmci50ZXN0KGIpfHxxJiZxLnRlc3QoYikpKXRyeXt2YXIgZD1zLmNhbGwoYSxiKTtpZihkfHxjLmRpc2Nvbm5lY3RlZE1hdGNofHxhLmRvY3VtZW50JiYxMSE9PWEuZG9jdW1lbnQubm9kZVR5cGUpcmV0dXJuIGR9Y2F0Y2goZSl7fXJldHVybiBnYShiLG4sbnVsbCxbYV0pLmxlbmd0aD4wfSxnYS5jb250YWlucz1mdW5jdGlvbihhLGIpe3JldHVybihhLm93bmVyRG9jdW1lbnR8fGEpIT09biYmbShhKSx0KGEsYil9LGdhLmF0dHI9ZnVuY3Rpb24oYSxiKXsoYS5vd25lckRvY3VtZW50fHxhKSE9PW4mJm0oYSk7dmFyIGU9ZC5hdHRySGFuZGxlW2IudG9Mb3dlckNhc2UoKV0sZj1lJiZELmNhbGwoZC5hdHRySGFuZGxlLGIudG9Mb3dlckNhc2UoKSk/ZShhLGIsIXApOnZvaWQgMDtyZXR1cm4gdm9pZCAwIT09Zj9mOmMuYXR0cmlidXRlc3x8IXA/YS5nZXRBdHRyaWJ1dGUoYik6KGY9YS5nZXRBdHRyaWJ1dGVOb2RlKGIpKSYmZi5zcGVjaWZpZWQ/Zi52YWx1ZTpudWxsfSxnYS5lcnJvcj1mdW5jdGlvbihhKXt0aHJvdyBuZXcgRXJyb3IoXCJTeW50YXggZXJyb3IsIHVucmVjb2duaXplZCBleHByZXNzaW9uOiBcIithKX0sZ2EudW5pcXVlU29ydD1mdW5jdGlvbihhKXt2YXIgYixkPVtdLGU9MCxmPTA7aWYobD0hYy5kZXRlY3REdXBsaWNhdGVzLGs9IWMuc29ydFN0YWJsZSYmYS5zbGljZSgwKSxhLnNvcnQoQiksbCl7d2hpbGUoYj1hW2YrK10pYj09PWFbZl0mJihlPWQucHVzaChmKSk7d2hpbGUoZS0tKWEuc3BsaWNlKGRbZV0sMSl9cmV0dXJuIGs9bnVsbCxhfSxlPWdhLmdldFRleHQ9ZnVuY3Rpb24oYSl7dmFyIGIsYz1cIlwiLGQ9MCxmPWEubm9kZVR5cGU7aWYoZil7aWYoMT09PWZ8fDk9PT1mfHwxMT09PWYpe2lmKFwic3RyaW5nXCI9PXR5cGVvZiBhLnRleHRDb250ZW50KXJldHVybiBhLnRleHRDb250ZW50O2ZvcihhPWEuZmlyc3RDaGlsZDthO2E9YS5uZXh0U2libGluZyljKz1lKGEpfWVsc2UgaWYoMz09PWZ8fDQ9PT1mKXJldHVybiBhLm5vZGVWYWx1ZX1lbHNlIHdoaWxlKGI9YVtkKytdKWMrPWUoYik7cmV0dXJuIGN9LGQ9Z2Euc2VsZWN0b3JzPXtjYWNoZUxlbmd0aDo1MCxjcmVhdGVQc2V1ZG86aWEsbWF0Y2g6WCxhdHRySGFuZGxlOnt9LGZpbmQ6e30scmVsYXRpdmU6e1wiPlwiOntkaXI6XCJwYXJlbnROb2RlXCIsZmlyc3Q6ITB9LFwiIFwiOntkaXI6XCJwYXJlbnROb2RlXCJ9LFwiK1wiOntkaXI6XCJwcmV2aW91c1NpYmxpbmdcIixmaXJzdDohMH0sXCJ+XCI6e2RpcjpcInByZXZpb3VzU2libGluZ1wifX0scHJlRmlsdGVyOntBVFRSOmZ1bmN0aW9uKGEpe3JldHVybiBhWzFdPWFbMV0ucmVwbGFjZShjYSxkYSksYVszXT0oYVszXXx8YVs0XXx8YVs1XXx8XCJcIikucmVwbGFjZShjYSxkYSksXCJ+PVwiPT09YVsyXSYmKGFbM109XCIgXCIrYVszXStcIiBcIiksYS5zbGljZSgwLDQpfSxDSElMRDpmdW5jdGlvbihhKXtyZXR1cm4gYVsxXT1hWzFdLnRvTG93ZXJDYXNlKCksXCJudGhcIj09PWFbMV0uc2xpY2UoMCwzKT8oYVszXXx8Z2EuZXJyb3IoYVswXSksYVs0XT0rKGFbNF0/YVs1XSsoYVs2XXx8MSk6MiooXCJldmVuXCI9PT1hWzNdfHxcIm9kZFwiPT09YVszXSkpLGFbNV09KyhhWzddK2FbOF18fFwib2RkXCI9PT1hWzNdKSk6YVszXSYmZ2EuZXJyb3IoYVswXSksYX0sUFNFVURPOmZ1bmN0aW9uKGEpe3ZhciBiLGM9IWFbNl0mJmFbMl07cmV0dXJuIFguQ0hJTEQudGVzdChhWzBdKT9udWxsOihhWzNdP2FbMl09YVs0XXx8YVs1XXx8XCJcIjpjJiZWLnRlc3QoYykmJihiPWcoYywhMCkpJiYoYj1jLmluZGV4T2YoXCIpXCIsYy5sZW5ndGgtYiktYy5sZW5ndGgpJiYoYVswXT1hWzBdLnNsaWNlKDAsYiksYVsyXT1jLnNsaWNlKDAsYikpLGEuc2xpY2UoMCwzKSl9fSxmaWx0ZXI6e1RBRzpmdW5jdGlvbihhKXt2YXIgYj1hLnJlcGxhY2UoY2EsZGEpLnRvTG93ZXJDYXNlKCk7cmV0dXJuXCIqXCI9PT1hP2Z1bmN0aW9uKCl7cmV0dXJuITB9OmZ1bmN0aW9uKGEpe3JldHVybiBhLm5vZGVOYW1lJiZhLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk9PT1ifX0sQ0xBU1M6ZnVuY3Rpb24oYSl7dmFyIGI9eVthK1wiIFwiXTtyZXR1cm4gYnx8KGI9bmV3IFJlZ0V4cChcIihefFwiK0wrXCIpXCIrYStcIihcIitMK1wifCQpXCIpKSYmeShhLGZ1bmN0aW9uKGEpe3JldHVybiBiLnRlc3QoXCJzdHJpbmdcIj09dHlwZW9mIGEuY2xhc3NOYW1lJiZhLmNsYXNzTmFtZXx8XCJ1bmRlZmluZWRcIiE9dHlwZW9mIGEuZ2V0QXR0cmlidXRlJiZhLmdldEF0dHJpYnV0ZShcImNsYXNzXCIpfHxcIlwiKX0pfSxBVFRSOmZ1bmN0aW9uKGEsYixjKXtyZXR1cm4gZnVuY3Rpb24oZCl7dmFyIGU9Z2EuYXR0cihkLGEpO3JldHVybiBudWxsPT1lP1wiIT1cIj09PWI6Yj8oZSs9XCJcIixcIj1cIj09PWI/ZT09PWM6XCIhPVwiPT09Yj9lIT09YzpcIl49XCI9PT1iP2MmJjA9PT1lLmluZGV4T2YoYyk6XCIqPVwiPT09Yj9jJiZlLmluZGV4T2YoYyk+LTE6XCIkPVwiPT09Yj9jJiZlLnNsaWNlKC1jLmxlbmd0aCk9PT1jOlwifj1cIj09PWI/KFwiIFwiK2UucmVwbGFjZShRLFwiIFwiKStcIiBcIikuaW5kZXhPZihjKT4tMTpcInw9XCI9PT1iP2U9PT1jfHxlLnNsaWNlKDAsYy5sZW5ndGgrMSk9PT1jK1wiLVwiOiExKTohMH19LENISUxEOmZ1bmN0aW9uKGEsYixjLGQsZSl7dmFyIGY9XCJudGhcIiE9PWEuc2xpY2UoMCwzKSxnPVwibGFzdFwiIT09YS5zbGljZSgtNCksaD1cIm9mLXR5cGVcIj09PWI7cmV0dXJuIDE9PT1kJiYwPT09ZT9mdW5jdGlvbihhKXtyZXR1cm4hIWEucGFyZW50Tm9kZX06ZnVuY3Rpb24oYixjLGkpe3ZhciBqLGssbCxtLG4sbyxwPWYhPT1nP1wibmV4dFNpYmxpbmdcIjpcInByZXZpb3VzU2libGluZ1wiLHE9Yi5wYXJlbnROb2RlLHI9aCYmYi5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpLHM9IWkmJiFoO2lmKHEpe2lmKGYpe3doaWxlKHApe2w9Yjt3aGlsZShsPWxbcF0paWYoaD9sLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk9PT1yOjE9PT1sLm5vZGVUeXBlKXJldHVybiExO289cD1cIm9ubHlcIj09PWEmJiFvJiZcIm5leHRTaWJsaW5nXCJ9cmV0dXJuITB9aWYobz1bZz9xLmZpcnN0Q2hpbGQ6cS5sYXN0Q2hpbGRdLGcmJnMpe2s9cVt1XXx8KHFbdV09e30pLGo9a1thXXx8W10sbj1qWzBdPT09dyYmalsxXSxtPWpbMF09PT13JiZqWzJdLGw9biYmcS5jaGlsZE5vZGVzW25dO3doaWxlKGw9KytuJiZsJiZsW3BdfHwobT1uPTApfHxvLnBvcCgpKWlmKDE9PT1sLm5vZGVUeXBlJiYrK20mJmw9PT1iKXtrW2FdPVt3LG4sbV07YnJlYWt9fWVsc2UgaWYocyYmKGo9KGJbdV18fChiW3VdPXt9KSlbYV0pJiZqWzBdPT09dyltPWpbMV07ZWxzZSB3aGlsZShsPSsrbiYmbCYmbFtwXXx8KG09bj0wKXx8by5wb3AoKSlpZigoaD9sLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk9PT1yOjE9PT1sLm5vZGVUeXBlKSYmKyttJiYocyYmKChsW3VdfHwobFt1XT17fSkpW2FdPVt3LG1dKSxsPT09YikpYnJlYWs7cmV0dXJuIG0tPWUsbT09PWR8fG0lZD09PTAmJm0vZD49MH19fSxQU0VVRE86ZnVuY3Rpb24oYSxiKXt2YXIgYyxlPWQucHNldWRvc1thXXx8ZC5zZXRGaWx0ZXJzW2EudG9Mb3dlckNhc2UoKV18fGdhLmVycm9yKFwidW5zdXBwb3J0ZWQgcHNldWRvOiBcIithKTtyZXR1cm4gZVt1XT9lKGIpOmUubGVuZ3RoPjE/KGM9W2EsYSxcIlwiLGJdLGQuc2V0RmlsdGVycy5oYXNPd25Qcm9wZXJ0eShhLnRvTG93ZXJDYXNlKCkpP2lhKGZ1bmN0aW9uKGEsYyl7dmFyIGQsZj1lKGEsYiksZz1mLmxlbmd0aDt3aGlsZShnLS0pZD1KKGEsZltnXSksYVtkXT0hKGNbZF09ZltnXSl9KTpmdW5jdGlvbihhKXtyZXR1cm4gZShhLDAsYyl9KTplfX0scHNldWRvczp7bm90OmlhKGZ1bmN0aW9uKGEpe3ZhciBiPVtdLGM9W10sZD1oKGEucmVwbGFjZShSLFwiJDFcIikpO3JldHVybiBkW3VdP2lhKGZ1bmN0aW9uKGEsYixjLGUpe3ZhciBmLGc9ZChhLG51bGwsZSxbXSksaD1hLmxlbmd0aDt3aGlsZShoLS0pKGY9Z1toXSkmJihhW2hdPSEoYltoXT1mKSl9KTpmdW5jdGlvbihhLGUsZil7cmV0dXJuIGJbMF09YSxkKGIsbnVsbCxmLGMpLGJbMF09bnVsbCwhYy5wb3AoKX19KSxoYXM6aWEoZnVuY3Rpb24oYSl7cmV0dXJuIGZ1bmN0aW9uKGIpe3JldHVybiBnYShhLGIpLmxlbmd0aD4wfX0pLGNvbnRhaW5zOmlhKGZ1bmN0aW9uKGEpe3JldHVybiBhPWEucmVwbGFjZShjYSxkYSksZnVuY3Rpb24oYil7cmV0dXJuKGIudGV4dENvbnRlbnR8fGIuaW5uZXJUZXh0fHxlKGIpKS5pbmRleE9mKGEpPi0xfX0pLGxhbmc6aWEoZnVuY3Rpb24oYSl7cmV0dXJuIFcudGVzdChhfHxcIlwiKXx8Z2EuZXJyb3IoXCJ1bnN1cHBvcnRlZCBsYW5nOiBcIithKSxhPWEucmVwbGFjZShjYSxkYSkudG9Mb3dlckNhc2UoKSxmdW5jdGlvbihiKXt2YXIgYztkbyBpZihjPXA/Yi5sYW5nOmIuZ2V0QXR0cmlidXRlKFwieG1sOmxhbmdcIil8fGIuZ2V0QXR0cmlidXRlKFwibGFuZ1wiKSlyZXR1cm4gYz1jLnRvTG93ZXJDYXNlKCksYz09PWF8fDA9PT1jLmluZGV4T2YoYStcIi1cIik7d2hpbGUoKGI9Yi5wYXJlbnROb2RlKSYmMT09PWIubm9kZVR5cGUpO3JldHVybiExfX0pLHRhcmdldDpmdW5jdGlvbihiKXt2YXIgYz1hLmxvY2F0aW9uJiZhLmxvY2F0aW9uLmhhc2g7cmV0dXJuIGMmJmMuc2xpY2UoMSk9PT1iLmlkfSxyb290OmZ1bmN0aW9uKGEpe3JldHVybiBhPT09b30sZm9jdXM6ZnVuY3Rpb24oYSl7cmV0dXJuIGE9PT1uLmFjdGl2ZUVsZW1lbnQmJighbi5oYXNGb2N1c3x8bi5oYXNGb2N1cygpKSYmISEoYS50eXBlfHxhLmhyZWZ8fH5hLnRhYkluZGV4KX0sZW5hYmxlZDpmdW5jdGlvbihhKXtyZXR1cm4gYS5kaXNhYmxlZD09PSExfSxkaXNhYmxlZDpmdW5jdGlvbihhKXtyZXR1cm4gYS5kaXNhYmxlZD09PSEwfSxjaGVja2VkOmZ1bmN0aW9uKGEpe3ZhciBiPWEubm9kZU5hbWUudG9Mb3dlckNhc2UoKTtyZXR1cm5cImlucHV0XCI9PT1iJiYhIWEuY2hlY2tlZHx8XCJvcHRpb25cIj09PWImJiEhYS5zZWxlY3RlZH0sc2VsZWN0ZWQ6ZnVuY3Rpb24oYSl7cmV0dXJuIGEucGFyZW50Tm9kZSYmYS5wYXJlbnROb2RlLnNlbGVjdGVkSW5kZXgsYS5zZWxlY3RlZD09PSEwfSxlbXB0eTpmdW5jdGlvbihhKXtmb3IoYT1hLmZpcnN0Q2hpbGQ7YTthPWEubmV4dFNpYmxpbmcpaWYoYS5ub2RlVHlwZTw2KXJldHVybiExO3JldHVybiEwfSxwYXJlbnQ6ZnVuY3Rpb24oYSl7cmV0dXJuIWQucHNldWRvcy5lbXB0eShhKX0saGVhZGVyOmZ1bmN0aW9uKGEpe3JldHVybiBaLnRlc3QoYS5ub2RlTmFtZSl9LGlucHV0OmZ1bmN0aW9uKGEpe3JldHVybiBZLnRlc3QoYS5ub2RlTmFtZSl9LGJ1dHRvbjpmdW5jdGlvbihhKXt2YXIgYj1hLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk7cmV0dXJuXCJpbnB1dFwiPT09YiYmXCJidXR0b25cIj09PWEudHlwZXx8XCJidXR0b25cIj09PWJ9LHRleHQ6ZnVuY3Rpb24oYSl7dmFyIGI7cmV0dXJuXCJpbnB1dFwiPT09YS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpJiZcInRleHRcIj09PWEudHlwZSYmKG51bGw9PShiPWEuZ2V0QXR0cmlidXRlKFwidHlwZVwiKSl8fFwidGV4dFwiPT09Yi50b0xvd2VyQ2FzZSgpKX0sZmlyc3Q6b2EoZnVuY3Rpb24oKXtyZXR1cm5bMF19KSxsYXN0Om9hKGZ1bmN0aW9uKGEsYil7cmV0dXJuW2ItMV19KSxlcTpvYShmdW5jdGlvbihhLGIsYyl7cmV0dXJuWzA+Yz9jK2I6Y119KSxldmVuOm9hKGZ1bmN0aW9uKGEsYil7Zm9yKHZhciBjPTA7Yj5jO2MrPTIpYS5wdXNoKGMpO3JldHVybiBhfSksb2RkOm9hKGZ1bmN0aW9uKGEsYil7Zm9yKHZhciBjPTE7Yj5jO2MrPTIpYS5wdXNoKGMpO3JldHVybiBhfSksbHQ6b2EoZnVuY3Rpb24oYSxiLGMpe2Zvcih2YXIgZD0wPmM/YytiOmM7LS1kPj0wOylhLnB1c2goZCk7cmV0dXJuIGF9KSxndDpvYShmdW5jdGlvbihhLGIsYyl7Zm9yKHZhciBkPTA+Yz9jK2I6YzsrK2Q8YjspYS5wdXNoKGQpO3JldHVybiBhfSl9fSxkLnBzZXVkb3MubnRoPWQucHNldWRvcy5lcTtmb3IoYiBpbntyYWRpbzohMCxjaGVja2JveDohMCxmaWxlOiEwLHBhc3N3b3JkOiEwLGltYWdlOiEwfSlkLnBzZXVkb3NbYl09bWEoYik7Zm9yKGIgaW57c3VibWl0OiEwLHJlc2V0OiEwfSlkLnBzZXVkb3NbYl09bmEoYik7ZnVuY3Rpb24gcWEoKXt9cWEucHJvdG90eXBlPWQuZmlsdGVycz1kLnBzZXVkb3MsZC5zZXRGaWx0ZXJzPW5ldyBxYSxnPWdhLnRva2VuaXplPWZ1bmN0aW9uKGEsYil7dmFyIGMsZSxmLGcsaCxpLGosaz16W2ErXCIgXCJdO2lmKGspcmV0dXJuIGI/MDprLnNsaWNlKDApO2g9YSxpPVtdLGo9ZC5wcmVGaWx0ZXI7d2hpbGUoaCl7KCFjfHwoZT1TLmV4ZWMoaCkpKSYmKGUmJihoPWguc2xpY2UoZVswXS5sZW5ndGgpfHxoKSxpLnB1c2goZj1bXSkpLGM9ITEsKGU9VC5leGVjKGgpKSYmKGM9ZS5zaGlmdCgpLGYucHVzaCh7dmFsdWU6Yyx0eXBlOmVbMF0ucmVwbGFjZShSLFwiIFwiKX0pLGg9aC5zbGljZShjLmxlbmd0aCkpO2ZvcihnIGluIGQuZmlsdGVyKSEoZT1YW2ddLmV4ZWMoaCkpfHxqW2ddJiYhKGU9altnXShlKSl8fChjPWUuc2hpZnQoKSxmLnB1c2goe3ZhbHVlOmMsdHlwZTpnLG1hdGNoZXM6ZX0pLGg9aC5zbGljZShjLmxlbmd0aCkpO2lmKCFjKWJyZWFrfXJldHVybiBiP2gubGVuZ3RoOmg/Z2EuZXJyb3IoYSk6eihhLGkpLnNsaWNlKDApfTtmdW5jdGlvbiByYShhKXtmb3IodmFyIGI9MCxjPWEubGVuZ3RoLGQ9XCJcIjtjPmI7YisrKWQrPWFbYl0udmFsdWU7cmV0dXJuIGR9ZnVuY3Rpb24gc2EoYSxiLGMpe3ZhciBkPWIuZGlyLGU9YyYmXCJwYXJlbnROb2RlXCI9PT1kLGY9eCsrO3JldHVybiBiLmZpcnN0P2Z1bmN0aW9uKGIsYyxmKXt3aGlsZShiPWJbZF0paWYoMT09PWIubm9kZVR5cGV8fGUpcmV0dXJuIGEoYixjLGYpfTpmdW5jdGlvbihiLGMsZyl7dmFyIGgsaSxqPVt3LGZdO2lmKGcpe3doaWxlKGI9YltkXSlpZigoMT09PWIubm9kZVR5cGV8fGUpJiZhKGIsYyxnKSlyZXR1cm4hMH1lbHNlIHdoaWxlKGI9YltkXSlpZigxPT09Yi5ub2RlVHlwZXx8ZSl7aWYoaT1iW3VdfHwoYlt1XT17fSksKGg9aVtkXSkmJmhbMF09PT13JiZoWzFdPT09ZilyZXR1cm4galsyXT1oWzJdO2lmKGlbZF09aixqWzJdPWEoYixjLGcpKXJldHVybiEwfX19ZnVuY3Rpb24gdGEoYSl7cmV0dXJuIGEubGVuZ3RoPjE/ZnVuY3Rpb24oYixjLGQpe3ZhciBlPWEubGVuZ3RoO3doaWxlKGUtLSlpZighYVtlXShiLGMsZCkpcmV0dXJuITE7cmV0dXJuITB9OmFbMF19ZnVuY3Rpb24gdWEoYSxiLGMpe2Zvcih2YXIgZD0wLGU9Yi5sZW5ndGg7ZT5kO2QrKylnYShhLGJbZF0sYyk7cmV0dXJuIGN9ZnVuY3Rpb24gdmEoYSxiLGMsZCxlKXtmb3IodmFyIGYsZz1bXSxoPTAsaT1hLmxlbmd0aCxqPW51bGwhPWI7aT5oO2grKykoZj1hW2hdKSYmKCFjfHxjKGYsZCxlKSkmJihnLnB1c2goZiksaiYmYi5wdXNoKGgpKTtyZXR1cm4gZ31mdW5jdGlvbiB3YShhLGIsYyxkLGUsZil7cmV0dXJuIGQmJiFkW3VdJiYoZD13YShkKSksZSYmIWVbdV0mJihlPXdhKGUsZikpLGlhKGZ1bmN0aW9uKGYsZyxoLGkpe3ZhciBqLGssbCxtPVtdLG49W10sbz1nLmxlbmd0aCxwPWZ8fHVhKGJ8fFwiKlwiLGgubm9kZVR5cGU/W2hdOmgsW10pLHE9IWF8fCFmJiZiP3A6dmEocCxtLGEsaCxpKSxyPWM/ZXx8KGY/YTpvfHxkKT9bXTpnOnE7aWYoYyYmYyhxLHIsaCxpKSxkKXtqPXZhKHIsbiksZChqLFtdLGgsaSksaz1qLmxlbmd0aDt3aGlsZShrLS0pKGw9altrXSkmJihyW25ba11dPSEocVtuW2tdXT1sKSl9aWYoZil7aWYoZXx8YSl7aWYoZSl7aj1bXSxrPXIubGVuZ3RoO3doaWxlKGstLSkobD1yW2tdKSYmai5wdXNoKHFba109bCk7ZShudWxsLHI9W10saixpKX1rPXIubGVuZ3RoO3doaWxlKGstLSkobD1yW2tdKSYmKGo9ZT9KKGYsbCk6bVtrXSk+LTEmJihmW2pdPSEoZ1tqXT1sKSl9fWVsc2Ugcj12YShyPT09Zz9yLnNwbGljZShvLHIubGVuZ3RoKTpyKSxlP2UobnVsbCxnLHIsaSk6SC5hcHBseShnLHIpfSl9ZnVuY3Rpb24geGEoYSl7Zm9yKHZhciBiLGMsZSxmPWEubGVuZ3RoLGc9ZC5yZWxhdGl2ZVthWzBdLnR5cGVdLGg9Z3x8ZC5yZWxhdGl2ZVtcIiBcIl0saT1nPzE6MCxrPXNhKGZ1bmN0aW9uKGEpe3JldHVybiBhPT09Yn0saCwhMCksbD1zYShmdW5jdGlvbihhKXtyZXR1cm4gSihiLGEpPi0xfSxoLCEwKSxtPVtmdW5jdGlvbihhLGMsZCl7dmFyIGU9IWcmJihkfHxjIT09ail8fCgoYj1jKS5ub2RlVHlwZT9rKGEsYyxkKTpsKGEsYyxkKSk7cmV0dXJuIGI9bnVsbCxlfV07Zj5pO2krKylpZihjPWQucmVsYXRpdmVbYVtpXS50eXBlXSltPVtzYSh0YShtKSxjKV07ZWxzZXtpZihjPWQuZmlsdGVyW2FbaV0udHlwZV0uYXBwbHkobnVsbCxhW2ldLm1hdGNoZXMpLGNbdV0pe2ZvcihlPSsraTtmPmU7ZSsrKWlmKGQucmVsYXRpdmVbYVtlXS50eXBlXSlicmVhaztyZXR1cm4gd2EoaT4xJiZ0YShtKSxpPjEmJnJhKGEuc2xpY2UoMCxpLTEpLmNvbmNhdCh7dmFsdWU6XCIgXCI9PT1hW2ktMl0udHlwZT9cIipcIjpcIlwifSkpLnJlcGxhY2UoUixcIiQxXCIpLGMsZT5pJiZ4YShhLnNsaWNlKGksZSkpLGY+ZSYmeGEoYT1hLnNsaWNlKGUpKSxmPmUmJnJhKGEpKX1tLnB1c2goYyl9cmV0dXJuIHRhKG0pfWZ1bmN0aW9uIHlhKGEsYil7dmFyIGM9Yi5sZW5ndGg+MCxlPWEubGVuZ3RoPjAsZj1mdW5jdGlvbihmLGcsaCxpLGspe3ZhciBsLG0sbyxwPTAscT1cIjBcIixyPWYmJltdLHM9W10sdD1qLHU9Znx8ZSYmZC5maW5kLlRBRyhcIipcIixrKSx2PXcrPW51bGw9PXQ/MTpNYXRoLnJhbmRvbSgpfHwuMSx4PXUubGVuZ3RoO2ZvcihrJiYoaj1nIT09biYmZyk7cSE9PXgmJm51bGwhPShsPXVbcV0pO3ErKyl7aWYoZSYmbCl7bT0wO3doaWxlKG89YVttKytdKWlmKG8obCxnLGgpKXtpLnB1c2gobCk7YnJlYWt9ayYmKHc9dil9YyYmKChsPSFvJiZsKSYmcC0tLGYmJnIucHVzaChsKSl9aWYocCs9cSxjJiZxIT09cCl7bT0wO3doaWxlKG89YlttKytdKW8ocixzLGcsaCk7aWYoZil7aWYocD4wKXdoaWxlKHEtLSlyW3FdfHxzW3FdfHwoc1txXT1GLmNhbGwoaSkpO3M9dmEocyl9SC5hcHBseShpLHMpLGsmJiFmJiZzLmxlbmd0aD4wJiZwK2IubGVuZ3RoPjEmJmdhLnVuaXF1ZVNvcnQoaSl9cmV0dXJuIGsmJih3PXYsaj10KSxyfTtyZXR1cm4gYz9pYShmKTpmfXJldHVybiBoPWdhLmNvbXBpbGU9ZnVuY3Rpb24oYSxiKXt2YXIgYyxkPVtdLGU9W10sZj1BW2ErXCIgXCJdO2lmKCFmKXtifHwoYj1nKGEpKSxjPWIubGVuZ3RoO3doaWxlKGMtLSlmPXhhKGJbY10pLGZbdV0/ZC5wdXNoKGYpOmUucHVzaChmKTtmPUEoYSx5YShlLGQpKSxmLnNlbGVjdG9yPWF9cmV0dXJuIGZ9LGk9Z2Euc2VsZWN0PWZ1bmN0aW9uKGEsYixlLGYpe3ZhciBpLGosayxsLG0sbj1cImZ1bmN0aW9uXCI9PXR5cGVvZiBhJiZhLG89IWYmJmcoYT1uLnNlbGVjdG9yfHxhKTtpZihlPWV8fFtdLDE9PT1vLmxlbmd0aCl7aWYoaj1vWzBdPW9bMF0uc2xpY2UoMCksai5sZW5ndGg+MiYmXCJJRFwiPT09KGs9alswXSkudHlwZSYmYy5nZXRCeUlkJiY5PT09Yi5ub2RlVHlwZSYmcCYmZC5yZWxhdGl2ZVtqWzFdLnR5cGVdKXtpZihiPShkLmZpbmQuSUQoay5tYXRjaGVzWzBdLnJlcGxhY2UoY2EsZGEpLGIpfHxbXSlbMF0sIWIpcmV0dXJuIGU7biYmKGI9Yi5wYXJlbnROb2RlKSxhPWEuc2xpY2Uoai5zaGlmdCgpLnZhbHVlLmxlbmd0aCl9aT1YLm5lZWRzQ29udGV4dC50ZXN0KGEpPzA6ai5sZW5ndGg7d2hpbGUoaS0tKXtpZihrPWpbaV0sZC5yZWxhdGl2ZVtsPWsudHlwZV0pYnJlYWs7aWYoKG09ZC5maW5kW2xdKSYmKGY9bShrLm1hdGNoZXNbMF0ucmVwbGFjZShjYSxkYSksYWEudGVzdChqWzBdLnR5cGUpJiZwYShiLnBhcmVudE5vZGUpfHxiKSkpe2lmKGouc3BsaWNlKGksMSksYT1mLmxlbmd0aCYmcmEoaiksIWEpcmV0dXJuIEguYXBwbHkoZSxmKSxlO2JyZWFrfX19cmV0dXJuKG58fGgoYSxvKSkoZixiLCFwLGUsYWEudGVzdChhKSYmcGEoYi5wYXJlbnROb2RlKXx8YiksZX0sYy5zb3J0U3RhYmxlPXUuc3BsaXQoXCJcIikuc29ydChCKS5qb2luKFwiXCIpPT09dSxjLmRldGVjdER1cGxpY2F0ZXM9ISFsLG0oKSxjLnNvcnREZXRhY2hlZD1qYShmdW5jdGlvbihhKXtyZXR1cm4gMSZhLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uKG4uY3JlYXRlRWxlbWVudChcImRpdlwiKSl9KSxqYShmdW5jdGlvbihhKXtyZXR1cm4gYS5pbm5lckhUTUw9XCI8YSBocmVmPScjJz48L2E+XCIsXCIjXCI9PT1hLmZpcnN0Q2hpbGQuZ2V0QXR0cmlidXRlKFwiaHJlZlwiKX0pfHxrYShcInR5cGV8aHJlZnxoZWlnaHR8d2lkdGhcIixmdW5jdGlvbihhLGIsYyl7cmV0dXJuIGM/dm9pZCAwOmEuZ2V0QXR0cmlidXRlKGIsXCJ0eXBlXCI9PT1iLnRvTG93ZXJDYXNlKCk/MToyKX0pLGMuYXR0cmlidXRlcyYmamEoZnVuY3Rpb24oYSl7cmV0dXJuIGEuaW5uZXJIVE1MPVwiPGlucHV0Lz5cIixhLmZpcnN0Q2hpbGQuc2V0QXR0cmlidXRlKFwidmFsdWVcIixcIlwiKSxcIlwiPT09YS5maXJzdENoaWxkLmdldEF0dHJpYnV0ZShcInZhbHVlXCIpfSl8fGthKFwidmFsdWVcIixmdW5jdGlvbihhLGIsYyl7cmV0dXJuIGN8fFwiaW5wdXRcIiE9PWEubm9kZU5hbWUudG9Mb3dlckNhc2UoKT92b2lkIDA6YS5kZWZhdWx0VmFsdWV9KSxqYShmdW5jdGlvbihhKXtyZXR1cm4gbnVsbD09YS5nZXRBdHRyaWJ1dGUoXCJkaXNhYmxlZFwiKX0pfHxrYShLLGZ1bmN0aW9uKGEsYixjKXt2YXIgZDtyZXR1cm4gYz92b2lkIDA6YVtiXT09PSEwP2IudG9Mb3dlckNhc2UoKTooZD1hLmdldEF0dHJpYnV0ZU5vZGUoYikpJiZkLnNwZWNpZmllZD9kLnZhbHVlOm51bGx9KSxnYX0oYSk7bi5maW5kPXQsbi5leHByPXQuc2VsZWN0b3JzLG4uZXhwcltcIjpcIl09bi5leHByLnBzZXVkb3Msbi51bmlxdWU9dC51bmlxdWVTb3J0LG4udGV4dD10LmdldFRleHQsbi5pc1hNTERvYz10LmlzWE1MLG4uY29udGFpbnM9dC5jb250YWluczt2YXIgdT1uLmV4cHIubWF0Y2gubmVlZHNDb250ZXh0LHY9L148KFxcdyspXFxzKlxcLz8+KD86PFxcL1xcMT58KSQvLHc9L14uW146I1xcW1xcLixdKiQvO2Z1bmN0aW9uIHgoYSxiLGMpe2lmKG4uaXNGdW5jdGlvbihiKSlyZXR1cm4gbi5ncmVwKGEsZnVuY3Rpb24oYSxkKXtyZXR1cm4hIWIuY2FsbChhLGQsYSkhPT1jfSk7aWYoYi5ub2RlVHlwZSlyZXR1cm4gbi5ncmVwKGEsZnVuY3Rpb24oYSl7cmV0dXJuIGE9PT1iIT09Y30pO2lmKFwic3RyaW5nXCI9PXR5cGVvZiBiKXtpZih3LnRlc3QoYikpcmV0dXJuIG4uZmlsdGVyKGIsYSxjKTtiPW4uZmlsdGVyKGIsYSl9cmV0dXJuIG4uZ3JlcChhLGZ1bmN0aW9uKGEpe3JldHVybiBnLmNhbGwoYixhKT49MCE9PWN9KX1uLmZpbHRlcj1mdW5jdGlvbihhLGIsYyl7dmFyIGQ9YlswXTtyZXR1cm4gYyYmKGE9XCI6bm90KFwiK2ErXCIpXCIpLDE9PT1iLmxlbmd0aCYmMT09PWQubm9kZVR5cGU/bi5maW5kLm1hdGNoZXNTZWxlY3RvcihkLGEpP1tkXTpbXTpuLmZpbmQubWF0Y2hlcyhhLG4uZ3JlcChiLGZ1bmN0aW9uKGEpe3JldHVybiAxPT09YS5ub2RlVHlwZX0pKX0sbi5mbi5leHRlbmQoe2ZpbmQ6ZnVuY3Rpb24oYSl7dmFyIGIsYz10aGlzLmxlbmd0aCxkPVtdLGU9dGhpcztpZihcInN0cmluZ1wiIT10eXBlb2YgYSlyZXR1cm4gdGhpcy5wdXNoU3RhY2sobihhKS5maWx0ZXIoZnVuY3Rpb24oKXtmb3IoYj0wO2M+YjtiKyspaWYobi5jb250YWlucyhlW2JdLHRoaXMpKXJldHVybiEwfSkpO2ZvcihiPTA7Yz5iO2IrKyluLmZpbmQoYSxlW2JdLGQpO3JldHVybiBkPXRoaXMucHVzaFN0YWNrKGM+MT9uLnVuaXF1ZShkKTpkKSxkLnNlbGVjdG9yPXRoaXMuc2VsZWN0b3I/dGhpcy5zZWxlY3RvcitcIiBcIithOmEsZH0sZmlsdGVyOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLnB1c2hTdGFjayh4KHRoaXMsYXx8W10sITEpKX0sbm90OmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLnB1c2hTdGFjayh4KHRoaXMsYXx8W10sITApKX0saXM6ZnVuY3Rpb24oYSl7cmV0dXJuISF4KHRoaXMsXCJzdHJpbmdcIj09dHlwZW9mIGEmJnUudGVzdChhKT9uKGEpOmF8fFtdLCExKS5sZW5ndGh9fSk7dmFyIHksej0vXig/OlxccyooPFtcXHdcXFddKz4pW14+XSp8IyhbXFx3LV0qKSkkLyxBPW4uZm4uaW5pdD1mdW5jdGlvbihhLGIpe3ZhciBjLGQ7aWYoIWEpcmV0dXJuIHRoaXM7aWYoXCJzdHJpbmdcIj09dHlwZW9mIGEpe2lmKGM9XCI8XCI9PT1hWzBdJiZcIj5cIj09PWFbYS5sZW5ndGgtMV0mJmEubGVuZ3RoPj0zP1tudWxsLGEsbnVsbF06ei5leGVjKGEpLCFjfHwhY1sxXSYmYilyZXR1cm4hYnx8Yi5qcXVlcnk/KGJ8fHkpLmZpbmQoYSk6dGhpcy5jb25zdHJ1Y3RvcihiKS5maW5kKGEpO2lmKGNbMV0pe2lmKGI9YiBpbnN0YW5jZW9mIG4/YlswXTpiLG4ubWVyZ2UodGhpcyxuLnBhcnNlSFRNTChjWzFdLGImJmIubm9kZVR5cGU/Yi5vd25lckRvY3VtZW50fHxiOmwsITApKSx2LnRlc3QoY1sxXSkmJm4uaXNQbGFpbk9iamVjdChiKSlmb3IoYyBpbiBiKW4uaXNGdW5jdGlvbih0aGlzW2NdKT90aGlzW2NdKGJbY10pOnRoaXMuYXR0cihjLGJbY10pO3JldHVybiB0aGlzfXJldHVybiBkPWwuZ2V0RWxlbWVudEJ5SWQoY1syXSksZCYmZC5wYXJlbnROb2RlJiYodGhpcy5sZW5ndGg9MSx0aGlzWzBdPWQpLHRoaXMuY29udGV4dD1sLHRoaXMuc2VsZWN0b3I9YSx0aGlzfXJldHVybiBhLm5vZGVUeXBlPyh0aGlzLmNvbnRleHQ9dGhpc1swXT1hLHRoaXMubGVuZ3RoPTEsdGhpcyk6bi5pc0Z1bmN0aW9uKGEpP1widW5kZWZpbmVkXCIhPXR5cGVvZiB5LnJlYWR5P3kucmVhZHkoYSk6YShuKToodm9pZCAwIT09YS5zZWxlY3RvciYmKHRoaXMuc2VsZWN0b3I9YS5zZWxlY3Rvcix0aGlzLmNvbnRleHQ9YS5jb250ZXh0KSxuLm1ha2VBcnJheShhLHRoaXMpKX07QS5wcm90b3R5cGU9bi5mbix5PW4obCk7dmFyIEI9L14oPzpwYXJlbnRzfHByZXYoPzpVbnRpbHxBbGwpKS8sQz17Y2hpbGRyZW46ITAsY29udGVudHM6ITAsbmV4dDohMCxwcmV2OiEwfTtuLmV4dGVuZCh7ZGlyOmZ1bmN0aW9uKGEsYixjKXt2YXIgZD1bXSxlPXZvaWQgMCE9PWM7d2hpbGUoKGE9YVtiXSkmJjkhPT1hLm5vZGVUeXBlKWlmKDE9PT1hLm5vZGVUeXBlKXtpZihlJiZuKGEpLmlzKGMpKWJyZWFrO2QucHVzaChhKX1yZXR1cm4gZH0sc2libGluZzpmdW5jdGlvbihhLGIpe2Zvcih2YXIgYz1bXTthO2E9YS5uZXh0U2libGluZykxPT09YS5ub2RlVHlwZSYmYSE9PWImJmMucHVzaChhKTtyZXR1cm4gY319KSxuLmZuLmV4dGVuZCh7aGFzOmZ1bmN0aW9uKGEpe3ZhciBiPW4oYSx0aGlzKSxjPWIubGVuZ3RoO3JldHVybiB0aGlzLmZpbHRlcihmdW5jdGlvbigpe2Zvcih2YXIgYT0wO2M+YTthKyspaWYobi5jb250YWlucyh0aGlzLGJbYV0pKXJldHVybiEwfSl9LGNsb3Nlc3Q6ZnVuY3Rpb24oYSxiKXtmb3IodmFyIGMsZD0wLGU9dGhpcy5sZW5ndGgsZj1bXSxnPXUudGVzdChhKXx8XCJzdHJpbmdcIiE9dHlwZW9mIGE/bihhLGJ8fHRoaXMuY29udGV4dCk6MDtlPmQ7ZCsrKWZvcihjPXRoaXNbZF07YyYmYyE9PWI7Yz1jLnBhcmVudE5vZGUpaWYoYy5ub2RlVHlwZTwxMSYmKGc/Zy5pbmRleChjKT4tMToxPT09Yy5ub2RlVHlwZSYmbi5maW5kLm1hdGNoZXNTZWxlY3RvcihjLGEpKSl7Zi5wdXNoKGMpO2JyZWFrfXJldHVybiB0aGlzLnB1c2hTdGFjayhmLmxlbmd0aD4xP24udW5pcXVlKGYpOmYpfSxpbmRleDpmdW5jdGlvbihhKXtyZXR1cm4gYT9cInN0cmluZ1wiPT10eXBlb2YgYT9nLmNhbGwobihhKSx0aGlzWzBdKTpnLmNhbGwodGhpcyxhLmpxdWVyeT9hWzBdOmEpOnRoaXNbMF0mJnRoaXNbMF0ucGFyZW50Tm9kZT90aGlzLmZpcnN0KCkucHJldkFsbCgpLmxlbmd0aDotMX0sYWRkOmZ1bmN0aW9uKGEsYil7cmV0dXJuIHRoaXMucHVzaFN0YWNrKG4udW5pcXVlKG4ubWVyZ2UodGhpcy5nZXQoKSxuKGEsYikpKSl9LGFkZEJhY2s6ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuYWRkKG51bGw9PWE/dGhpcy5wcmV2T2JqZWN0OnRoaXMucHJldk9iamVjdC5maWx0ZXIoYSkpfX0pO2Z1bmN0aW9uIEQoYSxiKXt3aGlsZSgoYT1hW2JdKSYmMSE9PWEubm9kZVR5cGUpO3JldHVybiBhfW4uZWFjaCh7cGFyZW50OmZ1bmN0aW9uKGEpe3ZhciBiPWEucGFyZW50Tm9kZTtyZXR1cm4gYiYmMTEhPT1iLm5vZGVUeXBlP2I6bnVsbH0scGFyZW50czpmdW5jdGlvbihhKXtyZXR1cm4gbi5kaXIoYSxcInBhcmVudE5vZGVcIil9LHBhcmVudHNVbnRpbDpmdW5jdGlvbihhLGIsYyl7cmV0dXJuIG4uZGlyKGEsXCJwYXJlbnROb2RlXCIsYyl9LG5leHQ6ZnVuY3Rpb24oYSl7cmV0dXJuIEQoYSxcIm5leHRTaWJsaW5nXCIpfSxwcmV2OmZ1bmN0aW9uKGEpe3JldHVybiBEKGEsXCJwcmV2aW91c1NpYmxpbmdcIil9LG5leHRBbGw6ZnVuY3Rpb24oYSl7cmV0dXJuIG4uZGlyKGEsXCJuZXh0U2libGluZ1wiKX0scHJldkFsbDpmdW5jdGlvbihhKXtyZXR1cm4gbi5kaXIoYSxcInByZXZpb3VzU2libGluZ1wiKX0sbmV4dFVudGlsOmZ1bmN0aW9uKGEsYixjKXtyZXR1cm4gbi5kaXIoYSxcIm5leHRTaWJsaW5nXCIsYyl9LHByZXZVbnRpbDpmdW5jdGlvbihhLGIsYyl7cmV0dXJuIG4uZGlyKGEsXCJwcmV2aW91c1NpYmxpbmdcIixjKX0sc2libGluZ3M6ZnVuY3Rpb24oYSl7cmV0dXJuIG4uc2libGluZygoYS5wYXJlbnROb2RlfHx7fSkuZmlyc3RDaGlsZCxhKX0sY2hpbGRyZW46ZnVuY3Rpb24oYSl7cmV0dXJuIG4uc2libGluZyhhLmZpcnN0Q2hpbGQpfSxjb250ZW50czpmdW5jdGlvbihhKXtyZXR1cm4gYS5jb250ZW50RG9jdW1lbnR8fG4ubWVyZ2UoW10sYS5jaGlsZE5vZGVzKX19LGZ1bmN0aW9uKGEsYil7bi5mblthXT1mdW5jdGlvbihjLGQpe3ZhciBlPW4ubWFwKHRoaXMsYixjKTtyZXR1cm5cIlVudGlsXCIhPT1hLnNsaWNlKC01KSYmKGQ9YyksZCYmXCJzdHJpbmdcIj09dHlwZW9mIGQmJihlPW4uZmlsdGVyKGQsZSkpLHRoaXMubGVuZ3RoPjEmJihDW2FdfHxuLnVuaXF1ZShlKSxCLnRlc3QoYSkmJmUucmV2ZXJzZSgpKSx0aGlzLnB1c2hTdGFjayhlKX19KTt2YXIgRT0vXFxTKy9nLEY9e307ZnVuY3Rpb24gRyhhKXt2YXIgYj1GW2FdPXt9O3JldHVybiBuLmVhY2goYS5tYXRjaChFKXx8W10sZnVuY3Rpb24oYSxjKXtiW2NdPSEwfSksYn1uLkNhbGxiYWNrcz1mdW5jdGlvbihhKXthPVwic3RyaW5nXCI9PXR5cGVvZiBhP0ZbYV18fEcoYSk6bi5leHRlbmQoe30sYSk7dmFyIGIsYyxkLGUsZixnLGg9W10saT0hYS5vbmNlJiZbXSxqPWZ1bmN0aW9uKGwpe2ZvcihiPWEubWVtb3J5JiZsLGM9ITAsZz1lfHwwLGU9MCxmPWgubGVuZ3RoLGQ9ITA7aCYmZj5nO2crKylpZihoW2ddLmFwcGx5KGxbMF0sbFsxXSk9PT0hMSYmYS5zdG9wT25GYWxzZSl7Yj0hMTticmVha31kPSExLGgmJihpP2kubGVuZ3RoJiZqKGkuc2hpZnQoKSk6Yj9oPVtdOmsuZGlzYWJsZSgpKX0saz17YWRkOmZ1bmN0aW9uKCl7aWYoaCl7dmFyIGM9aC5sZW5ndGg7IWZ1bmN0aW9uIGcoYil7bi5lYWNoKGIsZnVuY3Rpb24oYixjKXt2YXIgZD1uLnR5cGUoYyk7XCJmdW5jdGlvblwiPT09ZD9hLnVuaXF1ZSYmay5oYXMoYyl8fGgucHVzaChjKTpjJiZjLmxlbmd0aCYmXCJzdHJpbmdcIiE9PWQmJmcoYyl9KX0oYXJndW1lbnRzKSxkP2Y9aC5sZW5ndGg6YiYmKGU9YyxqKGIpKX1yZXR1cm4gdGhpc30scmVtb3ZlOmZ1bmN0aW9uKCl7cmV0dXJuIGgmJm4uZWFjaChhcmd1bWVudHMsZnVuY3Rpb24oYSxiKXt2YXIgYzt3aGlsZSgoYz1uLmluQXJyYXkoYixoLGMpKT4tMSloLnNwbGljZShjLDEpLGQmJihmPj1jJiZmLS0sZz49YyYmZy0tKX0pLHRoaXN9LGhhczpmdW5jdGlvbihhKXtyZXR1cm4gYT9uLmluQXJyYXkoYSxoKT4tMTohKCFofHwhaC5sZW5ndGgpfSxlbXB0eTpmdW5jdGlvbigpe3JldHVybiBoPVtdLGY9MCx0aGlzfSxkaXNhYmxlOmZ1bmN0aW9uKCl7cmV0dXJuIGg9aT1iPXZvaWQgMCx0aGlzfSxkaXNhYmxlZDpmdW5jdGlvbigpe3JldHVybiFofSxsb2NrOmZ1bmN0aW9uKCl7cmV0dXJuIGk9dm9pZCAwLGJ8fGsuZGlzYWJsZSgpLHRoaXN9LGxvY2tlZDpmdW5jdGlvbigpe3JldHVybiFpfSxmaXJlV2l0aDpmdW5jdGlvbihhLGIpe3JldHVybiFofHxjJiYhaXx8KGI9Ynx8W10sYj1bYSxiLnNsaWNlP2Iuc2xpY2UoKTpiXSxkP2kucHVzaChiKTpqKGIpKSx0aGlzfSxmaXJlOmZ1bmN0aW9uKCl7cmV0dXJuIGsuZmlyZVdpdGgodGhpcyxhcmd1bWVudHMpLHRoaXN9LGZpcmVkOmZ1bmN0aW9uKCl7cmV0dXJuISFjfX07cmV0dXJuIGt9LG4uZXh0ZW5kKHtEZWZlcnJlZDpmdW5jdGlvbihhKXt2YXIgYj1bW1wicmVzb2x2ZVwiLFwiZG9uZVwiLG4uQ2FsbGJhY2tzKFwib25jZSBtZW1vcnlcIiksXCJyZXNvbHZlZFwiXSxbXCJyZWplY3RcIixcImZhaWxcIixuLkNhbGxiYWNrcyhcIm9uY2UgbWVtb3J5XCIpLFwicmVqZWN0ZWRcIl0sW1wibm90aWZ5XCIsXCJwcm9ncmVzc1wiLG4uQ2FsbGJhY2tzKFwibWVtb3J5XCIpXV0sYz1cInBlbmRpbmdcIixkPXtzdGF0ZTpmdW5jdGlvbigpe3JldHVybiBjfSxhbHdheXM6ZnVuY3Rpb24oKXtyZXR1cm4gZS5kb25lKGFyZ3VtZW50cykuZmFpbChhcmd1bWVudHMpLHRoaXN9LHRoZW46ZnVuY3Rpb24oKXt2YXIgYT1hcmd1bWVudHM7cmV0dXJuIG4uRGVmZXJyZWQoZnVuY3Rpb24oYyl7bi5lYWNoKGIsZnVuY3Rpb24oYixmKXt2YXIgZz1uLmlzRnVuY3Rpb24oYVtiXSkmJmFbYl07ZVtmWzFdXShmdW5jdGlvbigpe3ZhciBhPWcmJmcuYXBwbHkodGhpcyxhcmd1bWVudHMpO2EmJm4uaXNGdW5jdGlvbihhLnByb21pc2UpP2EucHJvbWlzZSgpLmRvbmUoYy5yZXNvbHZlKS5mYWlsKGMucmVqZWN0KS5wcm9ncmVzcyhjLm5vdGlmeSk6Y1tmWzBdK1wiV2l0aFwiXSh0aGlzPT09ZD9jLnByb21pc2UoKTp0aGlzLGc/W2FdOmFyZ3VtZW50cyl9KX0pLGE9bnVsbH0pLnByb21pc2UoKX0scHJvbWlzZTpmdW5jdGlvbihhKXtyZXR1cm4gbnVsbCE9YT9uLmV4dGVuZChhLGQpOmR9fSxlPXt9O3JldHVybiBkLnBpcGU9ZC50aGVuLG4uZWFjaChiLGZ1bmN0aW9uKGEsZil7dmFyIGc9ZlsyXSxoPWZbM107ZFtmWzFdXT1nLmFkZCxoJiZnLmFkZChmdW5jdGlvbigpe2M9aH0sYlsxXmFdWzJdLmRpc2FibGUsYlsyXVsyXS5sb2NrKSxlW2ZbMF1dPWZ1bmN0aW9uKCl7cmV0dXJuIGVbZlswXStcIldpdGhcIl0odGhpcz09PWU/ZDp0aGlzLGFyZ3VtZW50cyksdGhpc30sZVtmWzBdK1wiV2l0aFwiXT1nLmZpcmVXaXRofSksZC5wcm9taXNlKGUpLGEmJmEuY2FsbChlLGUpLGV9LHdoZW46ZnVuY3Rpb24oYSl7dmFyIGI9MCxjPWQuY2FsbChhcmd1bWVudHMpLGU9Yy5sZW5ndGgsZj0xIT09ZXx8YSYmbi5pc0Z1bmN0aW9uKGEucHJvbWlzZSk/ZTowLGc9MT09PWY/YTpuLkRlZmVycmVkKCksaD1mdW5jdGlvbihhLGIsYyl7cmV0dXJuIGZ1bmN0aW9uKGUpe2JbYV09dGhpcyxjW2FdPWFyZ3VtZW50cy5sZW5ndGg+MT9kLmNhbGwoYXJndW1lbnRzKTplLGM9PT1pP2cubm90aWZ5V2l0aChiLGMpOi0tZnx8Zy5yZXNvbHZlV2l0aChiLGMpfX0saSxqLGs7aWYoZT4xKWZvcihpPW5ldyBBcnJheShlKSxqPW5ldyBBcnJheShlKSxrPW5ldyBBcnJheShlKTtlPmI7YisrKWNbYl0mJm4uaXNGdW5jdGlvbihjW2JdLnByb21pc2UpP2NbYl0ucHJvbWlzZSgpLmRvbmUoaChiLGssYykpLmZhaWwoZy5yZWplY3QpLnByb2dyZXNzKGgoYixqLGkpKTotLWY7cmV0dXJuIGZ8fGcucmVzb2x2ZVdpdGgoayxjKSxnLnByb21pc2UoKX19KTt2YXIgSDtuLmZuLnJlYWR5PWZ1bmN0aW9uKGEpe3JldHVybiBuLnJlYWR5LnByb21pc2UoKS5kb25lKGEpLHRoaXN9LG4uZXh0ZW5kKHtpc1JlYWR5OiExLHJlYWR5V2FpdDoxLGhvbGRSZWFkeTpmdW5jdGlvbihhKXthP24ucmVhZHlXYWl0Kys6bi5yZWFkeSghMCl9LHJlYWR5OmZ1bmN0aW9uKGEpeyhhPT09ITA/LS1uLnJlYWR5V2FpdDpuLmlzUmVhZHkpfHwobi5pc1JlYWR5PSEwLGEhPT0hMCYmLS1uLnJlYWR5V2FpdD4wfHwoSC5yZXNvbHZlV2l0aChsLFtuXSksbi5mbi50cmlnZ2VySGFuZGxlciYmKG4obCkudHJpZ2dlckhhbmRsZXIoXCJyZWFkeVwiKSxuKGwpLm9mZihcInJlYWR5XCIpKSkpfX0pO2Z1bmN0aW9uIEkoKXtsLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJET01Db250ZW50TG9hZGVkXCIsSSwhMSksYS5yZW1vdmVFdmVudExpc3RlbmVyKFwibG9hZFwiLEksITEpLG4ucmVhZHkoKX1uLnJlYWR5LnByb21pc2U9ZnVuY3Rpb24oYil7cmV0dXJuIEh8fChIPW4uRGVmZXJyZWQoKSxcImNvbXBsZXRlXCI9PT1sLnJlYWR5U3RhdGU/c2V0VGltZW91dChuLnJlYWR5KToobC5hZGRFdmVudExpc3RlbmVyKFwiRE9NQ29udGVudExvYWRlZFwiLEksITEpLGEuYWRkRXZlbnRMaXN0ZW5lcihcImxvYWRcIixJLCExKSkpLEgucHJvbWlzZShiKX0sbi5yZWFkeS5wcm9taXNlKCk7dmFyIEo9bi5hY2Nlc3M9ZnVuY3Rpb24oYSxiLGMsZCxlLGYsZyl7dmFyIGg9MCxpPWEubGVuZ3RoLGo9bnVsbD09YztpZihcIm9iamVjdFwiPT09bi50eXBlKGMpKXtlPSEwO2ZvcihoIGluIGMpbi5hY2Nlc3MoYSxiLGgsY1toXSwhMCxmLGcpfWVsc2UgaWYodm9pZCAwIT09ZCYmKGU9ITAsbi5pc0Z1bmN0aW9uKGQpfHwoZz0hMCksaiYmKGc/KGIuY2FsbChhLGQpLGI9bnVsbCk6KGo9YixiPWZ1bmN0aW9uKGEsYixjKXtyZXR1cm4gai5jYWxsKG4oYSksYyl9KSksYikpZm9yKDtpPmg7aCsrKWIoYVtoXSxjLGc/ZDpkLmNhbGwoYVtoXSxoLGIoYVtoXSxjKSkpO3JldHVybiBlP2E6aj9iLmNhbGwoYSk6aT9iKGFbMF0sYyk6Zn07bi5hY2NlcHREYXRhPWZ1bmN0aW9uKGEpe3JldHVybiAxPT09YS5ub2RlVHlwZXx8OT09PWEubm9kZVR5cGV8fCErYS5ub2RlVHlwZX07ZnVuY3Rpb24gSygpe09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLmNhY2hlPXt9LDAse2dldDpmdW5jdGlvbigpe3JldHVybnt9fX0pLHRoaXMuZXhwYW5kbz1uLmV4cGFuZG8rSy51aWQrK31LLnVpZD0xLEsuYWNjZXB0cz1uLmFjY2VwdERhdGEsSy5wcm90b3R5cGU9e2tleTpmdW5jdGlvbihhKXtpZighSy5hY2NlcHRzKGEpKXJldHVybiAwO3ZhciBiPXt9LGM9YVt0aGlzLmV4cGFuZG9dO2lmKCFjKXtjPUsudWlkKys7dHJ5e2JbdGhpcy5leHBhbmRvXT17dmFsdWU6Y30sT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoYSxiKX1jYXRjaChkKXtiW3RoaXMuZXhwYW5kb109YyxuLmV4dGVuZChhLGIpfX1yZXR1cm4gdGhpcy5jYWNoZVtjXXx8KHRoaXMuY2FjaGVbY109e30pLGN9LHNldDpmdW5jdGlvbihhLGIsYyl7dmFyIGQsZT10aGlzLmtleShhKSxmPXRoaXMuY2FjaGVbZV07aWYoXCJzdHJpbmdcIj09dHlwZW9mIGIpZltiXT1jO2Vsc2UgaWYobi5pc0VtcHR5T2JqZWN0KGYpKW4uZXh0ZW5kKHRoaXMuY2FjaGVbZV0sYik7ZWxzZSBmb3IoZCBpbiBiKWZbZF09YltkXTtyZXR1cm4gZn0sZ2V0OmZ1bmN0aW9uKGEsYil7dmFyIGM9dGhpcy5jYWNoZVt0aGlzLmtleShhKV07cmV0dXJuIHZvaWQgMD09PWI/YzpjW2JdfSxhY2Nlc3M6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkO3JldHVybiB2b2lkIDA9PT1ifHxiJiZcInN0cmluZ1wiPT10eXBlb2YgYiYmdm9pZCAwPT09Yz8oZD10aGlzLmdldChhLGIpLHZvaWQgMCE9PWQ/ZDp0aGlzLmdldChhLG4uY2FtZWxDYXNlKGIpKSk6KHRoaXMuc2V0KGEsYixjKSx2b2lkIDAhPT1jP2M6Yil9LHJlbW92ZTpmdW5jdGlvbihhLGIpe3ZhciBjLGQsZSxmPXRoaXMua2V5KGEpLGc9dGhpcy5jYWNoZVtmXTtpZih2b2lkIDA9PT1iKXRoaXMuY2FjaGVbZl09e307ZWxzZXtuLmlzQXJyYXkoYik/ZD1iLmNvbmNhdChiLm1hcChuLmNhbWVsQ2FzZSkpOihlPW4uY2FtZWxDYXNlKGIpLGIgaW4gZz9kPVtiLGVdOihkPWUsZD1kIGluIGc/W2RdOmQubWF0Y2goRSl8fFtdKSksYz1kLmxlbmd0aDt3aGlsZShjLS0pZGVsZXRlIGdbZFtjXV19fSxoYXNEYXRhOmZ1bmN0aW9uKGEpe3JldHVybiFuLmlzRW1wdHlPYmplY3QodGhpcy5jYWNoZVthW3RoaXMuZXhwYW5kb11dfHx7fSl9LGRpc2NhcmQ6ZnVuY3Rpb24oYSl7YVt0aGlzLmV4cGFuZG9dJiZkZWxldGUgdGhpcy5jYWNoZVthW3RoaXMuZXhwYW5kb11dfX07dmFyIEw9bmV3IEssTT1uZXcgSyxOPS9eKD86XFx7W1xcd1xcV10qXFx9fFxcW1tcXHdcXFddKlxcXSkkLyxPPS8oW0EtWl0pL2c7ZnVuY3Rpb24gUChhLGIsYyl7dmFyIGQ7aWYodm9pZCAwPT09YyYmMT09PWEubm9kZVR5cGUpaWYoZD1cImRhdGEtXCIrYi5yZXBsYWNlKE8sXCItJDFcIikudG9Mb3dlckNhc2UoKSxjPWEuZ2V0QXR0cmlidXRlKGQpLFwic3RyaW5nXCI9PXR5cGVvZiBjKXt0cnl7Yz1cInRydWVcIj09PWM/ITA6XCJmYWxzZVwiPT09Yz8hMTpcIm51bGxcIj09PWM/bnVsbDorYytcIlwiPT09Yz8rYzpOLnRlc3QoYyk/bi5wYXJzZUpTT04oYyk6Y31jYXRjaChlKXt9TS5zZXQoYSxiLGMpfWVsc2UgYz12b2lkIDA7cmV0dXJuIGN9bi5leHRlbmQoe2hhc0RhdGE6ZnVuY3Rpb24oYSl7cmV0dXJuIE0uaGFzRGF0YShhKXx8TC5oYXNEYXRhKGEpfSxkYXRhOmZ1bmN0aW9uKGEsYixjKXtcclxucmV0dXJuIE0uYWNjZXNzKGEsYixjKX0scmVtb3ZlRGF0YTpmdW5jdGlvbihhLGIpe00ucmVtb3ZlKGEsYil9LF9kYXRhOmZ1bmN0aW9uKGEsYixjKXtyZXR1cm4gTC5hY2Nlc3MoYSxiLGMpfSxfcmVtb3ZlRGF0YTpmdW5jdGlvbihhLGIpe0wucmVtb3ZlKGEsYil9fSksbi5mbi5leHRlbmQoe2RhdGE6ZnVuY3Rpb24oYSxiKXt2YXIgYyxkLGUsZj10aGlzWzBdLGc9ZiYmZi5hdHRyaWJ1dGVzO2lmKHZvaWQgMD09PWEpe2lmKHRoaXMubGVuZ3RoJiYoZT1NLmdldChmKSwxPT09Zi5ub2RlVHlwZSYmIUwuZ2V0KGYsXCJoYXNEYXRhQXR0cnNcIikpKXtjPWcubGVuZ3RoO3doaWxlKGMtLSlnW2NdJiYoZD1nW2NdLm5hbWUsMD09PWQuaW5kZXhPZihcImRhdGEtXCIpJiYoZD1uLmNhbWVsQ2FzZShkLnNsaWNlKDUpKSxQKGYsZCxlW2RdKSkpO0wuc2V0KGYsXCJoYXNEYXRhQXR0cnNcIiwhMCl9cmV0dXJuIGV9cmV0dXJuXCJvYmplY3RcIj09dHlwZW9mIGE/dGhpcy5lYWNoKGZ1bmN0aW9uKCl7TS5zZXQodGhpcyxhKX0pOkoodGhpcyxmdW5jdGlvbihiKXt2YXIgYyxkPW4uY2FtZWxDYXNlKGEpO2lmKGYmJnZvaWQgMD09PWIpe2lmKGM9TS5nZXQoZixhKSx2b2lkIDAhPT1jKXJldHVybiBjO2lmKGM9TS5nZXQoZixkKSx2b2lkIDAhPT1jKXJldHVybiBjO2lmKGM9UChmLGQsdm9pZCAwKSx2b2lkIDAhPT1jKXJldHVybiBjfWVsc2UgdGhpcy5lYWNoKGZ1bmN0aW9uKCl7dmFyIGM9TS5nZXQodGhpcyxkKTtNLnNldCh0aGlzLGQsYiksLTEhPT1hLmluZGV4T2YoXCItXCIpJiZ2b2lkIDAhPT1jJiZNLnNldCh0aGlzLGEsYil9KX0sbnVsbCxiLGFyZ3VtZW50cy5sZW5ndGg+MSxudWxsLCEwKX0scmVtb3ZlRGF0YTpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCl7TS5yZW1vdmUodGhpcyxhKX0pfX0pLG4uZXh0ZW5kKHtxdWV1ZTpmdW5jdGlvbihhLGIsYyl7dmFyIGQ7cmV0dXJuIGE/KGI9KGJ8fFwiZnhcIikrXCJxdWV1ZVwiLGQ9TC5nZXQoYSxiKSxjJiYoIWR8fG4uaXNBcnJheShjKT9kPUwuYWNjZXNzKGEsYixuLm1ha2VBcnJheShjKSk6ZC5wdXNoKGMpKSxkfHxbXSk6dm9pZCAwfSxkZXF1ZXVlOmZ1bmN0aW9uKGEsYil7Yj1ifHxcImZ4XCI7dmFyIGM9bi5xdWV1ZShhLGIpLGQ9Yy5sZW5ndGgsZT1jLnNoaWZ0KCksZj1uLl9xdWV1ZUhvb2tzKGEsYiksZz1mdW5jdGlvbigpe24uZGVxdWV1ZShhLGIpfTtcImlucHJvZ3Jlc3NcIj09PWUmJihlPWMuc2hpZnQoKSxkLS0pLGUmJihcImZ4XCI9PT1iJiZjLnVuc2hpZnQoXCJpbnByb2dyZXNzXCIpLGRlbGV0ZSBmLnN0b3AsZS5jYWxsKGEsZyxmKSksIWQmJmYmJmYuZW1wdHkuZmlyZSgpfSxfcXVldWVIb29rczpmdW5jdGlvbihhLGIpe3ZhciBjPWIrXCJxdWV1ZUhvb2tzXCI7cmV0dXJuIEwuZ2V0KGEsYyl8fEwuYWNjZXNzKGEsYyx7ZW1wdHk6bi5DYWxsYmFja3MoXCJvbmNlIG1lbW9yeVwiKS5hZGQoZnVuY3Rpb24oKXtMLnJlbW92ZShhLFtiK1wicXVldWVcIixjXSl9KX0pfX0pLG4uZm4uZXh0ZW5kKHtxdWV1ZTpmdW5jdGlvbihhLGIpe3ZhciBjPTI7cmV0dXJuXCJzdHJpbmdcIiE9dHlwZW9mIGEmJihiPWEsYT1cImZ4XCIsYy0tKSxhcmd1bWVudHMubGVuZ3RoPGM/bi5xdWV1ZSh0aGlzWzBdLGEpOnZvaWQgMD09PWI/dGhpczp0aGlzLmVhY2goZnVuY3Rpb24oKXt2YXIgYz1uLnF1ZXVlKHRoaXMsYSxiKTtuLl9xdWV1ZUhvb2tzKHRoaXMsYSksXCJmeFwiPT09YSYmXCJpbnByb2dyZXNzXCIhPT1jWzBdJiZuLmRlcXVldWUodGhpcyxhKX0pfSxkZXF1ZXVlOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKXtuLmRlcXVldWUodGhpcyxhKX0pfSxjbGVhclF1ZXVlOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLnF1ZXVlKGF8fFwiZnhcIixbXSl9LHByb21pc2U6ZnVuY3Rpb24oYSxiKXt2YXIgYyxkPTEsZT1uLkRlZmVycmVkKCksZj10aGlzLGc9dGhpcy5sZW5ndGgsaD1mdW5jdGlvbigpey0tZHx8ZS5yZXNvbHZlV2l0aChmLFtmXSl9O1wic3RyaW5nXCIhPXR5cGVvZiBhJiYoYj1hLGE9dm9pZCAwKSxhPWF8fFwiZnhcIjt3aGlsZShnLS0pYz1MLmdldChmW2ddLGErXCJxdWV1ZUhvb2tzXCIpLGMmJmMuZW1wdHkmJihkKyssYy5lbXB0eS5hZGQoaCkpO3JldHVybiBoKCksZS5wcm9taXNlKGIpfX0pO3ZhciBRPS9bKy1dPyg/OlxcZCpcXC58KVxcZCsoPzpbZUVdWystXT9cXGQrfCkvLnNvdXJjZSxSPVtcIlRvcFwiLFwiUmlnaHRcIixcIkJvdHRvbVwiLFwiTGVmdFwiXSxTPWZ1bmN0aW9uKGEsYil7cmV0dXJuIGE9Ynx8YSxcIm5vbmVcIj09PW4uY3NzKGEsXCJkaXNwbGF5XCIpfHwhbi5jb250YWlucyhhLm93bmVyRG9jdW1lbnQsYSl9LFQ9L14oPzpjaGVja2JveHxyYWRpbykkL2k7IWZ1bmN0aW9uKCl7dmFyIGE9bC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCksYj1hLmFwcGVuZENoaWxkKGwuY3JlYXRlRWxlbWVudChcImRpdlwiKSksYz1sLmNyZWF0ZUVsZW1lbnQoXCJpbnB1dFwiKTtjLnNldEF0dHJpYnV0ZShcInR5cGVcIixcInJhZGlvXCIpLGMuc2V0QXR0cmlidXRlKFwiY2hlY2tlZFwiLFwiY2hlY2tlZFwiKSxjLnNldEF0dHJpYnV0ZShcIm5hbWVcIixcInRcIiksYi5hcHBlbmRDaGlsZChjKSxrLmNoZWNrQ2xvbmU9Yi5jbG9uZU5vZGUoITApLmNsb25lTm9kZSghMCkubGFzdENoaWxkLmNoZWNrZWQsYi5pbm5lckhUTUw9XCI8dGV4dGFyZWE+eDwvdGV4dGFyZWE+XCIsay5ub0Nsb25lQ2hlY2tlZD0hIWIuY2xvbmVOb2RlKCEwKS5sYXN0Q2hpbGQuZGVmYXVsdFZhbHVlfSgpO3ZhciBVPVwidW5kZWZpbmVkXCI7ay5mb2N1c2luQnViYmxlcz1cIm9uZm9jdXNpblwiaW4gYTt2YXIgVj0vXmtleS8sVz0vXig/Om1vdXNlfHBvaW50ZXJ8Y29udGV4dG1lbnUpfGNsaWNrLyxYPS9eKD86Zm9jdXNpbmZvY3VzfGZvY3Vzb3V0Ymx1cikkLyxZPS9eKFteLl0qKSg/OlxcLiguKyl8KSQvO2Z1bmN0aW9uIFooKXtyZXR1cm4hMH1mdW5jdGlvbiAkKCl7cmV0dXJuITF9ZnVuY3Rpb24gXygpe3RyeXtyZXR1cm4gbC5hY3RpdmVFbGVtZW50fWNhdGNoKGEpe319bi5ldmVudD17Z2xvYmFsOnt9LGFkZDpmdW5jdGlvbihhLGIsYyxkLGUpe3ZhciBmLGcsaCxpLGosayxsLG0sbyxwLHEscj1MLmdldChhKTtpZihyKXtjLmhhbmRsZXImJihmPWMsYz1mLmhhbmRsZXIsZT1mLnNlbGVjdG9yKSxjLmd1aWR8fChjLmd1aWQ9bi5ndWlkKyspLChpPXIuZXZlbnRzKXx8KGk9ci5ldmVudHM9e30pLChnPXIuaGFuZGxlKXx8KGc9ci5oYW5kbGU9ZnVuY3Rpb24oYil7cmV0dXJuIHR5cGVvZiBuIT09VSYmbi5ldmVudC50cmlnZ2VyZWQhPT1iLnR5cGU/bi5ldmVudC5kaXNwYXRjaC5hcHBseShhLGFyZ3VtZW50cyk6dm9pZCAwfSksYj0oYnx8XCJcIikubWF0Y2goRSl8fFtcIlwiXSxqPWIubGVuZ3RoO3doaWxlKGotLSloPVkuZXhlYyhiW2pdKXx8W10sbz1xPWhbMV0scD0oaFsyXXx8XCJcIikuc3BsaXQoXCIuXCIpLnNvcnQoKSxvJiYobD1uLmV2ZW50LnNwZWNpYWxbb118fHt9LG89KGU/bC5kZWxlZ2F0ZVR5cGU6bC5iaW5kVHlwZSl8fG8sbD1uLmV2ZW50LnNwZWNpYWxbb118fHt9LGs9bi5leHRlbmQoe3R5cGU6byxvcmlnVHlwZTpxLGRhdGE6ZCxoYW5kbGVyOmMsZ3VpZDpjLmd1aWQsc2VsZWN0b3I6ZSxuZWVkc0NvbnRleHQ6ZSYmbi5leHByLm1hdGNoLm5lZWRzQ29udGV4dC50ZXN0KGUpLG5hbWVzcGFjZTpwLmpvaW4oXCIuXCIpfSxmKSwobT1pW29dKXx8KG09aVtvXT1bXSxtLmRlbGVnYXRlQ291bnQ9MCxsLnNldHVwJiZsLnNldHVwLmNhbGwoYSxkLHAsZykhPT0hMXx8YS5hZGRFdmVudExpc3RlbmVyJiZhLmFkZEV2ZW50TGlzdGVuZXIobyxnLCExKSksbC5hZGQmJihsLmFkZC5jYWxsKGEsayksay5oYW5kbGVyLmd1aWR8fChrLmhhbmRsZXIuZ3VpZD1jLmd1aWQpKSxlP20uc3BsaWNlKG0uZGVsZWdhdGVDb3VudCsrLDAsayk6bS5wdXNoKGspLG4uZXZlbnQuZ2xvYmFsW29dPSEwKX19LHJlbW92ZTpmdW5jdGlvbihhLGIsYyxkLGUpe3ZhciBmLGcsaCxpLGosayxsLG0sbyxwLHEscj1MLmhhc0RhdGEoYSkmJkwuZ2V0KGEpO2lmKHImJihpPXIuZXZlbnRzKSl7Yj0oYnx8XCJcIikubWF0Y2goRSl8fFtcIlwiXSxqPWIubGVuZ3RoO3doaWxlKGotLSlpZihoPVkuZXhlYyhiW2pdKXx8W10sbz1xPWhbMV0scD0oaFsyXXx8XCJcIikuc3BsaXQoXCIuXCIpLnNvcnQoKSxvKXtsPW4uZXZlbnQuc3BlY2lhbFtvXXx8e30sbz0oZD9sLmRlbGVnYXRlVHlwZTpsLmJpbmRUeXBlKXx8byxtPWlbb118fFtdLGg9aFsyXSYmbmV3IFJlZ0V4cChcIihefFxcXFwuKVwiK3Auam9pbihcIlxcXFwuKD86LipcXFxcLnwpXCIpK1wiKFxcXFwufCQpXCIpLGc9Zj1tLmxlbmd0aDt3aGlsZShmLS0paz1tW2ZdLCFlJiZxIT09ay5vcmlnVHlwZXx8YyYmYy5ndWlkIT09ay5ndWlkfHxoJiYhaC50ZXN0KGsubmFtZXNwYWNlKXx8ZCYmZCE9PWsuc2VsZWN0b3ImJihcIioqXCIhPT1kfHwhay5zZWxlY3Rvcil8fChtLnNwbGljZShmLDEpLGsuc2VsZWN0b3ImJm0uZGVsZWdhdGVDb3VudC0tLGwucmVtb3ZlJiZsLnJlbW92ZS5jYWxsKGEsaykpO2cmJiFtLmxlbmd0aCYmKGwudGVhcmRvd24mJmwudGVhcmRvd24uY2FsbChhLHAsci5oYW5kbGUpIT09ITF8fG4ucmVtb3ZlRXZlbnQoYSxvLHIuaGFuZGxlKSxkZWxldGUgaVtvXSl9ZWxzZSBmb3IobyBpbiBpKW4uZXZlbnQucmVtb3ZlKGEsbytiW2pdLGMsZCwhMCk7bi5pc0VtcHR5T2JqZWN0KGkpJiYoZGVsZXRlIHIuaGFuZGxlLEwucmVtb3ZlKGEsXCJldmVudHNcIikpfX0sdHJpZ2dlcjpmdW5jdGlvbihiLGMsZCxlKXt2YXIgZixnLGgsaSxrLG0sbyxwPVtkfHxsXSxxPWouY2FsbChiLFwidHlwZVwiKT9iLnR5cGU6YixyPWouY2FsbChiLFwibmFtZXNwYWNlXCIpP2IubmFtZXNwYWNlLnNwbGl0KFwiLlwiKTpbXTtpZihnPWg9ZD1kfHxsLDMhPT1kLm5vZGVUeXBlJiY4IT09ZC5ub2RlVHlwZSYmIVgudGVzdChxK24uZXZlbnQudHJpZ2dlcmVkKSYmKHEuaW5kZXhPZihcIi5cIik+PTAmJihyPXEuc3BsaXQoXCIuXCIpLHE9ci5zaGlmdCgpLHIuc29ydCgpKSxrPXEuaW5kZXhPZihcIjpcIik8MCYmXCJvblwiK3EsYj1iW24uZXhwYW5kb10/YjpuZXcgbi5FdmVudChxLFwib2JqZWN0XCI9PXR5cGVvZiBiJiZiKSxiLmlzVHJpZ2dlcj1lPzI6MyxiLm5hbWVzcGFjZT1yLmpvaW4oXCIuXCIpLGIubmFtZXNwYWNlX3JlPWIubmFtZXNwYWNlP25ldyBSZWdFeHAoXCIoXnxcXFxcLilcIityLmpvaW4oXCJcXFxcLig/Oi4qXFxcXC58KVwiKStcIihcXFxcLnwkKVwiKTpudWxsLGIucmVzdWx0PXZvaWQgMCxiLnRhcmdldHx8KGIudGFyZ2V0PWQpLGM9bnVsbD09Yz9bYl06bi5tYWtlQXJyYXkoYyxbYl0pLG89bi5ldmVudC5zcGVjaWFsW3FdfHx7fSxlfHwhby50cmlnZ2VyfHxvLnRyaWdnZXIuYXBwbHkoZCxjKSE9PSExKSl7aWYoIWUmJiFvLm5vQnViYmxlJiYhbi5pc1dpbmRvdyhkKSl7Zm9yKGk9by5kZWxlZ2F0ZVR5cGV8fHEsWC50ZXN0KGkrcSl8fChnPWcucGFyZW50Tm9kZSk7ZztnPWcucGFyZW50Tm9kZSlwLnB1c2goZyksaD1nO2g9PT0oZC5vd25lckRvY3VtZW50fHxsKSYmcC5wdXNoKGguZGVmYXVsdFZpZXd8fGgucGFyZW50V2luZG93fHxhKX1mPTA7d2hpbGUoKGc9cFtmKytdKSYmIWIuaXNQcm9wYWdhdGlvblN0b3BwZWQoKSliLnR5cGU9Zj4xP2k6by5iaW5kVHlwZXx8cSxtPShMLmdldChnLFwiZXZlbnRzXCIpfHx7fSlbYi50eXBlXSYmTC5nZXQoZyxcImhhbmRsZVwiKSxtJiZtLmFwcGx5KGcsYyksbT1rJiZnW2tdLG0mJm0uYXBwbHkmJm4uYWNjZXB0RGF0YShnKSYmKGIucmVzdWx0PW0uYXBwbHkoZyxjKSxiLnJlc3VsdD09PSExJiZiLnByZXZlbnREZWZhdWx0KCkpO3JldHVybiBiLnR5cGU9cSxlfHxiLmlzRGVmYXVsdFByZXZlbnRlZCgpfHxvLl9kZWZhdWx0JiZvLl9kZWZhdWx0LmFwcGx5KHAucG9wKCksYykhPT0hMXx8IW4uYWNjZXB0RGF0YShkKXx8ayYmbi5pc0Z1bmN0aW9uKGRbcV0pJiYhbi5pc1dpbmRvdyhkKSYmKGg9ZFtrXSxoJiYoZFtrXT1udWxsKSxuLmV2ZW50LnRyaWdnZXJlZD1xLGRbcV0oKSxuLmV2ZW50LnRyaWdnZXJlZD12b2lkIDAsaCYmKGRba109aCkpLGIucmVzdWx0fX0sZGlzcGF0Y2g6ZnVuY3Rpb24oYSl7YT1uLmV2ZW50LmZpeChhKTt2YXIgYixjLGUsZixnLGg9W10saT1kLmNhbGwoYXJndW1lbnRzKSxqPShMLmdldCh0aGlzLFwiZXZlbnRzXCIpfHx7fSlbYS50eXBlXXx8W10saz1uLmV2ZW50LnNwZWNpYWxbYS50eXBlXXx8e307aWYoaVswXT1hLGEuZGVsZWdhdGVUYXJnZXQ9dGhpcywhay5wcmVEaXNwYXRjaHx8ay5wcmVEaXNwYXRjaC5jYWxsKHRoaXMsYSkhPT0hMSl7aD1uLmV2ZW50LmhhbmRsZXJzLmNhbGwodGhpcyxhLGopLGI9MDt3aGlsZSgoZj1oW2IrK10pJiYhYS5pc1Byb3BhZ2F0aW9uU3RvcHBlZCgpKXthLmN1cnJlbnRUYXJnZXQ9Zi5lbGVtLGM9MDt3aGlsZSgoZz1mLmhhbmRsZXJzW2MrK10pJiYhYS5pc0ltbWVkaWF0ZVByb3BhZ2F0aW9uU3RvcHBlZCgpKSghYS5uYW1lc3BhY2VfcmV8fGEubmFtZXNwYWNlX3JlLnRlc3QoZy5uYW1lc3BhY2UpKSYmKGEuaGFuZGxlT2JqPWcsYS5kYXRhPWcuZGF0YSxlPSgobi5ldmVudC5zcGVjaWFsW2cub3JpZ1R5cGVdfHx7fSkuaGFuZGxlfHxnLmhhbmRsZXIpLmFwcGx5KGYuZWxlbSxpKSx2b2lkIDAhPT1lJiYoYS5yZXN1bHQ9ZSk9PT0hMSYmKGEucHJldmVudERlZmF1bHQoKSxhLnN0b3BQcm9wYWdhdGlvbigpKSl9cmV0dXJuIGsucG9zdERpc3BhdGNoJiZrLnBvc3REaXNwYXRjaC5jYWxsKHRoaXMsYSksYS5yZXN1bHR9fSxoYW5kbGVyczpmdW5jdGlvbihhLGIpe3ZhciBjLGQsZSxmLGc9W10saD1iLmRlbGVnYXRlQ291bnQsaT1hLnRhcmdldDtpZihoJiZpLm5vZGVUeXBlJiYoIWEuYnV0dG9ufHxcImNsaWNrXCIhPT1hLnR5cGUpKWZvcig7aSE9PXRoaXM7aT1pLnBhcmVudE5vZGV8fHRoaXMpaWYoaS5kaXNhYmxlZCE9PSEwfHxcImNsaWNrXCIhPT1hLnR5cGUpe2ZvcihkPVtdLGM9MDtoPmM7YysrKWY9YltjXSxlPWYuc2VsZWN0b3IrXCIgXCIsdm9pZCAwPT09ZFtlXSYmKGRbZV09Zi5uZWVkc0NvbnRleHQ/bihlLHRoaXMpLmluZGV4KGkpPj0wOm4uZmluZChlLHRoaXMsbnVsbCxbaV0pLmxlbmd0aCksZFtlXSYmZC5wdXNoKGYpO2QubGVuZ3RoJiZnLnB1c2goe2VsZW06aSxoYW5kbGVyczpkfSl9cmV0dXJuIGg8Yi5sZW5ndGgmJmcucHVzaCh7ZWxlbTp0aGlzLGhhbmRsZXJzOmIuc2xpY2UoaCl9KSxnfSxwcm9wczpcImFsdEtleSBidWJibGVzIGNhbmNlbGFibGUgY3RybEtleSBjdXJyZW50VGFyZ2V0IGV2ZW50UGhhc2UgbWV0YUtleSByZWxhdGVkVGFyZ2V0IHNoaWZ0S2V5IHRhcmdldCB0aW1lU3RhbXAgdmlldyB3aGljaFwiLnNwbGl0KFwiIFwiKSxmaXhIb29rczp7fSxrZXlIb29rczp7cHJvcHM6XCJjaGFyIGNoYXJDb2RlIGtleSBrZXlDb2RlXCIuc3BsaXQoXCIgXCIpLGZpbHRlcjpmdW5jdGlvbihhLGIpe3JldHVybiBudWxsPT1hLndoaWNoJiYoYS53aGljaD1udWxsIT1iLmNoYXJDb2RlP2IuY2hhckNvZGU6Yi5rZXlDb2RlKSxhfX0sbW91c2VIb29rczp7cHJvcHM6XCJidXR0b24gYnV0dG9ucyBjbGllbnRYIGNsaWVudFkgb2Zmc2V0WCBvZmZzZXRZIHBhZ2VYIHBhZ2VZIHNjcmVlblggc2NyZWVuWSB0b0VsZW1lbnRcIi5zcGxpdChcIiBcIiksZmlsdGVyOmZ1bmN0aW9uKGEsYil7dmFyIGMsZCxlLGY9Yi5idXR0b247cmV0dXJuIG51bGw9PWEucGFnZVgmJm51bGwhPWIuY2xpZW50WCYmKGM9YS50YXJnZXQub3duZXJEb2N1bWVudHx8bCxkPWMuZG9jdW1lbnRFbGVtZW50LGU9Yy5ib2R5LGEucGFnZVg9Yi5jbGllbnRYKyhkJiZkLnNjcm9sbExlZnR8fGUmJmUuc2Nyb2xsTGVmdHx8MCktKGQmJmQuY2xpZW50TGVmdHx8ZSYmZS5jbGllbnRMZWZ0fHwwKSxhLnBhZ2VZPWIuY2xpZW50WSsoZCYmZC5zY3JvbGxUb3B8fGUmJmUuc2Nyb2xsVG9wfHwwKS0oZCYmZC5jbGllbnRUb3B8fGUmJmUuY2xpZW50VG9wfHwwKSksYS53aGljaHx8dm9pZCAwPT09Znx8KGEud2hpY2g9MSZmPzE6MiZmPzM6NCZmPzI6MCksYX19LGZpeDpmdW5jdGlvbihhKXtpZihhW24uZXhwYW5kb10pcmV0dXJuIGE7dmFyIGIsYyxkLGU9YS50eXBlLGY9YSxnPXRoaXMuZml4SG9va3NbZV07Z3x8KHRoaXMuZml4SG9va3NbZV09Zz1XLnRlc3QoZSk/dGhpcy5tb3VzZUhvb2tzOlYudGVzdChlKT90aGlzLmtleUhvb2tzOnt9KSxkPWcucHJvcHM/dGhpcy5wcm9wcy5jb25jYXQoZy5wcm9wcyk6dGhpcy5wcm9wcyxhPW5ldyBuLkV2ZW50KGYpLGI9ZC5sZW5ndGg7d2hpbGUoYi0tKWM9ZFtiXSxhW2NdPWZbY107cmV0dXJuIGEudGFyZ2V0fHwoYS50YXJnZXQ9bCksMz09PWEudGFyZ2V0Lm5vZGVUeXBlJiYoYS50YXJnZXQ9YS50YXJnZXQucGFyZW50Tm9kZSksZy5maWx0ZXI/Zy5maWx0ZXIoYSxmKTphfSxzcGVjaWFsOntsb2FkOntub0J1YmJsZTohMH0sZm9jdXM6e3RyaWdnZXI6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcyE9PV8oKSYmdGhpcy5mb2N1cz8odGhpcy5mb2N1cygpLCExKTp2b2lkIDB9LGRlbGVnYXRlVHlwZTpcImZvY3VzaW5cIn0sYmx1cjp7dHJpZ2dlcjpmdW5jdGlvbigpe3JldHVybiB0aGlzPT09XygpJiZ0aGlzLmJsdXI/KHRoaXMuYmx1cigpLCExKTp2b2lkIDB9LGRlbGVnYXRlVHlwZTpcImZvY3Vzb3V0XCJ9LGNsaWNrOnt0cmlnZ2VyOmZ1bmN0aW9uKCl7cmV0dXJuXCJjaGVja2JveFwiPT09dGhpcy50eXBlJiZ0aGlzLmNsaWNrJiZuLm5vZGVOYW1lKHRoaXMsXCJpbnB1dFwiKT8odGhpcy5jbGljaygpLCExKTp2b2lkIDB9LF9kZWZhdWx0OmZ1bmN0aW9uKGEpe3JldHVybiBuLm5vZGVOYW1lKGEudGFyZ2V0LFwiYVwiKX19LGJlZm9yZXVubG9hZDp7cG9zdERpc3BhdGNoOmZ1bmN0aW9uKGEpe3ZvaWQgMCE9PWEucmVzdWx0JiZhLm9yaWdpbmFsRXZlbnQmJihhLm9yaWdpbmFsRXZlbnQucmV0dXJuVmFsdWU9YS5yZXN1bHQpfX19LHNpbXVsYXRlOmZ1bmN0aW9uKGEsYixjLGQpe3ZhciBlPW4uZXh0ZW5kKG5ldyBuLkV2ZW50LGMse3R5cGU6YSxpc1NpbXVsYXRlZDohMCxvcmlnaW5hbEV2ZW50Ont9fSk7ZD9uLmV2ZW50LnRyaWdnZXIoZSxudWxsLGIpOm4uZXZlbnQuZGlzcGF0Y2guY2FsbChiLGUpLGUuaXNEZWZhdWx0UHJldmVudGVkKCkmJmMucHJldmVudERlZmF1bHQoKX19LG4ucmVtb3ZlRXZlbnQ9ZnVuY3Rpb24oYSxiLGMpe2EucmVtb3ZlRXZlbnRMaXN0ZW5lciYmYS5yZW1vdmVFdmVudExpc3RlbmVyKGIsYywhMSl9LG4uRXZlbnQ9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gdGhpcyBpbnN0YW5jZW9mIG4uRXZlbnQ/KGEmJmEudHlwZT8odGhpcy5vcmlnaW5hbEV2ZW50PWEsdGhpcy50eXBlPWEudHlwZSx0aGlzLmlzRGVmYXVsdFByZXZlbnRlZD1hLmRlZmF1bHRQcmV2ZW50ZWR8fHZvaWQgMD09PWEuZGVmYXVsdFByZXZlbnRlZCYmYS5yZXR1cm5WYWx1ZT09PSExP1o6JCk6dGhpcy50eXBlPWEsYiYmbi5leHRlbmQodGhpcyxiKSx0aGlzLnRpbWVTdGFtcD1hJiZhLnRpbWVTdGFtcHx8bi5ub3coKSx2b2lkKHRoaXNbbi5leHBhbmRvXT0hMCkpOm5ldyBuLkV2ZW50KGEsYil9LG4uRXZlbnQucHJvdG90eXBlPXtpc0RlZmF1bHRQcmV2ZW50ZWQ6JCxpc1Byb3BhZ2F0aW9uU3RvcHBlZDokLGlzSW1tZWRpYXRlUHJvcGFnYXRpb25TdG9wcGVkOiQscHJldmVudERlZmF1bHQ6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLm9yaWdpbmFsRXZlbnQ7dGhpcy5pc0RlZmF1bHRQcmV2ZW50ZWQ9WixhJiZhLnByZXZlbnREZWZhdWx0JiZhLnByZXZlbnREZWZhdWx0KCl9LHN0b3BQcm9wYWdhdGlvbjpmdW5jdGlvbigpe3ZhciBhPXRoaXMub3JpZ2luYWxFdmVudDt0aGlzLmlzUHJvcGFnYXRpb25TdG9wcGVkPVosYSYmYS5zdG9wUHJvcGFnYXRpb24mJmEuc3RvcFByb3BhZ2F0aW9uKCl9LHN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbjpmdW5jdGlvbigpe3ZhciBhPXRoaXMub3JpZ2luYWxFdmVudDt0aGlzLmlzSW1tZWRpYXRlUHJvcGFnYXRpb25TdG9wcGVkPVosYSYmYS5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24mJmEuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKCksdGhpcy5zdG9wUHJvcGFnYXRpb24oKX19LG4uZWFjaCh7bW91c2VlbnRlcjpcIm1vdXNlb3ZlclwiLG1vdXNlbGVhdmU6XCJtb3VzZW91dFwiLHBvaW50ZXJlbnRlcjpcInBvaW50ZXJvdmVyXCIscG9pbnRlcmxlYXZlOlwicG9pbnRlcm91dFwifSxmdW5jdGlvbihhLGIpe24uZXZlbnQuc3BlY2lhbFthXT17ZGVsZWdhdGVUeXBlOmIsYmluZFR5cGU6YixoYW5kbGU6ZnVuY3Rpb24oYSl7dmFyIGMsZD10aGlzLGU9YS5yZWxhdGVkVGFyZ2V0LGY9YS5oYW5kbGVPYmo7cmV0dXJuKCFlfHxlIT09ZCYmIW4uY29udGFpbnMoZCxlKSkmJihhLnR5cGU9Zi5vcmlnVHlwZSxjPWYuaGFuZGxlci5hcHBseSh0aGlzLGFyZ3VtZW50cyksYS50eXBlPWIpLGN9fX0pLGsuZm9jdXNpbkJ1YmJsZXN8fG4uZWFjaCh7Zm9jdXM6XCJmb2N1c2luXCIsYmx1cjpcImZvY3Vzb3V0XCJ9LGZ1bmN0aW9uKGEsYil7dmFyIGM9ZnVuY3Rpb24oYSl7bi5ldmVudC5zaW11bGF0ZShiLGEudGFyZ2V0LG4uZXZlbnQuZml4KGEpLCEwKX07bi5ldmVudC5zcGVjaWFsW2JdPXtzZXR1cDpmdW5jdGlvbigpe3ZhciBkPXRoaXMub3duZXJEb2N1bWVudHx8dGhpcyxlPUwuYWNjZXNzKGQsYik7ZXx8ZC5hZGRFdmVudExpc3RlbmVyKGEsYywhMCksTC5hY2Nlc3MoZCxiLChlfHwwKSsxKX0sdGVhcmRvd246ZnVuY3Rpb24oKXt2YXIgZD10aGlzLm93bmVyRG9jdW1lbnR8fHRoaXMsZT1MLmFjY2VzcyhkLGIpLTE7ZT9MLmFjY2VzcyhkLGIsZSk6KGQucmVtb3ZlRXZlbnRMaXN0ZW5lcihhLGMsITApLEwucmVtb3ZlKGQsYikpfX19KSxuLmZuLmV4dGVuZCh7b246ZnVuY3Rpb24oYSxiLGMsZCxlKXt2YXIgZixnO2lmKFwib2JqZWN0XCI9PXR5cGVvZiBhKXtcInN0cmluZ1wiIT10eXBlb2YgYiYmKGM9Y3x8YixiPXZvaWQgMCk7Zm9yKGcgaW4gYSl0aGlzLm9uKGcsYixjLGFbZ10sZSk7cmV0dXJuIHRoaXN9aWYobnVsbD09YyYmbnVsbD09ZD8oZD1iLGM9Yj12b2lkIDApOm51bGw9PWQmJihcInN0cmluZ1wiPT10eXBlb2YgYj8oZD1jLGM9dm9pZCAwKTooZD1jLGM9YixiPXZvaWQgMCkpLGQ9PT0hMSlkPSQ7ZWxzZSBpZighZClyZXR1cm4gdGhpcztyZXR1cm4gMT09PWUmJihmPWQsZD1mdW5jdGlvbihhKXtyZXR1cm4gbigpLm9mZihhKSxmLmFwcGx5KHRoaXMsYXJndW1lbnRzKX0sZC5ndWlkPWYuZ3VpZHx8KGYuZ3VpZD1uLmd1aWQrKykpLHRoaXMuZWFjaChmdW5jdGlvbigpe24uZXZlbnQuYWRkKHRoaXMsYSxkLGMsYil9KX0sb25lOmZ1bmN0aW9uKGEsYixjLGQpe3JldHVybiB0aGlzLm9uKGEsYixjLGQsMSl9LG9mZjpmdW5jdGlvbihhLGIsYyl7dmFyIGQsZTtpZihhJiZhLnByZXZlbnREZWZhdWx0JiZhLmhhbmRsZU9iailyZXR1cm4gZD1hLmhhbmRsZU9iaixuKGEuZGVsZWdhdGVUYXJnZXQpLm9mZihkLm5hbWVzcGFjZT9kLm9yaWdUeXBlK1wiLlwiK2QubmFtZXNwYWNlOmQub3JpZ1R5cGUsZC5zZWxlY3RvcixkLmhhbmRsZXIpLHRoaXM7aWYoXCJvYmplY3RcIj09dHlwZW9mIGEpe2ZvcihlIGluIGEpdGhpcy5vZmYoZSxiLGFbZV0pO3JldHVybiB0aGlzfXJldHVybihiPT09ITF8fFwiZnVuY3Rpb25cIj09dHlwZW9mIGIpJiYoYz1iLGI9dm9pZCAwKSxjPT09ITEmJihjPSQpLHRoaXMuZWFjaChmdW5jdGlvbigpe24uZXZlbnQucmVtb3ZlKHRoaXMsYSxjLGIpfSl9LHRyaWdnZXI6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCl7bi5ldmVudC50cmlnZ2VyKGEsYix0aGlzKX0pfSx0cmlnZ2VySGFuZGxlcjpmdW5jdGlvbihhLGIpe3ZhciBjPXRoaXNbMF07cmV0dXJuIGM/bi5ldmVudC50cmlnZ2VyKGEsYixjLCEwKTp2b2lkIDB9fSk7dmFyIGFhPS88KD8hYXJlYXxicnxjb2x8ZW1iZWR8aHJ8aW1nfGlucHV0fGxpbmt8bWV0YXxwYXJhbSkoKFtcXHc6XSspW14+XSopXFwvPi9naSxiYT0vPChbXFx3Ol0rKS8sY2E9Lzx8JiM/XFx3KzsvLGRhPS88KD86c2NyaXB0fHN0eWxlfGxpbmspL2ksZWE9L2NoZWNrZWRcXHMqKD86W149XXw9XFxzKi5jaGVja2VkLikvaSxmYT0vXiR8XFwvKD86amF2YXxlY21hKXNjcmlwdC9pLGdhPS9edHJ1ZVxcLyguKikvLGhhPS9eXFxzKjwhKD86XFxbQ0RBVEFcXFt8LS0pfCg/OlxcXVxcXXwtLSk+XFxzKiQvZyxpYT17b3B0aW9uOlsxLFwiPHNlbGVjdCBtdWx0aXBsZT0nbXVsdGlwbGUnPlwiLFwiPC9zZWxlY3Q+XCJdLHRoZWFkOlsxLFwiPHRhYmxlPlwiLFwiPC90YWJsZT5cIl0sY29sOlsyLFwiPHRhYmxlPjxjb2xncm91cD5cIixcIjwvY29sZ3JvdXA+PC90YWJsZT5cIl0sdHI6WzIsXCI8dGFibGU+PHRib2R5PlwiLFwiPC90Ym9keT48L3RhYmxlPlwiXSx0ZDpbMyxcIjx0YWJsZT48dGJvZHk+PHRyPlwiLFwiPC90cj48L3Rib2R5PjwvdGFibGU+XCJdLF9kZWZhdWx0OlswLFwiXCIsXCJcIl19O2lhLm9wdGdyb3VwPWlhLm9wdGlvbixpYS50Ym9keT1pYS50Zm9vdD1pYS5jb2xncm91cD1pYS5jYXB0aW9uPWlhLnRoZWFkLGlhLnRoPWlhLnRkO2Z1bmN0aW9uIGphKGEsYil7cmV0dXJuIG4ubm9kZU5hbWUoYSxcInRhYmxlXCIpJiZuLm5vZGVOYW1lKDExIT09Yi5ub2RlVHlwZT9iOmIuZmlyc3RDaGlsZCxcInRyXCIpP2EuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJ0Ym9keVwiKVswXXx8YS5hcHBlbmRDaGlsZChhLm93bmVyRG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInRib2R5XCIpKTphfWZ1bmN0aW9uIGthKGEpe3JldHVybiBhLnR5cGU9KG51bGwhPT1hLmdldEF0dHJpYnV0ZShcInR5cGVcIikpK1wiL1wiK2EudHlwZSxhfWZ1bmN0aW9uIGxhKGEpe3ZhciBiPWdhLmV4ZWMoYS50eXBlKTtyZXR1cm4gYj9hLnR5cGU9YlsxXTphLnJlbW92ZUF0dHJpYnV0ZShcInR5cGVcIiksYX1mdW5jdGlvbiBtYShhLGIpe2Zvcih2YXIgYz0wLGQ9YS5sZW5ndGg7ZD5jO2MrKylMLnNldChhW2NdLFwiZ2xvYmFsRXZhbFwiLCFifHxMLmdldChiW2NdLFwiZ2xvYmFsRXZhbFwiKSl9ZnVuY3Rpb24gbmEoYSxiKXt2YXIgYyxkLGUsZixnLGgsaSxqO2lmKDE9PT1iLm5vZGVUeXBlKXtpZihMLmhhc0RhdGEoYSkmJihmPUwuYWNjZXNzKGEpLGc9TC5zZXQoYixmKSxqPWYuZXZlbnRzKSl7ZGVsZXRlIGcuaGFuZGxlLGcuZXZlbnRzPXt9O2ZvcihlIGluIGopZm9yKGM9MCxkPWpbZV0ubGVuZ3RoO2Q+YztjKyspbi5ldmVudC5hZGQoYixlLGpbZV1bY10pfU0uaGFzRGF0YShhKSYmKGg9TS5hY2Nlc3MoYSksaT1uLmV4dGVuZCh7fSxoKSxNLnNldChiLGkpKX19ZnVuY3Rpb24gb2EoYSxiKXt2YXIgYz1hLmdldEVsZW1lbnRzQnlUYWdOYW1lP2EuZ2V0RWxlbWVudHNCeVRhZ05hbWUoYnx8XCIqXCIpOmEucXVlcnlTZWxlY3RvckFsbD9hLnF1ZXJ5U2VsZWN0b3JBbGwoYnx8XCIqXCIpOltdO3JldHVybiB2b2lkIDA9PT1ifHxiJiZuLm5vZGVOYW1lKGEsYik/bi5tZXJnZShbYV0sYyk6Y31mdW5jdGlvbiBwYShhLGIpe3ZhciBjPWIubm9kZU5hbWUudG9Mb3dlckNhc2UoKTtcImlucHV0XCI9PT1jJiZULnRlc3QoYS50eXBlKT9iLmNoZWNrZWQ9YS5jaGVja2VkOihcImlucHV0XCI9PT1jfHxcInRleHRhcmVhXCI9PT1jKSYmKGIuZGVmYXVsdFZhbHVlPWEuZGVmYXVsdFZhbHVlKX1uLmV4dGVuZCh7Y2xvbmU6ZnVuY3Rpb24oYSxiLGMpe3ZhciBkLGUsZixnLGg9YS5jbG9uZU5vZGUoITApLGk9bi5jb250YWlucyhhLm93bmVyRG9jdW1lbnQsYSk7aWYoIShrLm5vQ2xvbmVDaGVja2VkfHwxIT09YS5ub2RlVHlwZSYmMTEhPT1hLm5vZGVUeXBlfHxuLmlzWE1MRG9jKGEpKSlmb3IoZz1vYShoKSxmPW9hKGEpLGQ9MCxlPWYubGVuZ3RoO2U+ZDtkKyspcGEoZltkXSxnW2RdKTtpZihiKWlmKGMpZm9yKGY9Znx8b2EoYSksZz1nfHxvYShoKSxkPTAsZT1mLmxlbmd0aDtlPmQ7ZCsrKW5hKGZbZF0sZ1tkXSk7ZWxzZSBuYShhLGgpO3JldHVybiBnPW9hKGgsXCJzY3JpcHRcIiksZy5sZW5ndGg+MCYmbWEoZywhaSYmb2EoYSxcInNjcmlwdFwiKSksaH0sYnVpbGRGcmFnbWVudDpmdW5jdGlvbihhLGIsYyxkKXtmb3IodmFyIGUsZixnLGgsaSxqLGs9Yi5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCksbD1bXSxtPTAsbz1hLmxlbmd0aDtvPm07bSsrKWlmKGU9YVttXSxlfHwwPT09ZSlpZihcIm9iamVjdFwiPT09bi50eXBlKGUpKW4ubWVyZ2UobCxlLm5vZGVUeXBlP1tlXTplKTtlbHNlIGlmKGNhLnRlc3QoZSkpe2Y9Znx8ay5hcHBlbmRDaGlsZChiLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIikpLGc9KGJhLmV4ZWMoZSl8fFtcIlwiLFwiXCJdKVsxXS50b0xvd2VyQ2FzZSgpLGg9aWFbZ118fGlhLl9kZWZhdWx0LGYuaW5uZXJIVE1MPWhbMV0rZS5yZXBsYWNlKGFhLFwiPCQxPjwvJDI+XCIpK2hbMl0saj1oWzBdO3doaWxlKGotLSlmPWYubGFzdENoaWxkO24ubWVyZ2UobCxmLmNoaWxkTm9kZXMpLGY9ay5maXJzdENoaWxkLGYudGV4dENvbnRlbnQ9XCJcIn1lbHNlIGwucHVzaChiLmNyZWF0ZVRleHROb2RlKGUpKTtrLnRleHRDb250ZW50PVwiXCIsbT0wO3doaWxlKGU9bFttKytdKWlmKCghZHx8LTE9PT1uLmluQXJyYXkoZSxkKSkmJihpPW4uY29udGFpbnMoZS5vd25lckRvY3VtZW50LGUpLGY9b2Eoay5hcHBlbmRDaGlsZChlKSxcInNjcmlwdFwiKSxpJiZtYShmKSxjKSl7aj0wO3doaWxlKGU9ZltqKytdKWZhLnRlc3QoZS50eXBlfHxcIlwiKSYmYy5wdXNoKGUpfXJldHVybiBrfSxjbGVhbkRhdGE6ZnVuY3Rpb24oYSl7Zm9yKHZhciBiLGMsZCxlLGY9bi5ldmVudC5zcGVjaWFsLGc9MDt2b2lkIDAhPT0oYz1hW2ddKTtnKyspe2lmKG4uYWNjZXB0RGF0YShjKSYmKGU9Y1tMLmV4cGFuZG9dLGUmJihiPUwuY2FjaGVbZV0pKSl7aWYoYi5ldmVudHMpZm9yKGQgaW4gYi5ldmVudHMpZltkXT9uLmV2ZW50LnJlbW92ZShjLGQpOm4ucmVtb3ZlRXZlbnQoYyxkLGIuaGFuZGxlKTtMLmNhY2hlW2VdJiZkZWxldGUgTC5jYWNoZVtlXX1kZWxldGUgTS5jYWNoZVtjW00uZXhwYW5kb11dfX19KSxuLmZuLmV4dGVuZCh7dGV4dDpmdW5jdGlvbihhKXtyZXR1cm4gSih0aGlzLGZ1bmN0aW9uKGEpe3JldHVybiB2b2lkIDA9PT1hP24udGV4dCh0aGlzKTp0aGlzLmVtcHR5KCkuZWFjaChmdW5jdGlvbigpeygxPT09dGhpcy5ub2RlVHlwZXx8MTE9PT10aGlzLm5vZGVUeXBlfHw5PT09dGhpcy5ub2RlVHlwZSkmJih0aGlzLnRleHRDb250ZW50PWEpfSl9LG51bGwsYSxhcmd1bWVudHMubGVuZ3RoKX0sYXBwZW5kOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZG9tTWFuaXAoYXJndW1lbnRzLGZ1bmN0aW9uKGEpe2lmKDE9PT10aGlzLm5vZGVUeXBlfHwxMT09PXRoaXMubm9kZVR5cGV8fDk9PT10aGlzLm5vZGVUeXBlKXt2YXIgYj1qYSh0aGlzLGEpO2IuYXBwZW5kQ2hpbGQoYSl9fSl9LHByZXBlbmQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5kb21NYW5pcChhcmd1bWVudHMsZnVuY3Rpb24oYSl7aWYoMT09PXRoaXMubm9kZVR5cGV8fDExPT09dGhpcy5ub2RlVHlwZXx8OT09PXRoaXMubm9kZVR5cGUpe3ZhciBiPWphKHRoaXMsYSk7Yi5pbnNlcnRCZWZvcmUoYSxiLmZpcnN0Q2hpbGQpfX0pfSxiZWZvcmU6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5kb21NYW5pcChhcmd1bWVudHMsZnVuY3Rpb24oYSl7dGhpcy5wYXJlbnROb2RlJiZ0aGlzLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKGEsdGhpcyl9KX0sYWZ0ZXI6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5kb21NYW5pcChhcmd1bWVudHMsZnVuY3Rpb24oYSl7dGhpcy5wYXJlbnROb2RlJiZ0aGlzLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKGEsdGhpcy5uZXh0U2libGluZyl9KX0scmVtb3ZlOmZ1bmN0aW9uKGEsYil7Zm9yKHZhciBjLGQ9YT9uLmZpbHRlcihhLHRoaXMpOnRoaXMsZT0wO251bGwhPShjPWRbZV0pO2UrKylifHwxIT09Yy5ub2RlVHlwZXx8bi5jbGVhbkRhdGEob2EoYykpLGMucGFyZW50Tm9kZSYmKGImJm4uY29udGFpbnMoYy5vd25lckRvY3VtZW50LGMpJiZtYShvYShjLFwic2NyaXB0XCIpKSxjLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoYykpO3JldHVybiB0aGlzfSxlbXB0eTpmdW5jdGlvbigpe2Zvcih2YXIgYSxiPTA7bnVsbCE9KGE9dGhpc1tiXSk7YisrKTE9PT1hLm5vZGVUeXBlJiYobi5jbGVhbkRhdGEob2EoYSwhMSkpLGEudGV4dENvbnRlbnQ9XCJcIik7cmV0dXJuIHRoaXN9LGNsb25lOmZ1bmN0aW9uKGEsYil7cmV0dXJuIGE9bnVsbD09YT8hMTphLGI9bnVsbD09Yj9hOmIsdGhpcy5tYXAoZnVuY3Rpb24oKXtyZXR1cm4gbi5jbG9uZSh0aGlzLGEsYil9KX0saHRtbDpmdW5jdGlvbihhKXtyZXR1cm4gSih0aGlzLGZ1bmN0aW9uKGEpe3ZhciBiPXRoaXNbMF18fHt9LGM9MCxkPXRoaXMubGVuZ3RoO2lmKHZvaWQgMD09PWEmJjE9PT1iLm5vZGVUeXBlKXJldHVybiBiLmlubmVySFRNTDtpZihcInN0cmluZ1wiPT10eXBlb2YgYSYmIWRhLnRlc3QoYSkmJiFpYVsoYmEuZXhlYyhhKXx8W1wiXCIsXCJcIl0pWzFdLnRvTG93ZXJDYXNlKCldKXthPWEucmVwbGFjZShhYSxcIjwkMT48LyQyPlwiKTt0cnl7Zm9yKDtkPmM7YysrKWI9dGhpc1tjXXx8e30sMT09PWIubm9kZVR5cGUmJihuLmNsZWFuRGF0YShvYShiLCExKSksYi5pbm5lckhUTUw9YSk7Yj0wfWNhdGNoKGUpe319YiYmdGhpcy5lbXB0eSgpLmFwcGVuZChhKX0sbnVsbCxhLGFyZ3VtZW50cy5sZW5ndGgpfSxyZXBsYWNlV2l0aDpmdW5jdGlvbigpe3ZhciBhPWFyZ3VtZW50c1swXTtyZXR1cm4gdGhpcy5kb21NYW5pcChhcmd1bWVudHMsZnVuY3Rpb24oYil7YT10aGlzLnBhcmVudE5vZGUsbi5jbGVhbkRhdGEob2EodGhpcykpLGEmJmEucmVwbGFjZUNoaWxkKGIsdGhpcyl9KSxhJiYoYS5sZW5ndGh8fGEubm9kZVR5cGUpP3RoaXM6dGhpcy5yZW1vdmUoKX0sZGV0YWNoOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLnJlbW92ZShhLCEwKX0sZG9tTWFuaXA6ZnVuY3Rpb24oYSxiKXthPWUuYXBwbHkoW10sYSk7dmFyIGMsZCxmLGcsaCxpLGo9MCxsPXRoaXMubGVuZ3RoLG09dGhpcyxvPWwtMSxwPWFbMF0scT1uLmlzRnVuY3Rpb24ocCk7aWYocXx8bD4xJiZcInN0cmluZ1wiPT10eXBlb2YgcCYmIWsuY2hlY2tDbG9uZSYmZWEudGVzdChwKSlyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKGMpe3ZhciBkPW0uZXEoYyk7cSYmKGFbMF09cC5jYWxsKHRoaXMsYyxkLmh0bWwoKSkpLGQuZG9tTWFuaXAoYSxiKX0pO2lmKGwmJihjPW4uYnVpbGRGcmFnbWVudChhLHRoaXNbMF0ub3duZXJEb2N1bWVudCwhMSx0aGlzKSxkPWMuZmlyc3RDaGlsZCwxPT09Yy5jaGlsZE5vZGVzLmxlbmd0aCYmKGM9ZCksZCkpe2ZvcihmPW4ubWFwKG9hKGMsXCJzY3JpcHRcIiksa2EpLGc9Zi5sZW5ndGg7bD5qO2orKyloPWMsaiE9PW8mJihoPW4uY2xvbmUoaCwhMCwhMCksZyYmbi5tZXJnZShmLG9hKGgsXCJzY3JpcHRcIikpKSxiLmNhbGwodGhpc1tqXSxoLGopO2lmKGcpZm9yKGk9ZltmLmxlbmd0aC0xXS5vd25lckRvY3VtZW50LG4ubWFwKGYsbGEpLGo9MDtnPmo7aisrKWg9ZltqXSxmYS50ZXN0KGgudHlwZXx8XCJcIikmJiFMLmFjY2VzcyhoLFwiZ2xvYmFsRXZhbFwiKSYmbi5jb250YWlucyhpLGgpJiYoaC5zcmM/bi5fZXZhbFVybCYmbi5fZXZhbFVybChoLnNyYyk6bi5nbG9iYWxFdmFsKGgudGV4dENvbnRlbnQucmVwbGFjZShoYSxcIlwiKSkpfXJldHVybiB0aGlzfX0pLG4uZWFjaCh7YXBwZW5kVG86XCJhcHBlbmRcIixwcmVwZW5kVG86XCJwcmVwZW5kXCIsaW5zZXJ0QmVmb3JlOlwiYmVmb3JlXCIsaW5zZXJ0QWZ0ZXI6XCJhZnRlclwiLHJlcGxhY2VBbGw6XCJyZXBsYWNlV2l0aFwifSxmdW5jdGlvbihhLGIpe24uZm5bYV09ZnVuY3Rpb24oYSl7Zm9yKHZhciBjLGQ9W10sZT1uKGEpLGc9ZS5sZW5ndGgtMSxoPTA7Zz49aDtoKyspYz1oPT09Zz90aGlzOnRoaXMuY2xvbmUoITApLG4oZVtoXSlbYl0oYyksZi5hcHBseShkLGMuZ2V0KCkpO3JldHVybiB0aGlzLnB1c2hTdGFjayhkKX19KTt2YXIgcWEscmE9e307ZnVuY3Rpb24gc2EoYixjKXt2YXIgZCxlPW4oYy5jcmVhdGVFbGVtZW50KGIpKS5hcHBlbmRUbyhjLmJvZHkpLGY9YS5nZXREZWZhdWx0Q29tcHV0ZWRTdHlsZSYmKGQ9YS5nZXREZWZhdWx0Q29tcHV0ZWRTdHlsZShlWzBdKSk/ZC5kaXNwbGF5Om4uY3NzKGVbMF0sXCJkaXNwbGF5XCIpO3JldHVybiBlLmRldGFjaCgpLGZ9ZnVuY3Rpb24gdGEoYSl7dmFyIGI9bCxjPXJhW2FdO3JldHVybiBjfHwoYz1zYShhLGIpLFwibm9uZVwiIT09YyYmY3x8KHFhPShxYXx8bihcIjxpZnJhbWUgZnJhbWVib3JkZXI9JzAnIHdpZHRoPScwJyBoZWlnaHQ9JzAnLz5cIikpLmFwcGVuZFRvKGIuZG9jdW1lbnRFbGVtZW50KSxiPXFhWzBdLmNvbnRlbnREb2N1bWVudCxiLndyaXRlKCksYi5jbG9zZSgpLGM9c2EoYSxiKSxxYS5kZXRhY2goKSkscmFbYV09YyksY312YXIgdWE9L15tYXJnaW4vLHZhPW5ldyBSZWdFeHAoXCJeKFwiK1ErXCIpKD8hcHgpW2EteiVdKyRcIixcImlcIiksd2E9ZnVuY3Rpb24oYil7cmV0dXJuIGIub3duZXJEb2N1bWVudC5kZWZhdWx0Vmlldy5vcGVuZXI/Yi5vd25lckRvY3VtZW50LmRlZmF1bHRWaWV3LmdldENvbXB1dGVkU3R5bGUoYixudWxsKTphLmdldENvbXB1dGVkU3R5bGUoYixudWxsKX07ZnVuY3Rpb24geGEoYSxiLGMpe3ZhciBkLGUsZixnLGg9YS5zdHlsZTtyZXR1cm4gYz1jfHx3YShhKSxjJiYoZz1jLmdldFByb3BlcnR5VmFsdWUoYil8fGNbYl0pLGMmJihcIlwiIT09Z3x8bi5jb250YWlucyhhLm93bmVyRG9jdW1lbnQsYSl8fChnPW4uc3R5bGUoYSxiKSksdmEudGVzdChnKSYmdWEudGVzdChiKSYmKGQ9aC53aWR0aCxlPWgubWluV2lkdGgsZj1oLm1heFdpZHRoLGgubWluV2lkdGg9aC5tYXhXaWR0aD1oLndpZHRoPWcsZz1jLndpZHRoLGgud2lkdGg9ZCxoLm1pbldpZHRoPWUsaC5tYXhXaWR0aD1mKSksdm9pZCAwIT09Zz9nK1wiXCI6Z31mdW5jdGlvbiB5YShhLGIpe3JldHVybntnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gYSgpP3ZvaWQgZGVsZXRlIHRoaXMuZ2V0Oih0aGlzLmdldD1iKS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9fX0hZnVuY3Rpb24oKXt2YXIgYixjLGQ9bC5kb2N1bWVudEVsZW1lbnQsZT1sLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiksZj1sLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7aWYoZi5zdHlsZSl7Zi5zdHlsZS5iYWNrZ3JvdW5kQ2xpcD1cImNvbnRlbnQtYm94XCIsZi5jbG9uZU5vZGUoITApLnN0eWxlLmJhY2tncm91bmRDbGlwPVwiXCIsay5jbGVhckNsb25lU3R5bGU9XCJjb250ZW50LWJveFwiPT09Zi5zdHlsZS5iYWNrZ3JvdW5kQ2xpcCxlLnN0eWxlLmNzc1RleHQ9XCJib3JkZXI6MDt3aWR0aDowO2hlaWdodDowO3RvcDowO2xlZnQ6LTk5OTlweDttYXJnaW4tdG9wOjFweDtwb3NpdGlvbjphYnNvbHV0ZVwiLGUuYXBwZW5kQ2hpbGQoZik7ZnVuY3Rpb24gZygpe2Yuc3R5bGUuY3NzVGV4dD1cIi13ZWJraXQtYm94LXNpemluZzpib3JkZXItYm94Oy1tb3otYm94LXNpemluZzpib3JkZXItYm94O2JveC1zaXppbmc6Ym9yZGVyLWJveDtkaXNwbGF5OmJsb2NrO21hcmdpbi10b3A6MSU7dG9wOjElO2JvcmRlcjoxcHg7cGFkZGluZzoxcHg7d2lkdGg6NHB4O3Bvc2l0aW9uOmFic29sdXRlXCIsZi5pbm5lckhUTUw9XCJcIixkLmFwcGVuZENoaWxkKGUpO3ZhciBnPWEuZ2V0Q29tcHV0ZWRTdHlsZShmLG51bGwpO2I9XCIxJVwiIT09Zy50b3AsYz1cIjRweFwiPT09Zy53aWR0aCxkLnJlbW92ZUNoaWxkKGUpfWEuZ2V0Q29tcHV0ZWRTdHlsZSYmbi5leHRlbmQoayx7cGl4ZWxQb3NpdGlvbjpmdW5jdGlvbigpe3JldHVybiBnKCksYn0sYm94U2l6aW5nUmVsaWFibGU6ZnVuY3Rpb24oKXtyZXR1cm4gbnVsbD09YyYmZygpLGN9LHJlbGlhYmxlTWFyZ2luUmlnaHQ6ZnVuY3Rpb24oKXt2YXIgYixjPWYuYXBwZW5kQ2hpbGQobC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpKTtyZXR1cm4gYy5zdHlsZS5jc3NUZXh0PWYuc3R5bGUuY3NzVGV4dD1cIi13ZWJraXQtYm94LXNpemluZzpjb250ZW50LWJveDstbW96LWJveC1zaXppbmc6Y29udGVudC1ib3g7Ym94LXNpemluZzpjb250ZW50LWJveDtkaXNwbGF5OmJsb2NrO21hcmdpbjowO2JvcmRlcjowO3BhZGRpbmc6MFwiLGMuc3R5bGUubWFyZ2luUmlnaHQ9Yy5zdHlsZS53aWR0aD1cIjBcIixmLnN0eWxlLndpZHRoPVwiMXB4XCIsZC5hcHBlbmRDaGlsZChlKSxiPSFwYXJzZUZsb2F0KGEuZ2V0Q29tcHV0ZWRTdHlsZShjLG51bGwpLm1hcmdpblJpZ2h0KSxkLnJlbW92ZUNoaWxkKGUpLGYucmVtb3ZlQ2hpbGQoYyksYn19KX19KCksbi5zd2FwPWZ1bmN0aW9uKGEsYixjLGQpe3ZhciBlLGYsZz17fTtmb3IoZiBpbiBiKWdbZl09YS5zdHlsZVtmXSxhLnN0eWxlW2ZdPWJbZl07ZT1jLmFwcGx5KGEsZHx8W10pO2ZvcihmIGluIGIpYS5zdHlsZVtmXT1nW2ZdO3JldHVybiBlfTt2YXIgemE9L14obm9uZXx0YWJsZSg/IS1jW2VhXSkuKykvLEFhPW5ldyBSZWdFeHAoXCJeKFwiK1ErXCIpKC4qKSRcIixcImlcIiksQmE9bmV3IFJlZ0V4cChcIl4oWystXSk9KFwiK1ErXCIpXCIsXCJpXCIpLENhPXtwb3NpdGlvbjpcImFic29sdXRlXCIsdmlzaWJpbGl0eTpcImhpZGRlblwiLGRpc3BsYXk6XCJibG9ja1wifSxEYT17bGV0dGVyU3BhY2luZzpcIjBcIixmb250V2VpZ2h0OlwiNDAwXCJ9LEVhPVtcIldlYmtpdFwiLFwiT1wiLFwiTW96XCIsXCJtc1wiXTtmdW5jdGlvbiBGYShhLGIpe2lmKGIgaW4gYSlyZXR1cm4gYjt2YXIgYz1iWzBdLnRvVXBwZXJDYXNlKCkrYi5zbGljZSgxKSxkPWIsZT1FYS5sZW5ndGg7d2hpbGUoZS0tKWlmKGI9RWFbZV0rYyxiIGluIGEpcmV0dXJuIGI7cmV0dXJuIGR9ZnVuY3Rpb24gR2EoYSxiLGMpe3ZhciBkPUFhLmV4ZWMoYik7cmV0dXJuIGQ/TWF0aC5tYXgoMCxkWzFdLShjfHwwKSkrKGRbMl18fFwicHhcIik6Yn1mdW5jdGlvbiBIYShhLGIsYyxkLGUpe2Zvcih2YXIgZj1jPT09KGQ/XCJib3JkZXJcIjpcImNvbnRlbnRcIik/NDpcIndpZHRoXCI9PT1iPzE6MCxnPTA7ND5mO2YrPTIpXCJtYXJnaW5cIj09PWMmJihnKz1uLmNzcyhhLGMrUltmXSwhMCxlKSksZD8oXCJjb250ZW50XCI9PT1jJiYoZy09bi5jc3MoYSxcInBhZGRpbmdcIitSW2ZdLCEwLGUpKSxcIm1hcmdpblwiIT09YyYmKGctPW4uY3NzKGEsXCJib3JkZXJcIitSW2ZdK1wiV2lkdGhcIiwhMCxlKSkpOihnKz1uLmNzcyhhLFwicGFkZGluZ1wiK1JbZl0sITAsZSksXCJwYWRkaW5nXCIhPT1jJiYoZys9bi5jc3MoYSxcImJvcmRlclwiK1JbZl0rXCJXaWR0aFwiLCEwLGUpKSk7cmV0dXJuIGd9ZnVuY3Rpb24gSWEoYSxiLGMpe3ZhciBkPSEwLGU9XCJ3aWR0aFwiPT09Yj9hLm9mZnNldFdpZHRoOmEub2Zmc2V0SGVpZ2h0LGY9d2EoYSksZz1cImJvcmRlci1ib3hcIj09PW4uY3NzKGEsXCJib3hTaXppbmdcIiwhMSxmKTtpZigwPj1lfHxudWxsPT1lKXtpZihlPXhhKGEsYixmKSwoMD5lfHxudWxsPT1lKSYmKGU9YS5zdHlsZVtiXSksdmEudGVzdChlKSlyZXR1cm4gZTtkPWcmJihrLmJveFNpemluZ1JlbGlhYmxlKCl8fGU9PT1hLnN0eWxlW2JdKSxlPXBhcnNlRmxvYXQoZSl8fDB9cmV0dXJuIGUrSGEoYSxiLGN8fChnP1wiYm9yZGVyXCI6XCJjb250ZW50XCIpLGQsZikrXCJweFwifWZ1bmN0aW9uIEphKGEsYil7Zm9yKHZhciBjLGQsZSxmPVtdLGc9MCxoPWEubGVuZ3RoO2g+ZztnKyspZD1hW2ddLGQuc3R5bGUmJihmW2ddPUwuZ2V0KGQsXCJvbGRkaXNwbGF5XCIpLGM9ZC5zdHlsZS5kaXNwbGF5LGI/KGZbZ118fFwibm9uZVwiIT09Y3x8KGQuc3R5bGUuZGlzcGxheT1cIlwiKSxcIlwiPT09ZC5zdHlsZS5kaXNwbGF5JiZTKGQpJiYoZltnXT1MLmFjY2VzcyhkLFwib2xkZGlzcGxheVwiLHRhKGQubm9kZU5hbWUpKSkpOihlPVMoZCksXCJub25lXCI9PT1jJiZlfHxMLnNldChkLFwib2xkZGlzcGxheVwiLGU/YzpuLmNzcyhkLFwiZGlzcGxheVwiKSkpKTtmb3IoZz0wO2g+ZztnKyspZD1hW2ddLGQuc3R5bGUmJihiJiZcIm5vbmVcIiE9PWQuc3R5bGUuZGlzcGxheSYmXCJcIiE9PWQuc3R5bGUuZGlzcGxheXx8KGQuc3R5bGUuZGlzcGxheT1iP2ZbZ118fFwiXCI6XCJub25lXCIpKTtyZXR1cm4gYX1uLmV4dGVuZCh7Y3NzSG9va3M6e29wYWNpdHk6e2dldDpmdW5jdGlvbihhLGIpe2lmKGIpe3ZhciBjPXhhKGEsXCJvcGFjaXR5XCIpO3JldHVyblwiXCI9PT1jP1wiMVwiOmN9fX19LGNzc051bWJlcjp7Y29sdW1uQ291bnQ6ITAsZmlsbE9wYWNpdHk6ITAsZmxleEdyb3c6ITAsZmxleFNocmluazohMCxmb250V2VpZ2h0OiEwLGxpbmVIZWlnaHQ6ITAsb3BhY2l0eTohMCxvcmRlcjohMCxvcnBoYW5zOiEwLHdpZG93czohMCx6SW5kZXg6ITAsem9vbTohMH0sY3NzUHJvcHM6e1wiZmxvYXRcIjpcImNzc0Zsb2F0XCJ9LHN0eWxlOmZ1bmN0aW9uKGEsYixjLGQpe2lmKGEmJjMhPT1hLm5vZGVUeXBlJiY4IT09YS5ub2RlVHlwZSYmYS5zdHlsZSl7dmFyIGUsZixnLGg9bi5jYW1lbENhc2UoYiksaT1hLnN0eWxlO3JldHVybiBiPW4uY3NzUHJvcHNbaF18fChuLmNzc1Byb3BzW2hdPUZhKGksaCkpLGc9bi5jc3NIb29rc1tiXXx8bi5jc3NIb29rc1toXSx2b2lkIDA9PT1jP2cmJlwiZ2V0XCJpbiBnJiZ2b2lkIDAhPT0oZT1nLmdldChhLCExLGQpKT9lOmlbYl06KGY9dHlwZW9mIGMsXCJzdHJpbmdcIj09PWYmJihlPUJhLmV4ZWMoYykpJiYoYz0oZVsxXSsxKSplWzJdK3BhcnNlRmxvYXQobi5jc3MoYSxiKSksZj1cIm51bWJlclwiKSxudWxsIT1jJiZjPT09YyYmKFwibnVtYmVyXCIhPT1mfHxuLmNzc051bWJlcltoXXx8KGMrPVwicHhcIiksay5jbGVhckNsb25lU3R5bGV8fFwiXCIhPT1jfHwwIT09Yi5pbmRleE9mKFwiYmFja2dyb3VuZFwiKXx8KGlbYl09XCJpbmhlcml0XCIpLGcmJlwic2V0XCJpbiBnJiZ2b2lkIDA9PT0oYz1nLnNldChhLGMsZCkpfHwoaVtiXT1jKSksdm9pZCAwKX19LGNzczpmdW5jdGlvbihhLGIsYyxkKXt2YXIgZSxmLGcsaD1uLmNhbWVsQ2FzZShiKTtyZXR1cm4gYj1uLmNzc1Byb3BzW2hdfHwobi5jc3NQcm9wc1toXT1GYShhLnN0eWxlLGgpKSxnPW4uY3NzSG9va3NbYl18fG4uY3NzSG9va3NbaF0sZyYmXCJnZXRcImluIGcmJihlPWcuZ2V0KGEsITAsYykpLHZvaWQgMD09PWUmJihlPXhhKGEsYixkKSksXCJub3JtYWxcIj09PWUmJmIgaW4gRGEmJihlPURhW2JdKSxcIlwiPT09Y3x8Yz8oZj1wYXJzZUZsb2F0KGUpLGM9PT0hMHx8bi5pc051bWVyaWMoZik/Znx8MDplKTplfX0pLG4uZWFjaChbXCJoZWlnaHRcIixcIndpZHRoXCJdLGZ1bmN0aW9uKGEsYil7bi5jc3NIb29rc1tiXT17Z2V0OmZ1bmN0aW9uKGEsYyxkKXtyZXR1cm4gYz96YS50ZXN0KG4uY3NzKGEsXCJkaXNwbGF5XCIpKSYmMD09PWEub2Zmc2V0V2lkdGg/bi5zd2FwKGEsQ2EsZnVuY3Rpb24oKXtyZXR1cm4gSWEoYSxiLGQpfSk6SWEoYSxiLGQpOnZvaWQgMH0sc2V0OmZ1bmN0aW9uKGEsYyxkKXt2YXIgZT1kJiZ3YShhKTtyZXR1cm4gR2EoYSxjLGQ/SGEoYSxiLGQsXCJib3JkZXItYm94XCI9PT1uLmNzcyhhLFwiYm94U2l6aW5nXCIsITEsZSksZSk6MCl9fX0pLG4uY3NzSG9va3MubWFyZ2luUmlnaHQ9eWEoay5yZWxpYWJsZU1hcmdpblJpZ2h0LGZ1bmN0aW9uKGEsYil7cmV0dXJuIGI/bi5zd2FwKGEse2Rpc3BsYXk6XCJpbmxpbmUtYmxvY2tcIn0seGEsW2EsXCJtYXJnaW5SaWdodFwiXSk6dm9pZCAwfSksbi5lYWNoKHttYXJnaW46XCJcIixwYWRkaW5nOlwiXCIsYm9yZGVyOlwiV2lkdGhcIn0sZnVuY3Rpb24oYSxiKXtuLmNzc0hvb2tzW2ErYl09e2V4cGFuZDpmdW5jdGlvbihjKXtmb3IodmFyIGQ9MCxlPXt9LGY9XCJzdHJpbmdcIj09dHlwZW9mIGM/Yy5zcGxpdChcIiBcIik6W2NdOzQ+ZDtkKyspZVthK1JbZF0rYl09ZltkXXx8ZltkLTJdfHxmWzBdO3JldHVybiBlfX0sdWEudGVzdChhKXx8KG4uY3NzSG9va3NbYStiXS5zZXQ9R2EpfSksbi5mbi5leHRlbmQoe2NzczpmdW5jdGlvbihhLGIpe3JldHVybiBKKHRoaXMsZnVuY3Rpb24oYSxiLGMpe3ZhciBkLGUsZj17fSxnPTA7aWYobi5pc0FycmF5KGIpKXtmb3IoZD13YShhKSxlPWIubGVuZ3RoO2U+ZztnKyspZltiW2ddXT1uLmNzcyhhLGJbZ10sITEsZCk7cmV0dXJuIGZ9cmV0dXJuIHZvaWQgMCE9PWM/bi5zdHlsZShhLGIsYyk6bi5jc3MoYSxiKX0sYSxiLGFyZ3VtZW50cy5sZW5ndGg+MSl9LHNob3c6ZnVuY3Rpb24oKXtyZXR1cm4gSmEodGhpcywhMCl9LGhpZGU6ZnVuY3Rpb24oKXtyZXR1cm4gSmEodGhpcyl9LHRvZ2dsZTpmdW5jdGlvbihhKXtyZXR1cm5cImJvb2xlYW5cIj09dHlwZW9mIGE/YT90aGlzLnNob3coKTp0aGlzLmhpZGUoKTp0aGlzLmVhY2goZnVuY3Rpb24oKXtTKHRoaXMpP24odGhpcykuc2hvdygpOm4odGhpcykuaGlkZSgpfSl9fSk7ZnVuY3Rpb24gS2EoYSxiLGMsZCxlKXtyZXR1cm4gbmV3IEthLnByb3RvdHlwZS5pbml0KGEsYixjLGQsZSl9bi5Ud2Vlbj1LYSxLYS5wcm90b3R5cGU9e2NvbnN0cnVjdG9yOkthLGluaXQ6ZnVuY3Rpb24oYSxiLGMsZCxlLGYpe3RoaXMuZWxlbT1hLHRoaXMucHJvcD1jLHRoaXMuZWFzaW5nPWV8fFwic3dpbmdcIix0aGlzLm9wdGlvbnM9Yix0aGlzLnN0YXJ0PXRoaXMubm93PXRoaXMuY3VyKCksdGhpcy5lbmQ9ZCx0aGlzLnVuaXQ9Znx8KG4uY3NzTnVtYmVyW2NdP1wiXCI6XCJweFwiKX0sY3VyOmZ1bmN0aW9uKCl7dmFyIGE9S2EucHJvcEhvb2tzW3RoaXMucHJvcF07cmV0dXJuIGEmJmEuZ2V0P2EuZ2V0KHRoaXMpOkthLnByb3BIb29rcy5fZGVmYXVsdC5nZXQodGhpcyl9LHJ1bjpmdW5jdGlvbihhKXt2YXIgYixjPUthLnByb3BIb29rc1t0aGlzLnByb3BdO3JldHVybiB0aGlzLm9wdGlvbnMuZHVyYXRpb24/dGhpcy5wb3M9Yj1uLmVhc2luZ1t0aGlzLmVhc2luZ10oYSx0aGlzLm9wdGlvbnMuZHVyYXRpb24qYSwwLDEsdGhpcy5vcHRpb25zLmR1cmF0aW9uKTp0aGlzLnBvcz1iPWEsdGhpcy5ub3c9KHRoaXMuZW5kLXRoaXMuc3RhcnQpKmIrdGhpcy5zdGFydCx0aGlzLm9wdGlvbnMuc3RlcCYmdGhpcy5vcHRpb25zLnN0ZXAuY2FsbCh0aGlzLmVsZW0sdGhpcy5ub3csdGhpcyksYyYmYy5zZXQ/Yy5zZXQodGhpcyk6S2EucHJvcEhvb2tzLl9kZWZhdWx0LnNldCh0aGlzKSx0aGlzfX0sS2EucHJvdG90eXBlLmluaXQucHJvdG90eXBlPUthLnByb3RvdHlwZSxLYS5wcm9wSG9va3M9e19kZWZhdWx0OntnZXQ6ZnVuY3Rpb24oYSl7dmFyIGI7cmV0dXJuIG51bGw9PWEuZWxlbVthLnByb3BdfHxhLmVsZW0uc3R5bGUmJm51bGwhPWEuZWxlbS5zdHlsZVthLnByb3BdPyhiPW4uY3NzKGEuZWxlbSxhLnByb3AsXCJcIiksYiYmXCJhdXRvXCIhPT1iP2I6MCk6YS5lbGVtW2EucHJvcF19LHNldDpmdW5jdGlvbihhKXtuLmZ4LnN0ZXBbYS5wcm9wXT9uLmZ4LnN0ZXBbYS5wcm9wXShhKTphLmVsZW0uc3R5bGUmJihudWxsIT1hLmVsZW0uc3R5bGVbbi5jc3NQcm9wc1thLnByb3BdXXx8bi5jc3NIb29rc1thLnByb3BdKT9uLnN0eWxlKGEuZWxlbSxhLnByb3AsYS5ub3crYS51bml0KTphLmVsZW1bYS5wcm9wXT1hLm5vd319fSxLYS5wcm9wSG9va3Muc2Nyb2xsVG9wPUthLnByb3BIb29rcy5zY3JvbGxMZWZ0PXtzZXQ6ZnVuY3Rpb24oYSl7YS5lbGVtLm5vZGVUeXBlJiZhLmVsZW0ucGFyZW50Tm9kZSYmKGEuZWxlbVthLnByb3BdPWEubm93KX19LG4uZWFzaW5nPXtsaW5lYXI6ZnVuY3Rpb24oYSl7cmV0dXJuIGF9LHN3aW5nOmZ1bmN0aW9uKGEpe3JldHVybi41LU1hdGguY29zKGEqTWF0aC5QSSkvMn19LG4uZng9S2EucHJvdG90eXBlLmluaXQsbi5meC5zdGVwPXt9O3ZhciBMYSxNYSxOYT0vXig/OnRvZ2dsZXxzaG93fGhpZGUpJC8sT2E9bmV3IFJlZ0V4cChcIl4oPzooWystXSk9fCkoXCIrUStcIikoW2EteiVdKikkXCIsXCJpXCIpLFBhPS9xdWV1ZUhvb2tzJC8sUWE9W1ZhXSxSYT17XCIqXCI6W2Z1bmN0aW9uKGEsYil7dmFyIGM9dGhpcy5jcmVhdGVUd2VlbihhLGIpLGQ9Yy5jdXIoKSxlPU9hLmV4ZWMoYiksZj1lJiZlWzNdfHwobi5jc3NOdW1iZXJbYV0/XCJcIjpcInB4XCIpLGc9KG4uY3NzTnVtYmVyW2FdfHxcInB4XCIhPT1mJiYrZCkmJk9hLmV4ZWMobi5jc3MoYy5lbGVtLGEpKSxoPTEsaT0yMDtpZihnJiZnWzNdIT09Zil7Zj1mfHxnWzNdLGU9ZXx8W10sZz0rZHx8MTtkbyBoPWh8fFwiLjVcIixnLz1oLG4uc3R5bGUoYy5lbGVtLGEsZytmKTt3aGlsZShoIT09KGg9Yy5jdXIoKS9kKSYmMSE9PWgmJi0taSl9cmV0dXJuIGUmJihnPWMuc3RhcnQ9K2d8fCtkfHwwLGMudW5pdD1mLGMuZW5kPWVbMV0/ZysoZVsxXSsxKSplWzJdOitlWzJdKSxjfV19O2Z1bmN0aW9uIFNhKCl7cmV0dXJuIHNldFRpbWVvdXQoZnVuY3Rpb24oKXtMYT12b2lkIDB9KSxMYT1uLm5vdygpfWZ1bmN0aW9uIFRhKGEsYil7dmFyIGMsZD0wLGU9e2hlaWdodDphfTtmb3IoYj1iPzE6MDs0PmQ7ZCs9Mi1iKWM9UltkXSxlW1wibWFyZ2luXCIrY109ZVtcInBhZGRpbmdcIitjXT1hO3JldHVybiBiJiYoZS5vcGFjaXR5PWUud2lkdGg9YSksZX1mdW5jdGlvbiBVYShhLGIsYyl7Zm9yKHZhciBkLGU9KFJhW2JdfHxbXSkuY29uY2F0KFJhW1wiKlwiXSksZj0wLGc9ZS5sZW5ndGg7Zz5mO2YrKylpZihkPWVbZl0uY2FsbChjLGIsYSkpcmV0dXJuIGR9ZnVuY3Rpb24gVmEoYSxiLGMpe3ZhciBkLGUsZixnLGgsaSxqLGssbD10aGlzLG09e30sbz1hLnN0eWxlLHA9YS5ub2RlVHlwZSYmUyhhKSxxPUwuZ2V0KGEsXCJmeHNob3dcIik7Yy5xdWV1ZXx8KGg9bi5fcXVldWVIb29rcyhhLFwiZnhcIiksbnVsbD09aC51bnF1ZXVlZCYmKGgudW5xdWV1ZWQ9MCxpPWguZW1wdHkuZmlyZSxoLmVtcHR5LmZpcmU9ZnVuY3Rpb24oKXtoLnVucXVldWVkfHxpKCl9KSxoLnVucXVldWVkKyssbC5hbHdheXMoZnVuY3Rpb24oKXtsLmFsd2F5cyhmdW5jdGlvbigpe2gudW5xdWV1ZWQtLSxuLnF1ZXVlKGEsXCJmeFwiKS5sZW5ndGh8fGguZW1wdHkuZmlyZSgpfSl9KSksMT09PWEubm9kZVR5cGUmJihcImhlaWdodFwiaW4gYnx8XCJ3aWR0aFwiaW4gYikmJihjLm92ZXJmbG93PVtvLm92ZXJmbG93LG8ub3ZlcmZsb3dYLG8ub3ZlcmZsb3dZXSxqPW4uY3NzKGEsXCJkaXNwbGF5XCIpLGs9XCJub25lXCI9PT1qP0wuZ2V0KGEsXCJvbGRkaXNwbGF5XCIpfHx0YShhLm5vZGVOYW1lKTpqLFwiaW5saW5lXCI9PT1rJiZcIm5vbmVcIj09PW4uY3NzKGEsXCJmbG9hdFwiKSYmKG8uZGlzcGxheT1cImlubGluZS1ibG9ja1wiKSksYy5vdmVyZmxvdyYmKG8ub3ZlcmZsb3c9XCJoaWRkZW5cIixsLmFsd2F5cyhmdW5jdGlvbigpe28ub3ZlcmZsb3c9Yy5vdmVyZmxvd1swXSxvLm92ZXJmbG93WD1jLm92ZXJmbG93WzFdLG8ub3ZlcmZsb3dZPWMub3ZlcmZsb3dbMl19KSk7Zm9yKGQgaW4gYilpZihlPWJbZF0sTmEuZXhlYyhlKSl7aWYoZGVsZXRlIGJbZF0sZj1mfHxcInRvZ2dsZVwiPT09ZSxlPT09KHA/XCJoaWRlXCI6XCJzaG93XCIpKXtpZihcInNob3dcIiE9PWV8fCFxfHx2b2lkIDA9PT1xW2RdKWNvbnRpbnVlO3A9ITB9bVtkXT1xJiZxW2RdfHxuLnN0eWxlKGEsZCl9ZWxzZSBqPXZvaWQgMDtpZihuLmlzRW1wdHlPYmplY3QobSkpXCJpbmxpbmVcIj09PShcIm5vbmVcIj09PWo/dGEoYS5ub2RlTmFtZSk6aikmJihvLmRpc3BsYXk9aik7ZWxzZXtxP1wiaGlkZGVuXCJpbiBxJiYocD1xLmhpZGRlbik6cT1MLmFjY2VzcyhhLFwiZnhzaG93XCIse30pLGYmJihxLmhpZGRlbj0hcCkscD9uKGEpLnNob3coKTpsLmRvbmUoZnVuY3Rpb24oKXtuKGEpLmhpZGUoKX0pLGwuZG9uZShmdW5jdGlvbigpe3ZhciBiO0wucmVtb3ZlKGEsXCJmeHNob3dcIik7Zm9yKGIgaW4gbSluLnN0eWxlKGEsYixtW2JdKX0pO2ZvcihkIGluIG0pZz1VYShwP3FbZF06MCxkLGwpLGQgaW4gcXx8KHFbZF09Zy5zdGFydCxwJiYoZy5lbmQ9Zy5zdGFydCxnLnN0YXJ0PVwid2lkdGhcIj09PWR8fFwiaGVpZ2h0XCI9PT1kPzE6MCkpfX1mdW5jdGlvbiBXYShhLGIpe3ZhciBjLGQsZSxmLGc7Zm9yKGMgaW4gYSlpZihkPW4uY2FtZWxDYXNlKGMpLGU9YltkXSxmPWFbY10sbi5pc0FycmF5KGYpJiYoZT1mWzFdLGY9YVtjXT1mWzBdKSxjIT09ZCYmKGFbZF09ZixkZWxldGUgYVtjXSksZz1uLmNzc0hvb2tzW2RdLGcmJlwiZXhwYW5kXCJpbiBnKXtmPWcuZXhwYW5kKGYpLGRlbGV0ZSBhW2RdO2ZvcihjIGluIGYpYyBpbiBhfHwoYVtjXT1mW2NdLGJbY109ZSl9ZWxzZSBiW2RdPWV9ZnVuY3Rpb24gWGEoYSxiLGMpe3ZhciBkLGUsZj0wLGc9UWEubGVuZ3RoLGg9bi5EZWZlcnJlZCgpLmFsd2F5cyhmdW5jdGlvbigpe2RlbGV0ZSBpLmVsZW19KSxpPWZ1bmN0aW9uKCl7aWYoZSlyZXR1cm4hMTtmb3IodmFyIGI9TGF8fFNhKCksYz1NYXRoLm1heCgwLGouc3RhcnRUaW1lK2ouZHVyYXRpb24tYiksZD1jL2ouZHVyYXRpb258fDAsZj0xLWQsZz0wLGk9ai50d2VlbnMubGVuZ3RoO2k+ZztnKyspai50d2VlbnNbZ10ucnVuKGYpO3JldHVybiBoLm5vdGlmeVdpdGgoYSxbaixmLGNdKSwxPmYmJmk/YzooaC5yZXNvbHZlV2l0aChhLFtqXSksITEpfSxqPWgucHJvbWlzZSh7ZWxlbTphLHByb3BzOm4uZXh0ZW5kKHt9LGIpLG9wdHM6bi5leHRlbmQoITAse3NwZWNpYWxFYXNpbmc6e319LGMpLG9yaWdpbmFsUHJvcGVydGllczpiLG9yaWdpbmFsT3B0aW9uczpjLHN0YXJ0VGltZTpMYXx8U2EoKSxkdXJhdGlvbjpjLmR1cmF0aW9uLHR3ZWVuczpbXSxjcmVhdGVUd2VlbjpmdW5jdGlvbihiLGMpe3ZhciBkPW4uVHdlZW4oYSxqLm9wdHMsYixjLGoub3B0cy5zcGVjaWFsRWFzaW5nW2JdfHxqLm9wdHMuZWFzaW5nKTtyZXR1cm4gai50d2VlbnMucHVzaChkKSxkfSxzdG9wOmZ1bmN0aW9uKGIpe3ZhciBjPTAsZD1iP2oudHdlZW5zLmxlbmd0aDowO2lmKGUpcmV0dXJuIHRoaXM7Zm9yKGU9ITA7ZD5jO2MrKylqLnR3ZWVuc1tjXS5ydW4oMSk7cmV0dXJuIGI/aC5yZXNvbHZlV2l0aChhLFtqLGJdKTpoLnJlamVjdFdpdGgoYSxbaixiXSksdGhpc319KSxrPWoucHJvcHM7Zm9yKFdhKGssai5vcHRzLnNwZWNpYWxFYXNpbmcpO2c+ZjtmKyspaWYoZD1RYVtmXS5jYWxsKGosYSxrLGoub3B0cykpcmV0dXJuIGQ7cmV0dXJuIG4ubWFwKGssVWEsaiksbi5pc0Z1bmN0aW9uKGoub3B0cy5zdGFydCkmJmoub3B0cy5zdGFydC5jYWxsKGEsaiksbi5meC50aW1lcihuLmV4dGVuZChpLHtlbGVtOmEsYW5pbTpqLHF1ZXVlOmoub3B0cy5xdWV1ZX0pKSxqLnByb2dyZXNzKGoub3B0cy5wcm9ncmVzcykuZG9uZShqLm9wdHMuZG9uZSxqLm9wdHMuY29tcGxldGUpLmZhaWwoai5vcHRzLmZhaWwpLmFsd2F5cyhqLm9wdHMuYWx3YXlzKX1uLkFuaW1hdGlvbj1uLmV4dGVuZChYYSx7dHdlZW5lcjpmdW5jdGlvbihhLGIpe24uaXNGdW5jdGlvbihhKT8oYj1hLGE9W1wiKlwiXSk6YT1hLnNwbGl0KFwiIFwiKTtmb3IodmFyIGMsZD0wLGU9YS5sZW5ndGg7ZT5kO2QrKyljPWFbZF0sUmFbY109UmFbY118fFtdLFJhW2NdLnVuc2hpZnQoYil9LHByZWZpbHRlcjpmdW5jdGlvbihhLGIpe2I/UWEudW5zaGlmdChhKTpRYS5wdXNoKGEpfX0pLG4uc3BlZWQ9ZnVuY3Rpb24oYSxiLGMpe3ZhciBkPWEmJlwib2JqZWN0XCI9PXR5cGVvZiBhP24uZXh0ZW5kKHt9LGEpOntjb21wbGV0ZTpjfHwhYyYmYnx8bi5pc0Z1bmN0aW9uKGEpJiZhLGR1cmF0aW9uOmEsZWFzaW5nOmMmJmJ8fGImJiFuLmlzRnVuY3Rpb24oYikmJmJ9O3JldHVybiBkLmR1cmF0aW9uPW4uZngub2ZmPzA6XCJudW1iZXJcIj09dHlwZW9mIGQuZHVyYXRpb24/ZC5kdXJhdGlvbjpkLmR1cmF0aW9uIGluIG4uZnguc3BlZWRzP24uZnguc3BlZWRzW2QuZHVyYXRpb25dOm4uZnguc3BlZWRzLl9kZWZhdWx0LChudWxsPT1kLnF1ZXVlfHxkLnF1ZXVlPT09ITApJiYoZC5xdWV1ZT1cImZ4XCIpLGQub2xkPWQuY29tcGxldGUsZC5jb21wbGV0ZT1mdW5jdGlvbigpe24uaXNGdW5jdGlvbihkLm9sZCkmJmQub2xkLmNhbGwodGhpcyksZC5xdWV1ZSYmbi5kZXF1ZXVlKHRoaXMsZC5xdWV1ZSl9LGR9LG4uZm4uZXh0ZW5kKHtmYWRlVG86ZnVuY3Rpb24oYSxiLGMsZCl7cmV0dXJuIHRoaXMuZmlsdGVyKFMpLmNzcyhcIm9wYWNpdHlcIiwwKS5zaG93KCkuZW5kKCkuYW5pbWF0ZSh7b3BhY2l0eTpifSxhLGMsZCl9LGFuaW1hdGU6ZnVuY3Rpb24oYSxiLGMsZCl7dmFyIGU9bi5pc0VtcHR5T2JqZWN0KGEpLGY9bi5zcGVlZChiLGMsZCksZz1mdW5jdGlvbigpe3ZhciBiPVhhKHRoaXMsbi5leHRlbmQoe30sYSksZik7KGV8fEwuZ2V0KHRoaXMsXCJmaW5pc2hcIikpJiZiLnN0b3AoITApfTtyZXR1cm4gZy5maW5pc2g9ZyxlfHxmLnF1ZXVlPT09ITE/dGhpcy5lYWNoKGcpOnRoaXMucXVldWUoZi5xdWV1ZSxnKX0sc3RvcDpmdW5jdGlvbihhLGIsYyl7dmFyIGQ9ZnVuY3Rpb24oYSl7dmFyIGI9YS5zdG9wO2RlbGV0ZSBhLnN0b3AsYihjKX07cmV0dXJuXCJzdHJpbmdcIiE9dHlwZW9mIGEmJihjPWIsYj1hLGE9dm9pZCAwKSxiJiZhIT09ITEmJnRoaXMucXVldWUoYXx8XCJmeFwiLFtdKSx0aGlzLmVhY2goZnVuY3Rpb24oKXt2YXIgYj0hMCxlPW51bGwhPWEmJmErXCJxdWV1ZUhvb2tzXCIsZj1uLnRpbWVycyxnPUwuZ2V0KHRoaXMpO2lmKGUpZ1tlXSYmZ1tlXS5zdG9wJiZkKGdbZV0pO2Vsc2UgZm9yKGUgaW4gZylnW2VdJiZnW2VdLnN0b3AmJlBhLnRlc3QoZSkmJmQoZ1tlXSk7Zm9yKGU9Zi5sZW5ndGg7ZS0tOylmW2VdLmVsZW0hPT10aGlzfHxudWxsIT1hJiZmW2VdLnF1ZXVlIT09YXx8KGZbZV0uYW5pbS5zdG9wKGMpLGI9ITEsZi5zcGxpY2UoZSwxKSk7KGJ8fCFjKSYmbi5kZXF1ZXVlKHRoaXMsYSl9KX0sZmluaXNoOmZ1bmN0aW9uKGEpe3JldHVybiBhIT09ITEmJihhPWF8fFwiZnhcIiksdGhpcy5lYWNoKGZ1bmN0aW9uKCl7dmFyIGIsYz1MLmdldCh0aGlzKSxkPWNbYStcInF1ZXVlXCJdLGU9Y1thK1wicXVldWVIb29rc1wiXSxmPW4udGltZXJzLGc9ZD9kLmxlbmd0aDowO2ZvcihjLmZpbmlzaD0hMCxuLnF1ZXVlKHRoaXMsYSxbXSksZSYmZS5zdG9wJiZlLnN0b3AuY2FsbCh0aGlzLCEwKSxiPWYubGVuZ3RoO2ItLTspZltiXS5lbGVtPT09dGhpcyYmZltiXS5xdWV1ZT09PWEmJihmW2JdLmFuaW0uc3RvcCghMCksZi5zcGxpY2UoYiwxKSk7Zm9yKGI9MDtnPmI7YisrKWRbYl0mJmRbYl0uZmluaXNoJiZkW2JdLmZpbmlzaC5jYWxsKHRoaXMpO2RlbGV0ZSBjLmZpbmlzaH0pfX0pLG4uZWFjaChbXCJ0b2dnbGVcIixcInNob3dcIixcImhpZGVcIl0sZnVuY3Rpb24oYSxiKXt2YXIgYz1uLmZuW2JdO24uZm5bYl09ZnVuY3Rpb24oYSxkLGUpe3JldHVybiBudWxsPT1hfHxcImJvb2xlYW5cIj09dHlwZW9mIGE/Yy5hcHBseSh0aGlzLGFyZ3VtZW50cyk6dGhpcy5hbmltYXRlKFRhKGIsITApLGEsZCxlKX19KSxuLmVhY2goe3NsaWRlRG93bjpUYShcInNob3dcIiksc2xpZGVVcDpUYShcImhpZGVcIiksc2xpZGVUb2dnbGU6VGEoXCJ0b2dnbGVcIiksZmFkZUluOntvcGFjaXR5Olwic2hvd1wifSxmYWRlT3V0OntvcGFjaXR5OlwiaGlkZVwifSxmYWRlVG9nZ2xlOntvcGFjaXR5OlwidG9nZ2xlXCJ9fSxmdW5jdGlvbihhLGIpe24uZm5bYV09ZnVuY3Rpb24oYSxjLGQpe3JldHVybiB0aGlzLmFuaW1hdGUoYixhLGMsZCl9fSksbi50aW1lcnM9W10sbi5meC50aWNrPWZ1bmN0aW9uKCl7dmFyIGEsYj0wLGM9bi50aW1lcnM7Zm9yKExhPW4ubm93KCk7YjxjLmxlbmd0aDtiKyspYT1jW2JdLGEoKXx8Y1tiXSE9PWF8fGMuc3BsaWNlKGItLSwxKTtjLmxlbmd0aHx8bi5meC5zdG9wKCksTGE9dm9pZCAwfSxuLmZ4LnRpbWVyPWZ1bmN0aW9uKGEpe24udGltZXJzLnB1c2goYSksYSgpP24uZnguc3RhcnQoKTpuLnRpbWVycy5wb3AoKX0sbi5meC5pbnRlcnZhbD0xMyxuLmZ4LnN0YXJ0PWZ1bmN0aW9uKCl7TWF8fChNYT1zZXRJbnRlcnZhbChuLmZ4LnRpY2ssbi5meC5pbnRlcnZhbCkpfSxuLmZ4LnN0b3A9ZnVuY3Rpb24oKXtjbGVhckludGVydmFsKE1hKSxNYT1udWxsfSxuLmZ4LnNwZWVkcz17c2xvdzo2MDAsZmFzdDoyMDAsX2RlZmF1bHQ6NDAwfSxuLmZuLmRlbGF5PWZ1bmN0aW9uKGEsYil7cmV0dXJuIGE9bi5meD9uLmZ4LnNwZWVkc1thXXx8YTphLGI9Ynx8XCJmeFwiLHRoaXMucXVldWUoYixmdW5jdGlvbihiLGMpe3ZhciBkPXNldFRpbWVvdXQoYixhKTtjLnN0b3A9ZnVuY3Rpb24oKXtjbGVhclRpbWVvdXQoZCl9fSl9LGZ1bmN0aW9uKCl7dmFyIGE9bC5jcmVhdGVFbGVtZW50KFwiaW5wdXRcIiksYj1sLmNyZWF0ZUVsZW1lbnQoXCJzZWxlY3RcIiksYz1iLmFwcGVuZENoaWxkKGwuY3JlYXRlRWxlbWVudChcIm9wdGlvblwiKSk7YS50eXBlPVwiY2hlY2tib3hcIixrLmNoZWNrT249XCJcIiE9PWEudmFsdWUsay5vcHRTZWxlY3RlZD1jLnNlbGVjdGVkLGIuZGlzYWJsZWQ9ITAsay5vcHREaXNhYmxlZD0hYy5kaXNhYmxlZCxhPWwuY3JlYXRlRWxlbWVudChcImlucHV0XCIpLGEudmFsdWU9XCJ0XCIsYS50eXBlPVwicmFkaW9cIixrLnJhZGlvVmFsdWU9XCJ0XCI9PT1hLnZhbHVlfSgpO3ZhciBZYSxaYSwkYT1uLmV4cHIuYXR0ckhhbmRsZTtuLmZuLmV4dGVuZCh7YXR0cjpmdW5jdGlvbihhLGIpe3JldHVybiBKKHRoaXMsbi5hdHRyLGEsYixhcmd1bWVudHMubGVuZ3RoPjEpfSxyZW1vdmVBdHRyOmZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKXtuLnJlbW92ZUF0dHIodGhpcyxhKX0pfX0pLG4uZXh0ZW5kKHthdHRyOmZ1bmN0aW9uKGEsYixjKXt2YXIgZCxlLGY9YS5ub2RlVHlwZTtpZihhJiYzIT09ZiYmOCE9PWYmJjIhPT1mKXJldHVybiB0eXBlb2YgYS5nZXRBdHRyaWJ1dGU9PT1VP24ucHJvcChhLGIsYyk6KDE9PT1mJiZuLmlzWE1MRG9jKGEpfHwoYj1iLnRvTG93ZXJDYXNlKCksZD1uLmF0dHJIb29rc1tiXXx8KG4uZXhwci5tYXRjaC5ib29sLnRlc3QoYik/WmE6WWEpKSxcclxudm9pZCAwPT09Yz9kJiZcImdldFwiaW4gZCYmbnVsbCE9PShlPWQuZ2V0KGEsYikpP2U6KGU9bi5maW5kLmF0dHIoYSxiKSxudWxsPT1lP3ZvaWQgMDplKTpudWxsIT09Yz9kJiZcInNldFwiaW4gZCYmdm9pZCAwIT09KGU9ZC5zZXQoYSxjLGIpKT9lOihhLnNldEF0dHJpYnV0ZShiLGMrXCJcIiksYyk6dm9pZCBuLnJlbW92ZUF0dHIoYSxiKSl9LHJlbW92ZUF0dHI6ZnVuY3Rpb24oYSxiKXt2YXIgYyxkLGU9MCxmPWImJmIubWF0Y2goRSk7aWYoZiYmMT09PWEubm9kZVR5cGUpd2hpbGUoYz1mW2UrK10pZD1uLnByb3BGaXhbY118fGMsbi5leHByLm1hdGNoLmJvb2wudGVzdChjKSYmKGFbZF09ITEpLGEucmVtb3ZlQXR0cmlidXRlKGMpfSxhdHRySG9va3M6e3R5cGU6e3NldDpmdW5jdGlvbihhLGIpe2lmKCFrLnJhZGlvVmFsdWUmJlwicmFkaW9cIj09PWImJm4ubm9kZU5hbWUoYSxcImlucHV0XCIpKXt2YXIgYz1hLnZhbHVlO3JldHVybiBhLnNldEF0dHJpYnV0ZShcInR5cGVcIixiKSxjJiYoYS52YWx1ZT1jKSxifX19fX0pLFphPXtzZXQ6ZnVuY3Rpb24oYSxiLGMpe3JldHVybiBiPT09ITE/bi5yZW1vdmVBdHRyKGEsYyk6YS5zZXRBdHRyaWJ1dGUoYyxjKSxjfX0sbi5lYWNoKG4uZXhwci5tYXRjaC5ib29sLnNvdXJjZS5tYXRjaCgvXFx3Ky9nKSxmdW5jdGlvbihhLGIpe3ZhciBjPSRhW2JdfHxuLmZpbmQuYXR0cjskYVtiXT1mdW5jdGlvbihhLGIsZCl7dmFyIGUsZjtyZXR1cm4gZHx8KGY9JGFbYl0sJGFbYl09ZSxlPW51bGwhPWMoYSxiLGQpP2IudG9Mb3dlckNhc2UoKTpudWxsLCRhW2JdPWYpLGV9fSk7dmFyIF9hPS9eKD86aW5wdXR8c2VsZWN0fHRleHRhcmVhfGJ1dHRvbikkL2k7bi5mbi5leHRlbmQoe3Byb3A6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gSih0aGlzLG4ucHJvcCxhLGIsYXJndW1lbnRzLmxlbmd0aD4xKX0scmVtb3ZlUHJvcDpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCl7ZGVsZXRlIHRoaXNbbi5wcm9wRml4W2FdfHxhXX0pfX0pLG4uZXh0ZW5kKHtwcm9wRml4OntcImZvclwiOlwiaHRtbEZvclwiLFwiY2xhc3NcIjpcImNsYXNzTmFtZVwifSxwcm9wOmZ1bmN0aW9uKGEsYixjKXt2YXIgZCxlLGYsZz1hLm5vZGVUeXBlO2lmKGEmJjMhPT1nJiY4IT09ZyYmMiE9PWcpcmV0dXJuIGY9MSE9PWd8fCFuLmlzWE1MRG9jKGEpLGYmJihiPW4ucHJvcEZpeFtiXXx8YixlPW4ucHJvcEhvb2tzW2JdKSx2b2lkIDAhPT1jP2UmJlwic2V0XCJpbiBlJiZ2b2lkIDAhPT0oZD1lLnNldChhLGMsYikpP2Q6YVtiXT1jOmUmJlwiZ2V0XCJpbiBlJiZudWxsIT09KGQ9ZS5nZXQoYSxiKSk/ZDphW2JdfSxwcm9wSG9va3M6e3RhYkluZGV4OntnZXQ6ZnVuY3Rpb24oYSl7cmV0dXJuIGEuaGFzQXR0cmlidXRlKFwidGFiaW5kZXhcIil8fF9hLnRlc3QoYS5ub2RlTmFtZSl8fGEuaHJlZj9hLnRhYkluZGV4Oi0xfX19fSksay5vcHRTZWxlY3RlZHx8KG4ucHJvcEhvb2tzLnNlbGVjdGVkPXtnZXQ6ZnVuY3Rpb24oYSl7dmFyIGI9YS5wYXJlbnROb2RlO3JldHVybiBiJiZiLnBhcmVudE5vZGUmJmIucGFyZW50Tm9kZS5zZWxlY3RlZEluZGV4LG51bGx9fSksbi5lYWNoKFtcInRhYkluZGV4XCIsXCJyZWFkT25seVwiLFwibWF4TGVuZ3RoXCIsXCJjZWxsU3BhY2luZ1wiLFwiY2VsbFBhZGRpbmdcIixcInJvd1NwYW5cIixcImNvbFNwYW5cIixcInVzZU1hcFwiLFwiZnJhbWVCb3JkZXJcIixcImNvbnRlbnRFZGl0YWJsZVwiXSxmdW5jdGlvbigpe24ucHJvcEZpeFt0aGlzLnRvTG93ZXJDYXNlKCldPXRoaXN9KTt2YXIgYWI9L1tcXHRcXHJcXG5cXGZdL2c7bi5mbi5leHRlbmQoe2FkZENsYXNzOmZ1bmN0aW9uKGEpe3ZhciBiLGMsZCxlLGYsZyxoPVwic3RyaW5nXCI9PXR5cGVvZiBhJiZhLGk9MCxqPXRoaXMubGVuZ3RoO2lmKG4uaXNGdW5jdGlvbihhKSlyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKGIpe24odGhpcykuYWRkQ2xhc3MoYS5jYWxsKHRoaXMsYix0aGlzLmNsYXNzTmFtZSkpfSk7aWYoaClmb3IoYj0oYXx8XCJcIikubWF0Y2goRSl8fFtdO2o+aTtpKyspaWYoYz10aGlzW2ldLGQ9MT09PWMubm9kZVR5cGUmJihjLmNsYXNzTmFtZT8oXCIgXCIrYy5jbGFzc05hbWUrXCIgXCIpLnJlcGxhY2UoYWIsXCIgXCIpOlwiIFwiKSl7Zj0wO3doaWxlKGU9YltmKytdKWQuaW5kZXhPZihcIiBcIitlK1wiIFwiKTwwJiYoZCs9ZStcIiBcIik7Zz1uLnRyaW0oZCksYy5jbGFzc05hbWUhPT1nJiYoYy5jbGFzc05hbWU9Zyl9cmV0dXJuIHRoaXN9LHJlbW92ZUNsYXNzOmZ1bmN0aW9uKGEpe3ZhciBiLGMsZCxlLGYsZyxoPTA9PT1hcmd1bWVudHMubGVuZ3RofHxcInN0cmluZ1wiPT10eXBlb2YgYSYmYSxpPTAsaj10aGlzLmxlbmd0aDtpZihuLmlzRnVuY3Rpb24oYSkpcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbihiKXtuKHRoaXMpLnJlbW92ZUNsYXNzKGEuY2FsbCh0aGlzLGIsdGhpcy5jbGFzc05hbWUpKX0pO2lmKGgpZm9yKGI9KGF8fFwiXCIpLm1hdGNoKEUpfHxbXTtqPmk7aSsrKWlmKGM9dGhpc1tpXSxkPTE9PT1jLm5vZGVUeXBlJiYoYy5jbGFzc05hbWU/KFwiIFwiK2MuY2xhc3NOYW1lK1wiIFwiKS5yZXBsYWNlKGFiLFwiIFwiKTpcIlwiKSl7Zj0wO3doaWxlKGU9YltmKytdKXdoaWxlKGQuaW5kZXhPZihcIiBcIitlK1wiIFwiKT49MClkPWQucmVwbGFjZShcIiBcIitlK1wiIFwiLFwiIFwiKTtnPWE/bi50cmltKGQpOlwiXCIsYy5jbGFzc05hbWUhPT1nJiYoYy5jbGFzc05hbWU9Zyl9cmV0dXJuIHRoaXN9LHRvZ2dsZUNsYXNzOmZ1bmN0aW9uKGEsYil7dmFyIGM9dHlwZW9mIGE7cmV0dXJuXCJib29sZWFuXCI9PXR5cGVvZiBiJiZcInN0cmluZ1wiPT09Yz9iP3RoaXMuYWRkQ2xhc3MoYSk6dGhpcy5yZW1vdmVDbGFzcyhhKTp0aGlzLmVhY2gobi5pc0Z1bmN0aW9uKGEpP2Z1bmN0aW9uKGMpe24odGhpcykudG9nZ2xlQ2xhc3MoYS5jYWxsKHRoaXMsYyx0aGlzLmNsYXNzTmFtZSxiKSxiKX06ZnVuY3Rpb24oKXtpZihcInN0cmluZ1wiPT09Yyl7dmFyIGIsZD0wLGU9bih0aGlzKSxmPWEubWF0Y2goRSl8fFtdO3doaWxlKGI9ZltkKytdKWUuaGFzQ2xhc3MoYik/ZS5yZW1vdmVDbGFzcyhiKTplLmFkZENsYXNzKGIpfWVsc2UoYz09PVV8fFwiYm9vbGVhblwiPT09YykmJih0aGlzLmNsYXNzTmFtZSYmTC5zZXQodGhpcyxcIl9fY2xhc3NOYW1lX19cIix0aGlzLmNsYXNzTmFtZSksdGhpcy5jbGFzc05hbWU9dGhpcy5jbGFzc05hbWV8fGE9PT0hMT9cIlwiOkwuZ2V0KHRoaXMsXCJfX2NsYXNzTmFtZV9fXCIpfHxcIlwiKX0pfSxoYXNDbGFzczpmdW5jdGlvbihhKXtmb3IodmFyIGI9XCIgXCIrYStcIiBcIixjPTAsZD10aGlzLmxlbmd0aDtkPmM7YysrKWlmKDE9PT10aGlzW2NdLm5vZGVUeXBlJiYoXCIgXCIrdGhpc1tjXS5jbGFzc05hbWUrXCIgXCIpLnJlcGxhY2UoYWIsXCIgXCIpLmluZGV4T2YoYik+PTApcmV0dXJuITA7cmV0dXJuITF9fSk7dmFyIGJiPS9cXHIvZztuLmZuLmV4dGVuZCh7dmFsOmZ1bmN0aW9uKGEpe3ZhciBiLGMsZCxlPXRoaXNbMF07e2lmKGFyZ3VtZW50cy5sZW5ndGgpcmV0dXJuIGQ9bi5pc0Z1bmN0aW9uKGEpLHRoaXMuZWFjaChmdW5jdGlvbihjKXt2YXIgZTsxPT09dGhpcy5ub2RlVHlwZSYmKGU9ZD9hLmNhbGwodGhpcyxjLG4odGhpcykudmFsKCkpOmEsbnVsbD09ZT9lPVwiXCI6XCJudW1iZXJcIj09dHlwZW9mIGU/ZSs9XCJcIjpuLmlzQXJyYXkoZSkmJihlPW4ubWFwKGUsZnVuY3Rpb24oYSl7cmV0dXJuIG51bGw9PWE/XCJcIjphK1wiXCJ9KSksYj1uLnZhbEhvb2tzW3RoaXMudHlwZV18fG4udmFsSG9va3NbdGhpcy5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpXSxiJiZcInNldFwiaW4gYiYmdm9pZCAwIT09Yi5zZXQodGhpcyxlLFwidmFsdWVcIil8fCh0aGlzLnZhbHVlPWUpKX0pO2lmKGUpcmV0dXJuIGI9bi52YWxIb29rc1tlLnR5cGVdfHxuLnZhbEhvb2tzW2Uubm9kZU5hbWUudG9Mb3dlckNhc2UoKV0sYiYmXCJnZXRcImluIGImJnZvaWQgMCE9PShjPWIuZ2V0KGUsXCJ2YWx1ZVwiKSk/YzooYz1lLnZhbHVlLFwic3RyaW5nXCI9PXR5cGVvZiBjP2MucmVwbGFjZShiYixcIlwiKTpudWxsPT1jP1wiXCI6Yyl9fX0pLG4uZXh0ZW5kKHt2YWxIb29rczp7b3B0aW9uOntnZXQ6ZnVuY3Rpb24oYSl7dmFyIGI9bi5maW5kLmF0dHIoYSxcInZhbHVlXCIpO3JldHVybiBudWxsIT1iP2I6bi50cmltKG4udGV4dChhKSl9fSxzZWxlY3Q6e2dldDpmdW5jdGlvbihhKXtmb3IodmFyIGIsYyxkPWEub3B0aW9ucyxlPWEuc2VsZWN0ZWRJbmRleCxmPVwic2VsZWN0LW9uZVwiPT09YS50eXBlfHwwPmUsZz1mP251bGw6W10saD1mP2UrMTpkLmxlbmd0aCxpPTA+ZT9oOmY/ZTowO2g+aTtpKyspaWYoYz1kW2ldLCEoIWMuc2VsZWN0ZWQmJmkhPT1lfHwoay5vcHREaXNhYmxlZD9jLmRpc2FibGVkOm51bGwhPT1jLmdldEF0dHJpYnV0ZShcImRpc2FibGVkXCIpKXx8Yy5wYXJlbnROb2RlLmRpc2FibGVkJiZuLm5vZGVOYW1lKGMucGFyZW50Tm9kZSxcIm9wdGdyb3VwXCIpKSl7aWYoYj1uKGMpLnZhbCgpLGYpcmV0dXJuIGI7Zy5wdXNoKGIpfXJldHVybiBnfSxzZXQ6ZnVuY3Rpb24oYSxiKXt2YXIgYyxkLGU9YS5vcHRpb25zLGY9bi5tYWtlQXJyYXkoYiksZz1lLmxlbmd0aDt3aGlsZShnLS0pZD1lW2ddLChkLnNlbGVjdGVkPW4uaW5BcnJheShkLnZhbHVlLGYpPj0wKSYmKGM9ITApO3JldHVybiBjfHwoYS5zZWxlY3RlZEluZGV4PS0xKSxmfX19fSksbi5lYWNoKFtcInJhZGlvXCIsXCJjaGVja2JveFwiXSxmdW5jdGlvbigpe24udmFsSG9va3NbdGhpc109e3NldDpmdW5jdGlvbihhLGIpe3JldHVybiBuLmlzQXJyYXkoYik/YS5jaGVja2VkPW4uaW5BcnJheShuKGEpLnZhbCgpLGIpPj0wOnZvaWQgMH19LGsuY2hlY2tPbnx8KG4udmFsSG9va3NbdGhpc10uZ2V0PWZ1bmN0aW9uKGEpe3JldHVybiBudWxsPT09YS5nZXRBdHRyaWJ1dGUoXCJ2YWx1ZVwiKT9cIm9uXCI6YS52YWx1ZX0pfSksbi5lYWNoKFwiYmx1ciBmb2N1cyBmb2N1c2luIGZvY3Vzb3V0IGxvYWQgcmVzaXplIHNjcm9sbCB1bmxvYWQgY2xpY2sgZGJsY2xpY2sgbW91c2Vkb3duIG1vdXNldXAgbW91c2Vtb3ZlIG1vdXNlb3ZlciBtb3VzZW91dCBtb3VzZWVudGVyIG1vdXNlbGVhdmUgY2hhbmdlIHNlbGVjdCBzdWJtaXQga2V5ZG93biBrZXlwcmVzcyBrZXl1cCBlcnJvciBjb250ZXh0bWVudVwiLnNwbGl0KFwiIFwiKSxmdW5jdGlvbihhLGIpe24uZm5bYl09ZnVuY3Rpb24oYSxjKXtyZXR1cm4gYXJndW1lbnRzLmxlbmd0aD4wP3RoaXMub24oYixudWxsLGEsYyk6dGhpcy50cmlnZ2VyKGIpfX0pLG4uZm4uZXh0ZW5kKHtob3ZlcjpmdW5jdGlvbihhLGIpe3JldHVybiB0aGlzLm1vdXNlZW50ZXIoYSkubW91c2VsZWF2ZShifHxhKX0sYmluZDpmdW5jdGlvbihhLGIsYyl7cmV0dXJuIHRoaXMub24oYSxudWxsLGIsYyl9LHVuYmluZDpmdW5jdGlvbihhLGIpe3JldHVybiB0aGlzLm9mZihhLG51bGwsYil9LGRlbGVnYXRlOmZ1bmN0aW9uKGEsYixjLGQpe3JldHVybiB0aGlzLm9uKGIsYSxjLGQpfSx1bmRlbGVnYXRlOmZ1bmN0aW9uKGEsYixjKXtyZXR1cm4gMT09PWFyZ3VtZW50cy5sZW5ndGg/dGhpcy5vZmYoYSxcIioqXCIpOnRoaXMub2ZmKGIsYXx8XCIqKlwiLGMpfX0pO3ZhciBjYj1uLm5vdygpLGRiPS9cXD8vO24ucGFyc2VKU09OPWZ1bmN0aW9uKGEpe3JldHVybiBKU09OLnBhcnNlKGErXCJcIil9LG4ucGFyc2VYTUw9ZnVuY3Rpb24oYSl7dmFyIGIsYztpZighYXx8XCJzdHJpbmdcIiE9dHlwZW9mIGEpcmV0dXJuIG51bGw7dHJ5e2M9bmV3IERPTVBhcnNlcixiPWMucGFyc2VGcm9tU3RyaW5nKGEsXCJ0ZXh0L3htbFwiKX1jYXRjaChkKXtiPXZvaWQgMH1yZXR1cm4oIWJ8fGIuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJwYXJzZXJlcnJvclwiKS5sZW5ndGgpJiZuLmVycm9yKFwiSW52YWxpZCBYTUw6IFwiK2EpLGJ9O3ZhciBlYj0vIy4qJC8sZmI9LyhbPyZdKV89W14mXSovLGdiPS9eKC4qPyk6WyBcXHRdKihbXlxcclxcbl0qKSQvZ20saGI9L14oPzphYm91dHxhcHB8YXBwLXN0b3JhZ2V8ListZXh0ZW5zaW9ufGZpbGV8cmVzfHdpZGdldCk6JC8saWI9L14oPzpHRVR8SEVBRCkkLyxqYj0vXlxcL1xcLy8sa2I9L14oW1xcdy4rLV0rOikoPzpcXC9cXC8oPzpbXlxcLz8jXSpAfCkoW15cXC8/IzpdKikoPzo6KFxcZCspfCl8KS8sbGI9e30sbWI9e30sbmI9XCIqL1wiLmNvbmNhdChcIipcIiksb2I9YS5sb2NhdGlvbi5ocmVmLHBiPWtiLmV4ZWMob2IudG9Mb3dlckNhc2UoKSl8fFtdO2Z1bmN0aW9uIHFiKGEpe3JldHVybiBmdW5jdGlvbihiLGMpe1wic3RyaW5nXCIhPXR5cGVvZiBiJiYoYz1iLGI9XCIqXCIpO3ZhciBkLGU9MCxmPWIudG9Mb3dlckNhc2UoKS5tYXRjaChFKXx8W107aWYobi5pc0Z1bmN0aW9uKGMpKXdoaWxlKGQ9ZltlKytdKVwiK1wiPT09ZFswXT8oZD1kLnNsaWNlKDEpfHxcIipcIiwoYVtkXT1hW2RdfHxbXSkudW5zaGlmdChjKSk6KGFbZF09YVtkXXx8W10pLnB1c2goYyl9fWZ1bmN0aW9uIHJiKGEsYixjLGQpe3ZhciBlPXt9LGY9YT09PW1iO2Z1bmN0aW9uIGcoaCl7dmFyIGk7cmV0dXJuIGVbaF09ITAsbi5lYWNoKGFbaF18fFtdLGZ1bmN0aW9uKGEsaCl7dmFyIGo9aChiLGMsZCk7cmV0dXJuXCJzdHJpbmdcIiE9dHlwZW9mIGp8fGZ8fGVbal0/Zj8hKGk9aik6dm9pZCAwOihiLmRhdGFUeXBlcy51bnNoaWZ0KGopLGcoaiksITEpfSksaX1yZXR1cm4gZyhiLmRhdGFUeXBlc1swXSl8fCFlW1wiKlwiXSYmZyhcIipcIil9ZnVuY3Rpb24gc2IoYSxiKXt2YXIgYyxkLGU9bi5hamF4U2V0dGluZ3MuZmxhdE9wdGlvbnN8fHt9O2ZvcihjIGluIGIpdm9pZCAwIT09YltjXSYmKChlW2NdP2E6ZHx8KGQ9e30pKVtjXT1iW2NdKTtyZXR1cm4gZCYmbi5leHRlbmQoITAsYSxkKSxhfWZ1bmN0aW9uIHRiKGEsYixjKXt2YXIgZCxlLGYsZyxoPWEuY29udGVudHMsaT1hLmRhdGFUeXBlczt3aGlsZShcIipcIj09PWlbMF0paS5zaGlmdCgpLHZvaWQgMD09PWQmJihkPWEubWltZVR5cGV8fGIuZ2V0UmVzcG9uc2VIZWFkZXIoXCJDb250ZW50LVR5cGVcIikpO2lmKGQpZm9yKGUgaW4gaClpZihoW2VdJiZoW2VdLnRlc3QoZCkpe2kudW5zaGlmdChlKTticmVha31pZihpWzBdaW4gYylmPWlbMF07ZWxzZXtmb3IoZSBpbiBjKXtpZighaVswXXx8YS5jb252ZXJ0ZXJzW2UrXCIgXCIraVswXV0pe2Y9ZTticmVha31nfHwoZz1lKX1mPWZ8fGd9cmV0dXJuIGY/KGYhPT1pWzBdJiZpLnVuc2hpZnQoZiksY1tmXSk6dm9pZCAwfWZ1bmN0aW9uIHViKGEsYixjLGQpe3ZhciBlLGYsZyxoLGksaj17fSxrPWEuZGF0YVR5cGVzLnNsaWNlKCk7aWYoa1sxXSlmb3IoZyBpbiBhLmNvbnZlcnRlcnMpaltnLnRvTG93ZXJDYXNlKCldPWEuY29udmVydGVyc1tnXTtmPWsuc2hpZnQoKTt3aGlsZShmKWlmKGEucmVzcG9uc2VGaWVsZHNbZl0mJihjW2EucmVzcG9uc2VGaWVsZHNbZl1dPWIpLCFpJiZkJiZhLmRhdGFGaWx0ZXImJihiPWEuZGF0YUZpbHRlcihiLGEuZGF0YVR5cGUpKSxpPWYsZj1rLnNoaWZ0KCkpaWYoXCIqXCI9PT1mKWY9aTtlbHNlIGlmKFwiKlwiIT09aSYmaSE9PWYpe2lmKGc9altpK1wiIFwiK2ZdfHxqW1wiKiBcIitmXSwhZylmb3IoZSBpbiBqKWlmKGg9ZS5zcGxpdChcIiBcIiksaFsxXT09PWYmJihnPWpbaStcIiBcIitoWzBdXXx8altcIiogXCIraFswXV0pKXtnPT09ITA/Zz1qW2VdOmpbZV0hPT0hMCYmKGY9aFswXSxrLnVuc2hpZnQoaFsxXSkpO2JyZWFrfWlmKGchPT0hMClpZihnJiZhW1widGhyb3dzXCJdKWI9ZyhiKTtlbHNlIHRyeXtiPWcoYil9Y2F0Y2gobCl7cmV0dXJue3N0YXRlOlwicGFyc2VyZXJyb3JcIixlcnJvcjpnP2w6XCJObyBjb252ZXJzaW9uIGZyb20gXCIraStcIiB0byBcIitmfX19cmV0dXJue3N0YXRlOlwic3VjY2Vzc1wiLGRhdGE6Yn19bi5leHRlbmQoe2FjdGl2ZTowLGxhc3RNb2RpZmllZDp7fSxldGFnOnt9LGFqYXhTZXR0aW5nczp7dXJsOm9iLHR5cGU6XCJHRVRcIixpc0xvY2FsOmhiLnRlc3QocGJbMV0pLGdsb2JhbDohMCxwcm9jZXNzRGF0YTohMCxhc3luYzohMCxjb250ZW50VHlwZTpcImFwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZDsgY2hhcnNldD1VVEYtOFwiLGFjY2VwdHM6e1wiKlwiOm5iLHRleHQ6XCJ0ZXh0L3BsYWluXCIsaHRtbDpcInRleHQvaHRtbFwiLHhtbDpcImFwcGxpY2F0aW9uL3htbCwgdGV4dC94bWxcIixqc29uOlwiYXBwbGljYXRpb24vanNvbiwgdGV4dC9qYXZhc2NyaXB0XCJ9LGNvbnRlbnRzOnt4bWw6L3htbC8saHRtbDovaHRtbC8sanNvbjovanNvbi99LHJlc3BvbnNlRmllbGRzOnt4bWw6XCJyZXNwb25zZVhNTFwiLHRleHQ6XCJyZXNwb25zZVRleHRcIixqc29uOlwicmVzcG9uc2VKU09OXCJ9LGNvbnZlcnRlcnM6e1wiKiB0ZXh0XCI6U3RyaW5nLFwidGV4dCBodG1sXCI6ITAsXCJ0ZXh0IGpzb25cIjpuLnBhcnNlSlNPTixcInRleHQgeG1sXCI6bi5wYXJzZVhNTH0sZmxhdE9wdGlvbnM6e3VybDohMCxjb250ZXh0OiEwfX0sYWpheFNldHVwOmZ1bmN0aW9uKGEsYil7cmV0dXJuIGI/c2Ioc2IoYSxuLmFqYXhTZXR0aW5ncyksYik6c2Iobi5hamF4U2V0dGluZ3MsYSl9LGFqYXhQcmVmaWx0ZXI6cWIobGIpLGFqYXhUcmFuc3BvcnQ6cWIobWIpLGFqYXg6ZnVuY3Rpb24oYSxiKXtcIm9iamVjdFwiPT10eXBlb2YgYSYmKGI9YSxhPXZvaWQgMCksYj1ifHx7fTt2YXIgYyxkLGUsZixnLGgsaSxqLGs9bi5hamF4U2V0dXAoe30sYiksbD1rLmNvbnRleHR8fGssbT1rLmNvbnRleHQmJihsLm5vZGVUeXBlfHxsLmpxdWVyeSk/bihsKTpuLmV2ZW50LG89bi5EZWZlcnJlZCgpLHA9bi5DYWxsYmFja3MoXCJvbmNlIG1lbW9yeVwiKSxxPWsuc3RhdHVzQ29kZXx8e30scj17fSxzPXt9LHQ9MCx1PVwiY2FuY2VsZWRcIix2PXtyZWFkeVN0YXRlOjAsZ2V0UmVzcG9uc2VIZWFkZXI6ZnVuY3Rpb24oYSl7dmFyIGI7aWYoMj09PXQpe2lmKCFmKXtmPXt9O3doaWxlKGI9Z2IuZXhlYyhlKSlmW2JbMV0udG9Mb3dlckNhc2UoKV09YlsyXX1iPWZbYS50b0xvd2VyQ2FzZSgpXX1yZXR1cm4gbnVsbD09Yj9udWxsOmJ9LGdldEFsbFJlc3BvbnNlSGVhZGVyczpmdW5jdGlvbigpe3JldHVybiAyPT09dD9lOm51bGx9LHNldFJlcXVlc3RIZWFkZXI6ZnVuY3Rpb24oYSxiKXt2YXIgYz1hLnRvTG93ZXJDYXNlKCk7cmV0dXJuIHR8fChhPXNbY109c1tjXXx8YSxyW2FdPWIpLHRoaXN9LG92ZXJyaWRlTWltZVR5cGU6ZnVuY3Rpb24oYSl7cmV0dXJuIHR8fChrLm1pbWVUeXBlPWEpLHRoaXN9LHN0YXR1c0NvZGU6ZnVuY3Rpb24oYSl7dmFyIGI7aWYoYSlpZigyPnQpZm9yKGIgaW4gYSlxW2JdPVtxW2JdLGFbYl1dO2Vsc2Ugdi5hbHdheXMoYVt2LnN0YXR1c10pO3JldHVybiB0aGlzfSxhYm9ydDpmdW5jdGlvbihhKXt2YXIgYj1hfHx1O3JldHVybiBjJiZjLmFib3J0KGIpLHgoMCxiKSx0aGlzfX07aWYoby5wcm9taXNlKHYpLmNvbXBsZXRlPXAuYWRkLHYuc3VjY2Vzcz12LmRvbmUsdi5lcnJvcj12LmZhaWwsay51cmw9KChhfHxrLnVybHx8b2IpK1wiXCIpLnJlcGxhY2UoZWIsXCJcIikucmVwbGFjZShqYixwYlsxXStcIi8vXCIpLGsudHlwZT1iLm1ldGhvZHx8Yi50eXBlfHxrLm1ldGhvZHx8ay50eXBlLGsuZGF0YVR5cGVzPW4udHJpbShrLmRhdGFUeXBlfHxcIipcIikudG9Mb3dlckNhc2UoKS5tYXRjaChFKXx8W1wiXCJdLG51bGw9PWsuY3Jvc3NEb21haW4mJihoPWtiLmV4ZWMoay51cmwudG9Mb3dlckNhc2UoKSksay5jcm9zc0RvbWFpbj0hKCFofHxoWzFdPT09cGJbMV0mJmhbMl09PT1wYlsyXSYmKGhbM118fChcImh0dHA6XCI9PT1oWzFdP1wiODBcIjpcIjQ0M1wiKSk9PT0ocGJbM118fChcImh0dHA6XCI9PT1wYlsxXT9cIjgwXCI6XCI0NDNcIikpKSksay5kYXRhJiZrLnByb2Nlc3NEYXRhJiZcInN0cmluZ1wiIT10eXBlb2Ygay5kYXRhJiYoay5kYXRhPW4ucGFyYW0oay5kYXRhLGsudHJhZGl0aW9uYWwpKSxyYihsYixrLGIsdiksMj09PXQpcmV0dXJuIHY7aT1uLmV2ZW50JiZrLmdsb2JhbCxpJiYwPT09bi5hY3RpdmUrKyYmbi5ldmVudC50cmlnZ2VyKFwiYWpheFN0YXJ0XCIpLGsudHlwZT1rLnR5cGUudG9VcHBlckNhc2UoKSxrLmhhc0NvbnRlbnQ9IWliLnRlc3Qoay50eXBlKSxkPWsudXJsLGsuaGFzQ29udGVudHx8KGsuZGF0YSYmKGQ9ay51cmwrPShkYi50ZXN0KGQpP1wiJlwiOlwiP1wiKStrLmRhdGEsZGVsZXRlIGsuZGF0YSksay5jYWNoZT09PSExJiYoay51cmw9ZmIudGVzdChkKT9kLnJlcGxhY2UoZmIsXCIkMV89XCIrY2IrKyk6ZCsoZGIudGVzdChkKT9cIiZcIjpcIj9cIikrXCJfPVwiK2NiKyspKSxrLmlmTW9kaWZpZWQmJihuLmxhc3RNb2RpZmllZFtkXSYmdi5zZXRSZXF1ZXN0SGVhZGVyKFwiSWYtTW9kaWZpZWQtU2luY2VcIixuLmxhc3RNb2RpZmllZFtkXSksbi5ldGFnW2RdJiZ2LnNldFJlcXVlc3RIZWFkZXIoXCJJZi1Ob25lLU1hdGNoXCIsbi5ldGFnW2RdKSksKGsuZGF0YSYmay5oYXNDb250ZW50JiZrLmNvbnRlbnRUeXBlIT09ITF8fGIuY29udGVudFR5cGUpJiZ2LnNldFJlcXVlc3RIZWFkZXIoXCJDb250ZW50LVR5cGVcIixrLmNvbnRlbnRUeXBlKSx2LnNldFJlcXVlc3RIZWFkZXIoXCJBY2NlcHRcIixrLmRhdGFUeXBlc1swXSYmay5hY2NlcHRzW2suZGF0YVR5cGVzWzBdXT9rLmFjY2VwdHNbay5kYXRhVHlwZXNbMF1dKyhcIipcIiE9PWsuZGF0YVR5cGVzWzBdP1wiLCBcIituYitcIjsgcT0wLjAxXCI6XCJcIik6ay5hY2NlcHRzW1wiKlwiXSk7Zm9yKGogaW4gay5oZWFkZXJzKXYuc2V0UmVxdWVzdEhlYWRlcihqLGsuaGVhZGVyc1tqXSk7aWYoay5iZWZvcmVTZW5kJiYoay5iZWZvcmVTZW5kLmNhbGwobCx2LGspPT09ITF8fDI9PT10KSlyZXR1cm4gdi5hYm9ydCgpO3U9XCJhYm9ydFwiO2ZvcihqIGlue3N1Y2Nlc3M6MSxlcnJvcjoxLGNvbXBsZXRlOjF9KXZbal0oa1tqXSk7aWYoYz1yYihtYixrLGIsdikpe3YucmVhZHlTdGF0ZT0xLGkmJm0udHJpZ2dlcihcImFqYXhTZW5kXCIsW3Ysa10pLGsuYXN5bmMmJmsudGltZW91dD4wJiYoZz1zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7di5hYm9ydChcInRpbWVvdXRcIil9LGsudGltZW91dCkpO3RyeXt0PTEsYy5zZW5kKHIseCl9Y2F0Y2godyl7aWYoISgyPnQpKXRocm93IHc7eCgtMSx3KX19ZWxzZSB4KC0xLFwiTm8gVHJhbnNwb3J0XCIpO2Z1bmN0aW9uIHgoYSxiLGYsaCl7dmFyIGoscixzLHUsdyx4PWI7MiE9PXQmJih0PTIsZyYmY2xlYXJUaW1lb3V0KGcpLGM9dm9pZCAwLGU9aHx8XCJcIix2LnJlYWR5U3RhdGU9YT4wPzQ6MCxqPWE+PTIwMCYmMzAwPmF8fDMwND09PWEsZiYmKHU9dGIoayx2LGYpKSx1PXViKGssdSx2LGopLGo/KGsuaWZNb2RpZmllZCYmKHc9di5nZXRSZXNwb25zZUhlYWRlcihcIkxhc3QtTW9kaWZpZWRcIiksdyYmKG4ubGFzdE1vZGlmaWVkW2RdPXcpLHc9di5nZXRSZXNwb25zZUhlYWRlcihcImV0YWdcIiksdyYmKG4uZXRhZ1tkXT13KSksMjA0PT09YXx8XCJIRUFEXCI9PT1rLnR5cGU/eD1cIm5vY29udGVudFwiOjMwND09PWE/eD1cIm5vdG1vZGlmaWVkXCI6KHg9dS5zdGF0ZSxyPXUuZGF0YSxzPXUuZXJyb3Isaj0hcykpOihzPXgsKGF8fCF4KSYmKHg9XCJlcnJvclwiLDA+YSYmKGE9MCkpKSx2LnN0YXR1cz1hLHYuc3RhdHVzVGV4dD0oYnx8eCkrXCJcIixqP28ucmVzb2x2ZVdpdGgobCxbcix4LHZdKTpvLnJlamVjdFdpdGgobCxbdix4LHNdKSx2LnN0YXR1c0NvZGUocSkscT12b2lkIDAsaSYmbS50cmlnZ2VyKGo/XCJhamF4U3VjY2Vzc1wiOlwiYWpheEVycm9yXCIsW3YsayxqP3I6c10pLHAuZmlyZVdpdGgobCxbdix4XSksaSYmKG0udHJpZ2dlcihcImFqYXhDb21wbGV0ZVwiLFt2LGtdKSwtLW4uYWN0aXZlfHxuLmV2ZW50LnRyaWdnZXIoXCJhamF4U3RvcFwiKSkpfXJldHVybiB2fSxnZXRKU09OOmZ1bmN0aW9uKGEsYixjKXtyZXR1cm4gbi5nZXQoYSxiLGMsXCJqc29uXCIpfSxnZXRTY3JpcHQ6ZnVuY3Rpb24oYSxiKXtyZXR1cm4gbi5nZXQoYSx2b2lkIDAsYixcInNjcmlwdFwiKX19KSxuLmVhY2goW1wiZ2V0XCIsXCJwb3N0XCJdLGZ1bmN0aW9uKGEsYil7bltiXT1mdW5jdGlvbihhLGMsZCxlKXtyZXR1cm4gbi5pc0Z1bmN0aW9uKGMpJiYoZT1lfHxkLGQ9YyxjPXZvaWQgMCksbi5hamF4KHt1cmw6YSx0eXBlOmIsZGF0YVR5cGU6ZSxkYXRhOmMsc3VjY2VzczpkfSl9fSksbi5fZXZhbFVybD1mdW5jdGlvbihhKXtyZXR1cm4gbi5hamF4KHt1cmw6YSx0eXBlOlwiR0VUXCIsZGF0YVR5cGU6XCJzY3JpcHRcIixhc3luYzohMSxnbG9iYWw6ITEsXCJ0aHJvd3NcIjohMH0pfSxuLmZuLmV4dGVuZCh7d3JhcEFsbDpmdW5jdGlvbihhKXt2YXIgYjtyZXR1cm4gbi5pc0Z1bmN0aW9uKGEpP3RoaXMuZWFjaChmdW5jdGlvbihiKXtuKHRoaXMpLndyYXBBbGwoYS5jYWxsKHRoaXMsYikpfSk6KHRoaXNbMF0mJihiPW4oYSx0aGlzWzBdLm93bmVyRG9jdW1lbnQpLmVxKDApLmNsb25lKCEwKSx0aGlzWzBdLnBhcmVudE5vZGUmJmIuaW5zZXJ0QmVmb3JlKHRoaXNbMF0pLGIubWFwKGZ1bmN0aW9uKCl7dmFyIGE9dGhpczt3aGlsZShhLmZpcnN0RWxlbWVudENoaWxkKWE9YS5maXJzdEVsZW1lbnRDaGlsZDtyZXR1cm4gYX0pLmFwcGVuZCh0aGlzKSksdGhpcyl9LHdyYXBJbm5lcjpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5lYWNoKG4uaXNGdW5jdGlvbihhKT9mdW5jdGlvbihiKXtuKHRoaXMpLndyYXBJbm5lcihhLmNhbGwodGhpcyxiKSl9OmZ1bmN0aW9uKCl7dmFyIGI9bih0aGlzKSxjPWIuY29udGVudHMoKTtjLmxlbmd0aD9jLndyYXBBbGwoYSk6Yi5hcHBlbmQoYSl9KX0sd3JhcDpmdW5jdGlvbihhKXt2YXIgYj1uLmlzRnVuY3Rpb24oYSk7cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbihjKXtuKHRoaXMpLndyYXBBbGwoYj9hLmNhbGwodGhpcyxjKTphKX0pfSx1bndyYXA6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5wYXJlbnQoKS5lYWNoKGZ1bmN0aW9uKCl7bi5ub2RlTmFtZSh0aGlzLFwiYm9keVwiKXx8bih0aGlzKS5yZXBsYWNlV2l0aCh0aGlzLmNoaWxkTm9kZXMpfSkuZW5kKCl9fSksbi5leHByLmZpbHRlcnMuaGlkZGVuPWZ1bmN0aW9uKGEpe3JldHVybiBhLm9mZnNldFdpZHRoPD0wJiZhLm9mZnNldEhlaWdodDw9MH0sbi5leHByLmZpbHRlcnMudmlzaWJsZT1mdW5jdGlvbihhKXtyZXR1cm4hbi5leHByLmZpbHRlcnMuaGlkZGVuKGEpfTt2YXIgdmI9LyUyMC9nLHdiPS9cXFtcXF0kLyx4Yj0vXFxyP1xcbi9nLHliPS9eKD86c3VibWl0fGJ1dHRvbnxpbWFnZXxyZXNldHxmaWxlKSQvaSx6Yj0vXig/OmlucHV0fHNlbGVjdHx0ZXh0YXJlYXxrZXlnZW4pL2k7ZnVuY3Rpb24gQWIoYSxiLGMsZCl7dmFyIGU7aWYobi5pc0FycmF5KGIpKW4uZWFjaChiLGZ1bmN0aW9uKGIsZSl7Y3x8d2IudGVzdChhKT9kKGEsZSk6QWIoYStcIltcIisoXCJvYmplY3RcIj09dHlwZW9mIGU/YjpcIlwiKStcIl1cIixlLGMsZCl9KTtlbHNlIGlmKGN8fFwib2JqZWN0XCIhPT1uLnR5cGUoYikpZChhLGIpO2Vsc2UgZm9yKGUgaW4gYilBYihhK1wiW1wiK2UrXCJdXCIsYltlXSxjLGQpfW4ucGFyYW09ZnVuY3Rpb24oYSxiKXt2YXIgYyxkPVtdLGU9ZnVuY3Rpb24oYSxiKXtiPW4uaXNGdW5jdGlvbihiKT9iKCk6bnVsbD09Yj9cIlwiOmIsZFtkLmxlbmd0aF09ZW5jb2RlVVJJQ29tcG9uZW50KGEpK1wiPVwiK2VuY29kZVVSSUNvbXBvbmVudChiKX07aWYodm9pZCAwPT09YiYmKGI9bi5hamF4U2V0dGluZ3MmJm4uYWpheFNldHRpbmdzLnRyYWRpdGlvbmFsKSxuLmlzQXJyYXkoYSl8fGEuanF1ZXJ5JiYhbi5pc1BsYWluT2JqZWN0KGEpKW4uZWFjaChhLGZ1bmN0aW9uKCl7ZSh0aGlzLm5hbWUsdGhpcy52YWx1ZSl9KTtlbHNlIGZvcihjIGluIGEpQWIoYyxhW2NdLGIsZSk7cmV0dXJuIGQuam9pbihcIiZcIikucmVwbGFjZSh2YixcIitcIil9LG4uZm4uZXh0ZW5kKHtzZXJpYWxpemU6ZnVuY3Rpb24oKXtyZXR1cm4gbi5wYXJhbSh0aGlzLnNlcmlhbGl6ZUFycmF5KCkpfSxzZXJpYWxpemVBcnJheTpmdW5jdGlvbigpe3JldHVybiB0aGlzLm1hcChmdW5jdGlvbigpe3ZhciBhPW4ucHJvcCh0aGlzLFwiZWxlbWVudHNcIik7cmV0dXJuIGE/bi5tYWtlQXJyYXkoYSk6dGhpc30pLmZpbHRlcihmdW5jdGlvbigpe3ZhciBhPXRoaXMudHlwZTtyZXR1cm4gdGhpcy5uYW1lJiYhbih0aGlzKS5pcyhcIjpkaXNhYmxlZFwiKSYmemIudGVzdCh0aGlzLm5vZGVOYW1lKSYmIXliLnRlc3QoYSkmJih0aGlzLmNoZWNrZWR8fCFULnRlc3QoYSkpfSkubWFwKGZ1bmN0aW9uKGEsYil7dmFyIGM9bih0aGlzKS52YWwoKTtyZXR1cm4gbnVsbD09Yz9udWxsOm4uaXNBcnJheShjKT9uLm1hcChjLGZ1bmN0aW9uKGEpe3JldHVybntuYW1lOmIubmFtZSx2YWx1ZTphLnJlcGxhY2UoeGIsXCJcXHJcXG5cIil9fSk6e25hbWU6Yi5uYW1lLHZhbHVlOmMucmVwbGFjZSh4YixcIlxcclxcblwiKX19KS5nZXQoKX19KSxuLmFqYXhTZXR0aW5ncy54aHI9ZnVuY3Rpb24oKXt0cnl7cmV0dXJuIG5ldyBYTUxIdHRwUmVxdWVzdH1jYXRjaChhKXt9fTt2YXIgQmI9MCxDYj17fSxEYj17MDoyMDAsMTIyMzoyMDR9LEViPW4uYWpheFNldHRpbmdzLnhocigpO2EuYXR0YWNoRXZlbnQmJmEuYXR0YWNoRXZlbnQoXCJvbnVubG9hZFwiLGZ1bmN0aW9uKCl7Zm9yKHZhciBhIGluIENiKUNiW2FdKCl9KSxrLmNvcnM9ISFFYiYmXCJ3aXRoQ3JlZGVudGlhbHNcImluIEViLGsuYWpheD1FYj0hIUViLG4uYWpheFRyYW5zcG9ydChmdW5jdGlvbihhKXt2YXIgYjtyZXR1cm4gay5jb3JzfHxFYiYmIWEuY3Jvc3NEb21haW4/e3NlbmQ6ZnVuY3Rpb24oYyxkKXt2YXIgZSxmPWEueGhyKCksZz0rK0JiO2lmKGYub3BlbihhLnR5cGUsYS51cmwsYS5hc3luYyxhLnVzZXJuYW1lLGEucGFzc3dvcmQpLGEueGhyRmllbGRzKWZvcihlIGluIGEueGhyRmllbGRzKWZbZV09YS54aHJGaWVsZHNbZV07YS5taW1lVHlwZSYmZi5vdmVycmlkZU1pbWVUeXBlJiZmLm92ZXJyaWRlTWltZVR5cGUoYS5taW1lVHlwZSksYS5jcm9zc0RvbWFpbnx8Y1tcIlgtUmVxdWVzdGVkLVdpdGhcIl18fChjW1wiWC1SZXF1ZXN0ZWQtV2l0aFwiXT1cIlhNTEh0dHBSZXF1ZXN0XCIpO2ZvcihlIGluIGMpZi5zZXRSZXF1ZXN0SGVhZGVyKGUsY1tlXSk7Yj1mdW5jdGlvbihhKXtyZXR1cm4gZnVuY3Rpb24oKXtiJiYoZGVsZXRlIENiW2ddLGI9Zi5vbmxvYWQ9Zi5vbmVycm9yPW51bGwsXCJhYm9ydFwiPT09YT9mLmFib3J0KCk6XCJlcnJvclwiPT09YT9kKGYuc3RhdHVzLGYuc3RhdHVzVGV4dCk6ZChEYltmLnN0YXR1c118fGYuc3RhdHVzLGYuc3RhdHVzVGV4dCxcInN0cmluZ1wiPT10eXBlb2YgZi5yZXNwb25zZVRleHQ/e3RleHQ6Zi5yZXNwb25zZVRleHR9OnZvaWQgMCxmLmdldEFsbFJlc3BvbnNlSGVhZGVycygpKSl9fSxmLm9ubG9hZD1iKCksZi5vbmVycm9yPWIoXCJlcnJvclwiKSxiPUNiW2ddPWIoXCJhYm9ydFwiKTt0cnl7Zi5zZW5kKGEuaGFzQ29udGVudCYmYS5kYXRhfHxudWxsKX1jYXRjaChoKXtpZihiKXRocm93IGh9fSxhYm9ydDpmdW5jdGlvbigpe2ImJmIoKX19OnZvaWQgMH0pLG4uYWpheFNldHVwKHthY2NlcHRzOntzY3JpcHQ6XCJ0ZXh0L2phdmFzY3JpcHQsIGFwcGxpY2F0aW9uL2phdmFzY3JpcHQsIGFwcGxpY2F0aW9uL2VjbWFzY3JpcHQsIGFwcGxpY2F0aW9uL3gtZWNtYXNjcmlwdFwifSxjb250ZW50czp7c2NyaXB0Oi8oPzpqYXZhfGVjbWEpc2NyaXB0L30sY29udmVydGVyczp7XCJ0ZXh0IHNjcmlwdFwiOmZ1bmN0aW9uKGEpe3JldHVybiBuLmdsb2JhbEV2YWwoYSksYX19fSksbi5hamF4UHJlZmlsdGVyKFwic2NyaXB0XCIsZnVuY3Rpb24oYSl7dm9pZCAwPT09YS5jYWNoZSYmKGEuY2FjaGU9ITEpLGEuY3Jvc3NEb21haW4mJihhLnR5cGU9XCJHRVRcIil9KSxuLmFqYXhUcmFuc3BvcnQoXCJzY3JpcHRcIixmdW5jdGlvbihhKXtpZihhLmNyb3NzRG9tYWluKXt2YXIgYixjO3JldHVybntzZW5kOmZ1bmN0aW9uKGQsZSl7Yj1uKFwiPHNjcmlwdD5cIikucHJvcCh7YXN5bmM6ITAsY2hhcnNldDphLnNjcmlwdENoYXJzZXQsc3JjOmEudXJsfSkub24oXCJsb2FkIGVycm9yXCIsYz1mdW5jdGlvbihhKXtiLnJlbW92ZSgpLGM9bnVsbCxhJiZlKFwiZXJyb3JcIj09PWEudHlwZT80MDQ6MjAwLGEudHlwZSl9KSxsLmhlYWQuYXBwZW5kQ2hpbGQoYlswXSl9LGFib3J0OmZ1bmN0aW9uKCl7YyYmYygpfX19fSk7dmFyIEZiPVtdLEdiPS8oPSlcXD8oPz0mfCQpfFxcP1xcPy87bi5hamF4U2V0dXAoe2pzb25wOlwiY2FsbGJhY2tcIixqc29ucENhbGxiYWNrOmZ1bmN0aW9uKCl7dmFyIGE9RmIucG9wKCl8fG4uZXhwYW5kbytcIl9cIitjYisrO3JldHVybiB0aGlzW2FdPSEwLGF9fSksbi5hamF4UHJlZmlsdGVyKFwianNvbiBqc29ucFwiLGZ1bmN0aW9uKGIsYyxkKXt2YXIgZSxmLGcsaD1iLmpzb25wIT09ITEmJihHYi50ZXN0KGIudXJsKT9cInVybFwiOlwic3RyaW5nXCI9PXR5cGVvZiBiLmRhdGEmJiEoYi5jb250ZW50VHlwZXx8XCJcIikuaW5kZXhPZihcImFwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZFwiKSYmR2IudGVzdChiLmRhdGEpJiZcImRhdGFcIik7cmV0dXJuIGh8fFwianNvbnBcIj09PWIuZGF0YVR5cGVzWzBdPyhlPWIuanNvbnBDYWxsYmFjaz1uLmlzRnVuY3Rpb24oYi5qc29ucENhbGxiYWNrKT9iLmpzb25wQ2FsbGJhY2soKTpiLmpzb25wQ2FsbGJhY2ssaD9iW2hdPWJbaF0ucmVwbGFjZShHYixcIiQxXCIrZSk6Yi5qc29ucCE9PSExJiYoYi51cmwrPShkYi50ZXN0KGIudXJsKT9cIiZcIjpcIj9cIikrYi5qc29ucCtcIj1cIitlKSxiLmNvbnZlcnRlcnNbXCJzY3JpcHQganNvblwiXT1mdW5jdGlvbigpe3JldHVybiBnfHxuLmVycm9yKGUrXCIgd2FzIG5vdCBjYWxsZWRcIiksZ1swXX0sYi5kYXRhVHlwZXNbMF09XCJqc29uXCIsZj1hW2VdLGFbZV09ZnVuY3Rpb24oKXtnPWFyZ3VtZW50c30sZC5hbHdheXMoZnVuY3Rpb24oKXthW2VdPWYsYltlXSYmKGIuanNvbnBDYWxsYmFjaz1jLmpzb25wQ2FsbGJhY2ssRmIucHVzaChlKSksZyYmbi5pc0Z1bmN0aW9uKGYpJiZmKGdbMF0pLGc9Zj12b2lkIDB9KSxcInNjcmlwdFwiKTp2b2lkIDB9KSxuLnBhcnNlSFRNTD1mdW5jdGlvbihhLGIsYyl7aWYoIWF8fFwic3RyaW5nXCIhPXR5cGVvZiBhKXJldHVybiBudWxsO1wiYm9vbGVhblwiPT10eXBlb2YgYiYmKGM9YixiPSExKSxiPWJ8fGw7dmFyIGQ9di5leGVjKGEpLGU9IWMmJltdO3JldHVybiBkP1tiLmNyZWF0ZUVsZW1lbnQoZFsxXSldOihkPW4uYnVpbGRGcmFnbWVudChbYV0sYixlKSxlJiZlLmxlbmd0aCYmbihlKS5yZW1vdmUoKSxuLm1lcmdlKFtdLGQuY2hpbGROb2RlcykpfTt2YXIgSGI9bi5mbi5sb2FkO24uZm4ubG9hZD1mdW5jdGlvbihhLGIsYyl7aWYoXCJzdHJpbmdcIiE9dHlwZW9mIGEmJkhiKXJldHVybiBIYi5hcHBseSh0aGlzLGFyZ3VtZW50cyk7dmFyIGQsZSxmLGc9dGhpcyxoPWEuaW5kZXhPZihcIiBcIik7cmV0dXJuIGg+PTAmJihkPW4udHJpbShhLnNsaWNlKGgpKSxhPWEuc2xpY2UoMCxoKSksbi5pc0Z1bmN0aW9uKGIpPyhjPWIsYj12b2lkIDApOmImJlwib2JqZWN0XCI9PXR5cGVvZiBiJiYoZT1cIlBPU1RcIiksZy5sZW5ndGg+MCYmbi5hamF4KHt1cmw6YSx0eXBlOmUsZGF0YVR5cGU6XCJodG1sXCIsZGF0YTpifSkuZG9uZShmdW5jdGlvbihhKXtmPWFyZ3VtZW50cyxnLmh0bWwoZD9uKFwiPGRpdj5cIikuYXBwZW5kKG4ucGFyc2VIVE1MKGEpKS5maW5kKGQpOmEpfSkuY29tcGxldGUoYyYmZnVuY3Rpb24oYSxiKXtnLmVhY2goYyxmfHxbYS5yZXNwb25zZVRleHQsYixhXSl9KSx0aGlzfSxuLmVhY2goW1wiYWpheFN0YXJ0XCIsXCJhamF4U3RvcFwiLFwiYWpheENvbXBsZXRlXCIsXCJhamF4RXJyb3JcIixcImFqYXhTdWNjZXNzXCIsXCJhamF4U2VuZFwiXSxmdW5jdGlvbihhLGIpe24uZm5bYl09ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMub24oYixhKX19KSxuLmV4cHIuZmlsdGVycy5hbmltYXRlZD1mdW5jdGlvbihhKXtyZXR1cm4gbi5ncmVwKG4udGltZXJzLGZ1bmN0aW9uKGIpe3JldHVybiBhPT09Yi5lbGVtfSkubGVuZ3RofTt2YXIgSWI9YS5kb2N1bWVudC5kb2N1bWVudEVsZW1lbnQ7ZnVuY3Rpb24gSmIoYSl7cmV0dXJuIG4uaXNXaW5kb3coYSk/YTo5PT09YS5ub2RlVHlwZSYmYS5kZWZhdWx0Vmlld31uLm9mZnNldD17c2V0T2Zmc2V0OmZ1bmN0aW9uKGEsYixjKXt2YXIgZCxlLGYsZyxoLGksaixrPW4uY3NzKGEsXCJwb3NpdGlvblwiKSxsPW4oYSksbT17fTtcInN0YXRpY1wiPT09ayYmKGEuc3R5bGUucG9zaXRpb249XCJyZWxhdGl2ZVwiKSxoPWwub2Zmc2V0KCksZj1uLmNzcyhhLFwidG9wXCIpLGk9bi5jc3MoYSxcImxlZnRcIiksaj0oXCJhYnNvbHV0ZVwiPT09a3x8XCJmaXhlZFwiPT09aykmJihmK2kpLmluZGV4T2YoXCJhdXRvXCIpPi0xLGo/KGQ9bC5wb3NpdGlvbigpLGc9ZC50b3AsZT1kLmxlZnQpOihnPXBhcnNlRmxvYXQoZil8fDAsZT1wYXJzZUZsb2F0KGkpfHwwKSxuLmlzRnVuY3Rpb24oYikmJihiPWIuY2FsbChhLGMsaCkpLG51bGwhPWIudG9wJiYobS50b3A9Yi50b3AtaC50b3ArZyksbnVsbCE9Yi5sZWZ0JiYobS5sZWZ0PWIubGVmdC1oLmxlZnQrZSksXCJ1c2luZ1wiaW4gYj9iLnVzaW5nLmNhbGwoYSxtKTpsLmNzcyhtKX19LG4uZm4uZXh0ZW5kKHtvZmZzZXQ6ZnVuY3Rpb24oYSl7aWYoYXJndW1lbnRzLmxlbmd0aClyZXR1cm4gdm9pZCAwPT09YT90aGlzOnRoaXMuZWFjaChmdW5jdGlvbihiKXtuLm9mZnNldC5zZXRPZmZzZXQodGhpcyxhLGIpfSk7dmFyIGIsYyxkPXRoaXNbMF0sZT17dG9wOjAsbGVmdDowfSxmPWQmJmQub3duZXJEb2N1bWVudDtpZihmKXJldHVybiBiPWYuZG9jdW1lbnRFbGVtZW50LG4uY29udGFpbnMoYixkKT8odHlwZW9mIGQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0IT09VSYmKGU9ZC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSksYz1KYihmKSx7dG9wOmUudG9wK2MucGFnZVlPZmZzZXQtYi5jbGllbnRUb3AsbGVmdDplLmxlZnQrYy5wYWdlWE9mZnNldC1iLmNsaWVudExlZnR9KTplfSxwb3NpdGlvbjpmdW5jdGlvbigpe2lmKHRoaXNbMF0pe3ZhciBhLGIsYz10aGlzWzBdLGQ9e3RvcDowLGxlZnQ6MH07cmV0dXJuXCJmaXhlZFwiPT09bi5jc3MoYyxcInBvc2l0aW9uXCIpP2I9Yy5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTooYT10aGlzLm9mZnNldFBhcmVudCgpLGI9dGhpcy5vZmZzZXQoKSxuLm5vZGVOYW1lKGFbMF0sXCJodG1sXCIpfHwoZD1hLm9mZnNldCgpKSxkLnRvcCs9bi5jc3MoYVswXSxcImJvcmRlclRvcFdpZHRoXCIsITApLGQubGVmdCs9bi5jc3MoYVswXSxcImJvcmRlckxlZnRXaWR0aFwiLCEwKSkse3RvcDpiLnRvcC1kLnRvcC1uLmNzcyhjLFwibWFyZ2luVG9wXCIsITApLGxlZnQ6Yi5sZWZ0LWQubGVmdC1uLmNzcyhjLFwibWFyZ2luTGVmdFwiLCEwKX19fSxvZmZzZXRQYXJlbnQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5tYXAoZnVuY3Rpb24oKXt2YXIgYT10aGlzLm9mZnNldFBhcmVudHx8SWI7d2hpbGUoYSYmIW4ubm9kZU5hbWUoYSxcImh0bWxcIikmJlwic3RhdGljXCI9PT1uLmNzcyhhLFwicG9zaXRpb25cIikpYT1hLm9mZnNldFBhcmVudDtyZXR1cm4gYXx8SWJ9KX19KSxuLmVhY2goe3Njcm9sbExlZnQ6XCJwYWdlWE9mZnNldFwiLHNjcm9sbFRvcDpcInBhZ2VZT2Zmc2V0XCJ9LGZ1bmN0aW9uKGIsYyl7dmFyIGQ9XCJwYWdlWU9mZnNldFwiPT09YztuLmZuW2JdPWZ1bmN0aW9uKGUpe3JldHVybiBKKHRoaXMsZnVuY3Rpb24oYixlLGYpe3ZhciBnPUpiKGIpO3JldHVybiB2b2lkIDA9PT1mP2c/Z1tjXTpiW2VdOnZvaWQoZz9nLnNjcm9sbFRvKGQ/YS5wYWdlWE9mZnNldDpmLGQ/ZjphLnBhZ2VZT2Zmc2V0KTpiW2VdPWYpfSxiLGUsYXJndW1lbnRzLmxlbmd0aCxudWxsKX19KSxuLmVhY2goW1widG9wXCIsXCJsZWZ0XCJdLGZ1bmN0aW9uKGEsYil7bi5jc3NIb29rc1tiXT15YShrLnBpeGVsUG9zaXRpb24sZnVuY3Rpb24oYSxjKXtyZXR1cm4gYz8oYz14YShhLGIpLHZhLnRlc3QoYyk/bihhKS5wb3NpdGlvbigpW2JdK1wicHhcIjpjKTp2b2lkIDB9KX0pLG4uZWFjaCh7SGVpZ2h0OlwiaGVpZ2h0XCIsV2lkdGg6XCJ3aWR0aFwifSxmdW5jdGlvbihhLGIpe24uZWFjaCh7cGFkZGluZzpcImlubmVyXCIrYSxjb250ZW50OmIsXCJcIjpcIm91dGVyXCIrYX0sZnVuY3Rpb24oYyxkKXtuLmZuW2RdPWZ1bmN0aW9uKGQsZSl7dmFyIGY9YXJndW1lbnRzLmxlbmd0aCYmKGN8fFwiYm9vbGVhblwiIT10eXBlb2YgZCksZz1jfHwoZD09PSEwfHxlPT09ITA/XCJtYXJnaW5cIjpcImJvcmRlclwiKTtyZXR1cm4gSih0aGlzLGZ1bmN0aW9uKGIsYyxkKXt2YXIgZTtyZXR1cm4gbi5pc1dpbmRvdyhiKT9iLmRvY3VtZW50LmRvY3VtZW50RWxlbWVudFtcImNsaWVudFwiK2FdOjk9PT1iLm5vZGVUeXBlPyhlPWIuZG9jdW1lbnRFbGVtZW50LE1hdGgubWF4KGIuYm9keVtcInNjcm9sbFwiK2FdLGVbXCJzY3JvbGxcIithXSxiLmJvZHlbXCJvZmZzZXRcIithXSxlW1wib2Zmc2V0XCIrYV0sZVtcImNsaWVudFwiK2FdKSk6dm9pZCAwPT09ZD9uLmNzcyhiLGMsZyk6bi5zdHlsZShiLGMsZCxnKX0sYixmP2Q6dm9pZCAwLGYsbnVsbCl9fSl9KSxuLmZuLnNpemU9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5sZW5ndGh9LG4uZm4uYW5kU2VsZj1uLmZuLmFkZEJhY2ssXCJmdW5jdGlvblwiPT10eXBlb2YgZGVmaW5lJiZkZWZpbmUuYW1kJiZkZWZpbmUoXCJqcXVlcnlcIixbXSxmdW5jdGlvbigpe3JldHVybiBufSk7dmFyIEtiPWEualF1ZXJ5LExiPWEuJDtyZXR1cm4gbi5ub0NvbmZsaWN0PWZ1bmN0aW9uKGIpe3JldHVybiBhLiQ9PT1uJiYoYS4kPUxiKSxiJiZhLmpRdWVyeT09PW4mJihhLmpRdWVyeT1LYiksbn0sdHlwZW9mIGI9PT1VJiYoYS5qUXVlcnk9YS4kPW4pLG59KTtcclxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9anF1ZXJ5Lm1pbi5tYXBcclxuIC8qXHJcbiAqICMgU2VtYW50aWMgVUkgLSAyLjEuNFxyXG4gKiBodHRwczovL2dpdGh1Yi5jb20vU2VtYW50aWMtT3JnL1NlbWFudGljLVVJXHJcbiAqIGh0dHA6Ly93d3cuc2VtYW50aWMtdWkuY29tL1xyXG4gKlxyXG4gKiBDb3B5cmlnaHQgMjAxNCBDb250cmlidXRvcnNcclxuICogUmVsZWFzZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlXHJcbiAqIGh0dHA6Ly9vcGVuc291cmNlLm9yZy9saWNlbnNlcy9NSVRcclxuICpcclxuICovXHJcbiFmdW5jdGlvbihlLHQsbixpKXtlLnNpdGU9ZS5mbi5zaXRlPWZ1bmN0aW9uKG8pe3ZhciBhLHIscz0obmV3IERhdGUpLmdldFRpbWUoKSxjPVtdLGw9YXJndW1lbnRzWzBdLHU9XCJzdHJpbmdcIj09dHlwZW9mIGwsZD1bXS5zbGljZS5jYWxsKGFyZ3VtZW50cywxKSxtPWUuaXNQbGFpbk9iamVjdChvKT9lLmV4dGVuZCghMCx7fSxlLnNpdGUuc2V0dGluZ3Msbyk6ZS5leHRlbmQoe30sZS5zaXRlLnNldHRpbmdzKSxmPW0ubmFtZXNwYWNlLGc9bS5lcnJvcixwPVwibW9kdWxlLVwiK2Ysdj1lKG4pLGg9dixiPXRoaXMseT1oLmRhdGEocCk7cmV0dXJuIGE9e2luaXRpYWxpemU6ZnVuY3Rpb24oKXthLmluc3RhbnRpYXRlKCl9LGluc3RhbnRpYXRlOmZ1bmN0aW9uKCl7YS52ZXJib3NlKFwiU3RvcmluZyBpbnN0YW5jZSBvZiBzaXRlXCIsYSkseT1hLGguZGF0YShwLGEpfSxub3JtYWxpemU6ZnVuY3Rpb24oKXthLmZpeC5jb25zb2xlKCksYS5maXgucmVxdWVzdEFuaW1hdGlvbkZyYW1lKCl9LGZpeDp7Y29uc29sZTpmdW5jdGlvbigpe2EuZGVidWcoXCJOb3JtYWxpemluZyB3aW5kb3cuY29uc29sZVwiKSwoY29uc29sZT09PWl8fGNvbnNvbGUubG9nPT09aSkmJihhLnZlcmJvc2UoXCJDb25zb2xlIG5vdCBhdmFpbGFibGUsIG5vcm1hbGl6aW5nIGV2ZW50c1wiKSxhLmRpc2FibGUuY29uc29sZSgpKSwoXCJ1bmRlZmluZWRcIj09dHlwZW9mIGNvbnNvbGUuZ3JvdXB8fFwidW5kZWZpbmVkXCI9PXR5cGVvZiBjb25zb2xlLmdyb3VwRW5kfHxcInVuZGVmaW5lZFwiPT10eXBlb2YgY29uc29sZS5ncm91cENvbGxhcHNlZCkmJihhLnZlcmJvc2UoXCJDb25zb2xlIGdyb3VwIG5vdCBhdmFpbGFibGUsIG5vcm1hbGl6aW5nIGV2ZW50c1wiKSx0LmNvbnNvbGUuZ3JvdXA9ZnVuY3Rpb24oKXt9LHQuY29uc29sZS5ncm91cEVuZD1mdW5jdGlvbigpe30sdC5jb25zb2xlLmdyb3VwQ29sbGFwc2VkPWZ1bmN0aW9uKCl7fSksXCJ1bmRlZmluZWRcIj09dHlwZW9mIGNvbnNvbGUubWFya1RpbWVsaW5lJiYoYS52ZXJib3NlKFwiTWFyayB0aW1lbGluZSBub3QgYXZhaWxhYmxlLCBub3JtYWxpemluZyBldmVudHNcIiksdC5jb25zb2xlLm1hcmtUaW1lbGluZT1mdW5jdGlvbigpe30pfSxjb25zb2xlQ2xlYXI6ZnVuY3Rpb24oKXthLmRlYnVnKFwiRGlzYWJsaW5nIHByb2dyYW1tYXRpYyBjb25zb2xlIGNsZWFyaW5nXCIpLHQuY29uc29sZS5jbGVhcj1mdW5jdGlvbigpe319LHJlcXVlc3RBbmltYXRpb25GcmFtZTpmdW5jdGlvbigpe2EuZGVidWcoXCJOb3JtYWxpemluZyByZXF1ZXN0QW5pbWF0aW9uRnJhbWVcIiksdC5yZXF1ZXN0QW5pbWF0aW9uRnJhbWU9PT1pJiYoYS5kZWJ1ZyhcIlJlcXVlc3RBbmltYXRpb25GcmFtZSBub3QgYXZhaWxhYmxlLCBub3JtYWxpemluZyBldmVudFwiKSx0LnJlcXVlc3RBbmltYXRpb25GcmFtZT10LnJlcXVlc3RBbmltYXRpb25GcmFtZXx8dC5tb3pSZXF1ZXN0QW5pbWF0aW9uRnJhbWV8fHQud2Via2l0UmVxdWVzdEFuaW1hdGlvbkZyYW1lfHx0Lm1zUmVxdWVzdEFuaW1hdGlvbkZyYW1lfHxmdW5jdGlvbihlKXtzZXRUaW1lb3V0KGUsMCl9KX19LG1vZHVsZUV4aXN0czpmdW5jdGlvbih0KXtyZXR1cm4gZS5mblt0XSE9PWkmJmUuZm5bdF0uc2V0dGluZ3MhPT1pfSxlbmFibGVkOnttb2R1bGVzOmZ1bmN0aW9uKHQpe3ZhciBuPVtdO3JldHVybiB0PXR8fG0ubW9kdWxlcyxlLmVhY2godCxmdW5jdGlvbihlLHQpe2EubW9kdWxlRXhpc3RzKHQpJiZuLnB1c2godCl9KSxufX0sZGlzYWJsZWQ6e21vZHVsZXM6ZnVuY3Rpb24odCl7dmFyIG49W107cmV0dXJuIHQ9dHx8bS5tb2R1bGVzLGUuZWFjaCh0LGZ1bmN0aW9uKGUsdCl7YS5tb2R1bGVFeGlzdHModCl8fG4ucHVzaCh0KX0pLG59fSxjaGFuZ2U6e3NldHRpbmc6ZnVuY3Rpb24odCxuLG8scil7bz1cInN0cmluZ1wiPT10eXBlb2Ygbz9cImFsbFwiPT09bz9tLm1vZHVsZXM6W29dOm98fG0ubW9kdWxlcyxyPXIhPT1pP3I6ITAsZS5lYWNoKG8sZnVuY3Rpb24oaSxvKXt2YXIgcyxjPWEubW9kdWxlRXhpc3RzKG8pP2UuZm5bb10uc2V0dGluZ3MubmFtZXNwYWNlfHwhMTohMDthLm1vZHVsZUV4aXN0cyhvKSYmKGEudmVyYm9zZShcIkNoYW5naW5nIGRlZmF1bHQgc2V0dGluZ1wiLHQsbixvKSxlLmZuW29dLnNldHRpbmdzW3RdPW4sciYmYyYmKHM9ZShcIjpkYXRhKG1vZHVsZS1cIitjK1wiKVwiKSxzLmxlbmd0aD4wJiYoYS52ZXJib3NlKFwiTW9kaWZ5aW5nIGV4aXN0aW5nIHNldHRpbmdzXCIscyksc1tvXShcInNldHRpbmdcIix0LG4pKSkpfSl9LHNldHRpbmdzOmZ1bmN0aW9uKHQsbixvKXtuPVwic3RyaW5nXCI9PXR5cGVvZiBuP1tuXTpufHxtLm1vZHVsZXMsbz1vIT09aT9vOiEwLGUuZWFjaChuLGZ1bmN0aW9uKG4saSl7dmFyIHI7YS5tb2R1bGVFeGlzdHMoaSkmJihhLnZlcmJvc2UoXCJDaGFuZ2luZyBkZWZhdWx0IHNldHRpbmdcIix0LGkpLGUuZXh0ZW5kKCEwLGUuZm5baV0uc2V0dGluZ3MsdCksbyYmZiYmKHI9ZShcIjpkYXRhKG1vZHVsZS1cIitmK1wiKVwiKSxyLmxlbmd0aD4wJiYoYS52ZXJib3NlKFwiTW9kaWZ5aW5nIGV4aXN0aW5nIHNldHRpbmdzXCIscikscltpXShcInNldHRpbmdcIix0KSkpKX0pfX0sZW5hYmxlOntjb25zb2xlOmZ1bmN0aW9uKCl7YS5jb25zb2xlKCEwKX0sZGVidWc6ZnVuY3Rpb24oZSx0KXtlPWV8fG0ubW9kdWxlcyxhLmRlYnVnKFwiRW5hYmxpbmcgZGVidWcgZm9yIG1vZHVsZXNcIixlKSxhLmNoYW5nZS5zZXR0aW5nKFwiZGVidWdcIiwhMCxlLHQpfSx2ZXJib3NlOmZ1bmN0aW9uKGUsdCl7ZT1lfHxtLm1vZHVsZXMsYS5kZWJ1ZyhcIkVuYWJsaW5nIHZlcmJvc2UgZGVidWcgZm9yIG1vZHVsZXNcIixlKSxhLmNoYW5nZS5zZXR0aW5nKFwidmVyYm9zZVwiLCEwLGUsdCl9fSxkaXNhYmxlOntjb25zb2xlOmZ1bmN0aW9uKCl7YS5jb25zb2xlKCExKX0sZGVidWc6ZnVuY3Rpb24oZSx0KXtlPWV8fG0ubW9kdWxlcyxhLmRlYnVnKFwiRGlzYWJsaW5nIGRlYnVnIGZvciBtb2R1bGVzXCIsZSksYS5jaGFuZ2Uuc2V0dGluZyhcImRlYnVnXCIsITEsZSx0KX0sdmVyYm9zZTpmdW5jdGlvbihlLHQpe2U9ZXx8bS5tb2R1bGVzLGEuZGVidWcoXCJEaXNhYmxpbmcgdmVyYm9zZSBkZWJ1ZyBmb3IgbW9kdWxlc1wiLGUpLGEuY2hhbmdlLnNldHRpbmcoXCJ2ZXJib3NlXCIsITEsZSx0KX19LGNvbnNvbGU6ZnVuY3Rpb24oZSl7aWYoZSl7aWYoeS5jYWNoZS5jb25zb2xlPT09aSlyZXR1cm4gdm9pZCBhLmVycm9yKGcuY29uc29sZSk7YS5kZWJ1ZyhcIlJlc3RvcmluZyBjb25zb2xlIGZ1bmN0aW9uXCIpLHQuY29uc29sZT15LmNhY2hlLmNvbnNvbGV9ZWxzZSBhLmRlYnVnKFwiRGlzYWJsaW5nIGNvbnNvbGUgZnVuY3Rpb25cIikseS5jYWNoZS5jb25zb2xlPXQuY29uc29sZSx0LmNvbnNvbGU9e2NsZWFyOmZ1bmN0aW9uKCl7fSxlcnJvcjpmdW5jdGlvbigpe30sZ3JvdXA6ZnVuY3Rpb24oKXt9LGdyb3VwQ29sbGFwc2VkOmZ1bmN0aW9uKCl7fSxncm91cEVuZDpmdW5jdGlvbigpe30saW5mbzpmdW5jdGlvbigpe30sbG9nOmZ1bmN0aW9uKCl7fSxtYXJrVGltZWxpbmU6ZnVuY3Rpb24oKXt9LHdhcm46ZnVuY3Rpb24oKXt9fX0sZGVzdHJveTpmdW5jdGlvbigpe2EudmVyYm9zZShcIkRlc3Ryb3lpbmcgcHJldmlvdXMgc2l0ZSBmb3JcIixoKSxoLnJlbW92ZURhdGEocCl9LGNhY2hlOnt9LHNldHRpbmc6ZnVuY3Rpb24odCxuKXtpZihlLmlzUGxhaW5PYmplY3QodCkpZS5leHRlbmQoITAsbSx0KTtlbHNle2lmKG49PT1pKXJldHVybiBtW3RdO21bdF09bn19LGludGVybmFsOmZ1bmN0aW9uKHQsbil7aWYoZS5pc1BsYWluT2JqZWN0KHQpKWUuZXh0ZW5kKCEwLGEsdCk7ZWxzZXtpZihuPT09aSlyZXR1cm4gYVt0XTthW3RdPW59fSxkZWJ1ZzpmdW5jdGlvbigpe20uZGVidWcmJihtLnBlcmZvcm1hbmNlP2EucGVyZm9ybWFuY2UubG9nKGFyZ3VtZW50cyk6KGEuZGVidWc9RnVuY3Rpb24ucHJvdG90eXBlLmJpbmQuY2FsbChjb25zb2xlLmluZm8sY29uc29sZSxtLm5hbWUrXCI6XCIpLGEuZGVidWcuYXBwbHkoY29uc29sZSxhcmd1bWVudHMpKSl9LHZlcmJvc2U6ZnVuY3Rpb24oKXttLnZlcmJvc2UmJm0uZGVidWcmJihtLnBlcmZvcm1hbmNlP2EucGVyZm9ybWFuY2UubG9nKGFyZ3VtZW50cyk6KGEudmVyYm9zZT1GdW5jdGlvbi5wcm90b3R5cGUuYmluZC5jYWxsKGNvbnNvbGUuaW5mbyxjb25zb2xlLG0ubmFtZStcIjpcIiksYS52ZXJib3NlLmFwcGx5KGNvbnNvbGUsYXJndW1lbnRzKSkpfSxlcnJvcjpmdW5jdGlvbigpe2EuZXJyb3I9RnVuY3Rpb24ucHJvdG90eXBlLmJpbmQuY2FsbChjb25zb2xlLmVycm9yLGNvbnNvbGUsbS5uYW1lK1wiOlwiKSxhLmVycm9yLmFwcGx5KGNvbnNvbGUsYXJndW1lbnRzKX0scGVyZm9ybWFuY2U6e2xvZzpmdW5jdGlvbihlKXt2YXIgdCxuLGk7bS5wZXJmb3JtYW5jZSYmKHQ9KG5ldyBEYXRlKS5nZXRUaW1lKCksaT1zfHx0LG49dC1pLHM9dCxjLnB1c2goe0VsZW1lbnQ6YixOYW1lOmVbMF0sQXJndW1lbnRzOltdLnNsaWNlLmNhbGwoZSwxKXx8XCJcIixcIkV4ZWN1dGlvbiBUaW1lXCI6bn0pKSxjbGVhclRpbWVvdXQoYS5wZXJmb3JtYW5jZS50aW1lciksYS5wZXJmb3JtYW5jZS50aW1lcj1zZXRUaW1lb3V0KGEucGVyZm9ybWFuY2UuZGlzcGxheSw1MDApfSxkaXNwbGF5OmZ1bmN0aW9uKCl7dmFyIHQ9bS5uYW1lK1wiOlwiLG49MDtzPSExLGNsZWFyVGltZW91dChhLnBlcmZvcm1hbmNlLnRpbWVyKSxlLmVhY2goYyxmdW5jdGlvbihlLHQpe24rPXRbXCJFeGVjdXRpb24gVGltZVwiXX0pLHQrPVwiIFwiK24rXCJtc1wiLChjb25zb2xlLmdyb3VwIT09aXx8Y29uc29sZS50YWJsZSE9PWkpJiZjLmxlbmd0aD4wJiYoY29uc29sZS5ncm91cENvbGxhcHNlZCh0KSxjb25zb2xlLnRhYmxlP2NvbnNvbGUudGFibGUoYyk6ZS5lYWNoKGMsZnVuY3Rpb24oZSx0KXtjb25zb2xlLmxvZyh0Lk5hbWUrXCI6IFwiK3RbXCJFeGVjdXRpb24gVGltZVwiXStcIm1zXCIpfSksY29uc29sZS5ncm91cEVuZCgpKSxjPVtdfX0saW52b2tlOmZ1bmN0aW9uKHQsbixvKXt2YXIgcyxjLGwsdT15O3JldHVybiBuPW58fGQsbz1ifHxvLFwic3RyaW5nXCI9PXR5cGVvZiB0JiZ1IT09aSYmKHQ9dC5zcGxpdCgvW1xcLiBdLykscz10Lmxlbmd0aC0xLGUuZWFjaCh0LGZ1bmN0aW9uKG4sbyl7dmFyIHI9biE9cz9vK3RbbisxXS5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSt0W24rMV0uc2xpY2UoMSk6dDtpZihlLmlzUGxhaW5PYmplY3QodVtyXSkmJm4hPXMpdT11W3JdO2Vsc2V7aWYodVtyXSE9PWkpcmV0dXJuIGM9dVtyXSwhMTtpZighZS5pc1BsYWluT2JqZWN0KHVbb10pfHxuPT1zKXJldHVybiB1W29dIT09aT8oYz11W29dLCExKTooYS5lcnJvcihnLm1ldGhvZCx0KSwhMSk7dT11W29dfX0pKSxlLmlzRnVuY3Rpb24oYyk/bD1jLmFwcGx5KG8sbik6YyE9PWkmJihsPWMpLGUuaXNBcnJheShyKT9yLnB1c2gobCk6ciE9PWk/cj1bcixsXTpsIT09aSYmKHI9bCksY319LHU/KHk9PT1pJiZhLmluaXRpYWxpemUoKSxhLmludm9rZShsKSk6KHkhPT1pJiZhLmRlc3Ryb3koKSxhLmluaXRpYWxpemUoKSksciE9PWk/cjp0aGlzfSxlLnNpdGUuc2V0dGluZ3M9e25hbWU6XCJTaXRlXCIsbmFtZXNwYWNlOlwic2l0ZVwiLGVycm9yOntjb25zb2xlOlwiQ29uc29sZSBjYW5ub3QgYmUgcmVzdG9yZWQsIG1vc3QgbGlrZWx5IGl0IHdhcyBvdmVyd3JpdHRlbiBvdXRzaWRlIG9mIG1vZHVsZVwiLG1ldGhvZDpcIlRoZSBtZXRob2QgeW91IGNhbGxlZCBpcyBub3QgZGVmaW5lZC5cIn0sZGVidWc6ITEsdmVyYm9zZTohMSxwZXJmb3JtYW5jZTohMCxtb2R1bGVzOltcImFjY29yZGlvblwiLFwiYXBpXCIsXCJjaGVja2JveFwiLFwiZGltbWVyXCIsXCJkcm9wZG93blwiLFwiZW1iZWRcIixcImZvcm1cIixcIm1vZGFsXCIsXCJuYWdcIixcInBvcHVwXCIsXCJyYXRpbmdcIixcInNoYXBlXCIsXCJzaWRlYmFyXCIsXCJzdGF0ZVwiLFwic3RpY2t5XCIsXCJ0YWJcIixcInRyYW5zaXRpb25cIixcInZpc2l0XCIsXCJ2aXNpYmlsaXR5XCJdLHNpdGVOYW1lc3BhY2U6XCJzaXRlXCIsbmFtZXNwYWNlU3R1Yjp7Y2FjaGU6e30sY29uZmlnOnt9LHNlY3Rpb25zOnt9LHNlY3Rpb246e30sdXRpbGl0aWVzOnt9fX0sZS5leHRlbmQoZS5leHByW1wiOlwiXSx7ZGF0YTplLmV4cHIuY3JlYXRlUHNldWRvP2UuZXhwci5jcmVhdGVQc2V1ZG8oZnVuY3Rpb24odCl7cmV0dXJuIGZ1bmN0aW9uKG4pe3JldHVybiEhZS5kYXRhKG4sdCl9fSk6ZnVuY3Rpb24odCxuLGkpe3JldHVybiEhZS5kYXRhKHQsaVszXSl9fSl9KGpRdWVyeSx3aW5kb3csZG9jdW1lbnQpLGZ1bmN0aW9uKGUsdCxuLGkpe1widXNlIHN0cmljdFwiO2UuZm4uZm9ybT1mdW5jdGlvbih0KXt2YXIgbyxhPWUodGhpcykscj1hLnNlbGVjdG9yfHxcIlwiLHM9KG5ldyBEYXRlKS5nZXRUaW1lKCksYz1bXSxsPWFyZ3VtZW50c1swXSx1PWFyZ3VtZW50c1sxXSxkPVwic3RyaW5nXCI9PXR5cGVvZiBsLG09W10uc2xpY2UuY2FsbChhcmd1bWVudHMsMSk7cmV0dXJuIGEuZWFjaChmdW5jdGlvbigpe3ZhciBmLGcscCx2LGgsYix5LHgsQyx3LGssUyxULEEsUixQLEUsRixEPWUodGhpcyksTz10aGlzLHE9W10saj0hMTtGPXtpbml0aWFsaXplOmZ1bmN0aW9uKCl7Ri5nZXQuc2V0dGluZ3MoKSxkPyhFPT09aSYmRi5pbnN0YW50aWF0ZSgpLEYuaW52b2tlKGwpKTooRi52ZXJib3NlKFwiSW5pdGlhbGl6aW5nIGZvcm0gdmFsaWRhdGlvblwiLEQseCksRi5iaW5kRXZlbnRzKCksRi5zZXQuZGVmYXVsdHMoKSxGLmluc3RhbnRpYXRlKCkpfSxpbnN0YW50aWF0ZTpmdW5jdGlvbigpe0YudmVyYm9zZShcIlN0b3JpbmcgaW5zdGFuY2Ugb2YgbW9kdWxlXCIsRiksRT1GLEQuZGF0YShSLEYpfSxkZXN0cm95OmZ1bmN0aW9uKCl7Ri52ZXJib3NlKFwiRGVzdHJveWluZyBwcmV2aW91cyBtb2R1bGVcIixFKSxGLnJlbW92ZUV2ZW50cygpLEQucmVtb3ZlRGF0YShSKX0scmVmcmVzaDpmdW5jdGlvbigpe0YudmVyYm9zZShcIlJlZnJlc2hpbmcgc2VsZWN0b3IgY2FjaGVcIiksZj1ELmZpbmQoay5maWVsZCksZz1ELmZpbmQoay5ncm91cCkscD1ELmZpbmQoay5tZXNzYWdlKSx2PUQuZmluZChrLnByb21wdCksaD1ELmZpbmQoay5zdWJtaXQpLGI9RC5maW5kKGsuY2xlYXIpLHk9RC5maW5kKGsucmVzZXQpfSxzdWJtaXQ6ZnVuY3Rpb24oKXtGLnZlcmJvc2UoXCJTdWJtaXR0aW5nIGZvcm1cIixEKSxELnN1Ym1pdCgpfSxhdHRhY2hFdmVudHM6ZnVuY3Rpb24odCxuKXtuPW58fFwic3VibWl0XCIsZSh0KS5vbihcImNsaWNrXCIrUCxmdW5jdGlvbihlKXtGW25dKCksZS5wcmV2ZW50RGVmYXVsdCgpfSl9LGJpbmRFdmVudHM6ZnVuY3Rpb24oKXtGLnZlcmJvc2UoXCJBdHRhY2hpbmcgZm9ybSBldmVudHNcIiksRC5vbihcInN1Ym1pdFwiK1AsRi52YWxpZGF0ZS5mb3JtKS5vbihcImJsdXJcIitQLGsuZmllbGQsRi5ldmVudC5maWVsZC5ibHVyKS5vbihcImNsaWNrXCIrUCxrLnN1Ym1pdCxGLnN1Ym1pdCkub24oXCJjbGlja1wiK1Asay5yZXNldCxGLnJlc2V0KS5vbihcImNsaWNrXCIrUCxrLmNsZWFyLEYuY2xlYXIpLHgua2V5Ym9hcmRTaG9ydGN1dHMmJkQub24oXCJrZXlkb3duXCIrUCxrLmZpZWxkLEYuZXZlbnQuZmllbGQua2V5ZG93biksZi5lYWNoKGZ1bmN0aW9uKCl7dmFyIHQ9ZSh0aGlzKSxuPXQucHJvcChcInR5cGVcIiksaT1GLmdldC5jaGFuZ2VFdmVudChuLHQpO2UodGhpcykub24oaStQLEYuZXZlbnQuZmllbGQuY2hhbmdlKX0pfSxjbGVhcjpmdW5jdGlvbigpe2YuZWFjaChmdW5jdGlvbigpe3ZhciB0PWUodGhpcyksbj10LnBhcmVudCgpLGk9dC5jbG9zZXN0KGcpLG89aS5maW5kKGsucHJvbXB0KSxhPXQuZGF0YSh3LmRlZmF1bHRWYWx1ZSl8fFwiXCIscj1uLmlzKGsudWlDaGVja2JveCkscz1uLmlzKGsudWlEcm9wZG93biksYz1pLmhhc0NsYXNzKFMuZXJyb3IpO2MmJihGLnZlcmJvc2UoXCJSZXNldHRpbmcgZXJyb3Igb24gZmllbGRcIixpKSxpLnJlbW92ZUNsYXNzKFMuZXJyb3IpLG8ucmVtb3ZlKCkpLHM/KEYudmVyYm9zZShcIlJlc2V0dGluZyBkcm9wZG93biB2YWx1ZVwiLG4sYSksbi5kcm9wZG93bihcImNsZWFyXCIpKTpyP3QucHJvcChcImNoZWNrZWRcIiwhMSk6KEYudmVyYm9zZShcIlJlc2V0dGluZyBmaWVsZCB2YWx1ZVwiLHQsYSksdC52YWwoXCJcIikpfSl9LHJlc2V0OmZ1bmN0aW9uKCl7Zi5lYWNoKGZ1bmN0aW9uKCl7dmFyIHQ9ZSh0aGlzKSxuPXQucGFyZW50KCksbz10LmNsb3Nlc3QoZyksYT1vLmZpbmQoay5wcm9tcHQpLHI9dC5kYXRhKHcuZGVmYXVsdFZhbHVlKSxzPW4uaXMoay51aUNoZWNrYm94KSxjPW4uaXMoay51aURyb3Bkb3duKSxsPW8uaGFzQ2xhc3MoUy5lcnJvcik7ciE9PWkmJihsJiYoRi52ZXJib3NlKFwiUmVzZXR0aW5nIGVycm9yIG9uIGZpZWxkXCIsbyksby5yZW1vdmVDbGFzcyhTLmVycm9yKSxhLnJlbW92ZSgpKSxjPyhGLnZlcmJvc2UoXCJSZXNldHRpbmcgZHJvcGRvd24gdmFsdWVcIixuLHIpLG4uZHJvcGRvd24oXCJyZXN0b3JlIGRlZmF1bHRzXCIpKTpzPyhGLnZlcmJvc2UoXCJSZXNldHRpbmcgY2hlY2tib3ggdmFsdWVcIixuLHIpLHQucHJvcChcImNoZWNrZWRcIixyKSk6KEYudmVyYm9zZShcIlJlc2V0dGluZyBmaWVsZCB2YWx1ZVwiLHQsciksdC52YWwocikpKX0pfSxpczp7YnJhY2tldGVkUnVsZTpmdW5jdGlvbihlKXtyZXR1cm4gZS50eXBlJiZlLnR5cGUubWF0Y2goeC5yZWdFeHAuYnJhY2tldCl9LHZhbGlkOmZ1bmN0aW9uKCl7dmFyIHQ9ITA7cmV0dXJuIEYudmVyYm9zZShcIkNoZWNraW5nIGlmIGZvcm0gaXMgdmFsaWRcIiksZS5lYWNoKEMsZnVuY3Rpb24oZSxuKXtGLnZhbGlkYXRlLmZpZWxkKG4sZSl8fCh0PSExKX0pLHR9fSxyZW1vdmVFdmVudHM6ZnVuY3Rpb24oKXtELm9mZihQKSxmLm9mZihQKSxoLm9mZihQKSxmLm9mZihQKX0sZXZlbnQ6e2ZpZWxkOntrZXlkb3duOmZ1bmN0aW9uKHQpe3ZhciBuPWUodGhpcyksaT10LndoaWNoLG89e2VudGVyOjEzLGVzY2FwZToyN307aT09by5lc2NhcGUmJihGLnZlcmJvc2UoXCJFc2NhcGUga2V5IHByZXNzZWQgYmx1cnJpbmcgZmllbGRcIiksbi5ibHVyKCkpLCF0LmN0cmxLZXkmJmk9PW8uZW50ZXImJm4uaXMoay5pbnB1dCkmJm4ubm90KGsuY2hlY2tib3gpLmxlbmd0aD4wJiYoanx8KG4ub25lKFwia2V5dXBcIitQLEYuZXZlbnQuZmllbGQua2V5dXApLEYuc3VibWl0KCksRi5kZWJ1ZyhcIkVudGVyIHByZXNzZWQgb24gaW5wdXQgc3VibWl0dGluZyBmb3JtXCIpKSxqPSEwKX0sa2V5dXA6ZnVuY3Rpb24oKXtqPSExfSxibHVyOmZ1bmN0aW9uKHQpe3ZhciBuPWUodGhpcyksaT1uLmNsb3Nlc3QoZyksbz1GLmdldC52YWxpZGF0aW9uKG4pO2kuaGFzQ2xhc3MoUy5lcnJvcik/KEYuZGVidWcoXCJSZXZhbGlkYXRpbmcgZmllbGRcIixuLG8pLEYudmFsaWRhdGUuZm9ybS5jYWxsKEYsdCwhMCkpOihcImJsdXJcIj09eC5vbnx8XCJjaGFuZ2VcIj09eC5vbikmJkYudmFsaWRhdGUuZmllbGQobyl9LGNoYW5nZTpmdW5jdGlvbih0KXt2YXIgbj1lKHRoaXMpLGk9bi5jbG9zZXN0KGcpOyhcImNoYW5nZVwiPT14Lm9ufHxpLmhhc0NsYXNzKFMuZXJyb3IpJiZ4LnJldmFsaWRhdGUpJiYoY2xlYXJUaW1lb3V0KEYudGltZXIpLEYudGltZXI9c2V0VGltZW91dChmdW5jdGlvbigpe0YuZGVidWcoXCJSZXZhbGlkYXRpbmcgZmllbGRcIixuLEYuZ2V0LnZhbGlkYXRpb24obikpLEYudmFsaWRhdGUuZm9ybS5jYWxsKEYsdCwhMCl9LHguZGVsYXkpKX19fSxnZXQ6e2FuY2lsbGFyeVZhbHVlOmZ1bmN0aW9uKGUpe3JldHVybiBlLnR5cGUmJkYuaXMuYnJhY2tldGVkUnVsZShlKT9lLnR5cGUubWF0Y2goeC5yZWdFeHAuYnJhY2tldClbMV0rXCJcIjohMX0scnVsZU5hbWU6ZnVuY3Rpb24oZSl7cmV0dXJuIEYuaXMuYnJhY2tldGVkUnVsZShlKT9lLnR5cGUucmVwbGFjZShlLnR5cGUubWF0Y2goeC5yZWdFeHAuYnJhY2tldClbMF0sXCJcIik6ZS50eXBlfSxjaGFuZ2VFdmVudDpmdW5jdGlvbihlLHQpe3JldHVyblwiY2hlY2tib3hcIj09ZXx8XCJyYWRpb1wiPT1lfHxcImhpZGRlblwiPT1lfHx0LmlzKFwic2VsZWN0XCIpP1wiY2hhbmdlXCI6Ri5nZXQuaW5wdXRFdmVudCgpfSxpbnB1dEV2ZW50OmZ1bmN0aW9uKCl7cmV0dXJuIG4uY3JlYXRlRWxlbWVudChcImlucHV0XCIpLm9uaW5wdXQhPT1pP1wiaW5wdXRcIjpuLmNyZWF0ZUVsZW1lbnQoXCJpbnB1dFwiKS5vbnByb3BlcnR5Y2hhbmdlIT09aT9cInByb3BlcnR5Y2hhbmdlXCI6XCJrZXl1cFwifSxwcm9tcHQ6ZnVuY3Rpb24oZSx0KXt2YXIgbixpLG8sYT1GLmdldC5ydWxlTmFtZShlKSxyPUYuZ2V0LmFuY2lsbGFyeVZhbHVlKGUpLHM9ZS5wcm9tcHR8fHgucHJvbXB0W2FdfHx4LnRleHQudW5zcGVjaWZpZWRSdWxlLGM9LTEhPT1zLnNlYXJjaChcInt2YWx1ZX1cIiksbD0tMSE9PXMuc2VhcmNoKFwie25hbWV9XCIpO3JldHVybihsfHxjKSYmKGk9Ri5nZXQuZmllbGQodC5pZGVudGlmaWVyKSksYyYmKHM9cy5yZXBsYWNlKFwie3ZhbHVlfVwiLGkudmFsKCkpKSxsJiYobj1pLmNsb3Nlc3Qoay5ncm91cCkuZmluZChcImxhYmVsXCIpLmVxKDApLG89MT09bi5zaXplKCk/bi50ZXh0KCk6aS5wcm9wKFwicGxhY2Vob2xkZXJcIil8fHgudGV4dC51bnNwZWNpZmllZEZpZWxkLHM9cy5yZXBsYWNlKFwie25hbWV9XCIsbykpLHM9cy5yZXBsYWNlKFwie2lkZW50aWZpZXJ9XCIsdC5pZGVudGlmaWVyKSxzPXMucmVwbGFjZShcIntydWxlVmFsdWV9XCIsciksZS5wcm9tcHR8fEYudmVyYm9zZShcIlVzaW5nIGRlZmF1bHQgdmFsaWRhdGlvbiBwcm9tcHQgZm9yIHR5cGVcIixzLGEpLHN9LHNldHRpbmdzOmZ1bmN0aW9uKCl7aWYoZS5pc1BsYWluT2JqZWN0KHQpKXt2YXIgbixvPU9iamVjdC5rZXlzKHQpLGE9by5sZW5ndGg+MD90W29bMF1dLmlkZW50aWZpZXIhPT1pJiZ0W29bMF1dLnJ1bGVzIT09aTohMTthPyh4PWUuZXh0ZW5kKCEwLHt9LGUuZm4uZm9ybS5zZXR0aW5ncyx1KSxDPWUuZXh0ZW5kKHt9LGUuZm4uZm9ybS5zZXR0aW5ncy5kZWZhdWx0cyx0KSxGLmVycm9yKHguZXJyb3Iub2xkU3ludGF4LE8pLEYudmVyYm9zZShcIkV4dGVuZGluZyBzZXR0aW5ncyBmcm9tIGxlZ2FjeSBwYXJhbWV0ZXJzXCIsQyx4KSk6KHQuZmllbGRzJiYobj1PYmplY3Qua2V5cyh0LmZpZWxkcyksKFwic3RyaW5nXCI9PXR5cGVvZiB0LmZpZWxkc1tuWzBdXXx8ZS5pc0FycmF5KHQuZmllbGRzW25bMF1dKSkmJmUuZWFjaCh0LmZpZWxkcyxmdW5jdGlvbihuLGkpe1wic3RyaW5nXCI9PXR5cGVvZiBpJiYoaT1baV0pLHQuZmllbGRzW25dPXtydWxlczpbXX0sZS5lYWNoKGksZnVuY3Rpb24oZSxpKXt0LmZpZWxkc1tuXS5ydWxlcy5wdXNoKHt0eXBlOml9KX0pfSkpLHg9ZS5leHRlbmQoITAse30sZS5mbi5mb3JtLnNldHRpbmdzLHQpLEM9ZS5leHRlbmQoe30sZS5mbi5mb3JtLnNldHRpbmdzLmRlZmF1bHRzLHguZmllbGRzKSxGLnZlcmJvc2UoXCJFeHRlbmRpbmcgc2V0dGluZ3NcIixDLHgpKX1lbHNlIHg9ZS5mbi5mb3JtLnNldHRpbmdzLEM9ZS5mbi5mb3JtLnNldHRpbmdzLmRlZmF1bHRzLEYudmVyYm9zZShcIlVzaW5nIGRlZmF1bHQgZm9ybSB2YWxpZGF0aW9uXCIsQyx4KTtBPXgubmFtZXNwYWNlLHc9eC5tZXRhZGF0YSxrPXguc2VsZWN0b3IsUz14LmNsYXNzTmFtZSxUPXguZXJyb3IsUj1cIm1vZHVsZS1cIitBLFA9XCIuXCIrQSxFPUQuZGF0YShSKSxGLnJlZnJlc2goKX0sZmllbGQ6ZnVuY3Rpb24odCl7cmV0dXJuIEYudmVyYm9zZShcIkZpbmRpbmcgZmllbGQgd2l0aCBpZGVudGlmaWVyXCIsdCksZi5maWx0ZXIoXCIjXCIrdCkubGVuZ3RoPjA/Zi5maWx0ZXIoXCIjXCIrdCk6Zi5maWx0ZXIoJ1tuYW1lPVwiJyt0KydcIl0nKS5sZW5ndGg+MD9mLmZpbHRlcignW25hbWU9XCInK3QrJ1wiXScpOmYuZmlsdGVyKCdbbmFtZT1cIicrdCsnW11cIl0nKS5sZW5ndGg+MD9mLmZpbHRlcignW25hbWU9XCInK3QrJ1tdXCJdJyk6Zi5maWx0ZXIoXCJbZGF0YS1cIit3LnZhbGlkYXRlKyc9XCInK3QrJ1wiXScpLmxlbmd0aD4wP2YuZmlsdGVyKFwiW2RhdGEtXCIrdy52YWxpZGF0ZSsnPVwiJyt0KydcIl0nKTplKFwiPGlucHV0Lz5cIil9LGZpZWxkczpmdW5jdGlvbih0KXt2YXIgbj1lKCk7cmV0dXJuIGUuZWFjaCh0LGZ1bmN0aW9uKGUsdCl7bj1uLmFkZChGLmdldC5maWVsZCh0KSl9KSxufSx2YWxpZGF0aW9uOmZ1bmN0aW9uKHQpe3ZhciBuLGk7cmV0dXJuIEM/KGUuZWFjaChDLGZ1bmN0aW9uKGUsbyl7aT1vLmlkZW50aWZpZXJ8fGUsRi5nZXQuZmllbGQoaSlbMF09PXRbMF0mJihvLmlkZW50aWZpZXI9aSxuPW8pfSksbnx8ITEpOiExfSx2YWx1ZTpmdW5jdGlvbihlKXt2YXIgdCxuPVtdO3JldHVybiBuLnB1c2goZSksdD1GLmdldC52YWx1ZXMuY2FsbChPLG4pLHRbZV19LHZhbHVlczpmdW5jdGlvbih0KXt2YXIgbj1lLmlzQXJyYXkodCk/Ri5nZXQuZmllbGRzKHQpOmYsaT17fTtyZXR1cm4gbi5lYWNoKGZ1bmN0aW9uKHQsbil7dmFyIG89ZShuKSxhPShvLnByb3AoXCJ0eXBlXCIpLG8ucHJvcChcIm5hbWVcIikpLHI9by52YWwoKSxzPW8uaXMoay5jaGVja2JveCksYz1vLmlzKGsucmFkaW8pLGw9LTEhPT1hLmluZGV4T2YoXCJbXVwiKSx1PXM/by5pcyhcIjpjaGVja2VkXCIpOiExO2EmJihsPyhhPWEucmVwbGFjZShcIltdXCIsXCJcIiksaVthXXx8KGlbYV09W10pLGlbYV0ucHVzaChzP3U/cnx8ITA6ITE6cikpOmM/dSYmKGlbYV09cik6aVthXT1zP3U/cnx8ITA6ITE6cil9KSxpfX0saGFzOntmaWVsZDpmdW5jdGlvbihlKXtyZXR1cm4gRi52ZXJib3NlKFwiQ2hlY2tpbmcgZm9yIGV4aXN0ZW5jZSBvZiBhIGZpZWxkIHdpdGggaWRlbnRpZmllclwiLGUpLFwic3RyaW5nXCIhPXR5cGVvZiBlJiZGLmVycm9yKFQuaWRlbnRpZmllcixlKSxmLmZpbHRlcihcIiNcIitlKS5sZW5ndGg+MD8hMDpmLmZpbHRlcignW25hbWU9XCInK2UrJ1wiXScpLmxlbmd0aD4wPyEwOmYuZmlsdGVyKFwiW2RhdGEtXCIrdy52YWxpZGF0ZSsnPVwiJytlKydcIl0nKS5sZW5ndGg+MD8hMDohMX19LGFkZDp7cHJvbXB0OmZ1bmN0aW9uKHQsbil7dmFyIG89Ri5nZXQuZmllbGQodCksYT1vLmNsb3Nlc3QoZykscj1hLmNoaWxkcmVuKGsucHJvbXB0KSxzPTAhPT1yLmxlbmd0aDtuPVwic3RyaW5nXCI9PXR5cGVvZiBuP1tuXTpuLEYudmVyYm9zZShcIkFkZGluZyBmaWVsZCBlcnJvciBzdGF0ZVwiLHQpLGEuYWRkQ2xhc3MoUy5lcnJvcikseC5pbmxpbmUmJihzfHwocj14LnRlbXBsYXRlcy5wcm9tcHQobiksci5hcHBlbmRUbyhhKSksci5odG1sKG5bMF0pLHM/Ri52ZXJib3NlKFwiSW5saW5lIGVycm9ycyBhcmUgZGlzYWJsZWQsIG5vIGlubGluZSBlcnJvciBhZGRlZFwiLHQpOngudHJhbnNpdGlvbiYmZS5mbi50cmFuc2l0aW9uIT09aSYmRC50cmFuc2l0aW9uKFwiaXMgc3VwcG9ydGVkXCIpPyhGLnZlcmJvc2UoXCJEaXNwbGF5aW5nIGVycm9yIHdpdGggY3NzIHRyYW5zaXRpb25cIix4LnRyYW5zaXRpb24pLHIudHJhbnNpdGlvbih4LnRyYW5zaXRpb24rXCIgaW5cIix4LmR1cmF0aW9uKSk6KEYudmVyYm9zZShcIkRpc3BsYXlpbmcgZXJyb3Igd2l0aCBmYWxsYmFjayBqYXZhc2NyaXB0IGFuaW1hdGlvblwiKSxyLmZhZGVJbih4LmR1cmF0aW9uKSkpfSxlcnJvcnM6ZnVuY3Rpb24oZSl7Ri5kZWJ1ZyhcIkFkZGluZyBmb3JtIGVycm9yIG1lc3NhZ2VzXCIsZSksRi5zZXQuZXJyb3IoKSxwLmh0bWwoeC50ZW1wbGF0ZXMuZXJyb3IoZSkpfX0scmVtb3ZlOntwcm9tcHQ6ZnVuY3Rpb24odCl7dmFyIG49Ri5nZXQuZmllbGQodCksbz1uLmNsb3Nlc3QoZyksYT1vLmNoaWxkcmVuKGsucHJvbXB0KTtvLnJlbW92ZUNsYXNzKFMuZXJyb3IpLHguaW5saW5lJiZhLmlzKFwiOnZpc2libGVcIikmJihGLnZlcmJvc2UoXCJSZW1vdmluZyBwcm9tcHQgZm9yIGZpZWxkXCIsdCkseC50cmFuc2l0aW9uJiZlLmZuLnRyYW5zaXRpb24hPT1pJiZELnRyYW5zaXRpb24oXCJpcyBzdXBwb3J0ZWRcIik/YS50cmFuc2l0aW9uKHgudHJhbnNpdGlvbitcIiBvdXRcIix4LmR1cmF0aW9uLGZ1bmN0aW9uKCl7YS5yZW1vdmUoKX0pOmEuZmFkZU91dCh4LmR1cmF0aW9uLGZ1bmN0aW9uKCl7YS5yZW1vdmUoKX0pKX19LHNldDp7c3VjY2VzczpmdW5jdGlvbigpe0QucmVtb3ZlQ2xhc3MoUy5lcnJvcikuYWRkQ2xhc3MoUy5zdWNjZXNzKX0sZGVmYXVsdHM6ZnVuY3Rpb24oKXtmLmVhY2goZnVuY3Rpb24oKXt2YXIgdD1lKHRoaXMpLG49dC5maWx0ZXIoay5jaGVja2JveCkubGVuZ3RoPjAsaT1uP3QuaXMoXCI6Y2hlY2tlZFwiKTp0LnZhbCgpO3QuZGF0YSh3LmRlZmF1bHRWYWx1ZSxpKX0pfSxlcnJvcjpmdW5jdGlvbigpe0QucmVtb3ZlQ2xhc3MoUy5zdWNjZXNzKS5hZGRDbGFzcyhTLmVycm9yKX0sdmFsdWU6ZnVuY3Rpb24oZSx0KXt2YXIgbj17fTtyZXR1cm4gbltlXT10LEYuc2V0LnZhbHVlcy5jYWxsKE8sbil9LHZhbHVlczpmdW5jdGlvbih0KXtlLmlzRW1wdHlPYmplY3QodCl8fGUuZWFjaCh0LGZ1bmN0aW9uKHQsbil7dmFyIGksbz1GLmdldC5maWVsZCh0KSxhPW8ucGFyZW50KCkscj1lLmlzQXJyYXkobikscz1hLmlzKGsudWlDaGVja2JveCksYz1hLmlzKGsudWlEcm9wZG93biksbD1vLmlzKGsucmFkaW8pJiZzLHU9by5sZW5ndGg+MDt1JiYociYmcz8oRi52ZXJib3NlKFwiU2VsZWN0aW5nIG11bHRpcGxlXCIsbixvKSxhLmNoZWNrYm94KFwidW5jaGVja1wiKSxlLmVhY2gobixmdW5jdGlvbihlLHQpe2k9by5maWx0ZXIoJ1t2YWx1ZT1cIicrdCsnXCJdJyksYT1pLnBhcmVudCgpLGkubGVuZ3RoPjAmJmEuY2hlY2tib3goXCJjaGVja1wiKX0pKTpsPyhGLnZlcmJvc2UoXCJTZWxlY3RpbmcgcmFkaW8gdmFsdWVcIixuLG8pLG8uZmlsdGVyKCdbdmFsdWU9XCInK24rJ1wiXScpLnBhcmVudChrLnVpQ2hlY2tib3gpLmNoZWNrYm94KFwiY2hlY2tcIikpOnM/KEYudmVyYm9zZShcIlNldHRpbmcgY2hlY2tib3ggdmFsdWVcIixuLGEpLGEuY2hlY2tib3gobj09PSEwP1wiY2hlY2tcIjpcInVuY2hlY2tcIikpOmM/KEYudmVyYm9zZShcIlNldHRpbmcgZHJvcGRvd24gdmFsdWVcIixuLGEpLGEuZHJvcGRvd24oXCJzZXQgc2VsZWN0ZWRcIixuKSk6KEYudmVyYm9zZShcIlNldHRpbmcgZmllbGQgdmFsdWVcIixuLG8pLG8udmFsKG4pKSl9KX19LHZhbGlkYXRlOntmb3JtOmZ1bmN0aW9uKGUsdCl7dmFyIG49Ri5nZXQudmFsdWVzKCk7aWYoailyZXR1cm4hMTtpZihxPVtdLEYuaXMudmFsaWQoKSl7aWYoRi5kZWJ1ZyhcIkZvcm0gaGFzIG5vIHZhbGlkYXRpb24gZXJyb3JzLCBzdWJtaXR0aW5nXCIpLEYuc2V0LnN1Y2Nlc3MoKSx0IT09ITApcmV0dXJuIHgub25TdWNjZXNzLmNhbGwoTyxlLG4pfWVsc2UgaWYoRi5kZWJ1ZyhcIkZvcm0gaGFzIGVycm9yc1wiKSxGLnNldC5lcnJvcigpLHguaW5saW5lfHxGLmFkZC5lcnJvcnMocSksRC5kYXRhKFwibW9kdWxlQXBpXCIpIT09aSYmZS5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKSx0IT09ITApcmV0dXJuIHgub25GYWlsdXJlLmNhbGwoTyxxLG4pfSxmaWVsZDpmdW5jdGlvbih0LG4pe3ZhciBvPXQuaWRlbnRpZmllcnx8bixhPUYuZ2V0LmZpZWxkKG8pLHI9ITAscz1bXTtyZXR1cm4gdC5pZGVudGlmaWVyfHwoRi5kZWJ1ZyhcIlVzaW5nIGZpZWxkIG5hbWUgYXMgaWRlbnRpZmllclwiLG8pLHQuaWRlbnRpZmllcj1vKSxhLnByb3AoXCJkaXNhYmxlZFwiKT8oRi5kZWJ1ZyhcIkZpZWxkIGlzIGRpc2FibGVkLiBTa2lwcGluZ1wiLG8pLHI9ITApOnQub3B0aW9uYWwmJlwiXCI9PT1lLnRyaW0oYS52YWwoKSk/KEYuZGVidWcoXCJGaWVsZCBpcyBvcHRpb25hbCBhbmQgZW1wdHkuIFNraXBwaW5nXCIsbykscj0hMCk6dC5ydWxlcyE9PWkmJmUuZWFjaCh0LnJ1bGVzLGZ1bmN0aW9uKGUsbil7Ri5oYXMuZmllbGQobykmJiFGLnZhbGlkYXRlLnJ1bGUodCxuKSYmKEYuZGVidWcoXCJGaWVsZCBpcyBpbnZhbGlkXCIsbyxuLnR5cGUpLHMucHVzaChGLmdldC5wcm9tcHQobix0KSkscj0hMSl9KSxyPyhGLnJlbW92ZS5wcm9tcHQobyxzKSx4Lm9uVmFsaWQuY2FsbChhKSwhMCk6KHE9cS5jb25jYXQocyksRi5hZGQucHJvbXB0KG8scykseC5vbkludmFsaWQuY2FsbChhLHMpLCExKX0scnVsZTpmdW5jdGlvbih0LG4pe3ZhciBvPUYuZ2V0LmZpZWxkKHQuaWRlbnRpZmllciksYT0obi50eXBlLG8udmFsKCkpLHI9Ri5nZXQuYW5jaWxsYXJ5VmFsdWUobikscz1GLmdldC5ydWxlTmFtZShuKSxjPXgucnVsZXNbc107cmV0dXJuIGUuaXNGdW5jdGlvbihjKT8oYT1hPT09aXx8XCJcIj09PWF8fG51bGw9PT1hP1wiXCI6ZS50cmltKGErXCJcIiksYy5jYWxsKG8sYSxyKSk6dm9pZCBGLmVycm9yKFQubm9SdWxlLHMpfX0sc2V0dGluZzpmdW5jdGlvbih0LG4pe2lmKGUuaXNQbGFpbk9iamVjdCh0KSllLmV4dGVuZCghMCx4LHQpO2Vsc2V7aWYobj09PWkpcmV0dXJuIHhbdF07eFt0XT1ufX0saW50ZXJuYWw6ZnVuY3Rpb24odCxuKXtpZihlLmlzUGxhaW5PYmplY3QodCkpZS5leHRlbmQoITAsRix0KTtlbHNle2lmKG49PT1pKXJldHVybiBGW3RdO0ZbdF09bn19LGRlYnVnOmZ1bmN0aW9uKCl7eC5kZWJ1ZyYmKHgucGVyZm9ybWFuY2U/Ri5wZXJmb3JtYW5jZS5sb2coYXJndW1lbnRzKTooRi5kZWJ1Zz1GdW5jdGlvbi5wcm90b3R5cGUuYmluZC5jYWxsKGNvbnNvbGUuaW5mbyxjb25zb2xlLHgubmFtZStcIjpcIiksRi5kZWJ1Zy5hcHBseShjb25zb2xlLGFyZ3VtZW50cykpKX0sdmVyYm9zZTpmdW5jdGlvbigpe3gudmVyYm9zZSYmeC5kZWJ1ZyYmKHgucGVyZm9ybWFuY2U/Ri5wZXJmb3JtYW5jZS5sb2coYXJndW1lbnRzKTooRi52ZXJib3NlPUZ1bmN0aW9uLnByb3RvdHlwZS5iaW5kLmNhbGwoY29uc29sZS5pbmZvLGNvbnNvbGUseC5uYW1lK1wiOlwiKSxGLnZlcmJvc2UuYXBwbHkoY29uc29sZSxhcmd1bWVudHMpKSl9LGVycm9yOmZ1bmN0aW9uKCl7Ri5lcnJvcj1GdW5jdGlvbi5wcm90b3R5cGUuYmluZC5jYWxsKGNvbnNvbGUuZXJyb3IsY29uc29sZSx4Lm5hbWUrXCI6XCIpLEYuZXJyb3IuYXBwbHkoY29uc29sZSxhcmd1bWVudHMpfSxwZXJmb3JtYW5jZTp7bG9nOmZ1bmN0aW9uKGUpe3ZhciB0LG4saTt4LnBlcmZvcm1hbmNlJiYodD0obmV3IERhdGUpLmdldFRpbWUoKSxpPXN8fHQsbj10LWkscz10LGMucHVzaCh7TmFtZTplWzBdLEFyZ3VtZW50czpbXS5zbGljZS5jYWxsKGUsMSl8fFwiXCIsRWxlbWVudDpPLFwiRXhlY3V0aW9uIFRpbWVcIjpufSkpLGNsZWFyVGltZW91dChGLnBlcmZvcm1hbmNlLnRpbWVyKSxGLnBlcmZvcm1hbmNlLnRpbWVyPXNldFRpbWVvdXQoRi5wZXJmb3JtYW5jZS5kaXNwbGF5LDUwMCl9LGRpc3BsYXk6ZnVuY3Rpb24oKXt2YXIgdD14Lm5hbWUrXCI6XCIsbj0wO3M9ITEsY2xlYXJUaW1lb3V0KEYucGVyZm9ybWFuY2UudGltZXIpLGUuZWFjaChjLGZ1bmN0aW9uKGUsdCl7bis9dFtcIkV4ZWN1dGlvbiBUaW1lXCJdfSksdCs9XCIgXCIrbitcIm1zXCIsciYmKHQrPVwiICdcIityK1wiJ1wiKSxhLmxlbmd0aD4xJiYodCs9XCIgKFwiK2EubGVuZ3RoK1wiKVwiKSwoY29uc29sZS5ncm91cCE9PWl8fGNvbnNvbGUudGFibGUhPT1pKSYmYy5sZW5ndGg+MCYmKGNvbnNvbGUuZ3JvdXBDb2xsYXBzZWQodCksY29uc29sZS50YWJsZT9jb25zb2xlLnRhYmxlKGMpOmUuZWFjaChjLGZ1bmN0aW9uKGUsdCl7Y29uc29sZS5sb2codC5OYW1lK1wiOiBcIit0W1wiRXhlY3V0aW9uIFRpbWVcIl0rXCJtc1wiKX0pLGNvbnNvbGUuZ3JvdXBFbmQoKSksYz1bXX19LGludm9rZTpmdW5jdGlvbih0LG4sYSl7dmFyIHIscyxjLGw9RTtyZXR1cm4gbj1ufHxtLGE9T3x8YSxcInN0cmluZ1wiPT10eXBlb2YgdCYmbCE9PWkmJih0PXQuc3BsaXQoL1tcXC4gXS8pLHI9dC5sZW5ndGgtMSxlLmVhY2godCxmdW5jdGlvbihuLG8pe3ZhciBhPW4hPXI/byt0W24rMV0uY2hhckF0KDApLnRvVXBwZXJDYXNlKCkrdFtuKzFdLnNsaWNlKDEpOnQ7aWYoZS5pc1BsYWluT2JqZWN0KGxbYV0pJiZuIT1yKWw9bFthXTtlbHNle2lmKGxbYV0hPT1pKXJldHVybiBzPWxbYV0sITE7aWYoIWUuaXNQbGFpbk9iamVjdChsW29dKXx8bj09cilyZXR1cm4gbFtvXSE9PWk/KHM9bFtvXSwhMSk6ITE7bD1sW29dfX0pKSxlLmlzRnVuY3Rpb24ocyk/Yz1zLmFwcGx5KGEsbik6cyE9PWkmJihjPXMpLGUuaXNBcnJheShvKT9vLnB1c2goYyk6byE9PWk/bz1bbyxjXTpjIT09aSYmKG89Yyksc319LEYuaW5pdGlhbGl6ZSgpfSksbyE9PWk/bzp0aGlzfSxlLmZuLmZvcm0uc2V0dGluZ3M9e25hbWU6XCJGb3JtXCIsbmFtZXNwYWNlOlwiZm9ybVwiLGRlYnVnOiExLHZlcmJvc2U6ITEscGVyZm9ybWFuY2U6ITAsZmllbGRzOiExLGtleWJvYXJkU2hvcnRjdXRzOiEwLG9uOlwic3VibWl0XCIsaW5saW5lOiExLGRlbGF5OjIwMCxyZXZhbGlkYXRlOiEwLHRyYW5zaXRpb246XCJzY2FsZVwiLGR1cmF0aW9uOjIwMCxvblZhbGlkOmZ1bmN0aW9uKCl7fSxvbkludmFsaWQ6ZnVuY3Rpb24oKXt9LG9uU3VjY2VzczpmdW5jdGlvbigpe3JldHVybiEwfSxvbkZhaWx1cmU6ZnVuY3Rpb24oKXtyZXR1cm4hMX0sbWV0YWRhdGE6e2RlZmF1bHRWYWx1ZTpcImRlZmF1bHRcIix2YWxpZGF0ZTpcInZhbGlkYXRlXCJ9LHJlZ0V4cDp7YnJhY2tldDovXFxbKC4qKVxcXS9pLGRlY2ltYWw6L15cXC0/XFxkKihcXC5cXGQrKT8kLyxlbWFpbDpcIlthLXowLTkhIyQlJicqKy89P15fYHt8fX4tXSsoPzpcXFxcLlthLXowLTkhIyQlJicqKy89P15fYHt8fX4tXSspKkAoPzpbYS16MC05XSg/OlthLXowLTktXSpbYS16MC05XSk/XFxcXC4pK1thLXowLTldKD86W2EtejAtOS1dKlthLXowLTldKT9cIixlc2NhcGU6L1tcXC1cXFtcXF1cXC9cXHtcXH1cXChcXClcXCpcXCtcXD9cXC5cXFxcXFxeXFwkXFx8XS9nLGZsYWdzOi9eXFwvKC4qKVxcLyguKik/LyxpbnRlZ2VyOi9eXFwtP1xcZCskLyxudW1iZXI6L15cXC0/XFxkKihcXC5cXGQrKT8kLyx1cmw6LyhodHRwcz86XFwvXFwvKD86d3d3XFwufCg/IXd3dykpW15cXHNcXC5dK1xcLlteXFxzXXsyLH18d3d3XFwuW15cXHNdK1xcLlteXFxzXXsyLH0pL2l9LHRleHQ6e3Vuc3BlY2lmaWVkUnVsZTpcIlBsZWFzZSBlbnRlciBhIHZhbGlkIHZhbHVlXCIsdW5zcGVjaWZpZWRGaWVsZDpcIlRoaXMgZmllbGRcIn0scHJvbXB0OntlbXB0eTpcIntuYW1lfSBtdXN0IGhhdmUgYSB2YWx1ZVwiLGNoZWNrZWQ6XCJ7bmFtZX0gbXVzdCBiZSBjaGVja2VkXCIsZW1haWw6XCJ7bmFtZX0gbXVzdCBiZSBhIHZhbGlkIGUtbWFpbFwiLHVybDpcIntuYW1lfSBtdXN0IGJlIGEgdmFsaWQgdXJsXCIscmVnRXhwOlwie25hbWV9IGlzIG5vdCBmb3JtYXR0ZWQgY29ycmVjdGx5XCIsaW50ZWdlcjpcIntuYW1lfSBtdXN0IGJlIGFuIGludGVnZXJcIixkZWNpbWFsOlwie25hbWV9IG11c3QgYmUgYSBkZWNpbWFsIG51bWJlclwiLG51bWJlcjpcIntuYW1lfSBtdXN0IGJlIHNldCB0byBhIG51bWJlclwiLGlzOid7bmFtZX0gbXVzdCBiZSBcIntydWxlVmFsdWV9XCInLGlzRXhhY3RseTone25hbWV9IG11c3QgYmUgZXhhY3RseSBcIntydWxlVmFsdWV9XCInLG5vdDone25hbWV9IGNhbm5vdCBiZSBzZXQgdG8gXCJ7cnVsZVZhbHVlfVwiJyxub3RFeGFjdGx5Oid7bmFtZX0gY2Fubm90IGJlIHNldCB0byBleGFjdGx5IFwie3J1bGVWYWx1ZX1cIicsY29udGFpbjone25hbWV9IGNhbm5vdCBjb250YWluIFwie3J1bGVWYWx1ZX1cIicsY29udGFpbkV4YWN0bHk6J3tuYW1lfSBjYW5ub3QgY29udGFpbiBleGFjdGx5IFwie3J1bGVWYWx1ZX1cIicsZG9lc250Q29udGFpbjone25hbWV9IG11c3QgY29udGFpbiAgXCJ7cnVsZVZhbHVlfVwiJyxkb2VzbnRDb250YWluRXhhY3RseTone25hbWV9IG11c3QgY29udGFpbiBleGFjdGx5IFwie3J1bGVWYWx1ZX1cIicsbWluTGVuZ3RoOlwie25hbWV9IG11c3QgYmUgYXQgbGVhc3Qge3J1bGVWYWx1ZX0gY2hhcmFjdGVyc1wiLGxlbmd0aDpcIntuYW1lfSBtdXN0IGJlIGF0IGxlYXN0IHtydWxlVmFsdWV9IGNoYXJhY3RlcnNcIixleGFjdExlbmd0aDpcIntuYW1lfSBtdXN0IGJlIGV4YWN0bHkge3J1bGVWYWx1ZX0gY2hhcmFjdGVyc1wiLG1heExlbmd0aDpcIntuYW1lfSBjYW5ub3QgYmUgbG9uZ2VyIHRoYW4ge3J1bGVWYWx1ZX0gY2hhcmFjdGVyc1wiLG1hdGNoOlwie25hbWV9IG11c3QgbWF0Y2gge3J1bGVWYWx1ZX0gZmllbGRcIixkaWZmZXJlbnQ6XCJ7bmFtZX0gbXVzdCBoYXZlIGEgZGlmZmVyZW50IHZhbHVlIHRoYW4ge3J1bGVWYWx1ZX0gZmllbGRcIixjcmVkaXRDYXJkOlwie25hbWV9IG11c3QgYmUgYSB2YWxpZCBjcmVkaXQgY2FyZCBudW1iZXJcIixtaW5Db3VudDpcIntuYW1lfSBtdXN0IGhhdmUgYXQgbGVhc3Qge3J1bGVWYWx1ZX0gY2hvaWNlc1wiLGV4YWN0Q291bnQ6XCJ7bmFtZX0gbXVzdCBoYXZlIGV4YWN0bHkge3J1bGVWYWx1ZX0gY2hvaWNlc1wiLG1heENvdW50Olwie25hbWV9IG11c3QgaGF2ZSB7cnVsZVZhbHVlfSBvciBsZXNzIGNob2ljZXNcIn0sc2VsZWN0b3I6e2NoZWNrYm94OidpbnB1dFt0eXBlPVwiY2hlY2tib3hcIl0sIGlucHV0W3R5cGU9XCJyYWRpb1wiXScsY2xlYXI6XCIuY2xlYXJcIixmaWVsZDpcImlucHV0LCB0ZXh0YXJlYSwgc2VsZWN0XCIsZ3JvdXA6XCIuZmllbGRcIixpbnB1dDpcImlucHV0XCIsbWVzc2FnZTpcIi5lcnJvci5tZXNzYWdlXCIscHJvbXB0OlwiLnByb21wdC5sYWJlbFwiLHJhZGlvOidpbnB1dFt0eXBlPVwicmFkaW9cIl0nLHJlc2V0OicucmVzZXQ6bm90KFt0eXBlPVwicmVzZXRcIl0pJyxzdWJtaXQ6Jy5zdWJtaXQ6bm90KFt0eXBlPVwic3VibWl0XCJdKScsdWlDaGVja2JveDpcIi51aS5jaGVja2JveFwiLHVpRHJvcGRvd246XCIudWkuZHJvcGRvd25cIn0sY2xhc3NOYW1lOntlcnJvcjpcImVycm9yXCIsbGFiZWw6XCJ1aSBwcm9tcHQgbGFiZWxcIixwcmVzc2VkOlwiZG93blwiLHN1Y2Nlc3M6XCJzdWNjZXNzXCJ9LGVycm9yOntpZGVudGlmaWVyOlwiWW91IG11c3Qgc3BlY2lmeSBhIHN0cmluZyBpZGVudGlmaWVyIGZvciBlYWNoIGZpZWxkXCIsbWV0aG9kOlwiVGhlIG1ldGhvZCB5b3UgY2FsbGVkIGlzIG5vdCBkZWZpbmVkLlwiLG5vUnVsZTpcIlRoZXJlIGlzIG5vIHJ1bGUgbWF0Y2hpbmcgdGhlIG9uZSB5b3Ugc3BlY2lmaWVkXCIsb2xkU3ludGF4OlwiU3RhcnRpbmcgaW4gMi4wIGZvcm1zIG5vdyBvbmx5IHRha2UgYSBzaW5nbGUgc2V0dGluZ3Mgb2JqZWN0LiBWYWxpZGF0aW9uIHNldHRpbmdzIGNvbnZlcnRlZCB0byBuZXcgc3ludGF4IGF1dG9tYXRpY2FsbHkuXCJ9LHRlbXBsYXRlczp7ZXJyb3I6ZnVuY3Rpb24odCl7dmFyIG49Jzx1bCBjbGFzcz1cImxpc3RcIj4nO3JldHVybiBlLmVhY2godCxmdW5jdGlvbihlLHQpe24rPVwiPGxpPlwiK3QrXCI8L2xpPlwifSksbis9XCI8L3VsPlwiLGUobil9LHByb21wdDpmdW5jdGlvbih0KXtyZXR1cm4gZShcIjxkaXYvPlwiKS5hZGRDbGFzcyhcInVpIGJhc2ljIHJlZCBwb2ludGluZyBwcm9tcHQgbGFiZWxcIikuaHRtbCh0WzBdKX19LHJ1bGVzOntlbXB0eTpmdW5jdGlvbih0KXtyZXR1cm4hKHQ9PT1pfHxcIlwiPT09dHx8ZS5pc0FycmF5KHQpJiYwPT09dC5sZW5ndGgpfSxjaGVja2VkOmZ1bmN0aW9uKCl7cmV0dXJuIGUodGhpcykuZmlsdGVyKFwiOmNoZWNrZWRcIikubGVuZ3RoPjB9LGVtYWlsOmZ1bmN0aW9uKHQpe3ZhciBuPW5ldyBSZWdFeHAoZS5mbi5mb3JtLnNldHRpbmdzLnJlZ0V4cC5lbWFpbCxcImlcIik7cmV0dXJuIG4udGVzdCh0KX0sdXJsOmZ1bmN0aW9uKHQpe3JldHVybiBlLmZuLmZvcm0uc2V0dGluZ3MucmVnRXhwLnVybC50ZXN0KHQpfSxyZWdFeHA6ZnVuY3Rpb24odCxuKXt2YXIgaSxvPW4ubWF0Y2goZS5mbi5mb3JtLnNldHRpbmdzLnJlZ0V4cC5mbGFncyk7cmV0dXJuIG8mJihuPW8ubGVuZ3RoPj0yP29bMV06bixpPW8ubGVuZ3RoPj0zP29bMl06XCJcIiksdC5tYXRjaChuZXcgUmVnRXhwKG4saSkpfSxpbnRlZ2VyOmZ1bmN0aW9uKHQsbil7dmFyIG8sYSxyLHM9ZS5mbi5mb3JtLnNldHRpbmdzLnJlZ0V4cC5pbnRlZ2VyO3JldHVybiBuPT09aXx8XCJcIj09PW58fFwiLi5cIj09PW58fCgtMT09bi5pbmRleE9mKFwiLi5cIik/cy50ZXN0KG4pJiYobz1hPW4tMCk6KHI9bi5zcGxpdChcIi4uXCIsMikscy50ZXN0KHJbMF0pJiYobz1yWzBdLTApLHMudGVzdChyWzFdKSYmKGE9clsxXS0wKSkpLHMudGVzdCh0KSYmKG89PT1pfHx0Pj1vKSYmKGE9PT1pfHxhPj10KX0sZGVjaW1hbDpmdW5jdGlvbih0KXtyZXR1cm4gZS5mbi5mb3JtLnNldHRpbmdzLnJlZ0V4cC5kZWNpbWFsLnRlc3QodCl9LG51bWJlcjpmdW5jdGlvbih0KXtyZXR1cm4gZS5mbi5mb3JtLnNldHRpbmdzLnJlZ0V4cC5udW1iZXIudGVzdCh0KX0saXM6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdD1cInN0cmluZ1wiPT10eXBlb2YgdD90LnRvTG93ZXJDYXNlKCk6dCxlPVwic3RyaW5nXCI9PXR5cGVvZiBlP2UudG9Mb3dlckNhc2UoKTplLGU9PXR9LGlzRXhhY3RseTpmdW5jdGlvbihlLHQpe3JldHVybiBlPT10fSxub3Q6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gZT1cInN0cmluZ1wiPT10eXBlb2YgZT9lLnRvTG93ZXJDYXNlKCk6ZSx0PVwic3RyaW5nXCI9PXR5cGVvZiB0P3QudG9Mb3dlckNhc2UoKTp0LGUhPXR9LG5vdEV4YWN0bHk6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gZSE9dH0sY29udGFpbnM6ZnVuY3Rpb24odCxuKXtyZXR1cm4gbj1uLnJlcGxhY2UoZS5mbi5mb3JtLnNldHRpbmdzLnJlZ0V4cC5lc2NhcGUsXCJcXFxcJCZcIiksLTEhPT10LnNlYXJjaChuZXcgUmVnRXhwKG4sXCJpXCIpKX0sY29udGFpbnNFeGFjdGx5OmZ1bmN0aW9uKHQsbil7cmV0dXJuIG49bi5yZXBsYWNlKGUuZm4uZm9ybS5zZXR0aW5ncy5yZWdFeHAuZXNjYXBlLFwiXFxcXCQmXCIpLC0xIT09dC5zZWFyY2gobmV3IFJlZ0V4cChuKSl9LGRvZXNudENvbnRhaW46ZnVuY3Rpb24odCxuKXtyZXR1cm4gbj1uLnJlcGxhY2UoZS5mbi5mb3JtLnNldHRpbmdzLnJlZ0V4cC5lc2NhcGUsXCJcXFxcJCZcIiksLTE9PT10LnNlYXJjaChuZXcgUmVnRXhwKG4sXCJpXCIpKX0sZG9lc250Q29udGFpbkV4YWN0bHk6ZnVuY3Rpb24odCxuKXtyZXR1cm4gbj1uLnJlcGxhY2UoZS5mbi5mb3JtLnNldHRpbmdzLnJlZ0V4cC5lc2NhcGUsXCJcXFxcJCZcIiksLTE9PT10LnNlYXJjaChuZXcgUmVnRXhwKG4pKX0sbWluTGVuZ3RoOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIGUhPT1pP2UubGVuZ3RoPj10OiExfSxsZW5ndGg6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gZSE9PWk/ZS5sZW5ndGg+PXQ6ITF9LGV4YWN0TGVuZ3RoOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIGUhPT1pP2UubGVuZ3RoPT10OiExfSxtYXhMZW5ndGg6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gZSE9PWk/ZS5sZW5ndGg8PXQ6ITF9LG1hdGNoOmZ1bmN0aW9uKHQsbil7e3ZhciBvO2UodGhpcyl9cmV0dXJuIGUoJ1tkYXRhLXZhbGlkYXRlPVwiJytuKydcIl0nKS5sZW5ndGg+MD9vPWUoJ1tkYXRhLXZhbGlkYXRlPVwiJytuKydcIl0nKS52YWwoKTplKFwiI1wiK24pLmxlbmd0aD4wP289ZShcIiNcIituKS52YWwoKTplKCdbbmFtZT1cIicrbisnXCJdJykubGVuZ3RoPjA/bz1lKCdbbmFtZT1cIicrbisnXCJdJykudmFsKCk6ZSgnW25hbWU9XCInK24rJ1tdXCJdJykubGVuZ3RoPjAmJihvPWUoJ1tuYW1lPVwiJytuKydbXVwiXScpKSxvIT09aT90LnRvU3RyaW5nKCk9PW8udG9TdHJpbmcoKTohMX0sZGlmZmVyZW50OmZ1bmN0aW9uKHQsbil7e3ZhciBvO2UodGhpcyl9cmV0dXJuIGUoJ1tkYXRhLXZhbGlkYXRlPVwiJytuKydcIl0nKS5sZW5ndGg+MD9vPWUoJ1tkYXRhLXZhbGlkYXRlPVwiJytuKydcIl0nKS52YWwoKTplKFwiI1wiK24pLmxlbmd0aD4wP289ZShcIiNcIituKS52YWwoKTplKCdbbmFtZT1cIicrbisnXCJdJykubGVuZ3RoPjA/bz1lKCdbbmFtZT1cIicrbisnXCJdJykudmFsKCk6ZSgnW25hbWU9XCInK24rJ1tdXCJdJykubGVuZ3RoPjAmJihvPWUoJ1tuYW1lPVwiJytuKydbXVwiXScpKSxvIT09aT90LnRvU3RyaW5nKCkhPT1vLnRvU3RyaW5nKCk6ITF9LGNyZWRpdENhcmQ6ZnVuY3Rpb24odCxuKXt2YXIgaSxvLGE9e3Zpc2E6e3BhdHRlcm46L140LyxsZW5ndGg6WzE2XX0sYW1leDp7cGF0dGVybjovXjNbNDddLyxsZW5ndGg6WzE1XX0sbWFzdGVyY2FyZDp7cGF0dGVybjovXjVbMS01XS8sbGVuZ3RoOlsxNl19LGRpc2NvdmVyOntwYXR0ZXJuOi9eKDYwMTF8NjIyKDEyWzYtOV18MVszLTldWzAtOV18WzItOF1bMC05XXsyfXw5WzAtMV1bMC05XXw5MlswLTVdfDY0WzQtOV0pfDY1KS8sbGVuZ3RoOlsxNl19LHVuaW9uUGF5OntwYXR0ZXJuOi9eKDYyfDg4KS8sbGVuZ3RoOlsxNiwxNywxOCwxOV19LGpjYjp7cGF0dGVybjovXjM1KDJbODldfFszLThdWzAtOV0pLyxsZW5ndGg6WzE2XX0sbWFlc3Rybzp7cGF0dGVybjovXig1MDE4fDUwMjB8NTAzOHw2MzA0fDY3NTl8Njc2WzEtM10pLyxsZW5ndGg6WzEyLDEzLDE0LDE1LDE2LDE3LDE4LDE5XX0sZGluZXJzQ2x1Yjp7cGF0dGVybjovXigzMFswLTVdfF4zNikvLGxlbmd0aDpbMTRdfSxsYXNlcjp7cGF0dGVybjovXig2MzA0fDY3MFs2OV18Njc3MSkvLGxlbmd0aDpbMTYsMTcsMTgsMTldfSx2aXNhRWxlY3Ryb246e3BhdHRlcm46L14oNDAyNnw0MTc1MDB8NDUwOHw0ODQ0fDQ5MSgzfDcpKS8sbGVuZ3RoOlsxNl19fSxyPXt9LHM9ITEsYz1cInN0cmluZ1wiPT10eXBlb2Ygbj9uLnNwbGl0KFwiLFwiKTohMTtpZihcInN0cmluZ1wiPT10eXBlb2YgdCYmMCE9PXQubGVuZ3RoKXtpZihjJiYoZS5lYWNoKGMsZnVuY3Rpb24obixpKXtvPWFbaV0sbyYmKHI9e2xlbmd0aDotMSE9PWUuaW5BcnJheSh0Lmxlbmd0aCxvLmxlbmd0aCkscGF0dGVybjotMSE9PXQuc2VhcmNoKG8ucGF0dGVybil9LHIubGVuZ3RoJiZyLnBhdHRlcm4mJihzPSEwKSl9KSwhcykpcmV0dXJuITE7aWYoaT17bnVtYmVyOi0xIT09ZS5pbkFycmF5KHQubGVuZ3RoLGEudW5pb25QYXkubGVuZ3RoKSxwYXR0ZXJuOi0xIT09dC5zZWFyY2goYS51bmlvblBheS5wYXR0ZXJuKX0saS5udW1iZXImJmkucGF0dGVybilyZXR1cm4hMDtmb3IodmFyIGw9dC5sZW5ndGgsdT0wLGQ9W1swLDEsMiwzLDQsNSw2LDcsOCw5XSxbMCwyLDQsNiw4LDEsMyw1LDcsOV1dLG09MDtsLS07KW0rPWRbdV1bcGFyc2VJbnQodC5jaGFyQXQobCksMTApXSx1Xj0xO3JldHVybiBtJTEwPT09MCYmbT4wfX0sbWluQ291bnQ6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gMD09dD8hMDoxPT10P1wiXCIhPT1lOmUuc3BsaXQoXCIsXCIpLmxlbmd0aD49dH0sZXhhY3RDb3VudDpmdW5jdGlvbihlLHQpe3JldHVybiAwPT10P1wiXCI9PT1lOjE9PXQ/XCJcIiE9PWUmJi0xPT09ZS5zZWFyY2goXCIsXCIpOmUuc3BsaXQoXCIsXCIpLmxlbmd0aD09dH0sbWF4Q291bnQ6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gMD09dD8hMToxPT10Py0xPT09ZS5zZWFyY2goXCIsXCIpOmUuc3BsaXQoXCIsXCIpLmxlbmd0aDw9dH19fX0oalF1ZXJ5LHdpbmRvdyxkb2N1bWVudCksZnVuY3Rpb24oZSx0LG4saSl7XCJ1c2Ugc3RyaWN0XCI7ZS5mbi5hY2NvcmRpb249ZnVuY3Rpb24obil7e3ZhciBvLGE9ZSh0aGlzKSxyPShuZXcgRGF0ZSkuZ2V0VGltZSgpLHM9W10sYz1hcmd1bWVudHNbMF0sbD1cInN0cmluZ1wiPT10eXBlb2YgYyx1PVtdLnNsaWNlLmNhbGwoYXJndW1lbnRzLDEpO3QucmVxdWVzdEFuaW1hdGlvbkZyYW1lfHx0Lm1velJlcXVlc3RBbmltYXRpb25GcmFtZXx8dC53ZWJraXRSZXF1ZXN0QW5pbWF0aW9uRnJhbWV8fHQubXNSZXF1ZXN0QW5pbWF0aW9uRnJhbWV8fGZ1bmN0aW9uKGUpe3NldFRpbWVvdXQoZSwwKX19cmV0dXJuIGEuZWFjaChmdW5jdGlvbigpe3ZhciBkLG0sZj1lLmlzUGxhaW5PYmplY3Qobik/ZS5leHRlbmQoITAse30sZS5mbi5hY2NvcmRpb24uc2V0dGluZ3Msbik6ZS5leHRlbmQoe30sZS5mbi5hY2NvcmRpb24uc2V0dGluZ3MpLGc9Zi5jbGFzc05hbWUscD1mLm5hbWVzcGFjZSx2PWYuc2VsZWN0b3IsaD1mLmVycm9yLGI9XCIuXCIrcCx5PVwibW9kdWxlLVwiK3AseD1hLnNlbGVjdG9yfHxcIlwiLEM9ZSh0aGlzKSx3PUMuZmluZCh2LnRpdGxlKSxrPUMuZmluZCh2LmNvbnRlbnQpLFM9dGhpcyxUPUMuZGF0YSh5KTttPXtpbml0aWFsaXplOmZ1bmN0aW9uKCl7bS5kZWJ1ZyhcIkluaXRpYWxpemluZ1wiLEMpLG0uYmluZC5ldmVudHMoKSxmLm9ic2VydmVDaGFuZ2VzJiZtLm9ic2VydmVDaGFuZ2VzKCksbS5pbnN0YW50aWF0ZSgpfSxpbnN0YW50aWF0ZTpmdW5jdGlvbigpe1Q9bSxDLmRhdGEoeSxtKX0sZGVzdHJveTpmdW5jdGlvbigpe20uZGVidWcoXCJEZXN0cm95aW5nIHByZXZpb3VzIGluc3RhbmNlXCIsQyksQy5vZmYoYikucmVtb3ZlRGF0YSh5KX0scmVmcmVzaDpmdW5jdGlvbigpe3c9Qy5maW5kKHYudGl0bGUpLGs9Qy5maW5kKHYuY29udGVudCl9LG9ic2VydmVDaGFuZ2VzOmZ1bmN0aW9uKCl7XCJNdXRhdGlvbk9ic2VydmVyXCJpbiB0JiYoZD1uZXcgTXV0YXRpb25PYnNlcnZlcihmdW5jdGlvbihlKXttLmRlYnVnKFwiRE9NIHRyZWUgbW9kaWZpZWQsIHVwZGF0aW5nIHNlbGVjdG9yIGNhY2hlXCIpLG0ucmVmcmVzaCgpfSksZC5vYnNlcnZlKFMse2NoaWxkTGlzdDohMCxzdWJ0cmVlOiEwfSksbS5kZWJ1ZyhcIlNldHRpbmcgdXAgbXV0YXRpb24gb2JzZXJ2ZXJcIixkKSl9LGJpbmQ6e2V2ZW50czpmdW5jdGlvbigpe20uZGVidWcoXCJCaW5kaW5nIGRlbGVnYXRlZCBldmVudHNcIiksQy5vbihmLm9uK2Isdi50cmlnZ2VyLG0uZXZlbnQuY2xpY2spfX0sZXZlbnQ6e2NsaWNrOmZ1bmN0aW9uKCl7bS50b2dnbGUuY2FsbCh0aGlzKX19LHRvZ2dsZTpmdW5jdGlvbih0KXt2YXIgbj10IT09aT9cIm51bWJlclwiPT10eXBlb2YgdD93LmVxKHQpOmUodCkuY2xvc2VzdCh2LnRpdGxlKTplKHRoaXMpLmNsb3Nlc3Qodi50aXRsZSksbz1uLm5leHQoayksYT1vLmhhc0NsYXNzKGcuYW5pbWF0aW5nKSxyPW8uaGFzQ2xhc3MoZy5hY3RpdmUpLHM9ciYmIWEsYz0hciYmYTttLmRlYnVnKFwiVG9nZ2xpbmcgdmlzaWJpbGl0eSBvZiBjb250ZW50XCIsbiksc3x8Yz9mLmNvbGxhcHNpYmxlP20uY2xvc2UuY2FsbChuKTptLmRlYnVnKFwiQ2Fubm90IGNsb3NlIGFjY29yZGlvbiBjb250ZW50IGNvbGxhcHNpbmcgaXMgZGlzYWJsZWRcIik6bS5vcGVuLmNhbGwobil9LG9wZW46ZnVuY3Rpb24odCl7dmFyIG49dCE9PWk/XCJudW1iZXJcIj09dHlwZW9mIHQ/dy5lcSh0KTplKHQpLmNsb3Nlc3Qodi50aXRsZSk6ZSh0aGlzKS5jbG9zZXN0KHYudGl0bGUpLG89bi5uZXh0KGspLGE9by5oYXNDbGFzcyhnLmFuaW1hdGluZykscj1vLmhhc0NsYXNzKGcuYWN0aXZlKSxzPXJ8fGE7cmV0dXJuIHM/dm9pZCBtLmRlYnVnKFwiQWNjb3JkaW9uIGFscmVhZHkgb3Blbiwgc2tpcHBpbmdcIixvKToobS5kZWJ1ZyhcIk9wZW5pbmcgYWNjb3JkaW9uIGNvbnRlbnRcIixuKSxmLm9uT3BlbmluZy5jYWxsKG8pLGYuZXhjbHVzaXZlJiZtLmNsb3NlT3RoZXJzLmNhbGwobiksbi5hZGRDbGFzcyhnLmFjdGl2ZSksby5zdG9wKCEwLCEwKS5hZGRDbGFzcyhnLmFuaW1hdGluZyksZi5hbmltYXRlQ2hpbGRyZW4mJihlLmZuLnRyYW5zaXRpb24hPT1pJiZDLnRyYW5zaXRpb24oXCJpcyBzdXBwb3J0ZWRcIik/by5jaGlsZHJlbigpLnRyYW5zaXRpb24oe2FuaW1hdGlvbjpcImZhZGUgaW5cIixxdWV1ZTohMSx1c2VGYWlsU2FmZTohMCxkZWJ1ZzpmLmRlYnVnLHZlcmJvc2U6Zi52ZXJib3NlLGR1cmF0aW9uOmYuZHVyYXRpb259KTpvLmNoaWxkcmVuKCkuc3RvcCghMCwhMCkuYW5pbWF0ZSh7b3BhY2l0eToxfSxmLmR1cmF0aW9uLG0ucmVzZXRPcGFjaXR5KSksdm9pZCBvLnNsaWRlRG93bihmLmR1cmF0aW9uLGYuZWFzaW5nLGZ1bmN0aW9uKCl7by5yZW1vdmVDbGFzcyhnLmFuaW1hdGluZykuYWRkQ2xhc3MoZy5hY3RpdmUpLG0ucmVzZXQuZGlzcGxheS5jYWxsKHRoaXMpLGYub25PcGVuLmNhbGwodGhpcyksZi5vbkNoYW5nZS5jYWxsKHRoaXMpfSkpfSxjbG9zZTpmdW5jdGlvbih0KXt2YXIgbj10IT09aT9cIm51bWJlclwiPT10eXBlb2YgdD93LmVxKHQpOmUodCkuY2xvc2VzdCh2LnRpdGxlKTplKHRoaXMpLmNsb3Nlc3Qodi50aXRsZSksbz1uLm5leHQoayksYT1vLmhhc0NsYXNzKGcuYW5pbWF0aW5nKSxyPW8uaGFzQ2xhc3MoZy5hY3RpdmUpLHM9IXImJmEsYz1yJiZhOyFyJiYhc3x8Y3x8KG0uZGVidWcoXCJDbG9zaW5nIGFjY29yZGlvbiBjb250ZW50XCIsbyksZi5vbkNsb3NpbmcuY2FsbChvKSxuLnJlbW92ZUNsYXNzKGcuYWN0aXZlKSxvLnN0b3AoITAsITApLmFkZENsYXNzKGcuYW5pbWF0aW5nKSxmLmFuaW1hdGVDaGlsZHJlbiYmKGUuZm4udHJhbnNpdGlvbiE9PWkmJkMudHJhbnNpdGlvbihcImlzIHN1cHBvcnRlZFwiKT9vLmNoaWxkcmVuKCkudHJhbnNpdGlvbih7YW5pbWF0aW9uOlwiZmFkZSBvdXRcIixxdWV1ZTohMSx1c2VGYWlsU2FmZTohMCxkZWJ1ZzpmLmRlYnVnLHZlcmJvc2U6Zi52ZXJib3NlLGR1cmF0aW9uOmYuZHVyYXRpb259KTpvLmNoaWxkcmVuKCkuc3RvcCghMCwhMCkuYW5pbWF0ZSh7b3BhY2l0eTowfSxmLmR1cmF0aW9uLG0ucmVzZXRPcGFjaXR5KSksby5zbGlkZVVwKGYuZHVyYXRpb24sZi5lYXNpbmcsZnVuY3Rpb24oKXtvLnJlbW92ZUNsYXNzKGcuYW5pbWF0aW5nKS5yZW1vdmVDbGFzcyhnLmFjdGl2ZSksbS5yZXNldC5kaXNwbGF5LmNhbGwodGhpcyksZi5vbkNsb3NlLmNhbGwodGhpcyksZi5vbkNoYW5nZS5jYWxsKHRoaXMpfSkpfSxjbG9zZU90aGVyczpmdW5jdGlvbih0KXt2YXIgbixvLGEscj10IT09aT93LmVxKHQpOmUodGhpcykuY2xvc2VzdCh2LnRpdGxlKSxzPXIucGFyZW50cyh2LmNvbnRlbnQpLnByZXYodi50aXRsZSksYz1yLmNsb3Nlc3Qodi5hY2NvcmRpb24pLGw9di50aXRsZStcIi5cIitnLmFjdGl2ZStcIjp2aXNpYmxlXCIsdT12LmNvbnRlbnQrXCIuXCIrZy5hY3RpdmUrXCI6dmlzaWJsZVwiO2YuY2xvc2VOZXN0ZWQ/KG49Yy5maW5kKGwpLm5vdChzKSxhPW4ubmV4dChrKSk6KG49Yy5maW5kKGwpLm5vdChzKSxvPWMuZmluZCh1KS5maW5kKGwpLm5vdChzKSxuPW4ubm90KG8pLGE9bi5uZXh0KGspKSxuLmxlbmd0aD4wJiYobS5kZWJ1ZyhcIkV4Y2x1c2l2ZSBlbmFibGVkLCBjbG9zaW5nIG90aGVyIGNvbnRlbnRcIixuKSxuLnJlbW92ZUNsYXNzKGcuYWN0aXZlKSxhLnJlbW92ZUNsYXNzKGcuYW5pbWF0aW5nKS5zdG9wKCEwLCEwKSxmLmFuaW1hdGVDaGlsZHJlbiYmKGUuZm4udHJhbnNpdGlvbiE9PWkmJkMudHJhbnNpdGlvbihcImlzIHN1cHBvcnRlZFwiKT9hLmNoaWxkcmVuKCkudHJhbnNpdGlvbih7YW5pbWF0aW9uOlwiZmFkZSBvdXRcIix1c2VGYWlsU2FmZTohMCxkZWJ1ZzpmLmRlYnVnLHZlcmJvc2U6Zi52ZXJib3NlLGR1cmF0aW9uOmYuZHVyYXRpb259KTphLmNoaWxkcmVuKCkuc3RvcCghMCwhMCkuYW5pbWF0ZSh7b3BhY2l0eTowfSxmLmR1cmF0aW9uLG0ucmVzZXRPcGFjaXR5KSksYS5zbGlkZVVwKGYuZHVyYXRpb24sZi5lYXNpbmcsZnVuY3Rpb24oKXtlKHRoaXMpLnJlbW92ZUNsYXNzKGcuYWN0aXZlKSxtLnJlc2V0LmRpc3BsYXkuY2FsbCh0aGlzKX0pKX0scmVzZXQ6e2Rpc3BsYXk6ZnVuY3Rpb24oKXttLnZlcmJvc2UoXCJSZW1vdmluZyBpbmxpbmUgZGlzcGxheSBmcm9tIGVsZW1lbnRcIix0aGlzKSxlKHRoaXMpLmNzcyhcImRpc3BsYXlcIixcIlwiKSxcIlwiPT09ZSh0aGlzKS5hdHRyKFwic3R5bGVcIikmJmUodGhpcykuYXR0cihcInN0eWxlXCIsXCJcIikucmVtb3ZlQXR0cihcInN0eWxlXCIpfSxvcGFjaXR5OmZ1bmN0aW9uKCl7bS52ZXJib3NlKFwiUmVtb3ZpbmcgaW5saW5lIG9wYWNpdHkgZnJvbSBlbGVtZW50XCIsdGhpcyksZSh0aGlzKS5jc3MoXCJvcGFjaXR5XCIsXCJcIiksXCJcIj09PWUodGhpcykuYXR0cihcInN0eWxlXCIpJiZlKHRoaXMpLmF0dHIoXCJzdHlsZVwiLFwiXCIpLnJlbW92ZUF0dHIoXCJzdHlsZVwiKX19LHNldHRpbmc6ZnVuY3Rpb24odCxuKXtpZihtLmRlYnVnKFwiQ2hhbmdpbmcgc2V0dGluZ1wiLHQsbiksZS5pc1BsYWluT2JqZWN0KHQpKWUuZXh0ZW5kKCEwLGYsdCk7ZWxzZXtpZihuPT09aSlyZXR1cm4gZlt0XTtmW3RdPW59fSxpbnRlcm5hbDpmdW5jdGlvbih0LG4pe3JldHVybiBtLmRlYnVnKFwiQ2hhbmdpbmcgaW50ZXJuYWxcIix0LG4pLG49PT1pP21bdF06dm9pZChlLmlzUGxhaW5PYmplY3QodCk/ZS5leHRlbmQoITAsbSx0KTptW3RdPW4pfSxkZWJ1ZzpmdW5jdGlvbigpe2YuZGVidWcmJihmLnBlcmZvcm1hbmNlP20ucGVyZm9ybWFuY2UubG9nKGFyZ3VtZW50cyk6KG0uZGVidWc9RnVuY3Rpb24ucHJvdG90eXBlLmJpbmQuY2FsbChjb25zb2xlLmluZm8sY29uc29sZSxmLm5hbWUrXCI6XCIpLG0uZGVidWcuYXBwbHkoY29uc29sZSxhcmd1bWVudHMpKSl9LHZlcmJvc2U6ZnVuY3Rpb24oKXtmLnZlcmJvc2UmJmYuZGVidWcmJihmLnBlcmZvcm1hbmNlP20ucGVyZm9ybWFuY2UubG9nKGFyZ3VtZW50cyk6KG0udmVyYm9zZT1GdW5jdGlvbi5wcm90b3R5cGUuYmluZC5jYWxsKGNvbnNvbGUuaW5mbyxjb25zb2xlLGYubmFtZStcIjpcIiksbS52ZXJib3NlLmFwcGx5KGNvbnNvbGUsYXJndW1lbnRzKSkpfSxlcnJvcjpmdW5jdGlvbigpe20uZXJyb3I9RnVuY3Rpb24ucHJvdG90eXBlLmJpbmQuY2FsbChjb25zb2xlLmVycm9yLGNvbnNvbGUsZi5uYW1lK1wiOlwiKSxtLmVycm9yLmFwcGx5KGNvbnNvbGUsYXJndW1lbnRzKX0scGVyZm9ybWFuY2U6e2xvZzpmdW5jdGlvbihlKXt2YXIgdCxuLGk7Zi5wZXJmb3JtYW5jZSYmKHQ9KG5ldyBEYXRlKS5nZXRUaW1lKCksaT1yfHx0LG49dC1pLHI9dCxzLnB1c2goe05hbWU6ZVswXSxBcmd1bWVudHM6W10uc2xpY2UuY2FsbChlLDEpfHxcIlwiLEVsZW1lbnQ6UyxcIkV4ZWN1dGlvbiBUaW1lXCI6bn0pKSxjbGVhclRpbWVvdXQobS5wZXJmb3JtYW5jZS50aW1lciksbS5wZXJmb3JtYW5jZS50aW1lcj1zZXRUaW1lb3V0KG0ucGVyZm9ybWFuY2UuZGlzcGxheSw1MDApfSxkaXNwbGF5OmZ1bmN0aW9uKCl7dmFyIHQ9Zi5uYW1lK1wiOlwiLG49MDtyPSExLGNsZWFyVGltZW91dChtLnBlcmZvcm1hbmNlLnRpbWVyKSxlLmVhY2gocyxmdW5jdGlvbihlLHQpe24rPXRbXCJFeGVjdXRpb24gVGltZVwiXX0pLHQrPVwiIFwiK24rXCJtc1wiLHgmJih0Kz1cIiAnXCIreCtcIidcIiksKGNvbnNvbGUuZ3JvdXAhPT1pfHxjb25zb2xlLnRhYmxlIT09aSkmJnMubGVuZ3RoPjAmJihjb25zb2xlLmdyb3VwQ29sbGFwc2VkKHQpLGNvbnNvbGUudGFibGU/Y29uc29sZS50YWJsZShzKTplLmVhY2gocyxmdW5jdGlvbihlLHQpe2NvbnNvbGUubG9nKHQuTmFtZStcIjogXCIrdFtcIkV4ZWN1dGlvbiBUaW1lXCJdK1wibXNcIil9KSxjb25zb2xlLmdyb3VwRW5kKCkpLHM9W119fSxpbnZva2U6ZnVuY3Rpb24odCxuLGEpe3ZhciByLHMsYyxsPVQ7cmV0dXJuIG49bnx8dSxhPVN8fGEsXCJzdHJpbmdcIj09dHlwZW9mIHQmJmwhPT1pJiYodD10LnNwbGl0KC9bXFwuIF0vKSxyPXQubGVuZ3RoLTEsZS5lYWNoKHQsZnVuY3Rpb24obixvKXt2YXIgYT1uIT1yP28rdFtuKzFdLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpK3RbbisxXS5zbGljZSgxKTp0O2lmKGUuaXNQbGFpbk9iamVjdChsW2FdKSYmbiE9cilsPWxbYV07ZWxzZXtpZihsW2FdIT09aSlyZXR1cm4gcz1sW2FdLCExO2lmKCFlLmlzUGxhaW5PYmplY3QobFtvXSl8fG49PXIpcmV0dXJuIGxbb10hPT1pPyhzPWxbb10sITEpOihtLmVycm9yKGgubWV0aG9kLHQpLCExKTtsPWxbb119fSkpLGUuaXNGdW5jdGlvbihzKT9jPXMuYXBwbHkoYSxuKTpzIT09aSYmKGM9cyksZS5pc0FycmF5KG8pP28ucHVzaChjKTpvIT09aT9vPVtvLGNdOmMhPT1pJiYobz1jKSxzfX0sbD8oVD09PWkmJm0uaW5pdGlhbGl6ZSgpLG0uaW52b2tlKGMpKTooVCE9PWkmJlQuaW52b2tlKFwiZGVzdHJveVwiKSxtLmluaXRpYWxpemUoKSl9KSxvIT09aT9vOnRoaXN9LGUuZm4uYWNjb3JkaW9uLnNldHRpbmdzPXtuYW1lOlwiQWNjb3JkaW9uXCIsbmFtZXNwYWNlOlwiYWNjb3JkaW9uXCIsZGVidWc6ITEsdmVyYm9zZTohMSxwZXJmb3JtYW5jZTohMCxvbjpcImNsaWNrXCIsb2JzZXJ2ZUNoYW5nZXM6ITAsZXhjbHVzaXZlOiEwLGNvbGxhcHNpYmxlOiEwLGNsb3NlTmVzdGVkOiExLGFuaW1hdGVDaGlsZHJlbjohMCxkdXJhdGlvbjozNTAsZWFzaW5nOlwiZWFzZU91dFF1YWRcIixvbk9wZW5pbmc6ZnVuY3Rpb24oKXt9LG9uT3BlbjpmdW5jdGlvbigpe30sb25DbG9zaW5nOmZ1bmN0aW9uKCl7fSxvbkNsb3NlOmZ1bmN0aW9uKCl7fSxvbkNoYW5nZTpmdW5jdGlvbigpe30sZXJyb3I6e21ldGhvZDpcIlRoZSBtZXRob2QgeW91IGNhbGxlZCBpcyBub3QgZGVmaW5lZFwifSxjbGFzc05hbWU6e2FjdGl2ZTpcImFjdGl2ZVwiLGFuaW1hdGluZzpcImFuaW1hdGluZ1wifSxzZWxlY3Rvcjp7YWNjb3JkaW9uOlwiLmFjY29yZGlvblwiLHRpdGxlOlwiLnRpdGxlXCIsdHJpZ2dlcjpcIi50aXRsZVwiLGNvbnRlbnQ6XCIuY29udGVudFwifX0sZS5leHRlbmQoZS5lYXNpbmcse2Vhc2VPdXRRdWFkOmZ1bmN0aW9uKGUsdCxuLGksbyl7cmV0dXJuLWkqKHQvPW8pKih0LTIpK259fSl9KGpRdWVyeSx3aW5kb3csZG9jdW1lbnQpLGZ1bmN0aW9uKGUsdCxuLGkpe1widXNlIHN0cmljdFwiO2UuZm4uY2hlY2tib3g9ZnVuY3Rpb24obil7dmFyIG8sYT1lKHRoaXMpLHI9YS5zZWxlY3Rvcnx8XCJcIixzPShuZXcgRGF0ZSkuZ2V0VGltZSgpLGM9W10sbD1hcmd1bWVudHNbMF0sdT1cInN0cmluZ1wiPT10eXBlb2YgbCxkPVtdLnNsaWNlLmNhbGwoYXJndW1lbnRzLDEpO3JldHVybiBhLmVhY2goZnVuY3Rpb24oKXt2YXIgYSxtLGY9ZS5leHRlbmQoITAse30sZS5mbi5jaGVja2JveC5zZXR0aW5ncyxuKSxnPWYuY2xhc3NOYW1lLHA9Zi5uYW1lc3BhY2Usdj1mLnNlbGVjdG9yLGg9Zi5lcnJvcixiPVwiLlwiK3AseT1cIm1vZHVsZS1cIitwLHg9ZSh0aGlzKSxDPWUodGhpcykuY2hpbGRyZW4odi5sYWJlbCksdz1lKHRoaXMpLmNoaWxkcmVuKHYuaW5wdXQpLGs9d1swXSxTPSExLFQ9ITEsQT14LmRhdGEoeSksUj10aGlzO1xyXG5cclxubT17aW5pdGlhbGl6ZTpmdW5jdGlvbigpe20udmVyYm9zZShcIkluaXRpYWxpemluZyBjaGVja2JveFwiLGYpLG0uY3JlYXRlLmxhYmVsKCksbS5iaW5kLmV2ZW50cygpLG0uc2V0LnRhYmJhYmxlKCksbS5oaWRlLmlucHV0KCksbS5vYnNlcnZlQ2hhbmdlcygpLG0uaW5zdGFudGlhdGUoKSxtLnNldHVwKCl9LGluc3RhbnRpYXRlOmZ1bmN0aW9uKCl7bS52ZXJib3NlKFwiU3RvcmluZyBpbnN0YW5jZSBvZiBtb2R1bGVcIixtKSxBPW0seC5kYXRhKHksbSl9LGRlc3Ryb3k6ZnVuY3Rpb24oKXttLnZlcmJvc2UoXCJEZXN0cm95aW5nIG1vZHVsZVwiKSxtLnVuYmluZC5ldmVudHMoKSxtLnNob3cuaW5wdXQoKSx4LnJlbW92ZURhdGEoeSl9LGZpeDp7cmVmZXJlbmNlOmZ1bmN0aW9uKCl7eC5pcyh2LmlucHV0KSYmKG0uZGVidWcoXCJCZWhhdmlvciBjYWxsZWQgb24gPGlucHV0PiBhZGp1c3RpbmcgaW52b2tlZCBlbGVtZW50XCIpLHg9eC5jbG9zZXN0KHYuY2hlY2tib3gpLG0ucmVmcmVzaCgpKX19LHNldHVwOmZ1bmN0aW9uKCl7bS5zZXQuaW5pdGlhbExvYWQoKSxtLmlzLmluZGV0ZXJtaW5hdGUoKT8obS5kZWJ1ZyhcIkluaXRpYWwgdmFsdWUgaXMgaW5kZXRlcm1pbmF0ZVwiKSxtLmluZGV0ZXJtaW5hdGUoKSk6bS5pcy5jaGVja2VkKCk/KG0uZGVidWcoXCJJbml0aWFsIHZhbHVlIGlzIGNoZWNrZWRcIiksbS5jaGVjaygpKToobS5kZWJ1ZyhcIkluaXRpYWwgdmFsdWUgaXMgdW5jaGVja2VkXCIpLG0udW5jaGVjaygpKSxtLnJlbW92ZS5pbml0aWFsTG9hZCgpfSxyZWZyZXNoOmZ1bmN0aW9uKCl7Qz14LmNoaWxkcmVuKHYubGFiZWwpLHc9eC5jaGlsZHJlbih2LmlucHV0KSxrPXdbMF19LGhpZGU6e2lucHV0OmZ1bmN0aW9uKCl7bS52ZXJib3NlKFwiTW9kZnlpbmcgPGlucHV0PiB6LWluZGV4IHRvIGJlIHVuc2VsZWN0YWJsZVwiKSx3LmFkZENsYXNzKGcuaGlkZGVuKX19LHNob3c6e2lucHV0OmZ1bmN0aW9uKCl7bS52ZXJib3NlKFwiTW9kZnlpbmcgPGlucHV0PiB6LWluZGV4IHRvIGJlIHNlbGVjdGFibGVcIiksdy5yZW1vdmVDbGFzcyhnLmhpZGRlbil9fSxvYnNlcnZlQ2hhbmdlczpmdW5jdGlvbigpe1wiTXV0YXRpb25PYnNlcnZlclwiaW4gdCYmKGE9bmV3IE11dGF0aW9uT2JzZXJ2ZXIoZnVuY3Rpb24oZSl7bS5kZWJ1ZyhcIkRPTSB0cmVlIG1vZGlmaWVkLCB1cGRhdGluZyBzZWxlY3RvciBjYWNoZVwiKSxtLnJlZnJlc2goKX0pLGEub2JzZXJ2ZShSLHtjaGlsZExpc3Q6ITAsc3VidHJlZTohMH0pLG0uZGVidWcoXCJTZXR0aW5nIHVwIG11dGF0aW9uIG9ic2VydmVyXCIsYSkpfSxhdHRhY2hFdmVudHM6ZnVuY3Rpb24odCxuKXt2YXIgaT1lKHQpO249ZS5pc0Z1bmN0aW9uKG1bbl0pP21bbl06bS50b2dnbGUsaS5sZW5ndGg+MD8obS5kZWJ1ZyhcIkF0dGFjaGluZyBjaGVja2JveCBldmVudHMgdG8gZWxlbWVudFwiLHQsbiksaS5vbihcImNsaWNrXCIrYixuKSk6bS5lcnJvcihoLm5vdEZvdW5kKX0sZXZlbnQ6e2NsaWNrOmZ1bmN0aW9uKHQpe3ZhciBuPWUodC50YXJnZXQpO3JldHVybiBuLmlzKHYuaW5wdXQpP3ZvaWQgbS52ZXJib3NlKFwiVXNpbmcgZGVmYXVsdCBjaGVjayBhY3Rpb24gb24gaW5pdGlhbGl6ZWQgY2hlY2tib3hcIik6bi5pcyh2LmxpbmspP3ZvaWQgbS5kZWJ1ZyhcIkNsaWNraW5nIGxpbmsgaW5zaWRlIGNoZWNrYm94LCBza2lwcGluZyB0b2dnbGVcIik6KG0udG9nZ2xlKCksdy5mb2N1cygpLHZvaWQgdC5wcmV2ZW50RGVmYXVsdCgpKX0sa2V5ZG93bjpmdW5jdGlvbihlKXt2YXIgdD1lLndoaWNoLG49e2VudGVyOjEzLHNwYWNlOjMyLGVzY2FwZToyN307dD09bi5lc2NhcGU/KG0udmVyYm9zZShcIkVzY2FwZSBrZXkgcHJlc3NlZCBibHVycmluZyBmaWVsZFwiKSx3LmJsdXIoKSxUPSEwKTplLmN0cmxLZXl8fHQhPW4uc3BhY2UmJnQhPW4uZW50ZXI/VD0hMToobS52ZXJib3NlKFwiRW50ZXIvc3BhY2Uga2V5IHByZXNzZWQsIHRvZ2dsaW5nIGNoZWNrYm94XCIpLG0udG9nZ2xlKCksVD0hMCl9LGtleXVwOmZ1bmN0aW9uKGUpe1QmJmUucHJldmVudERlZmF1bHQoKX19LGNoZWNrOmZ1bmN0aW9uKCl7bS5zaG91bGQuYWxsb3dDaGVjaygpJiYobS5kZWJ1ZyhcIkNoZWNraW5nIGNoZWNrYm94XCIsdyksbS5zZXQuY2hlY2tlZCgpLG0uc2hvdWxkLmlnbm9yZUNhbGxiYWNrcygpfHwoZi5vbkNoZWNrZWQuY2FsbChrKSxmLm9uQ2hhbmdlLmNhbGwoaykpKX0sdW5jaGVjazpmdW5jdGlvbigpe20uc2hvdWxkLmFsbG93VW5jaGVjaygpJiYobS5kZWJ1ZyhcIlVuY2hlY2tpbmcgY2hlY2tib3hcIiksbS5zZXQudW5jaGVja2VkKCksbS5zaG91bGQuaWdub3JlQ2FsbGJhY2tzKCl8fChmLm9uVW5jaGVja2VkLmNhbGwoayksZi5vbkNoYW5nZS5jYWxsKGspKSl9LGluZGV0ZXJtaW5hdGU6ZnVuY3Rpb24oKXtyZXR1cm4gbS5zaG91bGQuYWxsb3dJbmRldGVybWluYXRlKCk/dm9pZCBtLmRlYnVnKFwiQ2hlY2tib3ggaXMgYWxyZWFkeSBpbmRldGVybWluYXRlXCIpOihtLmRlYnVnKFwiTWFraW5nIGNoZWNrYm94IGluZGV0ZXJtaW5hdGVcIiksbS5zZXQuaW5kZXRlcm1pbmF0ZSgpLHZvaWQobS5zaG91bGQuaWdub3JlQ2FsbGJhY2tzKCl8fChmLm9uSW5kZXRlcm1pbmF0ZS5jYWxsKGspLGYub25DaGFuZ2UuY2FsbChrKSkpKX0sZGV0ZXJtaW5hdGU6ZnVuY3Rpb24oKXtyZXR1cm4gbS5zaG91bGQuYWxsb3dEZXRlcm1pbmF0ZSgpP3ZvaWQgbS5kZWJ1ZyhcIkNoZWNrYm94IGlzIGFscmVhZHkgZGV0ZXJtaW5hdGVcIik6KG0uZGVidWcoXCJNYWtpbmcgY2hlY2tib3ggZGV0ZXJtaW5hdGVcIiksbS5zZXQuZGV0ZXJtaW5hdGUoKSx2b2lkKG0uc2hvdWxkLmlnbm9yZUNhbGxiYWNrcygpfHwoZi5vbkRldGVybWluYXRlLmNhbGwoayksZi5vbkNoYW5nZS5jYWxsKGspKSkpfSxlbmFibGU6ZnVuY3Rpb24oKXtyZXR1cm4gbS5pcy5lbmFibGVkKCk/dm9pZCBtLmRlYnVnKFwiQ2hlY2tib3ggaXMgYWxyZWFkeSBlbmFibGVkXCIpOihtLmRlYnVnKFwiRW5hYmxpbmcgY2hlY2tib3hcIiksbS5zZXQuZW5hYmxlZCgpLHZvaWQgZi5vbkVuYWJsZS5jYWxsKGspKX0sZGlzYWJsZTpmdW5jdGlvbigpe3JldHVybiBtLmlzLmRpc2FibGVkKCk/dm9pZCBtLmRlYnVnKFwiQ2hlY2tib3ggaXMgYWxyZWFkeSBkaXNhYmxlZFwiKToobS5kZWJ1ZyhcIkRpc2FibGluZyBjaGVja2JveFwiKSxtLnNldC5kaXNhYmxlZCgpLHZvaWQgZi5vbkRpc2FibGUuY2FsbChrKSl9LGdldDp7cmFkaW9zOmZ1bmN0aW9uKCl7dmFyIHQ9bS5nZXQubmFtZSgpO3JldHVybiBlKCdpbnB1dFtuYW1lPVwiJyt0KydcIl0nKS5jbG9zZXN0KHYuY2hlY2tib3gpfSxvdGhlclJhZGlvczpmdW5jdGlvbigpe3JldHVybiBtLmdldC5yYWRpb3MoKS5ub3QoeCl9LG5hbWU6ZnVuY3Rpb24oKXtyZXR1cm4gdy5hdHRyKFwibmFtZVwiKX19LGlzOntpbml0aWFsTG9hZDpmdW5jdGlvbigpe3JldHVybiBTfSxyYWRpbzpmdW5jdGlvbigpe3JldHVybiB3Lmhhc0NsYXNzKGcucmFkaW8pfHxcInJhZGlvXCI9PXcuYXR0cihcInR5cGVcIil9LGluZGV0ZXJtaW5hdGU6ZnVuY3Rpb24oKXtyZXR1cm4gdy5wcm9wKFwiaW5kZXRlcm1pbmF0ZVwiKSE9PWkmJncucHJvcChcImluZGV0ZXJtaW5hdGVcIil9LGNoZWNrZWQ6ZnVuY3Rpb24oKXtyZXR1cm4gdy5wcm9wKFwiY2hlY2tlZFwiKSE9PWkmJncucHJvcChcImNoZWNrZWRcIil9LGRpc2FibGVkOmZ1bmN0aW9uKCl7cmV0dXJuIHcucHJvcChcImRpc2FibGVkXCIpIT09aSYmdy5wcm9wKFwiZGlzYWJsZWRcIil9LGVuYWJsZWQ6ZnVuY3Rpb24oKXtyZXR1cm4hbS5pcy5kaXNhYmxlZCgpfSxkZXRlcm1pbmF0ZTpmdW5jdGlvbigpe3JldHVybiFtLmlzLmluZGV0ZXJtaW5hdGUoKX0sdW5jaGVja2VkOmZ1bmN0aW9uKCl7cmV0dXJuIW0uaXMuY2hlY2tlZCgpfX0sc2hvdWxkOnthbGxvd0NoZWNrOmZ1bmN0aW9uKCl7cmV0dXJuIG0uaXMuZGV0ZXJtaW5hdGUoKSYmbS5pcy5jaGVja2VkKCkmJiFtLnNob3VsZC5mb3JjZUNhbGxiYWNrcygpPyhtLmRlYnVnKFwiU2hvdWxkIG5vdCBhbGxvdyBjaGVjaywgY2hlY2tib3ggaXMgYWxyZWFkeSBjaGVja2VkXCIpLCExKTpmLmJlZm9yZUNoZWNrZWQuYXBwbHkoayk9PT0hMT8obS5kZWJ1ZyhcIlNob3VsZCBub3QgYWxsb3cgY2hlY2ssIGJlZm9yZUNoZWNrZWQgY2FuY2VsbGVkXCIpLCExKTohMH0sYWxsb3dVbmNoZWNrOmZ1bmN0aW9uKCl7cmV0dXJuIG0uaXMuZGV0ZXJtaW5hdGUoKSYmbS5pcy51bmNoZWNrZWQoKSYmIW0uc2hvdWxkLmZvcmNlQ2FsbGJhY2tzKCk/KG0uZGVidWcoXCJTaG91bGQgbm90IGFsbG93IHVuY2hlY2ssIGNoZWNrYm94IGlzIGFscmVhZHkgdW5jaGVja2VkXCIpLCExKTpmLmJlZm9yZVVuY2hlY2tlZC5hcHBseShrKT09PSExPyhtLmRlYnVnKFwiU2hvdWxkIG5vdCBhbGxvdyB1bmNoZWNrLCBiZWZvcmVVbmNoZWNrZWQgY2FuY2VsbGVkXCIpLCExKTohMH0sYWxsb3dJbmRldGVybWluYXRlOmZ1bmN0aW9uKCl7cmV0dXJuIG0uaXMuaW5kZXRlcm1pbmF0ZSgpJiYhbS5zaG91bGQuZm9yY2VDYWxsYmFja3MoKT8obS5kZWJ1ZyhcIlNob3VsZCBub3QgYWxsb3cgaW5kZXRlcm1pbmF0ZSwgY2hlY2tib3ggaXMgYWxyZWFkeSBpbmRldGVybWluYXRlXCIpLCExKTpmLmJlZm9yZUluZGV0ZXJtaW5hdGUuYXBwbHkoayk9PT0hMT8obS5kZWJ1ZyhcIlNob3VsZCBub3QgYWxsb3cgaW5kZXRlcm1pbmF0ZSwgYmVmb3JlSW5kZXRlcm1pbmF0ZSBjYW5jZWxsZWRcIiksITEpOiEwfSxhbGxvd0RldGVybWluYXRlOmZ1bmN0aW9uKCl7cmV0dXJuIG0uaXMuZGV0ZXJtaW5hdGUoKSYmIW0uc2hvdWxkLmZvcmNlQ2FsbGJhY2tzKCk/KG0uZGVidWcoXCJTaG91bGQgbm90IGFsbG93IGRldGVybWluYXRlLCBjaGVja2JveCBpcyBhbHJlYWR5IGRldGVybWluYXRlXCIpLCExKTpmLmJlZm9yZURldGVybWluYXRlLmFwcGx5KGspPT09ITE/KG0uZGVidWcoXCJTaG91bGQgbm90IGFsbG93IGRldGVybWluYXRlLCBiZWZvcmVEZXRlcm1pbmF0ZSBjYW5jZWxsZWRcIiksITEpOiEwfSxmb3JjZUNhbGxiYWNrczpmdW5jdGlvbigpe3JldHVybiBtLmlzLmluaXRpYWxMb2FkKCkmJmYuZmlyZU9uSW5pdH0saWdub3JlQ2FsbGJhY2tzOmZ1bmN0aW9uKCl7cmV0dXJuIFMmJiFmLmZpcmVPbkluaXR9fSxjYW46e2NoYW5nZTpmdW5jdGlvbigpe3JldHVybiEoeC5oYXNDbGFzcyhnLmRpc2FibGVkKXx8eC5oYXNDbGFzcyhnLnJlYWRPbmx5KXx8dy5wcm9wKFwiZGlzYWJsZWRcIil8fHcucHJvcChcInJlYWRvbmx5XCIpKX0sdW5jaGVjazpmdW5jdGlvbigpe3JldHVyblwiYm9vbGVhblwiPT10eXBlb2YgZi51bmNoZWNrYWJsZT9mLnVuY2hlY2thYmxlOiFtLmlzLnJhZGlvKCl9fSxzZXQ6e2luaXRpYWxMb2FkOmZ1bmN0aW9uKCl7Uz0hMH0sY2hlY2tlZDpmdW5jdGlvbigpe3JldHVybiBtLnZlcmJvc2UoXCJTZXR0aW5nIGNsYXNzIHRvIGNoZWNrZWRcIikseC5yZW1vdmVDbGFzcyhnLmluZGV0ZXJtaW5hdGUpLmFkZENsYXNzKGcuY2hlY2tlZCksbS5pcy5yYWRpbygpJiZtLnVuY2hlY2tPdGhlcnMoKSwhbS5pcy5pbmRldGVybWluYXRlKCkmJm0uaXMuY2hlY2tlZCgpP3ZvaWQgbS5kZWJ1ZyhcIklucHV0IGlzIGFscmVhZHkgY2hlY2tlZCwgc2tpcHBpbmcgaW5wdXQgcHJvcGVydHkgY2hhbmdlXCIpOihtLnZlcmJvc2UoXCJTZXR0aW5nIHN0YXRlIHRvIGNoZWNrZWRcIixrKSx3LnByb3AoXCJpbmRldGVybWluYXRlXCIsITEpLnByb3AoXCJjaGVja2VkXCIsITApLHZvaWQgbS50cmlnZ2VyLmNoYW5nZSgpKX0sdW5jaGVja2VkOmZ1bmN0aW9uKCl7cmV0dXJuIG0udmVyYm9zZShcIlJlbW92aW5nIGNoZWNrZWQgY2xhc3NcIikseC5yZW1vdmVDbGFzcyhnLmluZGV0ZXJtaW5hdGUpLnJlbW92ZUNsYXNzKGcuY2hlY2tlZCksIW0uaXMuaW5kZXRlcm1pbmF0ZSgpJiZtLmlzLnVuY2hlY2tlZCgpP3ZvaWQgbS5kZWJ1ZyhcIklucHV0IGlzIGFscmVhZHkgdW5jaGVja2VkXCIpOihtLmRlYnVnKFwiU2V0dGluZyBzdGF0ZSB0byB1bmNoZWNrZWRcIiksdy5wcm9wKFwiaW5kZXRlcm1pbmF0ZVwiLCExKS5wcm9wKFwiY2hlY2tlZFwiLCExKSx2b2lkIG0udHJpZ2dlci5jaGFuZ2UoKSl9LGluZGV0ZXJtaW5hdGU6ZnVuY3Rpb24oKXtyZXR1cm4gbS52ZXJib3NlKFwiU2V0dGluZyBjbGFzcyB0byBpbmRldGVybWluYXRlXCIpLHguYWRkQ2xhc3MoZy5pbmRldGVybWluYXRlKSxtLmlzLmluZGV0ZXJtaW5hdGUoKT92b2lkIG0uZGVidWcoXCJJbnB1dCBpcyBhbHJlYWR5IGluZGV0ZXJtaW5hdGUsIHNraXBwaW5nIGlucHV0IHByb3BlcnR5IGNoYW5nZVwiKToobS5kZWJ1ZyhcIlNldHRpbmcgc3RhdGUgdG8gaW5kZXRlcm1pbmF0ZVwiKSx3LnByb3AoXCJpbmRldGVybWluYXRlXCIsITApLHZvaWQgbS50cmlnZ2VyLmNoYW5nZSgpKX0sZGV0ZXJtaW5hdGU6ZnVuY3Rpb24oKXtyZXR1cm4gbS52ZXJib3NlKFwiUmVtb3ZpbmcgaW5kZXRlcm1pbmF0ZSBjbGFzc1wiKSx4LnJlbW92ZUNsYXNzKGcuaW5kZXRlcm1pbmF0ZSksbS5pcy5kZXRlcm1pbmF0ZSgpP3ZvaWQgbS5kZWJ1ZyhcIklucHV0IGlzIGFscmVhZHkgZGV0ZXJtaW5hdGUsIHNraXBwaW5nIGlucHV0IHByb3BlcnR5IGNoYW5nZVwiKToobS5kZWJ1ZyhcIlNldHRpbmcgc3RhdGUgdG8gZGV0ZXJtaW5hdGVcIiksdm9pZCB3LnByb3AoXCJpbmRldGVybWluYXRlXCIsITEpKX0sZGlzYWJsZWQ6ZnVuY3Rpb24oKXtyZXR1cm4gbS52ZXJib3NlKFwiU2V0dGluZyBjbGFzcyB0byBkaXNhYmxlZFwiKSx4LmFkZENsYXNzKGcuZGlzYWJsZWQpLG0uaXMuZGlzYWJsZWQoKT92b2lkIG0uZGVidWcoXCJJbnB1dCBpcyBhbHJlYWR5IGRpc2FibGVkLCBza2lwcGluZyBpbnB1dCBwcm9wZXJ0eSBjaGFuZ2VcIik6KG0uZGVidWcoXCJTZXR0aW5nIHN0YXRlIHRvIGRpc2FibGVkXCIpLHcucHJvcChcImRpc2FibGVkXCIsXCJkaXNhYmxlZFwiKSx2b2lkIG0udHJpZ2dlci5jaGFuZ2UoKSl9LGVuYWJsZWQ6ZnVuY3Rpb24oKXtyZXR1cm4gbS52ZXJib3NlKFwiUmVtb3ZpbmcgZGlzYWJsZWQgY2xhc3NcIikseC5yZW1vdmVDbGFzcyhnLmRpc2FibGVkKSxtLmlzLmVuYWJsZWQoKT92b2lkIG0uZGVidWcoXCJJbnB1dCBpcyBhbHJlYWR5IGVuYWJsZWQsIHNraXBwaW5nIGlucHV0IHByb3BlcnR5IGNoYW5nZVwiKToobS5kZWJ1ZyhcIlNldHRpbmcgc3RhdGUgdG8gZW5hYmxlZFwiKSx3LnByb3AoXCJkaXNhYmxlZFwiLCExKSx2b2lkIG0udHJpZ2dlci5jaGFuZ2UoKSl9LHRhYmJhYmxlOmZ1bmN0aW9uKCl7bS52ZXJib3NlKFwiQWRkaW5nIHRhYmluZGV4IHRvIGNoZWNrYm94XCIpLHcuYXR0cihcInRhYmluZGV4XCIpPT09aSYmdy5hdHRyKFwidGFiaW5kZXhcIiwwKX19LHJlbW92ZTp7aW5pdGlhbExvYWQ6ZnVuY3Rpb24oKXtTPSExfX0sdHJpZ2dlcjp7Y2hhbmdlOmZ1bmN0aW9uKCl7bS52ZXJib3NlKFwiVHJpZ2dlcmluZyBjaGFuZ2UgZXZlbnQgZnJvbSBwcm9ncmFtbWF0aWMgY2hhbmdlXCIpLHcudHJpZ2dlcihcImNoYW5nZVwiKX19LGNyZWF0ZTp7bGFiZWw6ZnVuY3Rpb24oKXt3LnByZXZBbGwodi5sYWJlbCkubGVuZ3RoPjA/KHcucHJldih2LmxhYmVsKS5kZXRhY2goKS5pbnNlcnRBZnRlcih3KSxtLmRlYnVnKFwiTW92aW5nIGV4aXN0aW5nIGxhYmVsXCIsQykpOm0uaGFzLmxhYmVsKCl8fChDPWUoXCI8bGFiZWw+XCIpLmluc2VydEFmdGVyKHcpLG0uZGVidWcoXCJDcmVhdGluZyBsYWJlbFwiLEMpKX19LGhhczp7bGFiZWw6ZnVuY3Rpb24oKXtyZXR1cm4gQy5sZW5ndGg+MH19LGJpbmQ6e2V2ZW50czpmdW5jdGlvbigpe20udmVyYm9zZShcIkF0dGFjaGluZyBjaGVja2JveCBldmVudHNcIikseC5vbihcImNsaWNrXCIrYixtLmV2ZW50LmNsaWNrKS5vbihcImtleWRvd25cIitiLHYuaW5wdXQsbS5ldmVudC5rZXlkb3duKS5vbihcImtleXVwXCIrYix2LmlucHV0LG0uZXZlbnQua2V5dXApfX0sdW5iaW5kOntldmVudHM6ZnVuY3Rpb24oKXttLmRlYnVnKFwiUmVtb3ZpbmcgZXZlbnRzXCIpLHgub2ZmKGIpfX0sdW5jaGVja090aGVyczpmdW5jdGlvbigpe3ZhciBlPW0uZ2V0Lm90aGVyUmFkaW9zKCk7bS5kZWJ1ZyhcIlVuY2hlY2tpbmcgb3RoZXIgcmFkaW9zXCIsZSksZS5yZW1vdmVDbGFzcyhnLmNoZWNrZWQpfSx0b2dnbGU6ZnVuY3Rpb24oKXtyZXR1cm4gbS5jYW4uY2hhbmdlKCk/dm9pZChtLmlzLmluZGV0ZXJtaW5hdGUoKXx8bS5pcy51bmNoZWNrZWQoKT8obS5kZWJ1ZyhcIkN1cnJlbnRseSB1bmNoZWNrZWRcIiksbS5jaGVjaygpKTptLmlzLmNoZWNrZWQoKSYmbS5jYW4udW5jaGVjaygpJiYobS5kZWJ1ZyhcIkN1cnJlbnRseSBjaGVja2VkXCIpLG0udW5jaGVjaygpKSk6dm9pZChtLmlzLnJhZGlvKCl8fG0uZGVidWcoXCJDaGVja2JveCBpcyByZWFkLW9ubHkgb3IgZGlzYWJsZWQsIGlnbm9yaW5nIHRvZ2dsZVwiKSl9LHNldHRpbmc6ZnVuY3Rpb24odCxuKXtpZihtLmRlYnVnKFwiQ2hhbmdpbmcgc2V0dGluZ1wiLHQsbiksZS5pc1BsYWluT2JqZWN0KHQpKWUuZXh0ZW5kKCEwLGYsdCk7ZWxzZXtpZihuPT09aSlyZXR1cm4gZlt0XTtmW3RdPW59fSxpbnRlcm5hbDpmdW5jdGlvbih0LG4pe2lmKGUuaXNQbGFpbk9iamVjdCh0KSllLmV4dGVuZCghMCxtLHQpO2Vsc2V7aWYobj09PWkpcmV0dXJuIG1bdF07bVt0XT1ufX0sZGVidWc6ZnVuY3Rpb24oKXtmLmRlYnVnJiYoZi5wZXJmb3JtYW5jZT9tLnBlcmZvcm1hbmNlLmxvZyhhcmd1bWVudHMpOihtLmRlYnVnPUZ1bmN0aW9uLnByb3RvdHlwZS5iaW5kLmNhbGwoY29uc29sZS5pbmZvLGNvbnNvbGUsZi5uYW1lK1wiOlwiKSxtLmRlYnVnLmFwcGx5KGNvbnNvbGUsYXJndW1lbnRzKSkpfSx2ZXJib3NlOmZ1bmN0aW9uKCl7Zi52ZXJib3NlJiZmLmRlYnVnJiYoZi5wZXJmb3JtYW5jZT9tLnBlcmZvcm1hbmNlLmxvZyhhcmd1bWVudHMpOihtLnZlcmJvc2U9RnVuY3Rpb24ucHJvdG90eXBlLmJpbmQuY2FsbChjb25zb2xlLmluZm8sY29uc29sZSxmLm5hbWUrXCI6XCIpLG0udmVyYm9zZS5hcHBseShjb25zb2xlLGFyZ3VtZW50cykpKX0sZXJyb3I6ZnVuY3Rpb24oKXttLmVycm9yPUZ1bmN0aW9uLnByb3RvdHlwZS5iaW5kLmNhbGwoY29uc29sZS5lcnJvcixjb25zb2xlLGYubmFtZStcIjpcIiksbS5lcnJvci5hcHBseShjb25zb2xlLGFyZ3VtZW50cyl9LHBlcmZvcm1hbmNlOntsb2c6ZnVuY3Rpb24oZSl7dmFyIHQsbixpO2YucGVyZm9ybWFuY2UmJih0PShuZXcgRGF0ZSkuZ2V0VGltZSgpLGk9c3x8dCxuPXQtaSxzPXQsYy5wdXNoKHtOYW1lOmVbMF0sQXJndW1lbnRzOltdLnNsaWNlLmNhbGwoZSwxKXx8XCJcIixFbGVtZW50OlIsXCJFeGVjdXRpb24gVGltZVwiOm59KSksY2xlYXJUaW1lb3V0KG0ucGVyZm9ybWFuY2UudGltZXIpLG0ucGVyZm9ybWFuY2UudGltZXI9c2V0VGltZW91dChtLnBlcmZvcm1hbmNlLmRpc3BsYXksNTAwKX0sZGlzcGxheTpmdW5jdGlvbigpe3ZhciB0PWYubmFtZStcIjpcIixuPTA7cz0hMSxjbGVhclRpbWVvdXQobS5wZXJmb3JtYW5jZS50aW1lciksZS5lYWNoKGMsZnVuY3Rpb24oZSx0KXtuKz10W1wiRXhlY3V0aW9uIFRpbWVcIl19KSx0Kz1cIiBcIituK1wibXNcIixyJiYodCs9XCIgJ1wiK3IrXCInXCIpLChjb25zb2xlLmdyb3VwIT09aXx8Y29uc29sZS50YWJsZSE9PWkpJiZjLmxlbmd0aD4wJiYoY29uc29sZS5ncm91cENvbGxhcHNlZCh0KSxjb25zb2xlLnRhYmxlP2NvbnNvbGUudGFibGUoYyk6ZS5lYWNoKGMsZnVuY3Rpb24oZSx0KXtjb25zb2xlLmxvZyh0Lk5hbWUrXCI6IFwiK3RbXCJFeGVjdXRpb24gVGltZVwiXStcIm1zXCIpfSksY29uc29sZS5ncm91cEVuZCgpKSxjPVtdfX0saW52b2tlOmZ1bmN0aW9uKHQsbixhKXt2YXIgcixzLGMsbD1BO3JldHVybiBuPW58fGQsYT1SfHxhLFwic3RyaW5nXCI9PXR5cGVvZiB0JiZsIT09aSYmKHQ9dC5zcGxpdCgvW1xcLiBdLykscj10Lmxlbmd0aC0xLGUuZWFjaCh0LGZ1bmN0aW9uKG4sbyl7dmFyIGE9biE9cj9vK3RbbisxXS5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSt0W24rMV0uc2xpY2UoMSk6dDtpZihlLmlzUGxhaW5PYmplY3QobFthXSkmJm4hPXIpbD1sW2FdO2Vsc2V7aWYobFthXSE9PWkpcmV0dXJuIHM9bFthXSwhMTtpZighZS5pc1BsYWluT2JqZWN0KGxbb10pfHxuPT1yKXJldHVybiBsW29dIT09aT8ocz1sW29dLCExKToobS5lcnJvcihoLm1ldGhvZCx0KSwhMSk7bD1sW29dfX0pKSxlLmlzRnVuY3Rpb24ocyk/Yz1zLmFwcGx5KGEsbik6cyE9PWkmJihjPXMpLGUuaXNBcnJheShvKT9vLnB1c2goYyk6byE9PWk/bz1bbyxjXTpjIT09aSYmKG89Yyksc319LHU/KEE9PT1pJiZtLmluaXRpYWxpemUoKSxtLmludm9rZShsKSk6KEEhPT1pJiZBLmludm9rZShcImRlc3Ryb3lcIiksbS5pbml0aWFsaXplKCkpfSksbyE9PWk/bzp0aGlzfSxlLmZuLmNoZWNrYm94LnNldHRpbmdzPXtuYW1lOlwiQ2hlY2tib3hcIixuYW1lc3BhY2U6XCJjaGVja2JveFwiLGRlYnVnOiExLHZlcmJvc2U6ITAscGVyZm9ybWFuY2U6ITAsdW5jaGVja2FibGU6XCJhdXRvXCIsZmlyZU9uSW5pdDohMSxvbkNoYW5nZTpmdW5jdGlvbigpe30sYmVmb3JlQ2hlY2tlZDpmdW5jdGlvbigpe30sYmVmb3JlVW5jaGVja2VkOmZ1bmN0aW9uKCl7fSxiZWZvcmVEZXRlcm1pbmF0ZTpmdW5jdGlvbigpe30sYmVmb3JlSW5kZXRlcm1pbmF0ZTpmdW5jdGlvbigpe30sb25DaGVja2VkOmZ1bmN0aW9uKCl7fSxvblVuY2hlY2tlZDpmdW5jdGlvbigpe30sb25EZXRlcm1pbmF0ZTpmdW5jdGlvbigpe30sb25JbmRldGVybWluYXRlOmZ1bmN0aW9uKCl7fSxvbkVuYWJsZWQ6ZnVuY3Rpb24oKXt9LG9uRGlzYWJsZWQ6ZnVuY3Rpb24oKXt9LGNsYXNzTmFtZTp7Y2hlY2tlZDpcImNoZWNrZWRcIixpbmRldGVybWluYXRlOlwiaW5kZXRlcm1pbmF0ZVwiLGRpc2FibGVkOlwiZGlzYWJsZWRcIixoaWRkZW46XCJoaWRkZW5cIixyYWRpbzpcInJhZGlvXCIscmVhZE9ubHk6XCJyZWFkLW9ubHlcIn0sZXJyb3I6e21ldGhvZDpcIlRoZSBtZXRob2QgeW91IGNhbGxlZCBpcyBub3QgZGVmaW5lZFwifSxzZWxlY3Rvcjp7Y2hlY2tib3g6XCIudWkuY2hlY2tib3hcIixsYWJlbDpcImxhYmVsLCAuYm94XCIsaW5wdXQ6J2lucHV0W3R5cGU9XCJjaGVja2JveFwiXSwgaW5wdXRbdHlwZT1cInJhZGlvXCJdJyxsaW5rOlwiYVtocmVmXVwifX19KGpRdWVyeSx3aW5kb3csZG9jdW1lbnQpLGZ1bmN0aW9uKGUsdCxuLGkpe1widXNlIHN0cmljdFwiO2UuZm4uZGltbWVyPWZ1bmN0aW9uKHQpe3ZhciBvLGE9ZSh0aGlzKSxyPShuZXcgRGF0ZSkuZ2V0VGltZSgpLHM9W10sYz1hcmd1bWVudHNbMF0sbD1cInN0cmluZ1wiPT10eXBlb2YgYyx1PVtdLnNsaWNlLmNhbGwoYXJndW1lbnRzLDEpO3JldHVybiBhLmVhY2goZnVuY3Rpb24oKXt2YXIgZCxtLGYsZz1lLmlzUGxhaW5PYmplY3QodCk/ZS5leHRlbmQoITAse30sZS5mbi5kaW1tZXIuc2V0dGluZ3MsdCk6ZS5leHRlbmQoe30sZS5mbi5kaW1tZXIuc2V0dGluZ3MpLHA9Zy5zZWxlY3Rvcix2PWcubmFtZXNwYWNlLGg9Zy5jbGFzc05hbWUsYj1nLmVycm9yLHk9XCIuXCIrdix4PVwibW9kdWxlLVwiK3YsQz1hLnNlbGVjdG9yfHxcIlwiLHc9XCJvbnRvdWNoc3RhcnRcImluIG4uZG9jdW1lbnRFbGVtZW50P1widG91Y2hzdGFydFwiOlwiY2xpY2tcIixrPWUodGhpcyksUz10aGlzLFQ9ay5kYXRhKHgpO2Y9e3ByZWluaXRpYWxpemU6ZnVuY3Rpb24oKXtmLmlzLmRpbW1lcigpPyhtPWsucGFyZW50KCksZD1rKToobT1rLGQ9Zi5oYXMuZGltbWVyKCk/Zy5kaW1tZXJOYW1lP20uZmluZChwLmRpbW1lcikuZmlsdGVyKFwiLlwiK2cuZGltbWVyTmFtZSk6bS5maW5kKHAuZGltbWVyKTpmLmNyZWF0ZSgpKX0saW5pdGlhbGl6ZTpmdW5jdGlvbigpe2YuZGVidWcoXCJJbml0aWFsaXppbmcgZGltbWVyXCIsZyksZi5iaW5kLmV2ZW50cygpLGYuc2V0LmRpbW1hYmxlKCksZi5pbnN0YW50aWF0ZSgpfSxpbnN0YW50aWF0ZTpmdW5jdGlvbigpe2YudmVyYm9zZShcIlN0b3JpbmcgaW5zdGFuY2Ugb2YgbW9kdWxlXCIsZiksVD1mLGsuZGF0YSh4LFQpfSxkZXN0cm95OmZ1bmN0aW9uKCl7Zi52ZXJib3NlKFwiRGVzdHJveWluZyBwcmV2aW91cyBtb2R1bGVcIixkKSxmLnVuYmluZC5ldmVudHMoKSxmLnJlbW92ZS52YXJpYXRpb24oKSxtLm9mZih5KX0sYmluZDp7ZXZlbnRzOmZ1bmN0aW9uKCl7XCJob3ZlclwiPT1nLm9uP20ub24oXCJtb3VzZWVudGVyXCIreSxmLnNob3cpLm9uKFwibW91c2VsZWF2ZVwiK3ksZi5oaWRlKTpcImNsaWNrXCI9PWcub24mJm0ub24odyt5LGYudG9nZ2xlKSxmLmlzLnBhZ2UoKSYmKGYuZGVidWcoXCJTZXR0aW5nIGFzIGEgcGFnZSBkaW1tZXJcIixtKSxmLnNldC5wYWdlRGltbWVyKCkpLGYuaXMuY2xvc2FibGUoKSYmKGYudmVyYm9zZShcIkFkZGluZyBkaW1tZXIgY2xvc2UgZXZlbnRcIixkKSxtLm9uKHcreSxwLmRpbW1lcixmLmV2ZW50LmNsaWNrKSl9fSx1bmJpbmQ6e2V2ZW50czpmdW5jdGlvbigpe2sucmVtb3ZlRGF0YSh4KX19LGV2ZW50OntjbGljazpmdW5jdGlvbih0KXtmLnZlcmJvc2UoXCJEZXRlcm1pbmluZyBpZiBldmVudCBvY2N1cmVkIG9uIGRpbW1lclwiLHQpLCgwPT09ZC5maW5kKHQudGFyZ2V0KS5sZW5ndGh8fGUodC50YXJnZXQpLmlzKHAuY29udGVudCkpJiYoZi5oaWRlKCksdC5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKSl9fSxhZGRDb250ZW50OmZ1bmN0aW9uKHQpe3ZhciBuPWUodCk7Zi5kZWJ1ZyhcIkFkZCBjb250ZW50IHRvIGRpbW1lclwiLG4pLG4ucGFyZW50KClbMF0hPT1kWzBdJiZuLmRldGFjaCgpLmFwcGVuZFRvKGQpfSxjcmVhdGU6ZnVuY3Rpb24oKXt2YXIgdD1lKGcudGVtcGxhdGUuZGltbWVyKCkpO3JldHVybiBnLnZhcmlhdGlvbiYmKGYuZGVidWcoXCJDcmVhdGluZyBkaW1tZXIgd2l0aCB2YXJpYXRpb25cIixnLnZhcmlhdGlvbiksdC5hZGRDbGFzcyhnLnZhcmlhdGlvbikpLGcuZGltbWVyTmFtZSYmKGYuZGVidWcoXCJDcmVhdGluZyBuYW1lZCBkaW1tZXJcIixnLmRpbW1lck5hbWUpLHQuYWRkQ2xhc3MoZy5kaW1tZXJOYW1lKSksdC5hcHBlbmRUbyhtKSx0fSxzaG93OmZ1bmN0aW9uKHQpe3Q9ZS5pc0Z1bmN0aW9uKHQpP3Q6ZnVuY3Rpb24oKXt9LGYuZGVidWcoXCJTaG93aW5nIGRpbW1lclwiLGQsZyksZi5pcy5kaW1tZWQoKSYmIWYuaXMuYW5pbWF0aW5nKCl8fCFmLmlzLmVuYWJsZWQoKT9mLmRlYnVnKFwiRGltbWVyIGlzIGFscmVhZHkgc2hvd24gb3IgZGlzYWJsZWRcIik6KGYuYW5pbWF0ZS5zaG93KHQpLGcub25TaG93LmNhbGwoUyksZy5vbkNoYW5nZS5jYWxsKFMpKX0saGlkZTpmdW5jdGlvbih0KXt0PWUuaXNGdW5jdGlvbih0KT90OmZ1bmN0aW9uKCl7fSxmLmlzLmRpbW1lZCgpfHxmLmlzLmFuaW1hdGluZygpPyhmLmRlYnVnKFwiSGlkaW5nIGRpbW1lclwiLGQpLGYuYW5pbWF0ZS5oaWRlKHQpLGcub25IaWRlLmNhbGwoUyksZy5vbkNoYW5nZS5jYWxsKFMpKTpmLmRlYnVnKFwiRGltbWVyIGlzIG5vdCB2aXNpYmxlXCIpfSx0b2dnbGU6ZnVuY3Rpb24oKXtmLnZlcmJvc2UoXCJUb2dnbGluZyBkaW1tZXIgdmlzaWJpbGl0eVwiLGQpLGYuaXMuZGltbWVkKCk/Zi5oaWRlKCk6Zi5zaG93KCl9LGFuaW1hdGU6e3Nob3c6ZnVuY3Rpb24odCl7dD1lLmlzRnVuY3Rpb24odCk/dDpmdW5jdGlvbigpe30sZy51c2VDU1MmJmUuZm4udHJhbnNpdGlvbiE9PWkmJmQudHJhbnNpdGlvbihcImlzIHN1cHBvcnRlZFwiKT8oXCJhdXRvXCIhPT1nLm9wYWNpdHkmJmYuc2V0Lm9wYWNpdHkoKSxkLnRyYW5zaXRpb24oe2FuaW1hdGlvbjpnLnRyYW5zaXRpb24rXCIgaW5cIixxdWV1ZTohMSxkdXJhdGlvbjpmLmdldC5kdXJhdGlvbigpLHVzZUZhaWxTYWZlOiEwLG9uU3RhcnQ6ZnVuY3Rpb24oKXtmLnNldC5kaW1tZWQoKX0sb25Db21wbGV0ZTpmdW5jdGlvbigpe2Yuc2V0LmFjdGl2ZSgpLHQoKX19KSk6KGYudmVyYm9zZShcIlNob3dpbmcgZGltbWVyIGFuaW1hdGlvbiB3aXRoIGphdmFzY3JpcHRcIiksZi5zZXQuZGltbWVkKCksXCJhdXRvXCI9PWcub3BhY2l0eSYmKGcub3BhY2l0eT0uOCksZC5zdG9wKCkuY3NzKHtvcGFjaXR5OjAsd2lkdGg6XCIxMDAlXCIsaGVpZ2h0OlwiMTAwJVwifSkuZmFkZVRvKGYuZ2V0LmR1cmF0aW9uKCksZy5vcGFjaXR5LGZ1bmN0aW9uKCl7ZC5yZW1vdmVBdHRyKFwic3R5bGVcIiksZi5zZXQuYWN0aXZlKCksdCgpfSkpfSxoaWRlOmZ1bmN0aW9uKHQpe3Q9ZS5pc0Z1bmN0aW9uKHQpP3Q6ZnVuY3Rpb24oKXt9LGcudXNlQ1NTJiZlLmZuLnRyYW5zaXRpb24hPT1pJiZkLnRyYW5zaXRpb24oXCJpcyBzdXBwb3J0ZWRcIik/KGYudmVyYm9zZShcIkhpZGluZyBkaW1tZXIgd2l0aCBjc3NcIiksZC50cmFuc2l0aW9uKHthbmltYXRpb246Zy50cmFuc2l0aW9uK1wiIG91dFwiLHF1ZXVlOiExLGR1cmF0aW9uOmYuZ2V0LmR1cmF0aW9uKCksdXNlRmFpbFNhZmU6ITAsb25TdGFydDpmdW5jdGlvbigpe2YucmVtb3ZlLmRpbW1lZCgpfSxvbkNvbXBsZXRlOmZ1bmN0aW9uKCl7Zi5yZW1vdmUuYWN0aXZlKCksdCgpfX0pKTooZi52ZXJib3NlKFwiSGlkaW5nIGRpbW1lciB3aXRoIGphdmFzY3JpcHRcIiksZi5yZW1vdmUuZGltbWVkKCksZC5zdG9wKCkuZmFkZU91dChmLmdldC5kdXJhdGlvbigpLGZ1bmN0aW9uKCl7Zi5yZW1vdmUuYWN0aXZlKCksZC5yZW1vdmVBdHRyKFwic3R5bGVcIiksdCgpfSkpfX0sZ2V0OntkaW1tZXI6ZnVuY3Rpb24oKXtyZXR1cm4gZH0sZHVyYXRpb246ZnVuY3Rpb24oKXtyZXR1cm5cIm9iamVjdFwiPT10eXBlb2YgZy5kdXJhdGlvbj9mLmlzLmFjdGl2ZSgpP2cuZHVyYXRpb24uaGlkZTpnLmR1cmF0aW9uLnNob3c6Zy5kdXJhdGlvbn19LGhhczp7ZGltbWVyOmZ1bmN0aW9uKCl7cmV0dXJuIGcuZGltbWVyTmFtZT9rLmZpbmQocC5kaW1tZXIpLmZpbHRlcihcIi5cIitnLmRpbW1lck5hbWUpLmxlbmd0aD4wOmsuZmluZChwLmRpbW1lcikubGVuZ3RoPjB9fSxpczp7YWN0aXZlOmZ1bmN0aW9uKCl7cmV0dXJuIGQuaGFzQ2xhc3MoaC5hY3RpdmUpfSxhbmltYXRpbmc6ZnVuY3Rpb24oKXtyZXR1cm4gZC5pcyhcIjphbmltYXRlZFwiKXx8ZC5oYXNDbGFzcyhoLmFuaW1hdGluZyl9LGNsb3NhYmxlOmZ1bmN0aW9uKCl7cmV0dXJuXCJhdXRvXCI9PWcuY2xvc2FibGU/XCJob3ZlclwiPT1nLm9uPyExOiEwOmcuY2xvc2FibGV9LGRpbW1lcjpmdW5jdGlvbigpe3JldHVybiBrLmhhc0NsYXNzKGguZGltbWVyKX0sZGltbWFibGU6ZnVuY3Rpb24oKXtyZXR1cm4gay5oYXNDbGFzcyhoLmRpbW1hYmxlKX0sZGltbWVkOmZ1bmN0aW9uKCl7cmV0dXJuIG0uaGFzQ2xhc3MoaC5kaW1tZWQpfSxkaXNhYmxlZDpmdW5jdGlvbigpe3JldHVybiBtLmhhc0NsYXNzKGguZGlzYWJsZWQpfSxlbmFibGVkOmZ1bmN0aW9uKCl7cmV0dXJuIWYuaXMuZGlzYWJsZWQoKX0scGFnZTpmdW5jdGlvbigpe3JldHVybiBtLmlzKFwiYm9keVwiKX0scGFnZURpbW1lcjpmdW5jdGlvbigpe3JldHVybiBkLmhhc0NsYXNzKGgucGFnZURpbW1lcil9fSxjYW46e3Nob3c6ZnVuY3Rpb24oKXtyZXR1cm4hZC5oYXNDbGFzcyhoLmRpc2FibGVkKX19LHNldDp7b3BhY2l0eTpmdW5jdGlvbihlKXt2YXIgdD1kLmNzcyhcImJhY2tncm91bmQtY29sb3JcIiksbj10LnNwbGl0KFwiLFwiKSxpPW4mJjQ9PW4ubGVuZ3RoO2U9Zy5vcGFjaXR5fHxlLGk/KG5bM109ZStcIilcIix0PW4uam9pbihcIixcIikpOnQ9XCJyZ2JhKDAsIDAsIDAsIFwiK2UrXCIpXCIsZi5kZWJ1ZyhcIlNldHRpbmcgb3BhY2l0eSB0b1wiLGUpLGQuY3NzKFwiYmFja2dyb3VuZC1jb2xvclwiLHQpfSxhY3RpdmU6ZnVuY3Rpb24oKXtkLmFkZENsYXNzKGguYWN0aXZlKX0sZGltbWFibGU6ZnVuY3Rpb24oKXttLmFkZENsYXNzKGguZGltbWFibGUpfSxkaW1tZWQ6ZnVuY3Rpb24oKXttLmFkZENsYXNzKGguZGltbWVkKX0scGFnZURpbW1lcjpmdW5jdGlvbigpe2QuYWRkQ2xhc3MoaC5wYWdlRGltbWVyKX0sZGlzYWJsZWQ6ZnVuY3Rpb24oKXtkLmFkZENsYXNzKGguZGlzYWJsZWQpfSx2YXJpYXRpb246ZnVuY3Rpb24oZSl7ZT1lfHxnLnZhcmlhdGlvbixlJiZkLmFkZENsYXNzKGUpfX0scmVtb3ZlOnthY3RpdmU6ZnVuY3Rpb24oKXtkLnJlbW92ZUNsYXNzKGguYWN0aXZlKX0sZGltbWVkOmZ1bmN0aW9uKCl7bS5yZW1vdmVDbGFzcyhoLmRpbW1lZCl9LGRpc2FibGVkOmZ1bmN0aW9uKCl7ZC5yZW1vdmVDbGFzcyhoLmRpc2FibGVkKX0sdmFyaWF0aW9uOmZ1bmN0aW9uKGUpe2U9ZXx8Zy52YXJpYXRpb24sZSYmZC5yZW1vdmVDbGFzcyhlKX19LHNldHRpbmc6ZnVuY3Rpb24odCxuKXtpZihmLmRlYnVnKFwiQ2hhbmdpbmcgc2V0dGluZ1wiLHQsbiksZS5pc1BsYWluT2JqZWN0KHQpKWUuZXh0ZW5kKCEwLGcsdCk7ZWxzZXtpZihuPT09aSlyZXR1cm4gZ1t0XTtnW3RdPW59fSxpbnRlcm5hbDpmdW5jdGlvbih0LG4pe2lmKGUuaXNQbGFpbk9iamVjdCh0KSllLmV4dGVuZCghMCxmLHQpO2Vsc2V7aWYobj09PWkpcmV0dXJuIGZbdF07Zlt0XT1ufX0sZGVidWc6ZnVuY3Rpb24oKXtnLmRlYnVnJiYoZy5wZXJmb3JtYW5jZT9mLnBlcmZvcm1hbmNlLmxvZyhhcmd1bWVudHMpOihmLmRlYnVnPUZ1bmN0aW9uLnByb3RvdHlwZS5iaW5kLmNhbGwoY29uc29sZS5pbmZvLGNvbnNvbGUsZy5uYW1lK1wiOlwiKSxmLmRlYnVnLmFwcGx5KGNvbnNvbGUsYXJndW1lbnRzKSkpfSx2ZXJib3NlOmZ1bmN0aW9uKCl7Zy52ZXJib3NlJiZnLmRlYnVnJiYoZy5wZXJmb3JtYW5jZT9mLnBlcmZvcm1hbmNlLmxvZyhhcmd1bWVudHMpOihmLnZlcmJvc2U9RnVuY3Rpb24ucHJvdG90eXBlLmJpbmQuY2FsbChjb25zb2xlLmluZm8sY29uc29sZSxnLm5hbWUrXCI6XCIpLGYudmVyYm9zZS5hcHBseShjb25zb2xlLGFyZ3VtZW50cykpKX0sZXJyb3I6ZnVuY3Rpb24oKXtmLmVycm9yPUZ1bmN0aW9uLnByb3RvdHlwZS5iaW5kLmNhbGwoY29uc29sZS5lcnJvcixjb25zb2xlLGcubmFtZStcIjpcIiksZi5lcnJvci5hcHBseShjb25zb2xlLGFyZ3VtZW50cyl9LHBlcmZvcm1hbmNlOntsb2c6ZnVuY3Rpb24oZSl7dmFyIHQsbixpO2cucGVyZm9ybWFuY2UmJih0PShuZXcgRGF0ZSkuZ2V0VGltZSgpLGk9cnx8dCxuPXQtaSxyPXQscy5wdXNoKHtOYW1lOmVbMF0sQXJndW1lbnRzOltdLnNsaWNlLmNhbGwoZSwxKXx8XCJcIixFbGVtZW50OlMsXCJFeGVjdXRpb24gVGltZVwiOm59KSksY2xlYXJUaW1lb3V0KGYucGVyZm9ybWFuY2UudGltZXIpLGYucGVyZm9ybWFuY2UudGltZXI9c2V0VGltZW91dChmLnBlcmZvcm1hbmNlLmRpc3BsYXksNTAwKX0sZGlzcGxheTpmdW5jdGlvbigpe3ZhciB0PWcubmFtZStcIjpcIixuPTA7cj0hMSxjbGVhclRpbWVvdXQoZi5wZXJmb3JtYW5jZS50aW1lciksZS5lYWNoKHMsZnVuY3Rpb24oZSx0KXtuKz10W1wiRXhlY3V0aW9uIFRpbWVcIl19KSx0Kz1cIiBcIituK1wibXNcIixDJiYodCs9XCIgJ1wiK0MrXCInXCIpLGEubGVuZ3RoPjEmJih0Kz1cIiAoXCIrYS5sZW5ndGgrXCIpXCIpLChjb25zb2xlLmdyb3VwIT09aXx8Y29uc29sZS50YWJsZSE9PWkpJiZzLmxlbmd0aD4wJiYoY29uc29sZS5ncm91cENvbGxhcHNlZCh0KSxjb25zb2xlLnRhYmxlP2NvbnNvbGUudGFibGUocyk6ZS5lYWNoKHMsZnVuY3Rpb24oZSx0KXtjb25zb2xlLmxvZyh0Lk5hbWUrXCI6IFwiK3RbXCJFeGVjdXRpb24gVGltZVwiXStcIm1zXCIpfSksY29uc29sZS5ncm91cEVuZCgpKSxzPVtdfX0saW52b2tlOmZ1bmN0aW9uKHQsbixhKXt2YXIgcixzLGMsbD1UO3JldHVybiBuPW58fHUsYT1TfHxhLFwic3RyaW5nXCI9PXR5cGVvZiB0JiZsIT09aSYmKHQ9dC5zcGxpdCgvW1xcLiBdLykscj10Lmxlbmd0aC0xLGUuZWFjaCh0LGZ1bmN0aW9uKG4sbyl7dmFyIGE9biE9cj9vK3RbbisxXS5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSt0W24rMV0uc2xpY2UoMSk6dDtpZihlLmlzUGxhaW5PYmplY3QobFthXSkmJm4hPXIpbD1sW2FdO2Vsc2V7aWYobFthXSE9PWkpcmV0dXJuIHM9bFthXSwhMTtpZighZS5pc1BsYWluT2JqZWN0KGxbb10pfHxuPT1yKXJldHVybiBsW29dIT09aT8ocz1sW29dLCExKTooZi5lcnJvcihiLm1ldGhvZCx0KSwhMSk7bD1sW29dfX0pKSxlLmlzRnVuY3Rpb24ocyk/Yz1zLmFwcGx5KGEsbik6cyE9PWkmJihjPXMpLGUuaXNBcnJheShvKT9vLnB1c2goYyk6byE9PWk/bz1bbyxjXTpjIT09aSYmKG89Yyksc319LGYucHJlaW5pdGlhbGl6ZSgpLGw/KFQ9PT1pJiZmLmluaXRpYWxpemUoKSxmLmludm9rZShjKSk6KFQhPT1pJiZULmludm9rZShcImRlc3Ryb3lcIiksZi5pbml0aWFsaXplKCkpfSksbyE9PWk/bzp0aGlzfSxlLmZuLmRpbW1lci5zZXR0aW5ncz17bmFtZTpcIkRpbW1lclwiLG5hbWVzcGFjZTpcImRpbW1lclwiLGRlYnVnOiExLHZlcmJvc2U6ITEscGVyZm9ybWFuY2U6ITAsZGltbWVyTmFtZTohMSx2YXJpYXRpb246ITEsY2xvc2FibGU6XCJhdXRvXCIsdXNlQ1NTOiEwLHRyYW5zaXRpb246XCJmYWRlXCIsb246ITEsb3BhY2l0eTpcImF1dG9cIixkdXJhdGlvbjp7c2hvdzo1MDAsaGlkZTo1MDB9LG9uQ2hhbmdlOmZ1bmN0aW9uKCl7fSxvblNob3c6ZnVuY3Rpb24oKXt9LG9uSGlkZTpmdW5jdGlvbigpe30sZXJyb3I6e21ldGhvZDpcIlRoZSBtZXRob2QgeW91IGNhbGxlZCBpcyBub3QgZGVmaW5lZC5cIn0sY2xhc3NOYW1lOnthY3RpdmU6XCJhY3RpdmVcIixhbmltYXRpbmc6XCJhbmltYXRpbmdcIixkaW1tYWJsZTpcImRpbW1hYmxlXCIsZGltbWVkOlwiZGltbWVkXCIsZGltbWVyOlwiZGltbWVyXCIsZGlzYWJsZWQ6XCJkaXNhYmxlZFwiLGhpZGU6XCJoaWRlXCIscGFnZURpbW1lcjpcInBhZ2VcIixzaG93Olwic2hvd1wifSxzZWxlY3Rvcjp7ZGltbWVyOlwiPiAudWkuZGltbWVyXCIsY29udGVudDpcIi51aS5kaW1tZXIgPiAuY29udGVudCwgLnVpLmRpbW1lciA+IC5jb250ZW50ID4gLmNlbnRlclwifSx0ZW1wbGF0ZTp7ZGltbWVyOmZ1bmN0aW9uKCl7cmV0dXJuIGUoXCI8ZGl2IC8+XCIpLmF0dHIoXCJjbGFzc1wiLFwidWkgZGltbWVyXCIpfX19fShqUXVlcnksd2luZG93LGRvY3VtZW50KSxmdW5jdGlvbihlLHQsbixpKXtcInVzZSBzdHJpY3RcIjtlLmZuLmRyb3Bkb3duPWZ1bmN0aW9uKG8pe3ZhciBhLHI9ZSh0aGlzKSxzPWUobiksYz1yLnNlbGVjdG9yfHxcIlwiLGw9XCJvbnRvdWNoc3RhcnRcImluIG4uZG9jdW1lbnRFbGVtZW50LHU9KG5ldyBEYXRlKS5nZXRUaW1lKCksZD1bXSxtPWFyZ3VtZW50c1swXSxmPVwic3RyaW5nXCI9PXR5cGVvZiBtLGc9W10uc2xpY2UuY2FsbChhcmd1bWVudHMsMSk7cmV0dXJuIHIuZWFjaChmdW5jdGlvbihwKXt2YXIgdixoLGIseSx4LEMsdyxrPWUuaXNQbGFpbk9iamVjdChvKT9lLmV4dGVuZCghMCx7fSxlLmZuLmRyb3Bkb3duLnNldHRpbmdzLG8pOmUuZXh0ZW5kKHt9LGUuZm4uZHJvcGRvd24uc2V0dGluZ3MpLFM9ay5jbGFzc05hbWUsVD1rLm1lc3NhZ2UsQT1rLmZpZWxkcyxSPWsubWV0YWRhdGEsUD1rLm5hbWVzcGFjZSxFPWsucmVnRXhwLEY9ay5zZWxlY3RvcixEPWsuZXJyb3IsTz1rLnRlbXBsYXRlcyxxPVwiLlwiK1Asaj1cIm1vZHVsZS1cIitQLHo9ZSh0aGlzKSxJPWUoay5jb250ZXh0KSxMPXouZmluZChGLnRleHQpLE49ei5maW5kKEYuc2VhcmNoKSxWPXouZmluZChGLmlucHV0KSxIPXouZmluZChGLmljb24pLE09ei5wcmV2KCkuZmluZChGLnRleHQpLmxlbmd0aD4wP3oucHJldigpLmZpbmQoRi50ZXh0KTp6LnByZXYoKSxVPXouY2hpbGRyZW4oRi5tZW51KSxXPVUuZmluZChGLml0ZW0pLEI9ITEsUT0hMSxYPSExLCQ9dGhpcyxZPXouZGF0YShqKTt3PXtpbml0aWFsaXplOmZ1bmN0aW9uKCl7dy5kZWJ1ZyhcIkluaXRpYWxpemluZyBkcm9wZG93blwiLGspLHcuaXMuYWxyZWFkeVNldHVwKCk/dy5zZXR1cC5yZWZlcmVuY2UoKToody5zZXR1cC5sYXlvdXQoKSx3LnJlZnJlc2hEYXRhKCksdy5zYXZlLmRlZmF1bHRzKCksdy5yZXN0b3JlLnNlbGVjdGVkKCksdy5jcmVhdGUuaWQoKSx3LmJpbmQuZXZlbnRzKCksdy5vYnNlcnZlQ2hhbmdlcygpLHcuaW5zdGFudGlhdGUoKSl9LGluc3RhbnRpYXRlOmZ1bmN0aW9uKCl7dy52ZXJib3NlKFwiU3RvcmluZyBpbnN0YW5jZSBvZiBkcm9wZG93blwiLHcpLFk9dyx6LmRhdGEoaix3KX0sZGVzdHJveTpmdW5jdGlvbigpe3cudmVyYm9zZShcIkRlc3Ryb3lpbmcgcHJldmlvdXMgZHJvcGRvd25cIix6KSx3LnJlbW92ZS50YWJiYWJsZSgpLHoub2ZmKHEpLnJlbW92ZURhdGEoaiksVS5vZmYocSkscy5vZmYoYikseCYmeC5kaXNjb25uZWN0KCksQyYmQy5kaXNjb25uZWN0KCl9LG9ic2VydmVDaGFuZ2VzOmZ1bmN0aW9uKCl7XCJNdXRhdGlvbk9ic2VydmVyXCJpbiB0JiYoeD1uZXcgTXV0YXRpb25PYnNlcnZlcihmdW5jdGlvbihlKXt3LmRlYnVnKFwiPHNlbGVjdD4gbW9kaWZpZWQsIHJlY3JlYXRpbmcgbWVudVwiKSx3LnNldHVwLnNlbGVjdCgpfSksQz1uZXcgTXV0YXRpb25PYnNlcnZlcihmdW5jdGlvbihlKXt3LmRlYnVnKFwiTWVudSBtb2RpZmllZCwgdXBkYXRpbmcgc2VsZWN0b3IgY2FjaGVcIiksdy5yZWZyZXNoKCl9KSx3Lmhhcy5pbnB1dCgpJiZ4Lm9ic2VydmUoVlswXSx7Y2hpbGRMaXN0OiEwLHN1YnRyZWU6ITB9KSx3Lmhhcy5tZW51KCkmJkMub2JzZXJ2ZShVWzBdLHtjaGlsZExpc3Q6ITAsc3VidHJlZTohMH0pLHcuZGVidWcoXCJTZXR0aW5nIHVwIG11dGF0aW9uIG9ic2VydmVyXCIseCxDKSl9LGNyZWF0ZTp7aWQ6ZnVuY3Rpb24oKXt5PShNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKDE2KStcIjAwMDAwMDAwMFwiKS5zdWJzdHIoMiw4KSxiPVwiLlwiK3ksdy52ZXJib3NlKFwiQ3JlYXRpbmcgdW5pcXVlIGlkIGZvciBlbGVtZW50XCIseSl9LHVzZXJDaG9pY2U6ZnVuY3Rpb24odCl7dmFyIG4sbyxhO3JldHVybih0PXR8fHcuZ2V0LnVzZXJWYWx1ZXMoKSk/KHQ9ZS5pc0FycmF5KHQpP3Q6W3RdLGUuZWFjaCh0LGZ1bmN0aW9uKHQscil7dy5nZXQuaXRlbShyKT09PSExJiYoYT1rLnRlbXBsYXRlcy5hZGRpdGlvbih3LmFkZC52YXJpYWJsZXMoVC5hZGRSZXN1bHQscikpLG89ZShcIjxkaXYgLz5cIikuaHRtbChhKS5hdHRyKFwiZGF0YS1cIitSLnZhbHVlLHIpLmF0dHIoXCJkYXRhLVwiK1IudGV4dCxyKS5hZGRDbGFzcyhTLmFkZGl0aW9uKS5hZGRDbGFzcyhTLml0ZW0pLG49bj09PWk/bzpuLmFkZChvKSx3LnZlcmJvc2UoXCJDcmVhdGluZyB1c2VyIGNob2ljZXMgZm9yIHZhbHVlXCIscixvKSl9KSxuKTohMX0sdXNlckxhYmVsczpmdW5jdGlvbih0KXt2YXIgbj13LmdldC51c2VyVmFsdWVzKCk7biYmKHcuZGVidWcoXCJBZGRpbmcgdXNlciBsYWJlbHNcIixuKSxlLmVhY2gobixmdW5jdGlvbihlLHQpe3cudmVyYm9zZShcIkFkZGluZyBjdXN0b20gdXNlciB2YWx1ZVwiKSx3LmFkZC5sYWJlbCh0LHQpfSkpfSxtZW51OmZ1bmN0aW9uKCl7VT1lKFwiPGRpdiAvPlwiKS5hZGRDbGFzcyhTLm1lbnUpLmFwcGVuZFRvKHopfX0sc2VhcmNoOmZ1bmN0aW9uKGUpe2U9ZSE9PWk/ZTp3LmdldC5xdWVyeSgpLHcudmVyYm9zZShcIlNlYXJjaGluZyBmb3IgcXVlcnlcIixlKSx3LmZpbHRlcihlKX0sc2VsZWN0OntmaXJzdFVuZmlsdGVyZWQ6ZnVuY3Rpb24oKXt3LnZlcmJvc2UoXCJTZWxlY3RpbmcgZmlyc3Qgbm9uLWZpbHRlcmVkIGVsZW1lbnRcIiksdy5yZW1vdmUuc2VsZWN0ZWRJdGVtKCksVy5ub3QoRi51bnNlbGVjdGFibGUpLmVxKDApLmFkZENsYXNzKFMuc2VsZWN0ZWQpfSxuZXh0QXZhaWxhYmxlOmZ1bmN0aW9uKGUpe2U9ZS5lcSgwKTt2YXIgdD1lLm5leHRBbGwoRi5pdGVtKS5ub3QoRi51bnNlbGVjdGFibGUpLmVxKDApLG49ZS5wcmV2QWxsKEYuaXRlbSkubm90KEYudW5zZWxlY3RhYmxlKS5lcSgwKSxpPXQubGVuZ3RoPjA7aT8ody52ZXJib3NlKFwiTW92aW5nIHNlbGVjdGlvbiB0b1wiLHQpLHQuYWRkQ2xhc3MoUy5zZWxlY3RlZCkpOih3LnZlcmJvc2UoXCJNb3Zpbmcgc2VsZWN0aW9uIHRvXCIsbiksbi5hZGRDbGFzcyhTLnNlbGVjdGVkKSl9fSxzZXR1cDp7YXBpOmZ1bmN0aW9uKCl7dmFyIGU9e2RlYnVnOmsuZGVidWcsb246ITF9O3cudmVyYm9zZShcIkZpcnN0IHJlcXVlc3QsIGluaXRpYWxpemluZyBBUElcIiksei5hcGkoZSl9LGxheW91dDpmdW5jdGlvbigpe3ouaXMoXCJzZWxlY3RcIikmJih3LnNldHVwLnNlbGVjdCgpLHcuc2V0dXAucmV0dXJuZWRPYmplY3QoKSksdy5oYXMubWVudSgpfHx3LmNyZWF0ZS5tZW51KCksdy5pcy5zZWFyY2goKSYmIXcuaGFzLnNlYXJjaCgpJiYody52ZXJib3NlKFwiQWRkaW5nIHNlYXJjaCBpbnB1dFwiKSxOPWUoXCI8aW5wdXQgLz5cIikuYWRkQ2xhc3MoUy5zZWFyY2gpLmluc2VydEJlZm9yZShMKSksay5hbGxvd1RhYiYmdy5zZXQudGFiYmFibGUoKX0sc2VsZWN0OmZ1bmN0aW9uKCl7dmFyIHQ9dy5nZXQuc2VsZWN0VmFsdWVzKCk7dy5kZWJ1ZyhcIkRyb3Bkb3duIGluaXRpYWxpemVkIG9uIGEgc2VsZWN0XCIsdCksei5pcyhcInNlbGVjdFwiKSYmKFY9eiksVi5wYXJlbnQoRi5kcm9wZG93bikubGVuZ3RoPjA/KHcuZGVidWcoXCJVSSBkcm9wZG93biBhbHJlYWR5IGV4aXN0cy4gQ3JlYXRpbmcgZHJvcGRvd24gbWVudSBvbmx5XCIpLHo9Vi5jbG9zZXN0KEYuZHJvcGRvd24pLHcuaGFzLm1lbnUoKXx8dy5jcmVhdGUubWVudSgpLFU9ei5jaGlsZHJlbihGLm1lbnUpLHcuc2V0dXAubWVudSh0KSk6KHcuZGVidWcoXCJDcmVhdGluZyBlbnRpcmUgZHJvcGRvd24gZnJvbSBzZWxlY3RcIiksej1lKFwiPGRpdiAvPlwiKS5hdHRyKFwiY2xhc3NcIixWLmF0dHIoXCJjbGFzc1wiKSkuYWRkQ2xhc3MoUy5zZWxlY3Rpb24pLmFkZENsYXNzKFMuZHJvcGRvd24pLmh0bWwoTy5kcm9wZG93bih0KSkuaW5zZXJ0QmVmb3JlKFYpLFYuaGFzQ2xhc3MoUy5tdWx0aXBsZSkmJlYucHJvcChcIm11bHRpcGxlXCIpPT09ITEmJih3LmVycm9yKEQubWlzc2luZ011bHRpcGxlKSxWLnByb3AoXCJtdWx0aXBsZVwiLCEwKSksVi5pcyhcIlttdWx0aXBsZV1cIikmJncuc2V0Lm11bHRpcGxlKCksVi5wcm9wKFwiZGlzYWJsZWRcIikmJih3LmRlYnVnKFwiRGlzYWJsaW5nIGRyb3Bkb3duXCIpLHouYWRkQ2xhc3MoUy5kaXNhYmxlZCkpLFYucmVtb3ZlQXR0cihcImNsYXNzXCIpLmRldGFjaCgpLnByZXBlbmRUbyh6KSksdy5yZWZyZXNoKCl9LG1lbnU6ZnVuY3Rpb24oZSl7VS5odG1sKE8ubWVudShlLEEpKSxXPVUuZmluZChGLml0ZW0pfSxyZWZlcmVuY2U6ZnVuY3Rpb24oKXt3LmRlYnVnKFwiRHJvcGRvd24gYmVoYXZpb3Igd2FzIGNhbGxlZCBvbiBzZWxlY3QsIHJlcGxhY2luZyB3aXRoIGNsb3Nlc3QgZHJvcGRvd25cIiksej16LnBhcmVudChGLmRyb3Bkb3duKSx3LnJlZnJlc2goKSx3LnNldHVwLnJldHVybmVkT2JqZWN0KCksZiYmKFk9dyx3Lmludm9rZShtKSl9LHJldHVybmVkT2JqZWN0OmZ1bmN0aW9uKCl7dmFyIGU9ci5zbGljZSgwLHApLHQ9ci5zbGljZShwKzEpO3I9ZS5hZGQoeikuYWRkKHQpfX0scmVmcmVzaDpmdW5jdGlvbigpe3cucmVmcmVzaFNlbGVjdG9ycygpLHcucmVmcmVzaERhdGEoKX0scmVmcmVzaFNlbGVjdG9yczpmdW5jdGlvbigpe3cudmVyYm9zZShcIlJlZnJlc2hpbmcgc2VsZWN0b3IgY2FjaGVcIiksTD16LmZpbmQoRi50ZXh0KSxOPXouZmluZChGLnNlYXJjaCksVj16LmZpbmQoRi5pbnB1dCksSD16LmZpbmQoRi5pY29uKSxNPXoucHJldigpLmZpbmQoRi50ZXh0KS5sZW5ndGg+MD96LnByZXYoKS5maW5kKEYudGV4dCk6ei5wcmV2KCksVT16LmNoaWxkcmVuKEYubWVudSksVz1VLmZpbmQoRi5pdGVtKX0scmVmcmVzaERhdGE6ZnVuY3Rpb24oKXt3LnZlcmJvc2UoXCJSZWZyZXNoaW5nIGNhY2hlZCBtZXRhZGF0YVwiKSxXLnJlbW92ZURhdGEoUi50ZXh0KS5yZW1vdmVEYXRhKFIudmFsdWUpLHoucmVtb3ZlRGF0YShSLmRlZmF1bHRUZXh0KS5yZW1vdmVEYXRhKFIuZGVmYXVsdFZhbHVlKS5yZW1vdmVEYXRhKFIucGxhY2Vob2xkZXJUZXh0KX0sdG9nZ2xlOmZ1bmN0aW9uKCl7dy52ZXJib3NlKFwiVG9nZ2xpbmcgbWVudSB2aXNpYmlsaXR5XCIpLHcuaXMuYWN0aXZlKCk/dy5oaWRlKCk6dy5zaG93KCl9LHNob3c6ZnVuY3Rpb24odCl7aWYodD1lLmlzRnVuY3Rpb24odCk/dDpmdW5jdGlvbigpe30sdy5jYW4uc2hvdygpJiYhdy5pcy5hY3RpdmUoKSl7aWYody5kZWJ1ZyhcIlNob3dpbmcgZHJvcGRvd25cIiksdy5pcy5tdWx0aXBsZSgpJiYhdy5oYXMuc2VhcmNoKCkmJncuaXMuYWxsRmlsdGVyZWQoKSlyZXR1cm4hMDt3Lmhhcy5tZXNzYWdlKCkmJiF3Lmhhcy5tYXhTZWxlY3Rpb25zKCkmJncucmVtb3ZlLm1lc3NhZ2UoKSxrLm9uU2hvdy5jYWxsKCQpIT09ITEmJncuYW5pbWF0ZS5zaG93KGZ1bmN0aW9uKCl7dy5jYW4uY2xpY2soKSYmdy5iaW5kLmludGVudCgpLHcuc2V0LnZpc2libGUoKSx0LmNhbGwoJCl9KX19LGhpZGU6ZnVuY3Rpb24odCl7dD1lLmlzRnVuY3Rpb24odCk/dDpmdW5jdGlvbigpe30sdy5pcy5hY3RpdmUoKSYmKHcuZGVidWcoXCJIaWRpbmcgZHJvcGRvd25cIiksay5vbkhpZGUuY2FsbCgkKSE9PSExJiZ3LmFuaW1hdGUuaGlkZShmdW5jdGlvbigpe3cucmVtb3ZlLnZpc2libGUoKSx0LmNhbGwoJCl9KSl9LGhpZGVPdGhlcnM6ZnVuY3Rpb24oKXt3LnZlcmJvc2UoXCJGaW5kaW5nIG90aGVyIGRyb3Bkb3ducyB0byBoaWRlXCIpLHIubm90KHopLmhhcyhGLm1lbnUrXCIuXCIrUy52aXNpYmxlKS5kcm9wZG93bihcImhpZGVcIil9LGhpZGVNZW51OmZ1bmN0aW9uKCl7dy52ZXJib3NlKFwiSGlkaW5nIG1lbnUgIGluc3RhbnRhbmVvdXNseVwiKSx3LnJlbW92ZS5hY3RpdmUoKSx3LnJlbW92ZS52aXNpYmxlKCksVS50cmFuc2l0aW9uKFwiaGlkZVwiKX0saGlkZVN1Yk1lbnVzOmZ1bmN0aW9uKCl7dmFyIGU9VS5jaGlsZHJlbihGLml0ZW0pLmZpbmQoRi5tZW51KTt3LnZlcmJvc2UoXCJIaWRpbmcgc3ViIG1lbnVzXCIsZSksZS50cmFuc2l0aW9uKFwiaGlkZVwiKX0sYmluZDp7ZXZlbnRzOmZ1bmN0aW9uKCl7bCYmdy5iaW5kLnRvdWNoRXZlbnRzKCksdy5iaW5kLmtleWJvYXJkRXZlbnRzKCksdy5iaW5kLmlucHV0RXZlbnRzKCksdy5iaW5kLm1vdXNlRXZlbnRzKCl9LHRvdWNoRXZlbnRzOmZ1bmN0aW9uKCl7dy5kZWJ1ZyhcIlRvdWNoIGRldmljZSBkZXRlY3RlZCBiaW5kaW5nIGFkZGl0aW9uYWwgdG91Y2ggZXZlbnRzXCIpLHcuaXMuc2VhcmNoU2VsZWN0aW9uKCl8fHcuaXMuc2luZ2xlKCkmJnoub24oXCJ0b3VjaHN0YXJ0XCIrcSx3LmV2ZW50LnRlc3QudG9nZ2xlKSxVLm9uKFwidG91Y2hzdGFydFwiK3EsRi5pdGVtLHcuZXZlbnQuaXRlbS5tb3VzZWVudGVyKX0sa2V5Ym9hcmRFdmVudHM6ZnVuY3Rpb24oKXt3LnZlcmJvc2UoXCJCaW5kaW5nIGtleWJvYXJkIGV2ZW50c1wiKSx6Lm9uKFwia2V5ZG93blwiK3Esdy5ldmVudC5rZXlkb3duKSx3Lmhhcy5zZWFyY2goKSYmei5vbih3LmdldC5pbnB1dEV2ZW50KCkrcSxGLnNlYXJjaCx3LmV2ZW50LmlucHV0KSx3LmlzLm11bHRpcGxlKCkmJnMub24oXCJrZXlkb3duXCIrYix3LmV2ZW50LmRvY3VtZW50LmtleWRvd24pfSxpbnB1dEV2ZW50czpmdW5jdGlvbigpe3cudmVyYm9zZShcIkJpbmRpbmcgaW5wdXQgY2hhbmdlIGV2ZW50c1wiKSx6Lm9uKFwiY2hhbmdlXCIrcSxGLmlucHV0LHcuZXZlbnQuY2hhbmdlKX0sbW91c2VFdmVudHM6ZnVuY3Rpb24oKXt3LnZlcmJvc2UoXCJCaW5kaW5nIG1vdXNlIGV2ZW50c1wiKSx3LmlzLm11bHRpcGxlKCkmJnoub24oXCJjbGlja1wiK3EsRi5sYWJlbCx3LmV2ZW50LmxhYmVsLmNsaWNrKS5vbihcImNsaWNrXCIrcSxGLnJlbW92ZSx3LmV2ZW50LnJlbW92ZS5jbGljayksdy5pcy5zZWFyY2hTZWxlY3Rpb24oKT8oei5vbihcIm1vdXNlZG93blwiK3EsRi5tZW51LHcuZXZlbnQubWVudS5tb3VzZWRvd24pLm9uKFwibW91c2V1cFwiK3EsRi5tZW51LHcuZXZlbnQubWVudS5tb3VzZXVwKS5vbihcImNsaWNrXCIrcSxGLmljb24sdy5ldmVudC5pY29uLmNsaWNrKS5vbihcImNsaWNrXCIrcSxGLnNlYXJjaCx3LnNob3cpLm9uKFwiZm9jdXNcIitxLEYuc2VhcmNoLHcuZXZlbnQuc2VhcmNoLmZvY3VzKS5vbihcImJsdXJcIitxLEYuc2VhcmNoLHcuZXZlbnQuc2VhcmNoLmJsdXIpLm9uKFwiY2xpY2tcIitxLEYudGV4dCx3LmV2ZW50LnRleHQuZm9jdXMpLHcuaXMubXVsdGlwbGUoKSYmei5vbihcImNsaWNrXCIrcSx3LmV2ZW50LmNsaWNrKSk6KFwiY2xpY2tcIj09ay5vbj96Lm9uKFwiY2xpY2tcIitxLEYuaWNvbix3LmV2ZW50Lmljb24uY2xpY2spLm9uKFwiY2xpY2tcIitxLHcuZXZlbnQudGVzdC50b2dnbGUpOlwiaG92ZXJcIj09ay5vbj96Lm9uKFwibW91c2VlbnRlclwiK3Esdy5kZWxheS5zaG93KS5vbihcIm1vdXNlbGVhdmVcIitxLHcuZGVsYXkuaGlkZSk6ei5vbihrLm9uK3Esdy50b2dnbGUpLHoub24oXCJtb3VzZWRvd25cIitxLHcuZXZlbnQubW91c2Vkb3duKS5vbihcIm1vdXNldXBcIitxLHcuZXZlbnQubW91c2V1cCkub24oXCJmb2N1c1wiK3Esdy5ldmVudC5mb2N1cykub24oXCJibHVyXCIrcSx3LmV2ZW50LmJsdXIpKSxVLm9uKFwibW91c2VlbnRlclwiK3EsRi5pdGVtLHcuZXZlbnQuaXRlbS5tb3VzZWVudGVyKS5vbihcIm1vdXNlbGVhdmVcIitxLEYuaXRlbSx3LmV2ZW50Lml0ZW0ubW91c2VsZWF2ZSkub24oXCJjbGlja1wiK3EsRi5pdGVtLHcuZXZlbnQuaXRlbS5jbGljayl9LGludGVudDpmdW5jdGlvbigpe3cudmVyYm9zZShcIkJpbmRpbmcgaGlkZSBpbnRlbnQgZXZlbnQgdG8gZG9jdW1lbnRcIiksbCYmcy5vbihcInRvdWNoc3RhcnRcIitiLHcuZXZlbnQudGVzdC50b3VjaCkub24oXCJ0b3VjaG1vdmVcIitiLHcuZXZlbnQudGVzdC50b3VjaCkscy5vbihcImNsaWNrXCIrYix3LmV2ZW50LnRlc3QuaGlkZSl9fSx1bmJpbmQ6e2ludGVudDpmdW5jdGlvbigpe3cudmVyYm9zZShcIlJlbW92aW5nIGhpZGUgaW50ZW50IGV2ZW50IGZyb20gZG9jdW1lbnRcIiksbCYmcy5vZmYoXCJ0b3VjaHN0YXJ0XCIrYikub2ZmKFwidG91Y2htb3ZlXCIrYikscy5vZmYoXCJjbGlja1wiK2IpfX0sZmlsdGVyOmZ1bmN0aW9uKGUpe3ZhciB0PWUhPT1pP2U6dy5nZXQucXVlcnkoKSxuPWZ1bmN0aW9uKCl7dy5pcy5tdWx0aXBsZSgpJiZ3LmZpbHRlckFjdGl2ZSgpLHcuc2VsZWN0LmZpcnN0VW5maWx0ZXJlZCgpLHcuaGFzLmFsbFJlc3VsdHNGaWx0ZXJlZCgpP2sub25Ob1Jlc3VsdHMuY2FsbCgkLHQpP2suYWxsb3dBZGRpdGlvbnN8fCh3LnZlcmJvc2UoXCJBbGwgaXRlbXMgZmlsdGVyZWQsIHNob3dpbmcgbWVzc2FnZVwiLHQpLHcuYWRkLm1lc3NhZ2UoVC5ub1Jlc3VsdHMpKToody52ZXJib3NlKFwiQWxsIGl0ZW1zIGZpbHRlcmVkLCBoaWRpbmcgZHJvcGRvd25cIix0KSx3LmhpZGVNZW51KCkpOncucmVtb3ZlLm1lc3NhZ2UoKSxrLmFsbG93QWRkaXRpb25zJiZ3LmFkZC51c2VyU3VnZ2VzdGlvbihlKSx3LmlzLnNlYXJjaFNlbGVjdGlvbigpJiZ3LmNhbi5zaG93KCkmJncuaXMuZm9jdXNlZE9uU2VhcmNoKCkmJncuc2hvdygpfTtrLnVzZUxhYmVscyYmdy5oYXMubWF4U2VsZWN0aW9ucygpfHwoay5hcGlTZXR0aW5ncz93LmNhbi51c2VBUEkoKT93LnF1ZXJ5UmVtb3RlKHQsZnVuY3Rpb24oKXtuKCl9KTp3LmVycm9yKEQubm9BUEkpOih3LmZpbHRlckl0ZW1zKHQpLG4oKSkpfSxxdWVyeVJlbW90ZTpmdW5jdGlvbih0LG4pe3ZhciBpPXtlcnJvckR1cmF0aW9uOiExLHRocm90dGxlOmsudGhyb3R0bGUsdXJsRGF0YTp7cXVlcnk6dH0sb25FcnJvcjpmdW5jdGlvbigpe3cuYWRkLm1lc3NhZ2UoVC5zZXJ2ZXJFcnJvciksbigpfSxvbkZhaWx1cmU6ZnVuY3Rpb24oKXt3LmFkZC5tZXNzYWdlKFQuc2VydmVyRXJyb3IpLG4oKX0sb25TdWNjZXNzOmZ1bmN0aW9uKGUpe3cucmVtb3ZlLm1lc3NhZ2UoKSx3LnNldHVwLm1lbnUoe3ZhbHVlczplLnJlc3VsdHN9KSxuKCl9fTt6LmFwaShcImdldCByZXF1ZXN0XCIpfHx3LnNldHVwLmFwaSgpLGk9ZS5leHRlbmQoITAse30saSxrLmFwaVNldHRpbmdzKSx6LmFwaShcInNldHRpbmdcIixpKS5hcGkoXCJxdWVyeVwiKX0sZmlsdGVySXRlbXM6ZnVuY3Rpb24odCl7dmFyIG49dCE9PWk/dDp3LmdldC5xdWVyeSgpLG89ZSgpLGE9dy5lc2NhcGUucmVnRXhwKG4pLHI9bmV3IFJlZ0V4cChcIl5cIithLFwiaWdtXCIpO3cuaGFzLnF1ZXJ5KCk/KHcudmVyYm9zZShcIlNlYXJjaGluZyBmb3IgbWF0Y2hpbmcgdmFsdWVzXCIsbiksVy5lYWNoKGZ1bmN0aW9uKCl7dmFyIHQsaSxhPWUodGhpcyk7aWYoXCJib3RoXCI9PWsubWF0Y2h8fFwidGV4dFwiPT1rLm1hdGNoKXtpZih0PVN0cmluZyh3LmdldC5jaG9pY2VUZXh0KGEsITEpKSwtMSE9PXQuc2VhcmNoKHIpKXJldHVybiBvPW8uYWRkKGEpLCEwO2lmKGsuZnVsbFRleHRTZWFyY2gmJncuZnV6enlTZWFyY2gobix0KSlyZXR1cm4gbz1vLmFkZChhKSwhMH1pZihcImJvdGhcIj09ay5tYXRjaHx8XCJ2YWx1ZVwiPT1rLm1hdGNoKXtpZihpPVN0cmluZyh3LmdldC5jaG9pY2VWYWx1ZShhLHQpKSwtMSE9PWkuc2VhcmNoKHIpKXJldHVybiBvPW8uYWRkKGEpLCEwO2lmKGsuZnVsbFRleHRTZWFyY2gmJncuZnV6enlTZWFyY2gobixpKSlyZXR1cm4gbz1vLmFkZChhKSwhMH19KSk6bz1XLHcuZGVidWcoXCJTaG93aW5nIG9ubHkgbWF0Y2hlZCBpdGVtc1wiLG4pLHcucmVtb3ZlLmZpbHRlcmVkSXRlbSgpLFcubm90KG8pLmFkZENsYXNzKFMuZmlsdGVyZWQpfSxmdXp6eVNlYXJjaDpmdW5jdGlvbihlLHQpe3ZhciBuPXQubGVuZ3RoLGk9ZS5sZW5ndGg7aWYoZT1lLnRvTG93ZXJDYXNlKCksdD10LnRvTG93ZXJDYXNlKCksaT5uKXJldHVybiExO2lmKGk9PT1uKXJldHVybiBlPT09dDtlOmZvcih2YXIgbz0wLGE9MDtpPm87bysrKXtmb3IodmFyIHI9ZS5jaGFyQ29kZUF0KG8pO24+YTspaWYodC5jaGFyQ29kZUF0KGErKyk9PT1yKWNvbnRpbnVlIGU7cmV0dXJuITF9cmV0dXJuITB9LGZpbHRlckFjdGl2ZTpmdW5jdGlvbigpe2sudXNlTGFiZWxzJiZXLmZpbHRlcihcIi5cIitTLmFjdGl2ZSkuYWRkQ2xhc3MoUy5maWx0ZXJlZCl9LGZvY3VzU2VhcmNoOmZ1bmN0aW9uKCl7dy5pcy5zZWFyY2goKSYmIXcuaXMuZm9jdXNlZE9uU2VhcmNoKCkmJk5bMF0uZm9jdXMoKX0sZm9yY2VTZWxlY3Rpb246ZnVuY3Rpb24oKXt2YXIgZT1XLm5vdChTLmZpbHRlcmVkKS5maWx0ZXIoXCIuXCIrUy5zZWxlY3RlZCkuZXEoMCksdD1XLm5vdChTLmZpbHRlcmVkKS5maWx0ZXIoXCIuXCIrUy5hY3RpdmUpLmVxKDApLG49ZS5sZW5ndGg+MD9lOnQsaT1uLnNpemUoKT4wO2kmJncuaGFzLnF1ZXJ5KCk/KHcuZGVidWcoXCJGb3JjaW5nIHBhcnRpYWwgc2VsZWN0aW9uIHRvIHNlbGVjdGVkIGl0ZW1cIixuKSx3LmV2ZW50Lml0ZW0uY2xpY2suY2FsbChuKSk6dy5oaWRlKCl9LGV2ZW50OntjaGFuZ2U6ZnVuY3Rpb24oKXtYfHwody5kZWJ1ZyhcIklucHV0IGNoYW5nZWQsIHVwZGF0aW5nIHNlbGVjdGlvblwiKSx3LnNldC5zZWxlY3RlZCgpKX0sZm9jdXM6ZnVuY3Rpb24oKXtrLnNob3dPbkZvY3VzJiYhQiYmdy5pcy5oaWRkZW4oKSYmIWgmJncuc2hvdygpfSxjbGljazpmdW5jdGlvbih0KXt2YXIgbj1lKHQudGFyZ2V0KTtuLmlzKHopJiYhdy5pcy5mb2N1c2VkT25TZWFyY2goKSYmdy5mb2N1c1NlYXJjaCgpfSxibHVyOmZ1bmN0aW9uKGUpe2g9bi5hY3RpdmVFbGVtZW50PT09dGhpcyxCfHxofHwody5yZW1vdmUuYWN0aXZlTGFiZWwoKSx3LmhpZGUoKSl9LG1vdXNlZG93bjpmdW5jdGlvbigpe0I9ITB9LG1vdXNldXA6ZnVuY3Rpb24oKXtCPSExfSxzZWFyY2g6e2ZvY3VzOmZ1bmN0aW9uKCl7Qj0hMCx3LmlzLm11bHRpcGxlKCkmJncucmVtb3ZlLmFjdGl2ZUxhYmVsKCksay5zaG93T25Gb2N1cyYmdy5zaG93KCl9LGJsdXI6ZnVuY3Rpb24oZSl7aD1uLmFjdGl2ZUVsZW1lbnQ9PT10aGlzLFF8fGg/aCYmay5mb3JjZVNlbGVjdGlvbiYmdy5mb3JjZVNlbGVjdGlvbigpOncuaXMubXVsdGlwbGUoKT8ody5yZW1vdmUuYWN0aXZlTGFiZWwoKSx3LmhpZGUoKSk6ay5mb3JjZVNlbGVjdGlvbj93LmZvcmNlU2VsZWN0aW9uKCk6dy5oaWRlKCl9fSxpY29uOntjbGljazpmdW5jdGlvbihlKXt3LnRvZ2dsZSgpLGUuc3RvcFByb3BhZ2F0aW9uKCl9fSx0ZXh0Ontmb2N1czpmdW5jdGlvbihlKXtCPSEwLHcuZm9jdXNTZWFyY2goKX19LGlucHV0OmZ1bmN0aW9uKGUpeyh3LmlzLm11bHRpcGxlKCl8fHcuaXMuc2VhcmNoU2VsZWN0aW9uKCkpJiZ3LnNldC5maWx0ZXJlZCgpLGNsZWFyVGltZW91dCh3LnRpbWVyKSx3LnRpbWVyPXNldFRpbWVvdXQody5zZWFyY2gsay5kZWxheS5zZWFyY2gpfSxsYWJlbDp7Y2xpY2s6ZnVuY3Rpb24odCl7dmFyIG49ZSh0aGlzKSxpPXouZmluZChGLmxhYmVsKSxvPWkuZmlsdGVyKFwiLlwiK1MuYWN0aXZlKSxhPW4ubmV4dEFsbChcIi5cIitTLmFjdGl2ZSkscj1uLnByZXZBbGwoXCIuXCIrUy5hY3RpdmUpLHM9YS5sZW5ndGg+MD9uLm5leHRVbnRpbChhKS5hZGQobykuYWRkKG4pOm4ucHJldlVudGlsKHIpLmFkZChvKS5hZGQobik7dC5zaGlmdEtleT8oby5yZW1vdmVDbGFzcyhTLmFjdGl2ZSkscy5hZGRDbGFzcyhTLmFjdGl2ZSkpOnQuY3RybEtleT9uLnRvZ2dsZUNsYXNzKFMuYWN0aXZlKTooby5yZW1vdmVDbGFzcyhTLmFjdGl2ZSksbi5hZGRDbGFzcyhTLmFjdGl2ZSkpLGsub25MYWJlbFNlbGVjdC5hcHBseSh0aGlzLGkuZmlsdGVyKFwiLlwiK1MuYWN0aXZlKSl9fSxyZW1vdmU6e2NsaWNrOmZ1bmN0aW9uKCl7dmFyIHQ9ZSh0aGlzKS5wYXJlbnQoKTt0Lmhhc0NsYXNzKFMuYWN0aXZlKT93LnJlbW92ZS5hY3RpdmVMYWJlbHMoKTp3LnJlbW92ZS5hY3RpdmVMYWJlbHModCl9fSx0ZXN0Ont0b2dnbGU6ZnVuY3Rpb24oZSl7dmFyIHQ9dy5pcy5tdWx0aXBsZSgpP3cuc2hvdzp3LnRvZ2dsZTt3LmRldGVybWluZS5ldmVudE9uRWxlbWVudChlLHQpJiZlLnByZXZlbnREZWZhdWx0KCl9LHRvdWNoOmZ1bmN0aW9uKGUpe3cuZGV0ZXJtaW5lLmV2ZW50T25FbGVtZW50KGUsZnVuY3Rpb24oKXtcInRvdWNoc3RhcnRcIj09ZS50eXBlP3cudGltZXI9c2V0VGltZW91dChmdW5jdGlvbigpe3cuaGlkZSgpfSxrLmRlbGF5LnRvdWNoKTpcInRvdWNobW92ZVwiPT1lLnR5cGUmJmNsZWFyVGltZW91dCh3LnRpbWVyKX0pLGUuc3RvcFByb3BhZ2F0aW9uKCl9LGhpZGU6ZnVuY3Rpb24oZSl7dy5kZXRlcm1pbmUuZXZlbnRJbk1vZHVsZShlLHcuaGlkZSl9fSxtZW51Onttb3VzZWRvd246ZnVuY3Rpb24oKXtRPSEwfSxtb3VzZXVwOmZ1bmN0aW9uKCl7UT0hMX19LGl0ZW06e21vdXNlZW50ZXI6ZnVuY3Rpb24odCl7dmFyIG49ZSh0aGlzKS5jaGlsZHJlbihGLm1lbnUpLGk9ZSh0aGlzKS5zaWJsaW5ncyhGLml0ZW0pLmNoaWxkcmVuKEYubWVudSk7bi5sZW5ndGg+MCYmKGNsZWFyVGltZW91dCh3Lml0ZW1UaW1lciksdy5pdGVtVGltZXI9c2V0VGltZW91dChmdW5jdGlvbigpe3cudmVyYm9zZShcIlNob3dpbmcgc3ViLW1lbnVcIixuKSxlLmVhY2goaSxmdW5jdGlvbigpe3cuYW5pbWF0ZS5oaWRlKCExLGUodGhpcykpfSksdy5hbmltYXRlLnNob3coITEsbil9LGsuZGVsYXkuc2hvdyksdC5wcmV2ZW50RGVmYXVsdCgpKX0sbW91c2VsZWF2ZTpmdW5jdGlvbih0KXt2YXIgbj1lKHRoaXMpLmNoaWxkcmVuKEYubWVudSk7bi5sZW5ndGg+MCYmKGNsZWFyVGltZW91dCh3Lml0ZW1UaW1lciksdy5pdGVtVGltZXI9c2V0VGltZW91dChmdW5jdGlvbigpe3cudmVyYm9zZShcIkhpZGluZyBzdWItbWVudVwiLG4pLHcuYW5pbWF0ZS5oaWRlKCExLG4pfSxrLmRlbGF5LmhpZGUpKX0sdG91Y2hlbmQ6ZnVuY3Rpb24oKXt9LGNsaWNrOmZ1bmN0aW9uKHQpe3ZhciBuPWUodGhpcyksaT1lKHQ/dC50YXJnZXQ6XCJcIiksbz1uLmZpbmQoRi5tZW51KSxhPXcuZ2V0LmNob2ljZVRleHQobikscj13LmdldC5jaG9pY2VWYWx1ZShuLGEpLHM9by5sZW5ndGg+MCxjPW8uZmluZChpKS5sZW5ndGg+MDtjfHxzJiYhay5hbGxvd0NhdGVnb3J5U2VsZWN0aW9ufHwoay51c2VMYWJlbHN8fCh3LnJlbW92ZS5maWx0ZXJlZEl0ZW0oKSx3LnJlbW92ZS5zZWFyY2hUZXJtKCksdy5zZXQuc2Nyb2xsUG9zaXRpb24obikpLHcuZGV0ZXJtaW5lLnNlbGVjdEFjdGlvbi5jYWxsKHRoaXMsYSxyKSl9fSxkb2N1bWVudDp7a2V5ZG93bjpmdW5jdGlvbihlKXt2YXIgdD1lLndoaWNoLG49dy5nZXQuc2hvcnRjdXRLZXlzKCksaT13LmlzLmluT2JqZWN0KHQsbik7aWYoaSl7dmFyIG89ei5maW5kKEYubGFiZWwpLGE9by5maWx0ZXIoXCIuXCIrUy5hY3RpdmUpLHI9KGEuZGF0YShSLnZhbHVlKSxvLmluZGV4KGEpKSxzPW8ubGVuZ3RoLGM9YS5sZW5ndGg+MCxsPWEubGVuZ3RoPjEsdT0wPT09cixkPXIrMT09cyxtPXcuaXMuc2VhcmNoU2VsZWN0aW9uKCksZj13LmlzLmZvY3VzZWRPblNlYXJjaCgpLGc9dy5pcy5mb2N1c2VkKCkscD1mJiYwPT09dy5nZXQuY2FyZXRQb3NpdGlvbigpO2lmKG0mJiFjJiYhZilyZXR1cm47dD09bi5sZWZ0QXJyb3c/IWcmJiFwfHxjP2MmJihlLnNoaWZ0S2V5P3cudmVyYm9zZShcIkFkZGluZyBwcmV2aW91cyBsYWJlbCB0byBzZWxlY3Rpb25cIik6KHcudmVyYm9zZShcIlNlbGVjdGluZyBwcmV2aW91cyBsYWJlbFwiKSxvLnJlbW92ZUNsYXNzKFMuYWN0aXZlKSksdSYmIWw/YS5hZGRDbGFzcyhTLmFjdGl2ZSk6YS5wcmV2KEYuc2libGluZ0xhYmVsKS5hZGRDbGFzcyhTLmFjdGl2ZSkuZW5kKCksZS5wcmV2ZW50RGVmYXVsdCgpKToody52ZXJib3NlKFwiU2VsZWN0aW5nIHByZXZpb3VzIGxhYmVsXCIpLG8ubGFzdCgpLmFkZENsYXNzKFMuYWN0aXZlKSk6dD09bi5yaWdodEFycm93PyhnJiYhYyYmby5maXJzdCgpLmFkZENsYXNzKFMuYWN0aXZlKSxjJiYoZS5zaGlmdEtleT93LnZlcmJvc2UoXCJBZGRpbmcgbmV4dCBsYWJlbCB0byBzZWxlY3Rpb25cIik6KHcudmVyYm9zZShcIlNlbGVjdGluZyBuZXh0IGxhYmVsXCIpLFxyXG5vLnJlbW92ZUNsYXNzKFMuYWN0aXZlKSksZD9tP2Y/by5yZW1vdmVDbGFzcyhTLmFjdGl2ZSk6dy5mb2N1c1NlYXJjaCgpOmw/YS5uZXh0KEYuc2libGluZ0xhYmVsKS5hZGRDbGFzcyhTLmFjdGl2ZSk6YS5hZGRDbGFzcyhTLmFjdGl2ZSk6YS5uZXh0KEYuc2libGluZ0xhYmVsKS5hZGRDbGFzcyhTLmFjdGl2ZSksZS5wcmV2ZW50RGVmYXVsdCgpKSk6dD09bi5kZWxldGVLZXl8fHQ9PW4uYmFja3NwYWNlP2M/KHcudmVyYm9zZShcIlJlbW92aW5nIGFjdGl2ZSBsYWJlbHNcIiksZCYmbSYmIWYmJncuZm9jdXNTZWFyY2goKSxhLmxhc3QoKS5uZXh0KEYuc2libGluZ0xhYmVsKS5hZGRDbGFzcyhTLmFjdGl2ZSksdy5yZW1vdmUuYWN0aXZlTGFiZWxzKGEpLGUucHJldmVudERlZmF1bHQoKSk6cCYmIWMmJnQ9PW4uYmFja3NwYWNlJiYody52ZXJib3NlKFwiUmVtb3ZpbmcgbGFzdCBsYWJlbCBvbiBpbnB1dCBiYWNrc3BhY2VcIiksYT1vLmxhc3QoKS5hZGRDbGFzcyhTLmFjdGl2ZSksdy5yZW1vdmUuYWN0aXZlTGFiZWxzKGEpKTphLnJlbW92ZUNsYXNzKFMuYWN0aXZlKX19fSxrZXlkb3duOmZ1bmN0aW9uKGUpe3ZhciB0PWUud2hpY2gsbj13LmdldC5zaG9ydGN1dEtleXMoKSxpPXcuaXMuaW5PYmplY3QodCxuKTtpZihpKXt2YXIgbyxhLHI9Vy5ub3QoRi51bnNlbGVjdGFibGUpLmZpbHRlcihcIi5cIitTLnNlbGVjdGVkKS5lcSgwKSxzPVUuY2hpbGRyZW4oXCIuXCIrUy5hY3RpdmUpLmVxKDApLGM9ci5sZW5ndGg+MD9yOnMsbD1jLmxlbmd0aD4wP2Muc2libGluZ3MoXCI6bm90KC5cIitTLmZpbHRlcmVkK1wiKVwiKS5hbmRTZWxmKCk6VS5jaGlsZHJlbihcIjpub3QoLlwiK1MuZmlsdGVyZWQrXCIpXCIpLHU9Yy5jaGlsZHJlbihGLm1lbnUpLGQ9Yy5jbG9zZXN0KEYubWVudSksbT1kLmhhc0NsYXNzKFMudmlzaWJsZSl8fGQuaGFzQ2xhc3MoUy5hbmltYXRpbmcpfHxkLnBhcmVudChGLm1lbnUpLmxlbmd0aD4wLGY9dS5sZW5ndGg+MCxnPWMubGVuZ3RoPjAscD1jLm5vdChGLnVuc2VsZWN0YWJsZSkubGVuZ3RoPjAsdj10PT1uLmRlbGltaXRlciYmay5hbGxvd0FkZGl0aW9ucyYmdy5pcy5tdWx0aXBsZSgpO2lmKHcuaXMudmlzaWJsZSgpKXtpZigodD09bi5lbnRlcnx8dikmJih0PT1uLmVudGVyJiZnJiZmJiYhay5hbGxvd0NhdGVnb3J5U2VsZWN0aW9uPyh3LnZlcmJvc2UoXCJQcmVzc2VkIGVudGVyIG9uIHVuc2VsZWN0YWJsZSBjYXRlZ29yeSwgb3BlbmluZyBzdWIgbWVudVwiKSx0PW4ucmlnaHRBcnJvdyk6cCYmKHcudmVyYm9zZShcIlNlbGVjdGluZyBpdGVtIGZyb20ga2V5Ym9hcmQgc2hvcnRjdXRcIixjKSx3LmV2ZW50Lml0ZW0uY2xpY2suY2FsbChjLGUpLHcuaXMuc2VhcmNoU2VsZWN0aW9uKCkmJncucmVtb3ZlLnNlYXJjaFRlcm0oKSksZS5wcmV2ZW50RGVmYXVsdCgpKSx0PT1uLmxlZnRBcnJvdyYmKGE9ZFswXSE9PVVbMF0sYSYmKHcudmVyYm9zZShcIkxlZnQga2V5IHByZXNzZWQsIGNsb3Npbmcgc3ViLW1lbnVcIiksdy5hbmltYXRlLmhpZGUoITEsZCksYy5yZW1vdmVDbGFzcyhTLnNlbGVjdGVkKSxkLmNsb3Nlc3QoRi5pdGVtKS5hZGRDbGFzcyhTLnNlbGVjdGVkKSxlLnByZXZlbnREZWZhdWx0KCkpKSx0PT1uLnJpZ2h0QXJyb3cmJmYmJih3LnZlcmJvc2UoXCJSaWdodCBrZXkgcHJlc3NlZCwgb3BlbmluZyBzdWItbWVudVwiKSx3LmFuaW1hdGUuc2hvdyghMSx1KSxjLnJlbW92ZUNsYXNzKFMuc2VsZWN0ZWQpLHUuZmluZChGLml0ZW0pLmVxKDApLmFkZENsYXNzKFMuc2VsZWN0ZWQpLGUucHJldmVudERlZmF1bHQoKSksdD09bi51cEFycm93KXtpZihvPWcmJm0/Yy5wcmV2QWxsKEYuaXRlbStcIjpub3QoXCIrRi51bnNlbGVjdGFibGUrXCIpXCIpLmVxKDApOlcuZXEoMCksbC5pbmRleChvKTwwKXJldHVybiB3LnZlcmJvc2UoXCJVcCBrZXkgcHJlc3NlZCBidXQgcmVhY2hlZCB0b3Agb2YgY3VycmVudCBtZW51XCIpLHZvaWQgZS5wcmV2ZW50RGVmYXVsdCgpO3cudmVyYm9zZShcIlVwIGtleSBwcmVzc2VkLCBjaGFuZ2luZyBhY3RpdmUgaXRlbVwiKSxjLnJlbW92ZUNsYXNzKFMuc2VsZWN0ZWQpLG8uYWRkQ2xhc3MoUy5zZWxlY3RlZCksdy5zZXQuc2Nyb2xsUG9zaXRpb24obyksZS5wcmV2ZW50RGVmYXVsdCgpfWlmKHQ9PW4uZG93bkFycm93KXtpZihvPWcmJm0/bz1jLm5leHRBbGwoRi5pdGVtK1wiOm5vdChcIitGLnVuc2VsZWN0YWJsZStcIilcIikuZXEoMCk6Vy5lcSgwKSwwPT09by5sZW5ndGgpcmV0dXJuIHcudmVyYm9zZShcIkRvd24ga2V5IHByZXNzZWQgYnV0IHJlYWNoZWQgYm90dG9tIG9mIGN1cnJlbnQgbWVudVwiKSx2b2lkIGUucHJldmVudERlZmF1bHQoKTt3LnZlcmJvc2UoXCJEb3duIGtleSBwcmVzc2VkLCBjaGFuZ2luZyBhY3RpdmUgaXRlbVwiKSxXLnJlbW92ZUNsYXNzKFMuc2VsZWN0ZWQpLG8uYWRkQ2xhc3MoUy5zZWxlY3RlZCksdy5zZXQuc2Nyb2xsUG9zaXRpb24obyksZS5wcmV2ZW50RGVmYXVsdCgpfXQ9PW4ucGFnZVVwJiYody5zY3JvbGxQYWdlKFwidXBcIiksZS5wcmV2ZW50RGVmYXVsdCgpKSx0PT1uLnBhZ2VEb3duJiYody5zY3JvbGxQYWdlKFwiZG93blwiKSxlLnByZXZlbnREZWZhdWx0KCkpLHQ9PW4uZXNjYXBlJiYody52ZXJib3NlKFwiRXNjYXBlIGtleSBwcmVzc2VkLCBjbG9zaW5nIGRyb3Bkb3duXCIpLHcuaGlkZSgpKX1lbHNlIHYmJmUucHJldmVudERlZmF1bHQoKSx0PT1uLmRvd25BcnJvdyYmKHcudmVyYm9zZShcIkRvd24ga2V5IHByZXNzZWQsIHNob3dpbmcgZHJvcGRvd25cIiksdy5zaG93KCksZS5wcmV2ZW50RGVmYXVsdCgpKX1lbHNlIHcuaXMuc2VsZWN0aW9uKCkmJiF3LmlzLnNlYXJjaCgpJiZ3LnNldC5zZWxlY3RlZExldHRlcihTdHJpbmcuZnJvbUNoYXJDb2RlKHQpKX19LGRldGVybWluZTp7c2VsZWN0QWN0aW9uOmZ1bmN0aW9uKHQsbil7dy52ZXJib3NlKFwiRGV0ZXJtaW5pbmcgYWN0aW9uXCIsay5hY3Rpb24pLGUuaXNGdW5jdGlvbih3LmFjdGlvbltrLmFjdGlvbl0pPyh3LnZlcmJvc2UoXCJUcmlnZ2VyaW5nIHByZXNldCBhY3Rpb25cIixrLmFjdGlvbix0LG4pLHcuYWN0aW9uW2suYWN0aW9uXS5jYWxsKHRoaXMsdCxuKSk6ZS5pc0Z1bmN0aW9uKGsuYWN0aW9uKT8ody52ZXJib3NlKFwiVHJpZ2dlcmluZyB1c2VyIGFjdGlvblwiLGsuYWN0aW9uLHQsbiksay5hY3Rpb24uY2FsbCh0aGlzLHQsbikpOncuZXJyb3IoRC5hY3Rpb24say5hY3Rpb24pfSxldmVudEluTW9kdWxlOmZ1bmN0aW9uKHQsaSl7dmFyIG89ZSh0LnRhcmdldCksYT1vLmNsb3Nlc3Qobi5kb2N1bWVudEVsZW1lbnQpLmxlbmd0aD4wLHI9by5jbG9zZXN0KHopLmxlbmd0aD4wO3JldHVybiBpPWUuaXNGdW5jdGlvbihpKT9pOmZ1bmN0aW9uKCl7fSxhJiYhcj8ody52ZXJib3NlKFwiVHJpZ2dlcmluZyBldmVudFwiLGkpLGkoKSwhMCk6KHcudmVyYm9zZShcIkV2ZW50IG9jY3VycmVkIGluIGRyb3Bkb3duLCBjYW5jZWxpbmcgY2FsbGJhY2tcIiksITEpfSxldmVudE9uRWxlbWVudDpmdW5jdGlvbih0LG4pe3ZhciBpPWUodC50YXJnZXQpLG89aS5jbG9zZXN0KEYuc2libGluZ0xhYmVsKSxhPTA9PT16LmZpbmQobykubGVuZ3RoLHI9MD09PWkuY2xvc2VzdChVKS5sZW5ndGg7cmV0dXJuIG49ZS5pc0Z1bmN0aW9uKG4pP246ZnVuY3Rpb24oKXt9LGEmJnI/KHcudmVyYm9zZShcIlRyaWdnZXJpbmcgZXZlbnRcIixuKSxuKCksITApOih3LnZlcmJvc2UoXCJFdmVudCBvY2N1cnJlZCBpbiBkcm9wZG93biBtZW51LCBjYW5jZWxpbmcgY2FsbGJhY2tcIiksITEpfX0sYWN0aW9uOntub3RoaW5nOmZ1bmN0aW9uKCl7fSxhY3RpdmF0ZTpmdW5jdGlvbih0LG4pe2lmKG49biE9PWk/bjp0LHcuY2FuLmFjdGl2YXRlKGUodGhpcykpKXtpZih3LnNldC5zZWxlY3RlZChuLGUodGhpcykpLHcuaXMubXVsdGlwbGUoKSYmIXcuaXMuYWxsRmlsdGVyZWQoKSlyZXR1cm47dy5oaWRlQW5kQ2xlYXIoKX19LHNlbGVjdDpmdW5jdGlvbihlLHQpe3cuYWN0aW9uLmFjdGl2YXRlLmNhbGwodGhpcyl9LGNvbWJvOmZ1bmN0aW9uKHQsbil7bj1uIT09aT9uOnQsdy5zZXQuc2VsZWN0ZWQobixlKHRoaXMpKSx3LmhpZGVBbmRDbGVhcigpfSxoaWRlOmZ1bmN0aW9uKGUsdCl7dy5zZXQudmFsdWUodCksdy5oaWRlQW5kQ2xlYXIoKX19LGdldDp7aWQ6ZnVuY3Rpb24oKXtyZXR1cm4geX0sZGVmYXVsdFRleHQ6ZnVuY3Rpb24oKXtyZXR1cm4gei5kYXRhKFIuZGVmYXVsdFRleHQpfSxkZWZhdWx0VmFsdWU6ZnVuY3Rpb24oKXtyZXR1cm4gei5kYXRhKFIuZGVmYXVsdFZhbHVlKX0scGxhY2Vob2xkZXJUZXh0OmZ1bmN0aW9uKCl7cmV0dXJuIHouZGF0YShSLnBsYWNlaG9sZGVyVGV4dCl8fFwiXCJ9LHRleHQ6ZnVuY3Rpb24oKXtyZXR1cm4gTC50ZXh0KCl9LHF1ZXJ5OmZ1bmN0aW9uKCl7cmV0dXJuIGUudHJpbShOLnZhbCgpKX0sc2VhcmNoV2lkdGg6ZnVuY3Rpb24oZSl7cmV0dXJuIGUqay5nbHlwaFdpZHRoK1wiZW1cIn0sc2VsZWN0aW9uQ291bnQ6ZnVuY3Rpb24oKXt2YXIgdCxuPXcuZ2V0LnZhbHVlcygpO3JldHVybiB0PXcuaXMubXVsdGlwbGUoKT9lLmlzQXJyYXkobik/bi5sZW5ndGg6MDpcIlwiIT09dy5nZXQudmFsdWUoKT8xOjB9LHRyYW5zaXRpb246ZnVuY3Rpb24oZSl7cmV0dXJuXCJhdXRvXCI9PWsudHJhbnNpdGlvbj93LmlzLnVwd2FyZChlKT9cInNsaWRlIHVwXCI6XCJzbGlkZSBkb3duXCI6ay50cmFuc2l0aW9ufSx1c2VyVmFsdWVzOmZ1bmN0aW9uKCl7dmFyIHQ9dy5nZXQudmFsdWVzKCk7cmV0dXJuIHQ/KHQ9ZS5pc0FycmF5KHQpP3Q6W3RdLGUuZ3JlcCh0LGZ1bmN0aW9uKGUpe3JldHVybiB3LmdldC5pdGVtKGUpPT09ITF9KSk6ITF9LHVuaXF1ZUFycmF5OmZ1bmN0aW9uKHQpe3JldHVybiBlLmdyZXAodCxmdW5jdGlvbihuLGkpe3JldHVybiBlLmluQXJyYXkobix0KT09PWl9KX0sY2FyZXRQb3NpdGlvbjpmdW5jdGlvbigpe3ZhciBlLHQsaT1OLmdldCgwKTtyZXR1cm5cInNlbGVjdGlvblN0YXJ0XCJpbiBpP2kuc2VsZWN0aW9uU3RhcnQ6bi5zZWxlY3Rpb24/KGkuZm9jdXMoKSxlPW4uc2VsZWN0aW9uLmNyZWF0ZVJhbmdlKCksdD1lLnRleHQubGVuZ3RoLGUubW92ZVN0YXJ0KFwiY2hhcmFjdGVyXCIsLWkudmFsdWUubGVuZ3RoKSxlLnRleHQubGVuZ3RoLXQpOnZvaWQgMH0sc2hvcnRjdXRLZXlzOmZ1bmN0aW9uKCl7cmV0dXJue2JhY2tzcGFjZTo4LGRlbGltaXRlcjoxODgsZGVsZXRlS2V5OjQ2LGVudGVyOjEzLGVzY2FwZToyNyxwYWdlVXA6MzMscGFnZURvd246MzQsbGVmdEFycm93OjM3LHVwQXJyb3c6MzgscmlnaHRBcnJvdzozOSxkb3duQXJyb3c6NDB9fSx2YWx1ZTpmdW5jdGlvbigpe3ZhciB0PVYubGVuZ3RoPjA/Vi52YWwoKTp6LmRhdGEoUi52YWx1ZSk7cmV0dXJuIGUuaXNBcnJheSh0KSYmMT09PXQubGVuZ3RoJiZcIlwiPT09dFswXT9cIlwiOnR9LHZhbHVlczpmdW5jdGlvbigpe3ZhciBlPXcuZ2V0LnZhbHVlKCk7cmV0dXJuXCJcIj09PWU/XCJcIjohdy5oYXMuc2VsZWN0SW5wdXQoKSYmdy5pcy5tdWx0aXBsZSgpP1wic3RyaW5nXCI9PXR5cGVvZiBlP2Uuc3BsaXQoay5kZWxpbWl0ZXIpOlwiXCI6ZX0scmVtb3RlVmFsdWVzOmZ1bmN0aW9uKCl7dmFyIHQ9dy5nZXQudmFsdWVzKCksbj0hMTtyZXR1cm4gdCYmKFwic3RyaW5nXCI9PXR5cGVvZiB0JiYodD1bdF0pLG49e30sZS5lYWNoKHQsZnVuY3Rpb24oZSx0KXt2YXIgaT13LnJlYWQucmVtb3RlRGF0YSh0KTt3LnZlcmJvc2UoXCJSZXN0b3JpbmcgdmFsdWUgZnJvbSBzZXNzaW9uIGRhdGFcIixpLHQpLG5bdF09aT9pOnR9KSksbn0sY2hvaWNlVGV4dDpmdW5jdGlvbih0LG4pe3JldHVybiBuPW4hPT1pP246ay5wcmVzZXJ2ZUhUTUwsdD8odC5maW5kKEYubWVudSkubGVuZ3RoPjAmJih3LnZlcmJvc2UoXCJSZXRyZWl2aW5nIHRleHQgb2YgZWxlbWVudCB3aXRoIHN1Yi1tZW51XCIpLHQ9dC5jbG9uZSgpLHQuZmluZChGLm1lbnUpLnJlbW92ZSgpLHQuZmluZChGLm1lbnVJY29uKS5yZW1vdmUoKSksdC5kYXRhKFIudGV4dCkhPT1pP3QuZGF0YShSLnRleHQpOmUudHJpbShuP3QuaHRtbCgpOnQudGV4dCgpKSk6dm9pZCAwfSxjaG9pY2VWYWx1ZTpmdW5jdGlvbih0LG4pe3JldHVybiBuPW58fHcuZ2V0LmNob2ljZVRleHQodCksdD90LmRhdGEoUi52YWx1ZSkhPT1pP1N0cmluZyh0LmRhdGEoUi52YWx1ZSkpOlwic3RyaW5nXCI9PXR5cGVvZiBuP2UudHJpbShuLnRvTG93ZXJDYXNlKCkpOlN0cmluZyhuKTohMX0saW5wdXRFdmVudDpmdW5jdGlvbigpe3ZhciBlPU5bMF07cmV0dXJuIGU/ZS5vbmlucHV0IT09aT9cImlucHV0XCI6ZS5vbnByb3BlcnR5Y2hhbmdlIT09aT9cInByb3BlcnR5Y2hhbmdlXCI6XCJrZXl1cFwiOiExfSxzZWxlY3RWYWx1ZXM6ZnVuY3Rpb24oKXt2YXIgdD17fTtyZXR1cm4gdC52YWx1ZXM9W10sei5maW5kKFwib3B0aW9uXCIpLmVhY2goZnVuY3Rpb24oKXt2YXIgbj1lKHRoaXMpLG89bi5odG1sKCksYT1uLmF0dHIoXCJkaXNhYmxlZFwiKSxyPW4uYXR0cihcInZhbHVlXCIpIT09aT9uLmF0dHIoXCJ2YWx1ZVwiKTpvO1wiYXV0b1wiPT09ay5wbGFjZWhvbGRlciYmXCJcIj09PXI/dC5wbGFjZWhvbGRlcj1vOnQudmFsdWVzLnB1c2goe25hbWU6byx2YWx1ZTpyLGRpc2FibGVkOmF9KX0pLGsucGxhY2Vob2xkZXImJlwiYXV0b1wiIT09ay5wbGFjZWhvbGRlciYmKHcuZGVidWcoXCJTZXR0aW5nIHBsYWNlaG9sZGVyIHZhbHVlIHRvXCIsay5wbGFjZWhvbGRlciksdC5wbGFjZWhvbGRlcj1rLnBsYWNlaG9sZGVyKSxrLnNvcnRTZWxlY3Q/KHQudmFsdWVzLnNvcnQoZnVuY3Rpb24oZSx0KXtyZXR1cm4gZS5uYW1lPnQubmFtZT8xOi0xfSksdy5kZWJ1ZyhcIlJldHJpZXZlZCBhbmQgc29ydGVkIHZhbHVlcyBmcm9tIHNlbGVjdFwiLHQpKTp3LmRlYnVnKFwiUmV0cmVpdmVkIHZhbHVlcyBmcm9tIHNlbGVjdFwiLHQpLHR9LGFjdGl2ZUl0ZW06ZnVuY3Rpb24oKXtyZXR1cm4gVy5maWx0ZXIoXCIuXCIrUy5hY3RpdmUpfSxzZWxlY3RlZEl0ZW06ZnVuY3Rpb24oKXt2YXIgZT1XLm5vdChGLnVuc2VsZWN0YWJsZSkuZmlsdGVyKFwiLlwiK1Muc2VsZWN0ZWQpO3JldHVybiBlLmxlbmd0aD4wP2U6Vy5lcSgwKX0saXRlbVdpdGhBZGRpdGlvbnM6ZnVuY3Rpb24oZSl7dmFyIHQ9dy5nZXQuaXRlbShlKSxuPXcuY3JlYXRlLnVzZXJDaG9pY2UoZSksaT1uJiZuLmxlbmd0aD4wO3JldHVybiBpJiYodD10Lmxlbmd0aD4wP3QuYWRkKG4pOm4pLHR9LGl0ZW06ZnVuY3Rpb24odCxuKXt2YXIgbyxhLHI9ITE7cmV0dXJuIHQ9dCE9PWk/dDp3LmdldC52YWx1ZXMoKSE9PWk/dy5nZXQudmFsdWVzKCk6dy5nZXQudGV4dCgpLG89YT90Lmxlbmd0aD4wOnQhPT1pJiZudWxsIT09dCxhPXcuaXMubXVsdGlwbGUoKSYmZS5pc0FycmF5KHQpLG49XCJcIj09PXR8fDA9PT10PyEwOm58fCExLG8mJlcuZWFjaChmdW5jdGlvbigpe3ZhciBvPWUodGhpcykscz13LmdldC5jaG9pY2VUZXh0KG8pLGM9dy5nZXQuY2hvaWNlVmFsdWUobyxzKTtpZihudWxsIT09YyYmYyE9PWkpaWYoYSkoLTEhPT1lLmluQXJyYXkoU3RyaW5nKGMpLHQpfHwtMSE9PWUuaW5BcnJheShzLHQpKSYmKHI9cj9yLmFkZChvKTpvKTtlbHNlIGlmKG4pe2lmKHcudmVyYm9zZShcIkFtYmlndW91cyBkcm9wZG93biB2YWx1ZSB1c2luZyBzdHJpY3QgdHlwZSBjaGVja1wiLG8sdCksYz09PXR8fHM9PT10KXJldHVybiByPW8sITB9ZWxzZSBpZihTdHJpbmcoYyk9PVN0cmluZyh0KXx8cz09dClyZXR1cm4gdy52ZXJib3NlKFwiRm91bmQgc2VsZWN0IGl0ZW0gYnkgdmFsdWVcIixjLHQpLHI9bywhMH0pLHJ9fSxjaGVjazp7bWF4U2VsZWN0aW9uczpmdW5jdGlvbihlKXtyZXR1cm4gay5tYXhTZWxlY3Rpb25zPyhlPWUhPT1pP2U6dy5nZXQuc2VsZWN0aW9uQ291bnQoKSxlPj1rLm1heFNlbGVjdGlvbnM/KHcuZGVidWcoXCJNYXhpbXVtIHNlbGVjdGlvbiBjb3VudCByZWFjaGVkXCIpLGsudXNlTGFiZWxzJiYoVy5hZGRDbGFzcyhTLmZpbHRlcmVkKSx3LmFkZC5tZXNzYWdlKFQubWF4U2VsZWN0aW9ucykpLCEwKToody52ZXJib3NlKFwiTm8gbG9uZ2VyIGF0IG1heGltdW0gc2VsZWN0aW9uIGNvdW50XCIpLHcucmVtb3ZlLm1lc3NhZ2UoKSx3LnJlbW92ZS5maWx0ZXJlZEl0ZW0oKSx3LmlzLnNlYXJjaFNlbGVjdGlvbigpJiZ3LmZpbHRlckl0ZW1zKCksITEpKTohMH19LHJlc3RvcmU6e2RlZmF1bHRzOmZ1bmN0aW9uKCl7dy5jbGVhcigpLHcucmVzdG9yZS5kZWZhdWx0VGV4dCgpLHcucmVzdG9yZS5kZWZhdWx0VmFsdWUoKX0sZGVmYXVsdFRleHQ6ZnVuY3Rpb24oKXt2YXIgZT13LmdldC5kZWZhdWx0VGV4dCgpLHQ9dy5nZXQucGxhY2Vob2xkZXJUZXh0O2U9PT10Pyh3LmRlYnVnKFwiUmVzdG9yaW5nIGRlZmF1bHQgcGxhY2Vob2xkZXIgdGV4dFwiLGUpLHcuc2V0LnBsYWNlaG9sZGVyVGV4dChlKSk6KHcuZGVidWcoXCJSZXN0b3JpbmcgZGVmYXVsdCB0ZXh0XCIsZSksdy5zZXQudGV4dChlKSl9LGRlZmF1bHRWYWx1ZTpmdW5jdGlvbigpe3ZhciBlPXcuZ2V0LmRlZmF1bHRWYWx1ZSgpO2UhPT1pJiYody5kZWJ1ZyhcIlJlc3RvcmluZyBkZWZhdWx0IHZhbHVlXCIsZSksXCJcIiE9PWU/KHcuc2V0LnZhbHVlKGUpLHcuc2V0LnNlbGVjdGVkKCkpOih3LnJlbW92ZS5hY3RpdmVJdGVtKCksdy5yZW1vdmUuc2VsZWN0ZWRJdGVtKCkpKX0sbGFiZWxzOmZ1bmN0aW9uKCl7ay5hbGxvd0FkZGl0aW9ucyYmKGsudXNlTGFiZWxzfHwody5lcnJvcihELmxhYmVscyksay51c2VMYWJlbHM9ITApLHcuZGVidWcoXCJSZXN0b3Jpbmcgc2VsZWN0ZWQgdmFsdWVzXCIpLHcuY3JlYXRlLnVzZXJMYWJlbHMoKSksdy5jaGVjay5tYXhTZWxlY3Rpb25zKCl9LHNlbGVjdGVkOmZ1bmN0aW9uKCl7dy5yZXN0b3JlLnZhbHVlcygpLHcuaXMubXVsdGlwbGUoKT8ody5kZWJ1ZyhcIlJlc3RvcmluZyBwcmV2aW91c2x5IHNlbGVjdGVkIHZhbHVlcyBhbmQgbGFiZWxzXCIpLHcucmVzdG9yZS5sYWJlbHMoKSk6dy5kZWJ1ZyhcIlJlc3RvcmluZyBwcmV2aW91c2x5IHNlbGVjdGVkIHZhbHVlc1wiKX0sdmFsdWVzOmZ1bmN0aW9uKCl7dy5zZXQuaW5pdGlhbExvYWQoKSxrLmFwaVNldHRpbmdzP2suc2F2ZVJlbW90ZURhdGE/dy5yZXN0b3JlLnJlbW90ZVZhbHVlcygpOncuY2xlYXJWYWx1ZSgpOncuc2V0LnNlbGVjdGVkKCksdy5yZW1vdmUuaW5pdGlhbExvYWQoKX0scmVtb3RlVmFsdWVzOmZ1bmN0aW9uKCl7dmFyIHQ9dy5nZXQucmVtb3RlVmFsdWVzKCk7dy5kZWJ1ZyhcIlJlY3JlYXRpbmcgc2VsZWN0ZWQgZnJvbSBzZXNzaW9uIGRhdGFcIix0KSx0JiYody5pcy5zaW5nbGUoKT9lLmVhY2godCxmdW5jdGlvbihlLHQpe3cuc2V0LnRleHQodCl9KTplLmVhY2godCxmdW5jdGlvbihlLHQpe3cuYWRkLmxhYmVsKGUsdCl9KSl9fSxyZWFkOntyZW1vdGVEYXRhOmZ1bmN0aW9uKGUpe3ZhciBuO3JldHVybiB0LlN0b3JhZ2U9PT1pP3ZvaWQgdy5lcnJvcihELm5vU3RvcmFnZSk6KG49c2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbShlKSxuIT09aT9uOiExKX19LHNhdmU6e2RlZmF1bHRzOmZ1bmN0aW9uKCl7dy5zYXZlLmRlZmF1bHRUZXh0KCksdy5zYXZlLnBsYWNlaG9sZGVyVGV4dCgpLHcuc2F2ZS5kZWZhdWx0VmFsdWUoKX0sZGVmYXVsdFZhbHVlOmZ1bmN0aW9uKCl7dmFyIGU9dy5nZXQudmFsdWUoKTt3LnZlcmJvc2UoXCJTYXZpbmcgZGVmYXVsdCB2YWx1ZSBhc1wiLGUpLHouZGF0YShSLmRlZmF1bHRWYWx1ZSxlKX0sZGVmYXVsdFRleHQ6ZnVuY3Rpb24oKXt2YXIgZT13LmdldC50ZXh0KCk7dy52ZXJib3NlKFwiU2F2aW5nIGRlZmF1bHQgdGV4dCBhc1wiLGUpLHouZGF0YShSLmRlZmF1bHRUZXh0LGUpfSxwbGFjZWhvbGRlclRleHQ6ZnVuY3Rpb24oKXt2YXIgZTtrLnBsYWNlaG9sZGVyIT09ITEmJkwuaGFzQ2xhc3MoUy5wbGFjZWhvbGRlcikmJihlPXcuZ2V0LnRleHQoKSx3LnZlcmJvc2UoXCJTYXZpbmcgcGxhY2Vob2xkZXIgdGV4dCBhc1wiLGUpLHouZGF0YShSLnBsYWNlaG9sZGVyVGV4dCxlKSl9LHJlbW90ZURhdGE6ZnVuY3Rpb24oZSxuKXtyZXR1cm4gdC5TdG9yYWdlPT09aT92b2lkIHcuZXJyb3IoRC5ub1N0b3JhZ2UpOih3LnZlcmJvc2UoXCJTYXZpbmcgcmVtb3RlIGRhdGEgdG8gc2Vzc2lvbiBzdG9yYWdlXCIsbixlKSx2b2lkIHNlc3Npb25TdG9yYWdlLnNldEl0ZW0obixlKSl9fSxjbGVhcjpmdW5jdGlvbigpe3cuaXMubXVsdGlwbGUoKT93LnJlbW92ZS5sYWJlbHMoKToody5yZW1vdmUuYWN0aXZlSXRlbSgpLHcucmVtb3ZlLnNlbGVjdGVkSXRlbSgpKSx3LnNldC5wbGFjZWhvbGRlclRleHQoKSx3LmNsZWFyVmFsdWUoKX0sY2xlYXJWYWx1ZTpmdW5jdGlvbigpe3cuc2V0LnZhbHVlKFwiXCIpfSxzY3JvbGxQYWdlOmZ1bmN0aW9uKGUsdCl7dmFyIG4saSxvLGE9dHx8dy5nZXQuc2VsZWN0ZWRJdGVtKCkscj1hLmNsb3Nlc3QoRi5tZW51KSxzPXIub3V0ZXJIZWlnaHQoKSxjPXIuc2Nyb2xsVG9wKCksbD1XLmVxKDApLm91dGVySGVpZ2h0KCksdT1NYXRoLmZsb29yKHMvbCksZD0oci5wcm9wKFwic2Nyb2xsSGVpZ2h0XCIpLFwidXBcIj09ZT9jLWwqdTpjK2wqdSksbT1XLm5vdChGLnVuc2VsZWN0YWJsZSk7bz1cInVwXCI9PWU/bS5pbmRleChhKS11Om0uaW5kZXgoYSkrdSxuPVwidXBcIj09ZT9vPj0wOm88bS5sZW5ndGgsaT1uP20uZXEobyk6XCJ1cFwiPT1lP20uZmlyc3QoKTptLmxhc3QoKSxpLmxlbmd0aD4wJiYody5kZWJ1ZyhcIlNjcm9sbGluZyBwYWdlXCIsZSxpKSxhLnJlbW92ZUNsYXNzKFMuc2VsZWN0ZWQpLGkuYWRkQ2xhc3MoUy5zZWxlY3RlZCksci5zY3JvbGxUb3AoZCkpfSxzZXQ6e2ZpbHRlcmVkOmZ1bmN0aW9uKCl7dmFyIGU9dy5pcy5tdWx0aXBsZSgpLHQ9dy5pcy5zZWFyY2hTZWxlY3Rpb24oKSxuPWUmJnQsaT10P3cuZ2V0LnF1ZXJ5KCk6XCJcIixvPVwic3RyaW5nXCI9PXR5cGVvZiBpJiZpLmxlbmd0aD4wLGE9dy5nZXQuc2VhcmNoV2lkdGgoaS5sZW5ndGgpLHI9XCJcIiE9PWk7ZSYmbyYmKHcudmVyYm9zZShcIkFkanVzdGluZyBpbnB1dCB3aWR0aFwiLGEsay5nbHlwaFdpZHRoKSxOLmNzcyhcIndpZHRoXCIsYSkpLG98fG4mJnI/KHcudmVyYm9zZShcIkhpZGluZyBwbGFjZWhvbGRlciB0ZXh0XCIpLEwuYWRkQ2xhc3MoUy5maWx0ZXJlZCkpOighZXx8biYmIXIpJiYody52ZXJib3NlKFwiU2hvd2luZyBwbGFjZWhvbGRlciB0ZXh0XCIpLEwucmVtb3ZlQ2xhc3MoUy5maWx0ZXJlZCkpfSxsb2FkaW5nOmZ1bmN0aW9uKCl7ei5hZGRDbGFzcyhTLmxvYWRpbmcpfSxwbGFjZWhvbGRlclRleHQ6ZnVuY3Rpb24oZSl7ZT1lfHx3LmdldC5wbGFjZWhvbGRlclRleHQoKSx3LmRlYnVnKFwiU2V0dGluZyBwbGFjZWhvbGRlciB0ZXh0XCIsZSksdy5zZXQudGV4dChlKSxMLmFkZENsYXNzKFMucGxhY2Vob2xkZXIpfSx0YWJiYWJsZTpmdW5jdGlvbigpe3cuaGFzLnNlYXJjaCgpPyh3LmRlYnVnKFwiQWRkZWQgdGFiaW5kZXggdG8gc2VhcmNoYWJsZSBkcm9wZG93blwiKSxOLnZhbChcIlwiKS5hdHRyKFwidGFiaW5kZXhcIiwwKSxVLmF0dHIoXCJ0YWJpbmRleFwiLC0xKSk6KHcuZGVidWcoXCJBZGRlZCB0YWJpbmRleCB0byBkcm9wZG93blwiKSx6LmF0dHIoXCJ0YWJpbmRleFwiKXx8KHouYXR0cihcInRhYmluZGV4XCIsMCksVS5hdHRyKFwidGFiaW5kZXhcIiwtMSkpKX0saW5pdGlhbExvYWQ6ZnVuY3Rpb24oKXt3LnZlcmJvc2UoXCJTZXR0aW5nIGluaXRpYWwgbG9hZFwiKSx2PSEwfSxhY3RpdmVJdGVtOmZ1bmN0aW9uKGUpe2UuYWRkQ2xhc3Moay5hbGxvd0FkZGl0aW9ucyYmZS5maWx0ZXIoRi5hZGRpdGlvbikubGVuZ3RoPjA/Uy5maWx0ZXJlZDpTLmFjdGl2ZSl9LHNjcm9sbFBvc2l0aW9uOmZ1bmN0aW9uKGUsdCl7dmFyIG4sbyxhLHIscyxjLGwsdSxkLG09NTtlPWV8fHcuZ2V0LnNlbGVjdGVkSXRlbSgpLG49ZS5jbG9zZXN0KEYubWVudSksbz1lJiZlLmxlbmd0aD4wLHQ9dCE9PWk/dDohMSxlJiZuLmxlbmd0aD4wJiZvJiYocj1lLnBvc2l0aW9uKCkudG9wLG4uYWRkQ2xhc3MoUy5sb2FkaW5nKSxjPW4uc2Nyb2xsVG9wKCkscz1uLm9mZnNldCgpLnRvcCxyPWUub2Zmc2V0KCkudG9wLGE9Yy1zK3IsdHx8KGw9bi5oZWlnaHQoKSxkPWErbT5jK2wsdT1jPmEtbSksdy5kZWJ1ZyhcIlNjcm9sbGluZyB0byBhY3RpdmUgaXRlbVwiLGEpLCh0fHx1fHxkKSYmbi5zY3JvbGxUb3AoYSksbi5yZW1vdmVDbGFzcyhTLmxvYWRpbmcpKX0sdGV4dDpmdW5jdGlvbihlKXtcInNlbGVjdFwiIT09ay5hY3Rpb24mJihcImNvbWJvXCI9PWsuYWN0aW9uPyh3LmRlYnVnKFwiQ2hhbmdpbmcgY29tYm8gYnV0dG9uIHRleHRcIixlLE0pLGsucHJlc2VydmVIVE1MP00uaHRtbChlKTpNLnRleHQoZSkpOihlIT09dy5nZXQucGxhY2Vob2xkZXJUZXh0KCkmJkwucmVtb3ZlQ2xhc3MoUy5wbGFjZWhvbGRlciksdy5kZWJ1ZyhcIkNoYW5naW5nIHRleHRcIixlLEwpLEwucmVtb3ZlQ2xhc3MoUy5maWx0ZXJlZCksay5wcmVzZXJ2ZUhUTUw/TC5odG1sKGUpOkwudGV4dChlKSkpfSxzZWxlY3RlZExldHRlcjpmdW5jdGlvbih0KXt2YXIgbixpPVcuZmlsdGVyKFwiLlwiK1Muc2VsZWN0ZWQpLG89aS5sZW5ndGg+MCYmdy5oYXMuZmlyc3RMZXR0ZXIoaSx0KSxhPSExO28mJihuPWkubmV4dEFsbChXKS5lcSgwKSx3Lmhhcy5maXJzdExldHRlcihuLHQpJiYoYT1uKSksYXx8Vy5lYWNoKGZ1bmN0aW9uKCl7cmV0dXJuIHcuaGFzLmZpcnN0TGV0dGVyKGUodGhpcyksdCk/KGE9ZSh0aGlzKSwhMSk6dm9pZCAwfSksYSYmKHcudmVyYm9zZShcIlNjcm9sbGluZyB0byBuZXh0IHZhbHVlIHdpdGggbGV0dGVyXCIsdCksdy5zZXQuc2Nyb2xsUG9zaXRpb24oYSksaS5yZW1vdmVDbGFzcyhTLnNlbGVjdGVkKSxhLmFkZENsYXNzKFMuc2VsZWN0ZWQpKX0sZGlyZWN0aW9uOmZ1bmN0aW9uKGUpe1wiYXV0b1wiPT1rLmRpcmVjdGlvbj93LmlzLm9uU2NyZWVuKGUpP3cucmVtb3ZlLnVwd2FyZChlKTp3LnNldC51cHdhcmQoZSk6XCJ1cHdhcmRcIj09ay5kaXJlY3Rpb24mJncuc2V0LnVwd2FyZChlKX0sdXB3YXJkOmZ1bmN0aW9uKGUpe3ZhciB0PWV8fHo7dC5hZGRDbGFzcyhTLnVwd2FyZCl9LHZhbHVlOmZ1bmN0aW9uKGUsdCxuKXt2YXIgbz1WLmxlbmd0aD4wLGE9KCF3Lmhhcy52YWx1ZShlKSx3LmdldC52YWx1ZXMoKSkscj1lIT09aT9TdHJpbmcoZSk6ZTtpZihvKXtpZihyPT1hJiYody52ZXJib3NlKFwiU2tpcHBpbmcgdmFsdWUgdXBkYXRlIGFscmVhZHkgc2FtZSB2YWx1ZVwiLGUsYSksIXcuaXMuaW5pdGlhbExvYWQoKSkpcmV0dXJuO3cuaXMuc2luZ2xlKCkmJncuaGFzLnNlbGVjdElucHV0KCkmJncuY2FuLmV4dGVuZFNlbGVjdCgpJiYody5kZWJ1ZyhcIkFkZGluZyB1c2VyIG9wdGlvblwiLGUpLHcuYWRkLm9wdGlvblZhbHVlKGUpKSx3LmRlYnVnKFwiVXBkYXRpbmcgaW5wdXQgdmFsdWVcIixlLGEpLFg9ITAsVi52YWwoZSksay5maXJlT25Jbml0PT09ITEmJncuaXMuaW5pdGlhbExvYWQoKT93LmRlYnVnKFwiSW5wdXQgbmF0aXZlIGNoYW5nZSBldmVudCBpZ25vcmVkIG9uIGluaXRpYWwgbG9hZFwiKTpWLnRyaWdnZXIoXCJjaGFuZ2VcIiksWD0hMX1lbHNlIHcudmVyYm9zZShcIlN0b3JpbmcgdmFsdWUgaW4gbWV0YWRhdGFcIixlLFYpLGUhPT1hJiZ6LmRhdGEoUi52YWx1ZSxyKTtrLmZpcmVPbkluaXQ9PT0hMSYmdy5pcy5pbml0aWFsTG9hZCgpP3cudmVyYm9zZShcIk5vIGNhbGxiYWNrIG9uIGluaXRpYWwgbG9hZFwiLGsub25DaGFuZ2UpOmsub25DaGFuZ2UuY2FsbCgkLGUsdCxuKX0sYWN0aXZlOmZ1bmN0aW9uKCl7ei5hZGRDbGFzcyhTLmFjdGl2ZSl9LG11bHRpcGxlOmZ1bmN0aW9uKCl7ei5hZGRDbGFzcyhTLm11bHRpcGxlKX0sdmlzaWJsZTpmdW5jdGlvbigpe3ouYWRkQ2xhc3MoUy52aXNpYmxlKX0sZXhhY3RseTpmdW5jdGlvbihlLHQpe3cuZGVidWcoXCJTZXR0aW5nIHNlbGVjdGVkIHRvIGV4YWN0IHZhbHVlc1wiKSx3LmNsZWFyKCksdy5zZXQuc2VsZWN0ZWQoZSx0KX0sc2VsZWN0ZWQ6ZnVuY3Rpb24odCxuKXt2YXIgaT13LmlzLm11bHRpcGxlKCk7bj1rLmFsbG93QWRkaXRpb25zP258fHcuZ2V0Lml0ZW1XaXRoQWRkaXRpb25zKHQpOm58fHcuZ2V0Lml0ZW0odCksbiYmKHcuZGVidWcoXCJTZXR0aW5nIHNlbGVjdGVkIG1lbnUgaXRlbSB0b1wiLG4pLHcuaXMuc2luZ2xlKCk/KHcucmVtb3ZlLmFjdGl2ZUl0ZW0oKSx3LnJlbW92ZS5zZWxlY3RlZEl0ZW0oKSk6ay51c2VMYWJlbHMmJncucmVtb3ZlLnNlbGVjdGVkSXRlbSgpLG4uZWFjaChmdW5jdGlvbigpe3ZhciB0PWUodGhpcyksbz13LmdldC5jaG9pY2VUZXh0KHQpLGE9dy5nZXQuY2hvaWNlVmFsdWUodCxvKSxyPXQuaGFzQ2xhc3MoUy5maWx0ZXJlZCkscz10Lmhhc0NsYXNzKFMuYWN0aXZlKSxjPXQuaGFzQ2xhc3MoUy5hZGRpdGlvbiksbD1pJiYxPT1uLmxlbmd0aDtpPyFzfHxjPyhrLmFwaVNldHRpbmdzJiZrLnNhdmVSZW1vdGVEYXRhJiZ3LnNhdmUucmVtb3RlRGF0YShvLGEpLGsudXNlTGFiZWxzPyh3LmFkZC52YWx1ZShhLG8sdCksdy5hZGQubGFiZWwoYSxvLGwpLHcuc2V0LmFjdGl2ZUl0ZW0odCksdy5maWx0ZXJBY3RpdmUoKSx3LnNlbGVjdC5uZXh0QXZhaWxhYmxlKG4pKToody5hZGQudmFsdWUoYSxvLHQpLHcuc2V0LnRleHQody5hZGQudmFyaWFibGVzKFQuY291bnQpKSx3LnNldC5hY3RpdmVJdGVtKHQpKSk6cnx8KHcuZGVidWcoXCJTZWxlY3RlZCBhY3RpdmUgdmFsdWUsIHJlbW92aW5nIGxhYmVsXCIpLHcucmVtb3ZlLnNlbGVjdGVkKGEpKTooay5hcGlTZXR0aW5ncyYmay5zYXZlUmVtb3RlRGF0YSYmdy5zYXZlLnJlbW90ZURhdGEobyxhKSx3LnNldC50ZXh0KG8pLHcuc2V0LnZhbHVlKGEsbyx0KSx0LmFkZENsYXNzKFMuYWN0aXZlKS5hZGRDbGFzcyhTLnNlbGVjdGVkKSl9KSl9fSxhZGQ6e2xhYmVsOmZ1bmN0aW9uKHQsbixpKXt2YXIgbyxhPXcuaXMuc2VhcmNoU2VsZWN0aW9uKCk/TjpMO3JldHVybiBvPWUoXCI8YSAvPlwiKS5hZGRDbGFzcyhTLmxhYmVsKS5hdHRyKFwiZGF0YS12YWx1ZVwiLHQpLmh0bWwoTy5sYWJlbCh0LG4pKSxvPWsub25MYWJlbENyZWF0ZS5jYWxsKG8sdCxuKSx3Lmhhcy5sYWJlbCh0KT92b2lkIHcuZGVidWcoXCJMYWJlbCBhbHJlYWR5IGV4aXN0cywgc2tpcHBpbmdcIix0KTooay5sYWJlbC52YXJpYXRpb24mJm8uYWRkQ2xhc3Moay5sYWJlbC52YXJpYXRpb24pLHZvaWQoaT09PSEwPyh3LmRlYnVnKFwiQW5pbWF0aW5nIGluIGxhYmVsXCIsbyksby5hZGRDbGFzcyhTLmhpZGRlbikuaW5zZXJ0QmVmb3JlKGEpLnRyYW5zaXRpb24oay5sYWJlbC50cmFuc2l0aW9uLGsubGFiZWwuZHVyYXRpb24pKToody5kZWJ1ZyhcIkFkZGluZyBzZWxlY3Rpb24gbGFiZWxcIixvKSxvLmluc2VydEJlZm9yZShhKSkpKX0sbWVzc2FnZTpmdW5jdGlvbih0KXt2YXIgbj1VLmNoaWxkcmVuKEYubWVzc2FnZSksaT1rLnRlbXBsYXRlcy5tZXNzYWdlKHcuYWRkLnZhcmlhYmxlcyh0KSk7bi5sZW5ndGg+MD9uLmh0bWwoaSk6bj1lKFwiPGRpdi8+XCIpLmh0bWwoaSkuYWRkQ2xhc3MoUy5tZXNzYWdlKS5hcHBlbmRUbyhVKX0sb3B0aW9uVmFsdWU6ZnVuY3Rpb24odCl7dmFyIG49Vi5maW5kKCdvcHRpb25bdmFsdWU9XCInK3QrJ1wiXScpLGk9bi5sZW5ndGg+MDtpfHwoeCYmKHguZGlzY29ubmVjdCgpLHcudmVyYm9zZShcIlRlbXBvcmFyaWx5IGRpc2Nvbm5lY3RpbmcgbXV0YXRpb24gb2JzZXJ2ZXJcIix0KSksdy5pcy5zaW5nbGUoKSYmKHcudmVyYm9zZShcIlJlbW92aW5nIHByZXZpb3VzIHVzZXIgYWRkaXRpb25cIiksVi5maW5kKFwib3B0aW9uLlwiK1MuYWRkaXRpb24pLnJlbW92ZSgpKSxlKFwiPG9wdGlvbi8+XCIpLnByb3AoXCJ2YWx1ZVwiLHQpLmFkZENsYXNzKFMuYWRkaXRpb24pLmh0bWwodCkuYXBwZW5kVG8oViksdy52ZXJib3NlKFwiQWRkaW5nIHVzZXIgYWRkaXRpb24gYXMgYW4gPG9wdGlvbj5cIix0KSx4JiZ4Lm9ic2VydmUoVlswXSx7Y2hpbGRMaXN0OiEwLHN1YnRyZWU6ITB9KSl9LHVzZXJTdWdnZXN0aW9uOmZ1bmN0aW9uKGUpe3ZhciB0LG49VS5jaGlsZHJlbihGLmFkZGl0aW9uKSxpPXcuZ2V0Lml0ZW0oZSksbz1pJiZpLm5vdChGLmFkZGl0aW9uKS5sZW5ndGgsYT1uLmxlbmd0aD4wO2lmKCFrLnVzZUxhYmVsc3x8IXcuaGFzLm1heFNlbGVjdGlvbnMoKSl7aWYoXCJcIj09PWV8fG8pcmV0dXJuIHZvaWQgbi5yZW1vdmUoKTtXLnJlbW92ZUNsYXNzKFMuc2VsZWN0ZWQpLGE/KHQ9ay50ZW1wbGF0ZXMuYWRkaXRpb24ody5hZGQudmFyaWFibGVzKFQuYWRkUmVzdWx0LGUpKSxuLmh0bWwodCkuYXR0cihcImRhdGEtXCIrUi52YWx1ZSxlKS5hdHRyKFwiZGF0YS1cIitSLnRleHQsZSkucmVtb3ZlQ2xhc3MoUy5maWx0ZXJlZCkuYWRkQ2xhc3MoUy5zZWxlY3RlZCksdy52ZXJib3NlKFwiUmVwbGFjaW5nIHVzZXIgc3VnZ2VzdGlvbiB3aXRoIG5ldyB2YWx1ZVwiLG4pKToobj13LmNyZWF0ZS51c2VyQ2hvaWNlKGUpLG4ucHJlcGVuZFRvKFUpLmFkZENsYXNzKFMuc2VsZWN0ZWQpLHcudmVyYm9zZShcIkFkZGluZyBpdGVtIGNob2ljZSB0byBtZW51IGNvcnJlc3BvbmRpbmcgd2l0aCB1c2VyIGNob2ljZSBhZGRpdGlvblwiLG4pKX19LHZhcmlhYmxlczpmdW5jdGlvbihlLHQpe3ZhciBuLGksbz0tMSE9PWUuc2VhcmNoKFwie2NvdW50fVwiKSxhPS0xIT09ZS5zZWFyY2goXCJ7bWF4Q291bnR9XCIpLHI9LTEhPT1lLnNlYXJjaChcInt0ZXJtfVwiKTtyZXR1cm4gdy52ZXJib3NlKFwiQWRkaW5nIHRlbXBsYXRlZCB2YXJpYWJsZXMgdG8gbWVzc2FnZVwiLGUpLG8mJihuPXcuZ2V0LnNlbGVjdGlvbkNvdW50KCksZT1lLnJlcGxhY2UoXCJ7Y291bnR9XCIsbikpLGEmJihuPXcuZ2V0LnNlbGVjdGlvbkNvdW50KCksZT1lLnJlcGxhY2UoXCJ7bWF4Q291bnR9XCIsay5tYXhTZWxlY3Rpb25zKSksciYmKGk9dHx8dy5nZXQucXVlcnkoKSxlPWUucmVwbGFjZShcInt0ZXJtfVwiLGkpKSxlfSx2YWx1ZTpmdW5jdGlvbih0LG4saSl7dmFyIG8sYT13LmdldC52YWx1ZXMoKTtyZXR1cm5cIlwiPT09dD92b2lkIHcuZGVidWcoXCJDYW5ub3Qgc2VsZWN0IGJsYW5rIHZhbHVlcyBmcm9tIG11bHRpc2VsZWN0XCIpOihlLmlzQXJyYXkoYSk/KG89YS5jb25jYXQoW3RdKSxvPXcuZ2V0LnVuaXF1ZUFycmF5KG8pKTpvPVt0XSx3Lmhhcy5zZWxlY3RJbnB1dCgpP3cuY2FuLmV4dGVuZFNlbGVjdCgpJiYody5kZWJ1ZyhcIkFkZGluZyB2YWx1ZSB0byBzZWxlY3RcIix0LG8sViksdy5hZGQub3B0aW9uVmFsdWUodCkpOihvPW8uam9pbihrLmRlbGltaXRlciksdy5kZWJ1ZyhcIlNldHRpbmcgaGlkZGVuIGlucHV0IHRvIGRlbGltaXRlZCB2YWx1ZVwiLG8sVikpLGsuZmlyZU9uSW5pdD09PSExJiZ3LmlzLmluaXRpYWxMb2FkKCk/dy52ZXJib3NlKFwiU2tpcHBpbmcgb25hZGQgY2FsbGJhY2sgb24gaW5pdGlhbCBsb2FkXCIsay5vbkFkZCk6ay5vbkFkZC5jYWxsKCQsdCxuLGkpLHcuc2V0LnZhbHVlKG8sdCxuLGkpLHZvaWQgdy5jaGVjay5tYXhTZWxlY3Rpb25zKCkpfX0scmVtb3ZlOnthY3RpdmU6ZnVuY3Rpb24oKXt6LnJlbW92ZUNsYXNzKFMuYWN0aXZlKX0sYWN0aXZlTGFiZWw6ZnVuY3Rpb24oKXt6LmZpbmQoRi5sYWJlbCkucmVtb3ZlQ2xhc3MoUy5hY3RpdmUpfSxsb2FkaW5nOmZ1bmN0aW9uKCl7ei5yZW1vdmVDbGFzcyhTLmxvYWRpbmcpfSxpbml0aWFsTG9hZDpmdW5jdGlvbigpe3Y9ITF9LHVwd2FyZDpmdW5jdGlvbihlKXt2YXIgdD1lfHx6O3QucmVtb3ZlQ2xhc3MoUy51cHdhcmQpfSx2aXNpYmxlOmZ1bmN0aW9uKCl7ei5yZW1vdmVDbGFzcyhTLnZpc2libGUpfSxhY3RpdmVJdGVtOmZ1bmN0aW9uKCl7Vy5yZW1vdmVDbGFzcyhTLmFjdGl2ZSl9LGZpbHRlcmVkSXRlbTpmdW5jdGlvbigpe2sudXNlTGFiZWxzJiZ3Lmhhcy5tYXhTZWxlY3Rpb25zKCl8fChrLnVzZUxhYmVscyYmdy5pcy5tdWx0aXBsZSgpP1cubm90KFwiLlwiK1MuYWN0aXZlKS5yZW1vdmVDbGFzcyhTLmZpbHRlcmVkKTpXLnJlbW92ZUNsYXNzKFMuZmlsdGVyZWQpKX0sb3B0aW9uVmFsdWU6ZnVuY3Rpb24oZSl7dmFyIHQ9Vi5maW5kKCdvcHRpb25bdmFsdWU9XCInK2UrJ1wiXScpLG49dC5sZW5ndGg+MDtuJiZ0Lmhhc0NsYXNzKFMuYWRkaXRpb24pJiYoeCYmKHguZGlzY29ubmVjdCgpLHcudmVyYm9zZShcIlRlbXBvcmFyaWx5IGRpc2Nvbm5lY3RpbmcgbXV0YXRpb24gb2JzZXJ2ZXJcIixlKSksdC5yZW1vdmUoKSx3LnZlcmJvc2UoXCJSZW1vdmluZyB1c2VyIGFkZGl0aW9uIGFzIGFuIDxvcHRpb24+XCIsZSkseCYmeC5vYnNlcnZlKFZbMF0se2NoaWxkTGlzdDohMCxzdWJ0cmVlOiEwfSkpfSxtZXNzYWdlOmZ1bmN0aW9uKCl7VS5jaGlsZHJlbihGLm1lc3NhZ2UpLnJlbW92ZSgpfSxzZWFyY2hUZXJtOmZ1bmN0aW9uKCl7dy52ZXJib3NlKFwiQ2xlYXJlZCBzZWFyY2ggdGVybVwiKSxOLnZhbChcIlwiKSx3LnNldC5maWx0ZXJlZCgpfSxzZWxlY3RlZDpmdW5jdGlvbih0LG4pe3JldHVybihuPWsuYWxsb3dBZGRpdGlvbnM/bnx8dy5nZXQuaXRlbVdpdGhBZGRpdGlvbnModCk6bnx8dy5nZXQuaXRlbSh0KSk/dm9pZCBuLmVhY2goZnVuY3Rpb24oKXt2YXIgdD1lKHRoaXMpLG49dy5nZXQuY2hvaWNlVGV4dCh0KSxpPXcuZ2V0LmNob2ljZVZhbHVlKHQsbik7dy5pcy5tdWx0aXBsZSgpP2sudXNlTGFiZWxzPyh3LnJlbW92ZS52YWx1ZShpLG4sdCksdy5yZW1vdmUubGFiZWwoaSkpOih3LnJlbW92ZS52YWx1ZShpLG4sdCksMD09PXcuZ2V0LnNlbGVjdGlvbkNvdW50KCk/dy5zZXQucGxhY2Vob2xkZXJUZXh0KCk6dy5zZXQudGV4dCh3LmFkZC52YXJpYWJsZXMoVC5jb3VudCkpKTp3LnJlbW92ZS52YWx1ZShpLG4sdCksdC5yZW1vdmVDbGFzcyhTLmZpbHRlcmVkKS5yZW1vdmVDbGFzcyhTLmFjdGl2ZSksay51c2VMYWJlbHMmJnQucmVtb3ZlQ2xhc3MoUy5zZWxlY3RlZCl9KTohMX0sc2VsZWN0ZWRJdGVtOmZ1bmN0aW9uKCl7Vy5yZW1vdmVDbGFzcyhTLnNlbGVjdGVkKX0sdmFsdWU6ZnVuY3Rpb24oZSx0LG4pe3ZhciBpLG89dy5nZXQudmFsdWVzKCk7dy5oYXMuc2VsZWN0SW5wdXQoKT8ody52ZXJib3NlKFwiSW5wdXQgaXMgPHNlbGVjdD4gcmVtb3Zpbmcgc2VsZWN0ZWQgb3B0aW9uXCIsZSksaT13LnJlbW92ZS5hcnJheVZhbHVlKGUsbyksdy5yZW1vdmUub3B0aW9uVmFsdWUoZSkpOih3LnZlcmJvc2UoXCJSZW1vdmluZyBmcm9tIGRlbGltaXRlZCB2YWx1ZXNcIixlKSxpPXcucmVtb3ZlLmFycmF5VmFsdWUoZSxvKSxpPWkuam9pbihrLmRlbGltaXRlcikpLGsuZmlyZU9uSW5pdD09PSExJiZ3LmlzLmluaXRpYWxMb2FkKCk/dy52ZXJib3NlKFwiTm8gY2FsbGJhY2sgb24gaW5pdGlhbCBsb2FkXCIsay5vblJlbW92ZSk6ay5vblJlbW92ZS5jYWxsKCQsZSx0LG4pLHcuc2V0LnZhbHVlKGksdCxuKSx3LmNoZWNrLm1heFNlbGVjdGlvbnMoKX0sYXJyYXlWYWx1ZTpmdW5jdGlvbih0LG4pe3JldHVybiBlLmlzQXJyYXkobil8fChuPVtuXSksbj1lLmdyZXAobixmdW5jdGlvbihlKXtyZXR1cm4gdCE9ZX0pLHcudmVyYm9zZShcIlJlbW92ZWQgdmFsdWUgZnJvbSBkZWxpbWl0ZWQgc3RyaW5nXCIsdCxuKSxufSxsYWJlbDpmdW5jdGlvbihlLHQpe3ZhciBuPXouZmluZChGLmxhYmVsKSxpPW4uZmlsdGVyKCdbZGF0YS12YWx1ZT1cIicrZSsnXCJdJyk7dy52ZXJib3NlKFwiUmVtb3ZpbmcgbGFiZWxcIixpKSxpLnJlbW92ZSgpfSxhY3RpdmVMYWJlbHM6ZnVuY3Rpb24oZSl7ZT1lfHx6LmZpbmQoRi5sYWJlbCkuZmlsdGVyKFwiLlwiK1MuYWN0aXZlKSx3LnZlcmJvc2UoXCJSZW1vdmluZyBhY3RpdmUgbGFiZWwgc2VsZWN0aW9uc1wiLGUpLHcucmVtb3ZlLmxhYmVscyhlKX0sbGFiZWxzOmZ1bmN0aW9uKHQpe3Q9dHx8ei5maW5kKEYubGFiZWwpLHcudmVyYm9zZShcIlJlbW92aW5nIGxhYmVsc1wiLHQpLHQuZWFjaChmdW5jdGlvbigpe3ZhciB0PWUodGhpcykuZGF0YShSLnZhbHVlKSxuPXQhPT1pP1N0cmluZyh0KTp0LG89dy5pcy51c2VyVmFsdWUobik7bz8ody5yZW1vdmUudmFsdWUobiksdy5yZW1vdmUubGFiZWwobikpOncucmVtb3ZlLnNlbGVjdGVkKG4pfSl9LHRhYmJhYmxlOmZ1bmN0aW9uKCl7dy5oYXMuc2VhcmNoKCk/KHcuZGVidWcoXCJTZWFyY2hhYmxlIGRyb3Bkb3duIGluaXRpYWxpemVkXCIpLE4uYXR0cihcInRhYmluZGV4XCIsXCItMVwiKSxVLmF0dHIoXCJ0YWJpbmRleFwiLFwiLTFcIikpOih3LmRlYnVnKFwiU2ltcGxlIHNlbGVjdGlvbiBkcm9wZG93biBpbml0aWFsaXplZFwiKSx6LmF0dHIoXCJ0YWJpbmRleFwiLFwiLTFcIiksVS5hdHRyKFwidGFiaW5kZXhcIixcIi0xXCIpKX19LGhhczp7c2VhcmNoOmZ1bmN0aW9uKCl7cmV0dXJuIE4ubGVuZ3RoPjB9LHNlbGVjdElucHV0OmZ1bmN0aW9uKCl7cmV0dXJuIFYuaXMoXCJzZWxlY3RcIil9LGZpcnN0TGV0dGVyOmZ1bmN0aW9uKGUsdCl7dmFyIG4saTtyZXR1cm4gZSYmMCE9PWUubGVuZ3RoJiZcInN0cmluZ1wiPT10eXBlb2YgdD8obj13LmdldC5jaG9pY2VUZXh0KGUsITEpLHQ9dC50b0xvd2VyQ2FzZSgpLGk9U3RyaW5nKG4pLmNoYXJBdCgwKS50b0xvd2VyQ2FzZSgpLHQ9PWkpOiExfSxpbnB1dDpmdW5jdGlvbigpe3JldHVybiBWLmxlbmd0aD4wfSxpdGVtczpmdW5jdGlvbigpe3JldHVybiBXLmxlbmd0aD4wfSxtZW51OmZ1bmN0aW9uKCl7cmV0dXJuIFUubGVuZ3RoPjB9LG1lc3NhZ2U6ZnVuY3Rpb24oKXtyZXR1cm4gMCE9PVUuY2hpbGRyZW4oRi5tZXNzYWdlKS5sZW5ndGh9LGxhYmVsOmZ1bmN0aW9uKGUpe3ZhciB0PXouZmluZChGLmxhYmVsKTtyZXR1cm4gdC5maWx0ZXIoJ1tkYXRhLXZhbHVlPVwiJytlKydcIl0nKS5sZW5ndGg+MH0sbWF4U2VsZWN0aW9uczpmdW5jdGlvbigpe3JldHVybiBrLm1heFNlbGVjdGlvbnMmJncuZ2V0LnNlbGVjdGlvbkNvdW50KCk+PWsubWF4U2VsZWN0aW9uc30sYWxsUmVzdWx0c0ZpbHRlcmVkOmZ1bmN0aW9uKCl7cmV0dXJuIFcuZmlsdGVyKEYudW5zZWxlY3RhYmxlKS5sZW5ndGg9PT1XLmxlbmd0aH0scXVlcnk6ZnVuY3Rpb24oKXtyZXR1cm5cIlwiIT09dy5nZXQucXVlcnkoKX0sdmFsdWU6ZnVuY3Rpb24odCl7dmFyIG49dy5nZXQudmFsdWVzKCksaT1lLmlzQXJyYXkobik/biYmLTEhPT1lLmluQXJyYXkodCxuKTpuPT10O3JldHVybiBpPyEwOiExfX0saXM6e2FjdGl2ZTpmdW5jdGlvbigpe3JldHVybiB6Lmhhc0NsYXNzKFMuYWN0aXZlKX0sYWxyZWFkeVNldHVwOmZ1bmN0aW9uKCl7cmV0dXJuIHouaXMoXCJzZWxlY3RcIikmJnoucGFyZW50KEYuZHJvcGRvd24pLmxlbmd0aD4wJiYwPT09ei5wcmV2KCkubGVuZ3RofSxhbmltYXRpbmc6ZnVuY3Rpb24oZSl7cmV0dXJuIGU/ZS50cmFuc2l0aW9uJiZlLnRyYW5zaXRpb24oXCJpcyBhbmltYXRpbmdcIik6VS50cmFuc2l0aW9uJiZVLnRyYW5zaXRpb24oXCJpcyBhbmltYXRpbmdcIil9LGRpc2FibGVkOmZ1bmN0aW9uKCl7cmV0dXJuIHouaGFzQ2xhc3MoUy5kaXNhYmxlZCl9LGZvY3VzZWQ6ZnVuY3Rpb24oKXtyZXR1cm4gbi5hY3RpdmVFbGVtZW50PT09elswXX0sZm9jdXNlZE9uU2VhcmNoOmZ1bmN0aW9uKCl7cmV0dXJuIG4uYWN0aXZlRWxlbWVudD09PU5bMF19LGFsbEZpbHRlcmVkOmZ1bmN0aW9uKCl7cmV0dXJuKHcuaXMubXVsdGlwbGUoKXx8dy5oYXMuc2VhcmNoKCkpJiYhdy5oYXMubWVzc2FnZSgpJiZ3Lmhhcy5hbGxSZXN1bHRzRmlsdGVyZWQoKX0saGlkZGVuOmZ1bmN0aW9uKGUpe3JldHVybiF3LmlzLnZpc2libGUoZSl9LGluaXRpYWxMb2FkOmZ1bmN0aW9uKCl7cmV0dXJuIHZ9LG9uU2NyZWVuOmZ1bmN0aW9uKGUpe3ZhciB0LG49ZXx8VSxpPSEwLG89e307cmV0dXJuIG4uYWRkQ2xhc3MoUy5sb2FkaW5nKSx0PXtjb250ZXh0OntzY3JvbGxUb3A6SS5zY3JvbGxUb3AoKSxoZWlnaHQ6SS5vdXRlckhlaWdodCgpfSxtZW51OntvZmZzZXQ6bi5vZmZzZXQoKSxoZWlnaHQ6bi5vdXRlckhlaWdodCgpfX0sbz17YWJvdmU6dC5jb250ZXh0LnNjcm9sbFRvcDw9dC5tZW51Lm9mZnNldC50b3AtdC5tZW51LmhlaWdodCxiZWxvdzp0LmNvbnRleHQuc2Nyb2xsVG9wK3QuY29udGV4dC5oZWlnaHQ+PXQubWVudS5vZmZzZXQudG9wK3QubWVudS5oZWlnaHR9LG8uYmVsb3c/KHcudmVyYm9zZShcIkRyb3Bkb3duIGNhbiBmaXQgaW4gY29udGV4dCBkb3dud2FyZFwiLG8pLGk9ITApOm8uYmVsb3d8fG8uYWJvdmU/KHcudmVyYm9zZShcIkRyb3Bkb3duIGNhbm5vdCBmaXQgYmVsb3csIG9wZW5pbmcgdXB3YXJkXCIsbyksaT0hMSk6KHcudmVyYm9zZShcIkRyb3Bkb3duIGNhbm5vdCBmaXQgaW4gZWl0aGVyIGRpcmVjdGlvbiwgZmF2b3JpbmcgZG93bndhcmRcIixvKSxpPSEwKSxuLnJlbW92ZUNsYXNzKFMubG9hZGluZyksaX0saW5PYmplY3Q6ZnVuY3Rpb24odCxuKXt2YXIgaT0hMTtyZXR1cm4gZS5lYWNoKG4sZnVuY3Rpb24oZSxuKXtyZXR1cm4gbj09dD8oaT0hMCwhMCk6dm9pZCAwfSksaX0sbXVsdGlwbGU6ZnVuY3Rpb24oKXtyZXR1cm4gei5oYXNDbGFzcyhTLm11bHRpcGxlKX0sc2luZ2xlOmZ1bmN0aW9uKCl7cmV0dXJuIXcuaXMubXVsdGlwbGUoKX0sc2VsZWN0TXV0YXRpb246ZnVuY3Rpb24odCl7dmFyIG49ITE7cmV0dXJuIGUuZWFjaCh0LGZ1bmN0aW9uKHQsaSl7cmV0dXJuIGkudGFyZ2V0JiZlKGkudGFyZ2V0KS5pcyhcInNlbGVjdFwiKT8obj0hMCwhMCk6dm9pZCAwfSksbn0sc2VhcmNoOmZ1bmN0aW9uKCl7cmV0dXJuIHouaGFzQ2xhc3MoUy5zZWFyY2gpfSxzZWFyY2hTZWxlY3Rpb246ZnVuY3Rpb24oKXtyZXR1cm4gdy5oYXMuc2VhcmNoKCkmJjE9PT1OLnBhcmVudChGLmRyb3Bkb3duKS5sZW5ndGh9LHNlbGVjdGlvbjpmdW5jdGlvbigpe3JldHVybiB6Lmhhc0NsYXNzKFMuc2VsZWN0aW9uKX0sdXNlclZhbHVlOmZ1bmN0aW9uKHQpe3JldHVybi0xIT09ZS5pbkFycmF5KHQsdy5nZXQudXNlclZhbHVlcygpKX0sdXB3YXJkOmZ1bmN0aW9uKGUpe3ZhciB0PWV8fHo7cmV0dXJuIHQuaGFzQ2xhc3MoUy51cHdhcmQpfSx2aXNpYmxlOmZ1bmN0aW9uKGUpe3JldHVybiBlP2UuaGFzQ2xhc3MoUy52aXNpYmxlKTpVLmhhc0NsYXNzKFMudmlzaWJsZSl9fSxjYW46e2FjdGl2YXRlOmZ1bmN0aW9uKGUpe3JldHVybiBrLnVzZUxhYmVscz8hMDp3Lmhhcy5tYXhTZWxlY3Rpb25zKCk/dy5oYXMubWF4U2VsZWN0aW9ucygpJiZlLmhhc0NsYXNzKFMuYWN0aXZlKT8hMDohMTohMH0sY2xpY2s6ZnVuY3Rpb24oKXtyZXR1cm4gbHx8XCJjbGlja1wiPT1rLm9ufSxleHRlbmRTZWxlY3Q6ZnVuY3Rpb24oKXtyZXR1cm4gay5hbGxvd0FkZGl0aW9uc3x8ay5hcGlTZXR0aW5nc30sc2hvdzpmdW5jdGlvbigpe3JldHVybiF3LmlzLmRpc2FibGVkKCkmJih3Lmhhcy5pdGVtcygpfHx3Lmhhcy5tZXNzYWdlKCkpfSx1c2VBUEk6ZnVuY3Rpb24oKXtyZXR1cm4gZS5mbi5hcGkhPT1pfX0sYW5pbWF0ZTp7c2hvdzpmdW5jdGlvbih0LG4pe3ZhciBvLGE9bnx8VSxyPW4/ZnVuY3Rpb24oKXt9OmZ1bmN0aW9uKCl7dy5oaWRlU3ViTWVudXMoKSx3LmhpZGVPdGhlcnMoKSx3LnNldC5hY3RpdmUoKX07dD1lLmlzRnVuY3Rpb24odCk/dDpmdW5jdGlvbigpe30sdy52ZXJib3NlKFwiRG9pbmcgbWVudSBzaG93IGFuaW1hdGlvblwiLGEpLHcuc2V0LmRpcmVjdGlvbihuKSxvPXcuZ2V0LnRyYW5zaXRpb24obiksdy5pcy5zZWxlY3Rpb24oKSYmdy5zZXQuc2Nyb2xsUG9zaXRpb24ody5nZXQuc2VsZWN0ZWRJdGVtKCksITApLCh3LmlzLmhpZGRlbihhKXx8dy5pcy5hbmltYXRpbmcoYSkpJiYoXCJub25lXCI9PW8/KHIoKSxhLnRyYW5zaXRpb24oXCJzaG93XCIpLHQuY2FsbCgkKSk6ZS5mbi50cmFuc2l0aW9uIT09aSYmei50cmFuc2l0aW9uKFwiaXMgc3VwcG9ydGVkXCIpP2EudHJhbnNpdGlvbih7YW5pbWF0aW9uOm8rXCIgaW5cIixkZWJ1ZzprLmRlYnVnLHZlcmJvc2U6ay52ZXJib3NlLGR1cmF0aW9uOmsuZHVyYXRpb24scXVldWU6ITAsb25TdGFydDpyLG9uQ29tcGxldGU6ZnVuY3Rpb24oKXt0LmNhbGwoJCl9fSk6dy5lcnJvcihELm5vVHJhbnNpdGlvbixvKSl9LGhpZGU6ZnVuY3Rpb24odCxuKXt2YXIgbz1ufHxVLGE9KG4/Ljkqay5kdXJhdGlvbjprLmR1cmF0aW9uLG4/ZnVuY3Rpb24oKXt9OmZ1bmN0aW9uKCl7dy5jYW4uY2xpY2soKSYmdy51bmJpbmQuaW50ZW50KCksdy5yZW1vdmUuYWN0aXZlKCl9KSxyPXcuZ2V0LnRyYW5zaXRpb24obik7dD1lLmlzRnVuY3Rpb24odCk/dDpmdW5jdGlvbigpe30sKHcuaXMudmlzaWJsZShvKXx8dy5pcy5hbmltYXRpbmcobykpJiYody52ZXJib3NlKFwiRG9pbmcgbWVudSBoaWRlIGFuaW1hdGlvblwiLG8pLFwibm9uZVwiPT1yPyhhKCksby50cmFuc2l0aW9uKFwiaGlkZVwiKSx0LmNhbGwoJCkpOmUuZm4udHJhbnNpdGlvbiE9PWkmJnoudHJhbnNpdGlvbihcImlzIHN1cHBvcnRlZFwiKT9vLnRyYW5zaXRpb24oe2FuaW1hdGlvbjpyK1wiIG91dFwiLGR1cmF0aW9uOmsuZHVyYXRpb24sZGVidWc6ay5kZWJ1Zyx2ZXJib3NlOmsudmVyYm9zZSxxdWV1ZTohMCxvblN0YXJ0OmEsb25Db21wbGV0ZTpmdW5jdGlvbigpe1wiYXV0b1wiPT1rLmRpcmVjdGlvbiYmdy5yZW1vdmUudXB3YXJkKG4pLHQuY2FsbCgkKX19KTp3LmVycm9yKEQudHJhbnNpdGlvbikpfX0saGlkZUFuZENsZWFyOmZ1bmN0aW9uKCl7dy5yZW1vdmUuc2VhcmNoVGVybSgpLHcuaGFzLm1heFNlbGVjdGlvbnMoKXx8KHcuaGFzLnNlYXJjaCgpP3cuaGlkZShmdW5jdGlvbigpe3cucmVtb3ZlLmZpbHRlcmVkSXRlbSgpfSk6dy5oaWRlKCkpfSxkZWxheTp7c2hvdzpmdW5jdGlvbigpe3cudmVyYm9zZShcIkRlbGF5aW5nIHNob3cgZXZlbnQgdG8gZW5zdXJlIHVzZXIgaW50ZW50XCIpLGNsZWFyVGltZW91dCh3LnRpbWVyKSx3LnRpbWVyPXNldFRpbWVvdXQody5zaG93LGsuZGVsYXkuc2hvdyl9LGhpZGU6ZnVuY3Rpb24oKXt3LnZlcmJvc2UoXCJEZWxheWluZyBoaWRlIGV2ZW50IHRvIGVuc3VyZSB1c2VyIGludGVudFwiKSxjbGVhclRpbWVvdXQody50aW1lciksdy50aW1lcj1zZXRUaW1lb3V0KHcuaGlkZSxrLmRlbGF5LmhpZGUpfX0sZXNjYXBlOntyZWdFeHA6ZnVuY3Rpb24oZSl7cmV0dXJuIGU9U3RyaW5nKGUpLGUucmVwbGFjZShFLmVzY2FwZSxcIlxcXFwkJlwiKX19LHNldHRpbmc6ZnVuY3Rpb24odCxuKXtpZih3LmRlYnVnKFwiQ2hhbmdpbmcgc2V0dGluZ1wiLHQsbiksZS5pc1BsYWluT2JqZWN0KHQpKWUuZXh0ZW5kKCEwLGssdCk7ZWxzZXtpZihuPT09aSlyZXR1cm4ga1t0XTtrW3RdPW59fSxpbnRlcm5hbDpmdW5jdGlvbih0LG4pe2lmKGUuaXNQbGFpbk9iamVjdCh0KSllLmV4dGVuZCghMCx3LHQpO2Vsc2V7aWYobj09PWkpcmV0dXJuIHdbdF07d1t0XT1ufX0sZGVidWc6ZnVuY3Rpb24oKXtrLmRlYnVnJiYoay5wZXJmb3JtYW5jZT93LnBlcmZvcm1hbmNlLmxvZyhhcmd1bWVudHMpOih3LmRlYnVnPUZ1bmN0aW9uLnByb3RvdHlwZS5iaW5kLmNhbGwoY29uc29sZS5pbmZvLGNvbnNvbGUsay5uYW1lK1wiOlwiKSx3LmRlYnVnLmFwcGx5KGNvbnNvbGUsYXJndW1lbnRzKSkpfSx2ZXJib3NlOmZ1bmN0aW9uKCl7ay52ZXJib3NlJiZrLmRlYnVnJiYoay5wZXJmb3JtYW5jZT93LnBlcmZvcm1hbmNlLmxvZyhhcmd1bWVudHMpOih3LnZlcmJvc2U9RnVuY3Rpb24ucHJvdG90eXBlLmJpbmQuY2FsbChjb25zb2xlLmluZm8sY29uc29sZSxrLm5hbWUrXCI6XCIpLHcudmVyYm9zZS5hcHBseShjb25zb2xlLGFyZ3VtZW50cykpKX0sZXJyb3I6ZnVuY3Rpb24oKXt3LmVycm9yPUZ1bmN0aW9uLnByb3RvdHlwZS5iaW5kLmNhbGwoY29uc29sZS5lcnJvcixjb25zb2xlLGsubmFtZStcIjpcIiksdy5lcnJvci5hcHBseShjb25zb2xlLGFyZ3VtZW50cyl9LHBlcmZvcm1hbmNlOntsb2c6ZnVuY3Rpb24oZSl7dmFyIHQsbixpO2sucGVyZm9ybWFuY2UmJih0PShuZXcgRGF0ZSkuZ2V0VGltZSgpLGk9dXx8dCxuPXQtaSx1PXQsZC5wdXNoKHtOYW1lOmVbMF0sQXJndW1lbnRzOltdLnNsaWNlLmNhbGwoZSwxKXx8XCJcIixFbGVtZW50OiQsXCJFeGVjdXRpb24gVGltZVwiOm59KSksY2xlYXJUaW1lb3V0KHcucGVyZm9ybWFuY2UudGltZXIpLHcucGVyZm9ybWFuY2UudGltZXI9c2V0VGltZW91dCh3LnBlcmZvcm1hbmNlLmRpc3BsYXksNTAwKX0sZGlzcGxheTpmdW5jdGlvbigpe3ZhciB0PWsubmFtZStcIjpcIixuPTA7dT0hMSxjbGVhclRpbWVvdXQody5wZXJmb3JtYW5jZS50aW1lciksZS5lYWNoKGQsZnVuY3Rpb24oZSx0KXtuKz10W1wiRXhlY3V0aW9uIFRpbWVcIl19KSx0Kz1cIiBcIituK1wibXNcIixjJiYodCs9XCIgJ1wiK2MrXCInXCIpLChjb25zb2xlLmdyb3VwIT09aXx8Y29uc29sZS50YWJsZSE9PWkpJiZkLmxlbmd0aD4wJiYoY29uc29sZS5ncm91cENvbGxhcHNlZCh0KSxjb25zb2xlLnRhYmxlP2NvbnNvbGUudGFibGUoZCk6ZS5lYWNoKGQsZnVuY3Rpb24oZSx0KXtjb25zb2xlLmxvZyh0Lk5hbWUrXCI6IFwiK3RbXCJFeGVjdXRpb24gVGltZVwiXStcIm1zXCIpfSksY29uc29sZS5ncm91cEVuZCgpKSxkPVtdfX0saW52b2tlOmZ1bmN0aW9uKHQsbixvKXt2YXIgcixzLGMsbD1ZO3JldHVybiBuPW58fGcsbz0kfHxvLFwic3RyaW5nXCI9PXR5cGVvZiB0JiZsIT09aSYmKHQ9dC5zcGxpdCgvW1xcLiBdLykscj10Lmxlbmd0aC0xLGUuZWFjaCh0LGZ1bmN0aW9uKG4sbyl7dmFyIGE9biE9cj9vK3RbbisxXS5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSt0W24rMV0uc2xpY2UoMSk6dDtpZihlLmlzUGxhaW5PYmplY3QobFthXSkmJm4hPXIpbD1sW2FdO2Vsc2V7aWYobFthXSE9PWkpcmV0dXJuIHM9bFthXSwhMTtpZighZS5pc1BsYWluT2JqZWN0KGxbb10pfHxuPT1yKXJldHVybiBsW29dIT09aT8ocz1sW29dLCExKToody5lcnJvcihELm1ldGhvZCx0KSwhMSk7bD1sW29dfX0pKSxlLmlzRnVuY3Rpb24ocyk/Yz1zLmFwcGx5KG8sbik6cyE9PWkmJihjPXMpLGUuaXNBcnJheShhKT9hLnB1c2goYyk6YSE9PWk/YT1bYSxjXTpjIT09aSYmKGE9Yyksc319LGY/KFk9PT1pJiZ3LmluaXRpYWxpemUoKSx3Lmludm9rZShtKSk6KFkhPT1pJiZZLmludm9rZShcImRlc3Ryb3lcIiksdy5pbml0aWFsaXplKCkpfSksYSE9PWk/YTpyfSxlLmZuLmRyb3Bkb3duLnNldHRpbmdzPXtkZWJ1ZzohMSx2ZXJib3NlOiExLHBlcmZvcm1hbmNlOiEwLG9uOlwiY2xpY2tcIixhY3Rpb246XCJhY3RpdmF0ZVwiLGFwaVNldHRpbmdzOiExLHNhdmVSZW1vdGVEYXRhOiEwLHRocm90dGxlOjIwMCxjb250ZXh0OnQsZGlyZWN0aW9uOlwiYXV0b1wiLGtlZXBPblNjcmVlbjohMCxtYXRjaDpcImJvdGhcIixmdWxsVGV4dFNlYXJjaDohMSxwbGFjZWhvbGRlcjpcImF1dG9cIixwcmVzZXJ2ZUhUTUw6ITAsc29ydFNlbGVjdDohMSxmb3JjZVNlbGVjdGlvbjohMCxhbGxvd0FkZGl0aW9uczohMSxtYXhTZWxlY3Rpb25zOiExLHVzZUxhYmVsczohMCxkZWxpbWl0ZXI6XCIsXCIsc2hvd09uRm9jdXM6ITAsYWxsb3dUYWI6ITAsYWxsb3dDYXRlZ29yeVNlbGVjdGlvbjohMSxmaXJlT25Jbml0OiExLHRyYW5zaXRpb246XCJhdXRvXCIsZHVyYXRpb246MjAwLGdseXBoV2lkdGg6MS4wNzE0LGxhYmVsOnt0cmFuc2l0aW9uOlwic2NhbGVcIixkdXJhdGlvbjoyMDAsdmFyaWF0aW9uOiExfSxkZWxheTp7aGlkZTozMDAsc2hvdzoyMDAsc2VhcmNoOjIwLHRvdWNoOjUwfSxvbkNoYW5nZTpmdW5jdGlvbihlLHQsbil7fSxvbkFkZDpmdW5jdGlvbihlLHQsbil7fSxvblJlbW92ZTpmdW5jdGlvbihlLHQsbil7fSxvbkxhYmVsU2VsZWN0OmZ1bmN0aW9uKGUpe30sb25MYWJlbENyZWF0ZTpmdW5jdGlvbih0LG4pe3JldHVybiBlKHRoaXMpfSxvbk5vUmVzdWx0czpmdW5jdGlvbihlKXtyZXR1cm4hMH0sb25TaG93OmZ1bmN0aW9uKCl7fSxvbkhpZGU6ZnVuY3Rpb24oKXt9LG5hbWU6XCJEcm9wZG93blwiLG5hbWVzcGFjZTpcImRyb3Bkb3duXCIsbWVzc2FnZTp7YWRkUmVzdWx0OlwiQWRkIDxiPnt0ZXJtfTwvYj5cIixjb3VudDpcIntjb3VudH0gc2VsZWN0ZWRcIixtYXhTZWxlY3Rpb25zOlwiTWF4IHttYXhDb3VudH0gc2VsZWN0aW9uc1wiLG5vUmVzdWx0czpcIk5vIHJlc3VsdHMgZm91bmQuXCIsc2VydmVyRXJyb3I6XCJUaGVyZSB3YXMgYW4gZXJyb3IgY29udGFjdGluZyB0aGUgc2VydmVyXCJ9LGVycm9yOnthY3Rpb246XCJZb3UgY2FsbGVkIGEgZHJvcGRvd24gYWN0aW9uIHRoYXQgd2FzIG5vdCBkZWZpbmVkXCIsYWxyZWFkeVNldHVwOlwiT25jZSBhIHNlbGVjdCBoYXMgYmVlbiBpbml0aWFsaXplZCBiZWhhdmlvcnMgbXVzdCBiZSBjYWxsZWQgb24gdGhlIGNyZWF0ZWQgdWkgZHJvcGRvd25cIixsYWJlbHM6XCJBbGxvd2luZyB1c2VyIGFkZGl0aW9ucyBjdXJyZW50bHkgcmVxdWlyZXMgdGhlIHVzZSBvZiBsYWJlbHMuXCIsbWlzc2luZ011bHRpcGxlOlwiPHNlbGVjdD4gcmVxdWlyZXMgbXVsdGlwbGUgcHJvcGVydHkgdG8gYmUgc2V0IHRvIGNvcnJlY3RseSBwcmVzZXJ2ZSBtdWx0aXBsZSB2YWx1ZXNcIixtZXRob2Q6XCJUaGUgbWV0aG9kIHlvdSBjYWxsZWQgaXMgbm90IGRlZmluZWQuXCIsbm9BUEk6XCJUaGUgQVBJIG1vZHVsZSBpcyByZXF1aXJlZCB0byBsb2FkIHJlc291cmNlcyByZW1vdGVseVwiLG5vU3RvcmFnZTpcIlNhdmluZyByZW1vdGUgZGF0YSByZXF1aXJlcyBzZXNzaW9uIHN0b3JhZ2VcIixub1RyYW5zaXRpb246XCJUaGlzIG1vZHVsZSByZXF1aXJlcyB1aSB0cmFuc2l0aW9ucyA8aHR0cHM6Ly9naXRodWIuY29tL1NlbWFudGljLU9yZy9VSS1UcmFuc2l0aW9uPlwifSxyZWdFeHA6e2VzY2FwZTovWy1bXFxde30oKSorPy4sXFxcXF4kfCNcXHNdL2d9LG1ldGFkYXRhOntkZWZhdWx0VGV4dDpcImRlZmF1bHRUZXh0XCIsZGVmYXVsdFZhbHVlOlwiZGVmYXVsdFZhbHVlXCIscGxhY2Vob2xkZXJUZXh0OlwicGxhY2Vob2xkZXJcIix0ZXh0OlwidGV4dFwiLHZhbHVlOlwidmFsdWVcIn0sZmllbGRzOnt2YWx1ZXM6XCJ2YWx1ZXNcIixuYW1lOlwibmFtZVwiLHZhbHVlOlwidmFsdWVcIn0sc2VsZWN0b3I6e2FkZGl0aW9uOlwiLmFkZGl0aW9uXCIsZHJvcGRvd246XCIudWkuZHJvcGRvd25cIixpY29uOlwiPiAuZHJvcGRvd24uaWNvblwiLGlucHV0Oic+IGlucHV0W3R5cGU9XCJoaWRkZW5cIl0sID4gc2VsZWN0JyxpdGVtOlwiLml0ZW1cIixsYWJlbDpcIj4gLmxhYmVsXCIscmVtb3ZlOlwiPiAubGFiZWwgPiAuZGVsZXRlLmljb25cIixzaWJsaW5nTGFiZWw6XCIubGFiZWxcIixtZW51OlwiLm1lbnVcIixtZXNzYWdlOlwiLm1lc3NhZ2VcIixtZW51SWNvbjpcIi5kcm9wZG93bi5pY29uXCIsc2VhcmNoOlwiaW5wdXQuc2VhcmNoLCAubWVudSA+IC5zZWFyY2ggPiBpbnB1dFwiLHRleHQ6XCI+IC50ZXh0Om5vdCguaWNvbilcIix1bnNlbGVjdGFibGU6XCIuZGlzYWJsZWQsIC5maWx0ZXJlZFwifSxjbGFzc05hbWU6e2FjdGl2ZTpcImFjdGl2ZVwiLGFkZGl0aW9uOlwiYWRkaXRpb25cIixhbmltYXRpbmc6XCJhbmltYXRpbmdcIixkaXNhYmxlZDpcImRpc2FibGVkXCIsZHJvcGRvd246XCJ1aSBkcm9wZG93blwiLGZpbHRlcmVkOlwiZmlsdGVyZWRcIixoaWRkZW46XCJoaWRkZW4gdHJhbnNpdGlvblwiLGl0ZW06XCJpdGVtXCIsbGFiZWw6XCJ1aSBsYWJlbFwiLGxvYWRpbmc6XCJsb2FkaW5nXCIsbWVudTpcIm1lbnVcIixtZXNzYWdlOlwibWVzc2FnZVwiLG11bHRpcGxlOlwibXVsdGlwbGVcIixwbGFjZWhvbGRlcjpcImRlZmF1bHRcIixzZWFyY2g6XCJzZWFyY2hcIixzZWxlY3RlZDpcInNlbGVjdGVkXCIsc2VsZWN0aW9uOlwic2VsZWN0aW9uXCIsdXB3YXJkOlwidXB3YXJkXCIsdmlzaWJsZTpcInZpc2libGVcIn19LGUuZm4uZHJvcGRvd24uc2V0dGluZ3MudGVtcGxhdGVzPXtkcm9wZG93bjpmdW5jdGlvbih0KXt2YXIgbj10LnBsYWNlaG9sZGVyfHwhMSxpPSh0LnZhbHVlc3x8e30sXCJcIik7cmV0dXJuIGkrPSc8aSBjbGFzcz1cImRyb3Bkb3duIGljb25cIj48L2k+JyxpKz10LnBsYWNlaG9sZGVyPyc8ZGl2IGNsYXNzPVwiZGVmYXVsdCB0ZXh0XCI+JytuK1wiPC9kaXY+XCI6JzxkaXYgY2xhc3M9XCJ0ZXh0XCI+PC9kaXY+JyxpKz0nPGRpdiBjbGFzcz1cIm1lbnVcIj4nLGUuZWFjaCh0LnZhbHVlcyxmdW5jdGlvbihlLHQpe2krPXQuZGlzYWJsZWQ/JzxkaXYgY2xhc3M9XCJkaXNhYmxlZCBpdGVtXCIgZGF0YS12YWx1ZT1cIicrdC52YWx1ZSsnXCI+Jyt0Lm5hbWUrXCI8L2Rpdj5cIjonPGRpdiBjbGFzcz1cIml0ZW1cIiBkYXRhLXZhbHVlPVwiJyt0LnZhbHVlKydcIj4nK3QubmFtZStcIjwvZGl2PlwifSksaSs9XCI8L2Rpdj5cIn0sbWVudTpmdW5jdGlvbih0LG4pe3ZhciBpPSh0LnZhbHVlc3x8e30sXCJcIik7cmV0dXJuIGUuZWFjaCh0W24udmFsdWVzXSxmdW5jdGlvbihlLHQpe2krPSc8ZGl2IGNsYXNzPVwiaXRlbVwiIGRhdGEtdmFsdWU9XCInK3Rbbi52YWx1ZV0rJ1wiPicrdFtuLm5hbWVdK1wiPC9kaXY+XCJ9KSxpfSxsYWJlbDpmdW5jdGlvbihlLHQpe3JldHVybiB0Kyc8aSBjbGFzcz1cImRlbGV0ZSBpY29uXCI+PC9pPid9LG1lc3NhZ2U6ZnVuY3Rpb24oZSl7cmV0dXJuIGV9LGFkZGl0aW9uOmZ1bmN0aW9uKGUpe3JldHVybiBlfX19KGpRdWVyeSx3aW5kb3csZG9jdW1lbnQpLGZ1bmN0aW9uKGUsdCxuLGkpe1widXNlIHN0cmljdFwiO2UuZm4uZW1iZWQ9ZnVuY3Rpb24obil7dmFyIG8sYT1lKHRoaXMpLHI9YS5zZWxlY3Rvcnx8XCJcIixzPShuZXcgRGF0ZSkuZ2V0VGltZSgpLGM9W10sbD1hcmd1bWVudHNbMF0sdT1cInN0cmluZ1wiPT10eXBlb2YgbCxkPVtdLnNsaWNlLmNhbGwoYXJndW1lbnRzLDEpO3JldHVybiBhLmVhY2goZnVuY3Rpb24oKXt2YXIgbSxmPWUuaXNQbGFpbk9iamVjdChuKT9lLmV4dGVuZCghMCx7fSxlLmZuLmVtYmVkLnNldHRpbmdzLG4pOmUuZXh0ZW5kKHt9LGUuZm4uZW1iZWQuc2V0dGluZ3MpLGc9Zi5zZWxlY3RvcixwPWYuY2xhc3NOYW1lLHY9Zi5zb3VyY2VzLGg9Zi5lcnJvcixiPWYubWV0YWRhdGEseT1mLm5hbWVzcGFjZSx4PWYudGVtcGxhdGVzLEM9XCIuXCIreSx3PVwibW9kdWxlLVwiK3ksaz0oZSh0KSxlKHRoaXMpKSxTPWsuZmluZChnLnBsYWNlaG9sZGVyKSxUPWsuZmluZChnLmljb24pLEE9ay5maW5kKGcuZW1iZWQpLFI9dGhpcyxQPWsuZGF0YSh3KTttPXtpbml0aWFsaXplOmZ1bmN0aW9uKCl7bS5kZWJ1ZyhcIkluaXRpYWxpemluZyBlbWJlZFwiKSxtLmRldGVybWluZS5hdXRvcGxheSgpLG0uY3JlYXRlKCksbS5iaW5kLmV2ZW50cygpLG0uaW5zdGFudGlhdGUoKX0saW5zdGFudGlhdGU6ZnVuY3Rpb24oKXttLnZlcmJvc2UoXCJTdG9yaW5nIGluc3RhbmNlIG9mIG1vZHVsZVwiLG0pLFA9bSxrLmRhdGEodyxtKX0sZGVzdHJveTpmdW5jdGlvbigpe20udmVyYm9zZShcIkRlc3Ryb3lpbmcgcHJldmlvdXMgaW5zdGFuY2Ugb2YgZW1iZWRcIiksbS5yZXNldCgpLGsucmVtb3ZlRGF0YSh3KS5vZmYoQyl9LHJlZnJlc2g6ZnVuY3Rpb24oKXttLnZlcmJvc2UoXCJSZWZyZXNoaW5nIHNlbGVjdG9yIGNhY2hlXCIpLFM9ay5maW5kKGcucGxhY2Vob2xkZXIpLFQ9ay5maW5kKGcuaWNvbiksQT1rLmZpbmQoZy5lbWJlZCl9LGJpbmQ6e2V2ZW50czpmdW5jdGlvbigpe20uaGFzLnBsYWNlaG9sZGVyKCkmJihtLmRlYnVnKFwiQWRkaW5nIHBsYWNlaG9sZGVyIGV2ZW50c1wiKSxrLm9uKFwiY2xpY2tcIitDLGcucGxhY2Vob2xkZXIsbS5jcmVhdGVBbmRTaG93KS5vbihcImNsaWNrXCIrQyxnLmljb24sbS5jcmVhdGVBbmRTaG93KSl9fSxjcmVhdGU6ZnVuY3Rpb24oKXt2YXIgZT1tLmdldC5wbGFjZWhvbGRlcigpO2U/bS5jcmVhdGVQbGFjZWhvbGRlcigpOm0uY3JlYXRlQW5kU2hvdygpfSxjcmVhdGVQbGFjZWhvbGRlcjpmdW5jdGlvbihlKXt7dmFyIHQ9bS5nZXQuaWNvbigpLG49bS5nZXQudXJsKCk7bS5nZW5lcmF0ZS5lbWJlZChuKX1lPWV8fG0uZ2V0LnBsYWNlaG9sZGVyKCksay5odG1sKHgucGxhY2Vob2xkZXIoZSx0KSksbS5kZWJ1ZyhcIkNyZWF0aW5nIHBsYWNlaG9sZGVyIGZvciBlbWJlZFwiLGUsdCl9LGNyZWF0ZUVtYmVkOmZ1bmN0aW9uKHQpe20ucmVmcmVzaCgpLHQ9dHx8bS5nZXQudXJsKCksQT1lKFwiPGRpdi8+XCIpLmFkZENsYXNzKHAuZW1iZWQpLmh0bWwobS5nZW5lcmF0ZS5lbWJlZCh0KSkuYXBwZW5kVG8oayksZi5vbkNyZWF0ZS5jYWxsKFIsdCksbS5kZWJ1ZyhcIkNyZWF0aW5nIGVtYmVkIG9iamVjdFwiLEEpfSxjcmVhdGVBbmRTaG93OmZ1bmN0aW9uKCl7bS5jcmVhdGVFbWJlZCgpLG0uc2hvdygpfSxjaGFuZ2U6ZnVuY3Rpb24oZSx0LG4pe20uZGVidWcoXCJDaGFuZ2luZyB2aWRlbyB0byBcIixlLHQsbiksay5kYXRhKGIuc291cmNlLGUpLmRhdGEoYi5pZCx0KS5kYXRhKGIudXJsLG4pLG0uY3JlYXRlKCl9LHJlc2V0OmZ1bmN0aW9uKCl7bS5kZWJ1ZyhcIkNsZWFyaW5nIGVtYmVkIGFuZCBzaG93aW5nIHBsYWNlaG9sZGVyXCIpLG0ucmVtb3ZlLmFjdGl2ZSgpLG0ucmVtb3ZlLmVtYmVkKCksbS5zaG93UGxhY2Vob2xkZXIoKSxmLm9uUmVzZXQuY2FsbChSKX0sc2hvdzpmdW5jdGlvbigpe20uZGVidWcoXCJTaG93aW5nIGVtYmVkXCIpLG0uc2V0LmFjdGl2ZSgpLGYub25EaXNwbGF5LmNhbGwoUil9LGhpZGU6ZnVuY3Rpb24oKXttLmRlYnVnKFwiSGlkaW5nIGVtYmVkXCIpLG0uc2hvd1BsYWNlaG9sZGVyKCl9LHNob3dQbGFjZWhvbGRlcjpmdW5jdGlvbigpe20uZGVidWcoXCJTaG93aW5nIHBsYWNlaG9sZGVyIGltYWdlXCIpLG0ucmVtb3ZlLmFjdGl2ZSgpLGYub25QbGFjZWhvbGRlckRpc3BsYXkuY2FsbChSKX0sZ2V0OntpZDpmdW5jdGlvbigpe3JldHVybiBmLmlkfHxrLmRhdGEoYi5pZCl9LHBsYWNlaG9sZGVyOmZ1bmN0aW9uKCl7cmV0dXJuIGYucGxhY2Vob2xkZXJ8fGsuZGF0YShiLnBsYWNlaG9sZGVyKTtcclxuXHJcbn0saWNvbjpmdW5jdGlvbigpe3JldHVybiBmLmljb24/Zi5pY29uOmsuZGF0YShiLmljb24pIT09aT9rLmRhdGEoYi5pY29uKTptLmRldGVybWluZS5pY29uKCl9LHNvdXJjZTpmdW5jdGlvbihlKXtyZXR1cm4gZi5zb3VyY2U/Zi5zb3VyY2U6ay5kYXRhKGIuc291cmNlKSE9PWk/ay5kYXRhKGIuc291cmNlKTptLmRldGVybWluZS5zb3VyY2UoKX0sdHlwZTpmdW5jdGlvbigpe3ZhciBlPW0uZ2V0LnNvdXJjZSgpO3JldHVybiB2W2VdIT09aT92W2VdLnR5cGU6ITF9LHVybDpmdW5jdGlvbigpe3JldHVybiBmLnVybD9mLnVybDprLmRhdGEoYi51cmwpIT09aT9rLmRhdGEoYi51cmwpOm0uZGV0ZXJtaW5lLnVybCgpfX0sZGV0ZXJtaW5lOnthdXRvcGxheTpmdW5jdGlvbigpe20uc2hvdWxkLmF1dG9wbGF5KCkmJihmLmF1dG9wbGF5PSEwKX0sc291cmNlOmZ1bmN0aW9uKHQpe3ZhciBuPSExO3JldHVybiB0PXR8fG0uZ2V0LnVybCgpLHQmJmUuZWFjaCh2LGZ1bmN0aW9uKGUsaSl7cmV0dXJuLTEhPT10LnNlYXJjaChpLmRvbWFpbik/KG49ZSwhMSk6dm9pZCAwfSksbn0saWNvbjpmdW5jdGlvbigpe3ZhciBlPW0uZ2V0LnNvdXJjZSgpO3JldHVybiB2W2VdIT09aT92W2VdLmljb246ITF9LHVybDpmdW5jdGlvbigpe3ZhciBlLHQ9Zi5pZHx8ay5kYXRhKGIuaWQpLG49Zi5zb3VyY2V8fGsuZGF0YShiLnNvdXJjZSk7cmV0dXJuIGU9dltuXSE9PWk/dltuXS51cmwucmVwbGFjZShcIntpZH1cIix0KTohMSxlJiZrLmRhdGEoYi51cmwsZSksZX19LHNldDp7YWN0aXZlOmZ1bmN0aW9uKCl7ay5hZGRDbGFzcyhwLmFjdGl2ZSl9fSxyZW1vdmU6e2FjdGl2ZTpmdW5jdGlvbigpe2sucmVtb3ZlQ2xhc3MocC5hY3RpdmUpfSxlbWJlZDpmdW5jdGlvbigpe0EuZW1wdHkoKX19LGVuY29kZTp7cGFyYW1ldGVyczpmdW5jdGlvbihlKXt2YXIgdCxuPVtdO2Zvcih0IGluIGUpbi5wdXNoKGVuY29kZVVSSUNvbXBvbmVudCh0KStcIj1cIitlbmNvZGVVUklDb21wb25lbnQoZVt0XSkpO3JldHVybiBuLmpvaW4oXCImYW1wO1wiKX19LGdlbmVyYXRlOntlbWJlZDpmdW5jdGlvbihlKXttLmRlYnVnKFwiR2VuZXJhdGluZyBlbWJlZCBodG1sXCIpO3ZhciB0LG4saT1tLmdldC5zb3VyY2UoKTtyZXR1cm4gZT1tLmdldC51cmwoZSksZT8obj1tLmdlbmVyYXRlLnBhcmFtZXRlcnMoaSksdD14LmlmcmFtZShlLG4pKTptLmVycm9yKGgubm9VUkwsayksdH0scGFyYW1ldGVyczpmdW5jdGlvbih0LG4pe3ZhciBvPXZbdF0mJnZbdF0ucGFyYW1ldGVycyE9PWk/dlt0XS5wYXJhbWV0ZXJzKGYpOnt9O3JldHVybiBuPW58fGYucGFyYW1ldGVycyxuJiYobz1lLmV4dGVuZCh7fSxvLG4pKSxvPWYub25FbWJlZChvKSxtLmVuY29kZS5wYXJhbWV0ZXJzKG8pfX0saGFzOntwbGFjZWhvbGRlcjpmdW5jdGlvbigpe3JldHVybiBmLnBsYWNlaG9sZGVyfHxrLmRhdGEoYi5wbGFjZWhvbGRlcil9fSxzaG91bGQ6e2F1dG9wbGF5OmZ1bmN0aW9uKCl7cmV0dXJuXCJhdXRvXCI9PT1mLmF1dG9wbGF5P2YucGxhY2Vob2xkZXJ8fGsuZGF0YShiLnBsYWNlaG9sZGVyKSE9PWk6Zi5hdXRvcGxheX19LGlzOnt2aWRlbzpmdW5jdGlvbigpe3JldHVyblwidmlkZW9cIj09bS5nZXQudHlwZSgpfX0sc2V0dGluZzpmdW5jdGlvbih0LG4pe2lmKG0uZGVidWcoXCJDaGFuZ2luZyBzZXR0aW5nXCIsdCxuKSxlLmlzUGxhaW5PYmplY3QodCkpZS5leHRlbmQoITAsZix0KTtlbHNle2lmKG49PT1pKXJldHVybiBmW3RdO2ZbdF09bn19LGludGVybmFsOmZ1bmN0aW9uKHQsbil7aWYoZS5pc1BsYWluT2JqZWN0KHQpKWUuZXh0ZW5kKCEwLG0sdCk7ZWxzZXtpZihuPT09aSlyZXR1cm4gbVt0XTttW3RdPW59fSxkZWJ1ZzpmdW5jdGlvbigpe2YuZGVidWcmJihmLnBlcmZvcm1hbmNlP20ucGVyZm9ybWFuY2UubG9nKGFyZ3VtZW50cyk6KG0uZGVidWc9RnVuY3Rpb24ucHJvdG90eXBlLmJpbmQuY2FsbChjb25zb2xlLmluZm8sY29uc29sZSxmLm5hbWUrXCI6XCIpLG0uZGVidWcuYXBwbHkoY29uc29sZSxhcmd1bWVudHMpKSl9LHZlcmJvc2U6ZnVuY3Rpb24oKXtmLnZlcmJvc2UmJmYuZGVidWcmJihmLnBlcmZvcm1hbmNlP20ucGVyZm9ybWFuY2UubG9nKGFyZ3VtZW50cyk6KG0udmVyYm9zZT1GdW5jdGlvbi5wcm90b3R5cGUuYmluZC5jYWxsKGNvbnNvbGUuaW5mbyxjb25zb2xlLGYubmFtZStcIjpcIiksbS52ZXJib3NlLmFwcGx5KGNvbnNvbGUsYXJndW1lbnRzKSkpfSxlcnJvcjpmdW5jdGlvbigpe20uZXJyb3I9RnVuY3Rpb24ucHJvdG90eXBlLmJpbmQuY2FsbChjb25zb2xlLmVycm9yLGNvbnNvbGUsZi5uYW1lK1wiOlwiKSxtLmVycm9yLmFwcGx5KGNvbnNvbGUsYXJndW1lbnRzKX0scGVyZm9ybWFuY2U6e2xvZzpmdW5jdGlvbihlKXt2YXIgdCxuLGk7Zi5wZXJmb3JtYW5jZSYmKHQ9KG5ldyBEYXRlKS5nZXRUaW1lKCksaT1zfHx0LG49dC1pLHM9dCxjLnB1c2goe05hbWU6ZVswXSxBcmd1bWVudHM6W10uc2xpY2UuY2FsbChlLDEpfHxcIlwiLEVsZW1lbnQ6UixcIkV4ZWN1dGlvbiBUaW1lXCI6bn0pKSxjbGVhclRpbWVvdXQobS5wZXJmb3JtYW5jZS50aW1lciksbS5wZXJmb3JtYW5jZS50aW1lcj1zZXRUaW1lb3V0KG0ucGVyZm9ybWFuY2UuZGlzcGxheSw1MDApfSxkaXNwbGF5OmZ1bmN0aW9uKCl7dmFyIHQ9Zi5uYW1lK1wiOlwiLG49MDtzPSExLGNsZWFyVGltZW91dChtLnBlcmZvcm1hbmNlLnRpbWVyKSxlLmVhY2goYyxmdW5jdGlvbihlLHQpe24rPXRbXCJFeGVjdXRpb24gVGltZVwiXX0pLHQrPVwiIFwiK24rXCJtc1wiLHImJih0Kz1cIiAnXCIrcitcIidcIiksYS5sZW5ndGg+MSYmKHQrPVwiIChcIithLmxlbmd0aCtcIilcIiksKGNvbnNvbGUuZ3JvdXAhPT1pfHxjb25zb2xlLnRhYmxlIT09aSkmJmMubGVuZ3RoPjAmJihjb25zb2xlLmdyb3VwQ29sbGFwc2VkKHQpLGNvbnNvbGUudGFibGU/Y29uc29sZS50YWJsZShjKTplLmVhY2goYyxmdW5jdGlvbihlLHQpe2NvbnNvbGUubG9nKHQuTmFtZStcIjogXCIrdFtcIkV4ZWN1dGlvbiBUaW1lXCJdK1wibXNcIil9KSxjb25zb2xlLmdyb3VwRW5kKCkpLGM9W119fSxpbnZva2U6ZnVuY3Rpb24odCxuLGEpe3ZhciByLHMsYyxsPVA7cmV0dXJuIG49bnx8ZCxhPVJ8fGEsXCJzdHJpbmdcIj09dHlwZW9mIHQmJmwhPT1pJiYodD10LnNwbGl0KC9bXFwuIF0vKSxyPXQubGVuZ3RoLTEsZS5lYWNoKHQsZnVuY3Rpb24obixvKXt2YXIgYT1uIT1yP28rdFtuKzFdLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpK3RbbisxXS5zbGljZSgxKTp0O2lmKGUuaXNQbGFpbk9iamVjdChsW2FdKSYmbiE9cilsPWxbYV07ZWxzZXtpZihsW2FdIT09aSlyZXR1cm4gcz1sW2FdLCExO2lmKCFlLmlzUGxhaW5PYmplY3QobFtvXSl8fG49PXIpcmV0dXJuIGxbb10hPT1pPyhzPWxbb10sITEpOihtLmVycm9yKGgubWV0aG9kLHQpLCExKTtsPWxbb119fSkpLGUuaXNGdW5jdGlvbihzKT9jPXMuYXBwbHkoYSxuKTpzIT09aSYmKGM9cyksZS5pc0FycmF5KG8pP28ucHVzaChjKTpvIT09aT9vPVtvLGNdOmMhPT1pJiYobz1jKSxzfX0sdT8oUD09PWkmJm0uaW5pdGlhbGl6ZSgpLG0uaW52b2tlKGwpKTooUCE9PWkmJlAuaW52b2tlKFwiZGVzdHJveVwiKSxtLmluaXRpYWxpemUoKSl9KSxvIT09aT9vOnRoaXN9LGUuZm4uZW1iZWQuc2V0dGluZ3M9e25hbWU6XCJFbWJlZFwiLG5hbWVzcGFjZTpcImVtYmVkXCIsZGVidWc6ITEsdmVyYm9zZTohMSxwZXJmb3JtYW5jZTohMCxpY29uOiExLHNvdXJjZTohMSx1cmw6ITEsaWQ6ITEsYXV0b3BsYXk6XCJhdXRvXCIsY29sb3I6XCIjNDQ0NDQ0XCIsaGQ6ITAsYnJhbmRlZFVJOiExLHBhcmFtZXRlcnM6ITEsb25EaXNwbGF5OmZ1bmN0aW9uKCl7fSxvblBsYWNlaG9sZGVyRGlzcGxheTpmdW5jdGlvbigpe30sb25SZXNldDpmdW5jdGlvbigpe30sb25DcmVhdGU6ZnVuY3Rpb24oZSl7fSxvbkVtYmVkOmZ1bmN0aW9uKGUpe3JldHVybiBlfSxtZXRhZGF0YTp7aWQ6XCJpZFwiLGljb246XCJpY29uXCIscGxhY2Vob2xkZXI6XCJwbGFjZWhvbGRlclwiLHNvdXJjZTpcInNvdXJjZVwiLHVybDpcInVybFwifSxlcnJvcjp7bm9VUkw6XCJObyBVUkwgc3BlY2lmaWVkXCIsbWV0aG9kOlwiVGhlIG1ldGhvZCB5b3UgY2FsbGVkIGlzIG5vdCBkZWZpbmVkXCJ9LGNsYXNzTmFtZTp7YWN0aXZlOlwiYWN0aXZlXCIsZW1iZWQ6XCJlbWJlZFwifSxzZWxlY3Rvcjp7ZW1iZWQ6XCIuZW1iZWRcIixwbGFjZWhvbGRlcjpcIi5wbGFjZWhvbGRlclwiLGljb246XCIuaWNvblwifSxzb3VyY2VzOnt5b3V0dWJlOntuYW1lOlwieW91dHViZVwiLHR5cGU6XCJ2aWRlb1wiLGljb246XCJ2aWRlbyBwbGF5XCIsZG9tYWluOlwieW91dHViZS5jb21cIix1cmw6XCIvL3d3dy55b3V0dWJlLmNvbS9lbWJlZC97aWR9XCIscGFyYW1ldGVyczpmdW5jdGlvbihlKXtyZXR1cm57YXV0b2hpZGU6IWUuYnJhbmRlZFVJLGF1dG9wbGF5OmUuYXV0b3BsYXksY29sb3I6ZS5jb2xvcnN8fGksaHE6ZS5oZCxqc2FwaTplLmFwaSxtb2Rlc3RicmFuZGluZzohZS5icmFuZGVkVUl9fX0sdmltZW86e25hbWU6XCJ2aW1lb1wiLHR5cGU6XCJ2aWRlb1wiLGljb246XCJ2aWRlbyBwbGF5XCIsZG9tYWluOlwidmltZW8uY29tXCIsdXJsOlwiLy9wbGF5ZXIudmltZW8uY29tL3ZpZGVvL3tpZH1cIixwYXJhbWV0ZXJzOmZ1bmN0aW9uKGUpe3JldHVybnthcGk6ZS5hcGksYXV0b3BsYXk6ZS5hdXRvcGxheSxieWxpbmU6ZS5icmFuZGVkVUksY29sb3I6ZS5jb2xvcnN8fGkscG9ydHJhaXQ6ZS5icmFuZGVkVUksdGl0bGU6ZS5icmFuZGVkVUl9fX19LHRlbXBsYXRlczp7aWZyYW1lOmZ1bmN0aW9uKGUsdCl7cmV0dXJuJzxpZnJhbWUgc3JjPVwiJytlK1wiP1wiK3QrJ1wiIHdpZHRoPVwiMTAwJVwiIGhlaWdodD1cIjEwMCVcIiBmcmFtZWJvcmRlcj1cIjBcIiBzY3JvbGxpbmc9XCJub1wiIHdlYmtpdEFsbG93RnVsbFNjcmVlbiBtb3phbGxvd2Z1bGxzY3JlZW4gYWxsb3dGdWxsU2NyZWVuPjwvaWZyYW1lPid9LHBsYWNlaG9sZGVyOmZ1bmN0aW9uKGUsdCl7dmFyIG49XCJcIjtyZXR1cm4gdCYmKG4rPSc8aSBjbGFzcz1cIicrdCsnIGljb25cIj48L2k+JyksZSYmKG4rPSc8aW1nIGNsYXNzPVwicGxhY2Vob2xkZXJcIiBzcmM9XCInK2UrJ1wiPicpLG59fSxhcGk6ITAsb25QYXVzZTpmdW5jdGlvbigpe30sb25QbGF5OmZ1bmN0aW9uKCl7fSxvblN0b3A6ZnVuY3Rpb24oKXt9fX0oalF1ZXJ5LHdpbmRvdyxkb2N1bWVudCksZnVuY3Rpb24oZSx0LG4saSl7XCJ1c2Ugc3RyaWN0XCI7ZS5mbi5tb2RhbD1mdW5jdGlvbihvKXt2YXIgYSxyPWUodGhpcykscz1lKHQpLGM9ZShuKSxsPWUoXCJib2R5XCIpLHU9ci5zZWxlY3Rvcnx8XCJcIixkPShuZXcgRGF0ZSkuZ2V0VGltZSgpLG09W10sZj1hcmd1bWVudHNbMF0sZz1cInN0cmluZ1wiPT10eXBlb2YgZixwPVtdLnNsaWNlLmNhbGwoYXJndW1lbnRzLDEpLHY9dC5yZXF1ZXN0QW5pbWF0aW9uRnJhbWV8fHQubW96UmVxdWVzdEFuaW1hdGlvbkZyYW1lfHx0LndlYmtpdFJlcXVlc3RBbmltYXRpb25GcmFtZXx8dC5tc1JlcXVlc3RBbmltYXRpb25GcmFtZXx8ZnVuY3Rpb24oZSl7c2V0VGltZW91dChlLDApfTtyZXR1cm4gci5lYWNoKGZ1bmN0aW9uKCl7dmFyIHIsaCxiLHkseCxDLHcsayxTLFQ9ZS5pc1BsYWluT2JqZWN0KG8pP2UuZXh0ZW5kKCEwLHt9LGUuZm4ubW9kYWwuc2V0dGluZ3Msbyk6ZS5leHRlbmQoe30sZS5mbi5tb2RhbC5zZXR0aW5ncyksQT1ULnNlbGVjdG9yLFI9VC5jbGFzc05hbWUsUD1ULm5hbWVzcGFjZSxFPVQuZXJyb3IsRj1cIi5cIitQLEQ9XCJtb2R1bGUtXCIrUCxPPWUodGhpcykscT1lKFQuY29udGV4dCksaj1PLmZpbmQoQS5jbG9zZSksej10aGlzLEk9Ty5kYXRhKEQpO1M9e2luaXRpYWxpemU6ZnVuY3Rpb24oKXtTLnZlcmJvc2UoXCJJbml0aWFsaXppbmcgZGltbWVyXCIscSksUy5jcmVhdGUuaWQoKSxTLmNyZWF0ZS5kaW1tZXIoKSxTLnJlZnJlc2hNb2RhbHMoKSxTLmJpbmQuZXZlbnRzKCksVC5vYnNlcnZlQ2hhbmdlcyYmUy5vYnNlcnZlQ2hhbmdlcygpLFMuaW5zdGFudGlhdGUoKX0saW5zdGFudGlhdGU6ZnVuY3Rpb24oKXtTLnZlcmJvc2UoXCJTdG9yaW5nIGluc3RhbmNlIG9mIG1vZGFsXCIpLEk9UyxPLmRhdGEoRCxJKX0sY3JlYXRlOntkaW1tZXI6ZnVuY3Rpb24oKXt2YXIgdD17ZGVidWc6VC5kZWJ1ZyxkaW1tZXJOYW1lOlwibW9kYWxzXCIsZHVyYXRpb246e3Nob3c6VC5kdXJhdGlvbixoaWRlOlQuZHVyYXRpb259fSxuPWUuZXh0ZW5kKCEwLHQsVC5kaW1tZXJTZXR0aW5ncyk7cmV0dXJuIFQuaW52ZXJ0ZWQmJihuLnZhcmlhdGlvbj1uLnZhcmlhdGlvbiE9PWk/bi52YXJpYXRpb24rXCIgaW52ZXJ0ZWRcIjpcImludmVydGVkXCIpLGUuZm4uZGltbWVyPT09aT92b2lkIFMuZXJyb3IoRS5kaW1tZXIpOihTLmRlYnVnKFwiQ3JlYXRpbmcgZGltbWVyIHdpdGggc2V0dGluZ3NcIixuKSx5PXEuZGltbWVyKG4pLFQuZGV0YWNoYWJsZT8oUy52ZXJib3NlKFwiTW9kYWwgaXMgZGV0YWNoYWJsZSwgbW92aW5nIGNvbnRlbnQgaW50byBkaW1tZXJcIikseS5kaW1tZXIoXCJhZGQgY29udGVudFwiLE8pKTpTLnNldC51bmRldGFjaGVkKCksVC5ibHVycmluZyYmeS5hZGRDbGFzcyhSLmJsdXJyaW5nKSx2b2lkKHg9eS5kaW1tZXIoXCJnZXQgZGltbWVyXCIpKSl9LGlkOmZ1bmN0aW9uKCl7dz0oTWF0aC5yYW5kb20oKS50b1N0cmluZygxNikrXCIwMDAwMDAwMDBcIikuc3Vic3RyKDIsOCksQz1cIi5cIit3LFMudmVyYm9zZShcIkNyZWF0aW5nIHVuaXF1ZSBpZCBmb3IgZWxlbWVudFwiLHcpfX0sZGVzdHJveTpmdW5jdGlvbigpe1MudmVyYm9zZShcIkRlc3Ryb3lpbmcgcHJldmlvdXMgbW9kYWxcIiksTy5yZW1vdmVEYXRhKEQpLm9mZihGKSxzLm9mZihDKSxqLm9mZihGKSxxLmRpbW1lcihcImRlc3Ryb3lcIil9LG9ic2VydmVDaGFuZ2VzOmZ1bmN0aW9uKCl7XCJNdXRhdGlvbk9ic2VydmVyXCJpbiB0JiYoaz1uZXcgTXV0YXRpb25PYnNlcnZlcihmdW5jdGlvbihlKXtTLmRlYnVnKFwiRE9NIHRyZWUgbW9kaWZpZWQsIHJlZnJlc2hpbmdcIiksUy5yZWZyZXNoKCl9KSxrLm9ic2VydmUoeix7Y2hpbGRMaXN0OiEwLHN1YnRyZWU6ITB9KSxTLmRlYnVnKFwiU2V0dGluZyB1cCBtdXRhdGlvbiBvYnNlcnZlclwiLGspKX0scmVmcmVzaDpmdW5jdGlvbigpe1MucmVtb3ZlLnNjcm9sbGluZygpLFMuY2FjaGVTaXplcygpLFMuc2V0LnNjcmVlbkhlaWdodCgpLFMuc2V0LnR5cGUoKSxTLnNldC5wb3NpdGlvbigpfSxyZWZyZXNoTW9kYWxzOmZ1bmN0aW9uKCl7aD1PLnNpYmxpbmdzKEEubW9kYWwpLHI9aC5hZGQoTyl9LGF0dGFjaEV2ZW50czpmdW5jdGlvbih0LG4pe3ZhciBpPWUodCk7bj1lLmlzRnVuY3Rpb24oU1tuXSk/U1tuXTpTLnRvZ2dsZSxpLmxlbmd0aD4wPyhTLmRlYnVnKFwiQXR0YWNoaW5nIG1vZGFsIGV2ZW50cyB0byBlbGVtZW50XCIsdCxuKSxpLm9mZihGKS5vbihcImNsaWNrXCIrRixuKSk6Uy5lcnJvcihFLm5vdEZvdW5kLHQpfSxiaW5kOntldmVudHM6ZnVuY3Rpb24oKXtTLnZlcmJvc2UoXCJBdHRhY2hpbmcgZXZlbnRzXCIpLE8ub24oXCJjbGlja1wiK0YsQS5jbG9zZSxTLmV2ZW50LmNsb3NlKS5vbihcImNsaWNrXCIrRixBLmFwcHJvdmUsUy5ldmVudC5hcHByb3ZlKS5vbihcImNsaWNrXCIrRixBLmRlbnksUy5ldmVudC5kZW55KSxzLm9uKFwicmVzaXplXCIrQyxTLmV2ZW50LnJlc2l6ZSl9fSxnZXQ6e2lkOmZ1bmN0aW9uKCl7cmV0dXJuKE1hdGgucmFuZG9tKCkudG9TdHJpbmcoMTYpK1wiMDAwMDAwMDAwXCIpLnN1YnN0cigyLDgpfX0sZXZlbnQ6e2FwcHJvdmU6ZnVuY3Rpb24oKXtyZXR1cm4gVC5vbkFwcHJvdmUuY2FsbCh6LGUodGhpcykpPT09ITE/dm9pZCBTLnZlcmJvc2UoXCJBcHByb3ZlIGNhbGxiYWNrIHJldHVybmVkIGZhbHNlIGNhbmNlbGxpbmcgaGlkZVwiKTp2b2lkIFMuaGlkZSgpfSxkZW55OmZ1bmN0aW9uKCl7cmV0dXJuIFQub25EZW55LmNhbGwoeixlKHRoaXMpKT09PSExP3ZvaWQgUy52ZXJib3NlKFwiRGVueSBjYWxsYmFjayByZXR1cm5lZCBmYWxzZSBjYW5jZWxsaW5nIGhpZGVcIik6dm9pZCBTLmhpZGUoKX0sY2xvc2U6ZnVuY3Rpb24oKXtTLmhpZGUoKX0sY2xpY2s6ZnVuY3Rpb24odCl7dmFyIGk9ZSh0LnRhcmdldCksbz1pLmNsb3Nlc3QoQS5tb2RhbCkubGVuZ3RoPjAsYT1lLmNvbnRhaW5zKG4uZG9jdW1lbnRFbGVtZW50LHQudGFyZ2V0KTshbyYmYSYmKFMuZGVidWcoXCJEaW1tZXIgY2xpY2tlZCwgaGlkaW5nIGFsbCBtb2RhbHNcIiksUy5pcy5hY3RpdmUoKSYmKFMucmVtb3ZlLmNsaWNrYXdheSgpLFQuYWxsb3dNdWx0aXBsZT9TLmhpZGUoKTpTLmhpZGVBbGwoKSkpfSxkZWJvdW5jZTpmdW5jdGlvbihlLHQpe2NsZWFyVGltZW91dChTLnRpbWVyKSxTLnRpbWVyPXNldFRpbWVvdXQoZSx0KX0sa2V5Ym9hcmQ6ZnVuY3Rpb24oZSl7dmFyIHQ9ZS53aGljaCxuPTI3O3Q9PW4mJihULmNsb3NhYmxlPyhTLmRlYnVnKFwiRXNjYXBlIGtleSBwcmVzc2VkIGhpZGluZyBtb2RhbFwiKSxTLmhpZGUoKSk6Uy5kZWJ1ZyhcIkVzY2FwZSBrZXkgcHJlc3NlZCwgYnV0IGNsb3NhYmxlIGlzIHNldCB0byBmYWxzZVwiKSxlLnByZXZlbnREZWZhdWx0KCkpfSxyZXNpemU6ZnVuY3Rpb24oKXt5LmRpbW1lcihcImlzIGFjdGl2ZVwiKSYmdihTLnJlZnJlc2gpfX0sdG9nZ2xlOmZ1bmN0aW9uKCl7Uy5pcy5hY3RpdmUoKXx8Uy5pcy5hbmltYXRpbmcoKT9TLmhpZGUoKTpTLnNob3coKX0sc2hvdzpmdW5jdGlvbih0KXt0PWUuaXNGdW5jdGlvbih0KT90OmZ1bmN0aW9uKCl7fSxTLnJlZnJlc2hNb2RhbHMoKSxTLnNob3dNb2RhbCh0KX0saGlkZTpmdW5jdGlvbih0KXt0PWUuaXNGdW5jdGlvbih0KT90OmZ1bmN0aW9uKCl7fSxTLnJlZnJlc2hNb2RhbHMoKSxTLmhpZGVNb2RhbCh0KX0sc2hvd01vZGFsOmZ1bmN0aW9uKHQpe3Q9ZS5pc0Z1bmN0aW9uKHQpP3Q6ZnVuY3Rpb24oKXt9LFMuaXMuYW5pbWF0aW5nKCl8fCFTLmlzLmFjdGl2ZSgpPyhTLnNob3dEaW1tZXIoKSxTLmNhY2hlU2l6ZXMoKSxTLnNldC5wb3NpdGlvbigpLFMuc2V0LnNjcmVlbkhlaWdodCgpLFMuc2V0LnR5cGUoKSxTLnNldC5jbGlja2F3YXkoKSwhVC5hbGxvd011bHRpcGxlJiZTLm90aGVycy5hY3RpdmUoKT9TLmhpZGVPdGhlcnMoUy5zaG93TW9kYWwpOihULm9uU2hvdy5jYWxsKHopLFQudHJhbnNpdGlvbiYmZS5mbi50cmFuc2l0aW9uIT09aSYmTy50cmFuc2l0aW9uKFwiaXMgc3VwcG9ydGVkXCIpPyhTLmRlYnVnKFwiU2hvd2luZyBtb2RhbCB3aXRoIGNzcyBhbmltYXRpb25zXCIpLE8udHJhbnNpdGlvbih7ZGVidWc6VC5kZWJ1ZyxhbmltYXRpb246VC50cmFuc2l0aW9uK1wiIGluXCIscXVldWU6VC5xdWV1ZSxkdXJhdGlvbjpULmR1cmF0aW9uLHVzZUZhaWxTYWZlOiEwLG9uQ29tcGxldGU6ZnVuY3Rpb24oKXtULm9uVmlzaWJsZS5hcHBseSh6KSxTLmFkZC5rZXlib2FyZFNob3J0Y3V0cygpLFMuc2F2ZS5mb2N1cygpLFMuc2V0LmFjdGl2ZSgpLFQuYXV0b2ZvY3VzJiZTLnNldC5hdXRvZm9jdXMoKSx0KCl9fSkpOlMuZXJyb3IoRS5ub1RyYW5zaXRpb24pKSk6Uy5kZWJ1ZyhcIk1vZGFsIGlzIGFscmVhZHkgdmlzaWJsZVwiKX0saGlkZU1vZGFsOmZ1bmN0aW9uKHQsbil7dD1lLmlzRnVuY3Rpb24odCk/dDpmdW5jdGlvbigpe30sUy5kZWJ1ZyhcIkhpZGluZyBtb2RhbFwiKSxULm9uSGlkZS5jYWxsKHopLChTLmlzLmFuaW1hdGluZygpfHxTLmlzLmFjdGl2ZSgpKSYmKFQudHJhbnNpdGlvbiYmZS5mbi50cmFuc2l0aW9uIT09aSYmTy50cmFuc2l0aW9uKFwiaXMgc3VwcG9ydGVkXCIpPyhTLnJlbW92ZS5hY3RpdmUoKSxPLnRyYW5zaXRpb24oe2RlYnVnOlQuZGVidWcsYW5pbWF0aW9uOlQudHJhbnNpdGlvbitcIiBvdXRcIixxdWV1ZTpULnF1ZXVlLGR1cmF0aW9uOlQuZHVyYXRpb24sdXNlRmFpbFNhZmU6ITAsb25TdGFydDpmdW5jdGlvbigpe1Mub3RoZXJzLmFjdGl2ZSgpfHxufHxTLmhpZGVEaW1tZXIoKSxTLnJlbW92ZS5rZXlib2FyZFNob3J0Y3V0cygpfSxvbkNvbXBsZXRlOmZ1bmN0aW9uKCl7VC5vbkhpZGRlbi5jYWxsKHopLFMucmVzdG9yZS5mb2N1cygpLHQoKX19KSk6Uy5lcnJvcihFLm5vVHJhbnNpdGlvbikpfSxzaG93RGltbWVyOmZ1bmN0aW9uKCl7eS5kaW1tZXIoXCJpcyBhbmltYXRpbmdcIil8fCF5LmRpbW1lcihcImlzIGFjdGl2ZVwiKT8oUy5kZWJ1ZyhcIlNob3dpbmcgZGltbWVyXCIpLHkuZGltbWVyKFwic2hvd1wiKSk6Uy5kZWJ1ZyhcIkRpbW1lciBhbHJlYWR5IHZpc2libGVcIil9LGhpZGVEaW1tZXI6ZnVuY3Rpb24oKXtyZXR1cm4geS5kaW1tZXIoXCJpcyBhbmltYXRpbmdcIil8fHkuZGltbWVyKFwiaXMgYWN0aXZlXCIpP3ZvaWQgeS5kaW1tZXIoXCJoaWRlXCIsZnVuY3Rpb24oKXtTLnJlbW92ZS5jbGlja2F3YXkoKSxTLnJlbW92ZS5zY3JlZW5IZWlnaHQoKX0pOnZvaWQgUy5kZWJ1ZyhcIkRpbW1lciBpcyBub3QgdmlzaWJsZSBjYW5ub3QgaGlkZVwiKX0saGlkZUFsbDpmdW5jdGlvbih0KXt2YXIgbj1yLmZpbHRlcihcIi5cIitSLmFjdGl2ZStcIiwgLlwiK1IuYW5pbWF0aW5nKTt0PWUuaXNGdW5jdGlvbih0KT90OmZ1bmN0aW9uKCl7fSxuLmxlbmd0aD4wJiYoUy5kZWJ1ZyhcIkhpZGluZyBhbGwgdmlzaWJsZSBtb2RhbHNcIiksUy5oaWRlRGltbWVyKCksbi5tb2RhbChcImhpZGUgbW9kYWxcIix0KSl9LGhpZGVPdGhlcnM6ZnVuY3Rpb24odCl7dmFyIG49aC5maWx0ZXIoXCIuXCIrUi5hY3RpdmUrXCIsIC5cIitSLmFuaW1hdGluZyk7dD1lLmlzRnVuY3Rpb24odCk/dDpmdW5jdGlvbigpe30sbi5sZW5ndGg+MCYmKFMuZGVidWcoXCJIaWRpbmcgb3RoZXIgbW9kYWxzXCIsaCksbi5tb2RhbChcImhpZGUgbW9kYWxcIix0LCEwKSl9LG90aGVyczp7YWN0aXZlOmZ1bmN0aW9uKCl7cmV0dXJuIGguZmlsdGVyKFwiLlwiK1IuYWN0aXZlKS5sZW5ndGg+MH0sYW5pbWF0aW5nOmZ1bmN0aW9uKCl7cmV0dXJuIGguZmlsdGVyKFwiLlwiK1IuYW5pbWF0aW5nKS5sZW5ndGg+MH19LGFkZDp7a2V5Ym9hcmRTaG9ydGN1dHM6ZnVuY3Rpb24oKXtTLnZlcmJvc2UoXCJBZGRpbmcga2V5Ym9hcmQgc2hvcnRjdXRzXCIpLGMub24oXCJrZXl1cFwiK0YsUy5ldmVudC5rZXlib2FyZCl9fSxzYXZlOntmb2N1czpmdW5jdGlvbigpe2I9ZShuLmFjdGl2ZUVsZW1lbnQpLmJsdXIoKX19LHJlc3RvcmU6e2ZvY3VzOmZ1bmN0aW9uKCl7YiYmYi5sZW5ndGg+MCYmYi5mb2N1cygpfX0scmVtb3ZlOnthY3RpdmU6ZnVuY3Rpb24oKXtPLnJlbW92ZUNsYXNzKFIuYWN0aXZlKX0sY2xpY2thd2F5OmZ1bmN0aW9uKCl7VC5jbG9zYWJsZSYmeC5vZmYoXCJjbGlja1wiK0MpfSxib2R5U3R5bGU6ZnVuY3Rpb24oKXtcIlwiPT09bC5hdHRyKFwic3R5bGVcIikmJihTLnZlcmJvc2UoXCJSZW1vdmluZyBzdHlsZSBhdHRyaWJ1dGVcIiksbC5yZW1vdmVBdHRyKFwic3R5bGVcIikpfSxzY3JlZW5IZWlnaHQ6ZnVuY3Rpb24oKXtTLmRlYnVnKFwiUmVtb3ZpbmcgcGFnZSBoZWlnaHRcIiksbC5jc3MoXCJoZWlnaHRcIixcIlwiKX0sa2V5Ym9hcmRTaG9ydGN1dHM6ZnVuY3Rpb24oKXtTLnZlcmJvc2UoXCJSZW1vdmluZyBrZXlib2FyZCBzaG9ydGN1dHNcIiksYy5vZmYoXCJrZXl1cFwiK0YpfSxzY3JvbGxpbmc6ZnVuY3Rpb24oKXt5LnJlbW92ZUNsYXNzKFIuc2Nyb2xsaW5nKSxPLnJlbW92ZUNsYXNzKFIuc2Nyb2xsaW5nKX19LGNhY2hlU2l6ZXM6ZnVuY3Rpb24oKXt2YXIgbz1PLm91dGVySGVpZ2h0KCk7KFMuY2FjaGU9PT1pfHwwIT09bykmJihTLmNhY2hlPXtwYWdlSGVpZ2h0OmUobikub3V0ZXJIZWlnaHQoKSxoZWlnaHQ6bytULm9mZnNldCxjb250ZXh0SGVpZ2h0OlwiYm9keVwiPT1ULmNvbnRleHQ/ZSh0KS5oZWlnaHQoKTp5LmhlaWdodCgpfSksUy5kZWJ1ZyhcIkNhY2hpbmcgbW9kYWwgYW5kIGNvbnRhaW5lciBzaXplc1wiLFMuY2FjaGUpfSxjYW46e2ZpdDpmdW5jdGlvbigpe3JldHVybiBTLmNhY2hlLmhlaWdodCsyKlQucGFkZGluZzxTLmNhY2hlLmNvbnRleHRIZWlnaHR9fSxpczp7YWN0aXZlOmZ1bmN0aW9uKCl7cmV0dXJuIE8uaGFzQ2xhc3MoUi5hY3RpdmUpfSxhbmltYXRpbmc6ZnVuY3Rpb24oKXtyZXR1cm4gTy50cmFuc2l0aW9uKFwiaXMgc3VwcG9ydGVkXCIpP08udHJhbnNpdGlvbihcImlzIGFuaW1hdGluZ1wiKTpPLmlzKFwiOnZpc2libGVcIil9LHNjcm9sbGluZzpmdW5jdGlvbigpe3JldHVybiB5Lmhhc0NsYXNzKFIuc2Nyb2xsaW5nKX0sbW9kZXJuQnJvd3NlcjpmdW5jdGlvbigpe3JldHVybiEodC5BY3RpdmVYT2JqZWN0fHxcIkFjdGl2ZVhPYmplY3RcImluIHQpfX0sc2V0OnthdXRvZm9jdXM6ZnVuY3Rpb24oKXt2YXIgZT1PLmZpbmQoXCI6aW5wdXRcIikuZmlsdGVyKFwiOnZpc2libGVcIiksdD1lLmZpbHRlcihcIlthdXRvZm9jdXNdXCIpLG49dC5sZW5ndGg+MD90LmZpcnN0KCk6ZS5maXJzdCgpO24ubGVuZ3RoPjAmJm4uZm9jdXMoKX0sY2xpY2thd2F5OmZ1bmN0aW9uKCl7VC5jbG9zYWJsZSYmeC5vbihcImNsaWNrXCIrQyxTLmV2ZW50LmNsaWNrKX0sc2NyZWVuSGVpZ2h0OmZ1bmN0aW9uKCl7Uy5jYW4uZml0KCk/bC5jc3MoXCJoZWlnaHRcIixcIlwiKTooUy5kZWJ1ZyhcIk1vZGFsIGlzIHRhbGxlciB0aGFuIHBhZ2UgY29udGVudCwgcmVzaXppbmcgcGFnZSBoZWlnaHRcIiksbC5jc3MoXCJoZWlnaHRcIixTLmNhY2hlLmhlaWdodCsyKlQucGFkZGluZykpfSxhY3RpdmU6ZnVuY3Rpb24oKXtPLmFkZENsYXNzKFIuYWN0aXZlKX0sc2Nyb2xsaW5nOmZ1bmN0aW9uKCl7eS5hZGRDbGFzcyhSLnNjcm9sbGluZyksTy5hZGRDbGFzcyhSLnNjcm9sbGluZyl9LHR5cGU6ZnVuY3Rpb24oKXtTLmNhbi5maXQoKT8oUy52ZXJib3NlKFwiTW9kYWwgZml0cyBvbiBzY3JlZW5cIiksUy5vdGhlcnMuYWN0aXZlKCl8fFMub3RoZXJzLmFuaW1hdGluZygpfHxTLnJlbW92ZS5zY3JvbGxpbmcoKSk6KFMudmVyYm9zZShcIk1vZGFsIGNhbm5vdCBmaXQgb24gc2NyZWVuIHNldHRpbmcgdG8gc2Nyb2xsaW5nXCIpLFMuc2V0LnNjcm9sbGluZygpKX0scG9zaXRpb246ZnVuY3Rpb24oKXtTLnZlcmJvc2UoXCJDZW50ZXJpbmcgbW9kYWwgb24gcGFnZVwiLFMuY2FjaGUpLE8uY3NzKFMuY2FuLmZpdCgpP3t0b3A6XCJcIixtYXJnaW5Ub3A6LShTLmNhY2hlLmhlaWdodC8yKX06e21hcmdpblRvcDpcIlwiLHRvcDpjLnNjcm9sbFRvcCgpfSl9LHVuZGV0YWNoZWQ6ZnVuY3Rpb24oKXt5LmFkZENsYXNzKFIudW5kZXRhY2hlZCl9fSxzZXR0aW5nOmZ1bmN0aW9uKHQsbil7aWYoUy5kZWJ1ZyhcIkNoYW5naW5nIHNldHRpbmdcIix0LG4pLGUuaXNQbGFpbk9iamVjdCh0KSllLmV4dGVuZCghMCxULHQpO2Vsc2V7aWYobj09PWkpcmV0dXJuIFRbdF07VFt0XT1ufX0saW50ZXJuYWw6ZnVuY3Rpb24odCxuKXtpZihlLmlzUGxhaW5PYmplY3QodCkpZS5leHRlbmQoITAsUyx0KTtlbHNle2lmKG49PT1pKXJldHVybiBTW3RdO1NbdF09bn19LGRlYnVnOmZ1bmN0aW9uKCl7VC5kZWJ1ZyYmKFQucGVyZm9ybWFuY2U/Uy5wZXJmb3JtYW5jZS5sb2coYXJndW1lbnRzKTooUy5kZWJ1Zz1GdW5jdGlvbi5wcm90b3R5cGUuYmluZC5jYWxsKGNvbnNvbGUuaW5mbyxjb25zb2xlLFQubmFtZStcIjpcIiksUy5kZWJ1Zy5hcHBseShjb25zb2xlLGFyZ3VtZW50cykpKX0sdmVyYm9zZTpmdW5jdGlvbigpe1QudmVyYm9zZSYmVC5kZWJ1ZyYmKFQucGVyZm9ybWFuY2U/Uy5wZXJmb3JtYW5jZS5sb2coYXJndW1lbnRzKTooUy52ZXJib3NlPUZ1bmN0aW9uLnByb3RvdHlwZS5iaW5kLmNhbGwoY29uc29sZS5pbmZvLGNvbnNvbGUsVC5uYW1lK1wiOlwiKSxTLnZlcmJvc2UuYXBwbHkoY29uc29sZSxhcmd1bWVudHMpKSl9LGVycm9yOmZ1bmN0aW9uKCl7Uy5lcnJvcj1GdW5jdGlvbi5wcm90b3R5cGUuYmluZC5jYWxsKGNvbnNvbGUuZXJyb3IsY29uc29sZSxULm5hbWUrXCI6XCIpLFMuZXJyb3IuYXBwbHkoY29uc29sZSxhcmd1bWVudHMpfSxwZXJmb3JtYW5jZTp7bG9nOmZ1bmN0aW9uKGUpe3ZhciB0LG4saTtULnBlcmZvcm1hbmNlJiYodD0obmV3IERhdGUpLmdldFRpbWUoKSxpPWR8fHQsbj10LWksZD10LG0ucHVzaCh7TmFtZTplWzBdLEFyZ3VtZW50czpbXS5zbGljZS5jYWxsKGUsMSl8fFwiXCIsRWxlbWVudDp6LFwiRXhlY3V0aW9uIFRpbWVcIjpufSkpLGNsZWFyVGltZW91dChTLnBlcmZvcm1hbmNlLnRpbWVyKSxTLnBlcmZvcm1hbmNlLnRpbWVyPXNldFRpbWVvdXQoUy5wZXJmb3JtYW5jZS5kaXNwbGF5LDUwMCl9LGRpc3BsYXk6ZnVuY3Rpb24oKXt2YXIgdD1ULm5hbWUrXCI6XCIsbj0wO2Q9ITEsY2xlYXJUaW1lb3V0KFMucGVyZm9ybWFuY2UudGltZXIpLGUuZWFjaChtLGZ1bmN0aW9uKGUsdCl7bis9dFtcIkV4ZWN1dGlvbiBUaW1lXCJdfSksdCs9XCIgXCIrbitcIm1zXCIsdSYmKHQrPVwiICdcIit1K1wiJ1wiKSwoY29uc29sZS5ncm91cCE9PWl8fGNvbnNvbGUudGFibGUhPT1pKSYmbS5sZW5ndGg+MCYmKGNvbnNvbGUuZ3JvdXBDb2xsYXBzZWQodCksY29uc29sZS50YWJsZT9jb25zb2xlLnRhYmxlKG0pOmUuZWFjaChtLGZ1bmN0aW9uKGUsdCl7Y29uc29sZS5sb2codC5OYW1lK1wiOiBcIit0W1wiRXhlY3V0aW9uIFRpbWVcIl0rXCJtc1wiKX0pLGNvbnNvbGUuZ3JvdXBFbmQoKSksbT1bXX19LGludm9rZTpmdW5jdGlvbih0LG4sbyl7dmFyIHIscyxjLGw9STtyZXR1cm4gbj1ufHxwLG89enx8byxcInN0cmluZ1wiPT10eXBlb2YgdCYmbCE9PWkmJih0PXQuc3BsaXQoL1tcXC4gXS8pLHI9dC5sZW5ndGgtMSxlLmVhY2godCxmdW5jdGlvbihuLG8pe3ZhciBhPW4hPXI/byt0W24rMV0uY2hhckF0KDApLnRvVXBwZXJDYXNlKCkrdFtuKzFdLnNsaWNlKDEpOnQ7aWYoZS5pc1BsYWluT2JqZWN0KGxbYV0pJiZuIT1yKWw9bFthXTtlbHNle2lmKGxbYV0hPT1pKXJldHVybiBzPWxbYV0sITE7aWYoIWUuaXNQbGFpbk9iamVjdChsW29dKXx8bj09cilyZXR1cm4gbFtvXSE9PWk/KHM9bFtvXSwhMSk6ITE7bD1sW29dfX0pKSxlLmlzRnVuY3Rpb24ocyk/Yz1zLmFwcGx5KG8sbik6cyE9PWkmJihjPXMpLGUuaXNBcnJheShhKT9hLnB1c2goYyk6YSE9PWk/YT1bYSxjXTpjIT09aSYmKGE9Yyksc319LGc/KEk9PT1pJiZTLmluaXRpYWxpemUoKSxTLmludm9rZShmKSk6KEkhPT1pJiZJLmludm9rZShcImRlc3Ryb3lcIiksUy5pbml0aWFsaXplKCkpfSksYSE9PWk/YTp0aGlzfSxlLmZuLm1vZGFsLnNldHRpbmdzPXtuYW1lOlwiTW9kYWxcIixuYW1lc3BhY2U6XCJtb2RhbFwiLGRlYnVnOiExLHZlcmJvc2U6ITEscGVyZm9ybWFuY2U6ITAsb2JzZXJ2ZUNoYW5nZXM6ITEsYWxsb3dNdWx0aXBsZTohMSxkZXRhY2hhYmxlOiEwLGNsb3NhYmxlOiEwLGF1dG9mb2N1czohMCxpbnZlcnRlZDohMSxibHVycmluZzohMSxkaW1tZXJTZXR0aW5nczp7Y2xvc2FibGU6ITEsdXNlQ1NTOiEwfSxjb250ZXh0OlwiYm9keVwiLHF1ZXVlOiExLGR1cmF0aW9uOjUwMCxvZmZzZXQ6MCx0cmFuc2l0aW9uOlwic2NhbGVcIixwYWRkaW5nOjUwLG9uU2hvdzpmdW5jdGlvbigpe30sb25WaXNpYmxlOmZ1bmN0aW9uKCl7fSxvbkhpZGU6ZnVuY3Rpb24oKXt9LG9uSGlkZGVuOmZ1bmN0aW9uKCl7fSxvbkFwcHJvdmU6ZnVuY3Rpb24oKXtyZXR1cm4hMH0sb25EZW55OmZ1bmN0aW9uKCl7cmV0dXJuITB9LHNlbGVjdG9yOntjbG9zZTpcIj4gLmNsb3NlXCIsYXBwcm92ZTpcIi5hY3Rpb25zIC5wb3NpdGl2ZSwgLmFjdGlvbnMgLmFwcHJvdmUsIC5hY3Rpb25zIC5va1wiLGRlbnk6XCIuYWN0aW9ucyAubmVnYXRpdmUsIC5hY3Rpb25zIC5kZW55LCAuYWN0aW9ucyAuY2FuY2VsXCIsbW9kYWw6XCIudWkubW9kYWxcIn0sZXJyb3I6e2RpbW1lcjpcIlVJIERpbW1lciwgYSByZXF1aXJlZCBjb21wb25lbnQgaXMgbm90IGluY2x1ZGVkIGluIHRoaXMgcGFnZVwiLG1ldGhvZDpcIlRoZSBtZXRob2QgeW91IGNhbGxlZCBpcyBub3QgZGVmaW5lZC5cIixub3RGb3VuZDpcIlRoZSBlbGVtZW50IHlvdSBzcGVjaWZpZWQgY291bGQgbm90IGJlIGZvdW5kXCJ9LGNsYXNzTmFtZTp7YWN0aXZlOlwiYWN0aXZlXCIsYW5pbWF0aW5nOlwiYW5pbWF0aW5nXCIsYmx1cnJpbmc6XCJibHVycmluZ1wiLHNjcm9sbGluZzpcInNjcm9sbGluZ1wiLHVuZGV0YWNoZWQ6XCJ1bmRldGFjaGVkXCJ9fX0oalF1ZXJ5LHdpbmRvdyxkb2N1bWVudCksZnVuY3Rpb24oZSx0LG4saSl7XCJ1c2Ugc3RyaWN0XCI7ZS5mbi5uYWc9ZnVuY3Rpb24obil7dmFyIG8sYT1lKHRoaXMpLHI9YS5zZWxlY3Rvcnx8XCJcIixzPShuZXcgRGF0ZSkuZ2V0VGltZSgpLGM9W10sbD1hcmd1bWVudHNbMF0sdT1cInN0cmluZ1wiPT10eXBlb2YgbCxkPVtdLnNsaWNlLmNhbGwoYXJndW1lbnRzLDEpO3JldHVybiBhLmVhY2goZnVuY3Rpb24oKXt7dmFyIGEsbT1lLmlzUGxhaW5PYmplY3Qobik/ZS5leHRlbmQoITAse30sZS5mbi5uYWcuc2V0dGluZ3Msbik6ZS5leHRlbmQoe30sZS5mbi5uYWcuc2V0dGluZ3MpLGY9KG0uY2xhc3NOYW1lLG0uc2VsZWN0b3IpLGc9bS5lcnJvcixwPW0ubmFtZXNwYWNlLHY9XCIuXCIrcCxoPXArXCItbW9kdWxlXCIsYj1lKHRoaXMpLHk9KGIuZmluZChmLmNsb3NlKSxlKG0uY29udGV4dD9tLmNvbnRleHQ6XCJib2R5XCIpKSx4PXRoaXMsQz1iLmRhdGEoaCk7dC5yZXF1ZXN0QW5pbWF0aW9uRnJhbWV8fHQubW96UmVxdWVzdEFuaW1hdGlvbkZyYW1lfHx0LndlYmtpdFJlcXVlc3RBbmltYXRpb25GcmFtZXx8dC5tc1JlcXVlc3RBbmltYXRpb25GcmFtZXx8ZnVuY3Rpb24oZSl7c2V0VGltZW91dChlLDApfX1hPXtpbml0aWFsaXplOmZ1bmN0aW9uKCl7YS52ZXJib3NlKFwiSW5pdGlhbGl6aW5nIGVsZW1lbnRcIiksYi5vbihcImNsaWNrXCIrdixmLmNsb3NlLGEuZGlzbWlzcykuZGF0YShoLGEpLG0uZGV0YWNoYWJsZSYmYi5wYXJlbnQoKVswXSE9PXlbMF0mJmIuZGV0YWNoKCkucHJlcGVuZFRvKHkpLG0uZGlzcGxheVRpbWU+MCYmc2V0VGltZW91dChhLmhpZGUsbS5kaXNwbGF5VGltZSksYS5zaG93KCl9LGRlc3Ryb3k6ZnVuY3Rpb24oKXthLnZlcmJvc2UoXCJEZXN0cm95aW5nIGluc3RhbmNlXCIpLGIucmVtb3ZlRGF0YShoKS5vZmYodil9LHNob3c6ZnVuY3Rpb24oKXthLnNob3VsZC5zaG93KCkmJiFiLmlzKFwiOnZpc2libGVcIikmJihhLmRlYnVnKFwiU2hvd2luZyBuYWdcIixtLmFuaW1hdGlvbi5zaG93KSxcImZhZGVcIj09bS5hbmltYXRpb24uc2hvdz9iLmZhZGVJbihtLmR1cmF0aW9uLG0uZWFzaW5nKTpiLnNsaWRlRG93bihtLmR1cmF0aW9uLG0uZWFzaW5nKSl9LGhpZGU6ZnVuY3Rpb24oKXthLmRlYnVnKFwiU2hvd2luZyBuYWdcIixtLmFuaW1hdGlvbi5oaWRlKSxcImZhZGVcIj09bS5hbmltYXRpb24uc2hvdz9iLmZhZGVJbihtLmR1cmF0aW9uLG0uZWFzaW5nKTpiLnNsaWRlVXAobS5kdXJhdGlvbixtLmVhc2luZyl9LG9uSGlkZTpmdW5jdGlvbigpe2EuZGVidWcoXCJSZW1vdmluZyBuYWdcIixtLmFuaW1hdGlvbi5oaWRlKSxiLnJlbW92ZSgpLG0ub25IaWRlJiZtLm9uSGlkZSgpfSxkaXNtaXNzOmZ1bmN0aW9uKGUpe20uc3RvcmFnZU1ldGhvZCYmYS5zdG9yYWdlLnNldChtLmtleSxtLnZhbHVlKSxhLmhpZGUoKSxlLnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpLGUucHJldmVudERlZmF1bHQoKX0sc2hvdWxkOntzaG93OmZ1bmN0aW9uKCl7cmV0dXJuIG0ucGVyc2lzdD8oYS5kZWJ1ZyhcIlBlcnNpc3RlbnQgbmFnIGlzIHNldCwgY2FuIHNob3cgbmFnXCIpLCEwKTphLnN0b3JhZ2UuZ2V0KG0ua2V5KSE9bS52YWx1ZS50b1N0cmluZygpPyhhLmRlYnVnKFwiU3RvcmVkIHZhbHVlIGlzIG5vdCBzZXQsIGNhbiBzaG93IG5hZ1wiLGEuc3RvcmFnZS5nZXQobS5rZXkpKSwhMCk6KGEuZGVidWcoXCJTdG9yZWQgdmFsdWUgaXMgc2V0LCBjYW5ub3Qgc2hvdyBuYWdcIixhLnN0b3JhZ2UuZ2V0KG0ua2V5KSksITEpfX0sZ2V0OntzdG9yYWdlT3B0aW9uczpmdW5jdGlvbigpe3ZhciBlPXt9O3JldHVybiBtLmV4cGlyZXMmJihlLmV4cGlyZXM9bS5leHBpcmVzKSxtLmRvbWFpbiYmKGUuZG9tYWluPW0uZG9tYWluKSxtLnBhdGgmJihlLnBhdGg9bS5wYXRoKSxlfX0sY2xlYXI6ZnVuY3Rpb24oKXthLnN0b3JhZ2UucmVtb3ZlKG0ua2V5KX0sc3RvcmFnZTp7c2V0OmZ1bmN0aW9uKG4sbyl7dmFyIHI9YS5nZXQuc3RvcmFnZU9wdGlvbnMoKTtpZihcImxvY2Fsc3RvcmFnZVwiPT1tLnN0b3JhZ2VNZXRob2QmJnQubG9jYWxTdG9yYWdlIT09aSl0LmxvY2FsU3RvcmFnZS5zZXRJdGVtKG4sbyksYS5kZWJ1ZyhcIlZhbHVlIHN0b3JlZCB1c2luZyBsb2NhbCBzdG9yYWdlXCIsbixvKTtlbHNlIGlmKFwic2Vzc2lvbnN0b3JhZ2VcIj09bS5zdG9yYWdlTWV0aG9kJiZ0LnNlc3Npb25TdG9yYWdlIT09aSl0LnNlc3Npb25TdG9yYWdlLnNldEl0ZW0obixvKSxhLmRlYnVnKFwiVmFsdWUgc3RvcmVkIHVzaW5nIHNlc3Npb24gc3RvcmFnZVwiLG4sbyk7ZWxzZXtpZihlLmNvb2tpZT09PWkpcmV0dXJuIHZvaWQgYS5lcnJvcihnLm5vQ29va2llU3RvcmFnZSk7ZS5jb29raWUobixvLHIpLGEuZGVidWcoXCJWYWx1ZSBzdG9yZWQgdXNpbmcgY29va2llXCIsbixvLHIpfX0sZ2V0OmZ1bmN0aW9uKG4sbyl7dmFyIHI7cmV0dXJuXCJsb2NhbHN0b3JhZ2VcIj09bS5zdG9yYWdlTWV0aG9kJiZ0LmxvY2FsU3RvcmFnZSE9PWk/cj10LmxvY2FsU3RvcmFnZS5nZXRJdGVtKG4pOlwic2Vzc2lvbnN0b3JhZ2VcIj09bS5zdG9yYWdlTWV0aG9kJiZ0LnNlc3Npb25TdG9yYWdlIT09aT9yPXQuc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbShuKTplLmNvb2tpZSE9PWk/cj1lLmNvb2tpZShuKTphLmVycm9yKGcubm9Db29raWVTdG9yYWdlKSwoXCJ1bmRlZmluZWRcIj09cnx8XCJudWxsXCI9PXJ8fHI9PT1pfHxudWxsPT09cikmJihyPWkpLHJ9LHJlbW92ZTpmdW5jdGlvbihuKXt2YXIgbz1hLmdldC5zdG9yYWdlT3B0aW9ucygpO1wibG9jYWxzdG9yYWdlXCI9PW0uc3RvcmFnZU1ldGhvZCYmdC5sb2NhbFN0b3JhZ2UhPT1pP3QubG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0obik6XCJzZXNzaW9uc3RvcmFnZVwiPT1tLnN0b3JhZ2VNZXRob2QmJnQuc2Vzc2lvblN0b3JhZ2UhPT1pP3Quc2Vzc2lvblN0b3JhZ2UucmVtb3ZlSXRlbShuKTplLmNvb2tpZSE9PWk/ZS5yZW1vdmVDb29raWUobixvKTphLmVycm9yKGcubm9TdG9yYWdlKX19LHNldHRpbmc6ZnVuY3Rpb24odCxuKXtpZihhLmRlYnVnKFwiQ2hhbmdpbmcgc2V0dGluZ1wiLHQsbiksZS5pc1BsYWluT2JqZWN0KHQpKWUuZXh0ZW5kKCEwLG0sdCk7ZWxzZXtpZihuPT09aSlyZXR1cm4gbVt0XTttW3RdPW59fSxpbnRlcm5hbDpmdW5jdGlvbih0LG4pe2lmKGUuaXNQbGFpbk9iamVjdCh0KSllLmV4dGVuZCghMCxhLHQpO2Vsc2V7aWYobj09PWkpcmV0dXJuIGFbdF07YVt0XT1ufX0sZGVidWc6ZnVuY3Rpb24oKXttLmRlYnVnJiYobS5wZXJmb3JtYW5jZT9hLnBlcmZvcm1hbmNlLmxvZyhhcmd1bWVudHMpOihhLmRlYnVnPUZ1bmN0aW9uLnByb3RvdHlwZS5iaW5kLmNhbGwoY29uc29sZS5pbmZvLGNvbnNvbGUsbS5uYW1lK1wiOlwiKSxhLmRlYnVnLmFwcGx5KGNvbnNvbGUsYXJndW1lbnRzKSkpfSx2ZXJib3NlOmZ1bmN0aW9uKCl7bS52ZXJib3NlJiZtLmRlYnVnJiYobS5wZXJmb3JtYW5jZT9hLnBlcmZvcm1hbmNlLmxvZyhhcmd1bWVudHMpOihhLnZlcmJvc2U9RnVuY3Rpb24ucHJvdG90eXBlLmJpbmQuY2FsbChjb25zb2xlLmluZm8sY29uc29sZSxtLm5hbWUrXCI6XCIpLGEudmVyYm9zZS5hcHBseShjb25zb2xlLGFyZ3VtZW50cykpKX0sZXJyb3I6ZnVuY3Rpb24oKXthLmVycm9yPUZ1bmN0aW9uLnByb3RvdHlwZS5iaW5kLmNhbGwoY29uc29sZS5lcnJvcixjb25zb2xlLG0ubmFtZStcIjpcIiksYS5lcnJvci5hcHBseShjb25zb2xlLGFyZ3VtZW50cyl9LHBlcmZvcm1hbmNlOntsb2c6ZnVuY3Rpb24oZSl7dmFyIHQsbixpO20ucGVyZm9ybWFuY2UmJih0PShuZXcgRGF0ZSkuZ2V0VGltZSgpLGk9c3x8dCxuPXQtaSxzPXQsYy5wdXNoKHtOYW1lOmVbMF0sQXJndW1lbnRzOltdLnNsaWNlLmNhbGwoZSwxKXx8XCJcIixFbGVtZW50OngsXCJFeGVjdXRpb24gVGltZVwiOm59KSksY2xlYXJUaW1lb3V0KGEucGVyZm9ybWFuY2UudGltZXIpLGEucGVyZm9ybWFuY2UudGltZXI9c2V0VGltZW91dChhLnBlcmZvcm1hbmNlLmRpc3BsYXksNTAwKX0sZGlzcGxheTpmdW5jdGlvbigpe3ZhciB0PW0ubmFtZStcIjpcIixuPTA7cz0hMSxjbGVhclRpbWVvdXQoYS5wZXJmb3JtYW5jZS50aW1lciksZS5lYWNoKGMsZnVuY3Rpb24oZSx0KXtuKz10W1wiRXhlY3V0aW9uIFRpbWVcIl19KSx0Kz1cIiBcIituK1wibXNcIixyJiYodCs9XCIgJ1wiK3IrXCInXCIpLChjb25zb2xlLmdyb3VwIT09aXx8Y29uc29sZS50YWJsZSE9PWkpJiZjLmxlbmd0aD4wJiYoY29uc29sZS5ncm91cENvbGxhcHNlZCh0KSxjb25zb2xlLnRhYmxlP2NvbnNvbGUudGFibGUoYyk6ZS5lYWNoKGMsZnVuY3Rpb24oZSx0KXtjb25zb2xlLmxvZyh0Lk5hbWUrXCI6IFwiK3RbXCJFeGVjdXRpb24gVGltZVwiXStcIm1zXCIpfSksY29uc29sZS5ncm91cEVuZCgpKSxjPVtdfX0saW52b2tlOmZ1bmN0aW9uKHQsbixyKXt2YXIgcyxjLGwsdT1DO3JldHVybiBuPW58fGQscj14fHxyLFwic3RyaW5nXCI9PXR5cGVvZiB0JiZ1IT09aSYmKHQ9dC5zcGxpdCgvW1xcLiBdLykscz10Lmxlbmd0aC0xLGUuZWFjaCh0LGZ1bmN0aW9uKG4sbyl7dmFyIHI9biE9cz9vK3RbbisxXS5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSt0W24rMV0uc2xpY2UoMSk6dDtpZihlLmlzUGxhaW5PYmplY3QodVtyXSkmJm4hPXMpdT11W3JdO2Vsc2V7aWYodVtyXSE9PWkpcmV0dXJuIGM9dVtyXSwhMTtpZighZS5pc1BsYWluT2JqZWN0KHVbb10pfHxuPT1zKXJldHVybiB1W29dIT09aT8oYz11W29dLCExKTooYS5lcnJvcihnLm1ldGhvZCx0KSwhMSk7dT11W29dfX0pKSxlLmlzRnVuY3Rpb24oYyk/bD1jLmFwcGx5KHIsbik6YyE9PWkmJihsPWMpLGUuaXNBcnJheShvKT9vLnB1c2gobCk6byE9PWk/bz1bbyxsXTpsIT09aSYmKG89bCksY319LHU/KEM9PT1pJiZhLmluaXRpYWxpemUoKSxhLmludm9rZShsKSk6KEMhPT1pJiZDLmludm9rZShcImRlc3Ryb3lcIiksYS5pbml0aWFsaXplKCkpfSksbyE9PWk/bzp0aGlzfSxlLmZuLm5hZy5zZXR0aW5ncz17bmFtZTpcIk5hZ1wiLGRlYnVnOiExLHZlcmJvc2U6ITEscGVyZm9ybWFuY2U6ITAsbmFtZXNwYWNlOlwiTmFnXCIscGVyc2lzdDohMSxkaXNwbGF5VGltZTowLGFuaW1hdGlvbjp7c2hvdzpcInNsaWRlXCIsaGlkZTpcInNsaWRlXCJ9LGNvbnRleHQ6ITEsZGV0YWNoYWJsZTohMSxleHBpcmVzOjMwLGRvbWFpbjohMSxwYXRoOlwiL1wiLHN0b3JhZ2VNZXRob2Q6XCJjb29raWVcIixrZXk6XCJuYWdcIix2YWx1ZTpcImRpc21pc3NcIixlcnJvcjp7bm9Db29raWVTdG9yYWdlOlwiJC5jb29raWUgaXMgbm90IGluY2x1ZGVkLiBBIHN0b3JhZ2Ugc29sdXRpb24gaXMgcmVxdWlyZWQuXCIsbm9TdG9yYWdlOlwiTmVpdGhlciAkLmNvb2tpZSBvciBzdG9yZSBpcyBkZWZpbmVkLiBBIHN0b3JhZ2Ugc29sdXRpb24gaXMgcmVxdWlyZWQgZm9yIHN0b3Jpbmcgc3RhdGVcIixtZXRob2Q6XCJUaGUgbWV0aG9kIHlvdSBjYWxsZWQgaXMgbm90IGRlZmluZWQuXCJ9LGNsYXNzTmFtZTp7Ym90dG9tOlwiYm90dG9tXCIsZml4ZWQ6XCJmaXhlZFwifSxzZWxlY3Rvcjp7Y2xvc2U6XCIuY2xvc2UuaWNvblwifSxzcGVlZDo1MDAsZWFzaW5nOlwiZWFzZU91dFF1YWRcIixvbkhpZGU6ZnVuY3Rpb24oKXt9fX0oalF1ZXJ5LHdpbmRvdyxkb2N1bWVudCksZnVuY3Rpb24oZSx0LG4saSl7XCJ1c2Ugc3RyaWN0XCI7ZS5mbi5wb3B1cD1mdW5jdGlvbihvKXt2YXIgYSxyPWUodGhpcykscz1lKG4pLGM9ZSh0KSxsPWUoXCJib2R5XCIpLHU9ci5zZWxlY3Rvcnx8XCJcIixkPSEwLG09KG5ldyBEYXRlKS5nZXRUaW1lKCksZj1bXSxnPWFyZ3VtZW50c1swXSxwPVwic3RyaW5nXCI9PXR5cGVvZiBnLHY9W10uc2xpY2UuY2FsbChhcmd1bWVudHMsMSk7cmV0dXJuIHIuZWFjaChmdW5jdGlvbigpe3ZhciBuLHIsaCxiLHkseD1lLmlzUGxhaW5PYmplY3Qobyk/ZS5leHRlbmQoITAse30sZS5mbi5wb3B1cC5zZXR0aW5ncyxvKTplLmV4dGVuZCh7fSxlLmZuLnBvcHVwLnNldHRpbmdzKSxDPXguc2VsZWN0b3Isdz14LmNsYXNzTmFtZSxrPXguZXJyb3IsUz14Lm1ldGFkYXRhLFQ9eC5uYW1lc3BhY2UsQT1cIi5cIit4Lm5hbWVzcGFjZSxSPVwibW9kdWxlLVwiK1QsUD1lKHRoaXMpLEU9ZSh4LmNvbnRleHQpLEY9eC50YXJnZXQ/ZSh4LnRhcmdldCk6UCxEPTAsTz0hMSxxPSExLGo9dGhpcyx6PVAuZGF0YShSKTt5PXtpbml0aWFsaXplOmZ1bmN0aW9uKCl7eS5kZWJ1ZyhcIkluaXRpYWxpemluZ1wiLFApLHkuY3JlYXRlSUQoKSx5LmJpbmQuZXZlbnRzKCksIXkuZXhpc3RzKCkmJngucHJlc2VydmUmJnkuY3JlYXRlKCkseS5pbnN0YW50aWF0ZSgpfSxpbnN0YW50aWF0ZTpmdW5jdGlvbigpe3kudmVyYm9zZShcIlN0b3JpbmcgaW5zdGFuY2VcIix5KSx6PXksUC5kYXRhKFIseil9LHJlZnJlc2g6ZnVuY3Rpb24oKXt4LnBvcHVwP249ZSh4LnBvcHVwKS5lcSgwKTp4LmlubGluZSYmKG49Ri5uZXh0QWxsKEMucG9wdXApLmVxKDApLHgucG9wdXA9bikseC5wb3B1cD8obi5hZGRDbGFzcyh3LmxvYWRpbmcpLHI9eS5nZXQub2Zmc2V0UGFyZW50KCksbi5yZW1vdmVDbGFzcyh3LmxvYWRpbmcpLHgubW92ZVBvcHVwJiZ5Lmhhcy5wb3B1cCgpJiZ5LmdldC5vZmZzZXRQYXJlbnQobilbMF0hPT1yWzBdJiYoeS5kZWJ1ZyhcIk1vdmluZyBwb3B1cCB0byB0aGUgc2FtZSBvZmZzZXQgcGFyZW50IGFzIGFjdGl2YXRpbmcgZWxlbWVudFwiKSxuLmRldGFjaCgpLmFwcGVuZFRvKHIpKSk6cj14LmlubGluZT95LmdldC5vZmZzZXRQYXJlbnQoRik6eS5oYXMucG9wdXAoKT95LmdldC5vZmZzZXRQYXJlbnQobik6bCxyLmlzKFwiaHRtbFwiKSYmclswXSE9PWxbMF0mJih5LmRlYnVnKFwiU2V0dGluZyBwYWdlIGFzIG9mZnNldCBwYXJlbnRcIikscj1sKSx5LmdldC52YXJpYXRpb24oKSYmeS5zZXQudmFyaWF0aW9uKCl9LHJlcG9zaXRpb246ZnVuY3Rpb24oKXt5LnJlZnJlc2goKSx5LnNldC5wb3NpdGlvbigpfSxkZXN0cm95OmZ1bmN0aW9uKCl7eS5kZWJ1ZyhcIkRlc3Ryb3lpbmcgcHJldmlvdXMgbW9kdWxlXCIpLG4mJiF4LnByZXNlcnZlJiZ5LnJlbW92ZVBvcHVwKCksY2xlYXJUaW1lb3V0KHkuaGlkZVRpbWVyKSxjbGVhclRpbWVvdXQoeS5zaG93VGltZXIpLGMub2ZmKGgpLFAub2ZmKEEpLnJlbW92ZURhdGEoUil9LGV2ZW50OntzdGFydDpmdW5jdGlvbih0KXt2YXIgbj1lLmlzUGxhaW5PYmplY3QoeC5kZWxheSk/eC5kZWxheS5zaG93OnguZGVsYXk7Y2xlYXJUaW1lb3V0KHkuaGlkZVRpbWVyKSxxfHwoeS5zaG93VGltZXI9c2V0VGltZW91dCh5LnNob3csbikpfSxlbmQ6ZnVuY3Rpb24oKXt2YXIgdD1lLmlzUGxhaW5PYmplY3QoeC5kZWxheSk/eC5kZWxheS5oaWRlOnguZGVsYXk7Y2xlYXJUaW1lb3V0KHkuc2hvd1RpbWVyKSx5LmhpZGVUaW1lcj1zZXRUaW1lb3V0KHkuaGlkZSx0KX0sdG91Y2hzdGFydDpmdW5jdGlvbihlKXtxPSEwLHkuc2hvdygpfSxyZXNpemU6ZnVuY3Rpb24oKXt5LmlzLnZpc2libGUoKSYmeS5zZXQucG9zaXRpb24oKX0saGlkZUdyYWNlZnVsbHk6ZnVuY3Rpb24odCl7dCYmMD09PWUodC50YXJnZXQpLmNsb3Nlc3QoQy5wb3B1cCkubGVuZ3RoPyh5LmRlYnVnKFwiQ2xpY2sgb2NjdXJyZWQgb3V0c2lkZSBwb3B1cCBoaWRpbmcgcG9wdXBcIikseS5oaWRlKCkpOnkuZGVidWcoXCJDbGljayB3YXMgaW5zaWRlIHBvcHVwLCBrZWVwaW5nIHBvcHVwIG9wZW5cIil9fSxjcmVhdGU6ZnVuY3Rpb24oKXt2YXIgdD15LmdldC5odG1sKCksaT15LmdldC50aXRsZSgpLG89eS5nZXQuY29udGVudCgpO3R8fG98fGk/KHkuZGVidWcoXCJDcmVhdGluZyBwb3AtdXAgaHRtbFwiKSx0fHwodD14LnRlbXBsYXRlcy5wb3B1cCh7dGl0bGU6aSxjb250ZW50Om99KSksbj1lKFwiPGRpdi8+XCIpLmFkZENsYXNzKHcucG9wdXApLmRhdGEoUy5hY3RpdmF0b3IsUCkuaHRtbCh0KSx4LmlubGluZT8oeS52ZXJib3NlKFwiSW5zZXJ0aW5nIHBvcHVwIGVsZW1lbnQgaW5saW5lXCIsbiksbi5pbnNlcnRBZnRlcihQKSk6KHkudmVyYm9zZShcIkFwcGVuZGluZyBwb3B1cCBlbGVtZW50IHRvIGJvZHlcIixuKSxuLmFwcGVuZFRvKEUpKSx5LnJlZnJlc2goKSx5LnNldC52YXJpYXRpb24oKSx4LmhvdmVyYWJsZSYmeS5iaW5kLnBvcHVwKCkseC5vbkNyZWF0ZS5jYWxsKG4saikpOjAhPT1GLm5leHQoQy5wb3B1cCkubGVuZ3RoPyh5LnZlcmJvc2UoXCJQcmUtZXhpc3RpbmcgcG9wdXAgZm91bmRcIikseC5pbmxpbmU9ITAseC5wb3B1cHM9Ri5uZXh0KEMucG9wdXApLmRhdGEoUy5hY3RpdmF0b3IsUCkseS5yZWZyZXNoKCkseC5ob3ZlcmFibGUmJnkuYmluZC5wb3B1cCgpKTp4LnBvcHVwPyhlKHgucG9wdXApLmRhdGEoUy5hY3RpdmF0b3IsUCkseS52ZXJib3NlKFwiVXNlZCBwb3B1cCBzcGVjaWZpZWQgaW4gc2V0dGluZ3NcIikseS5yZWZyZXNoKCkseC5ob3ZlcmFibGUmJnkuYmluZC5wb3B1cCgpKTp5LmRlYnVnKFwiTm8gY29udGVudCBzcGVjaWZpZWQgc2tpcHBpbmcgZGlzcGxheVwiLGopfSxjcmVhdGVJRDpmdW5jdGlvbigpe2I9KE1hdGgucmFuZG9tKCkudG9TdHJpbmcoMTYpK1wiMDAwMDAwMDAwXCIpLnN1YnN0cigyLDgpLGg9XCIuXCIrYix5LnZlcmJvc2UoXCJDcmVhdGluZyB1bmlxdWUgaWQgZm9yIGVsZW1lbnRcIixiKX0sdG9nZ2xlOmZ1bmN0aW9uKCl7eS5kZWJ1ZyhcIlRvZ2dsaW5nIHBvcC11cFwiKSx5LmlzLmhpZGRlbigpPyh5LmRlYnVnKFwiUG9wdXAgaXMgaGlkZGVuLCBzaG93aW5nIHBvcC11cFwiKSx5LnVuYmluZC5jbG9zZSgpLHkuc2hvdygpKTooeS5kZWJ1ZyhcIlBvcHVwIGlzIHZpc2libGUsIGhpZGluZyBwb3AtdXBcIikseS5oaWRlKCkpfSxzaG93OmZ1bmN0aW9uKGUpe2lmKGU9ZXx8ZnVuY3Rpb24oKXt9LHkuZGVidWcoXCJTaG93aW5nIHBvcC11cFwiLHgudHJhbnNpdGlvbikseS5pcy5oaWRkZW4oKSYmKCF5LmlzLmFjdGl2ZSgpfHwheS5pcy5kcm9wZG93bigpKSl7aWYoeS5leGlzdHMoKXx8eS5jcmVhdGUoKSx4Lm9uU2hvdy5jYWxsKG4saik9PT0hMSlyZXR1cm4gdm9pZCB5LmRlYnVnKFwib25TaG93IGNhbGxiYWNrIHJldHVybmVkIGZhbHNlLCBjYW5jZWxsaW5nIHBvcHVwIGFuaW1hdGlvblwiKTt4LnByZXNlcnZlfHx4LnBvcHVwfHx5LnJlZnJlc2goKSxuJiZ5LnNldC5wb3NpdGlvbigpJiYoeS5zYXZlLmNvbmRpdGlvbnMoKSx4LmV4Y2x1c2l2ZSYmeS5oaWRlQWxsKCkseS5hbmltYXRlLnNob3coZSkpfX0saGlkZTpmdW5jdGlvbihlKXtpZihlPWV8fGZ1bmN0aW9uKCl7fSx5LmlzLnZpc2libGUoKXx8eS5pcy5hbmltYXRpbmcoKSl7aWYoeC5vbkhpZGUuY2FsbChuLGopPT09ITEpcmV0dXJuIHZvaWQgeS5kZWJ1ZyhcIm9uSGlkZSBjYWxsYmFjayByZXR1cm5lZCBmYWxzZSwgY2FuY2VsbGluZyBwb3B1cCBhbmltYXRpb25cIik7eS5yZW1vdmUudmlzaWJsZSgpLHkudW5iaW5kLmNsb3NlKCkseS5yZXN0b3JlLmNvbmRpdGlvbnMoKSx5LmFuaW1hdGUuaGlkZShlKX19LGhpZGVBbGw6ZnVuY3Rpb24oKXtlKEMucG9wdXApLmZpbHRlcihcIi5cIit3LnZpc2libGUpLmVhY2goZnVuY3Rpb24oKXtlKHRoaXMpLmRhdGEoUy5hY3RpdmF0b3IpLnBvcHVwKFwiaGlkZVwiKX0pfSxleGlzdHM6ZnVuY3Rpb24oKXtyZXR1cm4gbj94LmlubGluZXx8eC5wb3B1cD95Lmhhcy5wb3B1cCgpOm4uY2xvc2VzdChFKS5sZW5ndGg+PTE/ITA6ITE6ITF9LHJlbW92ZVBvcHVwOmZ1bmN0aW9uKCl7eS5oYXMucG9wdXAoKSYmIXgucG9wdXAmJih5LmRlYnVnKFwiUmVtb3ZpbmcgcG9wdXBcIixuKSxuLnJlbW92ZSgpLG49aSx4Lm9uUmVtb3ZlLmNhbGwobixqKSl9LHNhdmU6e2NvbmRpdGlvbnM6ZnVuY3Rpb24oKXt5LmNhY2hlPXt0aXRsZTpQLmF0dHIoXCJ0aXRsZVwiKX0seS5jYWNoZS50aXRsZSYmUC5yZW1vdmVBdHRyKFwidGl0bGVcIikseS52ZXJib3NlKFwiU2F2aW5nIG9yaWdpbmFsIGF0dHJpYnV0ZXNcIix5LmNhY2hlLnRpdGxlKX19LHJlc3RvcmU6e2NvbmRpdGlvbnM6ZnVuY3Rpb24oKXtyZXR1cm4geS5jYWNoZSYmeS5jYWNoZS50aXRsZSYmKFAuYXR0cihcInRpdGxlXCIseS5jYWNoZS50aXRsZSkseS52ZXJib3NlKFwiUmVzdG9yaW5nIG9yaWdpbmFsIGF0dHJpYnV0ZXNcIix5LmNhY2hlLnRpdGxlKSksITB9fSxhbmltYXRlOntzaG93OmZ1bmN0aW9uKHQpe3Q9ZS5pc0Z1bmN0aW9uKHQpP3Q6ZnVuY3Rpb24oKXt9LHgudHJhbnNpdGlvbiYmZS5mbi50cmFuc2l0aW9uIT09aSYmUC50cmFuc2l0aW9uKFwiaXMgc3VwcG9ydGVkXCIpPyh5LnNldC52aXNpYmxlKCksbi50cmFuc2l0aW9uKHthbmltYXRpb246eC50cmFuc2l0aW9uK1wiIGluXCIscXVldWU6ITEsZGVidWc6eC5kZWJ1Zyx2ZXJib3NlOngudmVyYm9zZSxkdXJhdGlvbjp4LmR1cmF0aW9uLG9uQ29tcGxldGU6ZnVuY3Rpb24oKXt5LmJpbmQuY2xvc2UoKSx0LmNhbGwobixqKSx4Lm9uVmlzaWJsZS5jYWxsKG4sail9fSkpOnkuZXJyb3Ioay5ub1RyYW5zaXRpb24pfSxoaWRlOmZ1bmN0aW9uKHQpe3JldHVybiB0PWUuaXNGdW5jdGlvbih0KT90OmZ1bmN0aW9uKCl7fSx5LmRlYnVnKFwiSGlkaW5nIHBvcC11cFwiKSx4Lm9uSGlkZS5jYWxsKG4saik9PT0hMT92b2lkIHkuZGVidWcoXCJvbkhpZGUgY2FsbGJhY2sgcmV0dXJuZWQgZmFsc2UsIGNhbmNlbGxpbmcgcG9wdXAgYW5pbWF0aW9uXCIpOnZvaWQoeC50cmFuc2l0aW9uJiZlLmZuLnRyYW5zaXRpb24hPT1pJiZQLnRyYW5zaXRpb24oXCJpcyBzdXBwb3J0ZWRcIik/bi50cmFuc2l0aW9uKHthbmltYXRpb246eC50cmFuc2l0aW9uK1wiIG91dFwiLHF1ZXVlOiExLGR1cmF0aW9uOnguZHVyYXRpb24sZGVidWc6eC5kZWJ1Zyx2ZXJib3NlOngudmVyYm9zZSxvbkNvbXBsZXRlOmZ1bmN0aW9uKCl7eS5yZXNldCgpLHQuY2FsbChuLGopLHgub25IaWRkZW4uY2FsbChuLGopfX0pOnkuZXJyb3Ioay5ub1RyYW5zaXRpb24pKX19LGdldDp7aHRtbDpmdW5jdGlvbigpe3JldHVybiBQLnJlbW92ZURhdGEoUy5odG1sKSxQLmRhdGEoUy5odG1sKXx8eC5odG1sfSx0aXRsZTpmdW5jdGlvbigpe3JldHVybiBQLnJlbW92ZURhdGEoUy50aXRsZSksUC5kYXRhKFMudGl0bGUpfHx4LnRpdGxlfSxjb250ZW50OmZ1bmN0aW9uKCl7cmV0dXJuIFAucmVtb3ZlRGF0YShTLmNvbnRlbnQpLFAuZGF0YShTLmNvbnRlbnQpfHxQLmF0dHIoXCJ0aXRsZVwiKXx8eC5jb250ZW50fSx2YXJpYXRpb246ZnVuY3Rpb24oKXtyZXR1cm4gUC5yZW1vdmVEYXRhKFMudmFyaWF0aW9uKSxQLmRhdGEoUy52YXJpYXRpb24pfHx4LnZhcmlhdGlvbn0scG9wdXBPZmZzZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gbi5vZmZzZXQoKX0sY2FsY3VsYXRpb25zOmZ1bmN0aW9uKCl7dmFyIGUsaT1GWzBdLG89eC5pbmxpbmV8fHgucG9wdXA/Ri5wb3NpdGlvbigpOkYub2Zmc2V0KCksYT17fTtyZXR1cm4gYT17dGFyZ2V0OntlbGVtZW50OkZbMF0sd2lkdGg6Ri5vdXRlcldpZHRoKCksaGVpZ2h0OkYub3V0ZXJIZWlnaHQoKSx0b3A6by50b3AsbGVmdDpvLmxlZnQsbWFyZ2luOnt9fSxwb3B1cDp7d2lkdGg6bi5vdXRlcldpZHRoKCksaGVpZ2h0Om4ub3V0ZXJIZWlnaHQoKX0scGFyZW50Ont3aWR0aDpyLm91dGVyV2lkdGgoKSxoZWlnaHQ6ci5vdXRlckhlaWdodCgpfSxzY3JlZW46e3Njcm9sbDp7dG9wOmMuc2Nyb2xsVG9wKCksbGVmdDpjLnNjcm9sbExlZnQoKX0sd2lkdGg6Yy53aWR0aCgpLGhlaWdodDpjLmhlaWdodCgpfX0seC5zZXRGbHVpZFdpZHRoJiZ5LmlzLmZsdWlkKCkmJihhLmNvbnRhaW5lcj17d2lkdGg6bi5wYXJlbnQoKS5vdXRlcldpZHRoKCl9LGEucG9wdXAud2lkdGg9YS5jb250YWluZXIud2lkdGgpLGEudGFyZ2V0Lm1hcmdpbi50b3A9eC5pbmxpbmU/cGFyc2VJbnQodC5nZXRDb21wdXRlZFN0eWxlKGkpLmdldFByb3BlcnR5VmFsdWUoXCJtYXJnaW4tdG9wXCIpLDEwKTowLGEudGFyZ2V0Lm1hcmdpbi5sZWZ0PXguaW5saW5lP3kuaXMucnRsKCk/cGFyc2VJbnQodC5nZXRDb21wdXRlZFN0eWxlKGkpLmdldFByb3BlcnR5VmFsdWUoXCJtYXJnaW4tcmlnaHRcIiksMTApOnBhcnNlSW50KHQuZ2V0Q29tcHV0ZWRTdHlsZShpKS5nZXRQcm9wZXJ0eVZhbHVlKFwibWFyZ2luLWxlZnRcIiksMTApOjAsZT1hLnNjcmVlbixhLmJvdW5kYXJ5PXt0b3A6ZS5zY3JvbGwudG9wLGJvdHRvbTplLnNjcm9sbC50b3ArZS5oZWlnaHQsbGVmdDplLnNjcm9sbC5sZWZ0LHJpZ2h0OmUuc2Nyb2xsLmxlZnQrZS53aWR0aH0sYX0saWQ6ZnVuY3Rpb24oKXtyZXR1cm4gYn0sc3RhcnRFdmVudDpmdW5jdGlvbigpe3JldHVyblwiaG92ZXJcIj09eC5vbj9cIm1vdXNlZW50ZXJcIjpcImZvY3VzXCI9PXgub24/XCJmb2N1c1wiOiExfSxzY3JvbGxFdmVudDpmdW5jdGlvbigpe3JldHVyblwic2Nyb2xsXCJ9LGVuZEV2ZW50OmZ1bmN0aW9uKCl7cmV0dXJuXCJob3ZlclwiPT14Lm9uP1wibW91c2VsZWF2ZVwiOlwiZm9jdXNcIj09eC5vbj9cImJsdXJcIjohMX0sZGlzdGFuY2VGcm9tQm91bmRhcnk6ZnVuY3Rpb24oZSx0KXt2YXIgbixpLG89e307cmV0dXJuIGU9ZXx8eS5nZXQub2Zmc2V0KCksdD10fHx5LmdldC5jYWxjdWxhdGlvbnMoKSxuPXQucG9wdXAsaT10LmJvdW5kYXJ5LGUmJihvPXt0b3A6ZS50b3AtaS50b3AsbGVmdDplLmxlZnQtaS5sZWZ0LHJpZ2h0OmkucmlnaHQtKGUubGVmdCtuLndpZHRoKSxib3R0b206aS5ib3R0b20tKGUudG9wK24uaGVpZ2h0KX0seS52ZXJib3NlKFwiRGlzdGFuY2UgZnJvbSBib3VuZGFyaWVzIGRldGVybWluZWRcIixlLG8pKSxvfSxvZmZzZXRQYXJlbnQ6ZnVuY3Rpb24odCl7dmFyIG49dCE9PWk/dFswXTpQWzBdLG89bi5wYXJlbnROb2RlLGE9ZShvKTtpZihvKWZvcih2YXIgcj1cIm5vbmVcIj09PWEuY3NzKFwidHJhbnNmb3JtXCIpLHM9XCJzdGF0aWNcIj09PWEuY3NzKFwicG9zaXRpb25cIiksYz1hLmlzKFwiaHRtbFwiKTtvJiYhYyYmcyYmcjspbz1vLnBhcmVudE5vZGUsYT1lKG8pLHI9XCJub25lXCI9PT1hLmNzcyhcInRyYW5zZm9ybVwiKSxzPVwic3RhdGljXCI9PT1hLmNzcyhcInBvc2l0aW9uXCIpLGM9YS5pcyhcImh0bWxcIik7cmV0dXJuIGEmJmEubGVuZ3RoPjA/YTplKCl9LHBvc2l0aW9uczpmdW5jdGlvbigpe3JldHVybntcInRvcCBsZWZ0XCI6ITEsXCJ0b3AgY2VudGVyXCI6ITEsXCJ0b3AgcmlnaHRcIjohMSxcImJvdHRvbSBsZWZ0XCI6ITEsXCJib3R0b20gY2VudGVyXCI6ITEsXCJib3R0b20gcmlnaHRcIjohMSxcImxlZnQgY2VudGVyXCI6ITEsXCJyaWdodCBjZW50ZXJcIjohMX19LG5leHRQb3NpdGlvbjpmdW5jdGlvbihlKXt2YXIgdD1lLnNwbGl0KFwiIFwiKSxuPXRbMF0saT10WzFdLG89e3RvcDpcImJvdHRvbVwiLGJvdHRvbTpcInRvcFwiLGxlZnQ6XCJyaWdodFwiLHJpZ2h0OlwibGVmdFwifSxhPXtsZWZ0OlwiY2VudGVyXCIsY2VudGVyOlwicmlnaHRcIixyaWdodDpcImxlZnRcIn0scj17XCJ0b3AgbGVmdFwiOlwidG9wIGNlbnRlclwiLFwidG9wIGNlbnRlclwiOlwidG9wIHJpZ2h0XCIsXCJ0b3AgcmlnaHRcIjpcInJpZ2h0IGNlbnRlclwiLFwicmlnaHQgY2VudGVyXCI6XCJib3R0b20gcmlnaHRcIixcImJvdHRvbSByaWdodFwiOlwiYm90dG9tIGNlbnRlclwiLFwiYm90dG9tIGNlbnRlclwiOlwiYm90dG9tIGxlZnRcIixcImJvdHRvbSBsZWZ0XCI6XCJsZWZ0IGNlbnRlclwiLFwibGVmdCBjZW50ZXJcIjpcInRvcCBsZWZ0XCJ9LHM9XCJ0b3BcIj09bnx8XCJib3R0b21cIj09bixjPSExLGw9ITEsdT0hMTtyZXR1cm4gT3x8KHkudmVyYm9zZShcIkFsbCBhdmFpbGFibGUgcG9zaXRpb25zIGF2YWlsYWJsZVwiKSxPPXkuZ2V0LnBvc2l0aW9ucygpKSx5LmRlYnVnKFwiUmVjb3JkaW5nIGxhc3QgcG9zaXRpb24gdHJpZWRcIixlKSxPW2VdPSEwLFwib3Bwb3NpdGVcIj09PXgucHJlZmVyJiYodT1bb1tuXSxpXSx1PXUuam9pbihcIiBcIiksYz1PW3VdPT09ITAseS5kZWJ1ZyhcIlRyeWluZyBvcHBvc2l0ZSBzdHJhdGVneVwiLHUpKSxcImFkamFjZW50XCI9PT14LnByZWZlciYmcyYmKHU9W24sYVtpXV0sdT11LmpvaW4oXCIgXCIpLGw9T1t1XT09PSEwLHkuZGVidWcoXCJUcnlpbmcgYWRqYWNlbnQgc3RyYXRlZ3lcIix1KSksKGx8fGMpJiYoeS5kZWJ1ZyhcIlVzaW5nIGJhY2t1cCBwb3NpdGlvblwiLHUpLHU9cltlXSksdX19LHNldDp7cG9zaXRpb246ZnVuY3Rpb24oZSx0KXtpZigwPT09Ri5sZW5ndGh8fDA9PT1uLmxlbmd0aClyZXR1cm4gdm9pZCB5LmVycm9yKGsubm90Rm91bmQpO3ZhciBvLGEscixzLGMsbCx1LGQ7aWYodD10fHx5LmdldC5jYWxjdWxhdGlvbnMoKSxlPWV8fFAuZGF0YShTLnBvc2l0aW9uKXx8eC5wb3NpdGlvbixvPVAuZGF0YShTLm9mZnNldCl8fHgub2Zmc2V0LGE9eC5kaXN0YW5jZUF3YXkscj10LnRhcmdldCxzPXQucG9wdXAsYz10LnBhcmVudCwwPT09ci53aWR0aCYmMD09PXIuaGVpZ2h0KXJldHVybiB5LmRlYnVnKFwiUG9wdXAgdGFyZ2V0IGlzIGhpZGRlbiwgbm8gYWN0aW9uIHRha2VuXCIpLCExO3N3aXRjaCh4LmlubGluZSYmKHkuZGVidWcoXCJBZGRpbmcgbWFyZ2luIHRvIGNhbGN1bGF0aW9uXCIsci5tYXJnaW4pLFwibGVmdCBjZW50ZXJcIj09ZXx8XCJyaWdodCBjZW50ZXJcIj09ZT8obys9ci5tYXJnaW4udG9wLGErPS1yLm1hcmdpbi5sZWZ0KTpcInRvcCBsZWZ0XCI9PWV8fFwidG9wIGNlbnRlclwiPT1lfHxcInRvcCByaWdodFwiPT1lPyhvKz1yLm1hcmdpbi5sZWZ0LGEtPXIubWFyZ2luLnRvcCk6KG8rPXIubWFyZ2luLmxlZnQsYSs9ci5tYXJnaW4udG9wKSkseS5kZWJ1ZyhcIkRldGVybWluaW5nIHBvcHVwIHBvc2l0aW9uIGZyb20gY2FsY3VsYXRpb25zXCIsZSx0KSx5LmlzLnJ0bCgpJiYoZT1lLnJlcGxhY2UoL2xlZnR8cmlnaHQvZyxmdW5jdGlvbihlKXtyZXR1cm5cImxlZnRcIj09ZT9cInJpZ2h0XCI6XCJsZWZ0XCJ9KSx5LmRlYnVnKFwiUlRMOiBQb3B1cCBwb3NpdGlvbiB1cGRhdGVkXCIsZSkpLEQ9PXgubWF4U2VhcmNoRGVwdGgmJlwic3RyaW5nXCI9PXR5cGVvZiB4Lmxhc3RSZXNvcnQmJihlPXgubGFzdFJlc29ydCksZSl7Y2FzZVwidG9wIGxlZnRcIjpsPXt0b3A6XCJhdXRvXCIsYm90dG9tOmMuaGVpZ2h0LXIudG9wK2EsbGVmdDpyLmxlZnQrbyxyaWdodDpcImF1dG9cIn07YnJlYWs7Y2FzZVwidG9wIGNlbnRlclwiOmw9e2JvdHRvbTpjLmhlaWdodC1yLnRvcCthLGxlZnQ6ci5sZWZ0K3Iud2lkdGgvMi1zLndpZHRoLzIrbyx0b3A6XCJhdXRvXCIscmlnaHQ6XCJhdXRvXCJ9O2JyZWFrO2Nhc2VcInRvcCByaWdodFwiOmw9e2JvdHRvbTpjLmhlaWdodC1yLnRvcCthLHJpZ2h0OmMud2lkdGgtci5sZWZ0LXIud2lkdGgtbyx0b3A6XCJhdXRvXCIsbGVmdDpcImF1dG9cIn07YnJlYWs7Y2FzZVwibGVmdCBjZW50ZXJcIjpsPXt0b3A6ci50b3Arci5oZWlnaHQvMi1zLmhlaWdodC8yK28scmlnaHQ6Yy53aWR0aC1yLmxlZnQrYSxsZWZ0OlwiYXV0b1wiLGJvdHRvbTpcImF1dG9cIn07YnJlYWs7Y2FzZVwicmlnaHQgY2VudGVyXCI6bD17dG9wOnIudG9wK3IuaGVpZ2h0LzItcy5oZWlnaHQvMitvLGxlZnQ6ci5sZWZ0K3Iud2lkdGgrYSxib3R0b206XCJhdXRvXCIscmlnaHQ6XCJhdXRvXCJ9O2JyZWFrO2Nhc2VcImJvdHRvbSBsZWZ0XCI6bD17dG9wOnIudG9wK3IuaGVpZ2h0K2EsbGVmdDpyLmxlZnQrbyxib3R0b206XCJhdXRvXCIscmlnaHQ6XCJhdXRvXCJ9O2JyZWFrO2Nhc2VcImJvdHRvbSBjZW50ZXJcIjpsPXt0b3A6ci50b3Arci5oZWlnaHQrYSxsZWZ0OnIubGVmdCtyLndpZHRoLzItcy53aWR0aC8yK28sYm90dG9tOlwiYXV0b1wiLHJpZ2h0OlwiYXV0b1wifTticmVhaztjYXNlXCJib3R0b20gcmlnaHRcIjpsPXt0b3A6ci50b3Arci5oZWlnaHQrYSxyaWdodDpjLndpZHRoLXIubGVmdC1yLndpZHRoLW8sbGVmdDpcImF1dG9cIixib3R0b206XCJhdXRvXCJ9fWlmKGw9PT1pJiZ5LmVycm9yKGsuaW52YWxpZFBvc2l0aW9uLGUpLHkuZGVidWcoXCJDYWxjdWxhdGVkIHBvcHVwIHBvc2l0aW9uaW5nIHZhbHVlc1wiLGwpLG4uY3NzKGwpLnJlbW92ZUNsYXNzKHcucG9zaXRpb24pLmFkZENsYXNzKGUpLmFkZENsYXNzKHcubG9hZGluZyksdT15LmdldC5wb3B1cE9mZnNldCgpLGQ9eS5nZXQuZGlzdGFuY2VGcm9tQm91bmRhcnkodSx0KSx5LmlzLm9mZnN0YWdlKGQsZSkpe2lmKHkuZGVidWcoXCJQb3NpdGlvbiBpcyBvdXRzaWRlIHZpZXdwb3J0XCIsZSksRDx4Lm1heFNlYXJjaERlcHRoKXJldHVybiBEKyssZT15LmdldC5uZXh0UG9zaXRpb24oZSkseS5kZWJ1ZyhcIlRyeWluZyBuZXcgcG9zaXRpb25cIixlKSxuP3kuc2V0LnBvc2l0aW9uKGUsdCk6ITE7aWYoIXgubGFzdFJlc29ydClyZXR1cm4geS5kZWJ1ZyhcIlBvcHVwIGNvdWxkIG5vdCBmaW5kIGEgcG9zaXRpb24gdG8gZGlzcGxheVwiLG4pLHkuZXJyb3Ioay5jYW5ub3RQbGFjZSxqKSx5LnJlbW92ZS5hdHRlbXB0cygpLHkucmVtb3ZlLmxvYWRpbmcoKSx5LnJlc2V0KCksITE7eS5kZWJ1ZyhcIk5vIHBvc2l0aW9uIGZvdW5kLCBzaG93aW5nIHdpdGggbGFzdCBwb3NpdGlvblwiKX1yZXR1cm4geS5kZWJ1ZyhcIlBvc2l0aW9uIGlzIG9uIHN0YWdlXCIsZSkseS5yZW1vdmUuYXR0ZW1wdHMoKSx5LnJlbW92ZS5sb2FkaW5nKCkseC5zZXRGbHVpZFdpZHRoJiZ5LmlzLmZsdWlkKCkmJnkuc2V0LmZsdWlkV2lkdGgodCksITB9LGZsdWlkV2lkdGg6ZnVuY3Rpb24oZSl7ZT1lfHx5LmdldC5jYWxjdWxhdGlvbnMoKSx5LmRlYnVnKFwiQXV0b21hdGljYWxseSBzZXR0aW5nIGVsZW1lbnQgd2lkdGggdG8gcGFyZW50IHdpZHRoXCIsZS5wYXJlbnQud2lkdGgpLG4uY3NzKFwid2lkdGhcIixlLmNvbnRhaW5lci53aWR0aCl9LHZhcmlhdGlvbjpmdW5jdGlvbihlKXtcclxuZT1lfHx5LmdldC52YXJpYXRpb24oKSxlJiZ5Lmhhcy5wb3B1cCgpJiYoeS52ZXJib3NlKFwiQWRkaW5nIHZhcmlhdGlvbiB0byBwb3B1cFwiLGUpLG4uYWRkQ2xhc3MoZSkpfSx2aXNpYmxlOmZ1bmN0aW9uKCl7UC5hZGRDbGFzcyh3LnZpc2libGUpfX0scmVtb3ZlOntsb2FkaW5nOmZ1bmN0aW9uKCl7bi5yZW1vdmVDbGFzcyh3LmxvYWRpbmcpfSx2YXJpYXRpb246ZnVuY3Rpb24oZSl7ZT1lfHx5LmdldC52YXJpYXRpb24oKSxlJiYoeS52ZXJib3NlKFwiUmVtb3ZpbmcgdmFyaWF0aW9uXCIsZSksbi5yZW1vdmVDbGFzcyhlKSl9LHZpc2libGU6ZnVuY3Rpb24oKXtQLnJlbW92ZUNsYXNzKHcudmlzaWJsZSl9LGF0dGVtcHRzOmZ1bmN0aW9uKCl7eS52ZXJib3NlKFwiUmVzZXR0aW5nIGFsbCBzZWFyY2hlZCBwb3NpdGlvbnNcIiksRD0wLE89ITF9fSxiaW5kOntldmVudHM6ZnVuY3Rpb24oKXt5LmRlYnVnKFwiQmluZGluZyBwb3B1cCBldmVudHMgdG8gbW9kdWxlXCIpLFwiY2xpY2tcIj09eC5vbiYmUC5vbihcImNsaWNrXCIrQSx5LnRvZ2dsZSksXCJob3ZlclwiPT14Lm9uJiZkJiZQLm9uKFwidG91Y2hzdGFydFwiK0EseS5ldmVudC50b3VjaHN0YXJ0KSx5LmdldC5zdGFydEV2ZW50KCkmJlAub24oeS5nZXQuc3RhcnRFdmVudCgpK0EseS5ldmVudC5zdGFydCkub24oeS5nZXQuZW5kRXZlbnQoKStBLHkuZXZlbnQuZW5kKSx4LnRhcmdldCYmeS5kZWJ1ZyhcIlRhcmdldCBzZXQgdG8gZWxlbWVudFwiLEYpLGMub24oXCJyZXNpemVcIitoLHkuZXZlbnQucmVzaXplKX0scG9wdXA6ZnVuY3Rpb24oKXt5LnZlcmJvc2UoXCJBbGxvd2luZyBob3ZlciBldmVudHMgb24gcG9wdXAgdG8gcHJldmVudCBjbG9zaW5nXCIpLG4mJnkuaGFzLnBvcHVwKCkmJm4ub24oXCJtb3VzZWVudGVyXCIrQSx5LmV2ZW50LnN0YXJ0KS5vbihcIm1vdXNlbGVhdmVcIitBLHkuZXZlbnQuZW5kKX0sY2xvc2U6ZnVuY3Rpb24oKXsoeC5oaWRlT25TY3JvbGw9PT0hMHx8XCJhdXRvXCI9PXguaGlkZU9uU2Nyb2xsJiZcImNsaWNrXCIhPXgub24pJiYocy5vbmUoeS5nZXQuc2Nyb2xsRXZlbnQoKStoLHkuZXZlbnQuaGlkZUdyYWNlZnVsbHkpLEUub25lKHkuZ2V0LnNjcm9sbEV2ZW50KCkraCx5LmV2ZW50LmhpZGVHcmFjZWZ1bGx5KSksXCJob3ZlclwiPT14Lm9uJiZxJiYoeS52ZXJib3NlKFwiQmluZGluZyBwb3B1cCBjbG9zZSBldmVudCB0byBkb2N1bWVudFwiKSxzLm9uKFwidG91Y2hzdGFydFwiK2gsZnVuY3Rpb24oZSl7eS52ZXJib3NlKFwiVG91Y2hlZCBhd2F5IGZyb20gcG9wdXBcIikseS5ldmVudC5oaWRlR3JhY2VmdWxseS5jYWxsKGosZSl9KSksXCJjbGlja1wiPT14Lm9uJiZ4LmNsb3NhYmxlJiYoeS52ZXJib3NlKFwiQmluZGluZyBwb3B1cCBjbG9zZSBldmVudCB0byBkb2N1bWVudFwiKSxzLm9uKFwiY2xpY2tcIitoLGZ1bmN0aW9uKGUpe3kudmVyYm9zZShcIkNsaWNrZWQgYXdheSBmcm9tIHBvcHVwXCIpLHkuZXZlbnQuaGlkZUdyYWNlZnVsbHkuY2FsbChqLGUpfSkpfX0sdW5iaW5kOntjbG9zZTpmdW5jdGlvbigpeyh4LmhpZGVPblNjcm9sbD09PSEwfHxcImF1dG9cIj09eC5oaWRlT25TY3JvbGwmJlwiY2xpY2tcIiE9eC5vbikmJihzLm9mZihcInNjcm9sbFwiK2gseS5oaWRlKSxFLm9mZihcInNjcm9sbFwiK2gseS5oaWRlKSksXCJob3ZlclwiPT14Lm9uJiZxJiYocy5vZmYoXCJ0b3VjaHN0YXJ0XCIraCkscT0hMSksXCJjbGlja1wiPT14Lm9uJiZ4LmNsb3NhYmxlJiYoeS52ZXJib3NlKFwiUmVtb3ZpbmcgY2xvc2UgZXZlbnQgZnJvbSBkb2N1bWVudFwiKSxzLm9mZihcImNsaWNrXCIraCkpfX0saGFzOntwb3B1cDpmdW5jdGlvbigpe3JldHVybiBuJiZuLmxlbmd0aD4wfX0saXM6e29mZnN0YWdlOmZ1bmN0aW9uKHQsbil7dmFyIGk9W107cmV0dXJuIGUuZWFjaCh0LGZ1bmN0aW9uKGUsdCl7dDwteC5qaXR0ZXImJih5LmRlYnVnKFwiUG9zaXRpb24gZXhjZWVkcyBhbGxvd2FibGUgZGlzdGFuY2UgZnJvbSBlZGdlXCIsZSx0LG4pLGkucHVzaChlKSl9KSxpLmxlbmd0aD4wPyEwOiExfSxhY3RpdmU6ZnVuY3Rpb24oKXtyZXR1cm4gUC5oYXNDbGFzcyh3LmFjdGl2ZSl9LGFuaW1hdGluZzpmdW5jdGlvbigpe3JldHVybiBuJiZuLmhhc0NsYXNzKHcuYW5pbWF0aW5nKX0sZmx1aWQ6ZnVuY3Rpb24oKXtyZXR1cm4gbiYmbi5oYXNDbGFzcyh3LmZsdWlkKX0sdmlzaWJsZTpmdW5jdGlvbigpe3JldHVybiBuJiZuLmhhc0NsYXNzKHcudmlzaWJsZSl9LGRyb3Bkb3duOmZ1bmN0aW9uKCl7cmV0dXJuIFAuaGFzQ2xhc3Mody5kcm9wZG93bil9LGhpZGRlbjpmdW5jdGlvbigpe3JldHVybiF5LmlzLnZpc2libGUoKX0scnRsOmZ1bmN0aW9uKCl7cmV0dXJuXCJydGxcIj09UC5jc3MoXCJkaXJlY3Rpb25cIil9fSxyZXNldDpmdW5jdGlvbigpe3kucmVtb3ZlLnZpc2libGUoKSx4LnByZXNlcnZlP2UuZm4udHJhbnNpdGlvbiE9PWkmJm4udHJhbnNpdGlvbihcInJlbW92ZSB0cmFuc2l0aW9uXCIpOnkucmVtb3ZlUG9wdXAoKX0sc2V0dGluZzpmdW5jdGlvbih0LG4pe2lmKGUuaXNQbGFpbk9iamVjdCh0KSllLmV4dGVuZCghMCx4LHQpO2Vsc2V7aWYobj09PWkpcmV0dXJuIHhbdF07eFt0XT1ufX0saW50ZXJuYWw6ZnVuY3Rpb24odCxuKXtpZihlLmlzUGxhaW5PYmplY3QodCkpZS5leHRlbmQoITAseSx0KTtlbHNle2lmKG49PT1pKXJldHVybiB5W3RdO3lbdF09bn19LGRlYnVnOmZ1bmN0aW9uKCl7eC5kZWJ1ZyYmKHgucGVyZm9ybWFuY2U/eS5wZXJmb3JtYW5jZS5sb2coYXJndW1lbnRzKTooeS5kZWJ1Zz1GdW5jdGlvbi5wcm90b3R5cGUuYmluZC5jYWxsKGNvbnNvbGUuaW5mbyxjb25zb2xlLHgubmFtZStcIjpcIikseS5kZWJ1Zy5hcHBseShjb25zb2xlLGFyZ3VtZW50cykpKX0sdmVyYm9zZTpmdW5jdGlvbigpe3gudmVyYm9zZSYmeC5kZWJ1ZyYmKHgucGVyZm9ybWFuY2U/eS5wZXJmb3JtYW5jZS5sb2coYXJndW1lbnRzKTooeS52ZXJib3NlPUZ1bmN0aW9uLnByb3RvdHlwZS5iaW5kLmNhbGwoY29uc29sZS5pbmZvLGNvbnNvbGUseC5uYW1lK1wiOlwiKSx5LnZlcmJvc2UuYXBwbHkoY29uc29sZSxhcmd1bWVudHMpKSl9LGVycm9yOmZ1bmN0aW9uKCl7eS5lcnJvcj1GdW5jdGlvbi5wcm90b3R5cGUuYmluZC5jYWxsKGNvbnNvbGUuZXJyb3IsY29uc29sZSx4Lm5hbWUrXCI6XCIpLHkuZXJyb3IuYXBwbHkoY29uc29sZSxhcmd1bWVudHMpfSxwZXJmb3JtYW5jZTp7bG9nOmZ1bmN0aW9uKGUpe3ZhciB0LG4saTt4LnBlcmZvcm1hbmNlJiYodD0obmV3IERhdGUpLmdldFRpbWUoKSxpPW18fHQsbj10LWksbT10LGYucHVzaCh7TmFtZTplWzBdLEFyZ3VtZW50czpbXS5zbGljZS5jYWxsKGUsMSl8fFwiXCIsRWxlbWVudDpqLFwiRXhlY3V0aW9uIFRpbWVcIjpufSkpLGNsZWFyVGltZW91dCh5LnBlcmZvcm1hbmNlLnRpbWVyKSx5LnBlcmZvcm1hbmNlLnRpbWVyPXNldFRpbWVvdXQoeS5wZXJmb3JtYW5jZS5kaXNwbGF5LDUwMCl9LGRpc3BsYXk6ZnVuY3Rpb24oKXt2YXIgdD14Lm5hbWUrXCI6XCIsbj0wO209ITEsY2xlYXJUaW1lb3V0KHkucGVyZm9ybWFuY2UudGltZXIpLGUuZWFjaChmLGZ1bmN0aW9uKGUsdCl7bis9dFtcIkV4ZWN1dGlvbiBUaW1lXCJdfSksdCs9XCIgXCIrbitcIm1zXCIsdSYmKHQrPVwiICdcIit1K1wiJ1wiKSwoY29uc29sZS5ncm91cCE9PWl8fGNvbnNvbGUudGFibGUhPT1pKSYmZi5sZW5ndGg+MCYmKGNvbnNvbGUuZ3JvdXBDb2xsYXBzZWQodCksY29uc29sZS50YWJsZT9jb25zb2xlLnRhYmxlKGYpOmUuZWFjaChmLGZ1bmN0aW9uKGUsdCl7Y29uc29sZS5sb2codC5OYW1lK1wiOiBcIit0W1wiRXhlY3V0aW9uIFRpbWVcIl0rXCJtc1wiKX0pLGNvbnNvbGUuZ3JvdXBFbmQoKSksZj1bXX19LGludm9rZTpmdW5jdGlvbih0LG4sbyl7dmFyIHIscyxjLGw9ejtyZXR1cm4gbj1ufHx2LG89anx8byxcInN0cmluZ1wiPT10eXBlb2YgdCYmbCE9PWkmJih0PXQuc3BsaXQoL1tcXC4gXS8pLHI9dC5sZW5ndGgtMSxlLmVhY2godCxmdW5jdGlvbihuLG8pe3ZhciBhPW4hPXI/byt0W24rMV0uY2hhckF0KDApLnRvVXBwZXJDYXNlKCkrdFtuKzFdLnNsaWNlKDEpOnQ7aWYoZS5pc1BsYWluT2JqZWN0KGxbYV0pJiZuIT1yKWw9bFthXTtlbHNle2lmKGxbYV0hPT1pKXJldHVybiBzPWxbYV0sITE7aWYoIWUuaXNQbGFpbk9iamVjdChsW29dKXx8bj09cilyZXR1cm4gbFtvXSE9PWk/KHM9bFtvXSwhMSk6ITE7bD1sW29dfX0pKSxlLmlzRnVuY3Rpb24ocyk/Yz1zLmFwcGx5KG8sbik6cyE9PWkmJihjPXMpLGUuaXNBcnJheShhKT9hLnB1c2goYyk6YSE9PWk/YT1bYSxjXTpjIT09aSYmKGE9Yyksc319LHA/KHo9PT1pJiZ5LmluaXRpYWxpemUoKSx5Lmludm9rZShnKSk6KHohPT1pJiZ6Lmludm9rZShcImRlc3Ryb3lcIikseS5pbml0aWFsaXplKCkpfSksYSE9PWk/YTp0aGlzfSxlLmZuLnBvcHVwLnNldHRpbmdzPXtuYW1lOlwiUG9wdXBcIixkZWJ1ZzohMSx2ZXJib3NlOiExLHBlcmZvcm1hbmNlOiEwLG5hbWVzcGFjZTpcInBvcHVwXCIsb25DcmVhdGU6ZnVuY3Rpb24oKXt9LG9uUmVtb3ZlOmZ1bmN0aW9uKCl7fSxvblNob3c6ZnVuY3Rpb24oKXt9LG9uVmlzaWJsZTpmdW5jdGlvbigpe30sb25IaWRlOmZ1bmN0aW9uKCl7fSxvbkhpZGRlbjpmdW5jdGlvbigpe30sb246XCJob3ZlclwiLGFkZFRvdWNoRXZlbnRzOiEwLHBvc2l0aW9uOlwidG9wIGxlZnRcIix2YXJpYXRpb246XCJcIixtb3ZlUG9wdXA6ITAsdGFyZ2V0OiExLHBvcHVwOiExLGlubGluZTohMSxwcmVzZXJ2ZTohMSxob3ZlcmFibGU6ITEsY29udGVudDohMSxodG1sOiExLHRpdGxlOiExLGNsb3NhYmxlOiEwLGhpZGVPblNjcm9sbDpcImF1dG9cIixleGNsdXNpdmU6ITEsY29udGV4dDpcImJvZHlcIixwcmVmZXI6XCJvcHBvc2l0ZVwiLGxhc3RSZXNvcnQ6ITEsZGVsYXk6e3Nob3c6NTAsaGlkZTo3MH0sc2V0Rmx1aWRXaWR0aDohMCxkdXJhdGlvbjoyMDAsdHJhbnNpdGlvbjpcInNjYWxlXCIsZGlzdGFuY2VBd2F5OjAsaml0dGVyOjIsb2Zmc2V0OjAsbWF4U2VhcmNoRGVwdGg6MTUsZXJyb3I6e2ludmFsaWRQb3NpdGlvbjpcIlRoZSBwb3NpdGlvbiB5b3Ugc3BlY2lmaWVkIGlzIG5vdCBhIHZhbGlkIHBvc2l0aW9uXCIsY2Fubm90UGxhY2U6XCJQb3B1cCBkb2VzIG5vdCBmaXQgd2l0aGluIHRoZSBib3VuZGFyaWVzIG9mIHRoZSB2aWV3cG9ydFwiLG1ldGhvZDpcIlRoZSBtZXRob2QgeW91IGNhbGxlZCBpcyBub3QgZGVmaW5lZC5cIixub1RyYW5zaXRpb246XCJUaGlzIG1vZHVsZSByZXF1aXJlcyB1aSB0cmFuc2l0aW9ucyA8aHR0cHM6Ly9naXRodWIuY29tL1NlbWFudGljLU9yZy9VSS1UcmFuc2l0aW9uPlwiLG5vdEZvdW5kOlwiVGhlIHRhcmdldCBvciBwb3B1cCB5b3Ugc3BlY2lmaWVkIGRvZXMgbm90IGV4aXN0IG9uIHRoZSBwYWdlXCJ9LG1ldGFkYXRhOnthY3RpdmF0b3I6XCJhY3RpdmF0b3JcIixjb250ZW50OlwiY29udGVudFwiLGh0bWw6XCJodG1sXCIsb2Zmc2V0Olwib2Zmc2V0XCIscG9zaXRpb246XCJwb3NpdGlvblwiLHRpdGxlOlwidGl0bGVcIix2YXJpYXRpb246XCJ2YXJpYXRpb25cIn0sY2xhc3NOYW1lOnthY3RpdmU6XCJhY3RpdmVcIixhbmltYXRpbmc6XCJhbmltYXRpbmdcIixkcm9wZG93bjpcImRyb3Bkb3duXCIsZmx1aWQ6XCJmbHVpZFwiLGxvYWRpbmc6XCJsb2FkaW5nXCIscG9wdXA6XCJ1aSBwb3B1cFwiLHBvc2l0aW9uOlwidG9wIGxlZnQgY2VudGVyIGJvdHRvbSByaWdodFwiLHZpc2libGU6XCJ2aXNpYmxlXCJ9LHNlbGVjdG9yOntwb3B1cDpcIi51aS5wb3B1cFwifSx0ZW1wbGF0ZXM6e2VzY2FwZTpmdW5jdGlvbihlKXt2YXIgdD0vWyY8PlwiJ2BdL2csbj0vWyY8PlwiJ2BdLyxpPXtcIiZcIjpcIiZhbXA7XCIsXCI8XCI6XCImbHQ7XCIsXCI+XCI6XCImZ3Q7XCIsJ1wiJzpcIiZxdW90O1wiLFwiJ1wiOlwiJiN4Mjc7XCIsXCJgXCI6XCImI3g2MDtcIn0sbz1mdW5jdGlvbihlKXtyZXR1cm4gaVtlXX07cmV0dXJuIG4udGVzdChlKT9lLnJlcGxhY2UodCxvKTplfSxwb3B1cDpmdW5jdGlvbih0KXt2YXIgbj1cIlwiLG89ZS5mbi5wb3B1cC5zZXR0aW5ncy50ZW1wbGF0ZXMuZXNjYXBlO3JldHVybiB0eXBlb2YgdCE9PWkmJih0eXBlb2YgdC50aXRsZSE9PWkmJnQudGl0bGUmJih0LnRpdGxlPW8odC50aXRsZSksbis9JzxkaXYgY2xhc3M9XCJoZWFkZXJcIj4nK3QudGl0bGUrXCI8L2Rpdj5cIiksdHlwZW9mIHQuY29udGVudCE9PWkmJnQuY29udGVudCYmKHQuY29udGVudD1vKHQuY29udGVudCksbis9JzxkaXYgY2xhc3M9XCJjb250ZW50XCI+Jyt0LmNvbnRlbnQrXCI8L2Rpdj5cIikpLG59fX19KGpRdWVyeSx3aW5kb3csZG9jdW1lbnQpLGZ1bmN0aW9uKGUsdCxuLGkpe1widXNlIHN0cmljdFwiO2UuZm4ucHJvZ3Jlc3M9ZnVuY3Rpb24odCl7dmFyIG8sYT1lKHRoaXMpLHI9YS5zZWxlY3Rvcnx8XCJcIixzPShuZXcgRGF0ZSkuZ2V0VGltZSgpLGM9W10sbD1hcmd1bWVudHNbMF0sdT1cInN0cmluZ1wiPT10eXBlb2YgbCxkPVtdLnNsaWNlLmNhbGwoYXJndW1lbnRzLDEpO3JldHVybiBhLmVhY2goZnVuY3Rpb24oKXt2YXIgYSxtLGY9ZS5pc1BsYWluT2JqZWN0KHQpP2UuZXh0ZW5kKCEwLHt9LGUuZm4ucHJvZ3Jlc3Muc2V0dGluZ3MsdCk6ZS5leHRlbmQoe30sZS5mbi5wcm9ncmVzcy5zZXR0aW5ncyksZz1mLmNsYXNzTmFtZSxwPWYubWV0YWRhdGEsdj1mLm5hbWVzcGFjZSxoPWYuc2VsZWN0b3IsYj1mLmVycm9yLHk9XCIuXCIrdix4PVwibW9kdWxlLVwiK3YsQz1lKHRoaXMpLHc9ZSh0aGlzKS5maW5kKGguYmFyKSxrPWUodGhpcykuZmluZChoLnByb2dyZXNzKSxTPWUodGhpcykuZmluZChoLmxhYmVsKSxUPXRoaXMsQT1DLmRhdGEoeCksUj0hMTttPXtpbml0aWFsaXplOmZ1bmN0aW9uKCl7bS5kZWJ1ZyhcIkluaXRpYWxpemluZyBwcm9ncmVzcyBiYXJcIixmKSxtLnNldC5kdXJhdGlvbigpLG0uc2V0LnRyYW5zaXRpb25FdmVudCgpLG0ucmVhZC5tZXRhZGF0YSgpLG0ucmVhZC5zZXR0aW5ncygpLG0uaW5zdGFudGlhdGUoKX0saW5zdGFudGlhdGU6ZnVuY3Rpb24oKXttLnZlcmJvc2UoXCJTdG9yaW5nIGluc3RhbmNlIG9mIHByb2dyZXNzXCIsbSksQT1tLEMuZGF0YSh4LG0pfSxkZXN0cm95OmZ1bmN0aW9uKCl7bS52ZXJib3NlKFwiRGVzdHJveWluZyBwcmV2aW91cyBwcm9ncmVzcyBmb3JcIixDKSxjbGVhckludGVydmFsKEEuaW50ZXJ2YWwpLG0ucmVtb3ZlLnN0YXRlKCksQy5yZW1vdmVEYXRhKHgpLEE9aX0scmVzZXQ6ZnVuY3Rpb24oKXttLnNldC5wZXJjZW50KDApfSxjb21wbGV0ZTpmdW5jdGlvbigpeyhtLnBlcmNlbnQ9PT1pfHxtLnBlcmNlbnQ8MTAwKSYmbS5zZXQucGVyY2VudCgxMDApfSxyZWFkOnttZXRhZGF0YTpmdW5jdGlvbigpe3ZhciBlPXtwZXJjZW50OkMuZGF0YShwLnBlcmNlbnQpLHRvdGFsOkMuZGF0YShwLnRvdGFsKSx2YWx1ZTpDLmRhdGEocC52YWx1ZSl9O2UucGVyY2VudCYmKG0uZGVidWcoXCJDdXJyZW50IHBlcmNlbnQgdmFsdWUgc2V0IGZyb20gbWV0YWRhdGFcIixlLnBlcmNlbnQpLG0uc2V0LnBlcmNlbnQoZS5wZXJjZW50KSksZS50b3RhbCYmKG0uZGVidWcoXCJUb3RhbCB2YWx1ZSBzZXQgZnJvbSBtZXRhZGF0YVwiLGUudG90YWwpLG0uc2V0LnRvdGFsKGUudG90YWwpKSxlLnZhbHVlJiYobS5kZWJ1ZyhcIkN1cnJlbnQgdmFsdWUgc2V0IGZyb20gbWV0YWRhdGFcIixlLnZhbHVlKSxtLnNldC52YWx1ZShlLnZhbHVlKSxtLnNldC5wcm9ncmVzcyhlLnZhbHVlKSl9LHNldHRpbmdzOmZ1bmN0aW9uKCl7Zi50b3RhbCE9PSExJiYobS5kZWJ1ZyhcIkN1cnJlbnQgdG90YWwgc2V0IGluIHNldHRpbmdzXCIsZi50b3RhbCksbS5zZXQudG90YWwoZi50b3RhbCkpLGYudmFsdWUhPT0hMSYmKG0uZGVidWcoXCJDdXJyZW50IHZhbHVlIHNldCBpbiBzZXR0aW5nc1wiLGYudmFsdWUpLG0uc2V0LnZhbHVlKGYudmFsdWUpLG0uc2V0LnByb2dyZXNzKG0udmFsdWUpKSxmLnBlcmNlbnQhPT0hMSYmKG0uZGVidWcoXCJDdXJyZW50IHBlcmNlbnQgc2V0IGluIHNldHRpbmdzXCIsZi5wZXJjZW50KSxtLnNldC5wZXJjZW50KGYucGVyY2VudCkpfX0saW5jcmVtZW50OmZ1bmN0aW9uKGUpe3ZhciB0LG4saTttLmhhcy50b3RhbCgpPyhuPW0uZ2V0LnZhbHVlKCksZT1lfHwxLGk9bitlLHQ9bS5nZXQudG90YWwoKSxtLmRlYnVnKFwiSW5jcmVtZW50aW5nIHZhbHVlXCIsbixpLHQpLGk+dCYmKG0uZGVidWcoXCJWYWx1ZSBjYW5ub3QgaW5jcmVtZW50IGFib3ZlIHRvdGFsXCIsdCksaT10KSk6KG49bS5nZXQucGVyY2VudCgpLGU9ZXx8bS5nZXQucmFuZG9tVmFsdWUoKSxpPW4rZSx0PTEwMCxtLmRlYnVnKFwiSW5jcmVtZW50aW5nIHBlcmNlbnRhZ2UgYnlcIixuLGkpLGk+dCYmKG0uZGVidWcoXCJWYWx1ZSBjYW5ub3QgaW5jcmVtZW50IGFib3ZlIDEwMCBwZXJjZW50XCIpLGk9dCkpLG0uc2V0LnByb2dyZXNzKGkpfSxkZWNyZW1lbnQ6ZnVuY3Rpb24oZSl7dmFyIHQsbixpPW0uZ2V0LnRvdGFsKCk7aT8odD1tLmdldC52YWx1ZSgpLGU9ZXx8MSxuPXQtZSxtLmRlYnVnKFwiRGVjcmVtZW50aW5nIHZhbHVlIGJ5XCIsZSx0KSk6KHQ9bS5nZXQucGVyY2VudCgpLGU9ZXx8bS5nZXQucmFuZG9tVmFsdWUoKSxuPXQtZSxtLmRlYnVnKFwiRGVjcmVtZW50aW5nIHBlcmNlbnRhZ2UgYnlcIixlLHQpKSwwPm4mJihtLmRlYnVnKFwiVmFsdWUgY2Fubm90IGRlY3JlbWVudCBiZWxvdyAwXCIpLG49MCksbS5zZXQucHJvZ3Jlc3Mobil9LGhhczp7dG90YWw6ZnVuY3Rpb24oKXtyZXR1cm4gbS5nZXQudG90YWwoKSE9PSExfX0sZ2V0Ont0ZXh0OmZ1bmN0aW9uKGUpe3ZhciB0PW0udmFsdWV8fDAsbj1tLnRvdGFsfHwwLGk9Uj9tLmdldC5kaXNwbGF5UGVyY2VudCgpOm0ucGVyY2VudHx8MCxvPW0udG90YWw+MD9uLXQ6MTAwLWk7cmV0dXJuIGU9ZXx8XCJcIixlPWUucmVwbGFjZShcInt2YWx1ZX1cIix0KS5yZXBsYWNlKFwie3RvdGFsfVwiLG4pLnJlcGxhY2UoXCJ7bGVmdH1cIixvKS5yZXBsYWNlKFwie3BlcmNlbnR9XCIsaSksbS5kZWJ1ZyhcIkFkZGluZyB2YXJpYWJsZXMgdG8gcHJvZ3Jlc3MgYmFyIHRleHRcIixlKSxlfSxyYW5kb21WYWx1ZTpmdW5jdGlvbigpe3JldHVybiBtLmRlYnVnKFwiR2VuZXJhdGluZyByYW5kb20gaW5jcmVtZW50IHBlcmNlbnRhZ2VcIiksTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpKmYucmFuZG9tLm1heCtmLnJhbmRvbS5taW4pfSxudW1lcmljVmFsdWU6ZnVuY3Rpb24oZSl7cmV0dXJuXCJzdHJpbmdcIj09dHlwZW9mIGU/XCJcIiE9PWUucmVwbGFjZSgvW15cXGQuXS9nLFwiXCIpPytlLnJlcGxhY2UoL1teXFxkLl0vZyxcIlwiKTohMTplfSx0cmFuc2l0aW9uRW5kOmZ1bmN0aW9uKCl7dmFyIGUsdD1uLmNyZWF0ZUVsZW1lbnQoXCJlbGVtZW50XCIpLG89e3RyYW5zaXRpb246XCJ0cmFuc2l0aW9uZW5kXCIsT1RyYW5zaXRpb246XCJvVHJhbnNpdGlvbkVuZFwiLE1velRyYW5zaXRpb246XCJ0cmFuc2l0aW9uZW5kXCIsV2Via2l0VHJhbnNpdGlvbjpcIndlYmtpdFRyYW5zaXRpb25FbmRcIn07Zm9yKGUgaW4gbylpZih0LnN0eWxlW2VdIT09aSlyZXR1cm4gb1tlXX0sZGlzcGxheVBlcmNlbnQ6ZnVuY3Rpb24oKXt2YXIgZT13LndpZHRoKCksdD1DLndpZHRoKCksbj1wYXJzZUludCh3LmNzcyhcIm1pbi13aWR0aFwiKSwxMCksaT1lPm4/ZS90KjEwMDptLnBlcmNlbnQ7cmV0dXJuIGYucHJlY2lzaW9uPjA/TWF0aC5yb3VuZCgxMCppKmYucHJlY2lzaW9uKS8oMTAqZi5wcmVjaXNpb24pOk1hdGgucm91bmQoaSl9LHBlcmNlbnQ6ZnVuY3Rpb24oKXtyZXR1cm4gbS5wZXJjZW50fHwwfSx2YWx1ZTpmdW5jdGlvbigpe3JldHVybiBtLnZhbHVlfHwwfSx0b3RhbDpmdW5jdGlvbigpe3JldHVybiBtLnRvdGFsfHwhMX19LGlzOntzdWNjZXNzOmZ1bmN0aW9uKCl7cmV0dXJuIEMuaGFzQ2xhc3MoZy5zdWNjZXNzKX0sd2FybmluZzpmdW5jdGlvbigpe3JldHVybiBDLmhhc0NsYXNzKGcud2FybmluZyl9LGVycm9yOmZ1bmN0aW9uKCl7cmV0dXJuIEMuaGFzQ2xhc3MoZy5lcnJvcil9LGFjdGl2ZTpmdW5jdGlvbigpe3JldHVybiBDLmhhc0NsYXNzKGcuYWN0aXZlKX0sdmlzaWJsZTpmdW5jdGlvbigpe3JldHVybiBDLmlzKFwiOnZpc2libGVcIil9fSxyZW1vdmU6e3N0YXRlOmZ1bmN0aW9uKCl7bS52ZXJib3NlKFwiUmVtb3Zpbmcgc3RvcmVkIHN0YXRlXCIpLGRlbGV0ZSBtLnRvdGFsLGRlbGV0ZSBtLnBlcmNlbnQsZGVsZXRlIG0udmFsdWV9LGFjdGl2ZTpmdW5jdGlvbigpe20udmVyYm9zZShcIlJlbW92aW5nIGFjdGl2ZSBzdGF0ZVwiKSxDLnJlbW92ZUNsYXNzKGcuYWN0aXZlKX0sc3VjY2VzczpmdW5jdGlvbigpe20udmVyYm9zZShcIlJlbW92aW5nIHN1Y2Nlc3Mgc3RhdGVcIiksQy5yZW1vdmVDbGFzcyhnLnN1Y2Nlc3MpfSx3YXJuaW5nOmZ1bmN0aW9uKCl7bS52ZXJib3NlKFwiUmVtb3Zpbmcgd2FybmluZyBzdGF0ZVwiKSxDLnJlbW92ZUNsYXNzKGcud2FybmluZyl9LGVycm9yOmZ1bmN0aW9uKCl7bS52ZXJib3NlKFwiUmVtb3ZpbmcgZXJyb3Igc3RhdGVcIiksQy5yZW1vdmVDbGFzcyhnLmVycm9yKX19LHNldDp7YmFyV2lkdGg6ZnVuY3Rpb24oZSl7ZT4xMDA/bS5lcnJvcihiLnRvb0hpZ2gsZSk6MD5lP20uZXJyb3IoYi50b29Mb3csZSk6KHcuY3NzKFwid2lkdGhcIixlK1wiJVwiKSxDLmF0dHIoXCJkYXRhLXBlcmNlbnRcIixwYXJzZUludChlLDEwKSkpfSxkdXJhdGlvbjpmdW5jdGlvbihlKXtlPWV8fGYuZHVyYXRpb24sZT1cIm51bWJlclwiPT10eXBlb2YgZT9lK1wibXNcIjplLG0udmVyYm9zZShcIlNldHRpbmcgcHJvZ3Jlc3MgYmFyIHRyYW5zaXRpb24gZHVyYXRpb25cIixlKSx3LmNzcyh7XCJ0cmFuc2l0aW9uLWR1cmF0aW9uXCI6ZX0pfSxwZXJjZW50OmZ1bmN0aW9uKGUpe2U9XCJzdHJpbmdcIj09dHlwZW9mIGU/K2UucmVwbGFjZShcIiVcIixcIlwiKTplLGU9Zi5wcmVjaXNpb24+MD9NYXRoLnJvdW5kKDEwKmUqZi5wcmVjaXNpb24pLygxMCpmLnByZWNpc2lvbik6TWF0aC5yb3VuZChlKSxtLnBlcmNlbnQ9ZSxtLmhhcy50b3RhbCgpfHwobS52YWx1ZT1mLnByZWNpc2lvbj4wP01hdGgucm91bmQoZS8xMDAqbS50b3RhbCoxMCpmLnByZWNpc2lvbikvKDEwKmYucHJlY2lzaW9uKTpNYXRoLnJvdW5kKGUvMTAwKm0udG90YWwqMTApLzEwLGYubGltaXRWYWx1ZXMmJihtLnZhbHVlPW0udmFsdWU+MTAwPzEwMDptLnZhbHVlPDA/MDptLnZhbHVlKSksbS5zZXQuYmFyV2lkdGgoZSksbS5zZXQubGFiZWxJbnRlcnZhbCgpLG0uc2V0LmxhYmVscygpLGYub25DaGFuZ2UuY2FsbChULGUsbS52YWx1ZSxtLnRvdGFsKX0sbGFiZWxJbnRlcnZhbDpmdW5jdGlvbigpe3ZhciBlPWZ1bmN0aW9uKCl7bS52ZXJib3NlKFwiQmFyIGZpbmlzaGVkIGFuaW1hdGluZywgcmVtb3ZpbmcgY29udGludW91cyBsYWJlbCB1cGRhdGVzXCIpLGNsZWFySW50ZXJ2YWwobS5pbnRlcnZhbCksUj0hMSxtLnNldC5sYWJlbHMoKX07Y2xlYXJJbnRlcnZhbChtLmludGVydmFsKSx3Lm9uZShhK3ksZSksbS50aW1lcj1zZXRUaW1lb3V0KGUsZi5kdXJhdGlvbisxMDApLFI9ITAsbS5pbnRlcnZhbD1zZXRJbnRlcnZhbChtLnNldC5sYWJlbHMsZi5mcmFtZXJhdGUpfSxsYWJlbHM6ZnVuY3Rpb24oKXttLnZlcmJvc2UoXCJTZXR0aW5nIGJvdGggYmFyIHByb2dyZXNzIGFuZCBvdXRlciBsYWJlbCB0ZXh0XCIpLG0uc2V0LmJhckxhYmVsKCksbS5zZXQuc3RhdGUoKX0sbGFiZWw6ZnVuY3Rpb24oZSl7ZT1lfHxcIlwiLGUmJihlPW0uZ2V0LnRleHQoZSksbS5kZWJ1ZyhcIlNldHRpbmcgbGFiZWwgdG8gdGV4dFwiLGUpLFMudGV4dChlKSl9LHN0YXRlOmZ1bmN0aW9uKGUpe2U9ZSE9PWk/ZTptLnBlcmNlbnQsMTAwPT09ZT8hZi5hdXRvU3VjY2Vzc3x8bS5pcy53YXJuaW5nKCl8fG0uaXMuZXJyb3IoKT8obS52ZXJib3NlKFwiUmVhY2hlZCAxMDAlIHJlbW92aW5nIGFjdGl2ZSBzdGF0ZVwiKSxtLnJlbW92ZS5hY3RpdmUoKSk6KG0uc2V0LnN1Y2Nlc3MoKSxtLmRlYnVnKFwiQXV0b21hdGljYWxseSB0cmlnZ2VyaW5nIHN1Y2Nlc3MgYXQgMTAwJVwiKSk6ZT4wPyhtLnZlcmJvc2UoXCJBZGp1c3RpbmcgYWN0aXZlIHByb2dyZXNzIGJhciBsYWJlbFwiLGUpLG0uc2V0LmFjdGl2ZSgpKToobS5yZW1vdmUuYWN0aXZlKCksbS5zZXQubGFiZWwoZi50ZXh0LmFjdGl2ZSkpfSxiYXJMYWJlbDpmdW5jdGlvbihlKXtlIT09aT9rLnRleHQobS5nZXQudGV4dChlKSk6XCJyYXRpb1wiPT1mLmxhYmVsJiZtLnRvdGFsPyhtLmRlYnVnKFwiQWRkaW5nIHJhdGlvIHRvIGJhciBsYWJlbFwiKSxrLnRleHQobS5nZXQudGV4dChmLnRleHQucmF0aW8pKSk6XCJwZXJjZW50XCI9PWYubGFiZWwmJihtLmRlYnVnKFwiQWRkaW5nIHBlcmNlbnRhZ2UgdG8gYmFyIGxhYmVsXCIpLGsudGV4dChtLmdldC50ZXh0KGYudGV4dC5wZXJjZW50KSkpfSxhY3RpdmU6ZnVuY3Rpb24oZSl7ZT1lfHxmLnRleHQuYWN0aXZlLG0uZGVidWcoXCJTZXR0aW5nIGFjdGl2ZSBzdGF0ZVwiKSxmLnNob3dBY3Rpdml0eSYmIW0uaXMuYWN0aXZlKCkmJkMuYWRkQ2xhc3MoZy5hY3RpdmUpLG0ucmVtb3ZlLndhcm5pbmcoKSxtLnJlbW92ZS5lcnJvcigpLG0ucmVtb3ZlLnN1Y2Nlc3MoKSxlJiZtLnNldC5sYWJlbChlKSxmLm9uQWN0aXZlLmNhbGwoVCxtLnZhbHVlLG0udG90YWwpfSxzdWNjZXNzOmZ1bmN0aW9uKGUpe2U9ZXx8Zi50ZXh0LnN1Y2Nlc3MsbS5kZWJ1ZyhcIlNldHRpbmcgc3VjY2VzcyBzdGF0ZVwiKSxDLmFkZENsYXNzKGcuc3VjY2VzcyksbS5yZW1vdmUuYWN0aXZlKCksbS5yZW1vdmUud2FybmluZygpLG0ucmVtb3ZlLmVycm9yKCksbS5jb21wbGV0ZSgpLGUmJm0uc2V0LmxhYmVsKGUpLGYub25TdWNjZXNzLmNhbGwoVCxtLnRvdGFsKX0sd2FybmluZzpmdW5jdGlvbihlKXtlPWV8fGYudGV4dC53YXJuaW5nLG0uZGVidWcoXCJTZXR0aW5nIHdhcm5pbmcgc3RhdGVcIiksQy5hZGRDbGFzcyhnLndhcm5pbmcpLG0ucmVtb3ZlLmFjdGl2ZSgpLG0ucmVtb3ZlLnN1Y2Nlc3MoKSxtLnJlbW92ZS5lcnJvcigpLG0uY29tcGxldGUoKSxlJiZtLnNldC5sYWJlbChlKSxmLm9uV2FybmluZy5jYWxsKFQsbS52YWx1ZSxtLnRvdGFsKX0sZXJyb3I6ZnVuY3Rpb24oZSl7ZT1lfHxmLnRleHQuZXJyb3IsbS5kZWJ1ZyhcIlNldHRpbmcgZXJyb3Igc3RhdGVcIiksQy5hZGRDbGFzcyhnLmVycm9yKSxtLnJlbW92ZS5hY3RpdmUoKSxtLnJlbW92ZS5zdWNjZXNzKCksbS5yZW1vdmUud2FybmluZygpLG0uY29tcGxldGUoKSxlJiZtLnNldC5sYWJlbChlKSxmLm9uRXJyb3IuY2FsbChULG0udmFsdWUsbS50b3RhbCl9LHRyYW5zaXRpb25FdmVudDpmdW5jdGlvbigpe2E9bS5nZXQudHJhbnNpdGlvbkVuZCgpfSx0b3RhbDpmdW5jdGlvbihlKXttLnRvdGFsPWV9LHZhbHVlOmZ1bmN0aW9uKGUpe20udmFsdWU9ZX0scHJvZ3Jlc3M6ZnVuY3Rpb24oZSl7dmFyIHQsbj1tLmdldC5udW1lcmljVmFsdWUoZSk7bj09PSExJiZtLmVycm9yKGIubm9uTnVtZXJpYyxlKSxtLmhhcy50b3RhbCgpPyhtLnNldC52YWx1ZShuKSx0PW4vbS50b3RhbCoxMDAsbS5kZWJ1ZyhcIkNhbGN1bGF0aW5nIHBlcmNlbnQgY29tcGxldGUgZnJvbSB0b3RhbFwiLHQpLG0uc2V0LnBlcmNlbnQodCkpOih0PW4sbS5kZWJ1ZyhcIlNldHRpbmcgdmFsdWUgdG8gZXhhY3QgcGVyY2VudGFnZSB2YWx1ZVwiLHQpLG0uc2V0LnBlcmNlbnQodCkpfX0sc2V0dGluZzpmdW5jdGlvbih0LG4pe2lmKG0uZGVidWcoXCJDaGFuZ2luZyBzZXR0aW5nXCIsdCxuKSxlLmlzUGxhaW5PYmplY3QodCkpZS5leHRlbmQoITAsZix0KTtlbHNle2lmKG49PT1pKXJldHVybiBmW3RdO2ZbdF09bn19LGludGVybmFsOmZ1bmN0aW9uKHQsbil7aWYoZS5pc1BsYWluT2JqZWN0KHQpKWUuZXh0ZW5kKCEwLG0sdCk7ZWxzZXtpZihuPT09aSlyZXR1cm4gbVt0XTttW3RdPW59fSxkZWJ1ZzpmdW5jdGlvbigpe2YuZGVidWcmJihmLnBlcmZvcm1hbmNlP20ucGVyZm9ybWFuY2UubG9nKGFyZ3VtZW50cyk6KG0uZGVidWc9RnVuY3Rpb24ucHJvdG90eXBlLmJpbmQuY2FsbChjb25zb2xlLmluZm8sY29uc29sZSxmLm5hbWUrXCI6XCIpLG0uZGVidWcuYXBwbHkoY29uc29sZSxhcmd1bWVudHMpKSl9LHZlcmJvc2U6ZnVuY3Rpb24oKXtmLnZlcmJvc2UmJmYuZGVidWcmJihmLnBlcmZvcm1hbmNlP20ucGVyZm9ybWFuY2UubG9nKGFyZ3VtZW50cyk6KG0udmVyYm9zZT1GdW5jdGlvbi5wcm90b3R5cGUuYmluZC5jYWxsKGNvbnNvbGUuaW5mbyxjb25zb2xlLGYubmFtZStcIjpcIiksbS52ZXJib3NlLmFwcGx5KGNvbnNvbGUsYXJndW1lbnRzKSkpfSxlcnJvcjpmdW5jdGlvbigpe20uZXJyb3I9RnVuY3Rpb24ucHJvdG90eXBlLmJpbmQuY2FsbChjb25zb2xlLmVycm9yLGNvbnNvbGUsZi5uYW1lK1wiOlwiKSxtLmVycm9yLmFwcGx5KGNvbnNvbGUsYXJndW1lbnRzKX0scGVyZm9ybWFuY2U6e2xvZzpmdW5jdGlvbihlKXt2YXIgdCxuLGk7Zi5wZXJmb3JtYW5jZSYmKHQ9KG5ldyBEYXRlKS5nZXRUaW1lKCksaT1zfHx0LG49dC1pLHM9dCxjLnB1c2goe05hbWU6ZVswXSxBcmd1bWVudHM6W10uc2xpY2UuY2FsbChlLDEpfHxcIlwiLEVsZW1lbnQ6VCxcIkV4ZWN1dGlvbiBUaW1lXCI6bn0pKSxjbGVhclRpbWVvdXQobS5wZXJmb3JtYW5jZS50aW1lciksbS5wZXJmb3JtYW5jZS50aW1lcj1zZXRUaW1lb3V0KG0ucGVyZm9ybWFuY2UuZGlzcGxheSw1MDApfSxkaXNwbGF5OmZ1bmN0aW9uKCl7dmFyIHQ9Zi5uYW1lK1wiOlwiLG49MDtzPSExLGNsZWFyVGltZW91dChtLnBlcmZvcm1hbmNlLnRpbWVyKSxlLmVhY2goYyxmdW5jdGlvbihlLHQpe24rPXRbXCJFeGVjdXRpb24gVGltZVwiXX0pLHQrPVwiIFwiK24rXCJtc1wiLHImJih0Kz1cIiAnXCIrcitcIidcIiksKGNvbnNvbGUuZ3JvdXAhPT1pfHxjb25zb2xlLnRhYmxlIT09aSkmJmMubGVuZ3RoPjAmJihjb25zb2xlLmdyb3VwQ29sbGFwc2VkKHQpLGNvbnNvbGUudGFibGU/Y29uc29sZS50YWJsZShjKTplLmVhY2goYyxmdW5jdGlvbihlLHQpe2NvbnNvbGUubG9nKHQuTmFtZStcIjogXCIrdFtcIkV4ZWN1dGlvbiBUaW1lXCJdK1wibXNcIil9KSxjb25zb2xlLmdyb3VwRW5kKCkpLGM9W119fSxpbnZva2U6ZnVuY3Rpb24odCxuLGEpe3ZhciByLHMsYyxsPUE7cmV0dXJuIG49bnx8ZCxhPVR8fGEsXCJzdHJpbmdcIj09dHlwZW9mIHQmJmwhPT1pJiYodD10LnNwbGl0KC9bXFwuIF0vKSxyPXQubGVuZ3RoLTEsZS5lYWNoKHQsZnVuY3Rpb24obixvKXt2YXIgYT1uIT1yP28rdFtuKzFdLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpK3RbbisxXS5zbGljZSgxKTp0O2lmKGUuaXNQbGFpbk9iamVjdChsW2FdKSYmbiE9cilsPWxbYV07ZWxzZXtpZihsW2FdIT09aSlyZXR1cm4gcz1sW2FdLCExO2lmKCFlLmlzUGxhaW5PYmplY3QobFtvXSl8fG49PXIpcmV0dXJuIGxbb10hPT1pPyhzPWxbb10sITEpOihtLmVycm9yKGIubWV0aG9kLHQpLCExKTtsPWxbb119fSkpLGUuaXNGdW5jdGlvbihzKT9jPXMuYXBwbHkoYSxuKTpzIT09aSYmKGM9cyksZS5pc0FycmF5KG8pP28ucHVzaChjKTpvIT09aT9vPVtvLGNdOmMhPT1pJiYobz1jKSxzfX0sdT8oQT09PWkmJm0uaW5pdGlhbGl6ZSgpLG0uaW52b2tlKGwpKTooQSE9PWkmJkEuaW52b2tlKFwiZGVzdHJveVwiKSxtLmluaXRpYWxpemUoKSl9KSxvIT09aT9vOnRoaXN9LGUuZm4ucHJvZ3Jlc3Muc2V0dGluZ3M9e25hbWU6XCJQcm9ncmVzc1wiLG5hbWVzcGFjZTpcInByb2dyZXNzXCIsZGVidWc6ITEsdmVyYm9zZTohMSxwZXJmb3JtYW5jZTohMCxyYW5kb206e21pbjoyLG1heDo1fSxkdXJhdGlvbjozMDAsYXV0b1N1Y2Nlc3M6ITAsc2hvd0FjdGl2aXR5OiEwLGxpbWl0VmFsdWVzOiEwLGxhYmVsOlwicGVyY2VudFwiLHByZWNpc2lvbjowLGZyYW1lcmF0ZToxZTMvMzAscGVyY2VudDohMSx0b3RhbDohMSx2YWx1ZTohMSxvbkNoYW5nZTpmdW5jdGlvbihlLHQsbil7fSxvblN1Y2Nlc3M6ZnVuY3Rpb24oZSl7fSxvbkFjdGl2ZTpmdW5jdGlvbihlLHQpe30sb25FcnJvcjpmdW5jdGlvbihlLHQpe30sb25XYXJuaW5nOmZ1bmN0aW9uKGUsdCl7fSxlcnJvcjp7bWV0aG9kOlwiVGhlIG1ldGhvZCB5b3UgY2FsbGVkIGlzIG5vdCBkZWZpbmVkLlwiLG5vbk51bWVyaWM6XCJQcm9ncmVzcyB2YWx1ZSBpcyBub24gbnVtZXJpY1wiLHRvb0hpZ2g6XCJWYWx1ZSBzcGVjaWZpZWQgaXMgYWJvdmUgMTAwJVwiLHRvb0xvdzpcIlZhbHVlIHNwZWNpZmllZCBpcyBiZWxvdyAwJVwifSxyZWdFeHA6e3ZhcmlhYmxlOi9cXHtcXCQqW0EtejAtOV0rXFx9L2d9LG1ldGFkYXRhOntwZXJjZW50OlwicGVyY2VudFwiLHRvdGFsOlwidG90YWxcIix2YWx1ZTpcInZhbHVlXCJ9LHNlbGVjdG9yOntiYXI6XCI+IC5iYXJcIixsYWJlbDpcIj4gLmxhYmVsXCIscHJvZ3Jlc3M6XCIuYmFyID4gLnByb2dyZXNzXCJ9LHRleHQ6e2FjdGl2ZTohMSxlcnJvcjohMSxzdWNjZXNzOiExLHdhcm5pbmc6ITEscGVyY2VudDpcIntwZXJjZW50fSVcIixyYXRpbzpcInt2YWx1ZX0gb2Yge3RvdGFsfVwifSxjbGFzc05hbWU6e2FjdGl2ZTpcImFjdGl2ZVwiLGVycm9yOlwiZXJyb3JcIixzdWNjZXNzOlwic3VjY2Vzc1wiLHdhcm5pbmc6XCJ3YXJuaW5nXCJ9fX0oalF1ZXJ5LHdpbmRvdyxkb2N1bWVudCksZnVuY3Rpb24oZSx0LG4saSl7XCJ1c2Ugc3RyaWN0XCI7ZS5mbi5yYXRpbmc9ZnVuY3Rpb24odCl7dmFyIG4sbz1lKHRoaXMpLGE9by5zZWxlY3Rvcnx8XCJcIixyPShuZXcgRGF0ZSkuZ2V0VGltZSgpLHM9W10sYz1hcmd1bWVudHNbMF0sbD1cInN0cmluZ1wiPT10eXBlb2YgYyx1PVtdLnNsaWNlLmNhbGwoYXJndW1lbnRzLDEpO3JldHVybiBvLmVhY2goZnVuY3Rpb24oKXt2YXIgZCxtPWUuaXNQbGFpbk9iamVjdCh0KT9lLmV4dGVuZCghMCx7fSxlLmZuLnJhdGluZy5zZXR0aW5ncyx0KTplLmV4dGVuZCh7fSxlLmZuLnJhdGluZy5zZXR0aW5ncyksZj1tLm5hbWVzcGFjZSxnPW0uY2xhc3NOYW1lLHA9bS5tZXRhZGF0YSx2PW0uc2VsZWN0b3IsaD0obS5lcnJvcixcIi5cIitmKSxiPVwibW9kdWxlLVwiK2YseT10aGlzLHg9ZSh0aGlzKS5kYXRhKGIpLEM9ZSh0aGlzKSx3PUMuZmluZCh2Lmljb24pO2Q9e2luaXRpYWxpemU6ZnVuY3Rpb24oKXtkLnZlcmJvc2UoXCJJbml0aWFsaXppbmcgcmF0aW5nIG1vZHVsZVwiLG0pLDA9PT13Lmxlbmd0aCYmZC5zZXR1cC5sYXlvdXQoKSxtLmludGVyYWN0aXZlP2QuZW5hYmxlKCk6ZC5kaXNhYmxlKCksZC5zZXQucmF0aW5nKGQuZ2V0LmluaXRpYWxSYXRpbmcoKSksZC5pbnN0YW50aWF0ZSgpfSxpbnN0YW50aWF0ZTpmdW5jdGlvbigpe2QudmVyYm9zZShcIkluc3RhbnRpYXRpbmcgbW9kdWxlXCIsbSkseD1kLEMuZGF0YShiLGQpfSxkZXN0cm95OmZ1bmN0aW9uKCl7ZC52ZXJib3NlKFwiRGVzdHJveWluZyBwcmV2aW91cyBpbnN0YW5jZVwiLHgpLGQucmVtb3ZlLmV2ZW50cygpLEMucmVtb3ZlRGF0YShiKX0scmVmcmVzaDpmdW5jdGlvbigpe3c9Qy5maW5kKHYuaWNvbil9LHNldHVwOntsYXlvdXQ6ZnVuY3Rpb24oKXt2YXIgdD1kLmdldC5tYXhSYXRpbmcoKSxuPWUuZm4ucmF0aW5nLnNldHRpbmdzLnRlbXBsYXRlcy5pY29uKHQpO2QuZGVidWcoXCJHZW5lcmF0aW5nIGljb24gaHRtbCBkeW5hbWljYWxseVwiKSxDLmh0bWwobiksZC5yZWZyZXNoKCl9fSxldmVudDp7bW91c2VlbnRlcjpmdW5jdGlvbigpe3ZhciB0PWUodGhpcyk7dC5uZXh0QWxsKCkucmVtb3ZlQ2xhc3MoZy5zZWxlY3RlZCksQy5hZGRDbGFzcyhnLnNlbGVjdGVkKSx0LmFkZENsYXNzKGcuc2VsZWN0ZWQpLnByZXZBbGwoKS5hZGRDbGFzcyhnLnNlbGVjdGVkKX0sbW91c2VsZWF2ZTpmdW5jdGlvbigpe0MucmVtb3ZlQ2xhc3MoZy5zZWxlY3RlZCksdy5yZW1vdmVDbGFzcyhnLnNlbGVjdGVkKX0sY2xpY2s6ZnVuY3Rpb24oKXt2YXIgdD1lKHRoaXMpLG49ZC5nZXQucmF0aW5nKCksaT13LmluZGV4KHQpKzEsbz1cImF1dG9cIj09bS5jbGVhcmFibGU/MT09PXcubGVuZ3RoOm0uY2xlYXJhYmxlO28mJm49PWk/ZC5jbGVhclJhdGluZygpOmQuc2V0LnJhdGluZyhpKX19LGNsZWFyUmF0aW5nOmZ1bmN0aW9uKCl7ZC5kZWJ1ZyhcIkNsZWFyaW5nIGN1cnJlbnQgcmF0aW5nXCIpLGQuc2V0LnJhdGluZygwKX0sYmluZDp7ZXZlbnRzOmZ1bmN0aW9uKCl7ZC52ZXJib3NlKFwiQmluZGluZyBldmVudHNcIiksQy5vbihcIm1vdXNlZW50ZXJcIitoLHYuaWNvbixkLmV2ZW50Lm1vdXNlZW50ZXIpLm9uKFwibW91c2VsZWF2ZVwiK2gsdi5pY29uLGQuZXZlbnQubW91c2VsZWF2ZSkub24oXCJjbGlja1wiK2gsdi5pY29uLGQuZXZlbnQuY2xpY2spfX0scmVtb3ZlOntldmVudHM6ZnVuY3Rpb24oKXtkLnZlcmJvc2UoXCJSZW1vdmluZyBldmVudHNcIiksQy5vZmYoaCl9fSxlbmFibGU6ZnVuY3Rpb24oKXtkLmRlYnVnKFwiU2V0dGluZyByYXRpbmcgdG8gaW50ZXJhY3RpdmUgbW9kZVwiKSxkLmJpbmQuZXZlbnRzKCksQy5yZW1vdmVDbGFzcyhnLmRpc2FibGVkKX0sZGlzYWJsZTpmdW5jdGlvbigpe2QuZGVidWcoXCJTZXR0aW5nIHJhdGluZyB0byByZWFkLW9ubHkgbW9kZVwiKSxkLnJlbW92ZS5ldmVudHMoKSxDLmFkZENsYXNzKGcuZGlzYWJsZWQpfSxnZXQ6e2luaXRpYWxSYXRpbmc6ZnVuY3Rpb24oKXtyZXR1cm4gQy5kYXRhKHAucmF0aW5nKSE9PWk/KEMucmVtb3ZlRGF0YShwLnJhdGluZyksQy5kYXRhKHAucmF0aW5nKSk6bS5pbml0aWFsUmF0aW5nfSxtYXhSYXRpbmc6ZnVuY3Rpb24oKXtyZXR1cm4gQy5kYXRhKHAubWF4UmF0aW5nKSE9PWk/KEMucmVtb3ZlRGF0YShwLm1heFJhdGluZyksQy5kYXRhKHAubWF4UmF0aW5nKSk6bS5tYXhSYXRpbmd9LHJhdGluZzpmdW5jdGlvbigpe3ZhciBlPXcuZmlsdGVyKFwiLlwiK2cuYWN0aXZlKS5sZW5ndGg7cmV0dXJuIGQudmVyYm9zZShcIkN1cnJlbnQgcmF0aW5nIHJldHJpZXZlZFwiLGUpLGV9fSxzZXQ6e3JhdGluZzpmdW5jdGlvbihlKXt2YXIgdD1lLTE+PTA/ZS0xOjAsbj13LmVxKHQpO0MucmVtb3ZlQ2xhc3MoZy5zZWxlY3RlZCksdy5yZW1vdmVDbGFzcyhnLnNlbGVjdGVkKS5yZW1vdmVDbGFzcyhnLmFjdGl2ZSksZT4wJiYoZC52ZXJib3NlKFwiU2V0dGluZyBjdXJyZW50IHJhdGluZyB0b1wiLGUpLG4ucHJldkFsbCgpLmFuZFNlbGYoKS5hZGRDbGFzcyhnLmFjdGl2ZSkpLG0ub25SYXRlLmNhbGwoeSxlKX19LHNldHRpbmc6ZnVuY3Rpb24odCxuKXtpZihkLmRlYnVnKFwiQ2hhbmdpbmcgc2V0dGluZ1wiLHQsbiksZS5pc1BsYWluT2JqZWN0KHQpKWUuZXh0ZW5kKCEwLG0sdCk7ZWxzZXtpZihuPT09aSlyZXR1cm4gbVt0XTttW3RdPW59fSxpbnRlcm5hbDpmdW5jdGlvbih0LG4pe2lmKGUuaXNQbGFpbk9iamVjdCh0KSllLmV4dGVuZCghMCxkLHQpO2Vsc2V7aWYobj09PWkpcmV0dXJuIGRbdF07ZFt0XT1ufX0sZGVidWc6ZnVuY3Rpb24oKXttLmRlYnVnJiYobS5wZXJmb3JtYW5jZT9kLnBlcmZvcm1hbmNlLmxvZyhhcmd1bWVudHMpOihkLmRlYnVnPUZ1bmN0aW9uLnByb3RvdHlwZS5iaW5kLmNhbGwoY29uc29sZS5pbmZvLGNvbnNvbGUsbS5uYW1lK1wiOlwiKSxkLmRlYnVnLmFwcGx5KGNvbnNvbGUsYXJndW1lbnRzKSkpfSx2ZXJib3NlOmZ1bmN0aW9uKCl7bS52ZXJib3NlJiZtLmRlYnVnJiYobS5wZXJmb3JtYW5jZT9kLnBlcmZvcm1hbmNlLmxvZyhhcmd1bWVudHMpOihkLnZlcmJvc2U9RnVuY3Rpb24ucHJvdG90eXBlLmJpbmQuY2FsbChjb25zb2xlLmluZm8sY29uc29sZSxtLm5hbWUrXCI6XCIpLGQudmVyYm9zZS5hcHBseShjb25zb2xlLGFyZ3VtZW50cykpKX0sZXJyb3I6ZnVuY3Rpb24oKXtkLmVycm9yPUZ1bmN0aW9uLnByb3RvdHlwZS5iaW5kLmNhbGwoY29uc29sZS5lcnJvcixjb25zb2xlLG0ubmFtZStcIjpcIiksZC5lcnJvci5hcHBseShjb25zb2xlLGFyZ3VtZW50cyl9LHBlcmZvcm1hbmNlOntsb2c6ZnVuY3Rpb24oZSl7dmFyIHQsbixpO20ucGVyZm9ybWFuY2UmJih0PShuZXcgRGF0ZSkuZ2V0VGltZSgpLGk9cnx8dCxuPXQtaSxyPXQscy5wdXNoKHtOYW1lOmVbMF0sQXJndW1lbnRzOltdLnNsaWNlLmNhbGwoZSwxKXx8XCJcIixFbGVtZW50OnksXCJFeGVjdXRpb24gVGltZVwiOm59KSksY2xlYXJUaW1lb3V0KGQucGVyZm9ybWFuY2UudGltZXIpLGQucGVyZm9ybWFuY2UudGltZXI9c2V0VGltZW91dChkLnBlcmZvcm1hbmNlLmRpc3BsYXksNTAwKX0sZGlzcGxheTpmdW5jdGlvbigpe3ZhciB0PW0ubmFtZStcIjpcIixuPTA7cj0hMSxjbGVhclRpbWVvdXQoZC5wZXJmb3JtYW5jZS50aW1lciksZS5lYWNoKHMsZnVuY3Rpb24oZSx0KXtuKz10W1wiRXhlY3V0aW9uIFRpbWVcIl19KSx0Kz1cIiBcIituK1wibXNcIixhJiYodCs9XCIgJ1wiK2ErXCInXCIpLG8ubGVuZ3RoPjEmJih0Kz1cIiAoXCIrby5sZW5ndGgrXCIpXCIpLChjb25zb2xlLmdyb3VwIT09aXx8Y29uc29sZS50YWJsZSE9PWkpJiZzLmxlbmd0aD4wJiYoY29uc29sZS5ncm91cENvbGxhcHNlZCh0KSxjb25zb2xlLnRhYmxlP2NvbnNvbGUudGFibGUocyk6ZS5lYWNoKHMsZnVuY3Rpb24oZSx0KXtjb25zb2xlLmxvZyh0Lk5hbWUrXCI6IFwiK3RbXCJFeGVjdXRpb24gVGltZVwiXStcIm1zXCIpfSksY29uc29sZS5ncm91cEVuZCgpKSxzPVtdfX0saW52b2tlOmZ1bmN0aW9uKHQsbyxhKXt2YXIgcixzLGMsbD14O3JldHVybiBvPW98fHUsYT15fHxhLFwic3RyaW5nXCI9PXR5cGVvZiB0JiZsIT09aSYmKHQ9dC5zcGxpdCgvW1xcLiBdLykscj10Lmxlbmd0aC0xLGUuZWFjaCh0LGZ1bmN0aW9uKG4sbyl7dmFyIGE9biE9cj9vK3RbbisxXS5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSt0W24rMV0uc2xpY2UoMSk6dDtpZihlLmlzUGxhaW5PYmplY3QobFthXSkmJm4hPXIpbD1sW2FdO2Vsc2V7aWYobFthXSE9PWkpcmV0dXJuIHM9bFthXSwhMTtpZighZS5pc1BsYWluT2JqZWN0KGxbb10pfHxuPT1yKXJldHVybiBsW29dIT09aT8ocz1sW29dLCExKTohMTtsPWxbb119fSkpLGUuaXNGdW5jdGlvbihzKT9jPXMuYXBwbHkoYSxvKTpzIT09aSYmKGM9cyksZS5pc0FycmF5KG4pP24ucHVzaChjKTpuIT09aT9uPVtuLGNdOmMhPT1pJiYobj1jKSxzfX0sbD8oeD09PWkmJmQuaW5pdGlhbGl6ZSgpLGQuaW52b2tlKGMpKTooeCE9PWkmJnguaW52b2tlKFwiZGVzdHJveVwiKSxkLmluaXRpYWxpemUoKSl9KSxuIT09aT9uOnRoaXN9LGUuZm4ucmF0aW5nLnNldHRpbmdzPXtuYW1lOlwiUmF0aW5nXCIsbmFtZXNwYWNlOlwicmF0aW5nXCIsZGVidWc6ITEsdmVyYm9zZTohMSxwZXJmb3JtYW5jZTohMCxpbml0aWFsUmF0aW5nOjAsaW50ZXJhY3RpdmU6ITAsbWF4UmF0aW5nOjQsY2xlYXJhYmxlOlwiYXV0b1wiLG9uUmF0ZTpmdW5jdGlvbihlKXt9LGVycm9yOnttZXRob2Q6XCJUaGUgbWV0aG9kIHlvdSBjYWxsZWQgaXMgbm90IGRlZmluZWRcIixub01heGltdW06XCJObyBtYXhpbXVtIHJhdGluZyBzcGVjaWZpZWQuIENhbm5vdCBnZW5lcmF0ZSBIVE1MIGF1dG9tYXRpY2FsbHlcIn0sbWV0YWRhdGE6e3JhdGluZzpcInJhdGluZ1wiLG1heFJhdGluZzpcIm1heFJhdGluZ1wifSxjbGFzc05hbWU6e2FjdGl2ZTpcImFjdGl2ZVwiLGRpc2FibGVkOlwiZGlzYWJsZWRcIixzZWxlY3RlZDpcInNlbGVjdGVkXCIsbG9hZGluZzpcImxvYWRpbmdcIn0sc2VsZWN0b3I6e2ljb246XCIuaWNvblwifSx0ZW1wbGF0ZXM6e2ljb246ZnVuY3Rpb24oZSl7Zm9yKHZhciB0PTEsbj1cIlwiO2U+PXQ7KW4rPSc8aSBjbGFzcz1cImljb25cIj48L2k+Jyx0Kys7cmV0dXJuIG59fX19KGpRdWVyeSx3aW5kb3csZG9jdW1lbnQpLGZ1bmN0aW9uKGUsdCxuLGkpe1widXNlIHN0cmljdFwiO2UuZm4uc2VhcmNoPWZ1bmN0aW9uKG8pe3ZhciBhLHI9ZSh0aGlzKSxzPXIuc2VsZWN0b3J8fFwiXCIsYz0obmV3IERhdGUpLmdldFRpbWUoKSxsPVtdLHU9YXJndW1lbnRzWzBdLGQ9XCJzdHJpbmdcIj09dHlwZW9mIHUsbT1bXS5zbGljZS5jYWxsKGFyZ3VtZW50cywxKTtyZXR1cm4gZSh0aGlzKS5lYWNoKGZ1bmN0aW9uKCl7dmFyIGYsZz1lLmlzUGxhaW5PYmplY3Qobyk/ZS5leHRlbmQoITAse30sZS5mbi5zZWFyY2guc2V0dGluZ3Msbyk6ZS5leHRlbmQoe30sZS5mbi5zZWFyY2guc2V0dGluZ3MpLHA9Zy5jbGFzc05hbWUsdj1nLm1ldGFkYXRhLGg9Zy5yZWdFeHAsYj1nLmZpZWxkcyx5PWcuc2VsZWN0b3IseD1nLmVycm9yLEM9Zy5uYW1lc3BhY2Usdz1cIi5cIitDLGs9QytcIi1tb2R1bGVcIixTPWUodGhpcyksVD1TLmZpbmQoeS5wcm9tcHQpLEE9Uy5maW5kKHkuc2VhcmNoQnV0dG9uKSxSPVMuZmluZCh5LnJlc3VsdHMpLFA9KFMuZmluZCh5LnJlc3VsdCksUy5maW5kKHkuY2F0ZWdvcnkpLHRoaXMpLEU9Uy5kYXRhKGspO2Y9e2luaXRpYWxpemU6ZnVuY3Rpb24oKXtmLnZlcmJvc2UoXCJJbml0aWFsaXppbmcgbW9kdWxlXCIpLGYuZGV0ZXJtaW5lLnNlYXJjaEZpZWxkcygpLGYuYmluZC5ldmVudHMoKSxmLnNldC50eXBlKCksZi5jcmVhdGUucmVzdWx0cygpLGYuaW5zdGFudGlhdGUoKX0saW5zdGFudGlhdGU6ZnVuY3Rpb24oKXtmLnZlcmJvc2UoXCJTdG9yaW5nIGluc3RhbmNlIG9mIG1vZHVsZVwiLGYpLEU9ZixTLmRhdGEoayxmKX0sZGVzdHJveTpmdW5jdGlvbigpe2YudmVyYm9zZShcIkRlc3Ryb3lpbmcgaW5zdGFuY2VcIiksUy5vZmYodykucmVtb3ZlRGF0YShrKX0sYmluZDp7ZXZlbnRzOmZ1bmN0aW9uKCl7Zi52ZXJib3NlKFwiQmluZGluZyBldmVudHMgdG8gc2VhcmNoXCIpLGcuYXV0b21hdGljJiYoUy5vbihmLmdldC5pbnB1dEV2ZW50KCkrdyx5LnByb21wdCxmLmV2ZW50LmlucHV0KSxULmF0dHIoXCJhdXRvY29tcGxldGVcIixcIm9mZlwiKSksUy5vbihcImZvY3VzXCIrdyx5LnByb21wdCxmLmV2ZW50LmZvY3VzKS5vbihcImJsdXJcIit3LHkucHJvbXB0LGYuZXZlbnQuYmx1cikub24oXCJrZXlkb3duXCIrdyx5LnByb21wdCxmLmhhbmRsZUtleWJvYXJkKS5vbihcImNsaWNrXCIrdyx5LnNlYXJjaEJ1dHRvbixmLnF1ZXJ5KS5vbihcIm1vdXNlZG93blwiK3cseS5yZXN1bHRzLGYuZXZlbnQucmVzdWx0Lm1vdXNlZG93bikub24oXCJtb3VzZXVwXCIrdyx5LnJlc3VsdHMsZi5ldmVudC5yZXN1bHQubW91c2V1cCkub24oXCJjbGlja1wiK3cseS5yZXN1bHQsZi5ldmVudC5yZXN1bHQuY2xpY2spfX0sZGV0ZXJtaW5lOntzZWFyY2hGaWVsZHM6ZnVuY3Rpb24oKXtvJiZvLnNlYXJjaEZpZWxkcyE9PWkmJihnLnNlYXJjaEZpZWxkcz1vLnNlYXJjaEZpZWxkcyl9fSxldmVudDp7aW5wdXQ6ZnVuY3Rpb24oKXtjbGVhclRpbWVvdXQoZi50aW1lciksZi50aW1lcj1zZXRUaW1lb3V0KGYucXVlcnksZy5zZWFyY2hEZWxheSl9LGZvY3VzOmZ1bmN0aW9uKCl7Zi5zZXQuZm9jdXMoKSxmLmhhcy5taW5pbXVtQ2hhcmFjdGVycygpJiYoZi5xdWVyeSgpLGYuY2FuLnNob3coKSYmZi5zaG93UmVzdWx0cygpKX0sYmx1cjpmdW5jdGlvbihlKXt2YXIgdD1uLmFjdGl2ZUVsZW1lbnQ9PT10aGlzO3R8fGYucmVzdWx0c0NsaWNrZWR8fChmLmNhbmNlbC5xdWVyeSgpLGYucmVtb3ZlLmZvY3VzKCksZi50aW1lcj1zZXRUaW1lb3V0KGYuaGlkZVJlc3VsdHMsZy5oaWRlRGVsYXkpKX0scmVzdWx0Onttb3VzZWRvd246ZnVuY3Rpb24oKXtmLnJlc3VsdHNDbGlja2VkPSEwfSxtb3VzZXVwOmZ1bmN0aW9uKCl7Zi5yZXN1bHRzQ2xpY2tlZD0hMX0sY2xpY2s6ZnVuY3Rpb24obil7Zi5kZWJ1ZyhcIlNlYXJjaCByZXN1bHQgc2VsZWN0ZWRcIik7dmFyIGk9ZSh0aGlzKSxvPWkuZmluZCh5LnRpdGxlKS5lcSgwKSxhPWkuZmluZChcImFbaHJlZl1cIikuZXEoMCkscj1hLmF0dHIoXCJocmVmXCIpfHwhMSxzPWEuYXR0cihcInRhcmdldFwiKXx8ITEsYz0oby5odG1sKCksby5sZW5ndGg+MD9vLnRleHQoKTohMSksbD1mLmdldC5yZXN1bHRzKCksdT1pLmRhdGEodi5yZXN1bHQpfHxmLmdldC5yZXN1bHQoYyxsKTtyZXR1cm4gZS5pc0Z1bmN0aW9uKGcub25TZWxlY3QpJiZnLm9uU2VsZWN0LmNhbGwoUCx1LGwpPT09ITE/dm9pZCBmLmRlYnVnKFwiQ3VzdG9tIG9uU2VsZWN0IGNhbGxiYWNrIGNhbmNlbGxlZCBkZWZhdWx0IHNlbGVjdCBhY3Rpb25cIik6KGYuaGlkZVJlc3VsdHMoKSxjJiZmLnNldC52YWx1ZShjKSx2b2lkKHImJihmLnZlcmJvc2UoXCJPcGVuaW5nIHNlYXJjaCBsaW5rIGZvdW5kIGluIHJlc3VsdFwiLGEpLFwiX2JsYW5rXCI9PXN8fG4uY3RybEtleT90Lm9wZW4ocik6dC5sb2NhdGlvbi5ocmVmPXIpKSl9fX0saGFuZGxlS2V5Ym9hcmQ6ZnVuY3Rpb24oZSl7dmFyIHQsbj1TLmZpbmQoeS5yZXN1bHQpLGk9Uy5maW5kKHkuY2F0ZWdvcnkpLG89bi5pbmRleChuLmZpbHRlcihcIi5cIitwLmFjdGl2ZSkpLGE9bi5sZW5ndGgscj1lLndoaWNoLHM9e2JhY2tzcGFjZTo4LGVudGVyOjEzLGVzY2FwZToyNyx1cEFycm93OjM4LGRvd25BcnJvdzo0MH07aWYocj09cy5lc2NhcGUmJihmLnZlcmJvc2UoXCJFc2NhcGUga2V5IHByZXNzZWQsIGJsdXJyaW5nIHNlYXJjaCBmaWVsZFwiKSxULnRyaWdnZXIoXCJibHVyXCIpKSxmLmlzLnZpc2libGUoKSlpZihyPT1zLmVudGVyKXtpZihmLnZlcmJvc2UoXCJFbnRlciBrZXkgcHJlc3NlZCwgc2VsZWN0aW5nIGFjdGl2ZSByZXN1bHRcIiksbi5maWx0ZXIoXCIuXCIrcC5hY3RpdmUpLmxlbmd0aD4wKXJldHVybiBmLmV2ZW50LnJlc3VsdC5jbGljay5jYWxsKG4uZmlsdGVyKFwiLlwiK3AuYWN0aXZlKSxlKSxlLnByZXZlbnREZWZhdWx0KCksITF9ZWxzZSByPT1zLnVwQXJyb3c/KGYudmVyYm9zZShcIlVwIGtleSBwcmVzc2VkLCBjaGFuZ2luZyBhY3RpdmUgcmVzdWx0XCIpLHQ9MD5vLTE/bzpvLTEsaS5yZW1vdmVDbGFzcyhwLmFjdGl2ZSksbi5yZW1vdmVDbGFzcyhwLmFjdGl2ZSkuZXEodCkuYWRkQ2xhc3MocC5hY3RpdmUpLmNsb3Nlc3QoaSkuYWRkQ2xhc3MocC5hY3RpdmUpLGUucHJldmVudERlZmF1bHQoKSk6cj09cy5kb3duQXJyb3cmJihmLnZlcmJvc2UoXCJEb3duIGtleSBwcmVzc2VkLCBjaGFuZ2luZyBhY3RpdmUgcmVzdWx0XCIpLHQ9bysxPj1hP286bysxLGkucmVtb3ZlQ2xhc3MocC5hY3RpdmUpLG4ucmVtb3ZlQ2xhc3MocC5hY3RpdmUpLmVxKHQpLmFkZENsYXNzKHAuYWN0aXZlKS5jbG9zZXN0KGkpLmFkZENsYXNzKHAuYWN0aXZlKSxlLnByZXZlbnREZWZhdWx0KCkpO2Vsc2Ugcj09cy5lbnRlciYmKGYudmVyYm9zZShcIkVudGVyIGtleSBwcmVzc2VkLCBleGVjdXRpbmcgcXVlcnlcIiksZi5xdWVyeSgpLGYuc2V0LmJ1dHRvblByZXNzZWQoKSxULm9uZShcImtleXVwXCIsZi5yZW1vdmUuYnV0dG9uRm9jdXMpKX0sc2V0dXA6e2FwaTpmdW5jdGlvbigpe3ZhciBlPXtkZWJ1ZzpnLmRlYnVnLG9uOiExLGNhY2hlOlwibG9jYWxcIixhY3Rpb246XCJzZWFyY2hcIixvbkVycm9yOmYuZXJyb3J9O2YudmVyYm9zZShcIkZpcnN0IHJlcXVlc3QsIGluaXRpYWxpemluZyBBUElcIiksUy5hcGkoZSl9fSxjYW46e3VzZUFQSTpmdW5jdGlvbigpe3JldHVybiBlLmZuLmFwaSE9PWl9LHNob3c6ZnVuY3Rpb24oKXtyZXR1cm4gZi5pcy5mb2N1c2VkKCkmJiFmLmlzLnZpc2libGUoKSYmIWYuaXMuZW1wdHkoKX0sdHJhbnNpdGlvbjpmdW5jdGlvbigpe3JldHVybiBnLnRyYW5zaXRpb24mJmUuZm4udHJhbnNpdGlvbiE9PWkmJlMudHJhbnNpdGlvbihcImlzIHN1cHBvcnRlZFwiKX19LGlzOntlbXB0eTpmdW5jdGlvbigpe3JldHVyblwiXCI9PT1SLmh0bWwoKX0sdmlzaWJsZTpmdW5jdGlvbigpe3JldHVybiBSLmZpbHRlcihcIjp2aXNpYmxlXCIpLmxlbmd0aD4wfSxmb2N1c2VkOmZ1bmN0aW9uKCl7cmV0dXJuIFQuZmlsdGVyKFwiOmZvY3VzXCIpLmxlbmd0aD4wfX0sZ2V0OntpbnB1dEV2ZW50OmZ1bmN0aW9uKCl7dmFyIGU9VFswXSx0PWUhPT1pJiZlLm9uaW5wdXQhPT1pP1wiaW5wdXRcIjplIT09aSYmZS5vbnByb3BlcnR5Y2hhbmdlIT09aT9cInByb3BlcnR5Y2hhbmdlXCI6XCJrZXl1cFwiO3JldHVybiB0fSx2YWx1ZTpmdW5jdGlvbigpe3JldHVybiBULnZhbCgpfSxyZXN1bHRzOmZ1bmN0aW9uKCl7dmFyIGU9Uy5kYXRhKHYucmVzdWx0cyk7cmV0dXJuIGV9LHJlc3VsdDpmdW5jdGlvbih0LG4pe3ZhciBvPVtcInRpdGxlXCIsXCJpZFwiXSxhPSExO3JldHVybiB0PXQhPT1pP3Q6Zi5nZXQudmFsdWUoKSxuPW4hPT1pP246Zi5nZXQucmVzdWx0cygpLFwiY2F0ZWdvcnlcIj09PWcudHlwZT8oZi5kZWJ1ZyhcIkZpbmRpbmcgcmVzdWx0IHRoYXQgbWF0Y2hlc1wiLHQpLGUuZWFjaChuLGZ1bmN0aW9uKG4saSl7cmV0dXJuIGUuaXNBcnJheShpLnJlc3VsdHMpJiYoYT1mLnNlYXJjaC5vYmplY3QodCxpLnJlc3VsdHMsbylbMF0pPyExOnZvaWQgMH0pKTooZi5kZWJ1ZyhcIkZpbmRpbmcgcmVzdWx0IGluIHJlc3VsdHMgb2JqZWN0XCIsdCksYT1mLnNlYXJjaC5vYmplY3QodCxuLG8pWzBdKSxhfHwhMX19LHNldDp7Zm9jdXM6ZnVuY3Rpb24oKXtTLmFkZENsYXNzKHAuZm9jdXMpfSxsb2FkaW5nOmZ1bmN0aW9uKCl7Uy5hZGRDbGFzcyhwLmxvYWRpbmcpfSx2YWx1ZTpmdW5jdGlvbihlKXtmLnZlcmJvc2UoXCJTZXR0aW5nIHNlYXJjaCBpbnB1dCB2YWx1ZVwiLGUpLFQudmFsKGUpfSx0eXBlOmZ1bmN0aW9uKGUpe2U9ZXx8Zy50eXBlLFwiY2F0ZWdvcnlcIj09Zy50eXBlJiZTLmFkZENsYXNzKGcudHlwZSl9LGJ1dHRvblByZXNzZWQ6ZnVuY3Rpb24oKXtBLmFkZENsYXNzKHAucHJlc3NlZCl9fSxyZW1vdmU6e2xvYWRpbmc6ZnVuY3Rpb24oKXtTLnJlbW92ZUNsYXNzKHAubG9hZGluZyl9LGZvY3VzOmZ1bmN0aW9uKCl7Uy5yZW1vdmVDbGFzcyhwLmZvY3VzKX0sYnV0dG9uUHJlc3NlZDpmdW5jdGlvbigpe0EucmVtb3ZlQ2xhc3MocC5wcmVzc2VkKX19LHF1ZXJ5OmZ1bmN0aW9uKCl7dmFyIHQ9Zi5nZXQudmFsdWUoKSxuPWYucmVhZC5jYWNoZSh0KTtmLmhhcy5taW5pbXVtQ2hhcmFjdGVycygpP24/KGYuZGVidWcoXCJSZWFkaW5nIHJlc3VsdCBmcm9tIGNhY2hlXCIsdCksZi5zYXZlLnJlc3VsdHMobi5yZXN1bHRzKSxmLmFkZFJlc3VsdHMobi5odG1sKSxmLmluamVjdC5pZChuLnJlc3VsdHMpKTooZi5kZWJ1ZyhcIlF1ZXJ5aW5nIGZvclwiLHQpLGUuaXNQbGFpbk9iamVjdChnLnNvdXJjZSl8fGUuaXNBcnJheShnLnNvdXJjZSk/Zi5zZWFyY2gubG9jYWwodCk6Zi5jYW4udXNlQVBJKCk/Zi5zZWFyY2gucmVtb3RlKHQpOmYuZXJyb3IoeC5zb3VyY2UpLGcub25TZWFyY2hRdWVyeS5jYWxsKFAsdCkpOmYuaGlkZVJlc3VsdHMoKX0sc2VhcmNoOntsb2NhbDpmdW5jdGlvbihlKXt2YXIgdCxuPWYuc2VhcmNoLm9iamVjdChlLGcuY29udGVudCk7Zi5zZXQubG9hZGluZygpLGYuc2F2ZS5yZXN1bHRzKG4pLGYuZGVidWcoXCJSZXR1cm5lZCBsb2NhbCBzZWFyY2ggcmVzdWx0c1wiLG4pLHQ9Zi5nZW5lcmF0ZVJlc3VsdHMoe3Jlc3VsdHM6bn0pLGYucmVtb3ZlLmxvYWRpbmcoKSxmLmFkZFJlc3VsdHModCksZi5pbmplY3QuaWQobiksZi53cml0ZS5jYWNoZShlLHtodG1sOnQscmVzdWx0czpufSl9LHJlbW90ZTpmdW5jdGlvbih0KXt2YXIgbj17b25TdWNjZXNzOmZ1bmN0aW9uKGUpe2YucGFyc2UucmVzcG9uc2UuY2FsbChQLGUsdCl9LG9uRmFpbHVyZTpmdW5jdGlvbigpe2YuZGlzcGxheU1lc3NhZ2UoeC5zZXJ2ZXJFcnJvcil9LHVybERhdGE6e3F1ZXJ5OnR9fTtTLmFwaShcImdldCByZXF1ZXN0XCIpfHxmLnNldHVwLmFwaSgpLGUuZXh0ZW5kKCEwLG4sZy5hcGlTZXR0aW5ncyksZi5kZWJ1ZyhcIkV4ZWN1dGluZyBzZWFyY2hcIixuKSxmLmNhbmNlbC5xdWVyeSgpLFMuYXBpKFwic2V0dGluZ1wiLG4pLmFwaShcInF1ZXJ5XCIpfSxvYmplY3Q6ZnVuY3Rpb24odCxuLG8pe3ZhciBhPVtdLHI9W10scz10LnRvU3RyaW5nKCkucmVwbGFjZShoLmVzY2FwZSxcIlxcXFwkJlwiKSxjPW5ldyBSZWdFeHAoaC5iZWdpbnNXaXRoK3MsXCJpXCIpLGw9ZnVuY3Rpb24odCxuKXt2YXIgaT0tMT09ZS5pbkFycmF5KG4sYSksbz0tMT09ZS5pbkFycmF5KG4scik7aSYmbyYmdC5wdXNoKG4pfTtyZXR1cm4gbj1ufHxnLnNvdXJjZSxvPW8hPT1pP286Zy5zZWFyY2hGaWVsZHMsZS5pc0FycmF5KG8pfHwobz1bb10pLG49PT1pfHxuPT09ITE/KGYuZXJyb3IoeC5zb3VyY2UpLFtdKTooZS5lYWNoKG8sZnVuY3Rpb24oaSxvKXtlLmVhY2gobixmdW5jdGlvbihlLG4pe3ZhciBpPVwic3RyaW5nXCI9PXR5cGVvZiBuW29dO2kmJigtMSE9PW5bb10uc2VhcmNoKGMpP2woYSxuKTpnLnNlYXJjaEZ1bGxUZXh0JiZmLmZ1enp5U2VhcmNoKHQsbltvXSkmJmwocixuKSl9KX0pLGUubWVyZ2UoYSxyKSl9fSxmdXp6eVNlYXJjaDpmdW5jdGlvbihlLHQpe3ZhciBuPXQubGVuZ3RoLGk9ZS5sZW5ndGg7aWYoXCJzdHJpbmdcIiE9dHlwZW9mIGUpcmV0dXJuITE7aWYoZT1lLnRvTG93ZXJDYXNlKCksdD10LnRvTG93ZXJDYXNlKCksaT5uKXJldHVybiExO2lmKGk9PT1uKXJldHVybiBlPT09dDtlOmZvcih2YXIgbz0wLGE9MDtpPm87bysrKXtmb3IodmFyIHI9ZS5jaGFyQ29kZUF0KG8pO24+YTspaWYodC5jaGFyQ29kZUF0KGErKyk9PT1yKWNvbnRpbnVlIGU7cmV0dXJuITF9cmV0dXJuITB9LHBhcnNlOntyZXNwb25zZTpmdW5jdGlvbihlLHQpe3ZhciBuPWYuZ2VuZXJhdGVSZXN1bHRzKGUpO2YudmVyYm9zZShcIlBhcnNpbmcgc2VydmVyIHJlc3BvbnNlXCIsZSksZSE9PWkmJnQhPT1pJiZlW2IucmVzdWx0c10hPT1pJiYoZi5hZGRSZXN1bHRzKG4pLGYuaW5qZWN0LmlkKGVbYi5yZXN1bHRzXSksZi53cml0ZS5jYWNoZSh0LHtodG1sOm4scmVzdWx0czplW2IucmVzdWx0c119KSxmLnNhdmUucmVzdWx0cyhlW2IucmVzdWx0c10pKX19LGNhbmNlbDp7cXVlcnk6ZnVuY3Rpb24oKXtmLmNhbi51c2VBUEkoKSYmUy5hcGkoXCJhYm9ydFwiKX19LGhhczp7bWluaW11bUNoYXJhY3RlcnM6ZnVuY3Rpb24oKXt2YXIgZT1mLmdldC52YWx1ZSgpLHQ9ZS5sZW5ndGg7cmV0dXJuIHQ+PWcubWluQ2hhcmFjdGVyc319LGNsZWFyOntjYWNoZTpmdW5jdGlvbihlKXt2YXIgdD1TLmRhdGEodi5jYWNoZSk7ZT9lJiZ0JiZ0W2VdJiYoZi5kZWJ1ZyhcIlJlbW92aW5nIHZhbHVlIGZyb20gY2FjaGVcIixlKSxkZWxldGUgdFtlXSxTLmRhdGEodi5jYWNoZSx0KSk6KGYuZGVidWcoXCJDbGVhcmluZyBjYWNoZVwiLGUpLFMucmVtb3ZlRGF0YSh2LmNhY2hlKSl9fSxyZWFkOntjYWNoZTpmdW5jdGlvbihlKXt2YXIgdD1TLmRhdGEodi5jYWNoZSk7cmV0dXJuIGcuY2FjaGU/KGYudmVyYm9zZShcIkNoZWNraW5nIGNhY2hlIGZvciBnZW5lcmF0ZWQgaHRtbCBmb3IgcXVlcnlcIixlKSxcIm9iamVjdFwiPT10eXBlb2YgdCYmdFtlXSE9PWk/dFtlXTohMSk6ITF9fSxjcmVhdGU6e2lkOmZ1bmN0aW9uKGUsdCl7dmFyIG4sbyxhPWUrMTtyZXR1cm4gdCE9PWk/KG49U3RyaW5nLmZyb21DaGFyQ29kZSg5Nyt0KSxvPW4rYSxmLnZlcmJvc2UoXCJDcmVhdGluZyBjYXRlZ29yeSByZXN1bHQgaWRcIixvKSk6KG89YSxmLnZlcmJvc2UoXCJDcmVhdGluZyByZXN1bHQgaWRcIixvKSksb30scmVzdWx0czpmdW5jdGlvbigpezA9PT1SLmxlbmd0aCYmKFI9ZShcIjxkaXYgLz5cIikuYWRkQ2xhc3MocC5yZXN1bHRzKS5hcHBlbmRUbyhTKSl9fSxpbmplY3Q6e3Jlc3VsdDpmdW5jdGlvbihlLHQsbil7Zi52ZXJib3NlKFwiSW5qZWN0aW5nIHJlc3VsdCBpbnRvIHJlc3VsdHNcIik7dmFyIG89biE9PWk/Ui5jaGlsZHJlbigpLmVxKG4pLmNoaWxkcmVuKHkucmVzdWx0KS5lcSh0KTpSLmNoaWxkcmVuKHkucmVzdWx0KS5lcSh0KTtmLnZlcmJvc2UoXCJJbmplY3RpbmcgcmVzdWx0cyBtZXRhZGF0YVwiLG8pLG8uZGF0YSh2LnJlc3VsdCxlKX0saWQ6ZnVuY3Rpb24odCl7Zi5kZWJ1ZyhcIkluamVjdGluZyB1bmlxdWUgaWRzIGludG8gcmVzdWx0c1wiKTt2YXIgbj0wLG89MDtyZXR1cm5cImNhdGVnb3J5XCI9PT1nLnR5cGU/ZS5lYWNoKHQsZnVuY3Rpb24odCxhKXtvPTAsZS5lYWNoKGEucmVzdWx0cyxmdW5jdGlvbihlLHQpe3ZhciByPWEucmVzdWx0c1tlXTtyLmlkPT09aSYmKHIuaWQ9Zi5jcmVhdGUuaWQobyxuKSksZi5pbmplY3QucmVzdWx0KHIsbyxuKSxvKyt9KSxuKyt9KTplLmVhY2godCxmdW5jdGlvbihlLG4pe3ZhciBhPXRbZV07YS5pZD09PWkmJihhLmlkPWYuY3JlYXRlLmlkKG8pKSxmLmluamVjdC5yZXN1bHQoYSxvKSxvKyt9KSx0fX0sc2F2ZTp7cmVzdWx0czpmdW5jdGlvbihlKXtmLnZlcmJvc2UoXCJTYXZpbmcgY3VycmVudCBzZWFyY2ggcmVzdWx0cyB0byBtZXRhZGF0YVwiLGUpLFMuZGF0YSh2LnJlc3VsdHMsZSl9fSx3cml0ZTp7Y2FjaGU6ZnVuY3Rpb24oZSx0KXt2YXIgbj1TLmRhdGEodi5jYWNoZSkhPT1pP1MuZGF0YSh2LmNhY2hlKTp7fTtnLmNhY2hlJiYoZi52ZXJib3NlKFwiV3JpdGluZyBnZW5lcmF0ZWQgaHRtbCB0byBjYWNoZVwiLGUsdCksbltlXT10LFMuZGF0YSh2LmNhY2hlLG4pKX19LGFkZFJlc3VsdHM6ZnVuY3Rpb24odCl7cmV0dXJuIGUuaXNGdW5jdGlvbihnLm9uUmVzdWx0c0FkZCkmJmcub25SZXN1bHRzQWRkLmNhbGwoUix0KT09PSExPyhmLmRlYnVnKFwib25SZXN1bHRzQWRkIGNhbGxiYWNrIGNhbmNlbGxlZCBkZWZhdWx0IGFjdGlvblwiKSwhMSk6KFIuaHRtbCh0KSx2b2lkKGYuY2FuLnNob3coKSYmZi5zaG93UmVzdWx0cygpKSl9LHNob3dSZXN1bHRzOmZ1bmN0aW9uKCl7Zi5pcy52aXNpYmxlKCl8fChmLmNhbi50cmFuc2l0aW9uKCk/KGYuZGVidWcoXCJTaG93aW5nIHJlc3VsdHMgd2l0aCBjc3MgYW5pbWF0aW9uc1wiKSxSLnRyYW5zaXRpb24oe2FuaW1hdGlvbjpnLnRyYW5zaXRpb24rXCIgaW5cIixkZWJ1ZzpnLmRlYnVnLHZlcmJvc2U6Zy52ZXJib3NlLGR1cmF0aW9uOmcuZHVyYXRpb24scXVldWU6ITB9KSk6KGYuZGVidWcoXCJTaG93aW5nIHJlc3VsdHMgd2l0aCBqYXZhc2NyaXB0XCIpLFIuc3RvcCgpLmZhZGVJbihnLmR1cmF0aW9uLGcuZWFzaW5nKSksZy5vblJlc3VsdHNPcGVuLmNhbGwoUikpfSxoaWRlUmVzdWx0czpmdW5jdGlvbigpe2YuaXMudmlzaWJsZSgpJiYoZi5jYW4udHJhbnNpdGlvbigpPyhmLmRlYnVnKFwiSGlkaW5nIHJlc3VsdHMgd2l0aCBjc3MgYW5pbWF0aW9uc1wiKSxSLnRyYW5zaXRpb24oe2FuaW1hdGlvbjpnLnRyYW5zaXRpb24rXCIgb3V0XCIsZGVidWc6Zy5kZWJ1Zyx2ZXJib3NlOmcudmVyYm9zZSxkdXJhdGlvbjpnLmR1cmF0aW9uLHF1ZXVlOiEwfSkpOihmLmRlYnVnKFwiSGlkaW5nIHJlc3VsdHMgd2l0aCBqYXZhc2NyaXB0XCIpLFIuc3RvcCgpLmZhZGVPdXQoZy5kdXJhdGlvbixnLmVhc2luZykpLGcub25SZXN1bHRzQ2xvc2UuY2FsbChSKSl9LGdlbmVyYXRlUmVzdWx0czpmdW5jdGlvbih0KXtmLmRlYnVnKFwiR2VuZXJhdGluZyBodG1sIGZyb20gcmVzcG9uc2VcIix0KTt2YXIgbj1nLnRlbXBsYXRlc1tnLnR5cGVdLGk9ZS5pc1BsYWluT2JqZWN0KHRbYi5yZXN1bHRzXSkmJiFlLmlzRW1wdHlPYmplY3QodFtiLnJlc3VsdHNdKSxvPWUuaXNBcnJheSh0W2IucmVzdWx0c10pJiZ0W2IucmVzdWx0c10ubGVuZ3RoPjAsYT1cIlwiO3JldHVybiBpfHxvPyhnLm1heFJlc3VsdHM+MCYmKGk/XCJzdGFuZGFyZFwiPT1nLnR5cGUmJmYuZXJyb3IoeC5tYXhSZXN1bHRzKTp0W2IucmVzdWx0c109dFtiLnJlc3VsdHNdLnNsaWNlKDAsZy5tYXhSZXN1bHRzKSksZS5pc0Z1bmN0aW9uKG4pP2E9bih0LGIpOmYuZXJyb3IoeC5ub1RlbXBsYXRlLCExKSk6YT1mLmRpc3BsYXlNZXNzYWdlKHgubm9SZXN1bHRzLFwiZW1wdHlcIiksZy5vblJlc3VsdHMuY2FsbChQLHQpLGF9LGRpc3BsYXlNZXNzYWdlOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIHQ9dHx8XCJzdGFuZGFyZFwiLGYuZGVidWcoXCJEaXNwbGF5aW5nIG1lc3NhZ2VcIixlLHQpLGYuYWRkUmVzdWx0cyhnLnRlbXBsYXRlcy5tZXNzYWdlKGUsdCkpLGcudGVtcGxhdGVzLm1lc3NhZ2UoZSx0KX0sc2V0dGluZzpmdW5jdGlvbih0LG4pe2lmKGUuaXNQbGFpbk9iamVjdCh0KSllLmV4dGVuZCghMCxnLHQpO2Vsc2V7aWYobj09PWkpcmV0dXJuIGdbdF07Z1t0XT1ufX0saW50ZXJuYWw6ZnVuY3Rpb24odCxuKXtpZihlLmlzUGxhaW5PYmplY3QodCkpZS5leHRlbmQoITAsZix0KTtlbHNle2lmKG49PT1pKXJldHVybiBmW3RdO2ZbdF09bn19LGRlYnVnOmZ1bmN0aW9uKCl7Zy5kZWJ1ZyYmKGcucGVyZm9ybWFuY2U/Zi5wZXJmb3JtYW5jZS5sb2coYXJndW1lbnRzKTooZi5kZWJ1Zz1GdW5jdGlvbi5wcm90b3R5cGUuYmluZC5jYWxsKGNvbnNvbGUuaW5mbyxjb25zb2xlLGcubmFtZStcIjpcIiksZi5kZWJ1Zy5hcHBseShjb25zb2xlLGFyZ3VtZW50cykpKX0sdmVyYm9zZTpmdW5jdGlvbigpe2cudmVyYm9zZSYmZy5kZWJ1ZyYmKGcucGVyZm9ybWFuY2U/Zi5wZXJmb3JtYW5jZS5sb2coYXJndW1lbnRzKTooZi52ZXJib3NlPUZ1bmN0aW9uLnByb3RvdHlwZS5iaW5kLmNhbGwoY29uc29sZS5pbmZvLGNvbnNvbGUsZy5uYW1lK1wiOlwiKSxmLnZlcmJvc2UuYXBwbHkoY29uc29sZSxhcmd1bWVudHMpKSl9LGVycm9yOmZ1bmN0aW9uKCl7Zi5lcnJvcj1GdW5jdGlvbi5wcm90b3R5cGUuYmluZC5jYWxsKGNvbnNvbGUuZXJyb3IsY29uc29sZSxnLm5hbWUrXCI6XCIpLGYuZXJyb3IuYXBwbHkoY29uc29sZSxhcmd1bWVudHMpfSxwZXJmb3JtYW5jZTp7bG9nOmZ1bmN0aW9uKGUpe3ZhciB0LG4saTtnLnBlcmZvcm1hbmNlJiYodD0obmV3IERhdGUpLmdldFRpbWUoKSxpPWN8fHQsbj10LWksYz10LGwucHVzaCh7TmFtZTplWzBdLEFyZ3VtZW50czpbXS5zbGljZS5jYWxsKGUsMSl8fFwiXCIsRWxlbWVudDpQLFwiRXhlY3V0aW9uIFRpbWVcIjpufSkpLGNsZWFyVGltZW91dChmLnBlcmZvcm1hbmNlLnRpbWVyKSxmLnBlcmZvcm1hbmNlLnRpbWVyPXNldFRpbWVvdXQoZi5wZXJmb3JtYW5jZS5kaXNwbGF5LDUwMCl9LGRpc3BsYXk6ZnVuY3Rpb24oKXtcclxudmFyIHQ9Zy5uYW1lK1wiOlwiLG49MDtjPSExLGNsZWFyVGltZW91dChmLnBlcmZvcm1hbmNlLnRpbWVyKSxlLmVhY2gobCxmdW5jdGlvbihlLHQpe24rPXRbXCJFeGVjdXRpb24gVGltZVwiXX0pLHQrPVwiIFwiK24rXCJtc1wiLHMmJih0Kz1cIiAnXCIrcytcIidcIiksci5sZW5ndGg+MSYmKHQrPVwiIChcIityLmxlbmd0aCtcIilcIiksKGNvbnNvbGUuZ3JvdXAhPT1pfHxjb25zb2xlLnRhYmxlIT09aSkmJmwubGVuZ3RoPjAmJihjb25zb2xlLmdyb3VwQ29sbGFwc2VkKHQpLGNvbnNvbGUudGFibGU/Y29uc29sZS50YWJsZShsKTplLmVhY2gobCxmdW5jdGlvbihlLHQpe2NvbnNvbGUubG9nKHQuTmFtZStcIjogXCIrdFtcIkV4ZWN1dGlvbiBUaW1lXCJdK1wibXNcIil9KSxjb25zb2xlLmdyb3VwRW5kKCkpLGw9W119fSxpbnZva2U6ZnVuY3Rpb24odCxuLG8pe3ZhciByLHMsYyxsPUU7cmV0dXJuIG49bnx8bSxvPVB8fG8sXCJzdHJpbmdcIj09dHlwZW9mIHQmJmwhPT1pJiYodD10LnNwbGl0KC9bXFwuIF0vKSxyPXQubGVuZ3RoLTEsZS5lYWNoKHQsZnVuY3Rpb24obixvKXt2YXIgYT1uIT1yP28rdFtuKzFdLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpK3RbbisxXS5zbGljZSgxKTp0O2lmKGUuaXNQbGFpbk9iamVjdChsW2FdKSYmbiE9cilsPWxbYV07ZWxzZXtpZihsW2FdIT09aSlyZXR1cm4gcz1sW2FdLCExO2lmKCFlLmlzUGxhaW5PYmplY3QobFtvXSl8fG49PXIpcmV0dXJuIGxbb10hPT1pPyhzPWxbb10sITEpOiExO2w9bFtvXX19KSksZS5pc0Z1bmN0aW9uKHMpP2M9cy5hcHBseShvLG4pOnMhPT1pJiYoYz1zKSxlLmlzQXJyYXkoYSk/YS5wdXNoKGMpOmEhPT1pP2E9W2EsY106YyE9PWkmJihhPWMpLHN9fSxkPyhFPT09aSYmZi5pbml0aWFsaXplKCksZi5pbnZva2UodSkpOihFIT09aSYmRS5pbnZva2UoXCJkZXN0cm95XCIpLGYuaW5pdGlhbGl6ZSgpKX0pLGEhPT1pP2E6dGhpc30sZS5mbi5zZWFyY2guc2V0dGluZ3M9e25hbWU6XCJTZWFyY2hcIixuYW1lc3BhY2U6XCJzZWFyY2hcIixkZWJ1ZzohMSx2ZXJib3NlOiExLHBlcmZvcm1hbmNlOiEwLHR5cGU6XCJzdGFuZGFyZFwiLG1pbkNoYXJhY3RlcnM6MSxhcGlTZXR0aW5nczohMSxzb3VyY2U6ITEsc2VhcmNoRmllbGRzOltcInRpdGxlXCIsXCJkZXNjcmlwdGlvblwiXSxkaXNwbGF5RmllbGQ6XCJcIixzZWFyY2hGdWxsVGV4dDohMCxhdXRvbWF0aWM6ITAsaGlkZURlbGF5OjAsc2VhcmNoRGVsYXk6MjAwLG1heFJlc3VsdHM6NyxjYWNoZTohMCx0cmFuc2l0aW9uOlwic2NhbGVcIixkdXJhdGlvbjoyMDAsZWFzaW5nOlwiZWFzZU91dEV4cG9cIixvblNlbGVjdDohMSxvblJlc3VsdHNBZGQ6ITEsb25TZWFyY2hRdWVyeTpmdW5jdGlvbihlKXt9LG9uUmVzdWx0czpmdW5jdGlvbihlKXt9LG9uUmVzdWx0c09wZW46ZnVuY3Rpb24oKXt9LG9uUmVzdWx0c0Nsb3NlOmZ1bmN0aW9uKCl7fSxjbGFzc05hbWU6e2FjdGl2ZTpcImFjdGl2ZVwiLGVtcHR5OlwiZW1wdHlcIixmb2N1czpcImZvY3VzXCIsbG9hZGluZzpcImxvYWRpbmdcIixyZXN1bHRzOlwicmVzdWx0c1wiLHByZXNzZWQ6XCJkb3duXCJ9LGVycm9yOntzb3VyY2U6XCJDYW5ub3Qgc2VhcmNoLiBObyBzb3VyY2UgdXNlZCwgYW5kIFNlbWFudGljIEFQSSBtb2R1bGUgd2FzIG5vdCBpbmNsdWRlZFwiLG5vUmVzdWx0czpcIllvdXIgc2VhcmNoIHJldHVybmVkIG5vIHJlc3VsdHNcIixsb2dnaW5nOlwiRXJyb3IgaW4gZGVidWcgbG9nZ2luZywgZXhpdGluZy5cIixub0VuZHBvaW50OlwiTm8gc2VhcmNoIGVuZHBvaW50IHdhcyBzcGVjaWZpZWRcIixub1RlbXBsYXRlOlwiQSB2YWxpZCB0ZW1wbGF0ZSBuYW1lIHdhcyBub3Qgc3BlY2lmaWVkLlwiLHNlcnZlckVycm9yOlwiVGhlcmUgd2FzIGFuIGlzc3VlIHF1ZXJ5aW5nIHRoZSBzZXJ2ZXIuXCIsbWF4UmVzdWx0czpcIlJlc3VsdHMgbXVzdCBiZSBhbiBhcnJheSB0byB1c2UgbWF4UmVzdWx0cyBzZXR0aW5nXCIsbWV0aG9kOlwiVGhlIG1ldGhvZCB5b3UgY2FsbGVkIGlzIG5vdCBkZWZpbmVkLlwifSxtZXRhZGF0YTp7Y2FjaGU6XCJjYWNoZVwiLHJlc3VsdHM6XCJyZXN1bHRzXCIscmVzdWx0OlwicmVzdWx0XCJ9LHJlZ0V4cDp7ZXNjYXBlOi9bXFwtXFxbXFxdXFwvXFx7XFx9XFwoXFwpXFwqXFwrXFw/XFwuXFxcXFxcXlxcJFxcfF0vZyxiZWdpbnNXaXRoOlwiKD86c3xeKVwifSxmaWVsZHM6e2NhdGVnb3JpZXM6XCJyZXN1bHRzXCIsY2F0ZWdvcnlOYW1lOlwibmFtZVwiLGNhdGVnb3J5UmVzdWx0czpcInJlc3VsdHNcIixkZXNjcmlwdGlvbjpcImRlc2NyaXB0aW9uXCIsaW1hZ2U6XCJpbWFnZVwiLHByaWNlOlwicHJpY2VcIixyZXN1bHRzOlwicmVzdWx0c1wiLHRpdGxlOlwidGl0bGVcIixhY3Rpb246XCJhY3Rpb25cIixhY3Rpb25UZXh0OlwidGV4dFwiLGFjdGlvblVSTDpcInVybFwifSxzZWxlY3Rvcjp7cHJvbXB0OlwiLnByb21wdFwiLHNlYXJjaEJ1dHRvbjpcIi5zZWFyY2guYnV0dG9uXCIscmVzdWx0czpcIi5yZXN1bHRzXCIsY2F0ZWdvcnk6XCIuY2F0ZWdvcnlcIixyZXN1bHQ6XCIucmVzdWx0XCIsdGl0bGU6XCIudGl0bGUsIC5uYW1lXCJ9LHRlbXBsYXRlczp7ZXNjYXBlOmZ1bmN0aW9uKGUpe3ZhciB0PS9bJjw+XCInYF0vZyxuPS9bJjw+XCInYF0vLGk9e1wiJlwiOlwiJmFtcDtcIixcIjxcIjpcIiZsdDtcIixcIj5cIjpcIiZndDtcIiwnXCInOlwiJnF1b3Q7XCIsXCInXCI6XCImI3gyNztcIixcImBcIjpcIiYjeDYwO1wifSxvPWZ1bmN0aW9uKGUpe3JldHVybiBpW2VdfTtyZXR1cm4gbi50ZXN0KGUpP2UucmVwbGFjZSh0LG8pOmV9LG1lc3NhZ2U6ZnVuY3Rpb24oZSx0KXt2YXIgbj1cIlwiO3JldHVybiBlIT09aSYmdCE9PWkmJihuKz0nPGRpdiBjbGFzcz1cIm1lc3NhZ2UgJyt0KydcIj4nLG4rPVwiZW1wdHlcIj09dD8nPGRpdiBjbGFzcz1cImhlYWRlclwiPk5vIFJlc3VsdHM8L2RpdiBjbGFzcz1cImhlYWRlclwiPjxkaXYgY2xhc3M9XCJkZXNjcmlwdGlvblwiPicrZSsnPC9kaXYgY2xhc3M9XCJkZXNjcmlwdGlvblwiPic6JyA8ZGl2IGNsYXNzPVwiZGVzY3JpcHRpb25cIj4nK2UrXCI8L2Rpdj5cIixuKz1cIjwvZGl2PlwiKSxufSxjYXRlZ29yeTpmdW5jdGlvbih0LG4pe3t2YXIgbz1cIlwiO2UuZm4uc2VhcmNoLnNldHRpbmdzLnRlbXBsYXRlcy5lc2NhcGV9cmV0dXJuIHRbbi5jYXRlZ29yeVJlc3VsdHNdIT09aT8oZS5lYWNoKHRbbi5jYXRlZ29yeVJlc3VsdHNdLGZ1bmN0aW9uKGEscil7cltuLnJlc3VsdHNdIT09aSYmci5yZXN1bHRzLmxlbmd0aD4wJiYobys9JzxkaXYgY2xhc3M9XCJjYXRlZ29yeVwiPicscltuLmNhdGVnb3J5TmFtZV0hPT1pJiYobys9JzxkaXYgY2xhc3M9XCJuYW1lXCI+JytyW24uY2F0ZWdvcnlOYW1lXStcIjwvZGl2PlwiKSxlLmVhY2goci5yZXN1bHRzLGZ1bmN0aW9uKGUsYSl7bys9dFtuLnVybF0/JzxhIGNsYXNzPVwicmVzdWx0XCIgaHJlZj1cIicrdFtuLnVybF0rJ1wiPic6JzxhIGNsYXNzPVwicmVzdWx0XCI+JyxhW24uaW1hZ2VdIT09aSYmKG8rPSc8ZGl2IGNsYXNzPVwiaW1hZ2VcIj4gPGltZyBzcmM9XCInK2Fbbi5pbWFnZV0rJ1wiPjwvZGl2PicpLG8rPSc8ZGl2IGNsYXNzPVwiY29udGVudFwiPicsYVtuLnByaWNlXSE9PWkmJihvKz0nPGRpdiBjbGFzcz1cInByaWNlXCI+JythW24ucHJpY2VdK1wiPC9kaXY+XCIpLGFbbi50aXRsZV0hPT1pJiYobys9JzxkaXYgY2xhc3M9XCJ0aXRsZVwiPicrYVtuLnRpdGxlXStcIjwvZGl2PlwiKSxhW24uZGVzY3JpcHRpb25dIT09aSYmKG8rPSc8ZGl2IGNsYXNzPVwiZGVzY3JpcHRpb25cIj4nK2Fbbi5kZXNjcmlwdGlvbl0rXCI8L2Rpdj5cIiksbys9XCI8L2Rpdj5cIixvKz1cIjwvYT5cIn0pLG8rPVwiPC9kaXY+XCIpfSksdFtuLmFjdGlvbl0mJihvKz0nPGEgaHJlZj1cIicrdFtuLmFjdGlvbl1bbi5hY3Rpb25VUkxdKydcIiBjbGFzcz1cImFjdGlvblwiPicrdFtuLmFjdGlvbl1bbi5hY3Rpb25UZXh0XStcIjwvYT5cIiksbyk6ITF9LHN0YW5kYXJkOmZ1bmN0aW9uKHQsbil7dmFyIG89XCJcIjtyZXR1cm4gdFtuLnJlc3VsdHNdIT09aT8oZS5lYWNoKHRbbi5yZXN1bHRzXSxmdW5jdGlvbihlLGEpe28rPXRbbi51cmxdPyc8YSBjbGFzcz1cInJlc3VsdFwiIGhyZWY9XCInK3Rbbi51cmxdKydcIj4nOic8YSBjbGFzcz1cInJlc3VsdFwiPicsYVtuLmltYWdlXSE9PWkmJihvKz0nPGRpdiBjbGFzcz1cImltYWdlXCI+IDxpbWcgc3JjPVwiJythW24uaW1hZ2VdKydcIj48L2Rpdj4nKSxvKz0nPGRpdiBjbGFzcz1cImNvbnRlbnRcIj4nLGFbbi5wcmljZV0hPT1pJiYobys9JzxkaXYgY2xhc3M9XCJwcmljZVwiPicrYVtuLnByaWNlXStcIjwvZGl2PlwiKSxhW24udGl0bGVdIT09aSYmKG8rPSc8ZGl2IGNsYXNzPVwidGl0bGVcIj4nK2Fbbi50aXRsZV0rXCI8L2Rpdj5cIiksYVtuLmRlc2NyaXB0aW9uXSE9PWkmJihvKz0nPGRpdiBjbGFzcz1cImRlc2NyaXB0aW9uXCI+JythW24uZGVzY3JpcHRpb25dK1wiPC9kaXY+XCIpLG8rPVwiPC9kaXY+XCIsbys9XCI8L2E+XCJ9KSx0W24uYWN0aW9uXSYmKG8rPSc8YSBocmVmPVwiJyt0W24uYWN0aW9uXVtuLmFjdGlvblVSTF0rJ1wiIGNsYXNzPVwiYWN0aW9uXCI+Jyt0W24uYWN0aW9uXVtuLmFjdGlvblRleHRdK1wiPC9hPlwiKSxvKTohMX19fX0oalF1ZXJ5LHdpbmRvdyxkb2N1bWVudCksZnVuY3Rpb24oZSx0LG4saSl7XCJ1c2Ugc3RyaWN0XCI7ZS5mbi5zaGFwZT1mdW5jdGlvbihvKXt2YXIgYSxyPWUodGhpcykscz0oZShcImJvZHlcIiksKG5ldyBEYXRlKS5nZXRUaW1lKCkpLGM9W10sbD1hcmd1bWVudHNbMF0sdT1cInN0cmluZ1wiPT10eXBlb2YgbCxkPVtdLnNsaWNlLmNhbGwoYXJndW1lbnRzLDEpLG09dC5yZXF1ZXN0QW5pbWF0aW9uRnJhbWV8fHQubW96UmVxdWVzdEFuaW1hdGlvbkZyYW1lfHx0LndlYmtpdFJlcXVlc3RBbmltYXRpb25GcmFtZXx8dC5tc1JlcXVlc3RBbmltYXRpb25GcmFtZXx8ZnVuY3Rpb24oZSl7c2V0VGltZW91dChlLDApfTtyZXR1cm4gci5lYWNoKGZ1bmN0aW9uKCl7dmFyIHQsZixnLHA9ci5zZWxlY3Rvcnx8XCJcIix2PWUuaXNQbGFpbk9iamVjdChvKT9lLmV4dGVuZCghMCx7fSxlLmZuLnNoYXBlLnNldHRpbmdzLG8pOmUuZXh0ZW5kKHt9LGUuZm4uc2hhcGUuc2V0dGluZ3MpLGg9di5uYW1lc3BhY2UsYj12LnNlbGVjdG9yLHk9di5lcnJvcix4PXYuY2xhc3NOYW1lLEM9XCIuXCIraCx3PVwibW9kdWxlLVwiK2gsaz1lKHRoaXMpLFM9ay5maW5kKGIuc2lkZXMpLFQ9ay5maW5kKGIuc2lkZSksQT0hMSxSPXRoaXMsUD1rLmRhdGEodyk7Zz17aW5pdGlhbGl6ZTpmdW5jdGlvbigpe2cudmVyYm9zZShcIkluaXRpYWxpemluZyBtb2R1bGUgZm9yXCIsUiksZy5zZXQuZGVmYXVsdFNpZGUoKSxnLmluc3RhbnRpYXRlKCl9LGluc3RhbnRpYXRlOmZ1bmN0aW9uKCl7Zy52ZXJib3NlKFwiU3RvcmluZyBpbnN0YW5jZSBvZiBtb2R1bGVcIixnKSxQPWcsay5kYXRhKHcsUCl9LGRlc3Ryb3k6ZnVuY3Rpb24oKXtnLnZlcmJvc2UoXCJEZXN0cm95aW5nIHByZXZpb3VzIG1vZHVsZSBmb3JcIixSKSxrLnJlbW92ZURhdGEodykub2ZmKEMpfSxyZWZyZXNoOmZ1bmN0aW9uKCl7Zy52ZXJib3NlKFwiUmVmcmVzaGluZyBzZWxlY3RvciBjYWNoZSBmb3JcIixSKSxrPWUoUiksUz1lKHRoaXMpLmZpbmQoYi5zaGFwZSksVD1lKHRoaXMpLmZpbmQoYi5zaWRlKX0scmVwYWludDpmdW5jdGlvbigpe2cudmVyYm9zZShcIkZvcmNpbmcgcmVwYWludCBldmVudFwiKTt7dmFyIGU9U1swXXx8bi5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO2Uub2Zmc2V0V2lkdGh9fSxhbmltYXRlOmZ1bmN0aW9uKGUsbil7Zy52ZXJib3NlKFwiQW5pbWF0aW5nIGJveCB3aXRoIHByb3BlcnRpZXNcIixlKSxuPW58fGZ1bmN0aW9uKGUpe2cudmVyYm9zZShcIkV4ZWN1dGluZyBhbmltYXRpb24gY2FsbGJhY2tcIiksZSE9PWkmJmUuc3RvcFByb3BhZ2F0aW9uKCksZy5yZXNldCgpLGcuc2V0LmFjdGl2ZSgpfSx2LmJlZm9yZUNoYW5nZS5jYWxsKGZbMF0pLGcuZ2V0LnRyYW5zaXRpb25FdmVudCgpPyhnLnZlcmJvc2UoXCJTdGFydGluZyBDU1MgYW5pbWF0aW9uXCIpLGsuYWRkQ2xhc3MoeC5hbmltYXRpbmcpLFMuY3NzKGUpLm9uZShnLmdldC50cmFuc2l0aW9uRXZlbnQoKSxuKSxnLnNldC5kdXJhdGlvbih2LmR1cmF0aW9uKSxtKGZ1bmN0aW9uKCl7ay5hZGRDbGFzcyh4LmFuaW1hdGluZyksdC5hZGRDbGFzcyh4LmhpZGRlbil9KSk6bigpfSxxdWV1ZTpmdW5jdGlvbihlKXtnLmRlYnVnKFwiUXVldWVpbmcgYW5pbWF0aW9uIG9mXCIsZSksUy5vbmUoZy5nZXQudHJhbnNpdGlvbkV2ZW50KCksZnVuY3Rpb24oKXtnLmRlYnVnKFwiRXhlY3V0aW5nIHF1ZXVlZCBhbmltYXRpb25cIiksc2V0VGltZW91dChmdW5jdGlvbigpe2suc2hhcGUoZSl9LDApfSl9LHJlc2V0OmZ1bmN0aW9uKCl7Zy52ZXJib3NlKFwiQW5pbWF0aW5nIHN0YXRlcyByZXNldFwiKSxrLnJlbW92ZUNsYXNzKHguYW5pbWF0aW5nKS5hdHRyKFwic3R5bGVcIixcIlwiKS5yZW1vdmVBdHRyKFwic3R5bGVcIiksUy5hdHRyKFwic3R5bGVcIixcIlwiKS5yZW1vdmVBdHRyKFwic3R5bGVcIiksVC5hdHRyKFwic3R5bGVcIixcIlwiKS5yZW1vdmVBdHRyKFwic3R5bGVcIikucmVtb3ZlQ2xhc3MoeC5oaWRkZW4pLGYucmVtb3ZlQ2xhc3MoeC5hbmltYXRpbmcpLmF0dHIoXCJzdHlsZVwiLFwiXCIpLnJlbW92ZUF0dHIoXCJzdHlsZVwiKX0saXM6e2NvbXBsZXRlOmZ1bmN0aW9uKCl7cmV0dXJuIFQuZmlsdGVyKFwiLlwiK3guYWN0aXZlKVswXT09ZlswXX0sYW5pbWF0aW5nOmZ1bmN0aW9uKCl7cmV0dXJuIGsuaGFzQ2xhc3MoeC5hbmltYXRpbmcpfX0sc2V0OntkZWZhdWx0U2lkZTpmdW5jdGlvbigpe3Q9ay5maW5kKFwiLlwiK3YuY2xhc3NOYW1lLmFjdGl2ZSksZj10Lm5leHQoYi5zaWRlKS5sZW5ndGg+MD90Lm5leHQoYi5zaWRlKTprLmZpbmQoYi5zaWRlKS5maXJzdCgpLEE9ITEsZy52ZXJib3NlKFwiQWN0aXZlIHNpZGUgc2V0IHRvXCIsdCksZy52ZXJib3NlKFwiTmV4dCBzaWRlIHNldCB0b1wiLGYpfSxkdXJhdGlvbjpmdW5jdGlvbihlKXtlPWV8fHYuZHVyYXRpb24sZT1cIm51bWJlclwiPT10eXBlb2YgZT9lK1wibXNcIjplLGcudmVyYm9zZShcIlNldHRpbmcgYW5pbWF0aW9uIGR1cmF0aW9uXCIsZSksKHYuZHVyYXRpb258fDA9PT12LmR1cmF0aW9uKSYmUy5hZGQoVCkuY3NzKHtcIi13ZWJraXQtdHJhbnNpdGlvbi1kdXJhdGlvblwiOmUsXCItbW96LXRyYW5zaXRpb24tZHVyYXRpb25cIjplLFwiLW1zLXRyYW5zaXRpb24tZHVyYXRpb25cIjplLFwiLW8tdHJhbnNpdGlvbi1kdXJhdGlvblwiOmUsXCJ0cmFuc2l0aW9uLWR1cmF0aW9uXCI6ZX0pfSxjdXJyZW50U3RhZ2VTaXplOmZ1bmN0aW9uKCl7dmFyIGU9ay5maW5kKFwiLlwiK3YuY2xhc3NOYW1lLmFjdGl2ZSksdD1lLm91dGVyV2lkdGgoITApLG49ZS5vdXRlckhlaWdodCghMCk7ay5jc3Moe3dpZHRoOnQsaGVpZ2h0Om59KX0sc3RhZ2VTaXplOmZ1bmN0aW9uKCl7dmFyIGU9ay5jbG9uZSgpLmFkZENsYXNzKHgubG9hZGluZyksdD1lLmZpbmQoXCIuXCIrdi5jbGFzc05hbWUuYWN0aXZlKSxuPUE/ZS5maW5kKGIuc2lkZSkuZXEoQSk6dC5uZXh0KGIuc2lkZSkubGVuZ3RoPjA/dC5uZXh0KGIuc2lkZSk6ZS5maW5kKGIuc2lkZSkuZmlyc3QoKSxpPXt9O2cuc2V0LmN1cnJlbnRTdGFnZVNpemUoKSx0LnJlbW92ZUNsYXNzKHguYWN0aXZlKSxuLmFkZENsYXNzKHguYWN0aXZlKSxlLmluc2VydEFmdGVyKGspLGk9e3dpZHRoOm4ub3V0ZXJXaWR0aCghMCksaGVpZ2h0Om4ub3V0ZXJIZWlnaHQoITApfSxlLnJlbW92ZSgpLGsuY3NzKGkpLGcudmVyYm9zZShcIlJlc2l6aW5nIHN0YWdlIHRvIGZpdCBuZXcgY29udGVudFwiLGkpfSxuZXh0U2lkZTpmdW5jdGlvbihlKXtBPWUsZj1ULmZpbHRlcihlKSxBPVQuaW5kZXgoZiksMD09PWYubGVuZ3RoJiYoZy5zZXQuZGVmYXVsdFNpZGUoKSxnLmVycm9yKHkuc2lkZSkpLGcudmVyYm9zZShcIk5leHQgc2lkZSBtYW51YWxseSBzZXQgdG9cIixmKX0sYWN0aXZlOmZ1bmN0aW9uKCl7Zy52ZXJib3NlKFwiU2V0dGluZyBuZXcgc2lkZSB0byBhY3RpdmVcIixmKSxULnJlbW92ZUNsYXNzKHguYWN0aXZlKSxmLmFkZENsYXNzKHguYWN0aXZlKSx2Lm9uQ2hhbmdlLmNhbGwoZlswXSksZy5zZXQuZGVmYXVsdFNpZGUoKX19LGZsaXA6e3VwOmZ1bmN0aW9uKCl7cmV0dXJuIWcuaXMuY29tcGxldGUoKXx8Zy5pcy5hbmltYXRpbmcoKXx8di5hbGxvd1JlcGVhdHM/dm9pZChnLmlzLmFuaW1hdGluZygpP2cucXVldWUoXCJmbGlwIHVwXCIpOihnLmRlYnVnKFwiRmxpcHBpbmcgdXBcIixmKSxnLnNldC5zdGFnZVNpemUoKSxnLnN0YWdlLmFib3ZlKCksZy5hbmltYXRlKGcuZ2V0LnRyYW5zZm9ybS51cCgpKSkpOnZvaWQgZy5kZWJ1ZyhcIlNpZGUgYWxyZWFkeSB2aXNpYmxlXCIsZil9LGRvd246ZnVuY3Rpb24oKXtyZXR1cm4hZy5pcy5jb21wbGV0ZSgpfHxnLmlzLmFuaW1hdGluZygpfHx2LmFsbG93UmVwZWF0cz92b2lkKGcuaXMuYW5pbWF0aW5nKCk/Zy5xdWV1ZShcImZsaXAgZG93blwiKTooZy5kZWJ1ZyhcIkZsaXBwaW5nIGRvd25cIixmKSxnLnNldC5zdGFnZVNpemUoKSxnLnN0YWdlLmJlbG93KCksZy5hbmltYXRlKGcuZ2V0LnRyYW5zZm9ybS5kb3duKCkpKSk6dm9pZCBnLmRlYnVnKFwiU2lkZSBhbHJlYWR5IHZpc2libGVcIixmKX0sbGVmdDpmdW5jdGlvbigpe3JldHVybiFnLmlzLmNvbXBsZXRlKCl8fGcuaXMuYW5pbWF0aW5nKCl8fHYuYWxsb3dSZXBlYXRzP3ZvaWQoZy5pcy5hbmltYXRpbmcoKT9nLnF1ZXVlKFwiZmxpcCBsZWZ0XCIpOihnLmRlYnVnKFwiRmxpcHBpbmcgbGVmdFwiLGYpLGcuc2V0LnN0YWdlU2l6ZSgpLGcuc3RhZ2UubGVmdCgpLGcuYW5pbWF0ZShnLmdldC50cmFuc2Zvcm0ubGVmdCgpKSkpOnZvaWQgZy5kZWJ1ZyhcIlNpZGUgYWxyZWFkeSB2aXNpYmxlXCIsZil9LHJpZ2h0OmZ1bmN0aW9uKCl7cmV0dXJuIWcuaXMuY29tcGxldGUoKXx8Zy5pcy5hbmltYXRpbmcoKXx8di5hbGxvd1JlcGVhdHM/dm9pZChnLmlzLmFuaW1hdGluZygpP2cucXVldWUoXCJmbGlwIHJpZ2h0XCIpOihnLmRlYnVnKFwiRmxpcHBpbmcgcmlnaHRcIixmKSxnLnNldC5zdGFnZVNpemUoKSxnLnN0YWdlLnJpZ2h0KCksZy5hbmltYXRlKGcuZ2V0LnRyYW5zZm9ybS5yaWdodCgpKSkpOnZvaWQgZy5kZWJ1ZyhcIlNpZGUgYWxyZWFkeSB2aXNpYmxlXCIsZil9LG92ZXI6ZnVuY3Rpb24oKXtyZXR1cm4hZy5pcy5jb21wbGV0ZSgpfHxnLmlzLmFuaW1hdGluZygpfHx2LmFsbG93UmVwZWF0cz92b2lkKGcuaXMuYW5pbWF0aW5nKCk/Zy5xdWV1ZShcImZsaXAgb3ZlclwiKTooZy5kZWJ1ZyhcIkZsaXBwaW5nIG92ZXJcIixmKSxnLnNldC5zdGFnZVNpemUoKSxnLnN0YWdlLmJlaGluZCgpLGcuYW5pbWF0ZShnLmdldC50cmFuc2Zvcm0ub3ZlcigpKSkpOnZvaWQgZy5kZWJ1ZyhcIlNpZGUgYWxyZWFkeSB2aXNpYmxlXCIsZil9LGJhY2s6ZnVuY3Rpb24oKXtyZXR1cm4hZy5pcy5jb21wbGV0ZSgpfHxnLmlzLmFuaW1hdGluZygpfHx2LmFsbG93UmVwZWF0cz92b2lkKGcuaXMuYW5pbWF0aW5nKCk/Zy5xdWV1ZShcImZsaXAgYmFja1wiKTooZy5kZWJ1ZyhcIkZsaXBwaW5nIGJhY2tcIixmKSxnLnNldC5zdGFnZVNpemUoKSxnLnN0YWdlLmJlaGluZCgpLGcuYW5pbWF0ZShnLmdldC50cmFuc2Zvcm0uYmFjaygpKSkpOnZvaWQgZy5kZWJ1ZyhcIlNpZGUgYWxyZWFkeSB2aXNpYmxlXCIsZil9fSxnZXQ6e3RyYW5zZm9ybTp7dXA6ZnVuY3Rpb24oKXt2YXIgZT17eTotKCh0Lm91dGVySGVpZ2h0KCEwKS1mLm91dGVySGVpZ2h0KCEwKSkvMiksejotKHQub3V0ZXJIZWlnaHQoITApLzIpfTtyZXR1cm57dHJhbnNmb3JtOlwidHJhbnNsYXRlWShcIitlLnkrXCJweCkgdHJhbnNsYXRlWihcIitlLnorXCJweCkgcm90YXRlWCgtOTBkZWcpXCJ9fSxkb3duOmZ1bmN0aW9uKCl7dmFyIGU9e3k6LSgodC5vdXRlckhlaWdodCghMCktZi5vdXRlckhlaWdodCghMCkpLzIpLHo6LSh0Lm91dGVySGVpZ2h0KCEwKS8yKX07cmV0dXJue3RyYW5zZm9ybTpcInRyYW5zbGF0ZVkoXCIrZS55K1wicHgpIHRyYW5zbGF0ZVooXCIrZS56K1wicHgpIHJvdGF0ZVgoOTBkZWcpXCJ9fSxsZWZ0OmZ1bmN0aW9uKCl7dmFyIGU9e3g6LSgodC5vdXRlcldpZHRoKCEwKS1mLm91dGVyV2lkdGgoITApKS8yKSx6Oi0odC5vdXRlcldpZHRoKCEwKS8yKX07cmV0dXJue3RyYW5zZm9ybTpcInRyYW5zbGF0ZVgoXCIrZS54K1wicHgpIHRyYW5zbGF0ZVooXCIrZS56K1wicHgpIHJvdGF0ZVkoOTBkZWcpXCJ9fSxyaWdodDpmdW5jdGlvbigpe3ZhciBlPXt4Oi0oKHQub3V0ZXJXaWR0aCghMCktZi5vdXRlcldpZHRoKCEwKSkvMiksejotKHQub3V0ZXJXaWR0aCghMCkvMil9O3JldHVybnt0cmFuc2Zvcm06XCJ0cmFuc2xhdGVYKFwiK2UueCtcInB4KSB0cmFuc2xhdGVaKFwiK2UueitcInB4KSByb3RhdGVZKC05MGRlZylcIn19LG92ZXI6ZnVuY3Rpb24oKXt2YXIgZT17eDotKCh0Lm91dGVyV2lkdGgoITApLWYub3V0ZXJXaWR0aCghMCkpLzIpfTtyZXR1cm57dHJhbnNmb3JtOlwidHJhbnNsYXRlWChcIitlLngrXCJweCkgcm90YXRlWSgxODBkZWcpXCJ9fSxiYWNrOmZ1bmN0aW9uKCl7dmFyIGU9e3g6LSgodC5vdXRlcldpZHRoKCEwKS1mLm91dGVyV2lkdGgoITApKS8yKX07cmV0dXJue3RyYW5zZm9ybTpcInRyYW5zbGF0ZVgoXCIrZS54K1wicHgpIHJvdGF0ZVkoLTE4MGRlZylcIn19fSx0cmFuc2l0aW9uRXZlbnQ6ZnVuY3Rpb24oKXt2YXIgZSx0PW4uY3JlYXRlRWxlbWVudChcImVsZW1lbnRcIiksbz17dHJhbnNpdGlvbjpcInRyYW5zaXRpb25lbmRcIixPVHJhbnNpdGlvbjpcIm9UcmFuc2l0aW9uRW5kXCIsTW96VHJhbnNpdGlvbjpcInRyYW5zaXRpb25lbmRcIixXZWJraXRUcmFuc2l0aW9uOlwid2Via2l0VHJhbnNpdGlvbkVuZFwifTtmb3IoZSBpbiBvKWlmKHQuc3R5bGVbZV0hPT1pKXJldHVybiBvW2VdfSxuZXh0U2lkZTpmdW5jdGlvbigpe3JldHVybiB0Lm5leHQoYi5zaWRlKS5sZW5ndGg+MD90Lm5leHQoYi5zaWRlKTprLmZpbmQoYi5zaWRlKS5maXJzdCgpfX0sc3RhZ2U6e2Fib3ZlOmZ1bmN0aW9uKCl7dmFyIGU9e29yaWdpbjoodC5vdXRlckhlaWdodCghMCktZi5vdXRlckhlaWdodCghMCkpLzIsZGVwdGg6e2FjdGl2ZTpmLm91dGVySGVpZ2h0KCEwKS8yLG5leHQ6dC5vdXRlckhlaWdodCghMCkvMn19O2cudmVyYm9zZShcIlNldHRpbmcgdGhlIGluaXRpYWwgYW5pbWF0aW9uIHBvc2l0aW9uIGFzIGFib3ZlXCIsZixlKSxTLmNzcyh7dHJhbnNmb3JtOlwidHJhbnNsYXRlWigtXCIrZS5kZXB0aC5hY3RpdmUrXCJweClcIn0pLHQuY3NzKHt0cmFuc2Zvcm06XCJyb3RhdGVZKDBkZWcpIHRyYW5zbGF0ZVooXCIrZS5kZXB0aC5hY3RpdmUrXCJweClcIn0pLGYuYWRkQ2xhc3MoeC5hbmltYXRpbmcpLmNzcyh7dG9wOmUub3JpZ2luK1wicHhcIix0cmFuc2Zvcm06XCJyb3RhdGVYKDkwZGVnKSB0cmFuc2xhdGVaKFwiK2UuZGVwdGgubmV4dCtcInB4KVwifSl9LGJlbG93OmZ1bmN0aW9uKCl7dmFyIGU9e29yaWdpbjoodC5vdXRlckhlaWdodCghMCktZi5vdXRlckhlaWdodCghMCkpLzIsZGVwdGg6e2FjdGl2ZTpmLm91dGVySGVpZ2h0KCEwKS8yLG5leHQ6dC5vdXRlckhlaWdodCghMCkvMn19O2cudmVyYm9zZShcIlNldHRpbmcgdGhlIGluaXRpYWwgYW5pbWF0aW9uIHBvc2l0aW9uIGFzIGJlbG93XCIsZixlKSxTLmNzcyh7dHJhbnNmb3JtOlwidHJhbnNsYXRlWigtXCIrZS5kZXB0aC5hY3RpdmUrXCJweClcIn0pLHQuY3NzKHt0cmFuc2Zvcm06XCJyb3RhdGVZKDBkZWcpIHRyYW5zbGF0ZVooXCIrZS5kZXB0aC5hY3RpdmUrXCJweClcIn0pLGYuYWRkQ2xhc3MoeC5hbmltYXRpbmcpLmNzcyh7dG9wOmUub3JpZ2luK1wicHhcIix0cmFuc2Zvcm06XCJyb3RhdGVYKC05MGRlZykgdHJhbnNsYXRlWihcIitlLmRlcHRoLm5leHQrXCJweClcIn0pfSxsZWZ0OmZ1bmN0aW9uKCl7dmFyIGU9e2FjdGl2ZTp0Lm91dGVyV2lkdGgoITApLG5leHQ6Zi5vdXRlcldpZHRoKCEwKX0sbj17b3JpZ2luOihlLmFjdGl2ZS1lLm5leHQpLzIsZGVwdGg6e2FjdGl2ZTplLm5leHQvMixuZXh0OmUuYWN0aXZlLzJ9fTtnLnZlcmJvc2UoXCJTZXR0aW5nIHRoZSBpbml0aWFsIGFuaW1hdGlvbiBwb3NpdGlvbiBhcyBsZWZ0XCIsZixuKSxTLmNzcyh7dHJhbnNmb3JtOlwidHJhbnNsYXRlWigtXCIrbi5kZXB0aC5hY3RpdmUrXCJweClcIn0pLHQuY3NzKHt0cmFuc2Zvcm06XCJyb3RhdGVZKDBkZWcpIHRyYW5zbGF0ZVooXCIrbi5kZXB0aC5hY3RpdmUrXCJweClcIn0pLGYuYWRkQ2xhc3MoeC5hbmltYXRpbmcpLmNzcyh7bGVmdDpuLm9yaWdpbitcInB4XCIsdHJhbnNmb3JtOlwicm90YXRlWSgtOTBkZWcpIHRyYW5zbGF0ZVooXCIrbi5kZXB0aC5uZXh0K1wicHgpXCJ9KX0scmlnaHQ6ZnVuY3Rpb24oKXt2YXIgZT17YWN0aXZlOnQub3V0ZXJXaWR0aCghMCksbmV4dDpmLm91dGVyV2lkdGgoITApfSxuPXtvcmlnaW46KGUuYWN0aXZlLWUubmV4dCkvMixkZXB0aDp7YWN0aXZlOmUubmV4dC8yLG5leHQ6ZS5hY3RpdmUvMn19O2cudmVyYm9zZShcIlNldHRpbmcgdGhlIGluaXRpYWwgYW5pbWF0aW9uIHBvc2l0aW9uIGFzIGxlZnRcIixmLG4pLFMuY3NzKHt0cmFuc2Zvcm06XCJ0cmFuc2xhdGVaKC1cIituLmRlcHRoLmFjdGl2ZStcInB4KVwifSksdC5jc3Moe3RyYW5zZm9ybTpcInJvdGF0ZVkoMGRlZykgdHJhbnNsYXRlWihcIituLmRlcHRoLmFjdGl2ZStcInB4KVwifSksZi5hZGRDbGFzcyh4LmFuaW1hdGluZykuY3NzKHtsZWZ0Om4ub3JpZ2luK1wicHhcIix0cmFuc2Zvcm06XCJyb3RhdGVZKDkwZGVnKSB0cmFuc2xhdGVaKFwiK24uZGVwdGgubmV4dCtcInB4KVwifSl9LGJlaGluZDpmdW5jdGlvbigpe3ZhciBlPXthY3RpdmU6dC5vdXRlcldpZHRoKCEwKSxuZXh0OmYub3V0ZXJXaWR0aCghMCl9LG49e29yaWdpbjooZS5hY3RpdmUtZS5uZXh0KS8yLGRlcHRoOnthY3RpdmU6ZS5uZXh0LzIsbmV4dDplLmFjdGl2ZS8yfX07Zy52ZXJib3NlKFwiU2V0dGluZyB0aGUgaW5pdGlhbCBhbmltYXRpb24gcG9zaXRpb24gYXMgYmVoaW5kXCIsZixuKSx0LmNzcyh7dHJhbnNmb3JtOlwicm90YXRlWSgwZGVnKVwifSksZi5hZGRDbGFzcyh4LmFuaW1hdGluZykuY3NzKHtsZWZ0Om4ub3JpZ2luK1wicHhcIix0cmFuc2Zvcm06XCJyb3RhdGVZKC0xODBkZWcpXCJ9KX19LHNldHRpbmc6ZnVuY3Rpb24odCxuKXtpZihnLmRlYnVnKFwiQ2hhbmdpbmcgc2V0dGluZ1wiLHQsbiksZS5pc1BsYWluT2JqZWN0KHQpKWUuZXh0ZW5kKCEwLHYsdCk7ZWxzZXtpZihuPT09aSlyZXR1cm4gdlt0XTt2W3RdPW59fSxpbnRlcm5hbDpmdW5jdGlvbih0LG4pe2lmKGUuaXNQbGFpbk9iamVjdCh0KSllLmV4dGVuZCghMCxnLHQpO2Vsc2V7aWYobj09PWkpcmV0dXJuIGdbdF07Z1t0XT1ufX0sZGVidWc6ZnVuY3Rpb24oKXt2LmRlYnVnJiYodi5wZXJmb3JtYW5jZT9nLnBlcmZvcm1hbmNlLmxvZyhhcmd1bWVudHMpOihnLmRlYnVnPUZ1bmN0aW9uLnByb3RvdHlwZS5iaW5kLmNhbGwoY29uc29sZS5pbmZvLGNvbnNvbGUsdi5uYW1lK1wiOlwiKSxnLmRlYnVnLmFwcGx5KGNvbnNvbGUsYXJndW1lbnRzKSkpfSx2ZXJib3NlOmZ1bmN0aW9uKCl7di52ZXJib3NlJiZ2LmRlYnVnJiYodi5wZXJmb3JtYW5jZT9nLnBlcmZvcm1hbmNlLmxvZyhhcmd1bWVudHMpOihnLnZlcmJvc2U9RnVuY3Rpb24ucHJvdG90eXBlLmJpbmQuY2FsbChjb25zb2xlLmluZm8sY29uc29sZSx2Lm5hbWUrXCI6XCIpLGcudmVyYm9zZS5hcHBseShjb25zb2xlLGFyZ3VtZW50cykpKX0sZXJyb3I6ZnVuY3Rpb24oKXtnLmVycm9yPUZ1bmN0aW9uLnByb3RvdHlwZS5iaW5kLmNhbGwoY29uc29sZS5lcnJvcixjb25zb2xlLHYubmFtZStcIjpcIiksZy5lcnJvci5hcHBseShjb25zb2xlLGFyZ3VtZW50cyl9LHBlcmZvcm1hbmNlOntsb2c6ZnVuY3Rpb24oZSl7dmFyIHQsbixpO3YucGVyZm9ybWFuY2UmJih0PShuZXcgRGF0ZSkuZ2V0VGltZSgpLGk9c3x8dCxuPXQtaSxzPXQsYy5wdXNoKHtOYW1lOmVbMF0sQXJndW1lbnRzOltdLnNsaWNlLmNhbGwoZSwxKXx8XCJcIixFbGVtZW50OlIsXCJFeGVjdXRpb24gVGltZVwiOm59KSksY2xlYXJUaW1lb3V0KGcucGVyZm9ybWFuY2UudGltZXIpLGcucGVyZm9ybWFuY2UudGltZXI9c2V0VGltZW91dChnLnBlcmZvcm1hbmNlLmRpc3BsYXksNTAwKX0sZGlzcGxheTpmdW5jdGlvbigpe3ZhciB0PXYubmFtZStcIjpcIixuPTA7cz0hMSxjbGVhclRpbWVvdXQoZy5wZXJmb3JtYW5jZS50aW1lciksZS5lYWNoKGMsZnVuY3Rpb24oZSx0KXtuKz10W1wiRXhlY3V0aW9uIFRpbWVcIl19KSx0Kz1cIiBcIituK1wibXNcIixwJiYodCs9XCIgJ1wiK3ArXCInXCIpLHIubGVuZ3RoPjEmJih0Kz1cIiAoXCIrci5sZW5ndGgrXCIpXCIpLChjb25zb2xlLmdyb3VwIT09aXx8Y29uc29sZS50YWJsZSE9PWkpJiZjLmxlbmd0aD4wJiYoY29uc29sZS5ncm91cENvbGxhcHNlZCh0KSxjb25zb2xlLnRhYmxlP2NvbnNvbGUudGFibGUoYyk6ZS5lYWNoKGMsZnVuY3Rpb24oZSx0KXtjb25zb2xlLmxvZyh0Lk5hbWUrXCI6IFwiK3RbXCJFeGVjdXRpb24gVGltZVwiXStcIm1zXCIpfSksY29uc29sZS5ncm91cEVuZCgpKSxjPVtdfX0saW52b2tlOmZ1bmN0aW9uKHQsbixvKXt2YXIgcixzLGMsbD1QO3JldHVybiBuPW58fGQsbz1SfHxvLFwic3RyaW5nXCI9PXR5cGVvZiB0JiZsIT09aSYmKHQ9dC5zcGxpdCgvW1xcLiBdLykscj10Lmxlbmd0aC0xLGUuZWFjaCh0LGZ1bmN0aW9uKG4sbyl7dmFyIGE9biE9cj9vK3RbbisxXS5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSt0W24rMV0uc2xpY2UoMSk6dDtpZihlLmlzUGxhaW5PYmplY3QobFthXSkmJm4hPXIpbD1sW2FdO2Vsc2V7aWYobFthXSE9PWkpcmV0dXJuIHM9bFthXSwhMTtpZighZS5pc1BsYWluT2JqZWN0KGxbb10pfHxuPT1yKXJldHVybiBsW29dIT09aT8ocz1sW29dLCExKTohMTtsPWxbb119fSkpLGUuaXNGdW5jdGlvbihzKT9jPXMuYXBwbHkobyxuKTpzIT09aSYmKGM9cyksZS5pc0FycmF5KGEpP2EucHVzaChjKTphIT09aT9hPVthLGNdOmMhPT1pJiYoYT1jKSxzfX0sdT8oUD09PWkmJmcuaW5pdGlhbGl6ZSgpLGcuaW52b2tlKGwpKTooUCE9PWkmJlAuaW52b2tlKFwiZGVzdHJveVwiKSxnLmluaXRpYWxpemUoKSl9KSxhIT09aT9hOnRoaXN9LGUuZm4uc2hhcGUuc2V0dGluZ3M9e25hbWU6XCJTaGFwZVwiLGRlYnVnOiExLHZlcmJvc2U6ITEscGVyZm9ybWFuY2U6ITAsbmFtZXNwYWNlOlwic2hhcGVcIixiZWZvcmVDaGFuZ2U6ZnVuY3Rpb24oKXt9LG9uQ2hhbmdlOmZ1bmN0aW9uKCl7fSxhbGxvd1JlcGVhdHM6ITEsZHVyYXRpb246ITEsZXJyb3I6e3NpZGU6XCJZb3UgdHJpZWQgdG8gc3dpdGNoIHRvIGEgc2lkZSB0aGF0IGRvZXMgbm90IGV4aXN0LlwiLG1ldGhvZDpcIlRoZSBtZXRob2QgeW91IGNhbGxlZCBpcyBub3QgZGVmaW5lZFwifSxjbGFzc05hbWU6e2FuaW1hdGluZzpcImFuaW1hdGluZ1wiLGhpZGRlbjpcImhpZGRlblwiLGxvYWRpbmc6XCJsb2FkaW5nXCIsYWN0aXZlOlwiYWN0aXZlXCJ9LHNlbGVjdG9yOntzaWRlczpcIi5zaWRlc1wiLHNpZGU6XCIuc2lkZVwifX19KGpRdWVyeSx3aW5kb3csZG9jdW1lbnQpLGZ1bmN0aW9uKGUsdCxuLGkpe1widXNlIHN0cmljdFwiO2UuZm4uc2lkZWJhcj1mdW5jdGlvbihvKXt2YXIgYSxyPWUodGhpcykscz1lKHQpLGM9ZShuKSxsPWUoXCJodG1sXCIpLHU9ZShcImhlYWRcIiksZD1yLnNlbGVjdG9yfHxcIlwiLG09KG5ldyBEYXRlKS5nZXRUaW1lKCksZj1bXSxnPWFyZ3VtZW50c1swXSxwPVwic3RyaW5nXCI9PXR5cGVvZiBnLHY9W10uc2xpY2UuY2FsbChhcmd1bWVudHMsMSksaD10LnJlcXVlc3RBbmltYXRpb25GcmFtZXx8dC5tb3pSZXF1ZXN0QW5pbWF0aW9uRnJhbWV8fHQud2Via2l0UmVxdWVzdEFuaW1hdGlvbkZyYW1lfHx0Lm1zUmVxdWVzdEFuaW1hdGlvbkZyYW1lfHxmdW5jdGlvbihlKXtzZXRUaW1lb3V0KGUsMCl9O3JldHVybiByLmVhY2goZnVuY3Rpb24oKXt2YXIgcixiLHkseCxDLHcsaz1lLmlzUGxhaW5PYmplY3Qobyk/ZS5leHRlbmQoITAse30sZS5mbi5zaWRlYmFyLnNldHRpbmdzLG8pOmUuZXh0ZW5kKHt9LGUuZm4uc2lkZWJhci5zZXR0aW5ncyksUz1rLnNlbGVjdG9yLFQ9ay5jbGFzc05hbWUsQT1rLm5hbWVzcGFjZSxSPWsucmVnRXhwLFA9ay5lcnJvcixFPVwiLlwiK0EsRj1cIm1vZHVsZS1cIitBLEQ9ZSh0aGlzKSxPPWUoay5jb250ZXh0KSxxPUQuY2hpbGRyZW4oUy5zaWRlYmFyKSxqPU8uY2hpbGRyZW4oUy5maXhlZCksej1PLmNoaWxkcmVuKFMucHVzaGVyKSxJPXRoaXMsTD1ELmRhdGEoRik7dz17aW5pdGlhbGl6ZTpmdW5jdGlvbigpe3cuZGVidWcoXCJJbml0aWFsaXppbmcgc2lkZWJhclwiLG8pLHcuY3JlYXRlLmlkKCksQz13LmdldC50cmFuc2l0aW9uRXZlbnQoKSx3LmlzLmlvcygpJiZ3LnNldC5pb3MoKSxrLmRlbGF5U2V0dXA/aCh3LnNldHVwLmxheW91dCk6dy5zZXR1cC5sYXlvdXQoKSxoKGZ1bmN0aW9uKCl7dy5zZXR1cC5jYWNoZSgpfSksdy5pbnN0YW50aWF0ZSgpfSxpbnN0YW50aWF0ZTpmdW5jdGlvbigpe3cudmVyYm9zZShcIlN0b3JpbmcgaW5zdGFuY2Ugb2YgbW9kdWxlXCIsdyksTD13LEQuZGF0YShGLHcpfSxjcmVhdGU6e2lkOmZ1bmN0aW9uKCl7eT0oTWF0aC5yYW5kb20oKS50b1N0cmluZygxNikrXCIwMDAwMDAwMDBcIikuc3Vic3RyKDIsOCksYj1cIi5cIit5LHcudmVyYm9zZShcIkNyZWF0aW5nIHVuaXF1ZSBpZCBmb3IgZWxlbWVudFwiLHkpfX0sZGVzdHJveTpmdW5jdGlvbigpe3cudmVyYm9zZShcIkRlc3Ryb3lpbmcgcHJldmlvdXMgbW9kdWxlIGZvclwiLEQpLEQub2ZmKEUpLnJlbW92ZURhdGEoRiksdy5pcy5pb3MoKSYmdy5yZW1vdmUuaW9zKCksTy5vZmYoYikscy5vZmYoYiksYy5vZmYoYil9LGV2ZW50OntjbGlja2F3YXk6ZnVuY3Rpb24oZSl7dmFyIHQ9ei5maW5kKGUudGFyZ2V0KS5sZW5ndGg+MHx8ei5pcyhlLnRhcmdldCksbj1PLmlzKGUudGFyZ2V0KTt0JiYody52ZXJib3NlKFwiVXNlciBjbGlja2VkIG9uIGRpbW1lZCBwYWdlXCIpLHcuaGlkZSgpKSxuJiYody52ZXJib3NlKFwiVXNlciBjbGlja2VkIG9uIGRpbW1hYmxlIGNvbnRleHQgKHNjYWxlZCBvdXQgcGFnZSlcIiksdy5oaWRlKCkpfSx0b3VjaDpmdW5jdGlvbihlKXt9LGNvbnRhaW5TY3JvbGw6ZnVuY3Rpb24oZSl7SS5zY3JvbGxUb3A8PTAmJihJLnNjcm9sbFRvcD0xKSxJLnNjcm9sbFRvcCtJLm9mZnNldEhlaWdodD49SS5zY3JvbGxIZWlnaHQmJihJLnNjcm9sbFRvcD1JLnNjcm9sbEhlaWdodC1JLm9mZnNldEhlaWdodC0xKX0sc2Nyb2xsOmZ1bmN0aW9uKHQpezA9PT1lKHQudGFyZ2V0KS5jbG9zZXN0KFMuc2lkZWJhcikubGVuZ3RoJiZ0LnByZXZlbnREZWZhdWx0KCl9fSxiaW5kOntjbGlja2F3YXk6ZnVuY3Rpb24oKXt3LnZlcmJvc2UoXCJBZGRpbmcgY2xpY2thd2F5IGV2ZW50cyB0byBjb250ZXh0XCIsTyksay5jbG9zYWJsZSYmTy5vbihcImNsaWNrXCIrYix3LmV2ZW50LmNsaWNrYXdheSkub24oXCJ0b3VjaGVuZFwiK2Isdy5ldmVudC5jbGlja2F3YXkpfSxzY3JvbGxMb2NrOmZ1bmN0aW9uKCl7ay5zY3JvbGxMb2NrJiYody5kZWJ1ZyhcIkRpc2FibGluZyBwYWdlIHNjcm9sbFwiKSxzLm9uKFwiRE9NTW91c2VTY3JvbGxcIitiLHcuZXZlbnQuc2Nyb2xsKSksdy52ZXJib3NlKFwiQWRkaW5nIGV2ZW50cyB0byBjb250YWluIHNpZGViYXIgc2Nyb2xsXCIpLGMub24oXCJ0b3VjaG1vdmVcIitiLHcuZXZlbnQudG91Y2gpLEQub24oXCJzY3JvbGxcIitFLHcuZXZlbnQuY29udGFpblNjcm9sbCl9fSx1bmJpbmQ6e2NsaWNrYXdheTpmdW5jdGlvbigpe3cudmVyYm9zZShcIlJlbW92aW5nIGNsaWNrYXdheSBldmVudHMgZnJvbSBjb250ZXh0XCIsTyksTy5vZmYoYil9LHNjcm9sbExvY2s6ZnVuY3Rpb24oKXt3LnZlcmJvc2UoXCJSZW1vdmluZyBzY3JvbGwgbG9jayBmcm9tIHBhZ2VcIiksYy5vZmYoYikscy5vZmYoYiksRC5vZmYoXCJzY3JvbGxcIitFKX19LGFkZDp7aW5saW5lQ1NTOmZ1bmN0aW9uKCl7dmFyIHQsbj13LmNhY2hlLndpZHRofHxELm91dGVyV2lkdGgoKSxpPXcuY2FjaGUuaGVpZ2h0fHxELm91dGVySGVpZ2h0KCksbz13LmlzLnJ0bCgpLGE9dy5nZXQuZGlyZWN0aW9uKCkscz17bGVmdDpuLHJpZ2h0Oi1uLHRvcDppLGJvdHRvbTotaX07byYmKHcudmVyYm9zZShcIlJUTCBkZXRlY3RlZCwgZmxpcHBpbmcgd2lkdGhzXCIpLHMubGVmdD0tbixzLnJpZ2h0PW4pLHQ9XCI8c3R5bGU+XCIsXCJsZWZ0XCI9PT1hfHxcInJpZ2h0XCI9PT1hPyh3LmRlYnVnKFwiQWRkaW5nIENTUyBydWxlcyBmb3IgYW5pbWF0aW9uIGRpc3RhbmNlXCIsbiksdCs9XCIgLnVpLnZpc2libGUuXCIrYStcIi5zaWRlYmFyIH4gLmZpeGVkLCAudWkudmlzaWJsZS5cIithK1wiLnNpZGViYXIgfiAucHVzaGVyIHsgICAtd2Via2l0LXRyYW5zZm9ybTogdHJhbnNsYXRlM2QoXCIrc1thXStcInB4LCAwLCAwKTsgICAgICAgICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlM2QoXCIrc1thXStcInB4LCAwLCAwKTsgfVwiKTooXCJ0b3BcIj09PWF8fFwiYm90dG9tXCI9PWEpJiYodCs9XCIgLnVpLnZpc2libGUuXCIrYStcIi5zaWRlYmFyIH4gLmZpeGVkLCAudWkudmlzaWJsZS5cIithK1wiLnNpZGViYXIgfiAucHVzaGVyIHsgICAtd2Via2l0LXRyYW5zZm9ybTogdHJhbnNsYXRlM2QoMCwgXCIrc1thXStcInB4LCAwKTsgICAgICAgICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlM2QoMCwgXCIrc1thXStcInB4LCAwKTsgfVwiKSx3LmlzLmllKCkmJihcImxlZnRcIj09PWF8fFwicmlnaHRcIj09PWE/KHcuZGVidWcoXCJBZGRpbmcgQ1NTIHJ1bGVzIGZvciBhbmltYXRpb24gZGlzdGFuY2VcIixuKSx0Kz1cIiBib2R5LnB1c2hhYmxlID4gLnVpLnZpc2libGUuXCIrYStcIi5zaWRlYmFyIH4gLnB1c2hlcjphZnRlciB7ICAgLXdlYmtpdC10cmFuc2Zvcm06IHRyYW5zbGF0ZTNkKFwiK3NbYV0rXCJweCwgMCwgMCk7ICAgICAgICAgICB0cmFuc2Zvcm06IHRyYW5zbGF0ZTNkKFwiK3NbYV0rXCJweCwgMCwgMCk7IH1cIik6KFwidG9wXCI9PT1hfHxcImJvdHRvbVwiPT1hKSYmKHQrPVwiIGJvZHkucHVzaGFibGUgPiAudWkudmlzaWJsZS5cIithK1wiLnNpZGViYXIgfiAucHVzaGVyOmFmdGVyIHsgICAtd2Via2l0LXRyYW5zZm9ybTogdHJhbnNsYXRlM2QoMCwgXCIrc1thXStcInB4LCAwKTsgICAgICAgICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlM2QoMCwgXCIrc1thXStcInB4LCAwKTsgfVwiKSx0Kz1cIiBib2R5LnB1c2hhYmxlID4gLnVpLnZpc2libGUubGVmdC5zaWRlYmFyIH4gLnVpLnZpc2libGUucmlnaHQuc2lkZWJhciB+IC5wdXNoZXI6YWZ0ZXIsIGJvZHkucHVzaGFibGUgPiAudWkudmlzaWJsZS5yaWdodC5zaWRlYmFyIH4gLnVpLnZpc2libGUubGVmdC5zaWRlYmFyIH4gLnB1c2hlcjphZnRlciB7ICAgLXdlYmtpdC10cmFuc2Zvcm06IHRyYW5zbGF0ZTNkKDBweCwgMCwgMCk7ICAgICAgICAgICB0cmFuc2Zvcm06IHRyYW5zbGF0ZTNkKDBweCwgMCwgMCk7IH1cIiksdCs9XCI8L3N0eWxlPlwiLHI9ZSh0KS5hcHBlbmRUbyh1KSx3LmRlYnVnKFwiQWRkaW5nIHNpemluZyBjc3MgdG8gaGVhZFwiLHIpfX0scmVmcmVzaDpmdW5jdGlvbigpe3cudmVyYm9zZShcIlJlZnJlc2hpbmcgc2VsZWN0b3IgY2FjaGVcIiksTz1lKGsuY29udGV4dCkscT1PLmNoaWxkcmVuKFMuc2lkZWJhciksej1PLmNoaWxkcmVuKFMucHVzaGVyKSxqPU8uY2hpbGRyZW4oUy5maXhlZCksdy5jbGVhci5jYWNoZSgpfSxyZWZyZXNoU2lkZWJhcnM6ZnVuY3Rpb24oKXt3LnZlcmJvc2UoXCJSZWZyZXNoaW5nIG90aGVyIHNpZGViYXJzXCIpLHE9Ty5jaGlsZHJlbihTLnNpZGViYXIpfSxyZXBhaW50OmZ1bmN0aW9uKCl7dy52ZXJib3NlKFwiRm9yY2luZyByZXBhaW50IGV2ZW50XCIpLEkuc3R5bGUuZGlzcGxheT1cIm5vbmVcIjtJLm9mZnNldEhlaWdodDtJLnNjcm9sbFRvcD1JLnNjcm9sbFRvcCxJLnN0eWxlLmRpc3BsYXk9XCJcIn0sc2V0dXA6e2NhY2hlOmZ1bmN0aW9uKCl7dy5jYWNoZT17d2lkdGg6RC5vdXRlcldpZHRoKCksaGVpZ2h0OkQub3V0ZXJIZWlnaHQoKSxydGw6XCJydGxcIj09RC5jc3MoXCJkaXJlY3Rpb25cIil9fSxsYXlvdXQ6ZnVuY3Rpb24oKXswPT09Ty5jaGlsZHJlbihTLnB1c2hlcikubGVuZ3RoJiYody5kZWJ1ZyhcIkFkZGluZyB3cmFwcGVyIGVsZW1lbnQgZm9yIHNpZGViYXJcIiksdy5lcnJvcihQLnB1c2hlciksej1lKCc8ZGl2IGNsYXNzPVwicHVzaGVyXCIgLz4nKSxPLmNoaWxkcmVuKCkubm90KFMub21pdHRlZCkubm90KHEpLndyYXBBbGwoeiksdy5yZWZyZXNoKCkpLCgwPT09RC5uZXh0QWxsKFMucHVzaGVyKS5sZW5ndGh8fEQubmV4dEFsbChTLnB1c2hlcilbMF0hPT16WzBdKSYmKHcuZGVidWcoXCJNb3ZlZCBzaWRlYmFyIHRvIGNvcnJlY3QgcGFyZW50IGVsZW1lbnRcIiksdy5lcnJvcihQLm1vdmVkU2lkZWJhcixJKSxELmRldGFjaCgpLnByZXBlbmRUbyhPKSx3LnJlZnJlc2goKSksdy5jbGVhci5jYWNoZSgpLHcuc2V0LnB1c2hhYmxlKCksdy5zZXQuZGlyZWN0aW9uKCl9fSxhdHRhY2hFdmVudHM6ZnVuY3Rpb24odCxuKXt2YXIgaT1lKHQpO249ZS5pc0Z1bmN0aW9uKHdbbl0pP3dbbl06dy50b2dnbGUsaS5sZW5ndGg+MD8ody5kZWJ1ZyhcIkF0dGFjaGluZyBzaWRlYmFyIGV2ZW50cyB0byBlbGVtZW50XCIsdCxuKSxpLm9uKFwiY2xpY2tcIitFLG4pKTp3LmVycm9yKFAubm90Rm91bmQsdCl9LHNob3c6ZnVuY3Rpb24odCl7aWYodD1lLmlzRnVuY3Rpb24odCk/dDpmdW5jdGlvbigpe30sdy5pcy5oaWRkZW4oKSl7aWYody5yZWZyZXNoU2lkZWJhcnMoKSxrLm92ZXJsYXkmJih3LmVycm9yKFAub3ZlcmxheSksay50cmFuc2l0aW9uPVwib3ZlcmxheVwiKSx3LnJlZnJlc2goKSx3Lm90aGVyc0FjdGl2ZSgpKWlmKHcuZGVidWcoXCJPdGhlciBzaWRlYmFycyBjdXJyZW50bHkgdmlzaWJsZVwiKSxrLmV4Y2x1c2l2ZSl7aWYoXCJvdmVybGF5XCIhPWsudHJhbnNpdGlvbilyZXR1cm4gdm9pZCB3LmhpZGVPdGhlcnMody5zaG93KTt3LmhpZGVPdGhlcnMoKX1lbHNlIGsudHJhbnNpdGlvbj1cIm92ZXJsYXlcIjt3LnB1c2hQYWdlKGZ1bmN0aW9uKCl7dC5jYWxsKEkpLGsub25TaG93LmNhbGwoSSl9KSxrLm9uQ2hhbmdlLmNhbGwoSSksay5vblZpc2libGUuY2FsbChJKX1lbHNlIHcuZGVidWcoXCJTaWRlYmFyIGlzIGFscmVhZHkgdmlzaWJsZVwiKX0saGlkZTpmdW5jdGlvbih0KXt0PWUuaXNGdW5jdGlvbih0KT90OmZ1bmN0aW9uKCl7fSwody5pcy52aXNpYmxlKCl8fHcuaXMuYW5pbWF0aW5nKCkpJiYody5kZWJ1ZyhcIkhpZGluZyBzaWRlYmFyXCIsdCksdy5yZWZyZXNoU2lkZWJhcnMoKSx3LnB1bGxQYWdlKGZ1bmN0aW9uKCl7dC5jYWxsKEkpLGsub25IaWRkZW4uY2FsbChJKX0pLGsub25DaGFuZ2UuY2FsbChJKSxrLm9uSGlkZS5jYWxsKEkpKX0sb3RoZXJzQW5pbWF0aW5nOmZ1bmN0aW9uKCl7cmV0dXJuIHEubm90KEQpLmZpbHRlcihcIi5cIitULmFuaW1hdGluZykubGVuZ3RoPjB9LG90aGVyc1Zpc2libGU6ZnVuY3Rpb24oKXtyZXR1cm4gcS5ub3QoRCkuZmlsdGVyKFwiLlwiK1QudmlzaWJsZSkubGVuZ3RoPjB9LG90aGVyc0FjdGl2ZTpmdW5jdGlvbigpe3JldHVybiB3Lm90aGVyc1Zpc2libGUoKXx8dy5vdGhlcnNBbmltYXRpbmcoKX0saGlkZU90aGVyczpmdW5jdGlvbihlKXt2YXIgdD1xLm5vdChEKS5maWx0ZXIoXCIuXCIrVC52aXNpYmxlKSxuPXQubGVuZ3RoLGk9MDtlPWV8fGZ1bmN0aW9uKCl7fSx0LnNpZGViYXIoXCJoaWRlXCIsZnVuY3Rpb24oKXtpKyssaT09biYmZSgpfSl9LHRvZ2dsZTpmdW5jdGlvbigpe3cudmVyYm9zZShcIkRldGVybWluaW5nIHRvZ2dsZWQgZGlyZWN0aW9uXCIpLHcuaXMuaGlkZGVuKCk/dy5zaG93KCk6dy5oaWRlKCl9LHB1c2hQYWdlOmZ1bmN0aW9uKHQpe3ZhciBuLGksbyxhPXcuZ2V0LnRyYW5zaXRpb24oKSxyPVwib3ZlcmxheVwiPT09YXx8dy5vdGhlcnNBY3RpdmUoKT9EOno7dD1lLmlzRnVuY3Rpb24odCk/dDpmdW5jdGlvbigpe30sXCJzY2FsZSBkb3duXCI9PWsudHJhbnNpdGlvbiYmdy5zY3JvbGxUb1RvcCgpLHcuc2V0LnRyYW5zaXRpb24oYSksdy5yZXBhaW50KCksbj1mdW5jdGlvbigpe3cuYmluZC5jbGlja2F3YXkoKSx3LmFkZC5pbmxpbmVDU1MoKSx3LnNldC5hbmltYXRpbmcoKSx3LnNldC52aXNpYmxlKCl9LGk9ZnVuY3Rpb24oKXt3LnNldC5kaW1tZWQoKX0sbz1mdW5jdGlvbihlKXtlLnRhcmdldD09clswXSYmKHIub2ZmKEMrYixvKSx3LnJlbW92ZS5hbmltYXRpbmcoKSx3LmJpbmQuc2Nyb2xsTG9jaygpLHQuY2FsbChJKSl9LHIub2ZmKEMrYiksci5vbihDK2IsbyksaChuKSxrLmRpbVBhZ2UmJiF3Lm90aGVyc1Zpc2libGUoKSYmaChpKX0scHVsbFBhZ2U6ZnVuY3Rpb24odCl7dmFyIG4saSxvPXcuZ2V0LnRyYW5zaXRpb24oKSxhPVwib3ZlcmxheVwiPT1vfHx3Lm90aGVyc0FjdGl2ZSgpP0Q6ejt0PWUuaXNGdW5jdGlvbih0KT90OmZ1bmN0aW9uKCl7fSx3LnZlcmJvc2UoXCJSZW1vdmluZyBjb250ZXh0IHB1c2ggc3RhdGVcIix3LmdldC5kaXJlY3Rpb24oKSksdy51bmJpbmQuY2xpY2thd2F5KCksdy51bmJpbmQuc2Nyb2xsTG9jaygpLG49ZnVuY3Rpb24oKXt3LnNldC50cmFuc2l0aW9uKG8pLHcuc2V0LmFuaW1hdGluZygpLHcucmVtb3ZlLnZpc2libGUoKSxrLmRpbVBhZ2UmJiF3Lm90aGVyc1Zpc2libGUoKSYmei5yZW1vdmVDbGFzcyhULmRpbW1lZCl9LGk9ZnVuY3Rpb24oZSl7ZS50YXJnZXQ9PWFbMF0mJihhLm9mZihDK2IsaSksdy5yZW1vdmUuYW5pbWF0aW5nKCksdy5yZW1vdmUudHJhbnNpdGlvbigpLHcucmVtb3ZlLmlubGluZUNTUygpLChcInNjYWxlIGRvd25cIj09b3x8ay5yZXR1cm5TY3JvbGwmJncuaXMubW9iaWxlKCkpJiZ3LnNjcm9sbEJhY2soKSx0LmNhbGwoSSkpfSxhLm9mZihDK2IpLGEub24oQytiLGkpLGgobil9LHNjcm9sbFRvVG9wOmZ1bmN0aW9uKCl7dy52ZXJib3NlKFwiU2Nyb2xsaW5nIHRvIHRvcCBvZiBwYWdlIHRvIGF2b2lkIGFuaW1hdGlvbiBpc3N1ZXNcIikseD1lKHQpLnNjcm9sbFRvcCgpLEQuc2Nyb2xsVG9wKDApLHQuc2Nyb2xsVG8oMCwwKX0sc2Nyb2xsQmFjazpmdW5jdGlvbigpe3cudmVyYm9zZShcIlNjcm9sbGluZyBiYWNrIHRvIG9yaWdpbmFsIHBhZ2UgcG9zaXRpb25cIiksdC5zY3JvbGxUbygwLHgpfSxjbGVhcjp7Y2FjaGU6ZnVuY3Rpb24oKXt3LnZlcmJvc2UoXCJDbGVhcmluZyBjYWNoZWQgZGltZW5zaW9uc1wiKSx3LmNhY2hlPXt9fX0sc2V0Ontpb3M6ZnVuY3Rpb24oKXtsLmFkZENsYXNzKFQuaW9zKX0scHVzaGVkOmZ1bmN0aW9uKCl7Ty5hZGRDbGFzcyhULnB1c2hlZCl9LHB1c2hhYmxlOmZ1bmN0aW9uKCl7Ty5hZGRDbGFzcyhULnB1c2hhYmxlKX0sZGltbWVkOmZ1bmN0aW9uKCl7ei5hZGRDbGFzcyhULmRpbW1lZCl9LGFjdGl2ZTpmdW5jdGlvbigpe0QuYWRkQ2xhc3MoVC5hY3RpdmUpfSxhbmltYXRpbmc6ZnVuY3Rpb24oKXtELmFkZENsYXNzKFQuYW5pbWF0aW5nKX0sdHJhbnNpdGlvbjpmdW5jdGlvbihlKXtlPWV8fHcuZ2V0LnRyYW5zaXRpb24oKSxELmFkZENsYXNzKGUpfSxkaXJlY3Rpb246ZnVuY3Rpb24oZSl7ZT1lfHx3LmdldC5kaXJlY3Rpb24oKSxELmFkZENsYXNzKFRbZV0pfSx2aXNpYmxlOmZ1bmN0aW9uKCl7RC5hZGRDbGFzcyhULnZpc2libGUpfSxvdmVybGF5OmZ1bmN0aW9uKCl7RC5hZGRDbGFzcyhULm92ZXJsYXkpfX0scmVtb3ZlOntpbmxpbmVDU1M6ZnVuY3Rpb24oKXt3LmRlYnVnKFwiUmVtb3ZpbmcgaW5saW5lIGNzcyBzdHlsZXNcIixyKSxyJiZyLmxlbmd0aD4wJiZyLnJlbW92ZSgpfSxpb3M6ZnVuY3Rpb24oKXtsLnJlbW92ZUNsYXNzKFQuaW9zKX0scHVzaGVkOmZ1bmN0aW9uKCl7Ty5yZW1vdmVDbGFzcyhULnB1c2hlZCl9LHB1c2hhYmxlOmZ1bmN0aW9uKCl7Ty5yZW1vdmVDbGFzcyhULnB1c2hhYmxlKX0sYWN0aXZlOmZ1bmN0aW9uKCl7RC5yZW1vdmVDbGFzcyhULmFjdGl2ZSl9LGFuaW1hdGluZzpmdW5jdGlvbigpe0QucmVtb3ZlQ2xhc3MoVC5hbmltYXRpbmcpfSx0cmFuc2l0aW9uOmZ1bmN0aW9uKGUpe2U9ZXx8dy5nZXQudHJhbnNpdGlvbigpLEQucmVtb3ZlQ2xhc3MoZSl9LGRpcmVjdGlvbjpmdW5jdGlvbihlKXtlPWV8fHcuZ2V0LmRpcmVjdGlvbigpLEQucmVtb3ZlQ2xhc3MoVFtlXSl9LHZpc2libGU6ZnVuY3Rpb24oKXtELnJlbW92ZUNsYXNzKFQudmlzaWJsZSl9LG92ZXJsYXk6ZnVuY3Rpb24oKXtELnJlbW92ZUNsYXNzKFQub3ZlcmxheSl9fSxnZXQ6e2RpcmVjdGlvbjpmdW5jdGlvbigpe3JldHVybiBELmhhc0NsYXNzKFQudG9wKT9ULnRvcDpELmhhc0NsYXNzKFQucmlnaHQpP1QucmlnaHQ6RC5oYXNDbGFzcyhULmJvdHRvbSk/VC5ib3R0b206VC5sZWZ0fSx0cmFuc2l0aW9uOmZ1bmN0aW9uKCl7dmFyIGUsdD13LmdldC5kaXJlY3Rpb24oKTtyZXR1cm4gZT13LmlzLm1vYmlsZSgpP1wiYXV0b1wiPT1rLm1vYmlsZVRyYW5zaXRpb24/ay5kZWZhdWx0VHJhbnNpdGlvbi5tb2JpbGVbdF06ay5tb2JpbGVUcmFuc2l0aW9uOlwiYXV0b1wiPT1rLnRyYW5zaXRpb24/ay5kZWZhdWx0VHJhbnNpdGlvbi5jb21wdXRlclt0XTprLnRyYW5zaXRpb24sdy52ZXJib3NlKFwiRGV0ZXJtaW5lZCB0cmFuc2l0aW9uXCIsZSksZX0sdHJhbnNpdGlvbkV2ZW50OmZ1bmN0aW9uKCl7dmFyIGUsdD1uLmNyZWF0ZUVsZW1lbnQoXCJlbGVtZW50XCIpLG89e3RyYW5zaXRpb246XCJ0cmFuc2l0aW9uZW5kXCIsT1RyYW5zaXRpb246XCJvVHJhbnNpdGlvbkVuZFwiLE1velRyYW5zaXRpb246XCJ0cmFuc2l0aW9uZW5kXCIsV2Via2l0VHJhbnNpdGlvbjpcIndlYmtpdFRyYW5zaXRpb25FbmRcIn07Zm9yKGUgaW4gbylpZih0LnN0eWxlW2VdIT09aSlyZXR1cm4gb1tlXX19LGlzOntpZTpmdW5jdGlvbigpe3ZhciBlPSF0LkFjdGl2ZVhPYmplY3QmJlwiQWN0aXZlWE9iamVjdFwiaW4gdCxuPVwiQWN0aXZlWE9iamVjdFwiaW4gdDtyZXR1cm4gZXx8bn0saW9zOmZ1bmN0aW9uKCl7dmFyIGU9bmF2aWdhdG9yLnVzZXJBZ2VudCx0PWUubWF0Y2goUi5pb3MpLG49ZS5tYXRjaChSLm1vYmlsZUNocm9tZSk7cmV0dXJuIHQmJiFuPyh3LnZlcmJvc2UoXCJCcm93c2VyIHdhcyBmb3VuZCB0byBiZSBpT1NcIixlKSwhMCk6ITF9LG1vYmlsZTpmdW5jdGlvbigpe3ZhciBlPW5hdmlnYXRvci51c2VyQWdlbnQsdD1lLm1hdGNoKFIubW9iaWxlKTtyZXR1cm4gdD8ody52ZXJib3NlKFwiQnJvd3NlciB3YXMgZm91bmQgdG8gYmUgbW9iaWxlXCIsZSksITApOih3LnZlcmJvc2UoXCJCcm93c2VyIGlzIG5vdCBtb2JpbGUsIHVzaW5nIHJlZ3VsYXIgdHJhbnNpdGlvblwiLGUpLCExKX0saGlkZGVuOmZ1bmN0aW9uKCl7cmV0dXJuIXcuaXMudmlzaWJsZSgpfSx2aXNpYmxlOmZ1bmN0aW9uKCl7cmV0dXJuIEQuaGFzQ2xhc3MoVC52aXNpYmxlKX0sb3BlbjpmdW5jdGlvbigpe3JldHVybiB3LmlzLnZpc2libGUoKX0sY2xvc2VkOmZ1bmN0aW9uKCl7cmV0dXJuIHcuaXMuaGlkZGVuKCl9LHZlcnRpY2FsOmZ1bmN0aW9uKCl7cmV0dXJuIEQuaGFzQ2xhc3MoVC50b3ApfSxhbmltYXRpbmc6ZnVuY3Rpb24oKXtyZXR1cm4gTy5oYXNDbGFzcyhULmFuaW1hdGluZyl9LHJ0bDpmdW5jdGlvbigpe3JldHVybiB3LmNhY2hlLnJ0bD09PWkmJih3LmNhY2hlLnJ0bD1cInJ0bFwiPT1ELmNzcyhcImRpcmVjdGlvblwiKSksdy5jYWNoZS5ydGx9fSxzZXR0aW5nOmZ1bmN0aW9uKHQsbil7aWYody5kZWJ1ZyhcIkNoYW5naW5nIHNldHRpbmdcIix0LG4pLGUuaXNQbGFpbk9iamVjdCh0KSllLmV4dGVuZCghMCxrLHQpO2Vsc2V7aWYobj09PWkpcmV0dXJuIGtbdF07a1t0XT1ufX0saW50ZXJuYWw6ZnVuY3Rpb24odCxuKXtpZihlLmlzUGxhaW5PYmplY3QodCkpZS5leHRlbmQoITAsdyx0KTtlbHNle2lmKG49PT1pKXJldHVybiB3W3RdO3dbdF09bn19LGRlYnVnOmZ1bmN0aW9uKCl7ay5kZWJ1ZyYmKGsucGVyZm9ybWFuY2U/dy5wZXJmb3JtYW5jZS5sb2coYXJndW1lbnRzKToody5kZWJ1Zz1GdW5jdGlvbi5wcm90b3R5cGUuYmluZC5jYWxsKGNvbnNvbGUuaW5mbyxjb25zb2xlLGsubmFtZStcIjpcIiksdy5kZWJ1Zy5hcHBseShjb25zb2xlLGFyZ3VtZW50cykpKX0sdmVyYm9zZTpmdW5jdGlvbigpe2sudmVyYm9zZSYmay5kZWJ1ZyYmKGsucGVyZm9ybWFuY2U/dy5wZXJmb3JtYW5jZS5sb2coYXJndW1lbnRzKToody52ZXJib3NlPUZ1bmN0aW9uLnByb3RvdHlwZS5iaW5kLmNhbGwoY29uc29sZS5pbmZvLGNvbnNvbGUsay5uYW1lK1wiOlwiKSx3LnZlcmJvc2UuYXBwbHkoY29uc29sZSxhcmd1bWVudHMpKSl9LGVycm9yOmZ1bmN0aW9uKCl7dy5lcnJvcj1GdW5jdGlvbi5wcm90b3R5cGUuYmluZC5jYWxsKGNvbnNvbGUuZXJyb3IsY29uc29sZSxrLm5hbWUrXCI6XCIpLHcuZXJyb3IuYXBwbHkoY29uc29sZSxhcmd1bWVudHMpfSxwZXJmb3JtYW5jZTp7bG9nOmZ1bmN0aW9uKGUpe3ZhciB0LG4saTtrLnBlcmZvcm1hbmNlJiYodD0obmV3IERhdGUpLmdldFRpbWUoKSxpPW18fHQsbj10LWksbT10LGYucHVzaCh7TmFtZTplWzBdLEFyZ3VtZW50czpbXS5zbGljZS5jYWxsKGUsMSl8fFwiXCIsRWxlbWVudDpJLFwiRXhlY3V0aW9uIFRpbWVcIjpufSkpLGNsZWFyVGltZW91dCh3LnBlcmZvcm1hbmNlLnRpbWVyKSx3LnBlcmZvcm1hbmNlLnRpbWVyPXNldFRpbWVvdXQody5wZXJmb3JtYW5jZS5kaXNwbGF5LDUwMCl9LGRpc3BsYXk6ZnVuY3Rpb24oKXt2YXIgdD1rLm5hbWUrXCI6XCIsbj0wO209ITEsY2xlYXJUaW1lb3V0KHcucGVyZm9ybWFuY2UudGltZXIpLGUuZWFjaChmLGZ1bmN0aW9uKGUsdCl7bis9dFtcIkV4ZWN1dGlvbiBUaW1lXCJdfSksdCs9XCIgXCIrbitcIm1zXCIsZCYmKHQrPVwiICdcIitkK1wiJ1wiKSwoY29uc29sZS5ncm91cCE9PWl8fGNvbnNvbGUudGFibGUhPT1pKSYmZi5sZW5ndGg+MCYmKGNvbnNvbGUuZ3JvdXBDb2xsYXBzZWQodCksY29uc29sZS50YWJsZT9jb25zb2xlLnRhYmxlKGYpOmUuZWFjaChmLGZ1bmN0aW9uKGUsdCl7Y29uc29sZS5sb2codC5OYW1lK1wiOiBcIit0W1wiRXhlY3V0aW9uIFRpbWVcIl0rXCJtc1wiKX0pLGNvbnNvbGUuZ3JvdXBFbmQoKSksZj1bXX19LGludm9rZTpmdW5jdGlvbih0LG4sbyl7dmFyIHIscyxjLGw9TDtyZXR1cm4gbj1ufHx2LG89SXx8byxcInN0cmluZ1wiPT10eXBlb2YgdCYmbCE9PWkmJih0PXQuc3BsaXQoL1tcXC4gXS8pLHI9dC5sZW5ndGgtMSxlLmVhY2godCxmdW5jdGlvbihuLG8pe3ZhciBhPW4hPXI/byt0W24rMV0uY2hhckF0KDApLnRvVXBwZXJDYXNlKCkrdFtuKzFdLnNsaWNlKDEpOnQ7aWYoZS5pc1BsYWluT2JqZWN0KGxbYV0pJiZuIT1yKWw9bFthXTtlbHNle2lmKGxbYV0hPT1pKXJldHVybiBzPWxbYV0sITE7aWYoIWUuaXNQbGFpbk9iamVjdChsW29dKXx8bj09cilyZXR1cm4gbFtvXSE9PWk/KHM9bFtvXSwhMSk6KHcuZXJyb3IoUC5tZXRob2QsdCksITEpO2w9bFtvXX19KSksZS5pc0Z1bmN0aW9uKHMpP2M9cy5hcHBseShvLG4pOnMhPT1pJiYoYz1zKSxlLmlzQXJyYXkoYSk/YS5wdXNoKGMpOmEhPT1pP2E9W2EsY106YyE9PWkmJihhPWMpLHN9fSxwPyhMPT09aSYmdy5pbml0aWFsaXplKCksdy5pbnZva2UoZykpOihMIT09aSYmdy5pbnZva2UoXCJkZXN0cm95XCIpLHcuaW5pdGlhbGl6ZSgpKX0pLGEhPT1pP2E6dGhpc30sZS5mbi5zaWRlYmFyLnNldHRpbmdzPXtuYW1lOlwiU2lkZWJhclwiLG5hbWVzcGFjZTpcInNpZGViYXJcIixkZWJ1ZzohMSx2ZXJib3NlOiExLHBlcmZvcm1hbmNlOiEwLHRyYW5zaXRpb246XCJhdXRvXCIsbW9iaWxlVHJhbnNpdGlvbjpcImF1dG9cIixkZWZhdWx0VHJhbnNpdGlvbjp7Y29tcHV0ZXI6e2xlZnQ6XCJ1bmNvdmVyXCIscmlnaHQ6XCJ1bmNvdmVyXCIsdG9wOlwib3ZlcmxheVwiLGJvdHRvbTpcIm92ZXJsYXlcIn0sbW9iaWxlOntsZWZ0OlwidW5jb3ZlclwiLHJpZ2h0OlwidW5jb3ZlclwiLHRvcDpcIm92ZXJsYXlcIixib3R0b206XCJvdmVybGF5XCJ9fSxjb250ZXh0OlwiYm9keVwiLGV4Y2x1c2l2ZTohMSxjbG9zYWJsZTohMCxkaW1QYWdlOiEwLHNjcm9sbExvY2s6ITEscmV0dXJuU2Nyb2xsOiExLGRlbGF5U2V0dXA6ITEsZHVyYXRpb246NTAwLG9uQ2hhbmdlOmZ1bmN0aW9uKCl7fSxvblNob3c6ZnVuY3Rpb24oKXt9LG9uSGlkZTpmdW5jdGlvbigpe30sb25IaWRkZW46ZnVuY3Rpb24oKXt9LG9uVmlzaWJsZTpmdW5jdGlvbigpe30sY2xhc3NOYW1lOnthY3RpdmU6XCJhY3RpdmVcIixhbmltYXRpbmc6XCJhbmltYXRpbmdcIixkaW1tZWQ6XCJkaW1tZWRcIixpb3M6XCJpb3NcIixwdXNoYWJsZTpcInB1c2hhYmxlXCIscHVzaGVkOlwicHVzaGVkXCIscmlnaHQ6XCJyaWdodFwiLHRvcDpcInRvcFwiLGxlZnQ6XCJsZWZ0XCIsYm90dG9tOlwiYm90dG9tXCIsdmlzaWJsZTpcInZpc2libGVcIn0sc2VsZWN0b3I6e2ZpeGVkOlwiLmZpeGVkXCIsb21pdHRlZDpcInNjcmlwdCwgbGluaywgc3R5bGUsIC51aS5tb2RhbCwgLnVpLmRpbW1lciwgLnVpLm5hZywgLnVpLmZpeGVkXCIscHVzaGVyOlwiLnB1c2hlclwiLHNpZGViYXI6XCIudWkuc2lkZWJhclwifSxyZWdFeHA6e2lvczovKGlQYWR8aVBob25lfGlQb2QpL2csbW9iaWxlQ2hyb21lOi8oQ3JpT1MpL2csbW9iaWxlOi9Nb2JpbGV8aVAoaG9uZXxvZHxhZCl8QW5kcm9pZHxCbGFja0JlcnJ5fElFTW9iaWxlfEtpbmRsZXxOZXRGcm9udHxTaWxrLUFjY2VsZXJhdGVkfChocHd8d2ViKU9TfEZlbm5lY3xNaW5pbW98T3BlcmEgTShvYml8aW5pKXxCbGF6ZXJ8RG9sZmlufERvbHBoaW58U2t5ZmlyZXxadW5lL2d9LGVycm9yOnttZXRob2Q6XCJUaGUgbWV0aG9kIHlvdSBjYWxsZWQgaXMgbm90IGRlZmluZWQuXCIscHVzaGVyOlwiSGFkIHRvIGFkZCBwdXNoZXIgZWxlbWVudC4gRm9yIG9wdGltYWwgcGVyZm9ybWFuY2UgbWFrZSBzdXJlIGJvZHkgY29udGVudCBpcyBpbnNpZGUgYSBwdXNoZXIgZWxlbWVudFwiLG1vdmVkU2lkZWJhcjpcIkhhZCB0byBtb3ZlIHNpZGViYXIuIEZvciBvcHRpbWFsIHBlcmZvcm1hbmNlIG1ha2Ugc3VyZSBzaWRlYmFyIGFuZCBwdXNoZXIgYXJlIGRpcmVjdCBjaGlsZHJlbiBvZiB5b3VyIGJvZHkgdGFnXCIsb3ZlcmxheTpcIlRoZSBvdmVybGF5IHNldHRpbmcgaXMgbm8gbG9uZ2VyIHN1cHBvcnRlZCwgdXNlIGFuaW1hdGlvbjogb3ZlcmxheVwiLG5vdEZvdW5kOlwiVGhlcmUgd2VyZSBubyBlbGVtZW50cyB0aGF0IG1hdGNoZWQgdGhlIHNwZWNpZmllZCBzZWxlY3RvclwifX19KGpRdWVyeSx3aW5kb3csZG9jdW1lbnQpLGZ1bmN0aW9uKGUsdCxuLGkpe1widXNlIHN0cmljdFwiO2UuZm4uc3RpY2t5PWZ1bmN0aW9uKG4pe3ZhciBvLGE9ZSh0aGlzKSxyPWEuc2VsZWN0b3J8fFwiXCIscz0obmV3IERhdGUpLmdldFRpbWUoKSxjPVtdLGw9YXJndW1lbnRzWzBdLHU9XCJzdHJpbmdcIj09dHlwZW9mIGwsZD1bXS5zbGljZS5jYWxsKGFyZ3VtZW50cywxKTtyZXR1cm4gYS5lYWNoKGZ1bmN0aW9uKCl7dmFyIGEsbSxmLGcscD1lLmlzUGxhaW5PYmplY3Qobik/ZS5leHRlbmQoITAse30sZS5mbi5zdGlja3kuc2V0dGluZ3Msbik6ZS5leHRlbmQoe30sZS5mbi5zdGlja3kuc2V0dGluZ3MpLHY9cC5jbGFzc05hbWUsaD1wLm5hbWVzcGFjZSxiPXAuZXJyb3IseT1cIi5cIitoLHg9XCJtb2R1bGUtXCIraCxDPWUodGhpcyksdz1lKHQpLGs9ZShwLnNjcm9sbENvbnRleHQpLFM9KEMuc2VsZWN0b3J8fFwiXCIsQy5kYXRhKHgpKSxUPXQucmVxdWVzdEFuaW1hdGlvbkZyYW1lfHx0Lm1velJlcXVlc3RBbmltYXRpb25GcmFtZXx8dC53ZWJraXRSZXF1ZXN0QW5pbWF0aW9uRnJhbWV8fHQubXNSZXF1ZXN0QW5pbWF0aW9uRnJhbWV8fGZ1bmN0aW9uKGUpe3NldFRpbWVvdXQoZSwwKX0sQT10aGlzO2c9e2luaXRpYWxpemU6ZnVuY3Rpb24oKXtnLmRldGVybWluZUNvbnRhaW5lcigpLGcuZGV0ZXJtaW5lQ29udGV4dCgpLGcudmVyYm9zZShcIkluaXRpYWxpemluZyBzdGlja3lcIixwLGEpLGcuc2F2ZS5wb3NpdGlvbnMoKSxnLmNoZWNrRXJyb3JzKCksZy5iaW5kLmV2ZW50cygpLHAub2JzZXJ2ZUNoYW5nZXMmJmcub2JzZXJ2ZUNoYW5nZXMoKSxnLmluc3RhbnRpYXRlKCl9LGluc3RhbnRpYXRlOmZ1bmN0aW9uKCl7Zy52ZXJib3NlKFwiU3RvcmluZyBpbnN0YW5jZSBvZiBtb2R1bGVcIixnKSxTPWcsQy5kYXRhKHgsZyl9LGRlc3Ryb3k6ZnVuY3Rpb24oKXtnLnZlcmJvc2UoXCJEZXN0cm95aW5nIHByZXZpb3VzIGluc3RhbmNlXCIpLGcucmVzZXQoKSxmJiZmLmRpc2Nvbm5lY3QoKSx3Lm9mZihcImxvYWRcIit5LGcuZXZlbnQubG9hZCkub2ZmKFwicmVzaXplXCIreSxnLmV2ZW50LnJlc2l6ZSksay5vZmYoXCJzY3JvbGxjaGFuZ2VcIit5LGcuZXZlbnQuc2Nyb2xsY2hhbmdlKSxDLnJlbW92ZURhdGEoeCl9LG9ic2VydmVDaGFuZ2VzOmZ1bmN0aW9uKCl7dmFyIGU9bVswXTtcIk11dGF0aW9uT2JzZXJ2ZXJcImluIHQmJihmPW5ldyBNdXRhdGlvbk9ic2VydmVyKGZ1bmN0aW9uKGUpe2NsZWFyVGltZW91dChnLnRpbWVyKSxnLnRpbWVyPXNldFRpbWVvdXQoZnVuY3Rpb24oKXtnLnZlcmJvc2UoXCJET00gdHJlZSBtb2RpZmllZCwgdXBkYXRpbmcgc3RpY2t5IG1lbnVcIixlKSxnLnJlZnJlc2goKX0sMTAwKX0pLGYub2JzZXJ2ZShBLHtjaGlsZExpc3Q6ITAsc3VidHJlZTohMH0pLGYub2JzZXJ2ZShlLHtjaGlsZExpc3Q6ITAsc3VidHJlZTohMH0pLGcuZGVidWcoXCJTZXR0aW5nIHVwIG11dGF0aW9uIG9ic2VydmVyXCIsZikpfSxkZXRlcm1pbmVDb250YWluZXI6ZnVuY3Rpb24oKXthPUMub2Zmc2V0UGFyZW50KCl9LGRldGVybWluZUNvbnRleHQ6ZnVuY3Rpb24oKXtyZXR1cm4gbT1wLmNvbnRleHQ/ZShwLmNvbnRleHQpOmEsMD09PW0ubGVuZ3RoP3ZvaWQgZy5lcnJvcihiLmludmFsaWRDb250ZXh0LHAuY29udGV4dCxDKTp2b2lkIDB9LGNoZWNrRXJyb3JzOmZ1bmN0aW9uKCl7cmV0dXJuIGcuaXMuaGlkZGVuKCkmJmcuZXJyb3IoYi52aXNpYmxlLEMpLGcuY2FjaGUuZWxlbWVudC5oZWlnaHQ+Zy5jYWNoZS5jb250ZXh0LmhlaWdodD8oZy5yZXNldCgpLHZvaWQgZy5lcnJvcihiLmVsZW1lbnRTaXplLEMpKTp2b2lkIDB9LGJpbmQ6e2V2ZW50czpmdW5jdGlvbigpe3cub24oXCJsb2FkXCIreSxnLmV2ZW50LmxvYWQpLm9uKFwicmVzaXplXCIreSxnLmV2ZW50LnJlc2l6ZSksay5vZmYoXCJzY3JvbGxcIit5KS5vbihcInNjcm9sbFwiK3ksZy5ldmVudC5zY3JvbGwpLm9uKFwic2Nyb2xsY2hhbmdlXCIreSxnLmV2ZW50LnNjcm9sbGNoYW5nZSl9fSxldmVudDp7bG9hZDpmdW5jdGlvbigpe2cudmVyYm9zZShcIlBhZ2UgY29udGVudHMgZmluaXNoZWQgbG9hZGluZ1wiKSxUKGcucmVmcmVzaCl9LHJlc2l6ZTpmdW5jdGlvbigpe2cudmVyYm9zZShcIldpbmRvdyByZXNpemVkXCIpLFQoZy5yZWZyZXNoKX0sc2Nyb2xsOmZ1bmN0aW9uKCl7VChmdW5jdGlvbigpe2sudHJpZ2dlckhhbmRsZXIoXCJzY3JvbGxjaGFuZ2VcIit5LGsuc2Nyb2xsVG9wKCkpfSl9LHNjcm9sbGNoYW5nZTpmdW5jdGlvbihlLHQpe2cuc3RpY2sodCkscC5vblNjcm9sbC5jYWxsKEEpfX0scmVmcmVzaDpmdW5jdGlvbihlKXtnLnJlc2V0KCkscC5jb250ZXh0fHxnLmRldGVybWluZUNvbnRleHQoKSxlJiZnLmRldGVybWluZUNvbnRhaW5lcigpLGcuc2F2ZS5wb3NpdGlvbnMoKSxnLnN0aWNrKCkscC5vblJlcG9zaXRpb24uY2FsbChBKX0sc3VwcG9ydHM6e3N0aWNreTpmdW5jdGlvbigpe3t2YXIgdD1lKFwiPGRpdi8+XCIpO3RbMF19cmV0dXJuIHQuYWRkQ2xhc3Modi5zdXBwb3J0ZWQpLHQuY3NzKFwicG9zaXRpb25cIikubWF0Y2goXCJzdGlja3lcIil9fSxzYXZlOntsYXN0U2Nyb2xsOmZ1bmN0aW9uKGUpe2cubGFzdFNjcm9sbD1lfSxlbGVtZW50U2Nyb2xsOmZ1bmN0aW9uKGUpe2cuZWxlbWVudFNjcm9sbD1lfSxwb3NpdGlvbnM6ZnVuY3Rpb24oKXt7dmFyIGU9e2hlaWdodDp3LmhlaWdodCgpfSx0PXttYXJnaW46e3RvcDpwYXJzZUludChDLmNzcyhcIm1hcmdpbi10b3BcIiksMTApLGJvdHRvbTpwYXJzZUludChDLmNzcyhcIm1hcmdpbi1ib3R0b21cIiksMTApfSxvZmZzZXQ6Qy5vZmZzZXQoKSx3aWR0aDpDLm91dGVyV2lkdGgoKSxoZWlnaHQ6Qy5vdXRlckhlaWdodCgpfSxuPXtvZmZzZXQ6bS5vZmZzZXQoKSxoZWlnaHQ6bS5vdXRlckhlaWdodCgpfTsoe2hlaWdodDphLm91dGVySGVpZ2h0KCl9KX1nLmNhY2hlPXtmaXRzOnQuaGVpZ2h0PGUuaGVpZ2h0LHdpbmRvdzp7aGVpZ2h0OmUuaGVpZ2h0fSxlbGVtZW50OnttYXJnaW46dC5tYXJnaW4sdG9wOnQub2Zmc2V0LnRvcC10Lm1hcmdpbi50b3AsbGVmdDp0Lm9mZnNldC5sZWZ0LHdpZHRoOnQud2lkdGgsaGVpZ2h0OnQuaGVpZ2h0LGJvdHRvbTp0Lm9mZnNldC50b3ArdC5oZWlnaHR9LGNvbnRleHQ6e3RvcDpuLm9mZnNldC50b3AsaGVpZ2h0Om4uaGVpZ2h0LGJvdHRvbTpuLm9mZnNldC50b3Arbi5oZWlnaHR9fSxnLnNldC5jb250YWluZXJTaXplKCksZy5zZXQuc2l6ZSgpLGcuc3RpY2soKSxnLmRlYnVnKFwiQ2FjaGluZyBlbGVtZW50IHBvc2l0aW9uc1wiLGcuY2FjaGUpfX0sZ2V0OntkaXJlY3Rpb246ZnVuY3Rpb24oZSl7dmFyIHQ9XCJkb3duXCI7cmV0dXJuIGU9ZXx8ay5zY3JvbGxUb3AoKSxnLmxhc3RTY3JvbGwhPT1pJiYoZy5sYXN0U2Nyb2xsPGU/dD1cImRvd25cIjpnLmxhc3RTY3JvbGw+ZSYmKHQ9XCJ1cFwiKSksdH0sc2Nyb2xsQ2hhbmdlOmZ1bmN0aW9uKGUpe3JldHVybiBlPWV8fGsuc2Nyb2xsVG9wKCksZy5sYXN0U2Nyb2xsP2UtZy5sYXN0U2Nyb2xsOjB9LGN1cnJlbnRFbGVtZW50U2Nyb2xsOmZ1bmN0aW9uKCl7cmV0dXJuIGcuZWxlbWVudFNjcm9sbD9nLmVsZW1lbnRTY3JvbGw6Zy5pcy50b3AoKT9NYXRoLmFicyhwYXJzZUludChDLmNzcyhcInRvcFwiKSwxMCkpfHwwOk1hdGguYWJzKHBhcnNlSW50KEMuY3NzKFwiYm90dG9tXCIpLDEwKSl8fDB9LGVsZW1lbnRTY3JvbGw6ZnVuY3Rpb24oZSl7XHJcbmU9ZXx8ay5zY3JvbGxUb3AoKTt2YXIgdD1nLmNhY2hlLmVsZW1lbnQsbj1nLmNhY2hlLndpbmRvdyxpPWcuZ2V0LnNjcm9sbENoYW5nZShlKSxvPXQuaGVpZ2h0LW4uaGVpZ2h0K3Aub2Zmc2V0LGE9Zy5nZXQuY3VycmVudEVsZW1lbnRTY3JvbGwoKSxyPWEraTtyZXR1cm4gYT1nLmNhY2hlLmZpdHN8fDA+cj8wOnI+bz9vOnJ9fSxyZW1vdmU6e2xhc3RTY3JvbGw6ZnVuY3Rpb24oKXtkZWxldGUgZy5sYXN0U2Nyb2xsfSxlbGVtZW50U2Nyb2xsOmZ1bmN0aW9uKGUpe2RlbGV0ZSBnLmVsZW1lbnRTY3JvbGx9LG9mZnNldDpmdW5jdGlvbigpe0MuY3NzKFwibWFyZ2luLXRvcFwiLFwiXCIpfX0sc2V0OntvZmZzZXQ6ZnVuY3Rpb24oKXtnLnZlcmJvc2UoXCJTZXR0aW5nIG9mZnNldCBvbiBlbGVtZW50XCIscC5vZmZzZXQpLEMuY3NzKFwibWFyZ2luLXRvcFwiLHAub2Zmc2V0KX0sY29udGFpbmVyU2l6ZTpmdW5jdGlvbigpe3ZhciBlPWEuZ2V0KDApLnRhZ05hbWU7XCJIVE1MXCI9PT1lfHxcImJvZHlcIj09ZT9nLmRldGVybWluZUNvbnRhaW5lcigpOk1hdGguYWJzKGEub3V0ZXJIZWlnaHQoKS1nLmNhY2hlLmNvbnRleHQuaGVpZ2h0KT5wLmppdHRlciYmKGcuZGVidWcoXCJDb250ZXh0IGhhcyBwYWRkaW5nLCBzcGVjaWZ5aW5nIGV4YWN0IGhlaWdodCBmb3IgY29udGFpbmVyXCIsZy5jYWNoZS5jb250ZXh0LmhlaWdodCksYS5jc3Moe2hlaWdodDpnLmNhY2hlLmNvbnRleHQuaGVpZ2h0fSkpfSxtaW5pbXVtU2l6ZTpmdW5jdGlvbigpe3ZhciBlPWcuY2FjaGUuZWxlbWVudDthLmNzcyhcIm1pbi1oZWlnaHRcIixlLmhlaWdodCl9LHNjcm9sbDpmdW5jdGlvbihlKXtnLmRlYnVnKFwiU2V0dGluZyBzY3JvbGwgb24gZWxlbWVudFwiLGUpLGcuZWxlbWVudFNjcm9sbCE9ZSYmKGcuaXMudG9wKCkmJkMuY3NzKFwiYm90dG9tXCIsXCJcIikuY3NzKFwidG9wXCIsLWUpLGcuaXMuYm90dG9tKCkmJkMuY3NzKFwidG9wXCIsXCJcIikuY3NzKFwiYm90dG9tXCIsZSkpfSxzaXplOmZ1bmN0aW9uKCl7MCE9PWcuY2FjaGUuZWxlbWVudC5oZWlnaHQmJjAhPT1nLmNhY2hlLmVsZW1lbnQud2lkdGgmJihBLnN0eWxlLnNldFByb3BlcnR5KFwid2lkdGhcIixnLmNhY2hlLmVsZW1lbnQud2lkdGgrXCJweFwiLFwiaW1wb3J0YW50XCIpLEEuc3R5bGUuc2V0UHJvcGVydHkoXCJoZWlnaHRcIixnLmNhY2hlLmVsZW1lbnQuaGVpZ2h0K1wicHhcIixcImltcG9ydGFudFwiKSl9fSxpczp7dG9wOmZ1bmN0aW9uKCl7cmV0dXJuIEMuaGFzQ2xhc3Modi50b3ApfSxib3R0b206ZnVuY3Rpb24oKXtyZXR1cm4gQy5oYXNDbGFzcyh2LmJvdHRvbSl9LGluaXRpYWxQb3NpdGlvbjpmdW5jdGlvbigpe3JldHVybiFnLmlzLmZpeGVkKCkmJiFnLmlzLmJvdW5kKCl9LGhpZGRlbjpmdW5jdGlvbigpe3JldHVybiFDLmlzKFwiOnZpc2libGVcIil9LGJvdW5kOmZ1bmN0aW9uKCl7cmV0dXJuIEMuaGFzQ2xhc3Modi5ib3VuZCl9LGZpeGVkOmZ1bmN0aW9uKCl7cmV0dXJuIEMuaGFzQ2xhc3Modi5maXhlZCl9fSxzdGljazpmdW5jdGlvbihlKXt2YXIgdD1lfHxrLnNjcm9sbFRvcCgpLG49Zy5jYWNoZSxpPW4uZml0cyxvPW4uZWxlbWVudCxhPW4ud2luZG93LHI9bi5jb250ZXh0LHM9Zy5pcy5ib3R0b20oKSYmcC5wdXNoaW5nP3AuYm90dG9tT2Zmc2V0OnAub2Zmc2V0LGU9e3RvcDp0K3MsYm90dG9tOnQrcythLmhlaWdodH0sYz0oZy5nZXQuZGlyZWN0aW9uKGUudG9wKSxpPzA6Zy5nZXQuZWxlbWVudFNjcm9sbChlLnRvcCkpLGw9IWksdT0wIT09by5oZWlnaHQ7dSYmKGcuaXMuaW5pdGlhbFBvc2l0aW9uKCk/ZS50b3A+PXIuYm90dG9tPyhnLmRlYnVnKFwiSW5pdGlhbCBlbGVtZW50IHBvc2l0aW9uIGlzIGJvdHRvbSBvZiBjb250YWluZXJcIiksZy5iaW5kQm90dG9tKCkpOmUudG9wPm8udG9wJiYoby5oZWlnaHQrZS50b3AtYz49ci5ib3R0b20/KGcuZGVidWcoXCJJbml0aWFsIGVsZW1lbnQgcG9zaXRpb24gaXMgYm90dG9tIG9mIGNvbnRhaW5lclwiKSxnLmJpbmRCb3R0b20oKSk6KGcuZGVidWcoXCJJbml0aWFsIGVsZW1lbnQgcG9zaXRpb24gaXMgZml4ZWRcIiksZy5maXhUb3AoKSkpOmcuaXMuZml4ZWQoKT9nLmlzLnRvcCgpP2UudG9wPD1vLnRvcD8oZy5kZWJ1ZyhcIkZpeGVkIGVsZW1lbnQgcmVhY2hlZCB0b3Agb2YgY29udGFpbmVyXCIpLGcuc2V0SW5pdGlhbFBvc2l0aW9uKCkpOm8uaGVpZ2h0K2UudG9wLWM+PXIuYm90dG9tPyhnLmRlYnVnKFwiRml4ZWQgZWxlbWVudCByZWFjaGVkIGJvdHRvbSBvZiBjb250YWluZXJcIiksZy5iaW5kQm90dG9tKCkpOmwmJihnLnNldC5zY3JvbGwoYyksZy5zYXZlLmxhc3RTY3JvbGwoZS50b3ApLGcuc2F2ZS5lbGVtZW50U2Nyb2xsKGMpKTpnLmlzLmJvdHRvbSgpJiYoZS5ib3R0b20tby5oZWlnaHQ8PW8udG9wPyhnLmRlYnVnKFwiQm90dG9tIGZpeGVkIHJhaWwgaGFzIHJlYWNoZWQgdG9wIG9mIGNvbnRhaW5lclwiKSxnLnNldEluaXRpYWxQb3NpdGlvbigpKTplLmJvdHRvbT49ci5ib3R0b20/KGcuZGVidWcoXCJCb3R0b20gZml4ZWQgcmFpbCBoYXMgcmVhY2hlZCBib3R0b20gb2YgY29udGFpbmVyXCIpLGcuYmluZEJvdHRvbSgpKTpsJiYoZy5zZXQuc2Nyb2xsKGMpLGcuc2F2ZS5sYXN0U2Nyb2xsKGUudG9wKSxnLnNhdmUuZWxlbWVudFNjcm9sbChjKSkpOmcuaXMuYm90dG9tKCkmJihwLnB1c2hpbmc/Zy5pcy5ib3VuZCgpJiZlLmJvdHRvbTw9ci5ib3R0b20mJihnLmRlYnVnKFwiRml4aW5nIGJvdHRvbSBhdHRhY2hlZCBlbGVtZW50IHRvIGJvdHRvbSBvZiBicm93c2VyLlwiKSxnLmZpeEJvdHRvbSgpKTpnLmlzLmJvdW5kKCkmJmUudG9wPD1yLmJvdHRvbS1vLmhlaWdodCYmKGcuZGVidWcoXCJGaXhpbmcgYm90dG9tIGF0dGFjaGVkIGVsZW1lbnQgdG8gdG9wIG9mIGJyb3dzZXIuXCIpLGcuZml4VG9wKCkpKSl9LGJpbmRUb3A6ZnVuY3Rpb24oKXtnLmRlYnVnKFwiQmluZGluZyBlbGVtZW50IHRvIHRvcCBvZiBwYXJlbnQgY29udGFpbmVyXCIpLGcucmVtb3ZlLm9mZnNldCgpLEMuY3NzKHtsZWZ0OlwiXCIsdG9wOlwiXCIsbWFyZ2luQm90dG9tOlwiXCJ9KS5yZW1vdmVDbGFzcyh2LmZpeGVkKS5yZW1vdmVDbGFzcyh2LmJvdHRvbSkuYWRkQ2xhc3Modi5ib3VuZCkuYWRkQ2xhc3Modi50b3ApLHAub25Ub3AuY2FsbChBKSxwLm9uVW5zdGljay5jYWxsKEEpfSxiaW5kQm90dG9tOmZ1bmN0aW9uKCl7Zy5kZWJ1ZyhcIkJpbmRpbmcgZWxlbWVudCB0byBib3R0b20gb2YgcGFyZW50IGNvbnRhaW5lclwiKSxnLnJlbW92ZS5vZmZzZXQoKSxDLmNzcyh7bGVmdDpcIlwiLHRvcDpcIlwifSkucmVtb3ZlQ2xhc3Modi5maXhlZCkucmVtb3ZlQ2xhc3Modi50b3ApLmFkZENsYXNzKHYuYm91bmQpLmFkZENsYXNzKHYuYm90dG9tKSxwLm9uQm90dG9tLmNhbGwoQSkscC5vblVuc3RpY2suY2FsbChBKX0sc2V0SW5pdGlhbFBvc2l0aW9uOmZ1bmN0aW9uKCl7Zy5kZWJ1ZyhcIlJldHVybmluZyB0byBpbml0aWFsIHBvc2l0aW9uXCIpLGcudW5maXgoKSxnLnVuYmluZCgpfSxmaXhUb3A6ZnVuY3Rpb24oKXtnLmRlYnVnKFwiRml4aW5nIGVsZW1lbnQgdG8gdG9wIG9mIHBhZ2VcIiksZy5zZXQubWluaW11bVNpemUoKSxnLnNldC5vZmZzZXQoKSxDLmNzcyh7bGVmdDpnLmNhY2hlLmVsZW1lbnQubGVmdCxib3R0b206XCJcIixtYXJnaW5Cb3R0b206XCJcIn0pLnJlbW92ZUNsYXNzKHYuYm91bmQpLnJlbW92ZUNsYXNzKHYuYm90dG9tKS5hZGRDbGFzcyh2LmZpeGVkKS5hZGRDbGFzcyh2LnRvcCkscC5vblN0aWNrLmNhbGwoQSl9LGZpeEJvdHRvbTpmdW5jdGlvbigpe2cuZGVidWcoXCJTdGlja2luZyBlbGVtZW50IHRvIGJvdHRvbSBvZiBwYWdlXCIpLGcuc2V0Lm1pbmltdW1TaXplKCksZy5zZXQub2Zmc2V0KCksQy5jc3Moe2xlZnQ6Zy5jYWNoZS5lbGVtZW50LmxlZnQsYm90dG9tOlwiXCIsbWFyZ2luQm90dG9tOlwiXCJ9KS5yZW1vdmVDbGFzcyh2LmJvdW5kKS5yZW1vdmVDbGFzcyh2LnRvcCkuYWRkQ2xhc3Modi5maXhlZCkuYWRkQ2xhc3Modi5ib3R0b20pLHAub25TdGljay5jYWxsKEEpfSx1bmJpbmQ6ZnVuY3Rpb24oKXtnLmlzLmJvdW5kKCkmJihnLmRlYnVnKFwiUmVtb3ZpbmcgY29udGFpbmVyIGJvdW5kIHBvc2l0aW9uIG9uIGVsZW1lbnRcIiksZy5yZW1vdmUub2Zmc2V0KCksQy5yZW1vdmVDbGFzcyh2LmJvdW5kKS5yZW1vdmVDbGFzcyh2LnRvcCkucmVtb3ZlQ2xhc3Modi5ib3R0b20pKX0sdW5maXg6ZnVuY3Rpb24oKXtnLmlzLmZpeGVkKCkmJihnLmRlYnVnKFwiUmVtb3ZpbmcgZml4ZWQgcG9zaXRpb24gb24gZWxlbWVudFwiKSxnLnJlbW92ZS5vZmZzZXQoKSxDLnJlbW92ZUNsYXNzKHYuZml4ZWQpLnJlbW92ZUNsYXNzKHYudG9wKS5yZW1vdmVDbGFzcyh2LmJvdHRvbSkscC5vblVuc3RpY2suY2FsbChBKSl9LHJlc2V0OmZ1bmN0aW9uKCl7Zy5kZWJ1ZyhcIlJlc2V0aW5nIGVsZW1lbnRzIHBvc2l0aW9uXCIpLGcudW5iaW5kKCksZy51bmZpeCgpLGcucmVzZXRDU1MoKSxnLnJlbW92ZS5vZmZzZXQoKSxnLnJlbW92ZS5sYXN0U2Nyb2xsKCl9LHJlc2V0Q1NTOmZ1bmN0aW9uKCl7Qy5jc3Moe3dpZHRoOlwiXCIsaGVpZ2h0OlwiXCJ9KSxhLmNzcyh7aGVpZ2h0OlwiXCJ9KX0sc2V0dGluZzpmdW5jdGlvbih0LG4pe2lmKGUuaXNQbGFpbk9iamVjdCh0KSllLmV4dGVuZCghMCxwLHQpO2Vsc2V7aWYobj09PWkpcmV0dXJuIHBbdF07cFt0XT1ufX0saW50ZXJuYWw6ZnVuY3Rpb24odCxuKXtpZihlLmlzUGxhaW5PYmplY3QodCkpZS5leHRlbmQoITAsZyx0KTtlbHNle2lmKG49PT1pKXJldHVybiBnW3RdO2dbdF09bn19LGRlYnVnOmZ1bmN0aW9uKCl7cC5kZWJ1ZyYmKHAucGVyZm9ybWFuY2U/Zy5wZXJmb3JtYW5jZS5sb2coYXJndW1lbnRzKTooZy5kZWJ1Zz1GdW5jdGlvbi5wcm90b3R5cGUuYmluZC5jYWxsKGNvbnNvbGUuaW5mbyxjb25zb2xlLHAubmFtZStcIjpcIiksZy5kZWJ1Zy5hcHBseShjb25zb2xlLGFyZ3VtZW50cykpKX0sdmVyYm9zZTpmdW5jdGlvbigpe3AudmVyYm9zZSYmcC5kZWJ1ZyYmKHAucGVyZm9ybWFuY2U/Zy5wZXJmb3JtYW5jZS5sb2coYXJndW1lbnRzKTooZy52ZXJib3NlPUZ1bmN0aW9uLnByb3RvdHlwZS5iaW5kLmNhbGwoY29uc29sZS5pbmZvLGNvbnNvbGUscC5uYW1lK1wiOlwiKSxnLnZlcmJvc2UuYXBwbHkoY29uc29sZSxhcmd1bWVudHMpKSl9LGVycm9yOmZ1bmN0aW9uKCl7Zy5lcnJvcj1GdW5jdGlvbi5wcm90b3R5cGUuYmluZC5jYWxsKGNvbnNvbGUuZXJyb3IsY29uc29sZSxwLm5hbWUrXCI6XCIpLGcuZXJyb3IuYXBwbHkoY29uc29sZSxhcmd1bWVudHMpfSxwZXJmb3JtYW5jZTp7bG9nOmZ1bmN0aW9uKGUpe3ZhciB0LG4saTtwLnBlcmZvcm1hbmNlJiYodD0obmV3IERhdGUpLmdldFRpbWUoKSxpPXN8fHQsbj10LWkscz10LGMucHVzaCh7TmFtZTplWzBdLEFyZ3VtZW50czpbXS5zbGljZS5jYWxsKGUsMSl8fFwiXCIsRWxlbWVudDpBLFwiRXhlY3V0aW9uIFRpbWVcIjpufSkpLGNsZWFyVGltZW91dChnLnBlcmZvcm1hbmNlLnRpbWVyKSxnLnBlcmZvcm1hbmNlLnRpbWVyPXNldFRpbWVvdXQoZy5wZXJmb3JtYW5jZS5kaXNwbGF5LDApfSxkaXNwbGF5OmZ1bmN0aW9uKCl7dmFyIHQ9cC5uYW1lK1wiOlwiLG49MDtzPSExLGNsZWFyVGltZW91dChnLnBlcmZvcm1hbmNlLnRpbWVyKSxlLmVhY2goYyxmdW5jdGlvbihlLHQpe24rPXRbXCJFeGVjdXRpb24gVGltZVwiXX0pLHQrPVwiIFwiK24rXCJtc1wiLHImJih0Kz1cIiAnXCIrcitcIidcIiksKGNvbnNvbGUuZ3JvdXAhPT1pfHxjb25zb2xlLnRhYmxlIT09aSkmJmMubGVuZ3RoPjAmJihjb25zb2xlLmdyb3VwQ29sbGFwc2VkKHQpLGNvbnNvbGUudGFibGU/Y29uc29sZS50YWJsZShjKTplLmVhY2goYyxmdW5jdGlvbihlLHQpe2NvbnNvbGUubG9nKHQuTmFtZStcIjogXCIrdFtcIkV4ZWN1dGlvbiBUaW1lXCJdK1wibXNcIil9KSxjb25zb2xlLmdyb3VwRW5kKCkpLGM9W119fSxpbnZva2U6ZnVuY3Rpb24odCxuLGEpe3ZhciByLHMsYyxsPVM7cmV0dXJuIG49bnx8ZCxhPUF8fGEsXCJzdHJpbmdcIj09dHlwZW9mIHQmJmwhPT1pJiYodD10LnNwbGl0KC9bXFwuIF0vKSxyPXQubGVuZ3RoLTEsZS5lYWNoKHQsZnVuY3Rpb24obixvKXt2YXIgYT1uIT1yP28rdFtuKzFdLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpK3RbbisxXS5zbGljZSgxKTp0O2lmKGUuaXNQbGFpbk9iamVjdChsW2FdKSYmbiE9cilsPWxbYV07ZWxzZXtpZihsW2FdIT09aSlyZXR1cm4gcz1sW2FdLCExO2lmKCFlLmlzUGxhaW5PYmplY3QobFtvXSl8fG49PXIpcmV0dXJuIGxbb10hPT1pPyhzPWxbb10sITEpOiExO2w9bFtvXX19KSksZS5pc0Z1bmN0aW9uKHMpP2M9cy5hcHBseShhLG4pOnMhPT1pJiYoYz1zKSxlLmlzQXJyYXkobyk/by5wdXNoKGMpOm8hPT1pP289W28sY106YyE9PWkmJihvPWMpLHN9fSx1PyhTPT09aSYmZy5pbml0aWFsaXplKCksZy5pbnZva2UobCkpOihTIT09aSYmUy5pbnZva2UoXCJkZXN0cm95XCIpLGcuaW5pdGlhbGl6ZSgpKX0pLG8hPT1pP286dGhpc30sZS5mbi5zdGlja3kuc2V0dGluZ3M9e25hbWU6XCJTdGlja3lcIixuYW1lc3BhY2U6XCJzdGlja3lcIixkZWJ1ZzohMSx2ZXJib3NlOiEwLHBlcmZvcm1hbmNlOiEwLHB1c2hpbmc6ITEsY29udGV4dDohMSxzY3JvbGxDb250ZXh0OnQsb2Zmc2V0OjAsYm90dG9tT2Zmc2V0OjAsaml0dGVyOjUsb2JzZXJ2ZUNoYW5nZXM6ITEsb25SZXBvc2l0aW9uOmZ1bmN0aW9uKCl7fSxvblNjcm9sbDpmdW5jdGlvbigpe30sb25TdGljazpmdW5jdGlvbigpe30sb25VbnN0aWNrOmZ1bmN0aW9uKCl7fSxvblRvcDpmdW5jdGlvbigpe30sb25Cb3R0b206ZnVuY3Rpb24oKXt9LGVycm9yOntjb250YWluZXI6XCJTdGlja3kgZWxlbWVudCBtdXN0IGJlIGluc2lkZSBhIHJlbGF0aXZlIGNvbnRhaW5lclwiLHZpc2libGU6XCJFbGVtZW50IGlzIGhpZGRlbiwgeW91IG11c3QgY2FsbCByZWZyZXNoIGFmdGVyIGVsZW1lbnQgYmVjb21lcyB2aXNpYmxlXCIsbWV0aG9kOlwiVGhlIG1ldGhvZCB5b3UgY2FsbGVkIGlzIG5vdCBkZWZpbmVkLlwiLGludmFsaWRDb250ZXh0OlwiQ29udGV4dCBzcGVjaWZpZWQgZG9lcyBub3QgZXhpc3RcIixlbGVtZW50U2l6ZTpcIlN0aWNreSBlbGVtZW50IGlzIGxhcmdlciB0aGFuIGl0cyBjb250YWluZXIsIGNhbm5vdCBjcmVhdGUgc3RpY2t5LlwifSxjbGFzc05hbWU6e2JvdW5kOlwiYm91bmRcIixmaXhlZDpcImZpeGVkXCIsc3VwcG9ydGVkOlwibmF0aXZlXCIsdG9wOlwidG9wXCIsYm90dG9tOlwiYm90dG9tXCJ9fX0oalF1ZXJ5LHdpbmRvdyxkb2N1bWVudCksZnVuY3Rpb24oZSx0LG4saSl7XCJ1c2Ugc3RyaWN0XCI7ZS5mbi50YWI9ZnVuY3Rpb24obyl7dmFyIGEscj1lKGUuaXNGdW5jdGlvbih0aGlzKT90OnRoaXMpLHM9ci5zZWxlY3Rvcnx8XCJcIixjPShuZXcgRGF0ZSkuZ2V0VGltZSgpLGw9W10sdT1hcmd1bWVudHNbMF0sZD1cInN0cmluZ1wiPT10eXBlb2YgdSxtPVtdLnNsaWNlLmNhbGwoYXJndW1lbnRzLDEpLGY9ITE7cmV0dXJuIHIuZWFjaChmdW5jdGlvbigpe3ZhciBnLHAsdixoLGIseSx4PWUuaXNQbGFpbk9iamVjdChvKT9lLmV4dGVuZCghMCx7fSxlLmZuLnRhYi5zZXR0aW5ncyxvKTplLmV4dGVuZCh7fSxlLmZuLnRhYi5zZXR0aW5ncyksQz14LmNsYXNzTmFtZSx3PXgubWV0YWRhdGEsaz14LnNlbGVjdG9yLFM9eC5lcnJvcixUPVwiLlwiK3gubmFtZXNwYWNlLEE9XCJtb2R1bGUtXCIreC5uYW1lc3BhY2UsUj1lKHRoaXMpLFA9e30sRT0hMCxGPTAsRD10aGlzLE89Ui5kYXRhKEEpO2I9e2luaXRpYWxpemU6ZnVuY3Rpb24oKXtiLmRlYnVnKFwiSW5pdGlhbGl6aW5nIHRhYiBtZW51IGl0ZW1cIixSKSxiLmZpeC5jYWxsYmFja3MoKSxiLmRldGVybWluZVRhYnMoKSxiLmRlYnVnKFwiRGV0ZXJtaW5pbmcgdGFic1wiLHguY29udGV4dCxwKSx4LmF1dG8mJmIuc2V0LmF1dG8oKSxiLmJpbmQuZXZlbnRzKCkseC5oaXN0b3J5JiYhZiYmKGIuaW5pdGlhbGl6ZUhpc3RvcnkoKSxmPSEwKSxiLmluc3RhbnRpYXRlKCl9LGluc3RhbnRpYXRlOmZ1bmN0aW9uKCl7Yi52ZXJib3NlKFwiU3RvcmluZyBpbnN0YW5jZSBvZiBtb2R1bGVcIixiKSxPPWIsUi5kYXRhKEEsYil9LGRlc3Ryb3k6ZnVuY3Rpb24oKXtiLmRlYnVnKFwiRGVzdHJveWluZyB0YWJzXCIsUiksUi5yZW1vdmVEYXRhKEEpLm9mZihUKX0sYmluZDp7ZXZlbnRzOmZ1bmN0aW9uKCl7ZS5pc1dpbmRvdyhEKXx8KGIuZGVidWcoXCJBdHRhY2hpbmcgdGFiIGFjdGl2YXRpb24gZXZlbnRzIHRvIGVsZW1lbnRcIixSKSxSLm9uKFwiY2xpY2tcIitULGIuZXZlbnQuY2xpY2spKX19LGRldGVybWluZVRhYnM6ZnVuY3Rpb24oKXt2YXIgdDtcInBhcmVudFwiPT09eC5jb250ZXh0PyhSLmNsb3Nlc3Qoay51aSkubGVuZ3RoPjA/KHQ9Ui5jbG9zZXN0KGsudWkpLGIudmVyYm9zZShcIlVzaW5nIGNsb3Nlc3QgVUkgZWxlbWVudCBhcyBwYXJlbnRcIix0KSk6dD1SLGc9dC5wYXJlbnQoKSxiLnZlcmJvc2UoXCJEZXRlcm1pbmVkIHBhcmVudCBlbGVtZW50IGZvciBjcmVhdGluZyBjb250ZXh0XCIsZykpOnguY29udGV4dD8oZz1lKHguY29udGV4dCksYi52ZXJib3NlKFwiVXNpbmcgc2VsZWN0b3IgZm9yIHRhYiBjb250ZXh0XCIseC5jb250ZXh0LGcpKTpnPWUoXCJib2R5XCIpLHguY2hpbGRyZW5Pbmx5PyhwPWcuY2hpbGRyZW4oay50YWJzKSxiLmRlYnVnKFwiU2VhcmNoaW5nIHRhYiBjb250ZXh0IGNoaWxkcmVuIGZvciB0YWJzXCIsZyxwKSk6KHA9Zy5maW5kKGsudGFicyksYi5kZWJ1ZyhcIlNlYXJjaGluZyB0YWIgY29udGV4dCBmb3IgdGFic1wiLGcscCkpfSxmaXg6e2NhbGxiYWNrczpmdW5jdGlvbigpe2UuaXNQbGFpbk9iamVjdChvKSYmKG8ub25UYWJMb2FkfHxvLm9uVGFiSW5pdCkmJihvLm9uVGFiTG9hZCYmKG8ub25Mb2FkPW8ub25UYWJMb2FkLGRlbGV0ZSBvLm9uVGFiTG9hZCxiLmVycm9yKFMubGVnYWN5TG9hZCxvLm9uTG9hZCkpLG8ub25UYWJJbml0JiYoby5vbkZpcnN0TG9hZD1vLm9uVGFiSW5pdCxkZWxldGUgby5vblRhYkluaXQsYi5lcnJvcihTLmxlZ2FjeUluaXQsby5vbkZpcnN0TG9hZCkpLHg9ZS5leHRlbmQoITAse30sZS5mbi50YWIuc2V0dGluZ3MsbykpfX0saW5pdGlhbGl6ZUhpc3Rvcnk6ZnVuY3Rpb24oKXtpZihiLmRlYnVnKFwiSW5pdGlhbGl6aW5nIHBhZ2Ugc3RhdGVcIiksZS5hZGRyZXNzPT09aSlyZXR1cm4gYi5lcnJvcihTLnN0YXRlKSwhMTtpZihcInN0YXRlXCI9PXguaGlzdG9yeVR5cGUpe2lmKGIuZGVidWcoXCJVc2luZyBIVE1MNSB0byBtYW5hZ2Ugc3RhdGVcIikseC5wYXRoPT09ITEpcmV0dXJuIGIuZXJyb3IoUy5wYXRoKSwhMTtlLmFkZHJlc3MuaGlzdG9yeSghMCkuc3RhdGUoeC5wYXRoKX1lLmFkZHJlc3MuYmluZChcImNoYW5nZVwiLGIuZXZlbnQuaGlzdG9yeS5jaGFuZ2UpfSxldmVudDp7Y2xpY2s6ZnVuY3Rpb24odCl7dmFyIG49ZSh0aGlzKS5kYXRhKHcudGFiKTtuIT09aT8oeC5oaXN0b3J5PyhiLnZlcmJvc2UoXCJVcGRhdGluZyBwYWdlIHN0YXRlXCIsdCksZS5hZGRyZXNzLnZhbHVlKG4pKTooYi52ZXJib3NlKFwiQ2hhbmdpbmcgdGFiXCIsdCksYi5jaGFuZ2VUYWIobikpLHQucHJldmVudERlZmF1bHQoKSk6Yi5kZWJ1ZyhcIk5vIHRhYiBzcGVjaWZpZWRcIil9LGhpc3Rvcnk6e2NoYW5nZTpmdW5jdGlvbih0KXt2YXIgbj10LnBhdGhOYW1lcy5qb2luKFwiL1wiKXx8Yi5nZXQuaW5pdGlhbFBhdGgoKSxvPXgudGVtcGxhdGVzLmRldGVybWluZVRpdGxlKG4pfHwhMTtiLnBlcmZvcm1hbmNlLmRpc3BsYXkoKSxiLmRlYnVnKFwiSGlzdG9yeSBjaGFuZ2UgZXZlbnRcIixuLHQpLHk9dCxuIT09aSYmYi5jaGFuZ2VUYWIobiksbyYmZS5hZGRyZXNzLnRpdGxlKG8pfX19LHJlZnJlc2g6ZnVuY3Rpb24oKXt2JiYoYi5kZWJ1ZyhcIlJlZnJlc2hpbmcgdGFiXCIsdiksYi5jaGFuZ2VUYWIodikpfSxjYWNoZTp7cmVhZDpmdW5jdGlvbihlKXtyZXR1cm4gZSE9PWk/UFtlXTohMX0sYWRkOmZ1bmN0aW9uKGUsdCl7ZT1lfHx2LGIuZGVidWcoXCJBZGRpbmcgY2FjaGVkIGNvbnRlbnQgZm9yXCIsZSksUFtlXT10fSxyZW1vdmU6ZnVuY3Rpb24oZSl7ZT1lfHx2LGIuZGVidWcoXCJSZW1vdmluZyBjYWNoZWQgY29udGVudCBmb3JcIixlKSxkZWxldGUgUFtlXX19LHNldDp7YXV0bzpmdW5jdGlvbigpe3ZhciB0PVwic3RyaW5nXCI9PXR5cGVvZiB4LnBhdGg/eC5wYXRoLnJlcGxhY2UoL1xcLyQvLFwiXCIpK1wiL3skdGFifVwiOlwiL3skdGFifVwiO2IudmVyYm9zZShcIlNldHRpbmcgdXAgYXV0b21hdGljIHRhYiByZXRyaWV2YWwgZnJvbSBzZXJ2ZXJcIix0KSxlLmlzUGxhaW5PYmplY3QoeC5hcGlTZXR0aW5ncyk/eC5hcGlTZXR0aW5ncy51cmw9dDp4LmFwaVNldHRpbmdzPXt1cmw6dH19LGxvYWRpbmc6ZnVuY3Rpb24oZSl7dmFyIHQ9Yi5nZXQudGFiRWxlbWVudChlKSxuPXQuaGFzQ2xhc3MoQy5sb2FkaW5nKTtufHwoYi52ZXJib3NlKFwiU2V0dGluZyBsb2FkaW5nIHN0YXRlIGZvclwiLHQpLHQuYWRkQ2xhc3MoQy5sb2FkaW5nKS5zaWJsaW5ncyhwKS5yZW1vdmVDbGFzcyhDLmFjdGl2ZStcIiBcIitDLmxvYWRpbmcpLHQubGVuZ3RoPjAmJngub25SZXF1ZXN0LmNhbGwodFswXSxlKSl9LHN0YXRlOmZ1bmN0aW9uKHQpe2UuYWRkcmVzcy52YWx1ZSh0KX19LGNoYW5nZVRhYjpmdW5jdGlvbihuKXt2YXIgaT10Lmhpc3RvcnkmJnQuaGlzdG9yeS5wdXNoU3RhdGUsbz1pJiZ4Lmlnbm9yZUZpcnN0TG9hZCYmRSxhPXguYXV0b3x8ZS5pc1BsYWluT2JqZWN0KHguYXBpU2V0dGluZ3MpLHI9YSYmIW8/Yi51dGlsaXRpZXMucGF0aFRvQXJyYXkobik6Yi5nZXQuZGVmYXVsdFBhdGhBcnJheShuKTtuPWIudXRpbGl0aWVzLmFycmF5VG9QYXRoKHIpLGUuZWFjaChyLGZ1bmN0aW9uKHQsaSl7dmFyIHMsYyxsLHUsZD1yLnNsaWNlKDAsdCsxKSxtPWIudXRpbGl0aWVzLmFycmF5VG9QYXRoKGQpLGY9Yi5pcy50YWIobSkscD10KzE9PXIubGVuZ3RoLGs9Yi5nZXQudGFiRWxlbWVudChtKTtpZihiLnZlcmJvc2UoXCJMb29raW5nIGZvciB0YWJcIixpKSxmKXtpZihiLnZlcmJvc2UoXCJUYWIgd2FzIGZvdW5kXCIsaSksdj1tLGg9Yi51dGlsaXRpZXMuZmlsdGVyQXJyYXkocixkKSxwP3U9ITA6KGM9ci5zbGljZSgwLHQrMiksbD1iLnV0aWxpdGllcy5hcnJheVRvUGF0aChjKSx1PSFiLmlzLnRhYihsKSx1JiZiLnZlcmJvc2UoXCJUYWIgcGFyYW1ldGVycyBmb3VuZFwiLGMpKSx1JiZhKXJldHVybiBvPyhiLmRlYnVnKFwiSWdub3JpbmcgcmVtb3RlIGNvbnRlbnQgb24gZmlyc3QgdGFiIGxvYWRcIixtKSxFPSExLGIuY2FjaGUuYWRkKG4say5odG1sKCkpLGIuYWN0aXZhdGUuYWxsKG0pLHgub25GaXJzdExvYWQuY2FsbChrWzBdLG0saCx5KSx4Lm9uTG9hZC5jYWxsKGtbMF0sbSxoLHkpKTooYi5hY3RpdmF0ZS5uYXZpZ2F0aW9uKG0pLGIuZmV0Y2guY29udGVudChtLG4pKSwhMTtiLmRlYnVnKFwiT3BlbmVkIGxvY2FsIHRhYlwiLG0pLGIuYWN0aXZhdGUuYWxsKG0pLGIuY2FjaGUucmVhZChtKXx8KGIuY2FjaGUuYWRkKG0sITApLGIuZGVidWcoXCJGaXJzdCB0aW1lIHRhYiBsb2FkZWQgY2FsbGluZyB0YWIgaW5pdFwiKSx4Lm9uRmlyc3RMb2FkLmNhbGwoa1swXSxtLGgseSkpLHgub25Mb2FkLmNhbGwoa1swXSxtLGgseSl9ZWxzZXtpZigtMSE9bi5zZWFyY2goXCIvXCIpfHxcIlwiPT09bilyZXR1cm4gYi5lcnJvcihTLm1pc3NpbmdUYWIsUixnLG0pLCExO2lmKHM9ZShcIiNcIituKycsIGFbbmFtZT1cIicrbisnXCJdJyksbT1zLmNsb3Nlc3QoXCJbZGF0YS10YWJdXCIpLmRhdGEody50YWIpLGs9Yi5nZXQudGFiRWxlbWVudChtKSxzJiZzLmxlbmd0aD4wJiZtKXJldHVybiBiLmRlYnVnKFwiQW5jaG9yIGxpbmsgdXNlZCwgb3BlbmluZyBwYXJlbnQgdGFiXCIsayxzKSxrLmhhc0NsYXNzKEMuYWN0aXZlKXx8c2V0VGltZW91dChmdW5jdGlvbigpe2Iuc2Nyb2xsVG8ocyl9LDApLGIuYWN0aXZhdGUuYWxsKG0pLGIuY2FjaGUucmVhZChtKXx8KGIuY2FjaGUuYWRkKG0sITApLGIuZGVidWcoXCJGaXJzdCB0aW1lIHRhYiBsb2FkZWQgY2FsbGluZyB0YWIgaW5pdFwiKSx4Lm9uRmlyc3RMb2FkLmNhbGwoa1swXSxtLGgseSkpLHgub25Mb2FkLmNhbGwoa1swXSxtLGgseSksITF9fSl9LHNjcm9sbFRvOmZ1bmN0aW9uKHQpe3ZhciBpPXQmJnQubGVuZ3RoPjA/dC5vZmZzZXQoKS50b3A6ITE7aSE9PSExJiYoYi5kZWJ1ZyhcIkZvcmNpbmcgc2Nyb2xsIHRvIGFuIGluLXBhZ2UgbGluayBpbiBhIGhpZGRlbiB0YWJcIixpLHQpLGUobikuc2Nyb2xsVG9wKGkpKX0sdXBkYXRlOntjb250ZW50OmZ1bmN0aW9uKGUsdCxuKXt2YXIgbz1iLmdldC50YWJFbGVtZW50KGUpLGE9b1swXTtuPW4hPT1pP246eC5ldmFsdWF0ZVNjcmlwdHMsbj8oYi5kZWJ1ZyhcIlVwZGF0aW5nIEhUTUwgYW5kIGV2YWx1YXRpbmcgaW5saW5lIHNjcmlwdHNcIixlLHQpLG8uaHRtbCh0KSk6KGIuZGVidWcoXCJVcGRhdGluZyBIVE1MXCIsZSx0KSxhLmlubmVySFRNTD10KX19LGZldGNoOntjb250ZW50OmZ1bmN0aW9uKHQsbil7dmFyIG8sYSxyPWIuZ2V0LnRhYkVsZW1lbnQodCkscz17ZGF0YVR5cGU6XCJodG1sXCIsZW5jb2RlUGFyYW1ldGVyczohMSxvbjpcIm5vd1wiLGNhY2hlOnguYWx3YXlzUmVmcmVzaCxoZWFkZXJzOntcIlgtUmVtb3RlXCI6ITB9LG9uU3VjY2VzczpmdW5jdGlvbihlKXtiLmNhY2hlLmFkZChuLGUpLGIudXBkYXRlLmNvbnRlbnQodCxlKSx0PT12PyhiLmRlYnVnKFwiQ29udGVudCBsb2FkZWRcIix0KSxiLmFjdGl2YXRlLnRhYih0KSk6Yi5kZWJ1ZyhcIkNvbnRlbnQgbG9hZGVkIGluIGJhY2tncm91bmRcIix0KSx4Lm9uRmlyc3RMb2FkLmNhbGwoclswXSx0LGgseSkseC5vbkxvYWQuY2FsbChyWzBdLHQsaCx5KX0sdXJsRGF0YTp7dGFiOm59fSxjPXIuYXBpKFwiZ2V0IHJlcXVlc3RcIil8fCExLGw9YyYmXCJwZW5kaW5nXCI9PT1jLnN0YXRlKCk7bj1ufHx0LGE9Yi5jYWNoZS5yZWFkKG4pLHguY2FjaGUmJmE/KGIuYWN0aXZhdGUudGFiKHQpLGIuZGVidWcoXCJBZGRpbmcgY2FjaGVkIGNvbnRlbnRcIixuKSxcIm9uY2VcIj09eC5ldmFsdWF0ZVNjcmlwdHM/Yi51cGRhdGUuY29udGVudCh0LGEsITEpOmIudXBkYXRlLmNvbnRlbnQodCxhKSx4Lm9uTG9hZC5jYWxsKHJbMF0sdCxoLHkpKTpsPyhiLnNldC5sb2FkaW5nKHQpLGIuZGVidWcoXCJDb250ZW50IGlzIGFscmVhZHkgbG9hZGluZ1wiLG4pKTplLmFwaSE9PWk/KG89ZS5leHRlbmQoITAse30seC5hcGlTZXR0aW5ncyxzKSxiLmRlYnVnKFwiUmV0cmlldmluZyByZW1vdGUgY29udGVudFwiLG4sbyksYi5zZXQubG9hZGluZyh0KSxyLmFwaShvKSk6Yi5lcnJvcihTLmFwaSl9fSxhY3RpdmF0ZTp7YWxsOmZ1bmN0aW9uKGUpe2IuYWN0aXZhdGUudGFiKGUpLGIuYWN0aXZhdGUubmF2aWdhdGlvbihlKX0sdGFiOmZ1bmN0aW9uKGUpe3ZhciB0PWIuZ2V0LnRhYkVsZW1lbnQoZSksbj10Lmhhc0NsYXNzKEMuYWN0aXZlKTtiLnZlcmJvc2UoXCJTaG93aW5nIHRhYiBjb250ZW50IGZvclwiLHQpLG58fCh0LmFkZENsYXNzKEMuYWN0aXZlKS5zaWJsaW5ncyhwKS5yZW1vdmVDbGFzcyhDLmFjdGl2ZStcIiBcIitDLmxvYWRpbmcpLHQubGVuZ3RoPjAmJngub25WaXNpYmxlLmNhbGwodFswXSxlKSl9LG5hdmlnYXRpb246ZnVuY3Rpb24oZSl7dmFyIHQ9Yi5nZXQubmF2RWxlbWVudChlKSxuPXQuaGFzQ2xhc3MoQy5hY3RpdmUpO2IudmVyYm9zZShcIkFjdGl2YXRpbmcgdGFiIG5hdmlnYXRpb24gZm9yXCIsdCxlKSxufHx0LmFkZENsYXNzKEMuYWN0aXZlKS5zaWJsaW5ncyhyKS5yZW1vdmVDbGFzcyhDLmFjdGl2ZStcIiBcIitDLmxvYWRpbmcpfX0sZGVhY3RpdmF0ZTp7YWxsOmZ1bmN0aW9uKCl7Yi5kZWFjdGl2YXRlLm5hdmlnYXRpb24oKSxiLmRlYWN0aXZhdGUudGFicygpfSxuYXZpZ2F0aW9uOmZ1bmN0aW9uKCl7ci5yZW1vdmVDbGFzcyhDLmFjdGl2ZSl9LHRhYnM6ZnVuY3Rpb24oKXtwLnJlbW92ZUNsYXNzKEMuYWN0aXZlK1wiIFwiK0MubG9hZGluZyl9fSxpczp7dGFiOmZ1bmN0aW9uKGUpe3JldHVybiBlIT09aT9iLmdldC50YWJFbGVtZW50KGUpLmxlbmd0aD4wOiExfX0sZ2V0Ontpbml0aWFsUGF0aDpmdW5jdGlvbigpe3JldHVybiByLmVxKDApLmRhdGEody50YWIpfHxwLmVxKDApLmRhdGEody50YWIpfSxwYXRoOmZ1bmN0aW9uKCl7cmV0dXJuIGUuYWRkcmVzcy52YWx1ZSgpfSxkZWZhdWx0UGF0aEFycmF5OmZ1bmN0aW9uKGUpe3JldHVybiBiLnV0aWxpdGllcy5wYXRoVG9BcnJheShiLmdldC5kZWZhdWx0UGF0aChlKSl9LGRlZmF1bHRQYXRoOmZ1bmN0aW9uKGUpe3ZhciB0PXIuZmlsdGVyKFwiW2RhdGEtXCIrdy50YWIrJ149XCInK2UrJy9cIl0nKS5lcSgwKSxuPXQuZGF0YSh3LnRhYil8fCExO2lmKG4pe2lmKGIuZGVidWcoXCJGb3VuZCBkZWZhdWx0IHRhYlwiLG4pLEY8eC5tYXhEZXB0aClyZXR1cm4gRisrLGIuZ2V0LmRlZmF1bHRQYXRoKG4pO2IuZXJyb3IoUy5yZWN1cnNpb24pfWVsc2UgYi5kZWJ1ZyhcIk5vIGRlZmF1bHQgdGFicyBmb3VuZCBmb3JcIixlLHApO3JldHVybiBGPTAsZX0sbmF2RWxlbWVudDpmdW5jdGlvbihlKXtyZXR1cm4gZT1lfHx2LHIuZmlsdGVyKFwiW2RhdGEtXCIrdy50YWIrJz1cIicrZSsnXCJdJyl9LHRhYkVsZW1lbnQ6ZnVuY3Rpb24oZSl7dmFyIHQsbixpLG87cmV0dXJuIGU9ZXx8dixpPWIudXRpbGl0aWVzLnBhdGhUb0FycmF5KGUpLG89Yi51dGlsaXRpZXMubGFzdChpKSx0PXAuZmlsdGVyKFwiW2RhdGEtXCIrdy50YWIrJz1cIicrZSsnXCJdJyksbj1wLmZpbHRlcihcIltkYXRhLVwiK3cudGFiKyc9XCInK28rJ1wiXScpLHQubGVuZ3RoPjA/dDpufSx0YWI6ZnVuY3Rpb24oKXtyZXR1cm4gdn19LHV0aWxpdGllczp7ZmlsdGVyQXJyYXk6ZnVuY3Rpb24odCxuKXtyZXR1cm4gZS5ncmVwKHQsZnVuY3Rpb24odCl7cmV0dXJuLTE9PWUuaW5BcnJheSh0LG4pfSl9LGxhc3Q6ZnVuY3Rpb24odCl7cmV0dXJuIGUuaXNBcnJheSh0KT90W3QubGVuZ3RoLTFdOiExfSxwYXRoVG9BcnJheTpmdW5jdGlvbihlKXtyZXR1cm4gZT09PWkmJihlPXYpLFwic3RyaW5nXCI9PXR5cGVvZiBlP2Uuc3BsaXQoXCIvXCIpOltlXX0sYXJyYXlUb1BhdGg6ZnVuY3Rpb24odCl7cmV0dXJuIGUuaXNBcnJheSh0KT90LmpvaW4oXCIvXCIpOiExfX0sc2V0dGluZzpmdW5jdGlvbih0LG4pe2lmKGIuZGVidWcoXCJDaGFuZ2luZyBzZXR0aW5nXCIsdCxuKSxlLmlzUGxhaW5PYmplY3QodCkpZS5leHRlbmQoITAseCx0KTtlbHNle2lmKG49PT1pKXJldHVybiB4W3RdO3hbdF09bn19LGludGVybmFsOmZ1bmN0aW9uKHQsbil7aWYoZS5pc1BsYWluT2JqZWN0KHQpKWUuZXh0ZW5kKCEwLGIsdCk7ZWxzZXtpZihuPT09aSlyZXR1cm4gYlt0XTtiW3RdPW59fSxkZWJ1ZzpmdW5jdGlvbigpe3guZGVidWcmJih4LnBlcmZvcm1hbmNlP2IucGVyZm9ybWFuY2UubG9nKGFyZ3VtZW50cyk6KGIuZGVidWc9RnVuY3Rpb24ucHJvdG90eXBlLmJpbmQuY2FsbChjb25zb2xlLmluZm8sY29uc29sZSx4Lm5hbWUrXCI6XCIpLGIuZGVidWcuYXBwbHkoY29uc29sZSxhcmd1bWVudHMpKSl9LHZlcmJvc2U6ZnVuY3Rpb24oKXt4LnZlcmJvc2UmJnguZGVidWcmJih4LnBlcmZvcm1hbmNlP2IucGVyZm9ybWFuY2UubG9nKGFyZ3VtZW50cyk6KGIudmVyYm9zZT1GdW5jdGlvbi5wcm90b3R5cGUuYmluZC5jYWxsKGNvbnNvbGUuaW5mbyxjb25zb2xlLHgubmFtZStcIjpcIiksYi52ZXJib3NlLmFwcGx5KGNvbnNvbGUsYXJndW1lbnRzKSkpfSxlcnJvcjpmdW5jdGlvbigpe2IuZXJyb3I9RnVuY3Rpb24ucHJvdG90eXBlLmJpbmQuY2FsbChjb25zb2xlLmVycm9yLGNvbnNvbGUseC5uYW1lK1wiOlwiKSxiLmVycm9yLmFwcGx5KGNvbnNvbGUsYXJndW1lbnRzKX0scGVyZm9ybWFuY2U6e2xvZzpmdW5jdGlvbihlKXt2YXIgdCxuLGk7eC5wZXJmb3JtYW5jZSYmKHQ9KG5ldyBEYXRlKS5nZXRUaW1lKCksaT1jfHx0LG49dC1pLGM9dCxsLnB1c2goe05hbWU6ZVswXSxBcmd1bWVudHM6W10uc2xpY2UuY2FsbChlLDEpfHxcIlwiLEVsZW1lbnQ6RCxcIkV4ZWN1dGlvbiBUaW1lXCI6bn0pKSxjbGVhclRpbWVvdXQoYi5wZXJmb3JtYW5jZS50aW1lciksYi5wZXJmb3JtYW5jZS50aW1lcj1zZXRUaW1lb3V0KGIucGVyZm9ybWFuY2UuZGlzcGxheSw1MDApfSxkaXNwbGF5OmZ1bmN0aW9uKCl7dmFyIHQ9eC5uYW1lK1wiOlwiLG49MDtjPSExLGNsZWFyVGltZW91dChiLnBlcmZvcm1hbmNlLnRpbWVyKSxlLmVhY2gobCxmdW5jdGlvbihlLHQpe24rPXRbXCJFeGVjdXRpb24gVGltZVwiXX0pLHQrPVwiIFwiK24rXCJtc1wiLHMmJih0Kz1cIiAnXCIrcytcIidcIiksKGNvbnNvbGUuZ3JvdXAhPT1pfHxjb25zb2xlLnRhYmxlIT09aSkmJmwubGVuZ3RoPjAmJihjb25zb2xlLmdyb3VwQ29sbGFwc2VkKHQpLGNvbnNvbGUudGFibGU/Y29uc29sZS50YWJsZShsKTplLmVhY2gobCxmdW5jdGlvbihlLHQpe2NvbnNvbGUubG9nKHQuTmFtZStcIjogXCIrdFtcIkV4ZWN1dGlvbiBUaW1lXCJdK1wibXNcIil9KSxjb25zb2xlLmdyb3VwRW5kKCkpLGw9W119fSxpbnZva2U6ZnVuY3Rpb24odCxuLG8pe3ZhciByLHMsYyxsPU87cmV0dXJuIG49bnx8bSxvPUR8fG8sXCJzdHJpbmdcIj09dHlwZW9mIHQmJmwhPT1pJiYodD10LnNwbGl0KC9bXFwuIF0vKSxyPXQubGVuZ3RoLTEsZS5lYWNoKHQsZnVuY3Rpb24obixvKXt2YXIgYT1uIT1yP28rdFtuKzFdLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpK3RbbisxXS5zbGljZSgxKTp0O2lmKGUuaXNQbGFpbk9iamVjdChsW2FdKSYmbiE9cilsPWxbYV07ZWxzZXtpZihsW2FdIT09aSlyZXR1cm4gcz1sW2FdLCExO2lmKCFlLmlzUGxhaW5PYmplY3QobFtvXSl8fG49PXIpcmV0dXJuIGxbb10hPT1pPyhzPWxbb10sITEpOihiLmVycm9yKFMubWV0aG9kLHQpLCExKTtsPWxbb119fSkpLGUuaXNGdW5jdGlvbihzKT9jPXMuYXBwbHkobyxuKTpzIT09aSYmKGM9cyksZS5pc0FycmF5KGEpP2EucHVzaChjKTphIT09aT9hPVthLGNdOmMhPT1pJiYoYT1jKSxzfX0sZD8oTz09PWkmJmIuaW5pdGlhbGl6ZSgpLGIuaW52b2tlKHUpKTooTyE9PWkmJk8uaW52b2tlKFwiZGVzdHJveVwiKSxiLmluaXRpYWxpemUoKSl9KSxhIT09aT9hOnRoaXN9LGUudGFiPWZ1bmN0aW9uKCl7ZSh0KS50YWIuYXBwbHkodGhpcyxhcmd1bWVudHMpfSxlLmZuLnRhYi5zZXR0aW5ncz17bmFtZTpcIlRhYlwiLG5hbWVzcGFjZTpcInRhYlwiLGRlYnVnOiExLHZlcmJvc2U6ITEscGVyZm9ybWFuY2U6ITAsYXV0bzohMSxoaXN0b3J5OiExLGhpc3RvcnlUeXBlOlwiaGFzaFwiLHBhdGg6ITEsY29udGV4dDohMSxjaGlsZHJlbk9ubHk6ITEsbWF4RGVwdGg6MjUsYWx3YXlzUmVmcmVzaDohMSxjYWNoZTohMCxpZ25vcmVGaXJzdExvYWQ6ITEsYXBpU2V0dGluZ3M6ITEsZXZhbHVhdGVTY3JpcHRzOlwib25jZVwiLG9uRmlyc3RMb2FkOmZ1bmN0aW9uKGUsdCxuKXt9LG9uTG9hZDpmdW5jdGlvbihlLHQsbil7fSxvblZpc2libGU6ZnVuY3Rpb24oZSx0LG4pe30sb25SZXF1ZXN0OmZ1bmN0aW9uKGUsdCxuKXt9LHRlbXBsYXRlczp7ZGV0ZXJtaW5lVGl0bGU6ZnVuY3Rpb24oZSl7fX0sZXJyb3I6e2FwaTpcIllvdSBhdHRlbXB0ZWQgdG8gbG9hZCBjb250ZW50IHdpdGhvdXQgQVBJIG1vZHVsZVwiLG1ldGhvZDpcIlRoZSBtZXRob2QgeW91IGNhbGxlZCBpcyBub3QgZGVmaW5lZFwiLG1pc3NpbmdUYWI6XCJBY3RpdmF0ZWQgdGFiIGNhbm5vdCBiZSBmb3VuZC4gVGFicyBhcmUgY2FzZS1zZW5zaXRpdmUuXCIsbm9Db250ZW50OlwiVGhlIHRhYiB5b3Ugc3BlY2lmaWVkIGlzIG1pc3NpbmcgYSBjb250ZW50IHVybC5cIixwYXRoOlwiSGlzdG9yeSBlbmFibGVkLCBidXQgbm8gcGF0aCB3YXMgc3BlY2lmaWVkXCIscmVjdXJzaW9uOlwiTWF4IHJlY3Vyc2l2ZSBkZXB0aCByZWFjaGVkXCIsbGVnYWN5SW5pdDpcIm9uVGFiSW5pdCBoYXMgYmVlbiByZW5hbWVkIHRvIG9uRmlyc3RMb2FkIGluIDIuMCwgcGxlYXNlIGFkanVzdCB5b3VyIGNvZGUuXCIsbGVnYWN5TG9hZDpcIm9uVGFiTG9hZCBoYXMgYmVlbiByZW5hbWVkIHRvIG9uTG9hZCBpbiAyLjAuIFBsZWFzZSBhZGp1c3QgeW91ciBjb2RlXCIsc3RhdGU6XCJIaXN0b3J5IHJlcXVpcmVzIEFzdWFsJ3MgQWRkcmVzcyBsaWJyYXJ5IDxodHRwczovL2dpdGh1Yi5jb20vYXN1YWwvanF1ZXJ5LWFkZHJlc3M+XCJ9LG1ldGFkYXRhOnt0YWI6XCJ0YWJcIixsb2FkZWQ6XCJsb2FkZWRcIixwcm9taXNlOlwicHJvbWlzZVwifSxjbGFzc05hbWU6e2xvYWRpbmc6XCJsb2FkaW5nXCIsYWN0aXZlOlwiYWN0aXZlXCJ9LHNlbGVjdG9yOnt0YWJzOlwiLnVpLnRhYlwiLHVpOlwiLnVpXCJ9fX0oalF1ZXJ5LHdpbmRvdyxkb2N1bWVudCksZnVuY3Rpb24oZSx0LG4saSl7XCJ1c2Ugc3RyaWN0XCI7ZS5mbi50cmFuc2l0aW9uPWZ1bmN0aW9uKCl7e3ZhciBvLGE9ZSh0aGlzKSxyPWEuc2VsZWN0b3J8fFwiXCIscz0obmV3IERhdGUpLmdldFRpbWUoKSxjPVtdLGw9YXJndW1lbnRzLHU9bFswXSxkPVtdLnNsaWNlLmNhbGwoYXJndW1lbnRzLDEpLG09XCJzdHJpbmdcIj09dHlwZW9mIHU7dC5yZXF1ZXN0QW5pbWF0aW9uRnJhbWV8fHQubW96UmVxdWVzdEFuaW1hdGlvbkZyYW1lfHx0LndlYmtpdFJlcXVlc3RBbmltYXRpb25GcmFtZXx8dC5tc1JlcXVlc3RBbmltYXRpb25GcmFtZXx8ZnVuY3Rpb24oZSl7c2V0VGltZW91dChlLDApfX1yZXR1cm4gYS5lYWNoKGZ1bmN0aW9uKHQpe3ZhciBmLGcscCx2LGgsYix5LHgsQyx3PWUodGhpcyksaz10aGlzO0M9e2luaXRpYWxpemU6ZnVuY3Rpb24oKXtmPUMuZ2V0LnNldHRpbmdzLmFwcGx5KGssbCksdj1mLmNsYXNzTmFtZSxwPWYuZXJyb3IsaD1mLm1ldGFkYXRhLHg9XCIuXCIrZi5uYW1lc3BhY2UseT1cIm1vZHVsZS1cIitmLm5hbWVzcGFjZSxnPXcuZGF0YSh5KXx8QyxiPUMuZ2V0LmFuaW1hdGlvbkVuZEV2ZW50KCksbSYmKG09Qy5pbnZva2UodSkpLG09PT0hMSYmKEMudmVyYm9zZShcIkNvbnZlcnRlZCBhcmd1bWVudHMgaW50byBzZXR0aW5ncyBvYmplY3RcIixmKSxmLmludGVydmFsP0MuZGVsYXkoZi5hbmltYXRlKTpDLmFuaW1hdGUoKSxDLmluc3RhbnRpYXRlKCkpfSxpbnN0YW50aWF0ZTpmdW5jdGlvbigpe0MudmVyYm9zZShcIlN0b3JpbmcgaW5zdGFuY2Ugb2YgbW9kdWxlXCIsQyksZz1DLHcuZGF0YSh5LGcpfSxkZXN0cm95OmZ1bmN0aW9uKCl7Qy52ZXJib3NlKFwiRGVzdHJveWluZyBwcmV2aW91cyBtb2R1bGUgZm9yXCIsayksdy5yZW1vdmVEYXRhKHkpfSxyZWZyZXNoOmZ1bmN0aW9uKCl7Qy52ZXJib3NlKFwiUmVmcmVzaGluZyBkaXNwbGF5IHR5cGUgb24gbmV4dCBhbmltYXRpb25cIiksZGVsZXRlIEMuZGlzcGxheVR5cGV9LGZvcmNlUmVwYWludDpmdW5jdGlvbigpe0MudmVyYm9zZShcIkZvcmNpbmcgZWxlbWVudCByZXBhaW50XCIpO3ZhciBlPXcucGFyZW50KCksdD13Lm5leHQoKTswPT09dC5sZW5ndGg/dy5kZXRhY2goKS5hcHBlbmRUbyhlKTp3LmRldGFjaCgpLmluc2VydEJlZm9yZSh0KX0scmVwYWludDpmdW5jdGlvbigpe0MudmVyYm9zZShcIlJlcGFpbnRpbmcgZWxlbWVudFwiKTtrLm9mZnNldFdpZHRofSxkZWxheTpmdW5jdGlvbihlKXt2YXIgbixvLHI9Qy5nZXQuYW5pbWF0aW9uRGlyZWN0aW9uKCk7cnx8KHI9Qy5jYW4udHJhbnNpdGlvbigpP0MuZ2V0LmRpcmVjdGlvbigpOlwic3RhdGljXCIpLGU9ZSE9PWk/ZTpmLmludGVydmFsLG49XCJhdXRvXCI9PWYucmV2ZXJzZSYmcj09di5vdXR3YXJkLG89bnx8MT09Zi5yZXZlcnNlPyhhLmxlbmd0aC10KSpmLmludGVydmFsOnQqZi5pbnRlcnZhbCxDLmRlYnVnKFwiRGVsYXlpbmcgYW5pbWF0aW9uIGJ5XCIsbyksc2V0VGltZW91dChDLmFuaW1hdGUsbyl9LGFuaW1hdGU6ZnVuY3Rpb24oZSl7aWYoZj1lfHxmLCFDLmlzLnN1cHBvcnRlZCgpKXJldHVybiBDLmVycm9yKHAuc3VwcG9ydCksITE7aWYoQy5kZWJ1ZyhcIlByZXBhcmluZyBhbmltYXRpb25cIixmLmFuaW1hdGlvbiksQy5pcy5hbmltYXRpbmcoKSl7aWYoZi5xdWV1ZSlyZXR1cm4hZi5hbGxvd1JlcGVhdHMmJkMuaGFzLmRpcmVjdGlvbigpJiZDLmlzLm9jY3VycmluZygpJiZDLnF1ZXVpbmchPT0hMD9DLmRlYnVnKFwiQW5pbWF0aW9uIGlzIGN1cnJlbnRseSBvY2N1cnJpbmcsIHByZXZlbnRpbmcgcXVldWVpbmcgc2FtZSBhbmltYXRpb25cIixmLmFuaW1hdGlvbik6Qy5xdWV1ZShmLmFuaW1hdGlvbiksITE7aWYoIWYuYWxsb3dSZXBlYXRzJiZDLmlzLm9jY3VycmluZygpKXJldHVybiBDLmRlYnVnKFwiQW5pbWF0aW9uIGlzIGFscmVhZHkgb2NjdXJyaW5nLCB3aWxsIG5vdCBleGVjdXRlIHJlcGVhdGVkIGFuaW1hdGlvblwiLGYuYW5pbWF0aW9uKSwhMTtDLmRlYnVnKFwiTmV3IGFuaW1hdGlvbiBzdGFydGVkLCBjb21wbGV0aW5nIHByZXZpb3VzIGVhcmx5XCIsZi5hbmltYXRpb24pLGcuY29tcGxldGUoKX1DLmNhbi5hbmltYXRlKCk/Qy5zZXQuYW5pbWF0aW5nKGYuYW5pbWF0aW9uKTpDLmVycm9yKHAubm9BbmltYXRpb24sZi5hbmltYXRpb24sayl9LHJlc2V0OmZ1bmN0aW9uKCl7Qy5kZWJ1ZyhcIlJlc2V0dGluZyBhbmltYXRpb24gdG8gYmVnaW5uaW5nIGNvbmRpdGlvbnNcIiksQy5yZW1vdmUuYW5pbWF0aW9uQ2FsbGJhY2tzKCksQy5yZXN0b3JlLmNvbmRpdGlvbnMoKSxDLnJlbW92ZS5hbmltYXRpbmcoKX0scXVldWU6ZnVuY3Rpb24oZSl7Qy5kZWJ1ZyhcIlF1ZXVlaW5nIGFuaW1hdGlvbiBvZlwiLGUpLEMucXVldWluZz0hMCx3Lm9uZShiK1wiLnF1ZXVlXCIreCxmdW5jdGlvbigpe0MucXVldWluZz0hMSxDLnJlcGFpbnQoKSxDLmFuaW1hdGUuYXBwbHkodGhpcyxmKX0pfSxjb21wbGV0ZTpmdW5jdGlvbihlKXtDLmRlYnVnKFwiQW5pbWF0aW9uIGNvbXBsZXRlXCIsZi5hbmltYXRpb24pLEMucmVtb3ZlLmNvbXBsZXRlQ2FsbGJhY2soKSxDLnJlbW92ZS5mYWlsU2FmZSgpLEMuaXMubG9vcGluZygpfHwoQy5pcy5vdXR3YXJkKCk/KEMudmVyYm9zZShcIkFuaW1hdGlvbiBpcyBvdXR3YXJkLCBoaWRpbmcgZWxlbWVudFwiKSxDLnJlc3RvcmUuY29uZGl0aW9ucygpLEMuaGlkZSgpKTpDLmlzLmlud2FyZCgpPyhDLnZlcmJvc2UoXCJBbmltYXRpb24gaXMgb3V0d2FyZCwgc2hvd2luZyBlbGVtZW50XCIpLEMucmVzdG9yZS5jb25kaXRpb25zKCksQy5zaG93KCkpOkMucmVzdG9yZS5jb25kaXRpb25zKCkpfSxmb3JjZTp7dmlzaWJsZTpmdW5jdGlvbigpe3ZhciBlPXcuYXR0cihcInN0eWxlXCIpLHQ9Qy5nZXQudXNlclN0eWxlKCksbj1DLmdldC5kaXNwbGF5VHlwZSgpLG89dCtcImRpc3BsYXk6IFwiK24rXCIgIWltcG9ydGFudDtcIixhPXcuY3NzKFwiZGlzcGxheVwiKSxyPWU9PT1pfHxcIlwiPT09ZTthIT09bj8oQy52ZXJib3NlKFwiT3ZlcnJpZGluZyBkZWZhdWx0IGRpc3BsYXkgdG8gc2hvdyBlbGVtZW50XCIsbiksdy5hdHRyKFwic3R5bGVcIixvKSk6ciYmdy5yZW1vdmVBdHRyKFwic3R5bGVcIil9LGhpZGRlbjpmdW5jdGlvbigpe3ZhciBlPXcuYXR0cihcInN0eWxlXCIpLHQ9dy5jc3MoXCJkaXNwbGF5XCIpLG49ZT09PWl8fFwiXCI9PT1lO1wibm9uZVwiPT09dHx8Qy5pcy5oaWRkZW4oKT9uJiZ3LnJlbW92ZUF0dHIoXCJzdHlsZVwiKTooQy52ZXJib3NlKFwiT3ZlcnJpZGluZyBkZWZhdWx0IGRpc3BsYXkgdG8gaGlkZSBlbGVtZW50XCIpLHcuY3NzKFwiZGlzcGxheVwiLFwibm9uZVwiKSl9fSxoYXM6e2RpcmVjdGlvbjpmdW5jdGlvbih0KXt2YXIgbj0hMTtyZXR1cm4gdD10fHxmLmFuaW1hdGlvbixcInN0cmluZ1wiPT10eXBlb2YgdCYmKHQ9dC5zcGxpdChcIiBcIiksZS5lYWNoKHQsZnVuY3Rpb24oZSx0KXsodD09PXYuaW53YXJkfHx0PT09di5vdXR3YXJkKSYmKG49ITApfSkpLG59LGlubGluZURpc3BsYXk6ZnVuY3Rpb24oKXt2YXIgdD13LmF0dHIoXCJzdHlsZVwiKXx8XCJcIjtyZXR1cm4gZS5pc0FycmF5KHQubWF0Y2goL2Rpc3BsYXkuKj87LyxcIlwiKSl9fSxzZXQ6e2FuaW1hdGluZzpmdW5jdGlvbihlKXt2YXIgdDtDLnJlbW92ZS5jb21wbGV0ZUNhbGxiYWNrKCksZT1lfHxmLmFuaW1hdGlvbix0PUMuZ2V0LmFuaW1hdGlvbkNsYXNzKGUpLEMuc2F2ZS5hbmltYXRpb24odCksQy5mb3JjZS52aXNpYmxlKCksQy5yZW1vdmUuaGlkZGVuKCksQy5yZW1vdmUuZGlyZWN0aW9uKCksQy5zdGFydC5hbmltYXRpb24odCl9LGR1cmF0aW9uOmZ1bmN0aW9uKGUsdCl7dD10fHxmLmR1cmF0aW9uLHQ9XCJudW1iZXJcIj09dHlwZW9mIHQ/dCtcIm1zXCI6dCwodHx8MD09PXQpJiYoQy52ZXJib3NlKFwiU2V0dGluZyBhbmltYXRpb24gZHVyYXRpb25cIix0KSx3LmNzcyh7XCJhbmltYXRpb24tZHVyYXRpb25cIjp0fSkpfSxkaXJlY3Rpb246ZnVuY3Rpb24oZSl7ZT1lfHxDLmdldC5kaXJlY3Rpb24oKSxlPT12Lmlud2FyZD9DLnNldC5pbndhcmQoKTpDLnNldC5vdXR3YXJkKCl9LGxvb3Bpbmc6ZnVuY3Rpb24oKXtDLmRlYnVnKFwiVHJhbnNpdGlvbiBzZXQgdG8gbG9vcFwiKSx3LmFkZENsYXNzKHYubG9vcGluZyl9LGhpZGRlbjpmdW5jdGlvbigpe3cuYWRkQ2xhc3Modi50cmFuc2l0aW9uKS5hZGRDbGFzcyh2LmhpZGRlbil9LGlud2FyZDpmdW5jdGlvbigpe0MuZGVidWcoXCJTZXR0aW5nIGRpcmVjdGlvbiB0byBpbndhcmRcIiksdy5yZW1vdmVDbGFzcyh2Lm91dHdhcmQpLmFkZENsYXNzKHYuaW53YXJkKX0sb3V0d2FyZDpmdW5jdGlvbigpe0MuZGVidWcoXCJTZXR0aW5nIGRpcmVjdGlvbiB0byBvdXR3YXJkXCIpLHcucmVtb3ZlQ2xhc3Modi5pbndhcmQpLmFkZENsYXNzKHYub3V0d2FyZCl9LHZpc2libGU6ZnVuY3Rpb24oKXt3LmFkZENsYXNzKHYudHJhbnNpdGlvbikuYWRkQ2xhc3Modi52aXNpYmxlKX19LHN0YXJ0OnthbmltYXRpb246ZnVuY3Rpb24oZSl7ZT1lfHxDLmdldC5hbmltYXRpb25DbGFzcygpLEMuZGVidWcoXCJTdGFydGluZyB0d2VlblwiLGUpLHcuYWRkQ2xhc3MoZSkub25lKGIrXCIuY29tcGxldGVcIit4LEMuY29tcGxldGUpLGYudXNlRmFpbFNhZmUmJkMuYWRkLmZhaWxTYWZlKCksQy5zZXQuZHVyYXRpb24oZi5kdXJhdGlvbiksZi5vblN0YXJ0LmNhbGwoayl9fSxzYXZlOnthbmltYXRpb246ZnVuY3Rpb24oZSl7Qy5jYWNoZXx8KEMuY2FjaGU9e30pLEMuY2FjaGUuYW5pbWF0aW9uPWV9LGRpc3BsYXlUeXBlOmZ1bmN0aW9uKGUpe1wibm9uZVwiIT09ZSYmdy5kYXRhKGguZGlzcGxheVR5cGUsZSl9LHRyYW5zaXRpb25FeGlzdHM6ZnVuY3Rpb24odCxuKXtlLmZuLnRyYW5zaXRpb24uZXhpc3RzW3RdPW4sQy52ZXJib3NlKFwiU2F2aW5nIGV4aXN0ZW5jZSBvZiB0cmFuc2l0aW9uXCIsdCxuKX19LHJlc3RvcmU6e2NvbmRpdGlvbnM6ZnVuY3Rpb24oKXt2YXIgZT1DLmdldC5jdXJyZW50QW5pbWF0aW9uKCk7ZSYmKHcucmVtb3ZlQ2xhc3MoZSksQy52ZXJib3NlKFwiUmVtb3ZpbmcgYW5pbWF0aW9uIGNsYXNzXCIsQy5jYWNoZSkpLEMucmVtb3ZlLmR1cmF0aW9uKCl9fSxhZGQ6e2ZhaWxTYWZlOmZ1bmN0aW9uKCl7dmFyIGU9Qy5nZXQuZHVyYXRpb24oKTtDLnRpbWVyPXNldFRpbWVvdXQoZnVuY3Rpb24oKXt3LnRyaWdnZXJIYW5kbGVyKGIpfSxlK2YuZmFpbFNhZmVEZWxheSksQy52ZXJib3NlKFwiQWRkaW5nIGZhaWwgc2FmZSB0aW1lclwiLEMudGltZXIpfX0scmVtb3ZlOnthbmltYXRpbmc6ZnVuY3Rpb24oKXt3LnJlbW92ZUNsYXNzKHYuYW5pbWF0aW5nKX0sYW5pbWF0aW9uQ2FsbGJhY2tzOmZ1bmN0aW9uKCl7Qy5yZW1vdmUucXVldWVDYWxsYmFjaygpLEMucmVtb3ZlLmNvbXBsZXRlQ2FsbGJhY2soKX0scXVldWVDYWxsYmFjazpmdW5jdGlvbigpe3cub2ZmKFwiLnF1ZXVlXCIreCl9LGNvbXBsZXRlQ2FsbGJhY2s6ZnVuY3Rpb24oKXt3Lm9mZihcIi5jb21wbGV0ZVwiK3gpfSxkaXNwbGF5OmZ1bmN0aW9uKCl7dy5jc3MoXCJkaXNwbGF5XCIsXCJcIil9LGRpcmVjdGlvbjpmdW5jdGlvbigpe3cucmVtb3ZlQ2xhc3Modi5pbndhcmQpLnJlbW92ZUNsYXNzKHYub3V0d2FyZCl9LGR1cmF0aW9uOmZ1bmN0aW9uKCl7dy5jc3MoXCJhbmltYXRpb24tZHVyYXRpb25cIixcIlwiKX0sZmFpbFNhZmU6ZnVuY3Rpb24oKXtDLnZlcmJvc2UoXCJSZW1vdmluZyBmYWlsIHNhZmUgdGltZXJcIixDLnRpbWVyKSxDLnRpbWVyJiZjbGVhclRpbWVvdXQoQy50aW1lcil9LGhpZGRlbjpmdW5jdGlvbigpe3cucmVtb3ZlQ2xhc3Modi5oaWRkZW4pfSx2aXNpYmxlOmZ1bmN0aW9uKCl7dy5yZW1vdmVDbGFzcyh2LnZpc2libGUpfSxsb29waW5nOmZ1bmN0aW9uKCl7Qy5kZWJ1ZyhcIlRyYW5zaXRpb25zIGFyZSBubyBsb25nZXIgbG9vcGluZ1wiKSxDLmlzLmxvb3BpbmcoKSYmKEMucmVzZXQoKSx3LnJlbW92ZUNsYXNzKHYubG9vcGluZykpfSx0cmFuc2l0aW9uOmZ1bmN0aW9uKCl7dy5yZW1vdmVDbGFzcyh2LnZpc2libGUpLnJlbW92ZUNsYXNzKHYuaGlkZGVuKX19LGdldDp7c2V0dGluZ3M6ZnVuY3Rpb24odCxuLGkpe3JldHVyblwib2JqZWN0XCI9PXR5cGVvZiB0P2UuZXh0ZW5kKCEwLHt9LGUuZm4udHJhbnNpdGlvbi5zZXR0aW5ncyx0KTpcImZ1bmN0aW9uXCI9PXR5cGVvZiBpP2UuZXh0ZW5kKHt9LGUuZm4udHJhbnNpdGlvbi5zZXR0aW5ncyx7YW5pbWF0aW9uOnQsb25Db21wbGV0ZTppLGR1cmF0aW9uOm59KTpcInN0cmluZ1wiPT10eXBlb2Ygbnx8XCJudW1iZXJcIj09dHlwZW9mIG4/ZS5leHRlbmQoe30sZS5mbi50cmFuc2l0aW9uLnNldHRpbmdzLHthbmltYXRpb246dCxkdXJhdGlvbjpufSk6XCJvYmplY3RcIj09dHlwZW9mIG4/ZS5leHRlbmQoe30sZS5mbi50cmFuc2l0aW9uLnNldHRpbmdzLG4se2FuaW1hdGlvbjp0fSk6XCJmdW5jdGlvblwiPT10eXBlb2Ygbj9lLmV4dGVuZCh7fSxlLmZuLnRyYW5zaXRpb24uc2V0dGluZ3Mse2FuaW1hdGlvbjp0LG9uQ29tcGxldGU6bn0pOmUuZXh0ZW5kKHt9LGUuZm4udHJhbnNpdGlvbi5zZXR0aW5ncyx7YW5pbWF0aW9uOnR9KX0sYW5pbWF0aW9uQ2xhc3M6ZnVuY3Rpb24oZSl7dmFyIHQ9ZXx8Zi5hbmltYXRpb24sbj1DLmNhbi50cmFuc2l0aW9uKCkmJiFDLmhhcy5kaXJlY3Rpb24oKT9DLmdldC5kaXJlY3Rpb24oKStcIiBcIjpcIlwiO3JldHVybiB2LmFuaW1hdGluZytcIiBcIit2LnRyYW5zaXRpb24rXCIgXCIrbit0fSxjdXJyZW50QW5pbWF0aW9uOmZ1bmN0aW9uKCl7cmV0dXJuIEMuY2FjaGUmJkMuY2FjaGUuYW5pbWF0aW9uIT09aT9DLmNhY2hlLmFuaW1hdGlvbjohMX0sY3VycmVudERpcmVjdGlvbjpmdW5jdGlvbigpe3JldHVybiBDLmlzLmlud2FyZCgpP3YuaW53YXJkOnYub3V0d2FyZH0sZGlyZWN0aW9uOmZ1bmN0aW9uKCl7cmV0dXJuIEMuaXMuaGlkZGVuKCl8fCFDLmlzLnZpc2libGUoKT92Lmlud2FyZDp2Lm91dHdhcmR9LGFuaW1hdGlvbkRpcmVjdGlvbjpmdW5jdGlvbih0KXt2YXIgbjtyZXR1cm4gdD10fHxmLmFuaW1hdGlvbixcInN0cmluZ1wiPT10eXBlb2YgdCYmKHQ9dC5zcGxpdChcIiBcIiksZS5lYWNoKHQsZnVuY3Rpb24oZSx0KXt0PT09di5pbndhcmQ/bj12Lmlud2FyZDp0PT09di5vdXR3YXJkJiYobj12Lm91dHdhcmQpfSkpLG4/bjohMX0sZHVyYXRpb246ZnVuY3Rpb24oZSl7cmV0dXJuIGU9ZXx8Zi5kdXJhdGlvbixlPT09ITEmJihlPXcuY3NzKFwiYW5pbWF0aW9uLWR1cmF0aW9uXCIpfHwwKSxcInN0cmluZ1wiPT10eXBlb2YgZT9lLmluZGV4T2YoXCJtc1wiKT4tMT9wYXJzZUZsb2F0KGUpOjFlMypwYXJzZUZsb2F0KGUpOmV9LGRpc3BsYXlUeXBlOmZ1bmN0aW9uKCl7cmV0dXJuIGYuZGlzcGxheVR5cGU/Zi5kaXNwbGF5VHlwZToody5kYXRhKGguZGlzcGxheVR5cGUpPT09aSYmQy5jYW4udHJhbnNpdGlvbighMCksdy5kYXRhKGguZGlzcGxheVR5cGUpKX0sdXNlclN0eWxlOmZ1bmN0aW9uKGUpe3JldHVybiBlPWV8fHcuYXR0cihcInN0eWxlXCIpfHxcIlwiLGUucmVwbGFjZSgvZGlzcGxheS4qPzsvLFwiXCIpfSx0cmFuc2l0aW9uRXhpc3RzOmZ1bmN0aW9uKHQpe3JldHVybiBlLmZuLnRyYW5zaXRpb24uZXhpc3RzW3RdfSxhbmltYXRpb25TdGFydEV2ZW50OmZ1bmN0aW9uKCl7dmFyIGUsdD1uLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiksbz17YW5pbWF0aW9uOlwiYW5pbWF0aW9uc3RhcnRcIixPQW5pbWF0aW9uOlwib0FuaW1hdGlvblN0YXJ0XCIsTW96QW5pbWF0aW9uOlwibW96QW5pbWF0aW9uU3RhcnRcIixXZWJraXRBbmltYXRpb246XCJ3ZWJraXRBbmltYXRpb25TdGFydFwifTtmb3IoZSBpbiBvKWlmKHQuc3R5bGVbZV0hPT1pKXJldHVybiBvW2VdO3JldHVybiExfSxhbmltYXRpb25FbmRFdmVudDpmdW5jdGlvbigpe3ZhciBlLHQ9bi5jcmVhdGVFbGVtZW50KFwiZGl2XCIpLG89e2FuaW1hdGlvbjpcImFuaW1hdGlvbmVuZFwiLE9BbmltYXRpb246XCJvQW5pbWF0aW9uRW5kXCIsTW96QW5pbWF0aW9uOlwibW96QW5pbWF0aW9uRW5kXCIsV2Via2l0QW5pbWF0aW9uOlwid2Via2l0QW5pbWF0aW9uRW5kXCJ9O2ZvcihlIGluIG8paWYodC5zdHlsZVtlXSE9PWkpcmV0dXJuIG9bZV07cmV0dXJuITF9fSxjYW46e3RyYW5zaXRpb246ZnVuY3Rpb24odCl7dmFyIG4sbyxhLHIscyxjLGwsdT1mLmFuaW1hdGlvbixkPUMuZ2V0LnRyYW5zaXRpb25FeGlzdHModSk7aWYoZD09PWl8fHQpe2lmKEMudmVyYm9zZShcIkRldGVybWluaW5nIHdoZXRoZXIgYW5pbWF0aW9uIGV4aXN0c1wiKSxuPXcuYXR0cihcImNsYXNzXCIpLG89dy5wcm9wKFwidGFnTmFtZVwiKSxhPWUoXCI8XCIrbytcIiAvPlwiKS5hZGRDbGFzcyhuKS5pbnNlcnRBZnRlcih3KSxyPWEuYWRkQ2xhc3ModSkucmVtb3ZlQ2xhc3Modi5pbndhcmQpLnJlbW92ZUNsYXNzKHYub3V0d2FyZCkuYWRkQ2xhc3Modi5hbmltYXRpbmcpLmFkZENsYXNzKHYudHJhbnNpdGlvbikuY3NzKFwiYW5pbWF0aW9uTmFtZVwiKSxzPWEuYWRkQ2xhc3Modi5pbndhcmQpLmNzcyhcImFuaW1hdGlvbk5hbWVcIiksbD1hLmF0dHIoXCJjbGFzc1wiLG4pLnJlbW92ZUF0dHIoXCJzdHlsZVwiKS5yZW1vdmVDbGFzcyh2LmhpZGRlbikucmVtb3ZlQ2xhc3Modi52aXNpYmxlKS5zaG93KCkuY3NzKFwiZGlzcGxheVwiKSxDLnZlcmJvc2UoXCJEZXRlcm1pbmluZyBmaW5hbCBkaXNwbGF5IHN0YXRlXCIsbCksQy5zYXZlLmRpc3BsYXlUeXBlKGwpLGEucmVtb3ZlKCksciE9cylDLmRlYnVnKFwiRGlyZWN0aW9uIGV4aXN0cyBmb3IgYW5pbWF0aW9uXCIsdSksYz0hMDtlbHNle2lmKFwibm9uZVwiPT1yfHwhcilyZXR1cm4gdm9pZCBDLmRlYnVnKFwiTm8gYW5pbWF0aW9uIGRlZmluZWQgaW4gY3NzXCIsdSk7Qy5kZWJ1ZyhcIlN0YXRpYyBhbmltYXRpb24gZm91bmRcIix1LGwpLGM9ITF9Qy5zYXZlLnRyYW5zaXRpb25FeGlzdHModSxjKX1yZXR1cm4gZCE9PWk/ZDpjfSxhbmltYXRlOmZ1bmN0aW9uKCl7cmV0dXJuIEMuY2FuLnRyYW5zaXRpb24oKSE9PWl9fSxpczp7YW5pbWF0aW5nOmZ1bmN0aW9uKCl7cmV0dXJuIHcuaGFzQ2xhc3Modi5hbmltYXRpbmcpfSxpbndhcmQ6ZnVuY3Rpb24oKXtyZXR1cm4gdy5oYXNDbGFzcyh2Lmlud2FyZCl9LG91dHdhcmQ6ZnVuY3Rpb24oKXtyZXR1cm4gdy5oYXNDbGFzcyh2Lm91dHdhcmQpfSxsb29waW5nOmZ1bmN0aW9uKCl7cmV0dXJuIHcuaGFzQ2xhc3Modi5sb29waW5nKX0sb2NjdXJyaW5nOmZ1bmN0aW9uKGUpe3JldHVybiBlPWV8fGYuYW5pbWF0aW9uLGU9XCIuXCIrZS5yZXBsYWNlKFwiIFwiLFwiLlwiKSx3LmZpbHRlcihlKS5sZW5ndGg+MH0sdmlzaWJsZTpmdW5jdGlvbigpe3JldHVybiB3LmlzKFwiOnZpc2libGVcIil9LGhpZGRlbjpmdW5jdGlvbigpe3JldHVyblwiaGlkZGVuXCI9PT13LmNzcyhcInZpc2liaWxpdHlcIil9LHN1cHBvcnRlZDpmdW5jdGlvbigpe3JldHVybiBiIT09ITF9fSxoaWRlOmZ1bmN0aW9uKCl7Qy52ZXJib3NlKFwiSGlkaW5nIGVsZW1lbnRcIiksQy5pcy5hbmltYXRpbmcoKSYmQy5yZXNldCgpLGsuYmx1cigpLEMucmVtb3ZlLmRpc3BsYXkoKSxDLnJlbW92ZS52aXNpYmxlKCksQy5zZXQuaGlkZGVuKCksQy5mb3JjZS5oaWRkZW4oKSxmLm9uSGlkZS5jYWxsKGspLGYub25Db21wbGV0ZS5jYWxsKGspfSxzaG93OmZ1bmN0aW9uKGUpe0MudmVyYm9zZShcIlNob3dpbmcgZWxlbWVudFwiLGUpLEMucmVtb3ZlLmhpZGRlbigpLEMuc2V0LnZpc2libGUoKSxDLmZvcmNlLnZpc2libGUoKSxmLm9uU2hvdy5jYWxsKGspLGYub25Db21wbGV0ZS5jYWxsKGspfSx0b2dnbGU6ZnVuY3Rpb24oKXtDLmlzLnZpc2libGUoKT9DLmhpZGUoKTpDLnNob3coKX0sc3RvcDpmdW5jdGlvbigpe0MuZGVidWcoXCJTdG9wcGluZyBjdXJyZW50IGFuaW1hdGlvblwiKSx3LnRyaWdnZXJIYW5kbGVyKGIpfSxzdG9wQWxsOmZ1bmN0aW9uKCl7Qy5kZWJ1ZyhcIlN0b3BwaW5nIGFsbCBhbmltYXRpb25cIiksQy5yZW1vdmUucXVldWVDYWxsYmFjaygpLHcudHJpZ2dlckhhbmRsZXIoYil9LGNsZWFyOntxdWV1ZTpmdW5jdGlvbigpe0MuZGVidWcoXCJDbGVhcmluZyBhbmltYXRpb24gcXVldWVcIiksQy5yZW1vdmUucXVldWVDYWxsYmFjaygpfX0sZW5hYmxlOmZ1bmN0aW9uKCl7Qy52ZXJib3NlKFwiU3RhcnRpbmcgYW5pbWF0aW9uXCIpLHcucmVtb3ZlQ2xhc3Modi5kaXNhYmxlZCl9LGRpc2FibGU6ZnVuY3Rpb24oKXtDLmRlYnVnKFwiU3RvcHBpbmcgYW5pbWF0aW9uXCIpLHcuYWRkQ2xhc3Modi5kaXNhYmxlZCl9LHNldHRpbmc6ZnVuY3Rpb24odCxuKXtpZihDLmRlYnVnKFwiQ2hhbmdpbmcgc2V0dGluZ1wiLHQsbiksZS5pc1BsYWluT2JqZWN0KHQpKWUuZXh0ZW5kKCEwLGYsdCk7ZWxzZXtpZihuPT09aSlyZXR1cm4gZlt0XTtmW3RdPW59fSxpbnRlcm5hbDpmdW5jdGlvbih0LG4pe2lmKGUuaXNQbGFpbk9iamVjdCh0KSllLmV4dGVuZCghMCxDLHQpO2Vsc2V7aWYobj09PWkpcmV0dXJuIENbdF07Q1t0XT1ufX0sZGVidWc6ZnVuY3Rpb24oKXtmLmRlYnVnJiYoZi5wZXJmb3JtYW5jZT9DLnBlcmZvcm1hbmNlLmxvZyhhcmd1bWVudHMpOihDLmRlYnVnPUZ1bmN0aW9uLnByb3RvdHlwZS5iaW5kLmNhbGwoY29uc29sZS5pbmZvLGNvbnNvbGUsZi5uYW1lK1wiOlwiKSxDLmRlYnVnLmFwcGx5KGNvbnNvbGUsYXJndW1lbnRzKSkpfSx2ZXJib3NlOmZ1bmN0aW9uKCl7Zi52ZXJib3NlJiZmLmRlYnVnJiYoZi5wZXJmb3JtYW5jZT9DLnBlcmZvcm1hbmNlLmxvZyhhcmd1bWVudHMpOihDLnZlcmJvc2U9RnVuY3Rpb24ucHJvdG90eXBlLmJpbmQuY2FsbChjb25zb2xlLmluZm8sY29uc29sZSxmLm5hbWUrXCI6XCIpLEMudmVyYm9zZS5hcHBseShjb25zb2xlLGFyZ3VtZW50cykpKX0sZXJyb3I6ZnVuY3Rpb24oKXtDLmVycm9yPUZ1bmN0aW9uLnByb3RvdHlwZS5iaW5kLmNhbGwoY29uc29sZS5lcnJvcixjb25zb2xlLGYubmFtZStcIjpcIiksQy5lcnJvci5hcHBseShjb25zb2xlLGFyZ3VtZW50cyl9LHBlcmZvcm1hbmNlOntsb2c6ZnVuY3Rpb24oZSl7dmFyIHQsbixpO2YucGVyZm9ybWFuY2UmJih0PShuZXcgRGF0ZSkuZ2V0VGltZSgpLGk9c3x8dCxuPXQtaSxzPXQsYy5wdXNoKHtOYW1lOmVbMF0sQXJndW1lbnRzOltdLnNsaWNlLmNhbGwoZSwxKXx8XCJcIixFbGVtZW50OmssXCJFeGVjdXRpb24gVGltZVwiOm59KSksY2xlYXJUaW1lb3V0KEMucGVyZm9ybWFuY2UudGltZXIpLEMucGVyZm9ybWFuY2UudGltZXI9c2V0VGltZW91dChDLnBlcmZvcm1hbmNlLmRpc3BsYXksNTAwKX0sZGlzcGxheTpmdW5jdGlvbigpe3ZhciB0PWYubmFtZStcIjpcIixuPTA7cz0hMSxjbGVhclRpbWVvdXQoQy5wZXJmb3JtYW5jZS50aW1lciksZS5lYWNoKGMsZnVuY3Rpb24oZSx0KXtuKz10W1wiRXhlY3V0aW9uIFRpbWVcIl19KSx0Kz1cIiBcIituK1wibXNcIixyJiYodCs9XCIgJ1wiK3IrXCInXCIpLGEubGVuZ3RoPjEmJih0Kz1cIiAoXCIrYS5sZW5ndGgrXCIpXCIpLChjb25zb2xlLmdyb3VwIT09aXx8Y29uc29sZS50YWJsZSE9PWkpJiZjLmxlbmd0aD4wJiYoY29uc29sZS5ncm91cENvbGxhcHNlZCh0KSxjb25zb2xlLnRhYmxlP2NvbnNvbGUudGFibGUoYyk6ZS5lYWNoKGMsZnVuY3Rpb24oZSx0KXtjb25zb2xlLmxvZyh0Lk5hbWUrXCI6IFwiK3RbXCJFeGVjdXRpb24gVGltZVwiXStcIm1zXCIpfSksY29uc29sZS5ncm91cEVuZCgpKSxjPVtdfX0saW52b2tlOmZ1bmN0aW9uKHQsbixhKXt2YXIgcixzLGMsbD1nO3JldHVybiBuPW58fGQsYT1rfHxhLFwic3RyaW5nXCI9PXR5cGVvZiB0JiZsIT09aSYmKHQ9dC5zcGxpdCgvW1xcLiBdLykscj10Lmxlbmd0aC0xLGUuZWFjaCh0LGZ1bmN0aW9uKG4sbyl7dmFyIGE9biE9cj9vK3RbbisxXS5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSt0W24rMV0uc2xpY2UoMSk6dDtpZihlLmlzUGxhaW5PYmplY3QobFthXSkmJm4hPXIpbD1sW2FdO2Vsc2V7aWYobFthXSE9PWkpcmV0dXJuIHM9bFthXSwhMTtpZighZS5pc1BsYWluT2JqZWN0KGxbb10pfHxuPT1yKXJldHVybiBsW29dIT09aT8ocz1sW29dLCExKTohMTtsPWxbb119fSkpLGUuaXNGdW5jdGlvbihzKT9jPXMuYXBwbHkoYSxuKTpzIT09aSYmKGM9cyksZS5pc0FycmF5KG8pP28ucHVzaChjKTpvIT09aT9vPVtvLGNdOmMhPT1pJiYobz1jKSxzIT09aT9zOiExfX0sQy5pbml0aWFsaXplKCl9KSxvIT09aT9vOnRoaXN9LGUuZm4udHJhbnNpdGlvbi5leGlzdHM9e30sZS5mbi50cmFuc2l0aW9uLnNldHRpbmdzPXtuYW1lOlwiVHJhbnNpdGlvblwiLGRlYnVnOiExLHZlcmJvc2U6ITEscGVyZm9ybWFuY2U6ITAsbmFtZXNwYWNlOlwidHJhbnNpdGlvblwiLGludGVydmFsOjAscmV2ZXJzZTpcImF1dG9cIixvblN0YXJ0OmZ1bmN0aW9uKCl7fSxvbkNvbXBsZXRlOmZ1bmN0aW9uKCl7fSxvblNob3c6ZnVuY3Rpb24oKXt9LG9uSGlkZTpmdW5jdGlvbigpe30sdXNlRmFpbFNhZmU6ITAsZmFpbFNhZmVEZWxheToxMDAsYWxsb3dSZXBlYXRzOiExLGRpc3BsYXlUeXBlOiExLGFuaW1hdGlvbjpcImZhZGVcIixkdXJhdGlvbjohMSxxdWV1ZTohMCxtZXRhZGF0YTp7ZGlzcGxheVR5cGU6XCJkaXNwbGF5XCJ9LGNsYXNzTmFtZTp7YW5pbWF0aW5nOlwiYW5pbWF0aW5nXCIsZGlzYWJsZWQ6XCJkaXNhYmxlZFwiLGhpZGRlbjpcImhpZGRlblwiLGlud2FyZDpcImluXCIsbG9hZGluZzpcImxvYWRpbmdcIixsb29waW5nOlwibG9vcGluZ1wiLG91dHdhcmQ6XCJvdXRcIix0cmFuc2l0aW9uOlwidHJhbnNpdGlvblwiLHZpc2libGU6XCJ2aXNpYmxlXCJ9LGVycm9yOntub0FuaW1hdGlvbjpcIlRoZXJlIGlzIG5vIGNzcyBhbmltYXRpb24gbWF0Y2hpbmcgdGhlIG9uZSB5b3Ugc3BlY2lmaWVkLiBQbGVhc2UgbWFrZSBzdXJlIHlvdXIgY3NzIGlzIHZlbmRvciBwcmVmaXhlZCwgYW5kIHlvdSBoYXZlIGluY2x1ZGVkIHRyYW5zaXRpb24gY3NzLlwiLHJlcGVhdGVkOlwiVGhhdCBhbmltYXRpb24gaXMgYWxyZWFkeSBvY2N1cnJpbmcsIGNhbmNlbGxpbmcgcmVwZWF0ZWQgYW5pbWF0aW9uXCIsbWV0aG9kOlwiVGhlIG1ldGhvZCB5b3UgY2FsbGVkIGlzIG5vdCBkZWZpbmVkXCIsc3VwcG9ydDpcIlRoaXMgYnJvd3NlciBkb2VzIG5vdCBzdXBwb3J0IENTUyBhbmltYXRpb25zXCJ9fX0oalF1ZXJ5LHdpbmRvdyxkb2N1bWVudCksZnVuY3Rpb24oZSx0LG4saSl7XCJ1c2Ugc3RyaWN0XCI7ZS5hcGk9ZS5mbi5hcGk9ZnVuY3Rpb24obil7dmFyIG8sYT1lKGUuaXNGdW5jdGlvbih0aGlzKT90OnRoaXMpLHI9YS5zZWxlY3Rvcnx8XCJcIixzPShuZXcgRGF0ZSkuZ2V0VGltZSgpLGM9W10sbD1hcmd1bWVudHNbMF0sdT1cInN0cmluZ1wiPT10eXBlb2YgbCxkPVtdLnNsaWNlLmNhbGwoYXJndW1lbnRzLDEpO3JldHVybiBhLmVhY2goZnVuY3Rpb24oKXt2YXIgYSxtLGYsZyxwLHYsaD1lLmlzUGxhaW5PYmplY3Qobik/ZS5leHRlbmQoITAse30sZS5mbi5hcGkuc2V0dGluZ3Msbik6ZS5leHRlbmQoe30sZS5mbi5hcGkuc2V0dGluZ3MpLGI9aC5uYW1lc3BhY2UseT1oLm1ldGFkYXRhLHg9aC5zZWxlY3RvcixDPWguZXJyb3Isdz1oLmNsYXNzTmFtZSxrPVwiLlwiK2IsUz1cIm1vZHVsZS1cIitiLFQ9ZSh0aGlzKSxBPVQuY2xvc2VzdCh4LmZvcm0pLFI9aC5zdGF0ZUNvbnRleHQ/ZShoLnN0YXRlQ29udGV4dCk6VCxQPXRoaXMsRT1SWzBdLEY9VC5kYXRhKFMpO3Y9e2luaXRpYWxpemU6ZnVuY3Rpb24oKXt1fHx2LmJpbmQuZXZlbnRzKCksdi5pbnN0YW50aWF0ZSgpfSxpbnN0YW50aWF0ZTpmdW5jdGlvbigpe3YudmVyYm9zZShcIlN0b3JpbmcgaW5zdGFuY2Ugb2YgbW9kdWxlXCIsdiksRj12LFQuZGF0YShTLEYpfSxkZXN0cm95OmZ1bmN0aW9uKCl7di52ZXJib3NlKFwiRGVzdHJveWluZyBwcmV2aW91cyBtb2R1bGUgZm9yXCIsUCksVC5yZW1vdmVEYXRhKFMpLm9mZihrKX0sYmluZDp7ZXZlbnRzOmZ1bmN0aW9uKCl7dmFyIGU9di5nZXQuZXZlbnQoKTtlPyh2LnZlcmJvc2UoXCJBdHRhY2hpbmcgQVBJIGV2ZW50cyB0byBlbGVtZW50XCIsZSksVC5vbihlK2ssdi5ldmVudC50cmlnZ2VyKSk6XCJub3dcIj09aC5vbiYmKHYuZGVidWcoXCJRdWVyeWluZyBBUEkgZW5kcG9pbnQgaW1tZWRpYXRlbHlcIiksdi5xdWVyeSgpKX19LGRlY29kZTp7anNvbjpmdW5jdGlvbihlKXtpZihlIT09aSYmXCJzdHJpbmdcIj09dHlwZW9mIGUpdHJ5e2U9SlNPTi5wYXJzZShlKX1jYXRjaCh0KXt9cmV0dXJuIGV9fSxyZWFkOntjYWNoZWRSZXNwb25zZTpmdW5jdGlvbihlKXt2YXIgbjtyZXR1cm4gdC5TdG9yYWdlPT09aT92b2lkIHYuZXJyb3IoQy5ub1N0b3JhZ2UpOihuPXNlc3Npb25TdG9yYWdlLmdldEl0ZW0oZSksdi5kZWJ1ZyhcIlVzaW5nIGNhY2hlZCByZXNwb25zZVwiLGUsbiksbj12LmRlY29kZS5qc29uKG4pLCExKX19LHdyaXRlOntjYWNoZWRSZXNwb25zZTpmdW5jdGlvbihuLG8pe3JldHVybiBvJiZcIlwiPT09bz92b2lkIHYuZGVidWcoXCJSZXNwb25zZSBlbXB0eSwgbm90IGNhY2hpbmdcIixvKTp0LlN0b3JhZ2U9PT1pP3ZvaWQgdi5lcnJvcihDLm5vU3RvcmFnZSk6KGUuaXNQbGFpbk9iamVjdChvKSYmKG89SlNPTi5zdHJpbmdpZnkobykpLFxyXG5zZXNzaW9uU3RvcmFnZS5zZXRJdGVtKG4sbyksdm9pZCB2LnZlcmJvc2UoXCJTdG9yaW5nIGNhY2hlZCByZXNwb25zZSBmb3IgdXJsXCIsbixvKSl9fSxxdWVyeTpmdW5jdGlvbigpe2lmKHYuaXMuZGlzYWJsZWQoKSlyZXR1cm4gdm9pZCB2LmRlYnVnKFwiRWxlbWVudCBpcyBkaXNhYmxlZCBBUEkgcmVxdWVzdCBhYm9ydGVkXCIpO2lmKHYuaXMubG9hZGluZygpKXtpZighaC5pbnRlcnJ1cHRSZXF1ZXN0cylyZXR1cm4gdm9pZCB2LmRlYnVnKFwiQ2FuY2VsbGluZyByZXF1ZXN0LCBwcmV2aW91cyByZXF1ZXN0IGlzIHN0aWxsIHBlbmRpbmdcIik7di5kZWJ1ZyhcIkludGVycnVwdGluZyBwcmV2aW91cyByZXF1ZXN0XCIpLHYuYWJvcnQoKX1yZXR1cm4gaC5kZWZhdWx0RGF0YSYmZS5leHRlbmQoITAsaC51cmxEYXRhLHYuZ2V0LmRlZmF1bHREYXRhKCkpLGguc2VyaWFsaXplRm9ybSYmKGguZGF0YT12LmFkZC5mb3JtRGF0YShoLmRhdGEpKSxtPXYuZ2V0LnNldHRpbmdzKCksbT09PSExPyh2LmNhbmNlbGxlZD0hMCx2b2lkIHYuZXJyb3IoQy5iZWZvcmVTZW5kKSk6KHYuY2FuY2VsbGVkPSExLGY9di5nZXQudGVtcGxhdGVkVVJMKCksZnx8di5pcy5tb2NrZWQoKT8oZj12LmFkZC51cmxEYXRhKGYpLGZ8fHYuaXMubW9ja2VkKCk/KGE9ZS5leHRlbmQoITAse30saCx7dHlwZTpoLm1ldGhvZHx8aC50eXBlLGRhdGE6Zyx1cmw6aC5iYXNlK2YsYmVmb3JlU2VuZDpoLmJlZm9yZVhIUixzdWNjZXNzOmZ1bmN0aW9uKCl7fSxmYWlsdXJlOmZ1bmN0aW9uKCl7fSxjb21wbGV0ZTpmdW5jdGlvbigpe319KSx2LmRlYnVnKFwiUXVlcnlpbmcgVVJMXCIsYS51cmwpLHYudmVyYm9zZShcIlVzaW5nIEFKQVggc2V0dGluZ3NcIixhKSxcImxvY2FsXCI9PT1oLmNhY2hlJiZ2LnJlYWQuY2FjaGVkUmVzcG9uc2UoZik/KHYuZGVidWcoXCJSZXNwb25zZSByZXR1cm5lZCBmcm9tIGxvY2FsIGNhY2hlXCIpLHYucmVxdWVzdD12LmNyZWF0ZS5yZXF1ZXN0KCksdm9pZCB2LnJlcXVlc3QucmVzb2x2ZVdpdGgoRSxbdi5yZWFkLmNhY2hlZFJlc3BvbnNlKGYpXSkpOnZvaWQoaC50aHJvdHRsZT9oLnRocm90dGxlRmlyc3RSZXF1ZXN0fHx2LnRpbWVyPyh2LmRlYnVnKFwiVGhyb3R0bGluZyByZXF1ZXN0XCIsaC50aHJvdHRsZSksY2xlYXJUaW1lb3V0KHYudGltZXIpLHYudGltZXI9c2V0VGltZW91dChmdW5jdGlvbigpe3YudGltZXImJmRlbGV0ZSB2LnRpbWVyLHYuZGVidWcoXCJTZW5kaW5nIHRocm90dGxlZCByZXF1ZXN0XCIsZyxhLm1ldGhvZCksdi5zZW5kLnJlcXVlc3QoKX0saC50aHJvdHRsZSkpOih2LmRlYnVnKFwiU2VuZGluZyByZXF1ZXN0XCIsZyxhLm1ldGhvZCksdi5zZW5kLnJlcXVlc3QoKSx2LnRpbWVyPXNldFRpbWVvdXQoZnVuY3Rpb24oKXt9LGgudGhyb3R0bGUpKToodi5kZWJ1ZyhcIlNlbmRpbmcgcmVxdWVzdFwiLGcsYS5tZXRob2QpLHYuc2VuZC5yZXF1ZXN0KCkpKSk6dm9pZCAwKTp2b2lkIHYuZXJyb3IoQy5taXNzaW5nVVJMKSl9LHNob3VsZDp7cmVtb3ZlRXJyb3I6ZnVuY3Rpb24oKXtyZXR1cm4gaC5oaWRlRXJyb3I9PT0hMHx8XCJhdXRvXCI9PT1oLmhpZGVFcnJvciYmIXYuaXMuZm9ybSgpfX0saXM6e2Rpc2FibGVkOmZ1bmN0aW9uKCl7cmV0dXJuIFQuZmlsdGVyKHguZGlzYWJsZWQpLmxlbmd0aD4wfSxmb3JtOmZ1bmN0aW9uKCl7cmV0dXJuIFQuaXMoXCJmb3JtXCIpfHxSLmlzKFwiZm9ybVwiKX0sbW9ja2VkOmZ1bmN0aW9uKCl7cmV0dXJuIGgubW9ja1Jlc3BvbnNlfHxoLm1vY2tSZXNwb25zZUFzeW5jfSxpbnB1dDpmdW5jdGlvbigpe3JldHVybiBULmlzKFwiaW5wdXRcIil9LGxvYWRpbmc6ZnVuY3Rpb24oKXtyZXR1cm4gdi5yZXF1ZXN0JiZcInBlbmRpbmdcIj09di5yZXF1ZXN0LnN0YXRlKCl9LGFib3J0ZWRSZXF1ZXN0OmZ1bmN0aW9uKGUpe3JldHVybiBlJiZlLnJlYWR5U3RhdGUhPT1pJiYwPT09ZS5yZWFkeVN0YXRlPyh2LnZlcmJvc2UoXCJYSFIgcmVxdWVzdCBkZXRlcm1pbmVkIHRvIGJlIGFib3J0ZWRcIiksITApOih2LnZlcmJvc2UoXCJYSFIgcmVxdWVzdCB3YXMgbm90IGFib3J0ZWRcIiksITEpfSx2YWxpZFJlc3BvbnNlOmZ1bmN0aW9uKHQpe3JldHVyblwianNvblwiIT09aC5kYXRhVHlwZSYmXCJqc29ucFwiIT09aC5kYXRhVHlwZXx8IWUuaXNGdW5jdGlvbihoLnN1Y2Nlc3NUZXN0KT8odi52ZXJib3NlKFwiUmVzcG9uc2UgaXMgbm90IEpTT04sIHNraXBwaW5nIHZhbGlkYXRpb25cIixoLnN1Y2Nlc3NUZXN0LHQpLCEwKToodi5kZWJ1ZyhcIkNoZWNraW5nIEpTT04gcmV0dXJuZWQgc3VjY2Vzc1wiLGguc3VjY2Vzc1Rlc3QsdCksaC5zdWNjZXNzVGVzdCh0KT8odi5kZWJ1ZyhcIlJlc3BvbnNlIHBhc3NlZCBzdWNjZXNzIHRlc3RcIix0KSwhMCk6KHYuZGVidWcoXCJSZXNwb25zZSBmYWlsZWQgc3VjY2VzcyB0ZXN0XCIsdCksITEpKX19LHdhczp7Y2FuY2VsbGVkOmZ1bmN0aW9uKCl7cmV0dXJuIHYuY2FuY2VsbGVkfHwhMX0sc3VjY2VzZnVsOmZ1bmN0aW9uKCl7cmV0dXJuIHYucmVxdWVzdCYmXCJyZXNvbHZlZFwiPT12LnJlcXVlc3Quc3RhdGUoKX0sZmFpbHVyZTpmdW5jdGlvbigpe3JldHVybiB2LnJlcXVlc3QmJlwicmVqZWN0ZWRcIj09di5yZXF1ZXN0LnN0YXRlKCl9LGNvbXBsZXRlOmZ1bmN0aW9uKCl7cmV0dXJuIHYucmVxdWVzdCYmKFwicmVzb2x2ZWRcIj09di5yZXF1ZXN0LnN0YXRlKCl8fFwicmVqZWN0ZWRcIj09di5yZXF1ZXN0LnN0YXRlKCkpfX0sYWRkOnt1cmxEYXRhOmZ1bmN0aW9uKHQsbil7dmFyIG8sYTtyZXR1cm4gdCYmKG89dC5tYXRjaChoLnJlZ0V4cC5yZXF1aXJlZCksYT10Lm1hdGNoKGgucmVnRXhwLm9wdGlvbmFsKSxuPW58fGgudXJsRGF0YSxvJiYodi5kZWJ1ZyhcIkxvb2tpbmcgZm9yIHJlcXVpcmVkIFVSTCB2YXJpYWJsZXNcIixvKSxlLmVhY2gobyxmdW5jdGlvbihvLGEpe3ZhciByPS0xIT09YS5pbmRleE9mKFwiJFwiKT9hLnN1YnN0cigyLGEubGVuZ3RoLTMpOmEuc3Vic3RyKDEsYS5sZW5ndGgtMikscz1lLmlzUGxhaW5PYmplY3QobikmJm5bcl0hPT1pP25bcl06VC5kYXRhKHIpIT09aT9ULmRhdGEocik6Ui5kYXRhKHIpIT09aT9SLmRhdGEocik6bltyXTtyZXR1cm4gcz09PWk/KHYuZXJyb3IoQy5yZXF1aXJlZFBhcmFtZXRlcixyLHQpLHQ9ITEsITEpOih2LnZlcmJvc2UoXCJGb3VuZCByZXF1aXJlZCB2YXJpYWJsZVwiLHIscykscz1oLmVuY29kZVBhcmFtZXRlcnM/di5nZXQudXJsRW5jb2RlZFZhbHVlKHMpOnMsdD10LnJlcGxhY2UoYSxzKSx2b2lkIDApfSkpLGEmJih2LmRlYnVnKFwiTG9va2luZyBmb3Igb3B0aW9uYWwgVVJMIHZhcmlhYmxlc1wiLG8pLGUuZWFjaChhLGZ1bmN0aW9uKG8sYSl7dmFyIHI9LTEhPT1hLmluZGV4T2YoXCIkXCIpP2Euc3Vic3RyKDMsYS5sZW5ndGgtNCk6YS5zdWJzdHIoMixhLmxlbmd0aC0zKSxzPWUuaXNQbGFpbk9iamVjdChuKSYmbltyXSE9PWk/bltyXTpULmRhdGEocikhPT1pP1QuZGF0YShyKTpSLmRhdGEocikhPT1pP1IuZGF0YShyKTpuW3JdO3MhPT1pPyh2LnZlcmJvc2UoXCJPcHRpb25hbCB2YXJpYWJsZSBGb3VuZFwiLHIscyksdD10LnJlcGxhY2UoYSxzKSk6KHYudmVyYm9zZShcIk9wdGlvbmFsIHZhcmlhYmxlIG5vdCBmb3VuZFwiLHIpLHQ9LTEhPT10LmluZGV4T2YoXCIvXCIrYSk/dC5yZXBsYWNlKFwiL1wiK2EsXCJcIik6dC5yZXBsYWNlKGEsXCJcIikpfSkpKSx0fSxmb3JtRGF0YTpmdW5jdGlvbih0KXt2YXIgbixvPWUuZm4uc2VyaWFsaXplT2JqZWN0IT09aSxhPW8/QS5zZXJpYWxpemVPYmplY3QoKTpBLnNlcmlhbGl6ZSgpO3JldHVybiB0PXR8fGguZGF0YSxuPWUuaXNQbGFpbk9iamVjdCh0KSxuP28/KHYuZGVidWcoXCJFeHRlbmRpbmcgZXhpc3RpbmcgZGF0YSB3aXRoIGZvcm0gZGF0YVwiLHQsYSksdD1lLmV4dGVuZCghMCx7fSx0LGEpKToodi5lcnJvcihDLm1pc3NpbmdTZXJpYWxpemUpLHYuZGVidWcoXCJDYW50IGV4dGVuZCBkYXRhLiBSZXBsYWNpbmcgZGF0YSB3aXRoIGZvcm0gZGF0YVwiLHQsYSksdD1hKToodi5kZWJ1ZyhcIkFkZGluZyBmb3JtIGRhdGFcIixhKSx0PWEpLHR9fSxzZW5kOntyZXF1ZXN0OmZ1bmN0aW9uKCl7di5zZXQubG9hZGluZygpLHYucmVxdWVzdD12LmNyZWF0ZS5yZXF1ZXN0KCksdi5pcy5tb2NrZWQoKT92Lm1vY2tlZFhIUj12LmNyZWF0ZS5tb2NrZWRYSFIoKTp2Lnhocj12LmNyZWF0ZS54aHIoKSxoLm9uUmVxdWVzdC5jYWxsKEUsdi5yZXF1ZXN0LHYueGhyKX19LGV2ZW50Ont0cmlnZ2VyOmZ1bmN0aW9uKGUpe3YucXVlcnkoKSwoXCJzdWJtaXRcIj09ZS50eXBlfHxcImNsaWNrXCI9PWUudHlwZSkmJmUucHJldmVudERlZmF1bHQoKX0seGhyOnthbHdheXM6ZnVuY3Rpb24oKXt9LGRvbmU6ZnVuY3Rpb24odCxuLGkpe3ZhciBvPXRoaXMsYT0obmV3IERhdGUpLmdldFRpbWUoKS1wLHI9aC5sb2FkaW5nRHVyYXRpb24tYSxzPWUuaXNGdW5jdGlvbihoLm9uUmVzcG9uc2UpP2gub25SZXNwb25zZS5jYWxsKG8sZS5leHRlbmQoITAse30sdCkpOiExO3I9cj4wP3I6MCxzJiYodi5kZWJ1ZyhcIk1vZGlmaWVkIEFQSSByZXNwb25zZSBpbiBvblJlc3BvbnNlIGNhbGxiYWNrXCIsaC5vblJlc3BvbnNlLHMsdCksdD1zKSxyPjAmJnYuZGVidWcoXCJSZXNwb25zZSBjb21wbGV0ZWQgZWFybHkgZGVsYXlpbmcgc3RhdGUgY2hhbmdlIGJ5XCIsciksc2V0VGltZW91dChmdW5jdGlvbigpe3YuaXMudmFsaWRSZXNwb25zZSh0KT92LnJlcXVlc3QucmVzb2x2ZVdpdGgobyxbdCxpXSk6di5yZXF1ZXN0LnJlamVjdFdpdGgobyxbaSxcImludmFsaWRcIl0pfSxyKX0sZmFpbDpmdW5jdGlvbihlLHQsbil7dmFyIGk9dGhpcyxvPShuZXcgRGF0ZSkuZ2V0VGltZSgpLXAsYT1oLmxvYWRpbmdEdXJhdGlvbi1vO2E9YT4wP2E6MCxhPjAmJnYuZGVidWcoXCJSZXNwb25zZSBjb21wbGV0ZWQgZWFybHkgZGVsYXlpbmcgc3RhdGUgY2hhbmdlIGJ5XCIsYSksc2V0VGltZW91dChmdW5jdGlvbigpe3YuaXMuYWJvcnRlZFJlcXVlc3QoZSk/di5yZXF1ZXN0LnJlamVjdFdpdGgoaSxbZSxcImFib3J0ZWRcIixuXSk6di5yZXF1ZXN0LnJlamVjdFdpdGgoaSxbZSxcImVycm9yXCIsdCxuXSl9LGEpfX0scmVxdWVzdDp7ZG9uZTpmdW5jdGlvbihlLHQpe3YuZGVidWcoXCJTdWNjZXNzZnVsIEFQSSBSZXNwb25zZVwiLGUpLFwibG9jYWxcIj09PWguY2FjaGUmJmYmJih2LndyaXRlLmNhY2hlZFJlc3BvbnNlKGYsZSksdi5kZWJ1ZyhcIlNhdmluZyBzZXJ2ZXIgcmVzcG9uc2UgbG9jYWxseVwiLHYuY2FjaGUpKSxoLm9uU3VjY2Vzcy5jYWxsKEUsZSxULHQpfSxjb21wbGV0ZTpmdW5jdGlvbihlLHQpe3ZhciBuLGk7di53YXMuc3VjY2VzZnVsKCk/KGk9ZSxuPXQpOihuPWUsaT12LmdldC5yZXNwb25zZUZyb21YSFIobikpLHYucmVtb3ZlLmxvYWRpbmcoKSxoLm9uQ29tcGxldGUuY2FsbChFLGksVCxuKX0sZmFpbDpmdW5jdGlvbihlLHQsbil7dmFyIG89di5nZXQucmVzcG9uc2VGcm9tWEhSKGUpLHI9di5nZXQuZXJyb3JGcm9tUmVxdWVzdChvLHQsbik7XCJhYm9ydGVkXCI9PXQ/KHYuZGVidWcoXCJYSFIgQWJvcnRlZCAoTW9zdCBsaWtlbHkgY2F1c2VkIGJ5IHBhZ2UgbmF2aWdhdGlvbiBvciBDT1JTIFBvbGljeSlcIix0LG4pLGgub25BYm9ydC5jYWxsKEUsdCxULGUpKTpcImludmFsaWRcIj09dD92LmRlYnVnKFwiSlNPTiBkaWQgbm90IHBhc3Mgc3VjY2VzcyB0ZXN0LiBBIHNlcnZlci1zaWRlIGVycm9yIGhhcyBtb3N0IGxpa2VseSBvY2N1cnJlZFwiLG8pOlwiZXJyb3JcIj09dCYmZSE9PWkmJih2LmRlYnVnKFwiWEhSIHByb2R1Y2VkIGEgc2VydmVyIGVycm9yXCIsdCxuKSwyMDAhPWUuc3RhdHVzJiZuIT09aSYmXCJcIiE9PW4mJnYuZXJyb3IoQy5zdGF0dXNNZXNzYWdlK24sYS51cmwpLGgub25FcnJvci5jYWxsKEUscixULGUpKSxoLmVycm9yRHVyYXRpb24mJlwiYWJvcnRlZFwiIT09dCYmKHYuZGVidWcoXCJBZGRpbmcgZXJyb3Igc3RhdGVcIiksdi5zZXQuZXJyb3IoKSx2LnNob3VsZC5yZW1vdmVFcnJvcigpJiZzZXRUaW1lb3V0KHYucmVtb3ZlLmVycm9yLGguZXJyb3JEdXJhdGlvbikpLHYuZGVidWcoXCJBUEkgUmVxdWVzdCBmYWlsZWRcIixyLGUpLGgub25GYWlsdXJlLmNhbGwoRSxvLFQsZSl9fX0sY3JlYXRlOntyZXF1ZXN0OmZ1bmN0aW9uKCl7cmV0dXJuIGUuRGVmZXJyZWQoKS5hbHdheXModi5ldmVudC5yZXF1ZXN0LmNvbXBsZXRlKS5kb25lKHYuZXZlbnQucmVxdWVzdC5kb25lKS5mYWlsKHYuZXZlbnQucmVxdWVzdC5mYWlsKX0sbW9ja2VkWEhSOmZ1bmN0aW9uKCl7dmFyIHQsbixpLG89ITEsYT0hMSxyPSExO3JldHVybiBpPWUuRGVmZXJyZWQoKS5hbHdheXModi5ldmVudC54aHIuY29tcGxldGUpLmRvbmUodi5ldmVudC54aHIuZG9uZSkuZmFpbCh2LmV2ZW50Lnhoci5mYWlsKSxoLm1vY2tSZXNwb25zZT8oZS5pc0Z1bmN0aW9uKGgubW9ja1Jlc3BvbnNlKT8odi5kZWJ1ZyhcIlVzaW5nIG1vY2tlZCBjYWxsYmFjayByZXR1cm5pbmcgcmVzcG9uc2VcIixoLm1vY2tSZXNwb25zZSksbj1oLm1vY2tSZXNwb25zZS5jYWxsKEUsaCkpOih2LmRlYnVnKFwiVXNpbmcgc3BlY2lmaWVkIHJlc3BvbnNlXCIsaC5tb2NrUmVzcG9uc2UpLG49aC5tb2NrUmVzcG9uc2UpLGkucmVzb2x2ZVdpdGgoRSxbbixvLHtyZXNwb25zZVRleHQ6bn1dKSk6ZS5pc0Z1bmN0aW9uKGgubW9ja1Jlc3BvbnNlQXN5bmMpJiYodD1mdW5jdGlvbihlKXt2LmRlYnVnKFwiQXN5bmMgY2FsbGJhY2sgcmV0dXJuZWQgcmVzcG9uc2VcIixlKSxlP2kucmVzb2x2ZVdpdGgoRSxbZSxvLHtyZXNwb25zZVRleHQ6ZX1dKTppLnJlamVjdFdpdGgoRSxbe3Jlc3BvbnNlVGV4dDplfSxhLHJdKX0sdi5kZWJ1ZyhcIlVzaW5nIGFzeW5jIG1vY2tlZCByZXNwb25zZVwiLGgubW9ja1Jlc3BvbnNlQXN5bmMpLGgubW9ja1Jlc3BvbnNlQXN5bmMuY2FsbChFLGgsdCkpLGl9LHhocjpmdW5jdGlvbigpe3ZhciB0O3JldHVybiB0PWUuYWpheChhKS5hbHdheXModi5ldmVudC54aHIuYWx3YXlzKS5kb25lKHYuZXZlbnQueGhyLmRvbmUpLmZhaWwodi5ldmVudC54aHIuZmFpbCksdi52ZXJib3NlKFwiQ3JlYXRlZCBzZXJ2ZXIgcmVxdWVzdFwiLHQpLHR9fSxzZXQ6e2Vycm9yOmZ1bmN0aW9uKCl7di52ZXJib3NlKFwiQWRkaW5nIGVycm9yIHN0YXRlIHRvIGVsZW1lbnRcIixSKSxSLmFkZENsYXNzKHcuZXJyb3IpfSxsb2FkaW5nOmZ1bmN0aW9uKCl7di52ZXJib3NlKFwiQWRkaW5nIGxvYWRpbmcgc3RhdGUgdG8gZWxlbWVudFwiLFIpLFIuYWRkQ2xhc3Mody5sb2FkaW5nKSxwPShuZXcgRGF0ZSkuZ2V0VGltZSgpfX0scmVtb3ZlOntlcnJvcjpmdW5jdGlvbigpe3YudmVyYm9zZShcIlJlbW92aW5nIGVycm9yIHN0YXRlIGZyb20gZWxlbWVudFwiLFIpLFIucmVtb3ZlQ2xhc3Mody5lcnJvcil9LGxvYWRpbmc6ZnVuY3Rpb24oKXt2LnZlcmJvc2UoXCJSZW1vdmluZyBsb2FkaW5nIHN0YXRlIGZyb20gZWxlbWVudFwiLFIpLFIucmVtb3ZlQ2xhc3Mody5sb2FkaW5nKX19LGdldDp7cmVzcG9uc2VGcm9tWEhSOmZ1bmN0aW9uKHQpe3JldHVybiBlLmlzUGxhaW5PYmplY3QodCk/XCJqc29uXCI9PWguZGF0YVR5cGV8fFwianNvbnBcIj09aC5kYXRhVHlwZT92LmRlY29kZS5qc29uKHQucmVzcG9uc2VUZXh0KTp0LnJlc3BvbnNlVGV4dDohMX0sZXJyb3JGcm9tUmVxdWVzdDpmdW5jdGlvbih0LG4sbyl7cmV0dXJuIGUuaXNQbGFpbk9iamVjdCh0KSYmdC5lcnJvciE9PWk/dC5lcnJvcjpoLmVycm9yW25dIT09aT9oLmVycm9yW25dOm99LHJlcXVlc3Q6ZnVuY3Rpb24oKXtyZXR1cm4gdi5yZXF1ZXN0fHwhMX0seGhyOmZ1bmN0aW9uKCl7cmV0dXJuIHYueGhyfHwhMX0sc2V0dGluZ3M6ZnVuY3Rpb24oKXt2YXIgZTtyZXR1cm4gZT1oLmJlZm9yZVNlbmQuY2FsbChFLGgpLGUmJihlLnN1Y2Nlc3MhPT1pJiYodi5kZWJ1ZyhcIkxlZ2FjeSBzdWNjZXNzIGNhbGxiYWNrIGRldGVjdGVkXCIsZSksdi5lcnJvcihDLmxlZ2FjeVBhcmFtZXRlcnMsZS5zdWNjZXNzKSxlLm9uU3VjY2Vzcz1lLnN1Y2Nlc3MpLGUuZmFpbHVyZSE9PWkmJih2LmRlYnVnKFwiTGVnYWN5IGZhaWx1cmUgY2FsbGJhY2sgZGV0ZWN0ZWRcIixlKSx2LmVycm9yKEMubGVnYWN5UGFyYW1ldGVycyxlLmZhaWx1cmUpLGUub25GYWlsdXJlPWUuZmFpbHVyZSksZS5jb21wbGV0ZSE9PWkmJih2LmRlYnVnKFwiTGVnYWN5IGNvbXBsZXRlIGNhbGxiYWNrIGRldGVjdGVkXCIsZSksdi5lcnJvcihDLmxlZ2FjeVBhcmFtZXRlcnMsZS5jb21wbGV0ZSksZS5vbkNvbXBsZXRlPWUuY29tcGxldGUpKSxlPT09aSYmdi5lcnJvcihDLm5vUmV0dXJuZWRWYWx1ZSksZSE9PWk/ZTpofSx1cmxFbmNvZGVkVmFsdWU6ZnVuY3Rpb24oZSl7dmFyIG49dC5kZWNvZGVVUklDb21wb25lbnQoZSksaT10LmVuY29kZVVSSUNvbXBvbmVudChlKSxvPW4hPT1lO3JldHVybiBvPyh2LmRlYnVnKFwiVVJMIHZhbHVlIGlzIGFscmVhZHkgZW5jb2RlZCwgYXZvaWRpbmcgZG91YmxlIGVuY29kaW5nXCIsZSksZSk6KHYudmVyYm9zZShcIkVuY29kaW5nIHZhbHVlIHVzaW5nIGVuY29kZVVSSUNvbXBvbmVudFwiLGUsaSksaSl9LGRlZmF1bHREYXRhOmZ1bmN0aW9uKCl7dmFyIHQ9e307cmV0dXJuIGUuaXNXaW5kb3coUCl8fCh2LmlzLmlucHV0KCk/dC52YWx1ZT1ULnZhbCgpOnYuaXMuZm9ybSgpJiYodC50ZXh0PVQudGV4dCgpKSksdH0sZXZlbnQ6ZnVuY3Rpb24oKXtyZXR1cm4gZS5pc1dpbmRvdyhQKXx8XCJub3dcIj09aC5vbj8odi5kZWJ1ZyhcIkFQSSBjYWxsZWQgd2l0aG91dCBlbGVtZW50LCBubyBldmVudHMgYXR0YWNoZWRcIiksITEpOlwiYXV0b1wiPT1oLm9uP1QuaXMoXCJpbnB1dFwiKT9QLm9uaW5wdXQhPT1pP1wiaW5wdXRcIjpQLm9ucHJvcGVydHljaGFuZ2UhPT1pP1wicHJvcGVydHljaGFuZ2VcIjpcImtleXVwXCI6VC5pcyhcImZvcm1cIik/XCJzdWJtaXRcIjpcImNsaWNrXCI6aC5vbn0sdGVtcGxhdGVkVVJMOmZ1bmN0aW9uKGUpe2lmKGU9ZXx8VC5kYXRhKHkuYWN0aW9uKXx8aC5hY3Rpb258fCExLGY9VC5kYXRhKHkudXJsKXx8aC51cmx8fCExKXJldHVybiB2LmRlYnVnKFwiVXNpbmcgc3BlY2lmaWVkIHVybFwiLGYpLGY7aWYoZSl7aWYodi5kZWJ1ZyhcIkxvb2tpbmcgdXAgdXJsIGZvciBhY3Rpb25cIixlLGguYXBpKSxoLmFwaVtlXT09PWkmJiF2LmlzLm1vY2tlZCgpKXJldHVybiB2b2lkIHYuZXJyb3IoQy5taXNzaW5nQWN0aW9uLGguYWN0aW9uLGguYXBpKTtmPWguYXBpW2VdfWVsc2Ugdi5pcy5mb3JtKCkmJihmPVQuYXR0cihcImFjdGlvblwiKXx8Ui5hdHRyKFwiYWN0aW9uXCIpfHwhMSx2LmRlYnVnKFwiTm8gdXJsIG9yIGFjdGlvbiBzcGVjaWZpZWQsIGRlZmF1bHRpbmcgdG8gZm9ybSBhY3Rpb25cIixmKSk7cmV0dXJuIGZ9fSxhYm9ydDpmdW5jdGlvbigpe3ZhciBlPXYuZ2V0LnhocigpO2UmJlwicmVzb2x2ZWRcIiE9PWUuc3RhdGUoKSYmKHYuZGVidWcoXCJDYW5jZWxsaW5nIEFQSSByZXF1ZXN0XCIpLGUuYWJvcnQoKSl9LHJlc2V0OmZ1bmN0aW9uKCl7di5yZW1vdmUuZXJyb3IoKSx2LnJlbW92ZS5sb2FkaW5nKCl9LHNldHRpbmc6ZnVuY3Rpb24odCxuKXtpZih2LmRlYnVnKFwiQ2hhbmdpbmcgc2V0dGluZ1wiLHQsbiksZS5pc1BsYWluT2JqZWN0KHQpKWUuZXh0ZW5kKCEwLGgsdCk7ZWxzZXtpZihuPT09aSlyZXR1cm4gaFt0XTtoW3RdPW59fSxpbnRlcm5hbDpmdW5jdGlvbih0LG4pe2lmKGUuaXNQbGFpbk9iamVjdCh0KSllLmV4dGVuZCghMCx2LHQpO2Vsc2V7aWYobj09PWkpcmV0dXJuIHZbdF07dlt0XT1ufX0sZGVidWc6ZnVuY3Rpb24oKXtoLmRlYnVnJiYoaC5wZXJmb3JtYW5jZT92LnBlcmZvcm1hbmNlLmxvZyhhcmd1bWVudHMpOih2LmRlYnVnPUZ1bmN0aW9uLnByb3RvdHlwZS5iaW5kLmNhbGwoY29uc29sZS5pbmZvLGNvbnNvbGUsaC5uYW1lK1wiOlwiKSx2LmRlYnVnLmFwcGx5KGNvbnNvbGUsYXJndW1lbnRzKSkpfSx2ZXJib3NlOmZ1bmN0aW9uKCl7aC52ZXJib3NlJiZoLmRlYnVnJiYoaC5wZXJmb3JtYW5jZT92LnBlcmZvcm1hbmNlLmxvZyhhcmd1bWVudHMpOih2LnZlcmJvc2U9RnVuY3Rpb24ucHJvdG90eXBlLmJpbmQuY2FsbChjb25zb2xlLmluZm8sY29uc29sZSxoLm5hbWUrXCI6XCIpLHYudmVyYm9zZS5hcHBseShjb25zb2xlLGFyZ3VtZW50cykpKX0sZXJyb3I6ZnVuY3Rpb24oKXt2LmVycm9yPUZ1bmN0aW9uLnByb3RvdHlwZS5iaW5kLmNhbGwoY29uc29sZS5lcnJvcixjb25zb2xlLGgubmFtZStcIjpcIiksdi5lcnJvci5hcHBseShjb25zb2xlLGFyZ3VtZW50cyl9LHBlcmZvcm1hbmNlOntsb2c6ZnVuY3Rpb24oZSl7dmFyIHQsbixpO2gucGVyZm9ybWFuY2UmJih0PShuZXcgRGF0ZSkuZ2V0VGltZSgpLGk9c3x8dCxuPXQtaSxzPXQsYy5wdXNoKHtOYW1lOmVbMF0sQXJndW1lbnRzOltdLnNsaWNlLmNhbGwoZSwxKXx8XCJcIixcIkV4ZWN1dGlvbiBUaW1lXCI6bn0pKSxjbGVhclRpbWVvdXQodi5wZXJmb3JtYW5jZS50aW1lciksdi5wZXJmb3JtYW5jZS50aW1lcj1zZXRUaW1lb3V0KHYucGVyZm9ybWFuY2UuZGlzcGxheSw1MDApfSxkaXNwbGF5OmZ1bmN0aW9uKCl7dmFyIHQ9aC5uYW1lK1wiOlwiLG49MDtzPSExLGNsZWFyVGltZW91dCh2LnBlcmZvcm1hbmNlLnRpbWVyKSxlLmVhY2goYyxmdW5jdGlvbihlLHQpe24rPXRbXCJFeGVjdXRpb24gVGltZVwiXX0pLHQrPVwiIFwiK24rXCJtc1wiLHImJih0Kz1cIiAnXCIrcitcIidcIiksKGNvbnNvbGUuZ3JvdXAhPT1pfHxjb25zb2xlLnRhYmxlIT09aSkmJmMubGVuZ3RoPjAmJihjb25zb2xlLmdyb3VwQ29sbGFwc2VkKHQpLGNvbnNvbGUudGFibGU/Y29uc29sZS50YWJsZShjKTplLmVhY2goYyxmdW5jdGlvbihlLHQpe2NvbnNvbGUubG9nKHQuTmFtZStcIjogXCIrdFtcIkV4ZWN1dGlvbiBUaW1lXCJdK1wibXNcIil9KSxjb25zb2xlLmdyb3VwRW5kKCkpLGM9W119fSxpbnZva2U6ZnVuY3Rpb24odCxuLGEpe3ZhciByLHMsYyxsPUY7cmV0dXJuIG49bnx8ZCxhPVB8fGEsXCJzdHJpbmdcIj09dHlwZW9mIHQmJmwhPT1pJiYodD10LnNwbGl0KC9bXFwuIF0vKSxyPXQubGVuZ3RoLTEsZS5lYWNoKHQsZnVuY3Rpb24obixvKXt2YXIgYT1uIT1yP28rdFtuKzFdLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpK3RbbisxXS5zbGljZSgxKTp0O2lmKGUuaXNQbGFpbk9iamVjdChsW2FdKSYmbiE9cilsPWxbYV07ZWxzZXtpZihsW2FdIT09aSlyZXR1cm4gcz1sW2FdLCExO2lmKCFlLmlzUGxhaW5PYmplY3QobFtvXSl8fG49PXIpcmV0dXJuIGxbb10hPT1pPyhzPWxbb10sITEpOih2LmVycm9yKEMubWV0aG9kLHQpLCExKTtsPWxbb119fSkpLGUuaXNGdW5jdGlvbihzKT9jPXMuYXBwbHkoYSxuKTpzIT09aSYmKGM9cyksZS5pc0FycmF5KG8pP28ucHVzaChjKTpvIT09aT9vPVtvLGNdOmMhPT1pJiYobz1jKSxzfX0sdT8oRj09PWkmJnYuaW5pdGlhbGl6ZSgpLHYuaW52b2tlKGwpKTooRiE9PWkmJkYuaW52b2tlKFwiZGVzdHJveVwiKSx2LmluaXRpYWxpemUoKSl9KSxvIT09aT9vOnRoaXN9LGUuYXBpLnNldHRpbmdzPXtuYW1lOlwiQVBJXCIsbmFtZXNwYWNlOlwiYXBpXCIsZGVidWc6ITEsdmVyYm9zZTohMSxwZXJmb3JtYW5jZTohMCxhcGk6e30sY2FjaGU6ITAsaW50ZXJydXB0UmVxdWVzdHM6ITAsb246XCJhdXRvXCIsc3RhdGVDb250ZXh0OiExLGxvYWRpbmdEdXJhdGlvbjowLGhpZGVFcnJvcjpcImF1dG9cIixlcnJvckR1cmF0aW9uOjJlMyxlbmNvZGVQYXJhbWV0ZXJzOiEwLGFjdGlvbjohMSx1cmw6ITEsYmFzZTpcIlwiLHVybERhdGE6e30sZGVmYXVsdERhdGE6ITAsc2VyaWFsaXplRm9ybTohMSx0aHJvdHRsZTowLHRocm90dGxlRmlyc3RSZXF1ZXN0OiEwLG1ldGhvZDpcImdldFwiLGRhdGE6e30sZGF0YVR5cGU6XCJqc29uXCIsbW9ja1Jlc3BvbnNlOiExLG1vY2tSZXNwb25zZUFzeW5jOiExLGJlZm9yZVNlbmQ6ZnVuY3Rpb24oZSl7cmV0dXJuIGV9LGJlZm9yZVhIUjpmdW5jdGlvbihlKXt9LG9uUmVxdWVzdDpmdW5jdGlvbihlLHQpe30sb25SZXNwb25zZTohMSxvblN1Y2Nlc3M6ZnVuY3Rpb24oZSx0KXt9LG9uQ29tcGxldGU6ZnVuY3Rpb24oZSx0KXt9LG9uRmFpbHVyZTpmdW5jdGlvbihlLHQpe30sb25FcnJvcjpmdW5jdGlvbihlLHQpe30sb25BYm9ydDpmdW5jdGlvbihlLHQpe30sc3VjY2Vzc1Rlc3Q6ITEsZXJyb3I6e2JlZm9yZVNlbmQ6XCJUaGUgYmVmb3JlIHNlbmQgZnVuY3Rpb24gaGFzIGFib3J0ZWQgdGhlIHJlcXVlc3RcIixlcnJvcjpcIlRoZXJlIHdhcyBhbiBlcnJvciB3aXRoIHlvdXIgcmVxdWVzdFwiLGV4aXRDb25kaXRpb25zOlwiQVBJIFJlcXVlc3QgQWJvcnRlZC4gRXhpdCBjb25kaXRpb25zIG1ldFwiLEpTT05QYXJzZTpcIkpTT04gY291bGQgbm90IGJlIHBhcnNlZCBkdXJpbmcgZXJyb3IgaGFuZGxpbmdcIixsZWdhY3lQYXJhbWV0ZXJzOlwiWW91IGFyZSB1c2luZyBsZWdhY3kgQVBJIHN1Y2Nlc3MgY2FsbGJhY2sgbmFtZXNcIixtZXRob2Q6XCJUaGUgbWV0aG9kIHlvdSBjYWxsZWQgaXMgbm90IGRlZmluZWRcIixtaXNzaW5nQWN0aW9uOlwiQVBJIGFjdGlvbiB1c2VkIGJ1dCBubyB1cmwgd2FzIGRlZmluZWRcIixtaXNzaW5nU2VyaWFsaXplOlwianF1ZXJ5LXNlcmlhbGl6ZS1vYmplY3QgaXMgcmVxdWlyZWQgdG8gYWRkIGZvcm0gZGF0YSB0byBhbiBleGlzdGluZyBkYXRhIG9iamVjdFwiLG1pc3NpbmdVUkw6XCJObyBVUkwgc3BlY2lmaWVkIGZvciBhcGkgZXZlbnRcIixub1JldHVybmVkVmFsdWU6XCJUaGUgYmVmb3JlU2VuZCBjYWxsYmFjayBtdXN0IHJldHVybiBhIHNldHRpbmdzIG9iamVjdCwgYmVmb3JlU2VuZCBpZ25vcmVkLlwiLG5vU3RvcmFnZTpcIkNhY2hpbmcgcmVzcG9uc2VzIGxvY2FsbHkgcmVxdWlyZXMgc2Vzc2lvbiBzdG9yYWdlXCIscGFyc2VFcnJvcjpcIlRoZXJlIHdhcyBhbiBlcnJvciBwYXJzaW5nIHlvdXIgcmVxdWVzdFwiLHJlcXVpcmVkUGFyYW1ldGVyOlwiTWlzc2luZyBhIHJlcXVpcmVkIFVSTCBwYXJhbWV0ZXI6IFwiLHN0YXR1c01lc3NhZ2U6XCJTZXJ2ZXIgZ2F2ZSBhbiBlcnJvcjogXCIsdGltZW91dDpcIllvdXIgcmVxdWVzdCB0aW1lZCBvdXRcIn0scmVnRXhwOntyZXF1aXJlZDovXFx7XFwkKltBLXowLTldK1xcfS9nLG9wdGlvbmFsOi9cXHtcXC9cXCQqW0EtejAtOV0rXFx9L2d9LGNsYXNzTmFtZTp7bG9hZGluZzpcImxvYWRpbmdcIixlcnJvcjpcImVycm9yXCJ9LHNlbGVjdG9yOntkaXNhYmxlZDpcIi5kaXNhYmxlZFwiLGZvcm06XCJmb3JtXCJ9LG1ldGFkYXRhOnthY3Rpb246XCJhY3Rpb25cIix1cmw6XCJ1cmxcIn19fShqUXVlcnksd2luZG93LGRvY3VtZW50KSxmdW5jdGlvbihlLHQsbixpKXtcInVzZSBzdHJpY3RcIjtlLmZuLnN0YXRlPWZ1bmN0aW9uKHQpe3ZhciBvLGE9ZSh0aGlzKSxyPWEuc2VsZWN0b3J8fFwiXCIscz0oXCJvbnRvdWNoc3RhcnRcImluIG4uZG9jdW1lbnRFbGVtZW50LChuZXcgRGF0ZSkuZ2V0VGltZSgpKSxjPVtdLGw9YXJndW1lbnRzWzBdLHU9XCJzdHJpbmdcIj09dHlwZW9mIGwsZD1bXS5zbGljZS5jYWxsKGFyZ3VtZW50cywxKTtyZXR1cm4gYS5lYWNoKGZ1bmN0aW9uKCl7dmFyIG4sbT1lLmlzUGxhaW5PYmplY3QodCk/ZS5leHRlbmQoITAse30sZS5mbi5zdGF0ZS5zZXR0aW5ncyx0KTplLmV4dGVuZCh7fSxlLmZuLnN0YXRlLnNldHRpbmdzKSxmPW0uZXJyb3IsZz1tLm1ldGFkYXRhLHA9bS5jbGFzc05hbWUsdj1tLm5hbWVzcGFjZSxoPW0uc3RhdGVzLGI9bS50ZXh0LHk9XCIuXCIrdix4PXYrXCItbW9kdWxlXCIsQz1lKHRoaXMpLHc9dGhpcyxrPUMuZGF0YSh4KTtuPXtpbml0aWFsaXplOmZ1bmN0aW9uKCl7bi52ZXJib3NlKFwiSW5pdGlhbGl6aW5nIG1vZHVsZVwiKSxtLmF1dG9tYXRpYyYmbi5hZGQuZGVmYXVsdHMoKSxtLmNvbnRleHQmJlwiXCIhPT1yP2UobS5jb250ZXh0KS5vbihyLFwibW91c2VlbnRlclwiK3ksbi5jaGFuZ2UudGV4dCkub24ocixcIm1vdXNlbGVhdmVcIit5LG4ucmVzZXQudGV4dCkub24ocixcImNsaWNrXCIreSxuLnRvZ2dsZS5zdGF0ZSk6Qy5vbihcIm1vdXNlZW50ZXJcIit5LG4uY2hhbmdlLnRleHQpLm9uKFwibW91c2VsZWF2ZVwiK3ksbi5yZXNldC50ZXh0KS5vbihcImNsaWNrXCIreSxuLnRvZ2dsZS5zdGF0ZSksbi5pbnN0YW50aWF0ZSgpfSxpbnN0YW50aWF0ZTpmdW5jdGlvbigpe24udmVyYm9zZShcIlN0b3JpbmcgaW5zdGFuY2Ugb2YgbW9kdWxlXCIsbiksaz1uLEMuZGF0YSh4LG4pfSxkZXN0cm95OmZ1bmN0aW9uKCl7bi52ZXJib3NlKFwiRGVzdHJveWluZyBwcmV2aW91cyBtb2R1bGVcIixrKSxDLm9mZih5KS5yZW1vdmVEYXRhKHgpfSxyZWZyZXNoOmZ1bmN0aW9uKCl7bi52ZXJib3NlKFwiUmVmcmVzaGluZyBzZWxlY3RvciBjYWNoZVwiKSxDPWUodyl9LGFkZDp7ZGVmYXVsdHM6ZnVuY3Rpb24oKXt2YXIgbz10JiZlLmlzUGxhaW5PYmplY3QodC5zdGF0ZXMpP3Quc3RhdGVzOnt9O2UuZWFjaChtLmRlZmF1bHRzLGZ1bmN0aW9uKHQsYSl7bi5pc1t0XSE9PWkmJm4uaXNbdF0oKSYmKG4udmVyYm9zZShcIkFkZGluZyBkZWZhdWx0IHN0YXRlc1wiLHQsdyksZS5leHRlbmQobS5zdGF0ZXMsYSxvKSl9KX19LGlzOnthY3RpdmU6ZnVuY3Rpb24oKXtyZXR1cm4gQy5oYXNDbGFzcyhwLmFjdGl2ZSl9LGxvYWRpbmc6ZnVuY3Rpb24oKXtyZXR1cm4gQy5oYXNDbGFzcyhwLmxvYWRpbmcpfSxpbmFjdGl2ZTpmdW5jdGlvbigpe3JldHVybiFDLmhhc0NsYXNzKHAuYWN0aXZlKX0sc3RhdGU6ZnVuY3Rpb24oZSl7cmV0dXJuIHBbZV09PT1pPyExOkMuaGFzQ2xhc3MocFtlXSl9LGVuYWJsZWQ6ZnVuY3Rpb24oKXtyZXR1cm4hQy5pcyhtLmZpbHRlci5hY3RpdmUpfSxkaXNhYmxlZDpmdW5jdGlvbigpe3JldHVybiBDLmlzKG0uZmlsdGVyLmFjdGl2ZSl9LHRleHRFbmFibGVkOmZ1bmN0aW9uKCl7cmV0dXJuIUMuaXMobS5maWx0ZXIudGV4dCl9LGJ1dHRvbjpmdW5jdGlvbigpe3JldHVybiBDLmlzKFwiLmJ1dHRvbjpub3QoYSwgLnN1Ym1pdClcIil9LGlucHV0OmZ1bmN0aW9uKCl7cmV0dXJuIEMuaXMoXCJpbnB1dFwiKX0scHJvZ3Jlc3M6ZnVuY3Rpb24oKXtyZXR1cm4gQy5pcyhcIi51aS5wcm9ncmVzc1wiKX19LGFsbG93OmZ1bmN0aW9uKGUpe24uZGVidWcoXCJOb3cgYWxsb3dpbmcgc3RhdGVcIixlKSxoW2VdPSEwfSxkaXNhbGxvdzpmdW5jdGlvbihlKXtuLmRlYnVnKFwiTm8gbG9uZ2VyIGFsbG93aW5nXCIsZSksaFtlXT0hMX0sYWxsb3dzOmZ1bmN0aW9uKGUpe3JldHVybiBoW2VdfHwhMX0sZW5hYmxlOmZ1bmN0aW9uKCl7Qy5yZW1vdmVDbGFzcyhwLmRpc2FibGVkKX0sZGlzYWJsZTpmdW5jdGlvbigpe0MuYWRkQ2xhc3MocC5kaXNhYmxlZCl9LHNldFN0YXRlOmZ1bmN0aW9uKGUpe24uYWxsb3dzKGUpJiZDLmFkZENsYXNzKHBbZV0pfSxyZW1vdmVTdGF0ZTpmdW5jdGlvbihlKXtuLmFsbG93cyhlKSYmQy5yZW1vdmVDbGFzcyhwW2VdKX0sdG9nZ2xlOntzdGF0ZTpmdW5jdGlvbigpe3ZhciB0LG87aWYobi5hbGxvd3MoXCJhY3RpdmVcIikmJm4uaXMuZW5hYmxlZCgpKXtpZihuLnJlZnJlc2goKSxlLmZuLmFwaSE9PWkpaWYodD1DLmFwaShcImdldCByZXF1ZXN0XCIpLG89Qy5hcGkoXCJ3YXMgY2FuY2VsbGVkXCIpKW4uZGVidWcoXCJBUEkgUmVxdWVzdCBjYW5jZWxsZWQgYnkgYmVmb3Jlc2VuZFwiKSxtLmFjdGl2YXRlVGVzdD1mdW5jdGlvbigpe3JldHVybiExfSxtLmRlYWN0aXZhdGVUZXN0PWZ1bmN0aW9uKCl7cmV0dXJuITF9O2Vsc2UgaWYodClyZXR1cm4gdm9pZCBuLmxpc3RlblRvKHQpO24uY2hhbmdlLnN0YXRlKCl9fX0sbGlzdGVuVG86ZnVuY3Rpb24odCl7bi5kZWJ1ZyhcIkFQSSByZXF1ZXN0IGRldGVjdGVkLCB3YWl0aW5nIGZvciBzdGF0ZSBzaWduYWxcIix0KSx0JiYoYi5sb2FkaW5nJiZuLnVwZGF0ZS50ZXh0KGIubG9hZGluZyksZS53aGVuKHQpLnRoZW4oZnVuY3Rpb24oKXtcInJlc29sdmVkXCI9PXQuc3RhdGUoKT8obi5kZWJ1ZyhcIkFQSSByZXF1ZXN0IHN1Y2NlZWRlZFwiKSxtLmFjdGl2YXRlVGVzdD1mdW5jdGlvbigpe3JldHVybiEwfSxtLmRlYWN0aXZhdGVUZXN0PWZ1bmN0aW9uKCl7cmV0dXJuITB9KToobi5kZWJ1ZyhcIkFQSSByZXF1ZXN0IGZhaWxlZFwiKSxtLmFjdGl2YXRlVGVzdD1mdW5jdGlvbigpe3JldHVybiExfSxtLmRlYWN0aXZhdGVUZXN0PWZ1bmN0aW9uKCl7cmV0dXJuITF9KSxuLmNoYW5nZS5zdGF0ZSgpfSkpfSxjaGFuZ2U6e3N0YXRlOmZ1bmN0aW9uKCl7bi5kZWJ1ZyhcIkRldGVybWluaW5nIHN0YXRlIGNoYW5nZSBkaXJlY3Rpb25cIiksbi5pcy5pbmFjdGl2ZSgpP24uYWN0aXZhdGUoKTpuLmRlYWN0aXZhdGUoKSxtLnN5bmMmJm4uc3luYygpLG0ub25DaGFuZ2UuY2FsbCh3KX0sdGV4dDpmdW5jdGlvbigpe24uaXMudGV4dEVuYWJsZWQoKSYmKG4uaXMuZGlzYWJsZWQoKT8obi52ZXJib3NlKFwiQ2hhbmdpbmcgdGV4dCB0byBkaXNhYmxlZCB0ZXh0XCIsYi5ob3Zlciksbi51cGRhdGUudGV4dChiLmRpc2FibGVkKSk6bi5pcy5hY3RpdmUoKT9iLmhvdmVyPyhuLnZlcmJvc2UoXCJDaGFuZ2luZyB0ZXh0IHRvIGhvdmVyIHRleHRcIixiLmhvdmVyKSxuLnVwZGF0ZS50ZXh0KGIuaG92ZXIpKTpiLmRlYWN0aXZhdGUmJihuLnZlcmJvc2UoXCJDaGFuZ2luZyB0ZXh0IHRvIGRlYWN0aXZhdGluZyB0ZXh0XCIsYi5kZWFjdGl2YXRlKSxuLnVwZGF0ZS50ZXh0KGIuZGVhY3RpdmF0ZSkpOmIuaG92ZXI/KG4udmVyYm9zZShcIkNoYW5naW5nIHRleHQgdG8gaG92ZXIgdGV4dFwiLGIuaG92ZXIpLG4udXBkYXRlLnRleHQoYi5ob3ZlcikpOmIuYWN0aXZhdGUmJihuLnZlcmJvc2UoXCJDaGFuZ2luZyB0ZXh0IHRvIGFjdGl2YXRpbmcgdGV4dFwiLGIuYWN0aXZhdGUpLG4udXBkYXRlLnRleHQoYi5hY3RpdmF0ZSkpKX19LGFjdGl2YXRlOmZ1bmN0aW9uKCl7bS5hY3RpdmF0ZVRlc3QuY2FsbCh3KSYmKG4uZGVidWcoXCJTZXR0aW5nIHN0YXRlIHRvIGFjdGl2ZVwiKSxDLmFkZENsYXNzKHAuYWN0aXZlKSxuLnVwZGF0ZS50ZXh0KGIuYWN0aXZlKSxtLm9uQWN0aXZhdGUuY2FsbCh3KSl9LGRlYWN0aXZhdGU6ZnVuY3Rpb24oKXttLmRlYWN0aXZhdGVUZXN0LmNhbGwodykmJihuLmRlYnVnKFwiU2V0dGluZyBzdGF0ZSB0byBpbmFjdGl2ZVwiKSxDLnJlbW92ZUNsYXNzKHAuYWN0aXZlKSxuLnVwZGF0ZS50ZXh0KGIuaW5hY3RpdmUpLG0ub25EZWFjdGl2YXRlLmNhbGwodykpfSxzeW5jOmZ1bmN0aW9uKCl7bi52ZXJib3NlKFwiU3luY2luZyBvdGhlciBidXR0b25zIHRvIGN1cnJlbnQgc3RhdGVcIiksYS5ub3QoQykuc3RhdGUobi5pcy5hY3RpdmUoKT9cImFjdGl2YXRlXCI6XCJkZWFjdGl2YXRlXCIpfSxnZXQ6e3RleHQ6ZnVuY3Rpb24oKXtyZXR1cm4gbS5zZWxlY3Rvci50ZXh0P0MuZmluZChtLnNlbGVjdG9yLnRleHQpLnRleHQoKTpDLmh0bWwoKX0sdGV4dEZvcjpmdW5jdGlvbihlKXtyZXR1cm4gYltlXXx8ITF9fSxmbGFzaDp7dGV4dDpmdW5jdGlvbihlLHQsaSl7dmFyIG89bi5nZXQudGV4dCgpO24uZGVidWcoXCJGbGFzaGluZyB0ZXh0IG1lc3NhZ2VcIixlLHQpLGU9ZXx8bS50ZXh0LmZsYXNoLHQ9dHx8bS5mbGFzaER1cmF0aW9uLGk9aXx8ZnVuY3Rpb24oKXt9LG4udXBkYXRlLnRleHQoZSksc2V0VGltZW91dChmdW5jdGlvbigpe24udXBkYXRlLnRleHQobyksaS5jYWxsKHcpfSx0KX19LHJlc2V0Ont0ZXh0OmZ1bmN0aW9uKCl7dmFyIGU9Yi5hY3RpdmV8fEMuZGF0YShnLnN0b3JlZFRleHQpLHQ9Yi5pbmFjdGl2ZXx8Qy5kYXRhKGcuc3RvcmVkVGV4dCk7bi5pcy50ZXh0RW5hYmxlZCgpJiYobi5pcy5hY3RpdmUoKSYmZT8obi52ZXJib3NlKFwiUmVzZXR0aW5nIGFjdGl2ZSB0ZXh0XCIsZSksbi51cGRhdGUudGV4dChlKSk6dCYmKG4udmVyYm9zZShcIlJlc2V0dGluZyBpbmFjdGl2ZSB0ZXh0XCIsZSksbi51cGRhdGUudGV4dCh0KSkpfX0sdXBkYXRlOnt0ZXh0OmZ1bmN0aW9uKGUpe3ZhciB0PW4uZ2V0LnRleHQoKTtlJiZlIT09dD8obi5kZWJ1ZyhcIlVwZGF0aW5nIHRleHRcIixlKSxtLnNlbGVjdG9yLnRleHQ/Qy5kYXRhKGcuc3RvcmVkVGV4dCxlKS5maW5kKG0uc2VsZWN0b3IudGV4dCkudGV4dChlKTpDLmRhdGEoZy5zdG9yZWRUZXh0LGUpLmh0bWwoZSkpOm4uZGVidWcoXCJUZXh0IGlzIGFscmVhZHkgc2V0LCBpZ25vcmluZyB1cGRhdGVcIixlKX19LHNldHRpbmc6ZnVuY3Rpb24odCxvKXtpZihuLmRlYnVnKFwiQ2hhbmdpbmcgc2V0dGluZ1wiLHQsbyksZS5pc1BsYWluT2JqZWN0KHQpKWUuZXh0ZW5kKCEwLG0sdCk7ZWxzZXtpZihvPT09aSlyZXR1cm4gbVt0XTttW3RdPW99fSxpbnRlcm5hbDpmdW5jdGlvbih0LG8pe2lmKGUuaXNQbGFpbk9iamVjdCh0KSllLmV4dGVuZCghMCxuLHQpO2Vsc2V7aWYobz09PWkpcmV0dXJuIG5bdF07blt0XT1vfX0sZGVidWc6ZnVuY3Rpb24oKXttLmRlYnVnJiYobS5wZXJmb3JtYW5jZT9uLnBlcmZvcm1hbmNlLmxvZyhhcmd1bWVudHMpOihuLmRlYnVnPUZ1bmN0aW9uLnByb3RvdHlwZS5iaW5kLmNhbGwoY29uc29sZS5pbmZvLGNvbnNvbGUsbS5uYW1lK1wiOlwiKSxuLmRlYnVnLmFwcGx5KGNvbnNvbGUsYXJndW1lbnRzKSkpfSx2ZXJib3NlOmZ1bmN0aW9uKCl7bS52ZXJib3NlJiZtLmRlYnVnJiYobS5wZXJmb3JtYW5jZT9uLnBlcmZvcm1hbmNlLmxvZyhhcmd1bWVudHMpOihuLnZlcmJvc2U9RnVuY3Rpb24ucHJvdG90eXBlLmJpbmQuY2FsbChjb25zb2xlLmluZm8sY29uc29sZSxtLm5hbWUrXCI6XCIpLG4udmVyYm9zZS5hcHBseShjb25zb2xlLGFyZ3VtZW50cykpKX0sZXJyb3I6ZnVuY3Rpb24oKXtuLmVycm9yPUZ1bmN0aW9uLnByb3RvdHlwZS5iaW5kLmNhbGwoY29uc29sZS5lcnJvcixjb25zb2xlLG0ubmFtZStcIjpcIiksbi5lcnJvci5hcHBseShjb25zb2xlLGFyZ3VtZW50cyl9LHBlcmZvcm1hbmNlOntsb2c6ZnVuY3Rpb24oZSl7dmFyIHQsaSxvO20ucGVyZm9ybWFuY2UmJih0PShuZXcgRGF0ZSkuZ2V0VGltZSgpLG89c3x8dCxpPXQtbyxzPXQsYy5wdXNoKHtOYW1lOmVbMF0sQXJndW1lbnRzOltdLnNsaWNlLmNhbGwoZSwxKXx8XCJcIixFbGVtZW50OncsXCJFeGVjdXRpb24gVGltZVwiOml9KSksY2xlYXJUaW1lb3V0KG4ucGVyZm9ybWFuY2UudGltZXIpLG4ucGVyZm9ybWFuY2UudGltZXI9c2V0VGltZW91dChuLnBlcmZvcm1hbmNlLmRpc3BsYXksNTAwKX0sZGlzcGxheTpmdW5jdGlvbigpe3ZhciB0PW0ubmFtZStcIjpcIixvPTA7cz0hMSxjbGVhclRpbWVvdXQobi5wZXJmb3JtYW5jZS50aW1lciksZS5lYWNoKGMsZnVuY3Rpb24oZSx0KXtvKz10W1wiRXhlY3V0aW9uIFRpbWVcIl19KSx0Kz1cIiBcIitvK1wibXNcIixyJiYodCs9XCIgJ1wiK3IrXCInXCIpLChjb25zb2xlLmdyb3VwIT09aXx8Y29uc29sZS50YWJsZSE9PWkpJiZjLmxlbmd0aD4wJiYoY29uc29sZS5ncm91cENvbGxhcHNlZCh0KSxjb25zb2xlLnRhYmxlP2NvbnNvbGUudGFibGUoYyk6ZS5lYWNoKGMsZnVuY3Rpb24oZSx0KXtjb25zb2xlLmxvZyh0Lk5hbWUrXCI6IFwiK3RbXCJFeGVjdXRpb24gVGltZVwiXStcIm1zXCIpfSksY29uc29sZS5ncm91cEVuZCgpKSxjPVtdfX0saW52b2tlOmZ1bmN0aW9uKHQsYSxyKXt2YXIgcyxjLGwsdT1rO3JldHVybiBhPWF8fGQscj13fHxyLFwic3RyaW5nXCI9PXR5cGVvZiB0JiZ1IT09aSYmKHQ9dC5zcGxpdCgvW1xcLiBdLykscz10Lmxlbmd0aC0xLGUuZWFjaCh0LGZ1bmN0aW9uKG8sYSl7dmFyIHI9byE9cz9hK3RbbysxXS5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSt0W28rMV0uc2xpY2UoMSk6dDtpZihlLmlzUGxhaW5PYmplY3QodVtyXSkmJm8hPXMpdT11W3JdO2Vsc2V7aWYodVtyXSE9PWkpcmV0dXJuIGM9dVtyXSwhMTtpZighZS5pc1BsYWluT2JqZWN0KHVbYV0pfHxvPT1zKXJldHVybiB1W2FdIT09aT8oYz11W2FdLCExKToobi5lcnJvcihmLm1ldGhvZCx0KSwhMSk7dT11W2FdfX0pKSxlLmlzRnVuY3Rpb24oYyk/bD1jLmFwcGx5KHIsYSk6YyE9PWkmJihsPWMpLGUuaXNBcnJheShvKT9vLnB1c2gobCk6byE9PWk/bz1bbyxsXTpsIT09aSYmKG89bCksY319LHU/KGs9PT1pJiZuLmluaXRpYWxpemUoKSxuLmludm9rZShsKSk6KGshPT1pJiZrLmludm9rZShcImRlc3Ryb3lcIiksbi5pbml0aWFsaXplKCkpfSksbyE9PWk/bzp0aGlzfSxlLmZuLnN0YXRlLnNldHRpbmdzPXtuYW1lOlwiU3RhdGVcIixkZWJ1ZzohMSx2ZXJib3NlOiExLG5hbWVzcGFjZTpcInN0YXRlXCIscGVyZm9ybWFuY2U6ITAsb25BY3RpdmF0ZTpmdW5jdGlvbigpe30sb25EZWFjdGl2YXRlOmZ1bmN0aW9uKCl7fSxvbkNoYW5nZTpmdW5jdGlvbigpe30sYWN0aXZhdGVUZXN0OmZ1bmN0aW9uKCl7cmV0dXJuITB9LGRlYWN0aXZhdGVUZXN0OmZ1bmN0aW9uKCl7cmV0dXJuITB9LGF1dG9tYXRpYzohMCxzeW5jOiExLGZsYXNoRHVyYXRpb246MWUzLGZpbHRlcjp7dGV4dDpcIi5sb2FkaW5nLCAuZGlzYWJsZWRcIixhY3RpdmU6XCIuZGlzYWJsZWRcIn0sY29udGV4dDohMSxlcnJvcjp7YmVmb3JlU2VuZDpcIlRoZSBiZWZvcmUgc2VuZCBmdW5jdGlvbiBoYXMgY2FuY2VsbGVkIHN0YXRlIGNoYW5nZVwiLG1ldGhvZDpcIlRoZSBtZXRob2QgeW91IGNhbGxlZCBpcyBub3QgZGVmaW5lZC5cIn0sbWV0YWRhdGE6e3Byb21pc2U6XCJwcm9taXNlXCIsc3RvcmVkVGV4dDpcInN0b3JlZC10ZXh0XCJ9LGNsYXNzTmFtZTp7YWN0aXZlOlwiYWN0aXZlXCIsZGlzYWJsZWQ6XCJkaXNhYmxlZFwiLGVycm9yOlwiZXJyb3JcIixsb2FkaW5nOlwibG9hZGluZ1wiLHN1Y2Nlc3M6XCJzdWNjZXNzXCIsd2FybmluZzpcIndhcm5pbmdcIn0sc2VsZWN0b3I6e3RleHQ6ITF9LGRlZmF1bHRzOntpbnB1dDp7ZGlzYWJsZWQ6ITAsbG9hZGluZzohMCxhY3RpdmU6ITB9LGJ1dHRvbjp7ZGlzYWJsZWQ6ITAsbG9hZGluZzohMCxhY3RpdmU6ITB9LHByb2dyZXNzOnthY3RpdmU6ITAsc3VjY2VzczohMCx3YXJuaW5nOiEwLGVycm9yOiEwfX0sc3RhdGVzOnthY3RpdmU6ITAsZGlzYWJsZWQ6ITAsZXJyb3I6ITAsbG9hZGluZzohMCxzdWNjZXNzOiEwLHdhcm5pbmc6ITB9LHRleHQ6e2Rpc2FibGVkOiExLGZsYXNoOiExLGhvdmVyOiExLGFjdGl2ZTohMSxpbmFjdGl2ZTohMSxhY3RpdmF0ZTohMSxkZWFjdGl2YXRlOiExfX19KGpRdWVyeSx3aW5kb3csZG9jdW1lbnQpLGZ1bmN0aW9uKGUsdCxuLGkpe1widXNlIHN0cmljdFwiO2UuZm4udmlzaWJpbGl0eT1mdW5jdGlvbihvKXt2YXIgYSxyPWUodGhpcykscz1yLnNlbGVjdG9yfHxcIlwiLGM9KG5ldyBEYXRlKS5nZXRUaW1lKCksbD1bXSx1PWFyZ3VtZW50c1swXSxkPVwic3RyaW5nXCI9PXR5cGVvZiB1LG09W10uc2xpY2UuY2FsbChhcmd1bWVudHMsMSk7cmV0dXJuIHIuZWFjaChmdW5jdGlvbigpe3ZhciByLGYsZyxwPWUuaXNQbGFpbk9iamVjdChvKT9lLmV4dGVuZCghMCx7fSxlLmZuLnZpc2liaWxpdHkuc2V0dGluZ3Msbyk6ZS5leHRlbmQoe30sZS5mbi52aXNpYmlsaXR5LnNldHRpbmdzKSx2PXAuY2xhc3NOYW1lLGg9cC5uYW1lc3BhY2UsYj1wLmVycm9yLHk9cC5tZXRhZGF0YSx4PVwiLlwiK2gsQz1cIm1vZHVsZS1cIitoLHc9ZSh0KSxrPWUodGhpcyksUz1lKHAuY29udGV4dCksVD0oay5zZWxlY3Rvcnx8XCJcIixrLmRhdGEoQykpLEE9dC5yZXF1ZXN0QW5pbWF0aW9uRnJhbWV8fHQubW96UmVxdWVzdEFuaW1hdGlvbkZyYW1lfHx0LndlYmtpdFJlcXVlc3RBbmltYXRpb25GcmFtZXx8dC5tc1JlcXVlc3RBbmltYXRpb25GcmFtZXx8ZnVuY3Rpb24oZSl7c2V0VGltZW91dChlLDApfSxSPXRoaXMsUD0hMTtnPXtpbml0aWFsaXplOmZ1bmN0aW9uKCl7Zy5kZWJ1ZyhcIkluaXRpYWxpemluZ1wiLHApLGcuc2V0dXAuY2FjaGUoKSxnLnNob3VsZC50cmFja0NoYW5nZXMoKSYmKFwiaW1hZ2VcIj09cC50eXBlJiZnLnNldHVwLmltYWdlKCksXCJmaXhlZFwiPT1wLnR5cGUmJmcuc2V0dXAuZml4ZWQoKSxwLm9ic2VydmVDaGFuZ2VzJiZnLm9ic2VydmVDaGFuZ2VzKCksZy5iaW5kLmV2ZW50cygpKSxnLnNhdmUucG9zaXRpb24oKSxnLmlzLnZpc2libGUoKXx8Zy5lcnJvcihiLnZpc2libGUsaykscC5pbml0aWFsQ2hlY2smJmcuY2hlY2tWaXNpYmlsaXR5KCksZy5pbnN0YW50aWF0ZSgpfSxpbnN0YW50aWF0ZTpmdW5jdGlvbigpe2cuZGVidWcoXCJTdG9yaW5nIGluc3RhbmNlXCIsZyksay5kYXRhKEMsZyksVD1nfSxkZXN0cm95OmZ1bmN0aW9uKCl7Zy52ZXJib3NlKFwiRGVzdHJveWluZyBwcmV2aW91cyBtb2R1bGVcIiksZiYmZi5kaXNjb25uZWN0KCksdy5vZmYoXCJsb2FkXCIreCxnLmV2ZW50LmxvYWQpLm9mZihcInJlc2l6ZVwiK3gsZy5ldmVudC5yZXNpemUpLFMub2ZmKFwic2Nyb2xsY2hhbmdlXCIreCxnLmV2ZW50LnNjcm9sbGNoYW5nZSksay5vZmYoeCkucmVtb3ZlRGF0YShDKX0sb2JzZXJ2ZUNoYW5nZXM6ZnVuY3Rpb24oKXtcIk11dGF0aW9uT2JzZXJ2ZXJcImluIHQmJihmPW5ldyBNdXRhdGlvbk9ic2VydmVyKGZ1bmN0aW9uKGUpe2cudmVyYm9zZShcIkRPTSB0cmVlIG1vZGlmaWVkLCB1cGRhdGluZyB2aXNpYmlsaXR5IGNhbGN1bGF0aW9uc1wiKSxnLnRpbWVyPXNldFRpbWVvdXQoZnVuY3Rpb24oKXtnLnZlcmJvc2UoXCJET00gdHJlZSBtb2RpZmllZCwgdXBkYXRpbmcgc3RpY2t5IG1lbnVcIiksZy5yZWZyZXNoKCl9LDEwMCl9KSxmLm9ic2VydmUoUix7Y2hpbGRMaXN0OiEwLHN1YnRyZWU6ITB9KSxnLmRlYnVnKFwiU2V0dGluZyB1cCBtdXRhdGlvbiBvYnNlcnZlclwiLGYpKX0sYmluZDp7ZXZlbnRzOmZ1bmN0aW9uKCl7Zy52ZXJib3NlKFwiQmluZGluZyB2aXNpYmlsaXR5IGV2ZW50cyB0byBzY3JvbGwgYW5kIHJlc2l6ZVwiKSxwLnJlZnJlc2hPbkxvYWQmJncub24oXCJsb2FkXCIreCxnLmV2ZW50LmxvYWQpLHcub24oXCJyZXNpemVcIit4LGcuZXZlbnQucmVzaXplKSxTLm9mZihcInNjcm9sbFwiK3gpLm9uKFwic2Nyb2xsXCIreCxnLmV2ZW50LnNjcm9sbCkub24oXCJzY3JvbGxjaGFuZ2VcIit4LGcuZXZlbnQuc2Nyb2xsY2hhbmdlKX19LGV2ZW50OntyZXNpemU6ZnVuY3Rpb24oKXtnLmRlYnVnKFwiV2luZG93IHJlc2l6ZWRcIikscC5yZWZyZXNoT25SZXNpemUmJkEoZy5yZWZyZXNoKX0sbG9hZDpmdW5jdGlvbigpe2cuZGVidWcoXCJQYWdlIGZpbmlzaGVkIGxvYWRpbmdcIiksQShnLnJlZnJlc2gpfSxzY3JvbGw6ZnVuY3Rpb24oKXtwLnRocm90dGxlPyhjbGVhclRpbWVvdXQoZy50aW1lciksZy50aW1lcj1zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7Uy50cmlnZ2VySGFuZGxlcihcInNjcm9sbGNoYW5nZVwiK3gsW1Muc2Nyb2xsVG9wKCldKX0scC50aHJvdHRsZSkpOkEoZnVuY3Rpb24oKXtTLnRyaWdnZXJIYW5kbGVyKFwic2Nyb2xsY2hhbmdlXCIreCxbUy5zY3JvbGxUb3AoKV0pfSl9LHNjcm9sbGNoYW5nZTpmdW5jdGlvbihlLHQpe2cuY2hlY2tWaXNpYmlsaXR5KHQpfX0scHJlY2FjaGU6ZnVuY3Rpb24odCxpKXt0IGluc3RhbmNlb2YgQXJyYXl8fCh0PVt0XSk7Zm9yKHZhciBvPXQubGVuZ3RoLGE9MCxyPVtdLHM9bi5jcmVhdGVFbGVtZW50KFwiaW1nXCIpLGM9ZnVuY3Rpb24oKXthKyssYT49dC5sZW5ndGgmJmUuaXNGdW5jdGlvbihpKSYmaSgpfTtvLS07KXM9bi5jcmVhdGVFbGVtZW50KFwiaW1nXCIpLHMub25sb2FkPWMscy5vbmVycm9yPWMscy5zcmM9dFtvXSxyLnB1c2gocyl9LGVuYWJsZUNhbGxiYWNrczpmdW5jdGlvbigpe2cuZGVidWcoXCJBbGxvd2luZyBjYWxsYmFja3MgdG8gb2NjdXJcIiksUD0hMX0sZGlzYWJsZUNhbGxiYWNrczpmdW5jdGlvbigpe2cuZGVidWcoXCJEaXNhYmxpbmcgYWxsIGNhbGxiYWNrcyB0ZW1wb3JhcmlseVwiKSxQPSEwfSxzaG91bGQ6e3RyYWNrQ2hhbmdlczpmdW5jdGlvbigpe3JldHVybiBkPyhnLmRlYnVnKFwiT25lIHRpbWUgcXVlcnksIG5vIG5lZWQgdG8gYmluZCBldmVudHNcIiksITEpOihnLmRlYnVnKFwiQ2FsbGJhY2tzIGJlaW5nIGF0dGFjaGVkXCIpLCEwKX19LHNldHVwOntjYWNoZTpmdW5jdGlvbigpe2cuY2FjaGU9e29jY3VycmVkOnt9LHNjcmVlbjp7fSxlbGVtZW50Ont9fX0saW1hZ2U6ZnVuY3Rpb24oKXt2YXIgZT1rLmRhdGEoeS5zcmMpO2UmJihnLnZlcmJvc2UoXCJMYXp5IGxvYWRpbmcgaW1hZ2VcIixlKSxwLm9uY2U9ITAscC5vYnNlcnZlQ2hhbmdlcz0hMSxwLm9uT25TY3JlZW49ZnVuY3Rpb24oKXtnLmRlYnVnKFwiSW1hZ2Ugb24gc2NyZWVuXCIsUiksZy5wcmVjYWNoZShlLGZ1bmN0aW9uKCl7Zy5zZXQuaW1hZ2UoZSl9KX0pfSxmaXhlZDpmdW5jdGlvbigpe2cuZGVidWcoXCJTZXR0aW5nIHVwIGZpeGVkXCIpLHAub25jZT0hMSxwLm9ic2VydmVDaGFuZ2VzPSExLHAuaW5pdGlhbENoZWNrPSEwLHAucmVmcmVzaE9uTG9hZD0hMCxvLnRyYW5zaXRpb258fChwLnRyYW5zaXRpb249ITEpLGcuY3JlYXRlLnBsYWNlaG9sZGVyKCksZy5kZWJ1ZyhcIkFkZGVkIHBsYWNlaG9sZGVyXCIscikscC5vblRvcFBhc3NlZD1mdW5jdGlvbigpe2cuZGVidWcoXCJFbGVtZW50IHBhc3NlZCwgYWRkaW5nIGZpeGVkIHBvc2l0aW9uXCIsayksZy5zaG93LnBsYWNlaG9sZGVyKCksZy5zZXQuZml4ZWQoKSxwLnRyYW5zaXRpb24mJmUuZm4udHJhbnNpdGlvbiE9PWkmJmsudHJhbnNpdGlvbihwLnRyYW5zaXRpb24scC5kdXJhdGlvbil9LHAub25Ub3BQYXNzZWRSZXZlcnNlPWZ1bmN0aW9uKCl7Zy5kZWJ1ZyhcIkVsZW1lbnQgcmV0dXJuZWQgdG8gcG9zaXRpb24sIHJlbW92aW5nIGZpeGVkXCIsayksZy5oaWRlLnBsYWNlaG9sZGVyKCksZy5yZW1vdmUuZml4ZWQoKX19fSxjcmVhdGU6e3BsYWNlaG9sZGVyOmZ1bmN0aW9uKCl7Zy52ZXJib3NlKFwiQ3JlYXRpbmcgZml4ZWQgcG9zaXRpb24gcGxhY2Vob2xkZXJcIikscj1rLmNsb25lKCExKS5jc3MoXCJkaXNwbGF5XCIsXCJub25lXCIpLmFkZENsYXNzKHYucGxhY2Vob2xkZXIpLmluc2VydEFmdGVyKGspfX0sc2hvdzp7cGxhY2Vob2xkZXI6ZnVuY3Rpb24oKXtnLnZlcmJvc2UoXCJTaG93aW5nIHBsYWNlaG9sZGVyXCIpLHIuY3NzKFwiZGlzcGxheVwiLFwiYmxvY2tcIikuY3NzKFwidmlzaWJpbGl0eVwiLFwiaGlkZGVuXCIpfX0saGlkZTp7cGxhY2Vob2xkZXI6ZnVuY3Rpb24oKXtnLnZlcmJvc2UoXCJIaWRpbmcgcGxhY2Vob2xkZXJcIiksci5jc3MoXCJkaXNwbGF5XCIsXCJub25lXCIpLmNzcyhcInZpc2liaWxpdHlcIixcIlwiKX19LHNldDp7Zml4ZWQ6ZnVuY3Rpb24oKXtnLnZlcmJvc2UoXCJTZXR0aW5nIGVsZW1lbnQgdG8gZml4ZWQgcG9zaXRpb25cIiksay5hZGRDbGFzcyh2LmZpeGVkKS5jc3Moe3Bvc2l0aW9uOlwiZml4ZWRcIix0b3A6cC5vZmZzZXQrXCJweFwiLGxlZnQ6XCJhdXRvXCIsekluZGV4OlwiMVwifSl9LGltYWdlOmZ1bmN0aW9uKHQpe2suYXR0cihcInNyY1wiLHQpLHAudHJhbnNpdGlvbj9lLmZuLnRyYW5zaXRpb24hPT1pP2sudHJhbnNpdGlvbihwLnRyYW5zaXRpb24scC5kdXJhdGlvbik6ay5mYWRlSW4ocC5kdXJhdGlvbik6ay5zaG93KCl9fSxpczp7b25TY3JlZW46ZnVuY3Rpb24oKXt2YXIgZT1nLmdldC5lbGVtZW50Q2FsY3VsYXRpb25zKCk7cmV0dXJuIGUub25TY3JlZW59LG9mZlNjcmVlbjpmdW5jdGlvbigpe3ZhciBlPWcuZ2V0LmVsZW1lbnRDYWxjdWxhdGlvbnMoKTtyZXR1cm4gZS5vZmZTY3JlZW59LHZpc2libGU6ZnVuY3Rpb24oKXtyZXR1cm4gZy5jYWNoZSYmZy5jYWNoZS5lbGVtZW50PyEoMD09PWcuY2FjaGUuZWxlbWVudC53aWR0aCYmMD09PWcuY2FjaGUuZWxlbWVudC5vZmZzZXQudG9wKTohMX19LHJlZnJlc2g6ZnVuY3Rpb24oKXtnLmRlYnVnKFwiUmVmcmVzaGluZyBjb25zdGFudHMgKHdpZHRoL2hlaWdodClcIiksXCJmaXhlZFwiPT1wLnR5cGUmJihnLnJlbW92ZS5maXhlZCgpLGcucmVtb3ZlLm9jY3VycmVkKCkpLGcucmVzZXQoKSxnLnNhdmUucG9zaXRpb24oKSxwLmNoZWNrT25SZWZyZXNoJiZnLmNoZWNrVmlzaWJpbGl0eSgpLHAub25SZWZyZXNoLmNhbGwoUil9LHJlc2V0OmZ1bmN0aW9uKCl7Zy52ZXJib3NlKFwiUmVzZXRpbmcgYWxsIGNhY2hlZCB2YWx1ZXNcIiksZS5pc1BsYWluT2JqZWN0KGcuY2FjaGUpJiYoZy5jYWNoZS5zY3JlZW49e30sZy5jYWNoZS5lbGVtZW50PXt9KX0sY2hlY2tWaXNpYmlsaXR5OmZ1bmN0aW9uKGUpe2cudmVyYm9zZShcIkNoZWNraW5nIHZpc2liaWxpdHkgb2YgZWxlbWVudFwiLGcuY2FjaGUuZWxlbWVudCksIVAmJmcuaXMudmlzaWJsZSgpJiYoZy5zYXZlLnNjcm9sbChlKSxnLnNhdmUuY2FsY3VsYXRpb25zKCksZy5wYXNzZWQoKSxnLnBhc3NpbmdSZXZlcnNlKCksZy50b3BWaXNpYmxlUmV2ZXJzZSgpLGcuYm90dG9tVmlzaWJsZVJldmVyc2UoKSxnLnRvcFBhc3NlZFJldmVyc2UoKSxnLmJvdHRvbVBhc3NlZFJldmVyc2UoKSxnLm9uU2NyZWVuKCksZy5vZmZTY3JlZW4oKSxnLnBhc3NpbmcoKSxnLnRvcFZpc2libGUoKSxnLmJvdHRvbVZpc2libGUoKSxnLnRvcFBhc3NlZCgpLGcuYm90dG9tUGFzc2VkKCkscC5vblVwZGF0ZSYmcC5vblVwZGF0ZS5jYWxsKFIsZy5nZXQuZWxlbWVudENhbGN1bGF0aW9ucygpKSl9LHBhc3NlZDpmdW5jdGlvbih0LG4pe3ZhciBvPWcuZ2V0LmVsZW1lbnRDYWxjdWxhdGlvbnMoKTtpZih0JiZuKXAub25QYXNzZWRbdF09bjtlbHNle2lmKHQhPT1pKXJldHVybiBnLmdldC5waXhlbHNQYXNzZWQodCk+by5waXhlbHNQYXNzZWQ7by5wYXNzaW5nJiZlLmVhY2gocC5vblBhc3NlZCxmdW5jdGlvbihlLHQpe28uYm90dG9tVmlzaWJsZXx8by5waXhlbHNQYXNzZWQ+Zy5nZXQucGl4ZWxzUGFzc2VkKGUpP2cuZXhlY3V0ZSh0LGUpOnAub25jZXx8Zy5yZW1vdmUub2NjdXJyZWQodCl9KX19LG9uU2NyZWVuOmZ1bmN0aW9uKGUpe3ZhciB0PWcuZ2V0LmVsZW1lbnRDYWxjdWxhdGlvbnMoKSxuPWV8fHAub25PblNjcmVlbixvPVwib25TY3JlZW5cIjtyZXR1cm4gZSYmKGcuZGVidWcoXCJBZGRpbmcgY2FsbGJhY2sgZm9yIG9uU2NyZWVuXCIsZSkscC5vbk9uU2NyZWVuPWUpLHQub25TY3JlZW4/Zy5leGVjdXRlKG4sbyk6cC5vbmNlfHxnLnJlbW92ZS5vY2N1cnJlZChvKSxlIT09aT90Lm9uT25TY3JlZW46dm9pZCAwfSxvZmZTY3JlZW46ZnVuY3Rpb24oZSl7dmFyIHQ9Zy5nZXQuZWxlbWVudENhbGN1bGF0aW9ucygpLG49ZXx8cC5vbk9mZlNjcmVlbixvPVwib2ZmU2NyZWVuXCI7cmV0dXJuIGUmJihnLmRlYnVnKFwiQWRkaW5nIGNhbGxiYWNrIGZvciBvZmZTY3JlZW5cIixlKSxwLm9uT2ZmU2NyZWVuPWUpLHQub2ZmU2NyZWVuP2cuZXhlY3V0ZShuLG8pOnAub25jZXx8Zy5yZW1vdmUub2NjdXJyZWQobyksZSE9PWk/dC5vbk9mZlNjcmVlbjp2b2lkIDB9LHBhc3Npbmc6ZnVuY3Rpb24oZSl7dmFyIHQ9Zy5nZXQuZWxlbWVudENhbGN1bGF0aW9ucygpLG49ZXx8cC5vblBhc3Npbmcsbz1cInBhc3NpbmdcIjtyZXR1cm4gZSYmKGcuZGVidWcoXCJBZGRpbmcgY2FsbGJhY2sgZm9yIHBhc3NpbmdcIixlKSxwLm9uUGFzc2luZz1lKSx0LnBhc3Npbmc/Zy5leGVjdXRlKG4sbyk6cC5vbmNlfHxnLnJlbW92ZS5vY2N1cnJlZChvKSxlIT09aT90LnBhc3Npbmc6dm9pZCAwfSx0b3BWaXNpYmxlOmZ1bmN0aW9uKGUpe3ZhciB0PWcuZ2V0LmVsZW1lbnRDYWxjdWxhdGlvbnMoKSxuPWV8fHAub25Ub3BWaXNpYmxlLG89XCJ0b3BWaXNpYmxlXCI7cmV0dXJuIGUmJihnLmRlYnVnKFwiQWRkaW5nIGNhbGxiYWNrIGZvciB0b3AgdmlzaWJsZVwiLGUpLHAub25Ub3BWaXNpYmxlPWUpLHQudG9wVmlzaWJsZT9nLmV4ZWN1dGUobixvKTpwLm9uY2V8fGcucmVtb3ZlLm9jY3VycmVkKG8pLGU9PT1pP3QudG9wVmlzaWJsZTp2b2lkIDB9LGJvdHRvbVZpc2libGU6ZnVuY3Rpb24oZSl7dmFyIHQ9Zy5nZXQuZWxlbWVudENhbGN1bGF0aW9ucygpLG49ZXx8cC5vbkJvdHRvbVZpc2libGUsbz1cImJvdHRvbVZpc2libGVcIjtyZXR1cm4gZSYmKGcuZGVidWcoXCJBZGRpbmcgY2FsbGJhY2sgZm9yIGJvdHRvbSB2aXNpYmxlXCIsZSkscC5vbkJvdHRvbVZpc2libGU9ZSksdC5ib3R0b21WaXNpYmxlP2cuZXhlY3V0ZShuLG8pOnAub25jZXx8Zy5yZW1vdmUub2NjdXJyZWQobyksZT09PWk/dC5ib3R0b21WaXNpYmxlOnZvaWQgMH0sdG9wUGFzc2VkOmZ1bmN0aW9uKGUpe3ZhciB0PWcuZ2V0LmVsZW1lbnRDYWxjdWxhdGlvbnMoKSxuPWV8fHAub25Ub3BQYXNzZWQsbz1cInRvcFBhc3NlZFwiO3JldHVybiBlJiYoZy5kZWJ1ZyhcIkFkZGluZyBjYWxsYmFjayBmb3IgdG9wIHBhc3NlZFwiLGUpLHAub25Ub3BQYXNzZWQ9ZSksdC50b3BQYXNzZWQ/Zy5leGVjdXRlKG4sbyk6cC5vbmNlfHxnLnJlbW92ZS5vY2N1cnJlZChvKSxlPT09aT90LnRvcFBhc3NlZDp2b2lkIDB9LGJvdHRvbVBhc3NlZDpmdW5jdGlvbihlKXt2YXIgdD1nLmdldC5lbGVtZW50Q2FsY3VsYXRpb25zKCksbj1lfHxwLm9uQm90dG9tUGFzc2VkLG89XCJib3R0b21QYXNzZWRcIjtyZXR1cm4gZSYmKGcuZGVidWcoXCJBZGRpbmcgY2FsbGJhY2sgZm9yIGJvdHRvbSBwYXNzZWRcIixlKSxwLm9uQm90dG9tUGFzc2VkPWUpLHQuYm90dG9tUGFzc2VkP2cuZXhlY3V0ZShuLG8pOnAub25jZXx8Zy5yZW1vdmUub2NjdXJyZWQobyksZT09PWk/dC5ib3R0b21QYXNzZWQ6dm9pZCAwfSxwYXNzaW5nUmV2ZXJzZTpmdW5jdGlvbihlKXt2YXIgdD1nLmdldC5lbGVtZW50Q2FsY3VsYXRpb25zKCksbj1lfHxwLm9uUGFzc2luZ1JldmVyc2Usbz1cInBhc3NpbmdSZXZlcnNlXCI7cmV0dXJuIGUmJihnLmRlYnVnKFwiQWRkaW5nIGNhbGxiYWNrIGZvciBwYXNzaW5nIHJldmVyc2VcIixlKSxwLm9uUGFzc2luZ1JldmVyc2U9ZSksdC5wYXNzaW5nP3Aub25jZXx8Zy5yZW1vdmUub2NjdXJyZWQobyk6Zy5nZXQub2NjdXJyZWQoXCJwYXNzaW5nXCIpJiZnLmV4ZWN1dGUobixvKSxlIT09aT8hdC5wYXNzaW5nOnZvaWQgMH0sdG9wVmlzaWJsZVJldmVyc2U6ZnVuY3Rpb24oZSl7dmFyIHQ9Zy5nZXQuZWxlbWVudENhbGN1bGF0aW9ucygpLG49ZXx8cC5vblRvcFZpc2libGVSZXZlcnNlLG89XCJ0b3BWaXNpYmxlUmV2ZXJzZVwiO3JldHVybiBlJiYoZy5kZWJ1ZyhcIkFkZGluZyBjYWxsYmFjayBmb3IgdG9wIHZpc2libGUgcmV2ZXJzZVwiLGUpLHAub25Ub3BWaXNpYmxlUmV2ZXJzZT1lKSx0LnRvcFZpc2libGU/cC5vbmNlfHxnLnJlbW92ZS5vY2N1cnJlZChvKTpnLmdldC5vY2N1cnJlZChcInRvcFZpc2libGVcIikmJmcuZXhlY3V0ZShuLG8pLGU9PT1pPyF0LnRvcFZpc2libGU6dm9pZCAwfSxib3R0b21WaXNpYmxlUmV2ZXJzZTpmdW5jdGlvbihlKXt2YXIgdD1nLmdldC5lbGVtZW50Q2FsY3VsYXRpb25zKCksbj1lfHxwLm9uQm90dG9tVmlzaWJsZVJldmVyc2Usbz1cImJvdHRvbVZpc2libGVSZXZlcnNlXCI7cmV0dXJuIGUmJihnLmRlYnVnKFwiQWRkaW5nIGNhbGxiYWNrIGZvciBib3R0b20gdmlzaWJsZSByZXZlcnNlXCIsZSkscC5vbkJvdHRvbVZpc2libGVSZXZlcnNlPWUpLHQuYm90dG9tVmlzaWJsZT9wLm9uY2V8fGcucmVtb3ZlLm9jY3VycmVkKG8pOmcuZ2V0Lm9jY3VycmVkKFwiYm90dG9tVmlzaWJsZVwiKSYmZy5leGVjdXRlKG4sbyksZT09PWk/IXQuYm90dG9tVmlzaWJsZTp2b2lkIDB9LHRvcFBhc3NlZFJldmVyc2U6ZnVuY3Rpb24oZSl7dmFyIHQ9Zy5nZXQuZWxlbWVudENhbGN1bGF0aW9ucygpLG49ZXx8cC5vblRvcFBhc3NlZFJldmVyc2Usbz1cInRvcFBhc3NlZFJldmVyc2VcIjtyZXR1cm4gZSYmKGcuZGVidWcoXCJBZGRpbmcgY2FsbGJhY2sgZm9yIHRvcCBwYXNzZWQgcmV2ZXJzZVwiLGUpLHAub25Ub3BQYXNzZWRSZXZlcnNlPWUpLHQudG9wUGFzc2VkP3Aub25jZXx8Zy5yZW1vdmUub2NjdXJyZWQobyk6Zy5nZXQub2NjdXJyZWQoXCJ0b3BQYXNzZWRcIikmJmcuZXhlY3V0ZShuLG8pLGU9PT1pPyF0Lm9uVG9wUGFzc2VkOnZvaWQgMH0sYm90dG9tUGFzc2VkUmV2ZXJzZTpmdW5jdGlvbihlKXt2YXIgdD1nLmdldC5lbGVtZW50Q2FsY3VsYXRpb25zKCksbj1lfHxwLm9uQm90dG9tUGFzc2VkUmV2ZXJzZSxvPVwiYm90dG9tUGFzc2VkUmV2ZXJzZVwiO3JldHVybiBlJiYoZy5kZWJ1ZyhcIkFkZGluZyBjYWxsYmFjayBmb3IgYm90dG9tIHBhc3NlZCByZXZlcnNlXCIsZSkscC5vbkJvdHRvbVBhc3NlZFJldmVyc2U9ZSksdC5ib3R0b21QYXNzZWQ/cC5vbmNlfHxnLnJlbW92ZS5vY2N1cnJlZChvKTpnLmdldC5vY2N1cnJlZChcImJvdHRvbVBhc3NlZFwiKSYmZy5leGVjdXRlKG4sbyksZT09PWk/IXQuYm90dG9tUGFzc2VkOnZvaWQgMH0sZXhlY3V0ZTpmdW5jdGlvbihlLHQpe3ZhciBuPWcuZ2V0LmVsZW1lbnRDYWxjdWxhdGlvbnMoKSxpPWcuZ2V0LnNjcmVlbkNhbGN1bGF0aW9ucygpO2U9ZXx8ITEsZSYmKHAuY29udGludW91cz8oZy5kZWJ1ZyhcIkNhbGxiYWNrIGJlaW5nIGNhbGxlZCBjb250aW51b3VzbHlcIix0LG4pLGUuY2FsbChSLG4saSkpOmcuZ2V0Lm9jY3VycmVkKHQpfHwoZy5kZWJ1ZyhcIkNvbmRpdGlvbnMgbWV0XCIsdCxuKSxlLmNhbGwoUixuLGkpKSksZy5zYXZlLm9jY3VycmVkKHQpfSxyZW1vdmU6e2ZpeGVkOmZ1bmN0aW9uKCl7Zy5kZWJ1ZyhcIlJlbW92aW5nIGZpeGVkIHBvc2l0aW9uXCIpLGsucmVtb3ZlQ2xhc3Modi5maXhlZCkuY3NzKHtwb3NpdGlvbjpcIlwiLHRvcDpcIlwiLGxlZnQ6XCJcIix6SW5kZXg6XCJcIn0pfSxvY2N1cnJlZDpmdW5jdGlvbihlKXtpZihlKXt2YXIgdD1nLmNhY2hlLm9jY3VycmVkO3RbZV0hPT1pJiZ0W2VdPT09ITAmJihnLmRlYnVnKFwiQ2FsbGJhY2sgY2FuIG5vdyBiZSBjYWxsZWQgYWdhaW5cIixlKSxnLmNhY2hlLm9jY3VycmVkW2VdPSExKX1lbHNlIGcuY2FjaGUub2NjdXJyZWQ9e319fSxzYXZlOntjYWxjdWxhdGlvbnM6ZnVuY3Rpb24oKXtnLnZlcmJvc2UoXCJTYXZpbmcgYWxsIGNhbGN1bGF0aW9ucyBuZWNlc3NhcnkgdG8gZGV0ZXJtaW5lIHBvc2l0aW9uaW5nXCIpLGcuc2F2ZS5kaXJlY3Rpb24oKSxnLnNhdmUuc2NyZWVuQ2FsY3VsYXRpb25zKCksZy5zYXZlLmVsZW1lbnRDYWxjdWxhdGlvbnMoKX0sb2NjdXJyZWQ6ZnVuY3Rpb24oZSl7ZSYmKGcuY2FjaGUub2NjdXJyZWRbZV09PT1pfHxnLmNhY2hlLm9jY3VycmVkW2VdIT09ITApJiYoZy52ZXJib3NlKFwiU2F2aW5nIGNhbGxiYWNrIG9jY3VycmVkXCIsZSksZy5jYWNoZS5vY2N1cnJlZFtlXT0hMCl9LHNjcm9sbDpmdW5jdGlvbihlKXtlPWUrcC5vZmZzZXR8fFMuc2Nyb2xsVG9wKCkrcC5vZmZzZXQsZy5jYWNoZS5zY3JvbGw9ZX0sZGlyZWN0aW9uOmZ1bmN0aW9uKCl7dmFyIGUsdD1nLmdldC5zY3JvbGwoKSxuPWcuZ2V0Lmxhc3RTY3JvbGwoKTtyZXR1cm4gZT10Pm4mJm4/XCJkb3duXCI6bj50JiZuP1widXBcIjpcInN0YXRpY1wiLGcuY2FjaGUuZGlyZWN0aW9uPWUsZy5jYWNoZS5kaXJlY3Rpb259LGVsZW1lbnRQb3NpdGlvbjpmdW5jdGlvbigpe3ZhciBlPWcuY2FjaGUuZWxlbWVudCx0PWcuZ2V0LnNjcmVlblNpemUoKTtyZXR1cm4gZy52ZXJib3NlKFwiU2F2aW5nIGVsZW1lbnQgcG9zaXRpb25cIiksZS5maXRzPWUuaGVpZ2h0PHQuaGVpZ2h0LGUub2Zmc2V0PWsub2Zmc2V0KCksZS53aWR0aD1rLm91dGVyV2lkdGgoKSxlLmhlaWdodD1rLm91dGVySGVpZ2h0KCksZy5jYWNoZS5lbGVtZW50PWUsZX0sZWxlbWVudENhbGN1bGF0aW9uczpmdW5jdGlvbigpe3ZhciBlPWcuZ2V0LnNjcmVlbkNhbGN1bGF0aW9ucygpLHQ9Zy5nZXQuZWxlbWVudFBvc2l0aW9uKCk7cmV0dXJuIHAuaW5jbHVkZU1hcmdpbj8odC5tYXJnaW49e30sdC5tYXJnaW4udG9wPXBhcnNlSW50KGsuY3NzKFwibWFyZ2luLXRvcFwiKSwxMCksdC5tYXJnaW4uYm90dG9tPXBhcnNlSW50KGsuY3NzKFwibWFyZ2luLWJvdHRvbVwiKSwxMCksdC50b3A9dC5vZmZzZXQudG9wLXQubWFyZ2luLnRvcCx0LmJvdHRvbT10Lm9mZnNldC50b3ArdC5oZWlnaHQrdC5tYXJnaW4uYm90dG9tKToodC50b3A9dC5vZmZzZXQudG9wLHQuYm90dG9tPXQub2Zmc2V0LnRvcCt0LmhlaWdodCksdC50b3BWaXNpYmxlPWUuYm90dG9tPj10LnRvcCx0LnRvcFBhc3NlZD1lLnRvcD49dC50b3AsdC5ib3R0b21WaXNpYmxlPWUuYm90dG9tPj10LmJvdHRvbSx0LmJvdHRvbVBhc3NlZD1lLnRvcD49dC5ib3R0b20sdC5waXhlbHNQYXNzZWQ9MCx0LnBlcmNlbnRhZ2VQYXNzZWQ9MCx0Lm9uU2NyZWVuPXQudG9wVmlzaWJsZSYmIXQuYm90dG9tUGFzc2VkLHQucGFzc2luZz10LnRvcFBhc3NlZCYmIXQuYm90dG9tUGFzc2VkLHQub2ZmU2NyZWVuPSF0Lm9uU2NyZWVuLHQucGFzc2luZyYmKHQucGl4ZWxzUGFzc2VkPWUudG9wLXQudG9wLHQucGVyY2VudGFnZVBhc3NlZD0oZS50b3AtdC50b3ApL3QuaGVpZ2h0KSxnLmNhY2hlLmVsZW1lbnQ9dCxnLnZlcmJvc2UoXCJVcGRhdGVkIGVsZW1lbnQgY2FsY3VsYXRpb25zXCIsdCksdH0sc2NyZWVuQ2FsY3VsYXRpb25zOmZ1bmN0aW9uKCl7dmFyIGU9Zy5nZXQuc2Nyb2xsKCk7cmV0dXJuIGcuc2F2ZS5kaXJlY3Rpb24oKSxnLmNhY2hlLnNjcmVlbi50b3A9ZSxnLmNhY2hlLnNjcmVlbi5ib3R0b209ZStnLmNhY2hlLnNjcmVlbi5oZWlnaHQsZy5jYWNoZS5zY3JlZW59LHNjcmVlblNpemU6ZnVuY3Rpb24oKXtnLnZlcmJvc2UoXCJTYXZpbmcgd2luZG93IHBvc2l0aW9uXCIpLGcuY2FjaGUuc2NyZWVuPXtoZWlnaHQ6Uy5oZWlnaHQoKX19LHBvc2l0aW9uOmZ1bmN0aW9uKCl7Zy5zYXZlLnNjcmVlblNpemUoKSxnLnNhdmUuZWxlbWVudFBvc2l0aW9uKCl9fSxnZXQ6e3BpeGVsc1Bhc3NlZDpmdW5jdGlvbihlKXt2YXIgdD1nLmdldC5lbGVtZW50Q2FsY3VsYXRpb25zKCk7cmV0dXJuIGUuc2VhcmNoKFwiJVwiKT4tMT90LmhlaWdodCoocGFyc2VJbnQoZSwxMCkvMTAwKTpwYXJzZUludChlLDEwKX0sb2NjdXJyZWQ6ZnVuY3Rpb24oZSl7XHJcbnJldHVybiBnLmNhY2hlLm9jY3VycmVkIT09aT9nLmNhY2hlLm9jY3VycmVkW2VdfHwhMTohMX0sZGlyZWN0aW9uOmZ1bmN0aW9uKCl7cmV0dXJuIGcuY2FjaGUuZGlyZWN0aW9uPT09aSYmZy5zYXZlLmRpcmVjdGlvbigpLGcuY2FjaGUuZGlyZWN0aW9ufSxlbGVtZW50UG9zaXRpb246ZnVuY3Rpb24oKXtyZXR1cm4gZy5jYWNoZS5lbGVtZW50PT09aSYmZy5zYXZlLmVsZW1lbnRQb3NpdGlvbigpLGcuY2FjaGUuZWxlbWVudH0sZWxlbWVudENhbGN1bGF0aW9uczpmdW5jdGlvbigpe3JldHVybiBnLmNhY2hlLmVsZW1lbnQ9PT1pJiZnLnNhdmUuZWxlbWVudENhbGN1bGF0aW9ucygpLGcuY2FjaGUuZWxlbWVudH0sc2NyZWVuQ2FsY3VsYXRpb25zOmZ1bmN0aW9uKCl7cmV0dXJuIGcuY2FjaGUuc2NyZWVuPT09aSYmZy5zYXZlLnNjcmVlbkNhbGN1bGF0aW9ucygpLGcuY2FjaGUuc2NyZWVufSxzY3JlZW5TaXplOmZ1bmN0aW9uKCl7cmV0dXJuIGcuY2FjaGUuc2NyZWVuPT09aSYmZy5zYXZlLnNjcmVlblNpemUoKSxnLmNhY2hlLnNjcmVlbn0sc2Nyb2xsOmZ1bmN0aW9uKCl7cmV0dXJuIGcuY2FjaGUuc2Nyb2xsPT09aSYmZy5zYXZlLnNjcm9sbCgpLGcuY2FjaGUuc2Nyb2xsfSxsYXN0U2Nyb2xsOmZ1bmN0aW9uKCl7cmV0dXJuIGcuY2FjaGUuc2NyZWVuPT09aT8oZy5kZWJ1ZyhcIkZpcnN0IHNjcm9sbCBldmVudCwgbm8gbGFzdCBzY3JvbGwgY291bGQgYmUgZm91bmRcIiksITEpOmcuY2FjaGUuc2NyZWVuLnRvcH19LHNldHRpbmc6ZnVuY3Rpb24odCxuKXtpZihlLmlzUGxhaW5PYmplY3QodCkpZS5leHRlbmQoITAscCx0KTtlbHNle2lmKG49PT1pKXJldHVybiBwW3RdO3BbdF09bn19LGludGVybmFsOmZ1bmN0aW9uKHQsbil7aWYoZS5pc1BsYWluT2JqZWN0KHQpKWUuZXh0ZW5kKCEwLGcsdCk7ZWxzZXtpZihuPT09aSlyZXR1cm4gZ1t0XTtnW3RdPW59fSxkZWJ1ZzpmdW5jdGlvbigpe3AuZGVidWcmJihwLnBlcmZvcm1hbmNlP2cucGVyZm9ybWFuY2UubG9nKGFyZ3VtZW50cyk6KGcuZGVidWc9RnVuY3Rpb24ucHJvdG90eXBlLmJpbmQuY2FsbChjb25zb2xlLmluZm8sY29uc29sZSxwLm5hbWUrXCI6XCIpLGcuZGVidWcuYXBwbHkoY29uc29sZSxhcmd1bWVudHMpKSl9LHZlcmJvc2U6ZnVuY3Rpb24oKXtwLnZlcmJvc2UmJnAuZGVidWcmJihwLnBlcmZvcm1hbmNlP2cucGVyZm9ybWFuY2UubG9nKGFyZ3VtZW50cyk6KGcudmVyYm9zZT1GdW5jdGlvbi5wcm90b3R5cGUuYmluZC5jYWxsKGNvbnNvbGUuaW5mbyxjb25zb2xlLHAubmFtZStcIjpcIiksZy52ZXJib3NlLmFwcGx5KGNvbnNvbGUsYXJndW1lbnRzKSkpfSxlcnJvcjpmdW5jdGlvbigpe2cuZXJyb3I9RnVuY3Rpb24ucHJvdG90eXBlLmJpbmQuY2FsbChjb25zb2xlLmVycm9yLGNvbnNvbGUscC5uYW1lK1wiOlwiKSxnLmVycm9yLmFwcGx5KGNvbnNvbGUsYXJndW1lbnRzKX0scGVyZm9ybWFuY2U6e2xvZzpmdW5jdGlvbihlKXt2YXIgdCxuLGk7cC5wZXJmb3JtYW5jZSYmKHQ9KG5ldyBEYXRlKS5nZXRUaW1lKCksaT1jfHx0LG49dC1pLGM9dCxsLnB1c2goe05hbWU6ZVswXSxBcmd1bWVudHM6W10uc2xpY2UuY2FsbChlLDEpfHxcIlwiLEVsZW1lbnQ6UixcIkV4ZWN1dGlvbiBUaW1lXCI6bn0pKSxjbGVhclRpbWVvdXQoZy5wZXJmb3JtYW5jZS50aW1lciksZy5wZXJmb3JtYW5jZS50aW1lcj1zZXRUaW1lb3V0KGcucGVyZm9ybWFuY2UuZGlzcGxheSw1MDApfSxkaXNwbGF5OmZ1bmN0aW9uKCl7dmFyIHQ9cC5uYW1lK1wiOlwiLG49MDtjPSExLGNsZWFyVGltZW91dChnLnBlcmZvcm1hbmNlLnRpbWVyKSxlLmVhY2gobCxmdW5jdGlvbihlLHQpe24rPXRbXCJFeGVjdXRpb24gVGltZVwiXX0pLHQrPVwiIFwiK24rXCJtc1wiLHMmJih0Kz1cIiAnXCIrcytcIidcIiksKGNvbnNvbGUuZ3JvdXAhPT1pfHxjb25zb2xlLnRhYmxlIT09aSkmJmwubGVuZ3RoPjAmJihjb25zb2xlLmdyb3VwQ29sbGFwc2VkKHQpLGNvbnNvbGUudGFibGU/Y29uc29sZS50YWJsZShsKTplLmVhY2gobCxmdW5jdGlvbihlLHQpe2NvbnNvbGUubG9nKHQuTmFtZStcIjogXCIrdFtcIkV4ZWN1dGlvbiBUaW1lXCJdK1wibXNcIil9KSxjb25zb2xlLmdyb3VwRW5kKCkpLGw9W119fSxpbnZva2U6ZnVuY3Rpb24odCxuLG8pe3ZhciByLHMsYyxsPVQ7cmV0dXJuIG49bnx8bSxvPVJ8fG8sXCJzdHJpbmdcIj09dHlwZW9mIHQmJmwhPT1pJiYodD10LnNwbGl0KC9bXFwuIF0vKSxyPXQubGVuZ3RoLTEsZS5lYWNoKHQsZnVuY3Rpb24obixvKXt2YXIgYT1uIT1yP28rdFtuKzFdLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpK3RbbisxXS5zbGljZSgxKTp0O2lmKGUuaXNQbGFpbk9iamVjdChsW2FdKSYmbiE9cilsPWxbYV07ZWxzZXtpZihsW2FdIT09aSlyZXR1cm4gcz1sW2FdLCExO2lmKCFlLmlzUGxhaW5PYmplY3QobFtvXSl8fG49PXIpcmV0dXJuIGxbb10hPT1pPyhzPWxbb10sITEpOihnLmVycm9yKGIubWV0aG9kLHQpLCExKTtsPWxbb119fSkpLGUuaXNGdW5jdGlvbihzKT9jPXMuYXBwbHkobyxuKTpzIT09aSYmKGM9cyksZS5pc0FycmF5KGEpP2EucHVzaChjKTphIT09aT9hPVthLGNdOmMhPT1pJiYoYT1jKSxzfX0sZD8oVD09PWkmJmcuaW5pdGlhbGl6ZSgpLFQuc2F2ZS5zY3JvbGwoKSxULnNhdmUuY2FsY3VsYXRpb25zKCksZy5pbnZva2UodSkpOihUIT09aSYmVC5pbnZva2UoXCJkZXN0cm95XCIpLGcuaW5pdGlhbGl6ZSgpKX0pLGEhPT1pP2E6dGhpc30sZS5mbi52aXNpYmlsaXR5LnNldHRpbmdzPXtuYW1lOlwiVmlzaWJpbGl0eVwiLG5hbWVzcGFjZTpcInZpc2liaWxpdHlcIixkZWJ1ZzohMSx2ZXJib3NlOiExLHBlcmZvcm1hbmNlOiEwLG9ic2VydmVDaGFuZ2VzOiEwLGluaXRpYWxDaGVjazohMCxyZWZyZXNoT25Mb2FkOiEwLHJlZnJlc2hPblJlc2l6ZTohMCxjaGVja09uUmVmcmVzaDohMCxvbmNlOiEwLGNvbnRpbnVvdXM6ITEsb2Zmc2V0OjAsaW5jbHVkZU1hcmdpbjohMSxjb250ZXh0OnQsdGhyb3R0bGU6ITEsdHlwZTohMSx0cmFuc2l0aW9uOlwiZmFkZSBpblwiLGR1cmF0aW9uOjFlMyxvblBhc3NlZDp7fSxvbk9uU2NyZWVuOiExLG9uT2ZmU2NyZWVuOiExLG9uUGFzc2luZzohMSxvblRvcFZpc2libGU6ITEsb25Cb3R0b21WaXNpYmxlOiExLG9uVG9wUGFzc2VkOiExLG9uQm90dG9tUGFzc2VkOiExLG9uUGFzc2luZ1JldmVyc2U6ITEsb25Ub3BWaXNpYmxlUmV2ZXJzZTohMSxvbkJvdHRvbVZpc2libGVSZXZlcnNlOiExLG9uVG9wUGFzc2VkUmV2ZXJzZTohMSxvbkJvdHRvbVBhc3NlZFJldmVyc2U6ITEsb25VcGRhdGU6ITEsb25SZWZyZXNoOmZ1bmN0aW9uKCl7fSxtZXRhZGF0YTp7c3JjOlwic3JjXCJ9LGNsYXNzTmFtZTp7Zml4ZWQ6XCJmaXhlZFwiLHBsYWNlaG9sZGVyOlwicGxhY2Vob2xkZXJcIn0sZXJyb3I6e21ldGhvZDpcIlRoZSBtZXRob2QgeW91IGNhbGxlZCBpcyBub3QgZGVmaW5lZC5cIix2aXNpYmxlOlwiRWxlbWVudCBpcyBoaWRkZW4sIHlvdSBtdXN0IGNhbGwgcmVmcmVzaCBhZnRlciBlbGVtZW50IGJlY29tZXMgdmlzaWJsZVwifX19KGpRdWVyeSx3aW5kb3csZG9jdW1lbnQpO1xyXG5cclxuXHJcbi8qISBVSWtpdCAyLjIyLjAgfCBodHRwOi8vd3d3LmdldHVpa2l0LmNvbSB8IChjKSAyMDE0IFlPT3RoZW1lIHwgTUlUIExpY2Vuc2UgKi9cclxuKGZ1bmN0aW9uKGNvcmUpIHtcclxuXHJcbiAgICBpZiAodHlwZW9mIGRlZmluZSA9PSBcImZ1bmN0aW9uXCIgJiYgZGVmaW5lLmFtZCkgeyAvLyBBTURcclxuXHJcbiAgICAgICAgZGVmaW5lKFwidWlraXRcIiwgZnVuY3Rpb24oKXtcclxuXHJcbiAgICAgICAgICAgIHZhciB1aWtpdCA9IHdpbmRvdy5VSWtpdCB8fCBjb3JlKHdpbmRvdywgd2luZG93LmpRdWVyeSwgd2luZG93LmRvY3VtZW50KTtcclxuXHJcbiAgICAgICAgICAgIHVpa2l0LmxvYWQgPSBmdW5jdGlvbihyZXMsIHJlcSwgb25sb2FkLCBjb25maWcpIHtcclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgcmVzb3VyY2VzID0gcmVzLnNwbGl0KCcsJyksIGxvYWQgPSBbXSwgaSwgYmFzZSA9IChjb25maWcuY29uZmlnICYmIGNvbmZpZy5jb25maWcudWlraXQgJiYgY29uZmlnLmNvbmZpZy51aWtpdC5iYXNlID8gY29uZmlnLmNvbmZpZy51aWtpdC5iYXNlIDogXCJcIikucmVwbGFjZSgvXFwvKyQvZywgXCJcIik7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKCFiYXNlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCBcIlBsZWFzZSBkZWZpbmUgYmFzZSBwYXRoIHRvIFVJa2l0IGluIHRoZSByZXF1aXJlanMgY29uZmlnLlwiICk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgZm9yIChpID0gMDsgaSA8IHJlc291cmNlcy5sZW5ndGg7IGkgKz0gMSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciByZXNvdXJjZSA9IHJlc291cmNlc1tpXS5yZXBsYWNlKC9cXC4vZywgJy8nKTtcclxuICAgICAgICAgICAgICAgICAgICBsb2FkLnB1c2goYmFzZSsnL2NvbXBvbmVudHMvJytyZXNvdXJjZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgcmVxKGxvYWQsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIG9ubG9hZCh1aWtpdCk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiB1aWtpdDtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAoIXdpbmRvdy5qUXVlcnkpIHtcclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoIFwiVUlraXQgcmVxdWlyZXMgalF1ZXJ5XCIgKTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAod2luZG93ICYmIHdpbmRvdy5qUXVlcnkpIHtcclxuICAgICAgICBjb3JlKHdpbmRvdywgd2luZG93LmpRdWVyeSwgd2luZG93LmRvY3VtZW50KTtcclxuICAgIH1cclxuXHJcblxyXG59KShmdW5jdGlvbihnbG9iYWwsICQsIGRvYykge1xyXG5cclxuICAgIFwidXNlIHN0cmljdFwiO1xyXG5cclxuICAgIHZhciBVSSA9IHt9LCBfVUkgPSBnbG9iYWwuVUlraXQgPyBPYmplY3QuY3JlYXRlKGdsb2JhbC5VSWtpdCkgOiB1bmRlZmluZWQ7XHJcblxyXG4gICAgVUkudmVyc2lvbiA9ICcyLjIyLjAnO1xyXG5cclxuICAgIFVJLm5vQ29uZmxpY3QgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICAvLyByZXN0b3JlIFVJa2l0IHZlcnNpb25cclxuICAgICAgICBpZiAoX1VJKSB7XHJcbiAgICAgICAgICAgIGdsb2JhbC5VSWtpdCA9IF9VSTtcclxuICAgICAgICAgICAgJC5VSWtpdCAgICAgID0gX1VJO1xyXG4gICAgICAgICAgICAkLmZuLnVrICAgICAgPSBfVUkuZm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gVUk7XHJcbiAgICB9O1xyXG5cclxuICAgIFVJLnByZWZpeCA9IGZ1bmN0aW9uKHN0cikge1xyXG4gICAgICAgIHJldHVybiBzdHI7XHJcbiAgICB9O1xyXG5cclxuICAgIC8vIGNhY2hlIGpRdWVyeVxyXG4gICAgVUkuJCA9ICQ7XHJcblxyXG4gICAgVUkuJGRvYyAgPSBVSS4kKGRvY3VtZW50KTtcclxuICAgIFVJLiR3aW4gID0gVUkuJCh3aW5kb3cpO1xyXG4gICAgVUkuJGh0bWwgPSBVSS4kKCdodG1sJyk7XHJcblxyXG4gICAgVUkuc3VwcG9ydCA9IHt9O1xyXG4gICAgVUkuc3VwcG9ydC50cmFuc2l0aW9uID0gKGZ1bmN0aW9uKCkge1xyXG5cclxuICAgICAgICB2YXIgdHJhbnNpdGlvbkVuZCA9IChmdW5jdGlvbigpIHtcclxuXHJcbiAgICAgICAgICAgIHZhciBlbGVtZW50ID0gZG9jLmJvZHkgfHwgZG9jLmRvY3VtZW50RWxlbWVudCxcclxuICAgICAgICAgICAgICAgIHRyYW5zRW5kRXZlbnROYW1lcyA9IHtcclxuICAgICAgICAgICAgICAgICAgICBXZWJraXRUcmFuc2l0aW9uIDogJ3dlYmtpdFRyYW5zaXRpb25FbmQnLFxyXG4gICAgICAgICAgICAgICAgICAgIE1velRyYW5zaXRpb24gICAgOiAndHJhbnNpdGlvbmVuZCcsXHJcbiAgICAgICAgICAgICAgICAgICAgT1RyYW5zaXRpb24gICAgICA6ICdvVHJhbnNpdGlvbkVuZCBvdHJhbnNpdGlvbmVuZCcsXHJcbiAgICAgICAgICAgICAgICAgICAgdHJhbnNpdGlvbiAgICAgICA6ICd0cmFuc2l0aW9uZW5kJ1xyXG4gICAgICAgICAgICAgICAgfSwgbmFtZTtcclxuXHJcbiAgICAgICAgICAgIGZvciAobmFtZSBpbiB0cmFuc0VuZEV2ZW50TmFtZXMpIHtcclxuICAgICAgICAgICAgICAgIGlmIChlbGVtZW50LnN0eWxlW25hbWVdICE9PSB1bmRlZmluZWQpIHJldHVybiB0cmFuc0VuZEV2ZW50TmFtZXNbbmFtZV07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KCkpO1xyXG5cclxuICAgICAgICByZXR1cm4gdHJhbnNpdGlvbkVuZCAmJiB7IGVuZDogdHJhbnNpdGlvbkVuZCB9O1xyXG4gICAgfSkoKTtcclxuXHJcbiAgICBVSS5zdXBwb3J0LmFuaW1hdGlvbiA9IChmdW5jdGlvbigpIHtcclxuXHJcbiAgICAgICAgdmFyIGFuaW1hdGlvbkVuZCA9IChmdW5jdGlvbigpIHtcclxuXHJcbiAgICAgICAgICAgIHZhciBlbGVtZW50ID0gZG9jLmJvZHkgfHwgZG9jLmRvY3VtZW50RWxlbWVudCxcclxuICAgICAgICAgICAgICAgIGFuaW1FbmRFdmVudE5hbWVzID0ge1xyXG4gICAgICAgICAgICAgICAgICAgIFdlYmtpdEFuaW1hdGlvbiA6ICd3ZWJraXRBbmltYXRpb25FbmQnLFxyXG4gICAgICAgICAgICAgICAgICAgIE1vekFuaW1hdGlvbiAgICA6ICdhbmltYXRpb25lbmQnLFxyXG4gICAgICAgICAgICAgICAgICAgIE9BbmltYXRpb24gICAgICA6ICdvQW5pbWF0aW9uRW5kIG9hbmltYXRpb25lbmQnLFxyXG4gICAgICAgICAgICAgICAgICAgIGFuaW1hdGlvbiAgICAgICA6ICdhbmltYXRpb25lbmQnXHJcbiAgICAgICAgICAgICAgICB9LCBuYW1lO1xyXG5cclxuICAgICAgICAgICAgZm9yIChuYW1lIGluIGFuaW1FbmRFdmVudE5hbWVzKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoZWxlbWVudC5zdHlsZVtuYW1lXSAhPT0gdW5kZWZpbmVkKSByZXR1cm4gYW5pbUVuZEV2ZW50TmFtZXNbbmFtZV07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KCkpO1xyXG5cclxuICAgICAgICByZXR1cm4gYW5pbWF0aW9uRW5kICYmIHsgZW5kOiBhbmltYXRpb25FbmQgfTtcclxuICAgIH0pKCk7XHJcblxyXG4gICAgLy8gcmVxdWVzdEFuaW1hdGlvbkZyYW1lIHBvbHlmaWxsXHJcbiAgICAvLyBodHRwczovL2dpc3QuZ2l0aHViLmNvbS9wYXVsaXJpc2gvMTU3OTY3MVxyXG4gICAgKGZ1bmN0aW9uKCl7XHJcblxyXG4gICAgICAgIHZhciBsYXN0VGltZSA9IDA7XHJcblxyXG4gICAgICAgIGdsb2JhbC5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUgPSBnbG9iYWwucmVxdWVzdEFuaW1hdGlvbkZyYW1lIHx8IGdsb2JhbC53ZWJraXRSZXF1ZXN0QW5pbWF0aW9uRnJhbWUgfHwgZnVuY3Rpb24oY2FsbGJhY2ssIGVsZW1lbnQpIHtcclxuICAgICAgICAgICAgdmFyIGN1cnJUaW1lID0gbmV3IERhdGUoKS5nZXRUaW1lKCk7XHJcbiAgICAgICAgICAgIHZhciB0aW1lVG9DYWxsID0gTWF0aC5tYXgoMCwgMTYgLSAoY3VyclRpbWUgLSBsYXN0VGltZSkpO1xyXG4gICAgICAgICAgICB2YXIgaWQgPSBnbG9iYWwuc2V0VGltZW91dChmdW5jdGlvbigpIHsgY2FsbGJhY2soY3VyclRpbWUgKyB0aW1lVG9DYWxsKTsgfSwgdGltZVRvQ2FsbCk7XHJcbiAgICAgICAgICAgIGxhc3RUaW1lID0gY3VyclRpbWUgKyB0aW1lVG9DYWxsO1xyXG4gICAgICAgICAgICByZXR1cm4gaWQ7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgaWYgKCFnbG9iYWwuY2FuY2VsQW5pbWF0aW9uRnJhbWUpIHtcclxuXHJcbiAgICAgICAgICAgIGdsb2JhbC5jYW5jZWxBbmltYXRpb25GcmFtZSA9IGZ1bmN0aW9uKGlkKSB7XHJcbiAgICAgICAgICAgICAgICBjbGVhclRpbWVvdXQoaWQpO1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICB9KSgpO1xyXG5cclxuICAgIFVJLnN1cHBvcnQudG91Y2ggPSAoXHJcbiAgICAgICAgKCdvbnRvdWNoc3RhcnQnIGluIGRvY3VtZW50KSB8fFxyXG4gICAgICAgIChnbG9iYWwuRG9jdW1lbnRUb3VjaCAmJiBkb2N1bWVudCBpbnN0YW5jZW9mIGdsb2JhbC5Eb2N1bWVudFRvdWNoKSAgfHxcclxuICAgICAgICAoZ2xvYmFsLm5hdmlnYXRvci5tc1BvaW50ZXJFbmFibGVkICYmIGdsb2JhbC5uYXZpZ2F0b3IubXNNYXhUb3VjaFBvaW50cyA+IDApIHx8IC8vSUUgMTBcclxuICAgICAgICAoZ2xvYmFsLm5hdmlnYXRvci5wb2ludGVyRW5hYmxlZCAmJiBnbG9iYWwubmF2aWdhdG9yLm1heFRvdWNoUG9pbnRzID4gMCkgfHwgLy9JRSA+PTExXHJcbiAgICAgICAgZmFsc2VcclxuICAgICk7XHJcblxyXG4gICAgVUkuc3VwcG9ydC5tdXRhdGlvbm9ic2VydmVyID0gKGdsb2JhbC5NdXRhdGlvbk9ic2VydmVyIHx8IGdsb2JhbC5XZWJLaXRNdXRhdGlvbk9ic2VydmVyIHx8IG51bGwpO1xyXG5cclxuICAgIFVJLlV0aWxzID0ge307XHJcblxyXG4gICAgVUkuVXRpbHMuaXNGdWxsc2NyZWVuID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgcmV0dXJuIGRvY3VtZW50LndlYmtpdEZ1bGxzY3JlZW5FbGVtZW50IHx8IGRvY3VtZW50Lm1vekZ1bGxTY3JlZW5FbGVtZW50IHx8wqBkb2N1bWVudC5tc0Z1bGxzY3JlZW5FbGVtZW50IHx8IGRvY3VtZW50LmZ1bGxzY3JlZW5FbGVtZW50IHx8IGZhbHNlO1xyXG4gICAgfTtcclxuXHJcbiAgICBVSS5VdGlscy5zdHIyanNvbiA9IGZ1bmN0aW9uKHN0ciwgbm90ZXZpbCkge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGlmIChub3RldmlsKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gSlNPTi5wYXJzZShzdHJcclxuICAgICAgICAgICAgICAgICAgICAvLyB3cmFwIGtleXMgd2l0aG91dCBxdW90ZSB3aXRoIHZhbGlkIGRvdWJsZSBxdW90ZVxyXG4gICAgICAgICAgICAgICAgICAgIC5yZXBsYWNlKC8oW1xcJFxcd10rKVxccyo6L2csIGZ1bmN0aW9uKF8sICQxKXtyZXR1cm4gJ1wiJyskMSsnXCI6Jzt9KVxyXG4gICAgICAgICAgICAgICAgICAgIC8vIHJlcGxhY2luZyBzaW5nbGUgcXVvdGUgd3JhcHBlZCBvbmVzIHRvIGRvdWJsZSBxdW90ZVxyXG4gICAgICAgICAgICAgICAgICAgIC5yZXBsYWNlKC8nKFteJ10rKScvZywgZnVuY3Rpb24oXywgJDEpe3JldHVybiAnXCInKyQxKydcIic7fSlcclxuICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gKG5ldyBGdW5jdGlvbihcIlwiLCBcInZhciBqc29uID0gXCIgKyBzdHIgKyBcIjsgcmV0dXJuIEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoanNvbikpO1wiKSkoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gY2F0Y2goZSkgeyByZXR1cm4gZmFsc2U7IH1cclxuICAgIH07XHJcblxyXG4gICAgVUkuVXRpbHMuZGVib3VuY2UgPSBmdW5jdGlvbihmdW5jLCB3YWl0LCBpbW1lZGlhdGUpIHtcclxuICAgICAgICB2YXIgdGltZW91dDtcclxuICAgICAgICByZXR1cm4gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIHZhciBjb250ZXh0ID0gdGhpcywgYXJncyA9IGFyZ3VtZW50cztcclxuICAgICAgICAgICAgdmFyIGxhdGVyID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICB0aW1lb3V0ID0gbnVsbDtcclxuICAgICAgICAgICAgICAgIGlmICghaW1tZWRpYXRlKSBmdW5jLmFwcGx5KGNvbnRleHQsIGFyZ3MpO1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB2YXIgY2FsbE5vdyA9IGltbWVkaWF0ZSAmJiAhdGltZW91dDtcclxuICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRpbWVvdXQpO1xyXG4gICAgICAgICAgICB0aW1lb3V0ID0gc2V0VGltZW91dChsYXRlciwgd2FpdCk7XHJcbiAgICAgICAgICAgIGlmIChjYWxsTm93KSBmdW5jLmFwcGx5KGNvbnRleHQsIGFyZ3MpO1xyXG4gICAgICAgIH07XHJcbiAgICB9O1xyXG5cclxuICAgIFVJLlV0aWxzLnJlbW92ZUNzc1J1bGVzID0gZnVuY3Rpb24oc2VsZWN0b3JSZWdFeCkge1xyXG4gICAgICAgIHZhciBpZHgsIGlkeHMsIHN0eWxlc2hlZXQsIF9pLCBfaiwgX2ssIF9sZW4sIF9sZW4xLCBfbGVuMiwgX3JlZjtcclxuXHJcbiAgICAgICAgaWYoIXNlbGVjdG9yUmVnRXgpIHJldHVybjtcclxuXHJcbiAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgIF9yZWYgPSBkb2N1bWVudC5zdHlsZVNoZWV0cztcclxuICAgICAgICAgICAgICBmb3IgKF9pID0gMCwgX2xlbiA9IF9yZWYubGVuZ3RoOyBfaSA8IF9sZW47IF9pKyspIHtcclxuICAgICAgICAgICAgICAgIHN0eWxlc2hlZXQgPSBfcmVmW19pXTtcclxuICAgICAgICAgICAgICAgIGlkeHMgPSBbXTtcclxuICAgICAgICAgICAgICAgIHN0eWxlc2hlZXQuY3NzUnVsZXMgPSBzdHlsZXNoZWV0LmNzc1J1bGVzO1xyXG4gICAgICAgICAgICAgICAgZm9yIChpZHggPSBfaiA9IDAsIF9sZW4xID0gc3R5bGVzaGVldC5jc3NSdWxlcy5sZW5ndGg7IF9qIDwgX2xlbjE7IGlkeCA9ICsrX2opIHtcclxuICAgICAgICAgICAgICAgICAgaWYgKHN0eWxlc2hlZXQuY3NzUnVsZXNbaWR4XS50eXBlID09PSBDU1NSdWxlLlNUWUxFX1JVTEUgJiYgc2VsZWN0b3JSZWdFeC50ZXN0KHN0eWxlc2hlZXQuY3NzUnVsZXNbaWR4XS5zZWxlY3RvclRleHQpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWR4cy51bnNoaWZ0KGlkeCk7XHJcbiAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGZvciAoX2sgPSAwLCBfbGVuMiA9IGlkeHMubGVuZ3RoOyBfayA8IF9sZW4yOyBfaysrKSB7XHJcbiAgICAgICAgICAgICAgICAgIHN0eWxlc2hlZXQuZGVsZXRlUnVsZShpZHhzW19rXSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGNhdGNoIChfZXJyb3IpIHt9XHJcbiAgICAgICAgfSwgMCk7XHJcbiAgICB9O1xyXG5cclxuICAgIFVJLlV0aWxzLmlzSW5WaWV3ID0gZnVuY3Rpb24oZWxlbWVudCwgb3B0aW9ucykge1xyXG5cclxuICAgICAgICB2YXIgJGVsZW1lbnQgPSAkKGVsZW1lbnQpO1xyXG5cclxuICAgICAgICBpZiAoISRlbGVtZW50LmlzKCc6dmlzaWJsZScpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHZhciB3aW5kb3dfbGVmdCA9IFVJLiR3aW4uc2Nyb2xsTGVmdCgpLCB3aW5kb3dfdG9wID0gVUkuJHdpbi5zY3JvbGxUb3AoKSwgb2Zmc2V0ID0gJGVsZW1lbnQub2Zmc2V0KCksIGxlZnQgPSBvZmZzZXQubGVmdCwgdG9wID0gb2Zmc2V0LnRvcDtcclxuXHJcbiAgICAgICAgb3B0aW9ucyA9ICQuZXh0ZW5kKHt0b3BvZmZzZXQ6MCwgbGVmdG9mZnNldDowfSwgb3B0aW9ucyk7XHJcblxyXG4gICAgICAgIGlmICh0b3AgKyAkZWxlbWVudC5oZWlnaHQoKSA+PSB3aW5kb3dfdG9wICYmIHRvcCAtIG9wdGlvbnMudG9wb2Zmc2V0IDw9IHdpbmRvd190b3AgKyBVSS4kd2luLmhlaWdodCgpICYmXHJcbiAgICAgICAgICAgIGxlZnQgKyAkZWxlbWVudC53aWR0aCgpID49IHdpbmRvd19sZWZ0ICYmIGxlZnQgLSBvcHRpb25zLmxlZnRvZmZzZXQgPD0gd2luZG93X2xlZnQgKyBVSS4kd2luLndpZHRoKCkpIHtcclxuICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICBVSS5VdGlscy5jaGVja0Rpc3BsYXkgPSBmdW5jdGlvbihjb250ZXh0LCBpbml0YW5pbWF0aW9uKSB7XHJcblxyXG4gICAgICAgIHZhciBlbGVtZW50cyA9IFVJLiQoJ1tkYXRhLXVrLW1hcmdpbl0sIFtkYXRhLXVrLWdyaWQtbWF0Y2hdLCBbZGF0YS11ay1ncmlkLW1hcmdpbl0sIFtkYXRhLXVrLWNoZWNrLWRpc3BsYXldJywgY29udGV4dCB8fCBkb2N1bWVudCksIGFuaW1hdGVkO1xyXG5cclxuICAgICAgICBpZiAoY29udGV4dCAmJiAhZWxlbWVudHMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIGVsZW1lbnRzID0gJChjb250ZXh0KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGVsZW1lbnRzLnRyaWdnZXIoJ2Rpc3BsYXkudWsuY2hlY2snKTtcclxuXHJcbiAgICAgICAgLy8gZml4IGZpcmVmb3ggLyBJRSBhbmltYXRpb25zXHJcbiAgICAgICAgaWYgKGluaXRhbmltYXRpb24pIHtcclxuXHJcbiAgICAgICAgICAgIGlmICh0eXBlb2YoaW5pdGFuaW1hdGlvbikhPSdzdHJpbmcnKSB7XHJcbiAgICAgICAgICAgICAgICBpbml0YW5pbWF0aW9uID0gJ1tjbGFzcyo9XCJ1ay1hbmltYXRpb24tXCJdJztcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgZWxlbWVudHMuZmluZChpbml0YW5pbWF0aW9uKS5lYWNoKGZ1bmN0aW9uKCl7XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIGVsZSAgPSBVSS4kKHRoaXMpLFxyXG4gICAgICAgICAgICAgICAgICAgIGNscyAgPSBlbGUuYXR0cignY2xhc3MnKSxcclxuICAgICAgICAgICAgICAgICAgICBhbmltID0gY2xzLm1hdGNoKC91a1xcLWFuaW1hdGlvblxcLSguKykvKTtcclxuXHJcbiAgICAgICAgICAgICAgICBlbGUucmVtb3ZlQ2xhc3MoYW5pbVswXSkud2lkdGgoKTtcclxuXHJcbiAgICAgICAgICAgICAgICBlbGUuYWRkQ2xhc3MoYW5pbVswXSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIGVsZW1lbnRzO1xyXG4gICAgfTtcclxuXHJcbiAgICBVSS5VdGlscy5vcHRpb25zID0gZnVuY3Rpb24oc3RyaW5nKSB7XHJcblxyXG4gICAgICAgIGlmICgkLmlzUGxhaW5PYmplY3Qoc3RyaW5nKSkgcmV0dXJuIHN0cmluZztcclxuXHJcbiAgICAgICAgdmFyIHN0YXJ0ID0gKHN0cmluZyA/IHN0cmluZy5pbmRleE9mKFwie1wiKSA6IC0xKSwgb3B0aW9ucyA9IHt9O1xyXG5cclxuICAgICAgICBpZiAoc3RhcnQgIT0gLTEpIHtcclxuICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgIG9wdGlvbnMgPSBVSS5VdGlscy5zdHIyanNvbihzdHJpbmcuc3Vic3RyKHN0YXJ0KSk7XHJcbiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHt9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gb3B0aW9ucztcclxuICAgIH07XHJcblxyXG4gICAgVUkuVXRpbHMuYW5pbWF0ZSA9IGZ1bmN0aW9uKGVsZW1lbnQsIGNscykge1xyXG5cclxuICAgICAgICB2YXIgZCA9ICQuRGVmZXJyZWQoKTtcclxuXHJcbiAgICAgICAgZWxlbWVudCA9IFVJLiQoZWxlbWVudCk7XHJcbiAgICAgICAgY2xzICAgICA9IGNscztcclxuXHJcbiAgICAgICAgZWxlbWVudC5jc3MoJ2Rpc3BsYXknLCAnbm9uZScpLmFkZENsYXNzKGNscykub25lKFVJLnN1cHBvcnQuYW5pbWF0aW9uLmVuZCwgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIGVsZW1lbnQucmVtb3ZlQ2xhc3MoY2xzKTtcclxuICAgICAgICAgICAgZC5yZXNvbHZlKCk7XHJcbiAgICAgICAgfSkud2lkdGgoKTtcclxuXHJcbiAgICAgICAgZWxlbWVudC5jc3MoJ2Rpc3BsYXknLCAnJyk7XHJcblxyXG4gICAgICAgIHJldHVybiBkLnByb21pc2UoKTtcclxuICAgIH07XHJcblxyXG4gICAgVUkuVXRpbHMudWlkID0gZnVuY3Rpb24ocHJlZml4KSB7XHJcbiAgICAgICAgcmV0dXJuIChwcmVmaXggfHwgJ2lkJykgKyAobmV3IERhdGUoKS5nZXRUaW1lKCkpK1wiUkFORFwiKyhNYXRoLmNlaWwoTWF0aC5yYW5kb20oKSAqIDEwMDAwMCkpO1xyXG4gICAgfTtcclxuXHJcbiAgICBVSS5VdGlscy50ZW1wbGF0ZSA9IGZ1bmN0aW9uKHN0ciwgZGF0YSkge1xyXG5cclxuICAgICAgICB2YXIgdG9rZW5zID0gc3RyLnJlcGxhY2UoL1xcbi9nLCAnXFxcXG4nKS5yZXBsYWNlKC9cXHtcXHtcXHtcXHMqKC4rPylcXHMqXFx9XFx9XFx9L2csIFwie3shJDF9fVwiKS5zcGxpdCgvKFxce1xce1xccyooLis/KVxccypcXH1cXH0pL2cpLFxyXG4gICAgICAgICAgICBpPTAsIHRvYywgY21kLCBwcm9wLCB2YWwsIGZuLCBvdXRwdXQgPSBbXSwgb3BlbmJsb2NrcyA9IDA7XHJcblxyXG4gICAgICAgIHdoaWxlKGkgPCB0b2tlbnMubGVuZ3RoKSB7XHJcblxyXG4gICAgICAgICAgICB0b2MgPSB0b2tlbnNbaV07XHJcblxyXG4gICAgICAgICAgICBpZih0b2MubWF0Y2goL1xce1xce1xccyooLis/KVxccypcXH1cXH0vKSkge1xyXG4gICAgICAgICAgICAgICAgaSA9IGkgKyAxO1xyXG4gICAgICAgICAgICAgICAgdG9jICA9IHRva2Vuc1tpXTtcclxuICAgICAgICAgICAgICAgIGNtZCAgPSB0b2NbMF07XHJcbiAgICAgICAgICAgICAgICBwcm9wID0gdG9jLnN1YnN0cmluZyh0b2MubWF0Y2goL14oXFxefFxcI3xcXCF8XFx+fFxcOikvKSA/IDE6MCk7XHJcblxyXG4gICAgICAgICAgICAgICAgc3dpdGNoKGNtZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ34nOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBvdXRwdXQucHVzaChcImZvcih2YXIgJGk9MDskaTxcIitwcm9wK1wiLmxlbmd0aDskaSsrKSB7IHZhciAkaXRlbSA9IFwiK3Byb3ArXCJbJGldO1wiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgb3BlbmJsb2NrcysrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICBjYXNlICc6JzpcclxuICAgICAgICAgICAgICAgICAgICAgICAgb3V0cHV0LnB1c2goXCJmb3IodmFyICRrZXkgaW4gXCIrcHJvcCtcIikgeyB2YXIgJHZhbCA9IFwiK3Byb3ArXCJbJGtleV07XCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBvcGVuYmxvY2tzKys7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJyMnOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBvdXRwdXQucHVzaChcImlmKFwiK3Byb3ArXCIpIHtcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9wZW5ibG9ja3MrKztcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnXic6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG91dHB1dC5wdXNoKFwiaWYoIVwiK3Byb3ArXCIpIHtcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9wZW5ibG9ja3MrKztcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnLyc6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG91dHB1dC5wdXNoKFwifVwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgb3BlbmJsb2Nrcy0tO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICBjYXNlICchJzpcclxuICAgICAgICAgICAgICAgICAgICAgICAgb3V0cHV0LnB1c2goXCJfX3JldC5wdXNoKFwiK3Byb3ArXCIpO1wiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgb3V0cHV0LnB1c2goXCJfX3JldC5wdXNoKGVzY2FwZShcIitwcm9wK1wiKSk7XCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIG91dHB1dC5wdXNoKFwiX19yZXQucHVzaCgnXCIrdG9jLnJlcGxhY2UoL1xcJy9nLCBcIlxcXFwnXCIpK1wiJyk7XCIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGkgPSBpICsgMTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZuICA9IG5ldyBGdW5jdGlvbignJGRhdGEnLCBbXHJcbiAgICAgICAgICAgICd2YXIgX19yZXQgPSBbXTsnLFxyXG4gICAgICAgICAgICAndHJ5IHsnLFxyXG4gICAgICAgICAgICAnd2l0aCgkZGF0YSl7JywgKCFvcGVuYmxvY2tzID8gb3V0cHV0LmpvaW4oJycpIDogJ19fcmV0ID0gW1wiTm90IGFsbCBibG9ja3MgYXJlIGNsb3NlZCBjb3JyZWN0bHkuXCJdJyksICd9OycsXHJcbiAgICAgICAgICAgICd9Y2F0Y2goZSl7X19yZXQgPSBbZS5tZXNzYWdlXTt9JyxcclxuICAgICAgICAgICAgJ3JldHVybiBfX3JldC5qb2luKFwiXCIpLnJlcGxhY2UoL1xcXFxuXFxcXG4vZywgXCJcXFxcblwiKTsnLFxyXG4gICAgICAgICAgICBcImZ1bmN0aW9uIGVzY2FwZShodG1sKSB7IHJldHVybiBTdHJpbmcoaHRtbCkucmVwbGFjZSgvJi9nLCAnJmFtcDsnKS5yZXBsYWNlKC9cXFwiL2csICcmcXVvdDsnKS5yZXBsYWNlKC88L2csICcmbHQ7JykucmVwbGFjZSgvPi9nLCAnJmd0OycpO31cIlxyXG4gICAgICAgIF0uam9pbihcIlxcblwiKSk7XHJcblxyXG4gICAgICAgIHJldHVybiBkYXRhID8gZm4oZGF0YSkgOiBmbjtcclxuICAgIH07XHJcblxyXG4gICAgVUkuVXRpbHMuZXZlbnRzICAgICAgID0ge307XHJcbiAgICBVSS5VdGlscy5ldmVudHMuY2xpY2sgPSBVSS5zdXBwb3J0LnRvdWNoID8gJ3RhcCcgOiAnY2xpY2snO1xyXG5cclxuICAgIGdsb2JhbC5VSWtpdCA9IFVJO1xyXG5cclxuICAgIC8vIGRlcHJlY2F0ZWRcclxuXHJcbiAgICBVSS5mbiA9IGZ1bmN0aW9uKGNvbW1hbmQsIG9wdGlvbnMpIHtcclxuXHJcbiAgICAgICAgdmFyIGFyZ3MgPSBhcmd1bWVudHMsIGNtZCA9IGNvbW1hbmQubWF0Y2goL14oW2EtelxcLV0rKSg/OlxcLihbYS16XSspKT8vaSksIGNvbXBvbmVudCA9IGNtZFsxXSwgbWV0aG9kID0gY21kWzJdO1xyXG5cclxuICAgICAgICBpZiAoIVVJW2NvbXBvbmVudF0pIHtcclxuICAgICAgICAgICAgJC5lcnJvcihcIlVJa2l0IGNvbXBvbmVudCBbXCIgKyBjb21wb25lbnQgKyBcIl0gZG9lcyBub3QgZXhpc3QuXCIpO1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIHZhciAkdGhpcyA9ICQodGhpcyksIGRhdGEgPSAkdGhpcy5kYXRhKGNvbXBvbmVudCk7XHJcbiAgICAgICAgICAgIGlmICghZGF0YSkgJHRoaXMuZGF0YShjb21wb25lbnQsIChkYXRhID0gVUlbY29tcG9uZW50XSh0aGlzLCBtZXRob2QgPyB1bmRlZmluZWQgOiBvcHRpb25zKSkpO1xyXG4gICAgICAgICAgICBpZiAobWV0aG9kKSBkYXRhW21ldGhvZF0uYXBwbHkoZGF0YSwgQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJncywgMSkpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuXHJcbiAgICAkLlVJa2l0ICAgICAgICAgID0gVUk7XHJcbiAgICAkLmZuLnVrICAgICAgICAgID0gVUkuZm47XHJcblxyXG4gICAgVUkubGFuZ2RpcmVjdGlvbiA9IFVJLiRodG1sLmF0dHIoXCJkaXJcIikgPT0gXCJydGxcIiA/IFwicmlnaHRcIiA6IFwibGVmdFwiO1xyXG5cclxuICAgIFVJLmNvbXBvbmVudHMgICAgPSB7fTtcclxuXHJcbiAgICBVSS5jb21wb25lbnQgPSBmdW5jdGlvbihuYW1lLCBkZWYpIHtcclxuXHJcbiAgICAgICAgdmFyIGZuID0gZnVuY3Rpb24oZWxlbWVudCwgb3B0aW9ucykge1xyXG5cclxuICAgICAgICAgICAgdmFyICR0aGlzID0gdGhpcztcclxuXHJcbiAgICAgICAgICAgIHRoaXMuVUlraXQgICA9IFVJO1xyXG4gICAgICAgICAgICB0aGlzLmVsZW1lbnQgPSBlbGVtZW50ID8gVUkuJChlbGVtZW50KSA6IG51bGw7XHJcbiAgICAgICAgICAgIHRoaXMub3B0aW9ucyA9ICQuZXh0ZW5kKHRydWUsIHt9LCB0aGlzLmRlZmF1bHRzLCBvcHRpb25zKTtcclxuICAgICAgICAgICAgdGhpcy5wbHVnaW5zID0ge307XHJcblxyXG4gICAgICAgICAgICBpZiAodGhpcy5lbGVtZW50KSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnQuZGF0YShuYW1lLCB0aGlzKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdGhpcy5pbml0KCk7XHJcblxyXG4gICAgICAgICAgICAodGhpcy5vcHRpb25zLnBsdWdpbnMubGVuZ3RoID8gdGhpcy5vcHRpb25zLnBsdWdpbnMgOiBPYmplY3Qua2V5cyhmbi5wbHVnaW5zKSkuZm9yRWFjaChmdW5jdGlvbihwbHVnaW4pIHtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoZm4ucGx1Z2luc1twbHVnaW5dLmluaXQpIHtcclxuICAgICAgICAgICAgICAgICAgICBmbi5wbHVnaW5zW3BsdWdpbl0uaW5pdCgkdGhpcyk7XHJcbiAgICAgICAgICAgICAgICAgICAgJHRoaXMucGx1Z2luc1twbHVnaW5dID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgdGhpcy50cmlnZ2VyKCdpbml0LnVrLmNvbXBvbmVudCcsIFtuYW1lLCB0aGlzXSk7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gdGhpcztcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBmbi5wbHVnaW5zID0ge307XHJcblxyXG4gICAgICAgICQuZXh0ZW5kKHRydWUsIGZuLnByb3RvdHlwZSwge1xyXG5cclxuICAgICAgICAgICAgZGVmYXVsdHMgOiB7cGx1Z2luczogW119LFxyXG5cclxuICAgICAgICAgICAgYm9vdDogZnVuY3Rpb24oKXt9LFxyXG4gICAgICAgICAgICBpbml0OiBmdW5jdGlvbigpe30sXHJcblxyXG4gICAgICAgICAgICBvbjogZnVuY3Rpb24oYTEsYTIsYTMpe1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFVJLiQodGhpcy5lbGVtZW50IHx8IHRoaXMpLm9uKGExLGEyLGEzKTtcclxuICAgICAgICAgICAgfSxcclxuXHJcbiAgICAgICAgICAgIG9uZTogZnVuY3Rpb24oYTEsYTIsYTMpe1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFVJLiQodGhpcy5lbGVtZW50IHx8IHRoaXMpLm9uZShhMSxhMixhMyk7XHJcbiAgICAgICAgICAgIH0sXHJcblxyXG4gICAgICAgICAgICBvZmY6IGZ1bmN0aW9uKGV2dCl7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gVUkuJCh0aGlzLmVsZW1lbnQgfHwgdGhpcykub2ZmKGV2dCk7XHJcbiAgICAgICAgICAgIH0sXHJcblxyXG4gICAgICAgICAgICB0cmlnZ2VyOiBmdW5jdGlvbihldnQsIHBhcmFtcykge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFVJLiQodGhpcy5lbGVtZW50IHx8IHRoaXMpLnRyaWdnZXIoZXZ0LCBwYXJhbXMpO1xyXG4gICAgICAgICAgICB9LFxyXG5cclxuICAgICAgICAgICAgZmluZDogZnVuY3Rpb24oc2VsZWN0b3IpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBVSS4kKHRoaXMuZWxlbWVudCA/IHRoaXMuZWxlbWVudDogW10pLmZpbmQoc2VsZWN0b3IpO1xyXG4gICAgICAgICAgICB9LFxyXG5cclxuICAgICAgICAgICAgcHJveHk6IGZ1bmN0aW9uKG9iaiwgbWV0aG9kcykge1xyXG5cclxuICAgICAgICAgICAgICAgIHZhciAkdGhpcyA9IHRoaXM7XHJcblxyXG4gICAgICAgICAgICAgICAgbWV0aG9kcy5zcGxpdCgnICcpLmZvckVhY2goZnVuY3Rpb24obWV0aG9kKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEkdGhpc1ttZXRob2RdKSAkdGhpc1ttZXRob2RdID0gZnVuY3Rpb24oKSB7IHJldHVybiBvYmpbbWV0aG9kXS5hcHBseShvYmosIGFyZ3VtZW50cyk7IH07XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSxcclxuXHJcbiAgICAgICAgICAgIG1peGluOiBmdW5jdGlvbihvYmosIG1ldGhvZHMpIHtcclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgJHRoaXMgPSB0aGlzO1xyXG5cclxuICAgICAgICAgICAgICAgIG1ldGhvZHMuc3BsaXQoJyAnKS5mb3JFYWNoKGZ1bmN0aW9uKG1ldGhvZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICghJHRoaXNbbWV0aG9kXSkgJHRoaXNbbWV0aG9kXSA9IG9ialttZXRob2RdLmJpbmQoJHRoaXMpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0sXHJcblxyXG4gICAgICAgICAgICBvcHRpb246IGZ1bmN0aW9uKCkge1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID09IDEpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5vcHRpb25zW2FyZ3VtZW50c1swXV0gfHwgdW5kZWZpbmVkO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChhcmd1bWVudHMubGVuZ3RoID09IDIpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLm9wdGlvbnNbYXJndW1lbnRzWzBdXSA9IGFyZ3VtZW50c1sxXTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICB9LCBkZWYpO1xyXG5cclxuICAgICAgICB0aGlzLmNvbXBvbmVudHNbbmFtZV0gPSBmbjtcclxuXHJcbiAgICAgICAgdGhpc1tuYW1lXSA9IGZ1bmN0aW9uKCkge1xyXG5cclxuICAgICAgICAgICAgdmFyIGVsZW1lbnQsIG9wdGlvbnM7XHJcblxyXG4gICAgICAgICAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCkge1xyXG5cclxuICAgICAgICAgICAgICAgIHN3aXRjaChhcmd1bWVudHMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBhcmd1bWVudHNbMF0gPT09IFwic3RyaW5nXCIgfHwgYXJndW1lbnRzWzBdLm5vZGVUeXBlIHx8IGFyZ3VtZW50c1swXSBpbnN0YW5jZW9mIGpRdWVyeSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudCA9ICQoYXJndW1lbnRzWzBdKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbnMgPSBhcmd1bWVudHNbMF07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMjpcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQgPSAkKGFyZ3VtZW50c1swXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbnMgPSBhcmd1bWVudHNbMV07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAoZWxlbWVudCAmJiBlbGVtZW50LmRhdGEobmFtZSkpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBlbGVtZW50LmRhdGEobmFtZSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiAobmV3IFVJLmNvbXBvbmVudHNbbmFtZV0oZWxlbWVudCwgb3B0aW9ucykpO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIGlmIChVSS5kb21yZWFkeSkge1xyXG4gICAgICAgICAgICBVSS5jb21wb25lbnQuYm9vdChuYW1lKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBmbjtcclxuICAgIH07XHJcblxyXG4gICAgVUkucGx1Z2luID0gZnVuY3Rpb24oY29tcG9uZW50LCBuYW1lLCBkZWYpIHtcclxuICAgICAgICB0aGlzLmNvbXBvbmVudHNbY29tcG9uZW50XS5wbHVnaW5zW25hbWVdID0gZGVmO1xyXG4gICAgfTtcclxuXHJcbiAgICBVSS5jb21wb25lbnQuYm9vdCA9IGZ1bmN0aW9uKG5hbWUpIHtcclxuXHJcbiAgICAgICAgaWYgKFVJLmNvbXBvbmVudHNbbmFtZV0ucHJvdG90eXBlICYmIFVJLmNvbXBvbmVudHNbbmFtZV0ucHJvdG90eXBlLmJvb3QgJiYgIVVJLmNvbXBvbmVudHNbbmFtZV0uYm9vdGVkKSB7XHJcbiAgICAgICAgICAgIFVJLmNvbXBvbmVudHNbbmFtZV0ucHJvdG90eXBlLmJvb3QuYXBwbHkoVUksIFtdKTtcclxuICAgICAgICAgICAgVUkuY29tcG9uZW50c1tuYW1lXS5ib290ZWQgPSB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgVUkuY29tcG9uZW50LmJvb3RDb21wb25lbnRzID0gZnVuY3Rpb24oKSB7XHJcblxyXG4gICAgICAgIGZvciAodmFyIGNvbXBvbmVudCBpbiBVSS5jb21wb25lbnRzKSB7XHJcbiAgICAgICAgICAgIFVJLmNvbXBvbmVudC5ib290KGNvbXBvbmVudCk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcblxyXG4gICAgLy8gRE9NIG11dGF0aW9uIHNhdmUgcmVhZHkgaGVscGVyIGZ1bmN0aW9uXHJcblxyXG4gICAgVUkuZG9tT2JzZXJ2ZXJzID0gW107XHJcbiAgICBVSS5kb21yZWFkeSAgICAgPSBmYWxzZTtcclxuXHJcbiAgICBVSS5yZWFkeSA9IGZ1bmN0aW9uKGZuKSB7XHJcblxyXG4gICAgICAgIFVJLmRvbU9ic2VydmVycy5wdXNoKGZuKTtcclxuXHJcbiAgICAgICAgaWYgKFVJLmRvbXJlYWR5KSB7XHJcbiAgICAgICAgICAgIGZuKGRvY3VtZW50KTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIFVJLm9uID0gZnVuY3Rpb24oYTEsYTIsYTMpe1xyXG5cclxuICAgICAgICBpZiAoYTEgJiYgYTEuaW5kZXhPZigncmVhZHkudWsuZG9tJykgPiAtMSAmJiBVSS5kb21yZWFkeSkge1xyXG4gICAgICAgICAgICBhMi5hcHBseShVSS4kZG9jKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBVSS4kZG9jLm9uKGExLGEyLGEzKTtcclxuICAgIH07XHJcblxyXG4gICAgVUkub25lID0gZnVuY3Rpb24oYTEsYTIsYTMpe1xyXG5cclxuICAgICAgICBpZiAoYTEgJiYgYTEuaW5kZXhPZigncmVhZHkudWsuZG9tJykgPiAtMSAmJiBVSS5kb21yZWFkeSkge1xyXG4gICAgICAgICAgICBhMi5hcHBseShVSS4kZG9jKTtcclxuICAgICAgICAgICAgcmV0dXJuIFVJLiRkb2M7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gVUkuJGRvYy5vbmUoYTEsYTIsYTMpO1xyXG4gICAgfTtcclxuXHJcbiAgICBVSS50cmlnZ2VyID0gZnVuY3Rpb24oZXZ0LCBwYXJhbXMpIHtcclxuICAgICAgICByZXR1cm4gVUkuJGRvYy50cmlnZ2VyKGV2dCwgcGFyYW1zKTtcclxuICAgIH07XHJcblxyXG4gICAgVUkuZG9tT2JzZXJ2ZSA9IGZ1bmN0aW9uKHNlbGVjdG9yLCBmbikge1xyXG5cclxuICAgICAgICBpZighVUkuc3VwcG9ydC5tdXRhdGlvbm9ic2VydmVyKSByZXR1cm47XHJcblxyXG4gICAgICAgIGZuID0gZm4gfHwgZnVuY3Rpb24oKSB7fTtcclxuXHJcbiAgICAgICAgVUkuJChzZWxlY3RvcikuZWFjaChmdW5jdGlvbigpIHtcclxuXHJcbiAgICAgICAgICAgIHZhciBlbGVtZW50ICA9IHRoaXMsXHJcbiAgICAgICAgICAgICAgICAkZWxlbWVudCA9IFVJLiQoZWxlbWVudCk7XHJcblxyXG4gICAgICAgICAgICBpZiAoJGVsZW1lbnQuZGF0YSgnb2JzZXJ2ZXInKSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB0cnkge1xyXG5cclxuICAgICAgICAgICAgICAgIHZhciBvYnNlcnZlciA9IG5ldyBVSS5zdXBwb3J0Lm11dGF0aW9ub2JzZXJ2ZXIoVUkuVXRpbHMuZGVib3VuY2UoZnVuY3Rpb24obXV0YXRpb25zKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZm4uYXBwbHkoZWxlbWVudCwgW10pO1xyXG4gICAgICAgICAgICAgICAgICAgICRlbGVtZW50LnRyaWdnZXIoJ2NoYW5nZWQudWsuZG9tJyk7XHJcbiAgICAgICAgICAgICAgICB9LCA1MCkpO1xyXG5cclxuICAgICAgICAgICAgICAgIC8vIHBhc3MgaW4gdGhlIHRhcmdldCBub2RlLCBhcyB3ZWxsIGFzIHRoZSBvYnNlcnZlciBvcHRpb25zXHJcbiAgICAgICAgICAgICAgICBvYnNlcnZlci5vYnNlcnZlKGVsZW1lbnQsIHsgY2hpbGRMaXN0OiB0cnVlLCBzdWJ0cmVlOiB0cnVlIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgICRlbGVtZW50LmRhdGEoJ29ic2VydmVyJywgb2JzZXJ2ZXIpO1xyXG5cclxuICAgICAgICAgICAgfSBjYXRjaChlKSB7fVxyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuXHJcbiAgICBVSS5pbml0ID0gZnVuY3Rpb24ocm9vdCkge1xyXG5cclxuICAgICAgICByb290ID0gcm9vdCB8fCBkb2N1bWVudDtcclxuXHJcbiAgICAgICAgVUkuZG9tT2JzZXJ2ZXJzLmZvckVhY2goZnVuY3Rpb24oZm4pe1xyXG4gICAgICAgICAgICBmbihyb290KTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcblxyXG4gICAgVUkub24oJ2RvbXJlYWR5LnVrLmRvbScsIGZ1bmN0aW9uKCl7XHJcblxyXG4gICAgICAgIFVJLmluaXQoKTtcclxuXHJcbiAgICAgICAgaWYgKFVJLmRvbXJlYWR5KSBVSS5VdGlscy5jaGVja0Rpc3BsYXkoKTtcclxuICAgIH0pO1xyXG5cclxuICAgICQoZnVuY3Rpb24oKXtcclxuXHJcbiAgICAgICAgVUkuJGJvZHkgPSBVSS4kKCdib2R5Jyk7XHJcblxyXG4gICAgICAgIFVJLnJlYWR5KGZ1bmN0aW9uKGNvbnRleHQpe1xyXG4gICAgICAgICAgICBVSS5kb21PYnNlcnZlKCdbZGF0YS11ay1vYnNlcnZlXScpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBVSS5vbignY2hhbmdlZC51ay5kb20nLCBmdW5jdGlvbihlKSB7XHJcbiAgICAgICAgICAgIFVJLmluaXQoZS50YXJnZXQpO1xyXG4gICAgICAgICAgICBVSS5VdGlscy5jaGVja0Rpc3BsYXkoZS50YXJnZXQpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBVSS50cmlnZ2VyKCdiZWZvcmVyZWFkeS51ay5kb20nKTtcclxuXHJcbiAgICAgICAgVUkuY29tcG9uZW50LmJvb3RDb21wb25lbnRzKCk7XHJcblxyXG4gICAgICAgIC8vIGN1c3RvbSBzY3JvbGwgb2JzZXJ2ZXJcclxuICAgICAgICBzZXRJbnRlcnZhbCgoZnVuY3Rpb24oKXtcclxuXHJcbiAgICAgICAgICAgIHZhciBtZW1vcnkgPSB7eDogd2luZG93LnBhZ2VYT2Zmc2V0LCB5OndpbmRvdy5wYWdlWU9mZnNldH0sIGRpcjtcclxuXHJcbiAgICAgICAgICAgIHZhciBmbiA9IGZ1bmN0aW9uKCl7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKG1lbW9yeS54ICE9IHdpbmRvdy5wYWdlWE9mZnNldCB8fCBtZW1vcnkueSAhPSB3aW5kb3cucGFnZVlPZmZzZXQpIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgZGlyID0ge3g6IDAgLCB5OiAwfTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHdpbmRvdy5wYWdlWE9mZnNldCAhPSBtZW1vcnkueCkgZGlyLnggPSB3aW5kb3cucGFnZVhPZmZzZXQgPiBtZW1vcnkueCA/IDE6LTE7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHdpbmRvdy5wYWdlWU9mZnNldCAhPSBtZW1vcnkueSkgZGlyLnkgPSB3aW5kb3cucGFnZVlPZmZzZXQgPiBtZW1vcnkueSA/IDE6LTE7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIG1lbW9yeSA9IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgXCJkaXJcIjogZGlyLCBcInhcIjogd2luZG93LnBhZ2VYT2Zmc2V0LCBcInlcIjogd2luZG93LnBhZ2VZT2Zmc2V0XHJcbiAgICAgICAgICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgVUkuJGRvYy50cmlnZ2VyKCdzY3JvbGxpbmcudWsuZG9jdW1lbnQnLCBbbWVtb3J5XSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICBpZiAoVUkuc3VwcG9ydC50b3VjaCkge1xyXG4gICAgICAgICAgICAgICAgVUkuJGh0bWwub24oJ3RvdWNobW92ZSB0b3VjaGVuZCBNU1BvaW50ZXJNb3ZlIE1TUG9pbnRlclVwIHBvaW50ZXJtb3ZlIHBvaW50ZXJ1cCcsIGZuKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKG1lbW9yeS54IHx8IG1lbW9yeS55KSBmbigpO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIGZuO1xyXG5cclxuICAgICAgICB9KSgpLCAxNSk7XHJcblxyXG4gICAgICAgIC8vIHJ1biBjb21wb25lbnQgaW5pdCBmdW5jdGlvbnMgb24gZG9tXHJcbiAgICAgICAgVUkudHJpZ2dlcignZG9tcmVhZHkudWsuZG9tJyk7XHJcblxyXG4gICAgICAgIGlmIChVSS5zdXBwb3J0LnRvdWNoKSB7XHJcblxyXG4gICAgICAgICAgICAvLyByZW1vdmUgY3NzIGhvdmVyIHJ1bGVzIGZvciB0b3VjaCBkZXZpY2VzXHJcbiAgICAgICAgICAgIC8vIFVJLlV0aWxzLnJlbW92ZUNzc1J1bGVzKC9cXC51ay0oPyFuYXZiYXIpLio6aG92ZXIvKTtcclxuXHJcbiAgICAgICAgICAgIC8vIHZpZXdwb3J0IHVuaXQgZml4IGZvciB1ay1oZWlnaHQtdmlld3BvcnQgLSBzaG91bGQgYmUgZml4ZWQgaW4gaU9TIDhcclxuICAgICAgICAgICAgaWYgKG5hdmlnYXRvci51c2VyQWdlbnQubWF0Y2goLyhpUGFkfGlQaG9uZXxpUG9kKS9nKSkge1xyXG5cclxuICAgICAgICAgICAgICAgIFVJLiR3aW4ub24oJ2xvYWQgb3JpZW50YXRpb25jaGFuZ2UgcmVzaXplJywgVUkuVXRpbHMuZGVib3VuY2UoKGZ1bmN0aW9uKCl7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHZhciBmbiA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkKCcudWstaGVpZ2h0LXZpZXdwb3J0JykuY3NzKCdoZWlnaHQnLCB3aW5kb3cuaW5uZXJIZWlnaHQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZm47XHJcbiAgICAgICAgICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZuKCk7XHJcblxyXG4gICAgICAgICAgICAgICAgfSkoKSwgMTAwKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIFVJLnRyaWdnZXIoJ2FmdGVycmVhZHkudWsuZG9tJyk7XHJcblxyXG4gICAgICAgIC8vIG1hcmsgdGhhdCBkb21yZWFkeSBpcyBsZWZ0IGJlaGluZFxyXG4gICAgICAgIFVJLmRvbXJlYWR5ID0gdHJ1ZTtcclxuICAgIH0pO1xyXG5cclxuICAgIC8vIGFkZCB0b3VjaCBpZGVudGlmaWVyIGNsYXNzXHJcbiAgICBVSS4kaHRtbC5hZGRDbGFzcyhVSS5zdXBwb3J0LnRvdWNoID8gXCJ1ay10b3VjaFwiIDogXCJ1ay1ub3RvdWNoXCIpO1xyXG5cclxuICAgIC8vIGFkZCB1ay1ob3ZlciBjbGFzcyBvbiB0YXAgdG8gc3VwcG9ydCBvdmVybGF5cyBvbiB0b3VjaCBkZXZpY2VzXHJcbiAgICBpZiAoVUkuc3VwcG9ydC50b3VjaCkge1xyXG5cclxuICAgICAgICB2YXIgaG92ZXJzZXQgPSBmYWxzZSxcclxuICAgICAgICAgICAgZXhjbHVkZSxcclxuICAgICAgICAgICAgaG92ZXJjbHMgPSAndWstaG92ZXInLFxyXG4gICAgICAgICAgICBzZWxlY3RvciA9ICcudWstb3ZlcmxheSwgLnVrLW92ZXJsYXktaG92ZXIsIC51ay1vdmVybGF5LXRvZ2dsZSwgLnVrLWFuaW1hdGlvbi1ob3ZlciwgLnVrLWhhcy1ob3Zlcic7XHJcblxyXG4gICAgICAgIFVJLiRodG1sLm9uKCdtb3VzZWVudGVyIHRvdWNoc3RhcnQgTVNQb2ludGVyRG93biBwb2ludGVyZG93bicsIHNlbGVjdG9yLCBmdW5jdGlvbigpIHtcclxuXHJcbiAgICAgICAgICAgIGlmIChob3ZlcnNldCkgJCgnLicraG92ZXJjbHMpLnJlbW92ZUNsYXNzKGhvdmVyY2xzKTtcclxuXHJcbiAgICAgICAgICAgIGhvdmVyc2V0ID0gJCh0aGlzKS5hZGRDbGFzcyhob3ZlcmNscyk7XHJcblxyXG4gICAgICAgIH0pLm9uKCdtb3VzZWxlYXZlIHRvdWNoZW5kIE1TUG9pbnRlclVwIHBvaW50ZXJ1cCcsIGZ1bmN0aW9uKGUpIHtcclxuXHJcbiAgICAgICAgICAgIGV4Y2x1ZGUgPSAkKGUudGFyZ2V0KS5wYXJlbnRzKHNlbGVjdG9yKTtcclxuXHJcbiAgICAgICAgICAgIGlmIChob3ZlcnNldCkge1xyXG4gICAgICAgICAgICAgICAgaG92ZXJzZXQubm90KGV4Y2x1ZGUpLnJlbW92ZUNsYXNzKGhvdmVyY2xzKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBVSTtcclxufSk7XHJcbi8qISBVSWtpdCAyLjIyLjAgfCBodHRwOi8vd3d3LmdldHVpa2l0LmNvbSB8IChjKSAyMDE0IFlPT3RoZW1lIHwgTUlUIExpY2Vuc2UgKi9cclxuLy8gIEJhc2VkIG9uIFplcHRvcyB0b3VjaC5qc1xyXG4vLyAgaHR0cHM6Ly9yYXcuZ2l0aHViLmNvbS9tYWRyb2JieS96ZXB0by9tYXN0ZXIvc3JjL3RvdWNoLmpzXHJcbi8vICBaZXB0by5qcyBtYXkgYmUgZnJlZWx5IGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBNSVQgbGljZW5zZS5cclxuXHJcbjsoZnVuY3Rpb24oJCl7XHJcblxyXG4gIGlmICgkLmZuLnN3aXBlTGVmdCkge1xyXG4gICAgcmV0dXJuO1xyXG4gIH1cclxuXHJcblxyXG4gIHZhciB0b3VjaCA9IHt9LCB0b3VjaFRpbWVvdXQsIHRhcFRpbWVvdXQsIHN3aXBlVGltZW91dCwgbG9uZ1RhcFRpbWVvdXQsIGxvbmdUYXBEZWxheSA9IDc1MCwgZ2VzdHVyZTtcclxuXHJcbiAgZnVuY3Rpb24gc3dpcGVEaXJlY3Rpb24oeDEsIHgyLCB5MSwgeTIpIHtcclxuICAgIHJldHVybiBNYXRoLmFicyh4MSAtIHgyKSA+PSBNYXRoLmFicyh5MSAtIHkyKSA/ICh4MSAtIHgyID4gMCA/ICdMZWZ0JyA6ICdSaWdodCcpIDogKHkxIC0geTIgPiAwID8gJ1VwJyA6ICdEb3duJyk7XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBsb25nVGFwKCkge1xyXG4gICAgbG9uZ1RhcFRpbWVvdXQgPSBudWxsO1xyXG4gICAgaWYgKHRvdWNoLmxhc3QpIHtcclxuICAgICAgdG91Y2guZWwudHJpZ2dlcignbG9uZ1RhcCcpO1xyXG4gICAgICB0b3VjaCA9IHt9O1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gY2FuY2VsTG9uZ1RhcCgpIHtcclxuICAgIGlmIChsb25nVGFwVGltZW91dCkgY2xlYXJUaW1lb3V0KGxvbmdUYXBUaW1lb3V0KTtcclxuICAgIGxvbmdUYXBUaW1lb3V0ID0gbnVsbDtcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIGNhbmNlbEFsbCgpIHtcclxuICAgIGlmICh0b3VjaFRpbWVvdXQpICAgY2xlYXJUaW1lb3V0KHRvdWNoVGltZW91dCk7XHJcbiAgICBpZiAodGFwVGltZW91dCkgICAgIGNsZWFyVGltZW91dCh0YXBUaW1lb3V0KTtcclxuICAgIGlmIChzd2lwZVRpbWVvdXQpICAgY2xlYXJUaW1lb3V0KHN3aXBlVGltZW91dCk7XHJcbiAgICBpZiAobG9uZ1RhcFRpbWVvdXQpIGNsZWFyVGltZW91dChsb25nVGFwVGltZW91dCk7XHJcbiAgICB0b3VjaFRpbWVvdXQgPSB0YXBUaW1lb3V0ID0gc3dpcGVUaW1lb3V0ID0gbG9uZ1RhcFRpbWVvdXQgPSBudWxsO1xyXG4gICAgdG91Y2ggPSB7fTtcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIGlzUHJpbWFyeVRvdWNoKGV2ZW50KXtcclxuICAgIHJldHVybiBldmVudC5wb2ludGVyVHlwZSA9PSBldmVudC5NU1BPSU5URVJfVFlQRV9UT1VDSCAmJiBldmVudC5pc1ByaW1hcnk7XHJcbiAgfVxyXG5cclxuICAkKGZ1bmN0aW9uKCl7XHJcbiAgICB2YXIgbm93LCBkZWx0YSwgZGVsdGFYID0gMCwgZGVsdGFZID0gMCwgZmlyc3RUb3VjaDtcclxuXHJcbiAgICBpZiAoJ01TR2VzdHVyZScgaW4gd2luZG93KSB7XHJcbiAgICAgIGdlc3R1cmUgPSBuZXcgTVNHZXN0dXJlKCk7XHJcbiAgICAgIGdlc3R1cmUudGFyZ2V0ID0gZG9jdW1lbnQuYm9keTtcclxuICAgIH1cclxuXHJcbiAgICAkKGRvY3VtZW50KVxyXG4gICAgICAub24oJ01TR2VzdHVyZUVuZCBnZXN0dXJlZW5kJywgZnVuY3Rpb24oZSl7XHJcblxyXG4gICAgICAgIHZhciBzd2lwZURpcmVjdGlvbkZyb21WZWxvY2l0eSA9IGUub3JpZ2luYWxFdmVudC52ZWxvY2l0eVggPiAxID8gJ1JpZ2h0JyA6IGUub3JpZ2luYWxFdmVudC52ZWxvY2l0eVggPCAtMSA/ICdMZWZ0JyA6IGUub3JpZ2luYWxFdmVudC52ZWxvY2l0eVkgPiAxID8gJ0Rvd24nIDogZS5vcmlnaW5hbEV2ZW50LnZlbG9jaXR5WSA8IC0xID8gJ1VwJyA6IG51bGw7XHJcblxyXG4gICAgICAgIGlmIChzd2lwZURpcmVjdGlvbkZyb21WZWxvY2l0eSkge1xyXG4gICAgICAgICAgdG91Y2guZWwudHJpZ2dlcignc3dpcGUnKTtcclxuICAgICAgICAgIHRvdWNoLmVsLnRyaWdnZXIoJ3N3aXBlJysgc3dpcGVEaXJlY3Rpb25Gcm9tVmVsb2NpdHkpO1xyXG4gICAgICAgIH1cclxuICAgICAgfSlcclxuICAgICAgLy8gTVNQb2ludGVyRG93bjogZm9yIElFMTBcclxuICAgICAgLy8gcG9pbnRlcmRvd246IGZvciBJRTExXHJcbiAgICAgIC5vbigndG91Y2hzdGFydCBNU1BvaW50ZXJEb3duIHBvaW50ZXJkb3duJywgZnVuY3Rpb24oZSl7XHJcblxyXG4gICAgICAgIGlmKGUudHlwZSA9PSAnTVNQb2ludGVyRG93bicgJiYgIWlzUHJpbWFyeVRvdWNoKGUub3JpZ2luYWxFdmVudCkpIHJldHVybjtcclxuXHJcbiAgICAgICAgZmlyc3RUb3VjaCA9IChlLnR5cGUgPT0gJ01TUG9pbnRlckRvd24nIHx8IGUudHlwZSA9PSAncG9pbnRlcmRvd24nKSA/IGUgOiBlLm9yaWdpbmFsRXZlbnQudG91Y2hlc1swXTtcclxuXHJcbiAgICAgICAgbm93ICAgICAgPSBEYXRlLm5vdygpO1xyXG4gICAgICAgIGRlbHRhICAgID0gbm93IC0gKHRvdWNoLmxhc3QgfHwgbm93KTtcclxuICAgICAgICB0b3VjaC5lbCA9ICQoJ3RhZ05hbWUnIGluIGZpcnN0VG91Y2gudGFyZ2V0ID8gZmlyc3RUb3VjaC50YXJnZXQgOiBmaXJzdFRvdWNoLnRhcmdldC5wYXJlbnROb2RlKTtcclxuXHJcbiAgICAgICAgaWYodG91Y2hUaW1lb3V0KSBjbGVhclRpbWVvdXQodG91Y2hUaW1lb3V0KTtcclxuXHJcbiAgICAgICAgdG91Y2gueDEgPSBmaXJzdFRvdWNoLnBhZ2VYO1xyXG4gICAgICAgIHRvdWNoLnkxID0gZmlyc3RUb3VjaC5wYWdlWTtcclxuXHJcbiAgICAgICAgaWYgKGRlbHRhID4gMCAmJiBkZWx0YSA8PSAyNTApIHRvdWNoLmlzRG91YmxlVGFwID0gdHJ1ZTtcclxuXHJcbiAgICAgICAgdG91Y2gubGFzdCA9IG5vdztcclxuICAgICAgICBsb25nVGFwVGltZW91dCA9IHNldFRpbWVvdXQobG9uZ1RhcCwgbG9uZ1RhcERlbGF5KTtcclxuXHJcbiAgICAgICAgLy8gYWRkcyB0aGUgY3VycmVudCB0b3VjaCBjb250YWN0IGZvciBJRSBnZXN0dXJlIHJlY29nbml0aW9uXHJcbiAgICAgICAgaWYgKGdlc3R1cmUgJiYgKCBlLnR5cGUgPT0gJ01TUG9pbnRlckRvd24nIHx8IGUudHlwZSA9PSAncG9pbnRlcmRvd24nIHx8IGUudHlwZSA9PSAndG91Y2hzdGFydCcgKSApIHtcclxuICAgICAgICAgIGdlc3R1cmUuYWRkUG9pbnRlcihlLm9yaWdpbmFsRXZlbnQucG9pbnRlcklkKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICB9KVxyXG4gICAgICAvLyBNU1BvaW50ZXJNb3ZlOiBmb3IgSUUxMFxyXG4gICAgICAvLyBwb2ludGVybW92ZTogZm9yIElFMTFcclxuICAgICAgLm9uKCd0b3VjaG1vdmUgTVNQb2ludGVyTW92ZSBwb2ludGVybW92ZScsIGZ1bmN0aW9uKGUpe1xyXG5cclxuICAgICAgICBpZiAoZS50eXBlID09ICdNU1BvaW50ZXJNb3ZlJyAmJiAhaXNQcmltYXJ5VG91Y2goZS5vcmlnaW5hbEV2ZW50KSkgcmV0dXJuO1xyXG5cclxuICAgICAgICBmaXJzdFRvdWNoID0gKGUudHlwZSA9PSAnTVNQb2ludGVyTW92ZScgfHwgZS50eXBlID09ICdwb2ludGVybW92ZScpID8gZSA6IGUub3JpZ2luYWxFdmVudC50b3VjaGVzWzBdO1xyXG5cclxuICAgICAgICBjYW5jZWxMb25nVGFwKCk7XHJcbiAgICAgICAgdG91Y2gueDIgPSBmaXJzdFRvdWNoLnBhZ2VYO1xyXG4gICAgICAgIHRvdWNoLnkyID0gZmlyc3RUb3VjaC5wYWdlWTtcclxuXHJcbiAgICAgICAgZGVsdGFYICs9IE1hdGguYWJzKHRvdWNoLngxIC0gdG91Y2gueDIpO1xyXG4gICAgICAgIGRlbHRhWSArPSBNYXRoLmFicyh0b3VjaC55MSAtIHRvdWNoLnkyKTtcclxuICAgICAgfSlcclxuICAgICAgLy8gTVNQb2ludGVyVXA6IGZvciBJRTEwXHJcbiAgICAgIC8vIHBvaW50ZXJ1cDogZm9yIElFMTFcclxuICAgICAgLm9uKCd0b3VjaGVuZCBNU1BvaW50ZXJVcCBwb2ludGVydXAnLCBmdW5jdGlvbihlKXtcclxuXHJcbiAgICAgICAgaWYgKGUudHlwZSA9PSAnTVNQb2ludGVyVXAnICYmICFpc1ByaW1hcnlUb3VjaChlLm9yaWdpbmFsRXZlbnQpKSByZXR1cm47XHJcblxyXG4gICAgICAgIGNhbmNlbExvbmdUYXAoKTtcclxuXHJcbiAgICAgICAgLy8gc3dpcGVcclxuICAgICAgICBpZiAoKHRvdWNoLngyICYmIE1hdGguYWJzKHRvdWNoLngxIC0gdG91Y2gueDIpID4gMzApIHx8ICh0b3VjaC55MiAmJiBNYXRoLmFicyh0b3VjaC55MSAtIHRvdWNoLnkyKSA+IDMwKSl7XHJcblxyXG4gICAgICAgICAgc3dpcGVUaW1lb3V0ID0gc2V0VGltZW91dChmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgdG91Y2guZWwudHJpZ2dlcignc3dpcGUnKTtcclxuICAgICAgICAgICAgdG91Y2guZWwudHJpZ2dlcignc3dpcGUnICsgKHN3aXBlRGlyZWN0aW9uKHRvdWNoLngxLCB0b3VjaC54MiwgdG91Y2gueTEsIHRvdWNoLnkyKSkpO1xyXG4gICAgICAgICAgICB0b3VjaCA9IHt9O1xyXG4gICAgICAgICAgfSwgMCk7XHJcblxyXG4gICAgICAgIC8vIG5vcm1hbCB0YXBcclxuICAgICAgICB9IGVsc2UgaWYgKCdsYXN0JyBpbiB0b3VjaCkge1xyXG5cclxuICAgICAgICAgIC8vIGRvbid0IGZpcmUgdGFwIHdoZW4gZGVsdGEgcG9zaXRpb24gY2hhbmdlZCBieSBtb3JlIHRoYW4gMzAgcGl4ZWxzLFxyXG4gICAgICAgICAgLy8gZm9yIGluc3RhbmNlIHdoZW4gbW92aW5nIHRvIGEgcG9pbnQgYW5kIGJhY2sgdG8gb3JpZ2luXHJcbiAgICAgICAgICBpZiAoaXNOYU4oZGVsdGFYKSB8fCAoZGVsdGFYIDwgMzAgJiYgZGVsdGFZIDwgMzApKSB7XHJcbiAgICAgICAgICAgIC8vIGRlbGF5IGJ5IG9uZSB0aWNrIHNvIHdlIGNhbiBjYW5jZWwgdGhlICd0YXAnIGV2ZW50IGlmICdzY3JvbGwnIGZpcmVzXHJcbiAgICAgICAgICAgIC8vICgndGFwJyBmaXJlcyBiZWZvcmUgJ3Njcm9sbCcpXHJcbiAgICAgICAgICAgIHRhcFRpbWVvdXQgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xyXG5cclxuICAgICAgICAgICAgICAvLyB0cmlnZ2VyIHVuaXZlcnNhbCAndGFwJyB3aXRoIHRoZSBvcHRpb24gdG8gY2FuY2VsVG91Y2goKVxyXG4gICAgICAgICAgICAgIC8vIChjYW5jZWxUb3VjaCBjYW5jZWxzIHByb2Nlc3Npbmcgb2Ygc2luZ2xlIHZzIGRvdWJsZSB0YXBzIGZvciBmYXN0ZXIgJ3RhcCcgcmVzcG9uc2UpXHJcbiAgICAgICAgICAgICAgdmFyIGV2ZW50ID0gJC5FdmVudCgndGFwJyk7XHJcbiAgICAgICAgICAgICAgZXZlbnQuY2FuY2VsVG91Y2ggPSBjYW5jZWxBbGw7XHJcbiAgICAgICAgICAgICAgdG91Y2guZWwudHJpZ2dlcihldmVudCk7XHJcblxyXG4gICAgICAgICAgICAgIC8vIHRyaWdnZXIgZG91YmxlIHRhcCBpbW1lZGlhdGVseVxyXG4gICAgICAgICAgICAgIGlmICh0b3VjaC5pc0RvdWJsZVRhcCkge1xyXG4gICAgICAgICAgICAgICAgdG91Y2guZWwudHJpZ2dlcignZG91YmxlVGFwJyk7XHJcbiAgICAgICAgICAgICAgICB0b3VjaCA9IHt9O1xyXG4gICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgLy8gdHJpZ2dlciBzaW5nbGUgdGFwIGFmdGVyIDI1MG1zIG9mIGluYWN0aXZpdHlcclxuICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRvdWNoVGltZW91dCA9IHNldFRpbWVvdXQoZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgICAgICAgdG91Y2hUaW1lb3V0ID0gbnVsbDtcclxuICAgICAgICAgICAgICAgICAgdG91Y2guZWwudHJpZ2dlcignc2luZ2xlVGFwJyk7XHJcbiAgICAgICAgICAgICAgICAgIHRvdWNoID0ge307XHJcbiAgICAgICAgICAgICAgICB9LCAyNTApO1xyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSwgMCk7XHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0b3VjaCA9IHt9O1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgZGVsdGFYID0gZGVsdGFZID0gMDtcclxuICAgICAgICB9XHJcbiAgICAgIH0pXHJcbiAgICAgIC8vIHdoZW4gdGhlIGJyb3dzZXIgd2luZG93IGxvc2VzIGZvY3VzLFxyXG4gICAgICAvLyBmb3IgZXhhbXBsZSB3aGVuIGEgbW9kYWwgZGlhbG9nIGlzIHNob3duLFxyXG4gICAgICAvLyBjYW5jZWwgYWxsIG9uZ29pbmcgZXZlbnRzXHJcbiAgICAgIC5vbigndG91Y2hjYW5jZWwgTVNQb2ludGVyQ2FuY2VsJywgY2FuY2VsQWxsKTtcclxuXHJcbiAgICAvLyBzY3JvbGxpbmcgdGhlIHdpbmRvdyBpbmRpY2F0ZXMgaW50ZW50aW9uIG9mIHRoZSB1c2VyXHJcbiAgICAvLyB0byBzY3JvbGwsIG5vdCB0YXAgb3Igc3dpcGUsIHNvIGNhbmNlbCBhbGwgb25nb2luZyBldmVudHNcclxuICAgICQod2luZG93KS5vbignc2Nyb2xsJywgY2FuY2VsQWxsKTtcclxuICB9KTtcclxuXHJcbiAgWydzd2lwZScsICdzd2lwZUxlZnQnLCAnc3dpcGVSaWdodCcsICdzd2lwZVVwJywgJ3N3aXBlRG93bicsICdkb3VibGVUYXAnLCAndGFwJywgJ3NpbmdsZVRhcCcsICdsb25nVGFwJ10uZm9yRWFjaChmdW5jdGlvbihldmVudE5hbWUpe1xyXG4gICAgJC5mbltldmVudE5hbWVdID0gZnVuY3Rpb24oY2FsbGJhY2speyByZXR1cm4gJCh0aGlzKS5vbihldmVudE5hbWUsIGNhbGxiYWNrKTsgfTtcclxuICB9KTtcclxufSkoalF1ZXJ5KTtcclxuLyohIFVJa2l0IDIuMjIuMCB8IGh0dHA6Ly93d3cuZ2V0dWlraXQuY29tIHwgKGMpIDIwMTQgWU9PdGhlbWUgfCBNSVQgTGljZW5zZSAqL1xyXG4oZnVuY3Rpb24oVUkpIHtcclxuXHJcbiAgICBcInVzZSBzdHJpY3RcIjtcclxuXHJcbiAgICB2YXIgc3RhY2tzID0gW107XHJcblxyXG4gICAgVUkuY29tcG9uZW50KCdzdGFja01hcmdpbicsIHtcclxuXHJcbiAgICAgICAgZGVmYXVsdHM6IHtcclxuICAgICAgICAgICAgJ2Nscyc6ICd1ay1tYXJnaW4tc21hbGwtdG9wJ1xyXG4gICAgICAgIH0sXHJcblxyXG4gICAgICAgIGJvb3Q6IGZ1bmN0aW9uKCkge1xyXG5cclxuICAgICAgICAgICAgLy8gaW5pdCBjb2RlXHJcbiAgICAgICAgICAgIFVJLnJlYWR5KGZ1bmN0aW9uKGNvbnRleHQpIHtcclxuXHJcbiAgICAgICAgICAgICAgICBVSS4kKFwiW2RhdGEtdWstbWFyZ2luXVwiLCBjb250ZXh0KS5lYWNoKGZ1bmN0aW9uKCkge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB2YXIgZWxlID0gVUkuJCh0aGlzKSwgb2JqO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoIWVsZS5kYXRhKFwic3RhY2tNYXJnaW5cIikpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgb2JqID0gVUkuc3RhY2tNYXJnaW4oZWxlLCBVSS5VdGlscy5vcHRpb25zKGVsZS5hdHRyKFwiZGF0YS11ay1tYXJnaW5cIikpKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSxcclxuXHJcbiAgICAgICAgaW5pdDogZnVuY3Rpb24oKSB7XHJcblxyXG4gICAgICAgICAgICB2YXIgJHRoaXMgPSB0aGlzO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5jb2x1bW5zID0gW107XHJcblxyXG4gICAgICAgICAgICBVSS4kd2luLm9uKCdyZXNpemUgb3JpZW50YXRpb25jaGFuZ2UnLCAoZnVuY3Rpb24oKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIGZuID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJHRoaXMucHJvY2VzcygpO1xyXG4gICAgICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgICAgICBVSS4kKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGZuKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgVUkuJHdpbi5vbihcImxvYWRcIiwgZm4pO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFVJLlV0aWxzLmRlYm91bmNlKGZuLCAyMCk7XHJcbiAgICAgICAgICAgIH0pKCkpO1xyXG5cclxuICAgICAgICAgICAgVUkuJGh0bWwub24oXCJjaGFuZ2VkLnVrLmRvbVwiLCBmdW5jdGlvbihlKSB7XHJcbiAgICAgICAgICAgICAgICAkdGhpcy5wcm9jZXNzKCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5vbihcImRpc3BsYXkudWsuY2hlY2tcIiwgZnVuY3Rpb24oZSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuZWxlbWVudC5pcyhcIjp2aXNpYmxlXCIpKSB0aGlzLnByb2Nlc3MoKTtcclxuICAgICAgICAgICAgfS5iaW5kKHRoaXMpKTtcclxuXHJcbiAgICAgICAgICAgIHN0YWNrcy5wdXNoKHRoaXMpO1xyXG4gICAgICAgIH0sXHJcblxyXG4gICAgICAgIHByb2Nlc3M6IGZ1bmN0aW9uKCkge1xyXG5cclxuICAgICAgICAgICAgdGhpcy5jb2x1bW5zID0gdGhpcy5lbGVtZW50LmNoaWxkcmVuKCk7XHJcblxyXG4gICAgICAgICAgICBVSS5VdGlscy5zdGFja01hcmdpbih0aGlzLmNvbHVtbnMsIHRoaXMub3B0aW9ucyk7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gdGhpcztcclxuICAgICAgICB9LFxyXG5cclxuICAgICAgICByZXZlcnQ6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICB0aGlzLmNvbHVtbnMucmVtb3ZlQ2xhc3ModGhpcy5vcHRpb25zLmNscyk7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG5cclxuXHJcbiAgICAvLyByZXNwb25zaXZlIGVsZW1lbnQgZS5nLiBpZnJhbWVzXHJcblxyXG4gICAgKGZ1bmN0aW9uKCl7XHJcblxyXG4gICAgICAgIHZhciBlbGVtZW50cyA9IFtdLCBjaGVjayA9IGZ1bmN0aW9uKGVsZSkge1xyXG5cclxuICAgICAgICAgICAgaWYgKCFlbGUuaXMoJzp2aXNpYmxlJykpIHJldHVybjtcclxuXHJcbiAgICAgICAgICAgIHZhciB3aWR0aCAgPSBlbGUucGFyZW50KCkud2lkdGgoKSxcclxuICAgICAgICAgICAgICAgIGl3aWR0aCA9IGVsZS5kYXRhKCd3aWR0aCcpLFxyXG4gICAgICAgICAgICAgICAgcmF0aW8gID0gKHdpZHRoIC8gaXdpZHRoKSxcclxuICAgICAgICAgICAgICAgIGhlaWdodCA9IE1hdGguZmxvb3IocmF0aW8gKiBlbGUuZGF0YSgnaGVpZ2h0JykpO1xyXG5cclxuICAgICAgICAgICAgZWxlLmNzcyh7J2hlaWdodCc6ICh3aWR0aCA8IGl3aWR0aCkgPyBoZWlnaHQgOiBlbGUuZGF0YSgnaGVpZ2h0Jyl9KTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBVSS5jb21wb25lbnQoJ3Jlc3BvbnNpdmVFbGVtZW50Jywge1xyXG5cclxuICAgICAgICAgICAgZGVmYXVsdHM6IHt9LFxyXG5cclxuICAgICAgICAgICAgYm9vdDogZnVuY3Rpb24oKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gaW5pdCBjb2RlXHJcbiAgICAgICAgICAgICAgICBVSS5yZWFkeShmdW5jdGlvbihjb250ZXh0KSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIFVJLiQoXCJpZnJhbWUudWstcmVzcG9uc2l2ZS13aWR0aCwgW2RhdGEtdWstcmVzcG9uc2l2ZV1cIiwgY29udGV4dCkuZWFjaChmdW5jdGlvbigpIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBlbGUgPSBVSS4kKHRoaXMpLCBvYmo7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWVsZS5kYXRhKFwicmVzcG9uc2l2ZUlmcmFtZVwiKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb2JqID0gVUkucmVzcG9uc2l2ZUVsZW1lbnQoZWxlLCB7fSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9LFxyXG5cclxuICAgICAgICAgICAgaW5pdDogZnVuY3Rpb24oKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIGVsZSA9IHRoaXMuZWxlbWVudDtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoZWxlLmF0dHIoJ3dpZHRoJykgJiYgZWxlLmF0dHIoJ2hlaWdodCcpKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGVsZS5kYXRhKHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICd3aWR0aCcgOiBlbGUuYXR0cignd2lkdGgnKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgJ2hlaWdodCc6IGVsZS5hdHRyKCdoZWlnaHQnKVxyXG5cclxuICAgICAgICAgICAgICAgICAgICB9KS5vbignZGlzcGxheS51ay5jaGVjaycsIGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNoZWNrKGVsZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGNoZWNrKGVsZSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGVsZW1lbnRzLnB1c2goZWxlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBVSS4kd2luLm9uKCdyZXNpemUgbG9hZCcsIFVJLlV0aWxzLmRlYm91bmNlKGZ1bmN0aW9uKCl7XHJcblxyXG4gICAgICAgICAgICBlbGVtZW50cy5mb3JFYWNoKGZ1bmN0aW9uKGVsZSl7XHJcbiAgICAgICAgICAgICAgICBjaGVjayhlbGUpO1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgfSwgMTUpKTtcclxuXHJcbiAgICB9KSgpO1xyXG5cclxuXHJcblxyXG4gICAgLy8gaGVscGVyXHJcblxyXG4gICAgVUkuVXRpbHMuc3RhY2tNYXJnaW4gPSBmdW5jdGlvbihlbGVtZW50cywgb3B0aW9ucykge1xyXG5cclxuICAgICAgICBvcHRpb25zID0gVUkuJC5leHRlbmQoe1xyXG4gICAgICAgICAgICAnY2xzJzogJ3VrLW1hcmdpbi1zbWFsbC10b3AnXHJcbiAgICAgICAgfSwgb3B0aW9ucyk7XHJcblxyXG4gICAgICAgIG9wdGlvbnMuY2xzID0gb3B0aW9ucy5jbHM7XHJcblxyXG4gICAgICAgIGVsZW1lbnRzID0gVUkuJChlbGVtZW50cykucmVtb3ZlQ2xhc3Mob3B0aW9ucy5jbHMpO1xyXG5cclxuICAgICAgICB2YXIgc2tpcCAgICAgICAgID0gZmFsc2UsXHJcbiAgICAgICAgICAgIGZpcnN0dmlzaWJsZSA9IGVsZW1lbnRzLmZpbHRlcihcIjp2aXNpYmxlOmZpcnN0XCIpLFxyXG4gICAgICAgICAgICBvZmZzZXQgICAgICAgPSBmaXJzdHZpc2libGUubGVuZ3RoID8gKGZpcnN0dmlzaWJsZS5wb3NpdGlvbigpLnRvcCArIGZpcnN0dmlzaWJsZS5vdXRlckhlaWdodCgpKSAtIDEgOiBmYWxzZTsgLy8gKC0xKTogd2VpcmQgZmlyZWZveCBidWcgd2hlbiBwYXJlbnQgY29udGFpbmVyIGlzIGRpc3BsYXk6ZmxleFxyXG5cclxuICAgICAgICBpZiAob2Zmc2V0ID09PSBmYWxzZSkgcmV0dXJuO1xyXG5cclxuICAgICAgICBlbGVtZW50cy5lYWNoKGZ1bmN0aW9uKCkge1xyXG5cclxuICAgICAgICAgICAgdmFyIGNvbHVtbiA9IFVJLiQodGhpcyk7XHJcblxyXG4gICAgICAgICAgICBpZiAoY29sdW1uLmlzKFwiOnZpc2libGVcIikpIHtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoc2tpcCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbHVtbi5hZGRDbGFzcyhvcHRpb25zLmNscyk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoY29sdW1uLnBvc2l0aW9uKCkudG9wID49IG9mZnNldCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBza2lwID0gY29sdW1uLmFkZENsYXNzKG9wdGlvbnMuY2xzKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH07XHJcblxyXG4gICAgVUkuVXRpbHMubWF0Y2hIZWlnaHRzID0gZnVuY3Rpb24oZWxlbWVudHMsIG9wdGlvbnMpIHtcclxuXHJcbiAgICAgICAgZWxlbWVudHMgPSBVSS4kKGVsZW1lbnRzKS5jc3MoJ21pbi1oZWlnaHQnLCAnJyk7XHJcbiAgICAgICAgb3B0aW9ucyAgPSBVSS4kLmV4dGVuZCh7IHJvdyA6IHRydWUgfSwgb3B0aW9ucyk7XHJcblxyXG4gICAgICAgIHZhciBtYXRjaEhlaWdodHMgPSBmdW5jdGlvbihncm91cCl7XHJcblxyXG4gICAgICAgICAgICBpZiAoZ3JvdXAubGVuZ3RoIDwgMikgcmV0dXJuO1xyXG5cclxuICAgICAgICAgICAgdmFyIG1heCA9IDA7XHJcblxyXG4gICAgICAgICAgICBncm91cC5lYWNoKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgbWF4ID0gTWF0aC5tYXgobWF4LCBVSS4kKHRoaXMpLm91dGVySGVpZ2h0KCkpO1xyXG4gICAgICAgICAgICB9KS5lYWNoKGZ1bmN0aW9uKCkge1xyXG5cclxuICAgICAgICAgICAgICAgIHZhciBlbGVtZW50ID0gVUkuJCh0aGlzKSxcclxuICAgICAgICAgICAgICAgICAgICBoZWlnaHQgID0gbWF4IC0gKGVsZW1lbnQuY3NzKCdib3gtc2l6aW5nJykgPT0gJ2JvcmRlci1ib3gnID8gMCA6IChlbGVtZW50Lm91dGVySGVpZ2h0KCkgLSBlbGVtZW50LmhlaWdodCgpKSk7XHJcblxyXG4gICAgICAgICAgICAgICAgZWxlbWVudC5jc3MoJ21pbi1oZWlnaHQnLCBoZWlnaHQgKyAncHgnKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgaWYgKG9wdGlvbnMucm93KSB7XHJcblxyXG4gICAgICAgICAgICBlbGVtZW50cy5maXJzdCgpLndpZHRoKCk7IC8vIGZvcmNlIHJlZHJhd1xyXG5cclxuICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpe1xyXG5cclxuICAgICAgICAgICAgICAgIHZhciBsYXN0b2Zmc2V0ID0gZmFsc2UsIGdyb3VwID0gW107XHJcblxyXG4gICAgICAgICAgICAgICAgZWxlbWVudHMuZWFjaChmdW5jdGlvbigpIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGVsZSA9IFVJLiQodGhpcyksIG9mZnNldCA9IGVsZS5vZmZzZXQoKS50b3A7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChvZmZzZXQgIT0gbGFzdG9mZnNldCAmJiBncm91cC5sZW5ndGgpIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1hdGNoSGVpZ2h0cyhVSS4kKGdyb3VwKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGdyb3VwICA9IFtdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBvZmZzZXQgPSBlbGUub2Zmc2V0KCkudG9wO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgZ3JvdXAucHVzaChlbGUpO1xyXG4gICAgICAgICAgICAgICAgICAgIGxhc3RvZmZzZXQgPSBvZmZzZXQ7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoZ3JvdXAubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbWF0Y2hIZWlnaHRzKFVJLiQoZ3JvdXApKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIH0sIDApO1xyXG5cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBtYXRjaEhlaWdodHMoZWxlbWVudHMpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcblxyXG59KShVSWtpdCk7XHJcbi8qISBVSWtpdCAyLjIyLjAgfCBodHRwOi8vd3d3LmdldHVpa2l0LmNvbSB8IChjKSAyMDE0IFlPT3RoZW1lIHwgTUlUIExpY2Vuc2UgKi9cclxuKGZ1bmN0aW9uKFVJKSB7XHJcblxyXG4gICAgXCJ1c2Ugc3RyaWN0XCI7XHJcblxyXG4gICAgVUkuY29tcG9uZW50KCdzbW9vdGhTY3JvbGwnLCB7XHJcblxyXG4gICAgICAgIGJvb3Q6IGZ1bmN0aW9uKCkge1xyXG5cclxuICAgICAgICAgICAgLy8gaW5pdCBjb2RlXHJcbiAgICAgICAgICAgIFVJLiRodG1sLm9uKFwiY2xpY2suc21vb3RoLXNjcm9sbC51aWtpdFwiLCBcIltkYXRhLXVrLXNtb290aC1zY3JvbGxdXCIsIGZ1bmN0aW9uKGUpIHtcclxuICAgICAgICAgICAgICAgIHZhciBlbGUgPSBVSS4kKHRoaXMpO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmICghZWxlLmRhdGEoXCJzbW9vdGhTY3JvbGxcIikpIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgb2JqID0gVUkuc21vb3RoU2Nyb2xsKGVsZSwgVUkuVXRpbHMub3B0aW9ucyhlbGUuYXR0cihcImRhdGEtdWstc21vb3RoLXNjcm9sbFwiKSkpO1xyXG4gICAgICAgICAgICAgICAgICAgIGVsZS50cmlnZ2VyKFwiY2xpY2tcIik7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9LFxyXG5cclxuICAgICAgICBpbml0OiBmdW5jdGlvbigpIHtcclxuXHJcbiAgICAgICAgICAgIHZhciAkdGhpcyA9IHRoaXM7XHJcblxyXG4gICAgICAgICAgICB0aGlzLm9uKFwiY2xpY2tcIiwgZnVuY3Rpb24oZSkge1xyXG4gICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICAgICAgc2Nyb2xsVG9FbGVtZW50KFVJLiQodGhpcy5oYXNoKS5sZW5ndGggPyBVSS4kKHRoaXMuaGFzaCkgOiBVSS4kKFwiYm9keVwiKSwgJHRoaXMub3B0aW9ucyk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG5cclxuICAgIGZ1bmN0aW9uIHNjcm9sbFRvRWxlbWVudChlbGUsIG9wdGlvbnMpIHtcclxuXHJcbiAgICAgICAgb3B0aW9ucyA9IFVJLiQuZXh0ZW5kKHtcclxuICAgICAgICAgICAgZHVyYXRpb246IDEwMDAsXHJcbiAgICAgICAgICAgIHRyYW5zaXRpb246ICdlYXNlT3V0RXhwbycsXHJcbiAgICAgICAgICAgIG9mZnNldDogMCxcclxuICAgICAgICAgICAgY29tcGxldGU6IGZ1bmN0aW9uKCl7fVxyXG4gICAgICAgIH0sIG9wdGlvbnMpO1xyXG5cclxuICAgICAgICAvLyBnZXQgLyBzZXQgcGFyYW1ldGVyc1xyXG4gICAgICAgIHZhciB0YXJnZXQgICAgPSBlbGUub2Zmc2V0KCkudG9wIC0gb3B0aW9ucy5vZmZzZXQsXHJcbiAgICAgICAgICAgIGRvY2hlaWdodCA9IFVJLiRkb2MuaGVpZ2h0KCksXHJcbiAgICAgICAgICAgIHdpbmhlaWdodCA9IHdpbmRvdy5pbm5lckhlaWdodDtcclxuXHJcbiAgICAgICAgaWYgKCh0YXJnZXQgKyB3aW5oZWlnaHQpID4gZG9jaGVpZ2h0KSB7XHJcbiAgICAgICAgICAgIHRhcmdldCA9IGRvY2hlaWdodCAtIHdpbmhlaWdodDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIGFuaW1hdGUgdG8gdGFyZ2V0LCBmaXJlIGNhbGxiYWNrIHdoZW4gZG9uZVxyXG4gICAgICAgIFVJLiQoXCJodG1sLGJvZHlcIikuc3RvcCgpLmFuaW1hdGUoe3Njcm9sbFRvcDogdGFyZ2V0fSwgb3B0aW9ucy5kdXJhdGlvbiwgb3B0aW9ucy50cmFuc2l0aW9uKS5wcm9taXNlKCkuZG9uZShvcHRpb25zLmNvbXBsZXRlKTtcclxuICAgIH1cclxuXHJcbiAgICBVSS5VdGlscy5zY3JvbGxUb0VsZW1lbnQgPSBzY3JvbGxUb0VsZW1lbnQ7XHJcblxyXG4gICAgaWYgKCFVSS4kLmVhc2luZy5lYXNlT3V0RXhwbykge1xyXG4gICAgICAgIFVJLiQuZWFzaW5nLmVhc2VPdXRFeHBvID0gZnVuY3Rpb24oeCwgdCwgYiwgYywgZCkgeyByZXR1cm4gKHQgPT0gZCkgPyBiICsgYyA6IGMgKiAoLU1hdGgucG93KDIsIC0xMCAqIHQgLyBkKSArIDEpICsgYjsgfTtcclxuICAgIH1cclxuXHJcbn0pKFVJa2l0KTtcclxuLyohIFVJa2l0IDIuMjIuMCB8IGh0dHA6Ly93d3cuZ2V0dWlraXQuY29tIHwgKGMpIDIwMTQgWU9PdGhlbWUgfCBNSVQgTGljZW5zZSAqL1xyXG4oZnVuY3Rpb24oVUkpIHtcclxuXHJcbiAgICBcInVzZSBzdHJpY3RcIjtcclxuXHJcbiAgICB2YXIgJHdpbiAgICAgICAgICAgPSBVSS4kd2luLFxyXG4gICAgICAgICRkb2MgICAgICAgICAgID0gVUkuJGRvYyxcclxuICAgICAgICBzY3JvbGxzcGllcyAgICA9IFtdLFxyXG4gICAgICAgIGNoZWNrU2Nyb2xsU3B5ID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIGZvcih2YXIgaT0wOyBpIDwgc2Nyb2xsc3BpZXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgIHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUuYXBwbHkod2luZG93LCBbc2Nyb2xsc3BpZXNbaV0uY2hlY2tdKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgVUkuY29tcG9uZW50KCdzY3JvbGxzcHknLCB7XHJcblxyXG4gICAgICAgIGRlZmF1bHRzOiB7XHJcbiAgICAgICAgICAgIFwidGFyZ2V0XCIgICAgIDogZmFsc2UsXHJcbiAgICAgICAgICAgIFwiY2xzXCIgICAgICAgIDogXCJ1ay1zY3JvbGxzcHktaW52aWV3XCIsXHJcbiAgICAgICAgICAgIFwiaW5pdGNsc1wiICAgIDogXCJ1ay1zY3JvbGxzcHktaW5pdC1pbnZpZXdcIixcclxuICAgICAgICAgICAgXCJ0b3BvZmZzZXRcIiAgOiAwLFxyXG4gICAgICAgICAgICBcImxlZnRvZmZzZXRcIiA6IDAsXHJcbiAgICAgICAgICAgIFwicmVwZWF0XCIgICAgIDogZmFsc2UsXHJcbiAgICAgICAgICAgIFwiZGVsYXlcIiAgICAgIDogMFxyXG4gICAgICAgIH0sXHJcblxyXG4gICAgICAgIGJvb3Q6IGZ1bmN0aW9uKCkge1xyXG5cclxuICAgICAgICAgICAgLy8gbGlzdGVuIHRvIHNjcm9sbCBhbmQgcmVzaXplXHJcbiAgICAgICAgICAgICRkb2Mub24oXCJzY3JvbGxpbmcudWsuZG9jdW1lbnRcIiwgY2hlY2tTY3JvbGxTcHkpO1xyXG4gICAgICAgICAgICAkd2luLm9uKFwibG9hZCByZXNpemUgb3JpZW50YXRpb25jaGFuZ2VcIiwgVUkuVXRpbHMuZGVib3VuY2UoY2hlY2tTY3JvbGxTcHksIDUwKSk7XHJcblxyXG4gICAgICAgICAgICAvLyBpbml0IGNvZGVcclxuICAgICAgICAgICAgVUkucmVhZHkoZnVuY3Rpb24oY29udGV4dCkge1xyXG5cclxuICAgICAgICAgICAgICAgIFVJLiQoXCJbZGF0YS11ay1zY3JvbGxzcHldXCIsIGNvbnRleHQpLmVhY2goZnVuY3Rpb24oKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHZhciBlbGVtZW50ID0gVUkuJCh0aGlzKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFlbGVtZW50LmRhdGEoXCJzY3JvbGxzcHlcIikpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG9iaiA9IFVJLnNjcm9sbHNweShlbGVtZW50LCBVSS5VdGlscy5vcHRpb25zKGVsZW1lbnQuYXR0cihcImRhdGEtdWstc2Nyb2xsc3B5XCIpKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0sXHJcblxyXG4gICAgICAgIGluaXQ6IGZ1bmN0aW9uKCkge1xyXG5cclxuICAgICAgICAgICAgdmFyICR0aGlzID0gdGhpcywgaW52aWV3c3RhdGUsIGluaXRpbnZpZXcsIHRvZ2dsZWNscyA9IHRoaXMub3B0aW9ucy5jbHMuc3BsaXQoLywvKSwgZm4gPSBmdW5jdGlvbigpe1xyXG5cclxuICAgICAgICAgICAgICAgIHZhciBlbGVtZW50cyAgICAgPSAkdGhpcy5vcHRpb25zLnRhcmdldCA/ICR0aGlzLmVsZW1lbnQuZmluZCgkdGhpcy5vcHRpb25zLnRhcmdldCkgOiAkdGhpcy5lbGVtZW50LFxyXG4gICAgICAgICAgICAgICAgICAgIGRlbGF5SWR4ICAgICA9IGVsZW1lbnRzLmxlbmd0aCA9PT0gMSA/IDEgOiAwLFxyXG4gICAgICAgICAgICAgICAgICAgIHRvZ2dsZWNsc0lkeCA9IDA7XHJcblxyXG4gICAgICAgICAgICAgICAgZWxlbWVudHMuZWFjaChmdW5jdGlvbihpZHgpe1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB2YXIgZWxlbWVudCAgICAgPSBVSS4kKHRoaXMpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpbnZpZXdzdGF0ZSA9IGVsZW1lbnQuZGF0YSgnaW52aWV3c3RhdGUnKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgaW52aWV3ICAgICAgPSBVSS5VdGlscy5pc0luVmlldyhlbGVtZW50LCAkdGhpcy5vcHRpb25zKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdG9nZ2xlICAgICAgPSBlbGVtZW50LmRhdGEoJ3VrU2Nyb2xsc3B5Q2xzJykgfHwgdG9nZ2xlY2xzW3RvZ2dsZWNsc0lkeF0udHJpbSgpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoaW52aWV3ICYmICFpbnZpZXdzdGF0ZSAmJiAhZWxlbWVudC5kYXRhKCdzY3JvbGxzcHktaWRsZScpKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWluaXRpbnZpZXcpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQuYWRkQ2xhc3MoJHRoaXMub3B0aW9ucy5pbml0Y2xzKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICR0aGlzLm9mZnNldCA9IGVsZW1lbnQub2Zmc2V0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbml0aW52aWV3ID0gdHJ1ZTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50LnRyaWdnZXIoXCJpbml0LnVrLnNjcm9sbHNweVwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5kYXRhKCdzY3JvbGxzcHktaWRsZScsIHNldFRpbWVvdXQoZnVuY3Rpb24oKXtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50LmFkZENsYXNzKFwidWstc2Nyb2xsc3B5LWludmlld1wiKS50b2dnbGVDbGFzcyh0b2dnbGUpLndpZHRoKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50LnRyaWdnZXIoXCJpbnZpZXcudWsuc2Nyb2xsc3B5XCIpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQuZGF0YSgnc2Nyb2xsc3B5LWlkbGUnLCBmYWxzZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50LmRhdGEoJ2ludmlld3N0YXRlJywgdHJ1ZSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9LCAkdGhpcy5vcHRpb25zLmRlbGF5ICogZGVsYXlJZHgpKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlbGF5SWR4Kys7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoIWludmlldyAmJiBpbnZpZXdzdGF0ZSAmJiAkdGhpcy5vcHRpb25zLnJlcGVhdCkge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGVsZW1lbnQuZGF0YSgnc2Nyb2xsc3B5LWlkbGUnKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xlYXJUaW1lb3V0KGVsZW1lbnQuZGF0YSgnc2Nyb2xsc3B5LWlkbGUnKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQucmVtb3ZlQ2xhc3MoXCJ1ay1zY3JvbGxzcHktaW52aWV3XCIpLnRvZ2dsZUNsYXNzKHRvZ2dsZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQuZGF0YSgnaW52aWV3c3RhdGUnLCBmYWxzZSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50LnRyaWdnZXIoXCJvdXR2aWV3LnVrLnNjcm9sbHNweVwiKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHRvZ2dsZWNsc0lkeCA9IHRvZ2dsZWNsc1t0b2dnbGVjbHNJZHggKyAxXSA/ICh0b2dnbGVjbHNJZHggKyAxKSA6IDA7XHJcblxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICBmbigpO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5jaGVjayA9IGZuO1xyXG5cclxuICAgICAgICAgICAgc2Nyb2xsc3BpZXMucHVzaCh0aGlzKTtcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxuXHJcblxyXG4gICAgdmFyIHNjcm9sbHNweW5hdnMgPSBbXSxcclxuICAgICAgICBjaGVja1Njcm9sbFNweU5hdnMgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgZm9yKHZhciBpPTA7IGkgPCBzY3JvbGxzcHluYXZzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lLmFwcGx5KHdpbmRvdywgW3Njcm9sbHNweW5hdnNbaV0uY2hlY2tdKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgVUkuY29tcG9uZW50KCdzY3JvbGxzcHluYXYnLCB7XHJcblxyXG4gICAgICAgIGRlZmF1bHRzOiB7XHJcbiAgICAgICAgICAgIFwiY2xzXCIgICAgICAgICAgOiAndWstYWN0aXZlJyxcclxuICAgICAgICAgICAgXCJjbG9zZXN0XCIgICAgICA6IGZhbHNlLFxyXG4gICAgICAgICAgICBcInRvcG9mZnNldFwiICAgIDogMCxcclxuICAgICAgICAgICAgXCJsZWZ0b2Zmc2V0XCIgICA6IDAsXHJcbiAgICAgICAgICAgIFwic21vb3Roc2Nyb2xsXCIgOiBmYWxzZVxyXG4gICAgICAgIH0sXHJcblxyXG4gICAgICAgIGJvb3Q6IGZ1bmN0aW9uKCkge1xyXG5cclxuICAgICAgICAgICAgLy8gbGlzdGVuIHRvIHNjcm9sbCBhbmQgcmVzaXplXHJcbiAgICAgICAgICAgICRkb2Mub24oXCJzY3JvbGxpbmcudWsuZG9jdW1lbnRcIiwgY2hlY2tTY3JvbGxTcHlOYXZzKTtcclxuICAgICAgICAgICAgJHdpbi5vbihcInJlc2l6ZSBvcmllbnRhdGlvbmNoYW5nZVwiLCBVSS5VdGlscy5kZWJvdW5jZShjaGVja1Njcm9sbFNweU5hdnMsIDUwKSk7XHJcblxyXG4gICAgICAgICAgICAvLyBpbml0IGNvZGVcclxuICAgICAgICAgICAgVUkucmVhZHkoZnVuY3Rpb24oY29udGV4dCkge1xyXG5cclxuICAgICAgICAgICAgICAgIFVJLiQoXCJbZGF0YS11ay1zY3JvbGxzcHktbmF2XVwiLCBjb250ZXh0KS5lYWNoKGZ1bmN0aW9uKCkge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB2YXIgZWxlbWVudCA9IFVJLiQodGhpcyk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmICghZWxlbWVudC5kYXRhKFwic2Nyb2xsc3B5bmF2XCIpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBvYmogPSBVSS5zY3JvbGxzcHluYXYoZWxlbWVudCwgVUkuVXRpbHMub3B0aW9ucyhlbGVtZW50LmF0dHIoXCJkYXRhLXVrLXNjcm9sbHNweS1uYXZcIikpKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSxcclxuXHJcbiAgICAgICAgaW5pdDogZnVuY3Rpb24oKSB7XHJcblxyXG4gICAgICAgICAgICB2YXIgaWRzICAgICA9IFtdLFxyXG4gICAgICAgICAgICAgICAgbGlua3MgICA9IHRoaXMuZmluZChcImFbaHJlZl49JyMnXVwiKS5lYWNoKGZ1bmN0aW9uKCl7IGlkcy5wdXNoKFVJLiQodGhpcykuYXR0cihcImhyZWZcIikpOyB9KSxcclxuICAgICAgICAgICAgICAgIHRhcmdldHMgPSBVSS4kKGlkcy5qb2luKFwiLFwiKSksXHJcblxyXG4gICAgICAgICAgICAgICAgY2xzQWN0aXZlICA9IHRoaXMub3B0aW9ucy5jbHMsXHJcbiAgICAgICAgICAgICAgICBjbHNDbG9zZXN0ID0gdGhpcy5vcHRpb25zLmNsb3Nlc3QgfHwgdGhpcy5vcHRpb25zLmNsb3Nlc3Q7XHJcblxyXG4gICAgICAgICAgICB2YXIgJHRoaXMgPSB0aGlzLCBpbnZpZXdzLCBmbiA9IGZ1bmN0aW9uKCl7XHJcblxyXG4gICAgICAgICAgICAgICAgaW52aWV3cyA9IFtdO1xyXG5cclxuICAgICAgICAgICAgICAgIGZvciAodmFyIGk9MCA7IGkgPCB0YXJnZXRzLmxlbmd0aCA7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChVSS5VdGlscy5pc0luVmlldyh0YXJnZXRzLmVxKGkpLCAkdGhpcy5vcHRpb25zKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpbnZpZXdzLnB1c2godGFyZ2V0cy5lcShpKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGlmIChpbnZpZXdzLmxlbmd0aCkge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB2YXIgbmF2aXRlbXMsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNjcm9sbFRvcCA9ICR3aW4uc2Nyb2xsVG9wKCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldCA9IChmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yKHZhciBpPTA7IGk8IGludmlld3MubGVuZ3RoO2krKyl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoaW52aWV3c1tpXS5vZmZzZXQoKS50b3AgPj0gc2Nyb2xsVG9wKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGludmlld3NbaV07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KSgpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoIXRhcmdldCkgcmV0dXJuO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoJHRoaXMub3B0aW9ucy5jbG9zZXN0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxpbmtzLmNsb3Nlc3QoY2xzQ2xvc2VzdCkucmVtb3ZlQ2xhc3MoY2xzQWN0aXZlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbmF2aXRlbXMgPSBsaW5rcy5maWx0ZXIoXCJhW2hyZWY9JyNcIit0YXJnZXQuYXR0cihcImlkXCIpK1wiJ11cIikuY2xvc2VzdChjbHNDbG9zZXN0KS5hZGRDbGFzcyhjbHNBY3RpdmUpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG5hdml0ZW1zID0gbGlua3MucmVtb3ZlQ2xhc3MoY2xzQWN0aXZlKS5maWx0ZXIoXCJhW2hyZWY9JyNcIit0YXJnZXQuYXR0cihcImlkXCIpK1wiJ11cIikuYWRkQ2xhc3MoY2xzQWN0aXZlKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICR0aGlzLmVsZW1lbnQudHJpZ2dlcihcImludmlldy51ay5zY3JvbGxzcHluYXZcIiwgW3RhcmdldCwgbmF2aXRlbXNdKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIGlmICh0aGlzLm9wdGlvbnMuc21vb3Roc2Nyb2xsICYmIFVJLnNtb290aFNjcm9sbCkge1xyXG4gICAgICAgICAgICAgICAgbGlua3MuZWFjaChmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICAgICAgICAgIFVJLnNtb290aFNjcm9sbCh0aGlzLCAkdGhpcy5vcHRpb25zLnNtb290aHNjcm9sbCk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgZm4oKTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuZWxlbWVudC5kYXRhKFwic2Nyb2xsc3B5bmF2XCIsIHRoaXMpO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5jaGVjayA9IGZuO1xyXG4gICAgICAgICAgICBzY3JvbGxzcHluYXZzLnB1c2godGhpcyk7XHJcblxyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG5cclxufSkoVUlraXQpO1xyXG4vKiEgVUlraXQgMi4yMi4wIHwgaHR0cDovL3d3dy5nZXR1aWtpdC5jb20gfCAoYykgMjAxNCBZT090aGVtZSB8IE1JVCBMaWNlbnNlICovXHJcbihmdW5jdGlvbihVSSl7XHJcblxyXG4gICAgXCJ1c2Ugc3RyaWN0XCI7XHJcblxyXG4gICAgdmFyIHRvZ2dsZXMgPSBbXTtcclxuXHJcbiAgICBVSS5jb21wb25lbnQoJ3RvZ2dsZScsIHtcclxuXHJcbiAgICAgICAgZGVmYXVsdHM6IHtcclxuICAgICAgICAgICAgdGFyZ2V0ICAgIDogZmFsc2UsXHJcbiAgICAgICAgICAgIGNscyAgICAgICA6ICd1ay1oaWRkZW4nLFxyXG4gICAgICAgICAgICBhbmltYXRpb24gOiBmYWxzZSxcclxuICAgICAgICAgICAgZHVyYXRpb24gIDogMjAwXHJcbiAgICAgICAgfSxcclxuXHJcbiAgICAgICAgYm9vdDogZnVuY3Rpb24oKXtcclxuXHJcbiAgICAgICAgICAgIC8vIGluaXQgY29kZVxyXG4gICAgICAgICAgICBVSS5yZWFkeShmdW5jdGlvbihjb250ZXh0KSB7XHJcblxyXG4gICAgICAgICAgICAgICAgVUkuJChcIltkYXRhLXVrLXRvZ2dsZV1cIiwgY29udGV4dCkuZWFjaChmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgZWxlID0gVUkuJCh0aGlzKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFlbGUuZGF0YShcInRvZ2dsZVwiKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgb2JqID0gVUkudG9nZ2xlKGVsZSwgVUkuVXRpbHMub3B0aW9ucyhlbGUuYXR0cihcImRhdGEtdWstdG9nZ2xlXCIpKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpe1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB0b2dnbGVzLmZvckVhY2goZnVuY3Rpb24odG9nZ2xlKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdG9nZ2xlLmdldFRvZ2dsZXMoKTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICB9LCAwKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSxcclxuXHJcbiAgICAgICAgaW5pdDogZnVuY3Rpb24oKSB7XHJcblxyXG4gICAgICAgICAgICB2YXIgJHRoaXMgPSB0aGlzO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5hcmlhID0gKHRoaXMub3B0aW9ucy5jbHMuaW5kZXhPZigndWstaGlkZGVuJykgIT09IC0xKTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuZ2V0VG9nZ2xlcygpO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5vbihcImNsaWNrXCIsIGZ1bmN0aW9uKGUpIHtcclxuICAgICAgICAgICAgICAgIGlmICgkdGhpcy5lbGVtZW50LmlzKCdhW2hyZWY9XCIjXCJdJykpIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgICAgICR0aGlzLnRvZ2dsZSgpO1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIHRvZ2dsZXMucHVzaCh0aGlzKTtcclxuICAgICAgICB9LFxyXG5cclxuICAgICAgICB0b2dnbGU6IGZ1bmN0aW9uKCkge1xyXG5cclxuICAgICAgICAgICAgaWYoIXRoaXMudG90b2dnbGUubGVuZ3RoKSByZXR1cm47XHJcblxyXG4gICAgICAgICAgICBpZiAodGhpcy5vcHRpb25zLmFuaW1hdGlvbiAmJiBVSS5zdXBwb3J0LmFuaW1hdGlvbikge1xyXG5cclxuICAgICAgICAgICAgICAgIHZhciAkdGhpcyA9IHRoaXMsIGFuaW1hdGlvbnMgPSB0aGlzLm9wdGlvbnMuYW5pbWF0aW9uLnNwbGl0KCcsJyk7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKGFuaW1hdGlvbnMubGVuZ3RoID09IDEpIHtcclxuICAgICAgICAgICAgICAgICAgICBhbmltYXRpb25zWzFdID0gYW5pbWF0aW9uc1swXTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBhbmltYXRpb25zWzBdID0gYW5pbWF0aW9uc1swXS50cmltKCk7XHJcbiAgICAgICAgICAgICAgICBhbmltYXRpb25zWzFdID0gYW5pbWF0aW9uc1sxXS50cmltKCk7XHJcblxyXG4gICAgICAgICAgICAgICAgdGhpcy50b3RvZ2dsZS5jc3MoJ2FuaW1hdGlvbi1kdXJhdGlvbicsIHRoaXMub3B0aW9ucy5kdXJhdGlvbisnbXMnKTtcclxuXHJcbiAgICAgICAgICAgICAgICB0aGlzLnRvdG9nZ2xlLmVhY2goZnVuY3Rpb24oKXtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGVsZSA9IFVJLiQodGhpcyk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChlbGUuaGFzQ2xhc3MoJHRoaXMub3B0aW9ucy5jbHMpKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbGUudG9nZ2xlQ2xhc3MoJHRoaXMub3B0aW9ucy5jbHMpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgVUkuVXRpbHMuYW5pbWF0ZShlbGUsIGFuaW1hdGlvbnNbMF0pLnRoZW4oZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZS5jc3MoJ2FuaW1hdGlvbi1kdXJhdGlvbicsICcnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFVJLlV0aWxzLmNoZWNrRGlzcGxheShlbGUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFVJLlV0aWxzLmFuaW1hdGUodGhpcywgYW5pbWF0aW9uc1sxXSsnIHVrLWFuaW1hdGlvbi1yZXZlcnNlJykudGhlbihmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlLnRvZ2dsZUNsYXNzKCR0aGlzLm9wdGlvbnMuY2xzKS5jc3MoJ2FuaW1hdGlvbi1kdXJhdGlvbicsICcnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFVJLlV0aWxzLmNoZWNrRGlzcGxheShlbGUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRoaXMudG90b2dnbGUudG9nZ2xlQ2xhc3ModGhpcy5vcHRpb25zLmNscyk7XHJcbiAgICAgICAgICAgICAgICBVSS5VdGlscy5jaGVja0Rpc3BsYXkodGhpcy50b3RvZ2dsZSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHRoaXMudXBkYXRlQXJpYSgpO1xyXG5cclxuICAgICAgICB9LFxyXG5cclxuICAgICAgICBnZXRUb2dnbGVzOiBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgdGhpcy50b3RvZ2dsZSA9IHRoaXMub3B0aW9ucy50YXJnZXQgPyBVSS4kKHRoaXMub3B0aW9ucy50YXJnZXQpOltdO1xyXG4gICAgICAgICAgICB0aGlzLnVwZGF0ZUFyaWEoKTtcclxuICAgICAgICB9LFxyXG5cclxuICAgICAgICB1cGRhdGVBcmlhOiBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuYXJpYSAmJiB0aGlzLnRvdG9nZ2xlLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy50b3RvZ2dsZS5lYWNoKGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgICAgICAgICAgVUkuJCh0aGlzKS5hdHRyKCdhcmlhLWhpZGRlbicsIFVJLiQodGhpcykuaGFzQ2xhc3MoJ3VrLWhpZGRlbicpKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcblxyXG59KShVSWtpdCk7XHJcbi8qISBVSWtpdCAyLjIyLjAgfCBodHRwOi8vd3d3LmdldHVpa2l0LmNvbSB8IChjKSAyMDE0IFlPT3RoZW1lIHwgTUlUIExpY2Vuc2UgKi9cclxuKGZ1bmN0aW9uKFVJKSB7XHJcblxyXG4gICAgXCJ1c2Ugc3RyaWN0XCI7XHJcblxyXG4gICAgVUkuY29tcG9uZW50KCdhbGVydCcsIHtcclxuXHJcbiAgICAgICAgZGVmYXVsdHM6IHtcclxuICAgICAgICAgICAgXCJmYWRlXCI6IHRydWUsXHJcbiAgICAgICAgICAgIFwiZHVyYXRpb25cIjogMjAwLFxyXG4gICAgICAgICAgICBcInRyaWdnZXJcIjogXCIudWstYWxlcnQtY2xvc2VcIlxyXG4gICAgICAgIH0sXHJcblxyXG4gICAgICAgIGJvb3Q6IGZ1bmN0aW9uKCkge1xyXG5cclxuICAgICAgICAgICAgLy8gaW5pdCBjb2RlXHJcbiAgICAgICAgICAgIFVJLiRodG1sLm9uKFwiY2xpY2suYWxlcnQudWlraXRcIiwgXCJbZGF0YS11ay1hbGVydF1cIiwgZnVuY3Rpb24oZSkge1xyXG5cclxuICAgICAgICAgICAgICAgIHZhciBlbGUgPSBVSS4kKHRoaXMpO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmICghZWxlLmRhdGEoXCJhbGVydFwiKSkge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB2YXIgYWxlcnQgPSBVSS5hbGVydChlbGUsIFVJLlV0aWxzLm9wdGlvbnMoZWxlLmF0dHIoXCJkYXRhLXVrLWFsZXJ0XCIpKSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChVSS4kKGUudGFyZ2V0KS5pcyhhbGVydC5vcHRpb25zLnRyaWdnZXIpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYWxlcnQuY2xvc2UoKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0sXHJcblxyXG4gICAgICAgIGluaXQ6IGZ1bmN0aW9uKCkge1xyXG5cclxuICAgICAgICAgICAgdmFyICR0aGlzID0gdGhpcztcclxuXHJcbiAgICAgICAgICAgIHRoaXMub24oXCJjbGlja1wiLCB0aGlzLm9wdGlvbnMudHJpZ2dlciwgZnVuY3Rpb24oZSkge1xyXG4gICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICAgICAgJHRoaXMuY2xvc2UoKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSxcclxuXHJcbiAgICAgICAgY2xvc2U6IGZ1bmN0aW9uKCkge1xyXG5cclxuICAgICAgICAgICAgdmFyIGVsZW1lbnQgICAgICAgPSB0aGlzLnRyaWdnZXIoXCJjbG9zZS51ay5hbGVydFwiKSxcclxuICAgICAgICAgICAgICAgIHJlbW92ZUVsZW1lbnQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50cmlnZ2VyKFwiY2xvc2VkLnVrLmFsZXJ0XCIpLnJlbW92ZSgpO1xyXG4gICAgICAgICAgICAgICAgfS5iaW5kKHRoaXMpO1xyXG5cclxuICAgICAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5mYWRlKSB7XHJcbiAgICAgICAgICAgICAgICBlbGVtZW50LmNzcyhcIm92ZXJmbG93XCIsIFwiaGlkZGVuXCIpLmNzcyhcIm1heC1oZWlnaHRcIiwgZWxlbWVudC5oZWlnaHQoKSkuYW5pbWF0ZSh7XHJcbiAgICAgICAgICAgICAgICAgICAgXCJoZWlnaHRcIiAgICAgICAgIDogMCxcclxuICAgICAgICAgICAgICAgICAgICBcIm9wYWNpdHlcIiAgICAgICAgOiAwLFxyXG4gICAgICAgICAgICAgICAgICAgIFwicGFkZGluZy10b3BcIiAgICA6IDAsXHJcbiAgICAgICAgICAgICAgICAgICAgXCJwYWRkaW5nLWJvdHRvbVwiIDogMCxcclxuICAgICAgICAgICAgICAgICAgICBcIm1hcmdpbi10b3BcIiAgICAgOiAwLFxyXG4gICAgICAgICAgICAgICAgICAgIFwibWFyZ2luLWJvdHRvbVwiICA6IDBcclxuICAgICAgICAgICAgICAgIH0sIHRoaXMub3B0aW9ucy5kdXJhdGlvbiwgcmVtb3ZlRWxlbWVudCk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICByZW1vdmVFbGVtZW50KCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgfSk7XHJcblxyXG59KShVSWtpdCk7XHJcbi8qISBVSWtpdCAyLjIyLjAgfCBodHRwOi8vd3d3LmdldHVpa2l0LmNvbSB8IChjKSAyMDE0IFlPT3RoZW1lIHwgTUlUIExpY2Vuc2UgKi9cclxuKGZ1bmN0aW9uKFVJKSB7XHJcblxyXG4gICAgXCJ1c2Ugc3RyaWN0XCI7XHJcblxyXG4gICAgVUkuY29tcG9uZW50KCdidXR0b25SYWRpbycsIHtcclxuXHJcbiAgICAgICAgZGVmYXVsdHM6IHtcclxuICAgICAgICAgICAgXCJhY3RpdmVDbGFzc1wiOiAndWstYWN0aXZlJyxcclxuICAgICAgICAgICAgXCJ0YXJnZXRcIjogXCIudWstYnV0dG9uXCJcclxuICAgICAgICB9LFxyXG5cclxuICAgICAgICBib290OiBmdW5jdGlvbigpIHtcclxuXHJcbiAgICAgICAgICAgIC8vIGluaXQgY29kZVxyXG4gICAgICAgICAgICBVSS4kaHRtbC5vbihcImNsaWNrLmJ1dHRvbnJhZGlvLnVpa2l0XCIsIFwiW2RhdGEtdWstYnV0dG9uLXJhZGlvXVwiLCBmdW5jdGlvbihlKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIGVsZSA9IFVJLiQodGhpcyk7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKCFlbGUuZGF0YShcImJ1dHRvblJhZGlvXCIpKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHZhciBvYmogICAgPSBVSS5idXR0b25SYWRpbyhlbGUsIFVJLlV0aWxzLm9wdGlvbnMoZWxlLmF0dHIoXCJkYXRhLXVrLWJ1dHRvbi1yYWRpb1wiKSkpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXQgPSBVSS4kKGUudGFyZ2V0KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRhcmdldC5pcyhvYmoub3B0aW9ucy50YXJnZXQpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldC50cmlnZ2VyKFwiY2xpY2tcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9LFxyXG5cclxuICAgICAgICBpbml0OiBmdW5jdGlvbigpIHtcclxuXHJcbiAgICAgICAgICAgIHZhciAkdGhpcyA9IHRoaXM7XHJcblxyXG4gICAgICAgICAgICAvLyBJbml0IEFSSUFcclxuICAgICAgICAgICAgdGhpcy5maW5kKCR0aGlzLm9wdGlvbnMudGFyZ2V0KS5hdHRyKCdhcmlhLWNoZWNrZWQnLCAnZmFsc2UnKS5maWx0ZXIoJy4nICsgJHRoaXMub3B0aW9ucy5hY3RpdmVDbGFzcykuYXR0cignYXJpYS1jaGVja2VkJywgJ3RydWUnKTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMub24oXCJjbGlja1wiLCB0aGlzLm9wdGlvbnMudGFyZ2V0LCBmdW5jdGlvbihlKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIGVsZSA9IFVJLiQodGhpcyk7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKGVsZS5pcygnYVtocmVmPVwiI1wiXScpKSBlLnByZXZlbnREZWZhdWx0KCk7XHJcblxyXG4gICAgICAgICAgICAgICAgJHRoaXMuZmluZCgkdGhpcy5vcHRpb25zLnRhcmdldCkubm90KGVsZSkucmVtb3ZlQ2xhc3MoJHRoaXMub3B0aW9ucy5hY3RpdmVDbGFzcykuYmx1cigpO1xyXG4gICAgICAgICAgICAgICAgZWxlLmFkZENsYXNzKCR0aGlzLm9wdGlvbnMuYWN0aXZlQ2xhc3MpO1xyXG5cclxuICAgICAgICAgICAgICAgIC8vIFVwZGF0ZSBBUklBXHJcbiAgICAgICAgICAgICAgICAkdGhpcy5maW5kKCR0aGlzLm9wdGlvbnMudGFyZ2V0KS5ub3QoZWxlKS5hdHRyKCdhcmlhLWNoZWNrZWQnLCAnZmFsc2UnKTtcclxuICAgICAgICAgICAgICAgIGVsZS5hdHRyKCdhcmlhLWNoZWNrZWQnLCAndHJ1ZScpO1xyXG5cclxuICAgICAgICAgICAgICAgICR0aGlzLnRyaWdnZXIoXCJjaGFuZ2UudWsuYnV0dG9uXCIsIFtlbGVdKTtcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIH0sXHJcblxyXG4gICAgICAgIGdldFNlbGVjdGVkOiBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZmluZCgnLicgKyB0aGlzLm9wdGlvbnMuYWN0aXZlQ2xhc3MpO1xyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG5cclxuICAgIFVJLmNvbXBvbmVudCgnYnV0dG9uQ2hlY2tib3gnLCB7XHJcblxyXG4gICAgICAgIGRlZmF1bHRzOiB7XHJcbiAgICAgICAgICAgIFwiYWN0aXZlQ2xhc3NcIjogJ3VrLWFjdGl2ZScsXHJcbiAgICAgICAgICAgIFwidGFyZ2V0XCI6IFwiLnVrLWJ1dHRvblwiXHJcbiAgICAgICAgfSxcclxuXHJcbiAgICAgICAgYm9vdDogZnVuY3Rpb24oKSB7XHJcblxyXG4gICAgICAgICAgICBVSS4kaHRtbC5vbihcImNsaWNrLmJ1dHRvbmNoZWNrYm94LnVpa2l0XCIsIFwiW2RhdGEtdWstYnV0dG9uLWNoZWNrYm94XVwiLCBmdW5jdGlvbihlKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgZWxlID0gVUkuJCh0aGlzKTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoIWVsZS5kYXRhKFwiYnV0dG9uQ2hlY2tib3hcIikpIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIG9iaiAgICA9IFVJLmJ1dHRvbkNoZWNrYm94KGVsZSwgVUkuVXRpbHMub3B0aW9ucyhlbGUuYXR0cihcImRhdGEtdWstYnV0dG9uLWNoZWNrYm94XCIpKSksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldCA9IFVJLiQoZS50YXJnZXQpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAodGFyZ2V0LmlzKG9iai5vcHRpb25zLnRhcmdldCkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0LnRyaWdnZXIoXCJjbGlja1wiKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0sXHJcblxyXG4gICAgICAgIGluaXQ6IGZ1bmN0aW9uKCkge1xyXG5cclxuICAgICAgICAgICAgdmFyICR0aGlzID0gdGhpcztcclxuXHJcbiAgICAgICAgICAgIC8vIEluaXQgQVJJQVxyXG4gICAgICAgICAgICB0aGlzLmZpbmQoJHRoaXMub3B0aW9ucy50YXJnZXQpLmF0dHIoJ2FyaWEtY2hlY2tlZCcsICdmYWxzZScpLmZpbHRlcignLicgKyAkdGhpcy5vcHRpb25zLmFjdGl2ZUNsYXNzKS5hdHRyKCdhcmlhLWNoZWNrZWQnLCAndHJ1ZScpO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5vbihcImNsaWNrXCIsIHRoaXMub3B0aW9ucy50YXJnZXQsIGZ1bmN0aW9uKGUpIHtcclxuICAgICAgICAgICAgICAgIHZhciBlbGUgPSBVSS4kKHRoaXMpO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChlbGUuaXMoJ2FbaHJlZj1cIiNcIl0nKSkgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cclxuICAgICAgICAgICAgICAgIGVsZS50b2dnbGVDbGFzcygkdGhpcy5vcHRpb25zLmFjdGl2ZUNsYXNzKS5ibHVyKCk7XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gVXBkYXRlIEFSSUFcclxuICAgICAgICAgICAgICAgIGVsZS5hdHRyKCdhcmlhLWNoZWNrZWQnLCBlbGUuaGFzQ2xhc3MoJHRoaXMub3B0aW9ucy5hY3RpdmVDbGFzcykpO1xyXG5cclxuICAgICAgICAgICAgICAgICR0aGlzLnRyaWdnZXIoXCJjaGFuZ2UudWsuYnV0dG9uXCIsIFtlbGVdKTtcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIH0sXHJcblxyXG4gICAgICAgIGdldFNlbGVjdGVkOiBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZmluZCgnLicgKyB0aGlzLm9wdGlvbnMuYWN0aXZlQ2xhc3MpO1xyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG5cclxuXHJcbiAgICBVSS5jb21wb25lbnQoJ2J1dHRvbicsIHtcclxuXHJcbiAgICAgICAgZGVmYXVsdHM6IHt9LFxyXG5cclxuICAgICAgICBib290OiBmdW5jdGlvbigpIHtcclxuXHJcbiAgICAgICAgICAgIFVJLiRodG1sLm9uKFwiY2xpY2suYnV0dG9uLnVpa2l0XCIsIFwiW2RhdGEtdWstYnV0dG9uXVwiLCBmdW5jdGlvbihlKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgZWxlID0gVUkuJCh0aGlzKTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoIWVsZS5kYXRhKFwiYnV0dG9uXCIpKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHZhciBvYmogPSBVSS5idXR0b24oZWxlLCBVSS5VdGlscy5vcHRpb25zKGVsZS5hdHRyKFwiZGF0YS11ay1idXR0b25cIikpKTtcclxuICAgICAgICAgICAgICAgICAgICBlbGUudHJpZ2dlcihcImNsaWNrXCIpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9LFxyXG5cclxuICAgICAgICBpbml0OiBmdW5jdGlvbigpIHtcclxuXHJcbiAgICAgICAgICAgIHZhciAkdGhpcyA9IHRoaXM7XHJcblxyXG4gICAgICAgICAgICAvLyBJbml0IEFSSUFcclxuICAgICAgICAgICAgdGhpcy5lbGVtZW50LmF0dHIoJ2FyaWEtcHJlc3NlZCcsIHRoaXMuZWxlbWVudC5oYXNDbGFzcyhcInVrLWFjdGl2ZVwiKSk7XHJcblxyXG4gICAgICAgICAgICB0aGlzLm9uKFwiY2xpY2tcIiwgZnVuY3Rpb24oZSkge1xyXG5cclxuICAgICAgICAgICAgICAgIGlmICgkdGhpcy5lbGVtZW50LmlzKCdhW2hyZWY9XCIjXCJdJykpIGUucHJldmVudERlZmF1bHQoKTtcclxuXHJcbiAgICAgICAgICAgICAgICAkdGhpcy50b2dnbGUoKTtcclxuICAgICAgICAgICAgICAgICR0aGlzLnRyaWdnZXIoXCJjaGFuZ2UudWsuYnV0dG9uXCIsIFskdGhpcy5lbGVtZW50LmJsdXIoKS5oYXNDbGFzcyhcInVrLWFjdGl2ZVwiKV0pO1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgfSxcclxuXHJcbiAgICAgICAgdG9nZ2xlOiBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgdGhpcy5lbGVtZW50LnRvZ2dsZUNsYXNzKFwidWstYWN0aXZlXCIpO1xyXG5cclxuICAgICAgICAgICAgLy8gVXBkYXRlIEFSSUFcclxuICAgICAgICAgICAgdGhpcy5lbGVtZW50LmF0dHIoJ2FyaWEtcHJlc3NlZCcsIHRoaXMuZWxlbWVudC5oYXNDbGFzcyhcInVrLWFjdGl2ZVwiKSk7XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcblxyXG59KShVSWtpdCk7XHJcbi8qISBVSWtpdCAyLjIyLjAgfCBodHRwOi8vd3d3LmdldHVpa2l0LmNvbSB8IChjKSAyMDE0IFlPT3RoZW1lIHwgTUlUIExpY2Vuc2UgKi9cclxuKGZ1bmN0aW9uKFVJKSB7XHJcblxyXG4gICAgXCJ1c2Ugc3RyaWN0XCI7XHJcblxyXG4gICAgdmFyIGFjdGl2ZSA9IGZhbHNlLCBob3ZlcklkbGU7XHJcblxyXG4gICAgVUkuY29tcG9uZW50KCdkcm9wZG93bicsIHtcclxuXHJcbiAgICAgICAgZGVmYXVsdHM6IHtcclxuICAgICAgICAgICAnbW9kZScgICAgICAgOiAnaG92ZXInLFxyXG4gICAgICAgICAgICdyZW1haW50aW1lJyA6IDgwMCxcclxuICAgICAgICAgICAnanVzdGlmeScgICAgOiBmYWxzZSxcclxuICAgICAgICAgICAnYm91bmRhcnknICAgOiBVSS4kd2luLFxyXG4gICAgICAgICAgICdkZWxheScgICAgICA6IDAsXHJcbiAgICAgICAgICAgJ2hvdmVyRGVsYXlJZGxlJyAgOiAyNTBcclxuICAgICAgICB9LFxyXG5cclxuICAgICAgICByZW1haW5JZGxlOiBmYWxzZSxcclxuXHJcbiAgICAgICAgYm9vdDogZnVuY3Rpb24oKSB7XHJcblxyXG4gICAgICAgICAgICB2YXIgdHJpZ2dlcmV2ZW50ID0gVUkuc3VwcG9ydC50b3VjaCA/IFwiY2xpY2tcIiA6IFwibW91c2VlbnRlclwiO1xyXG5cclxuICAgICAgICAgICAgLy8gaW5pdCBjb2RlXHJcbiAgICAgICAgICAgIFVJLiRodG1sLm9uKHRyaWdnZXJldmVudCtcIi5kcm9wZG93bi51aWtpdFwiLCBcIltkYXRhLXVrLWRyb3Bkb3duXVwiLCBmdW5jdGlvbihlKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIGVsZSA9IFVJLiQodGhpcyk7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKCFlbGUuZGF0YShcImRyb3Bkb3duXCIpKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHZhciBkcm9wZG93biA9IFVJLmRyb3Bkb3duKGVsZSwgVUkuVXRpbHMub3B0aW9ucyhlbGUuYXR0cihcImRhdGEtdWstZHJvcGRvd25cIikpKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRyaWdnZXJldmVudD09XCJjbGlja1wiIHx8ICh0cmlnZ2VyZXZlbnQ9PVwibW91c2VlbnRlclwiICYmIGRyb3Bkb3duLm9wdGlvbnMubW9kZT09XCJob3ZlclwiKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkcm9wZG93bi5lbGVtZW50LnRyaWdnZXIodHJpZ2dlcmV2ZW50KTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChkcm9wZG93bi5lbGVtZW50LmZpbmQoJy51ay1kcm9wZG93bicpLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9LFxyXG5cclxuICAgICAgICBpbml0OiBmdW5jdGlvbigpIHtcclxuXHJcbiAgICAgICAgICAgIHZhciAkdGhpcyA9IHRoaXM7XHJcblxyXG4gICAgICAgICAgICB0aGlzLmRyb3Bkb3duICA9IHRoaXMuZmluZCgnLnVrLWRyb3Bkb3duJyk7XHJcblxyXG4gICAgICAgICAgICB0aGlzLmNlbnRlcmVkICA9IHRoaXMuZHJvcGRvd24uaGFzQ2xhc3MoJ3VrLWRyb3Bkb3duLWNlbnRlcicpO1xyXG4gICAgICAgICAgICB0aGlzLmp1c3RpZmllZCA9IHRoaXMub3B0aW9ucy5qdXN0aWZ5ID8gVUkuJCh0aGlzLm9wdGlvbnMuanVzdGlmeSkgOiBmYWxzZTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuYm91bmRhcnkgID0gVUkuJCh0aGlzLm9wdGlvbnMuYm91bmRhcnkpO1xyXG4gICAgICAgICAgICB0aGlzLmZsaXBwZWQgICA9IHRoaXMuZHJvcGRvd24uaGFzQ2xhc3MoJ3VrLWRyb3Bkb3duLWZsaXAnKTtcclxuXHJcbiAgICAgICAgICAgIGlmICghdGhpcy5ib3VuZGFyeS5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuYm91bmRhcnkgPSBVSS4kd2luO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyBJbml0IEFSSUFcclxuICAgICAgICAgICAgdGhpcy5lbGVtZW50LmF0dHIoJ2FyaWEtaGFzcG9wdXAnLCAndHJ1ZScpO1xyXG4gICAgICAgICAgICB0aGlzLmVsZW1lbnQuYXR0cignYXJpYS1leHBhbmRlZCcsIHRoaXMuZWxlbWVudC5oYXNDbGFzcyhcInVrLW9wZW5cIikpO1xyXG5cclxuICAgICAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5tb2RlID09IFwiY2xpY2tcIiB8fCBVSS5zdXBwb3J0LnRvdWNoKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgdGhpcy5vbihcImNsaWNrLnVpa2l0LmRyb3Bkb3duXCIsIGZ1bmN0aW9uKGUpIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgdmFyICR0YXJnZXQgPSBVSS4kKGUudGFyZ2V0KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEkdGFyZ2V0LnBhcmVudHMoXCIudWstZHJvcGRvd25cIikubGVuZ3RoKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoJHRhcmdldC5pcyhcImFbaHJlZj0nIyddXCIpIHx8ICR0YXJnZXQucGFyZW50KCkuaXMoXCJhW2hyZWY9JyMnXVwiKSB8fCAoJHRoaXMuZHJvcGRvd24ubGVuZ3RoICYmICEkdGhpcy5kcm9wZG93bi5pcyhcIjp2aXNpYmxlXCIpKSApe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAkdGFyZ2V0LmJsdXIoKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmICghJHRoaXMuZWxlbWVudC5oYXNDbGFzcygndWstb3BlbicpKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAkdGhpcy5zaG93KCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoISR0aGlzLmRyb3Bkb3duLmZpbmQoZS50YXJnZXQpLmxlbmd0aCB8fCAkdGFyZ2V0LmlzKFwiLnVrLWRyb3Bkb3duLWNsb3NlXCIpIHx8ICR0YXJnZXQucGFyZW50cyhcIi51ay1kcm9wZG93bi1jbG9zZVwiKS5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICR0aGlzLmhpZGUoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuXHJcbiAgICAgICAgICAgICAgICB0aGlzLm9uKFwibW91c2VlbnRlclwiLCBmdW5jdGlvbihlKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICR0aGlzLnRyaWdnZXIoJ3BvaW50ZXJlbnRlci51ay5kcm9wZG93bicsIFskdGhpc10pO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoJHRoaXMucmVtYWluSWRsZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjbGVhclRpbWVvdXQoJHRoaXMucmVtYWluSWRsZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoaG92ZXJJZGxlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsZWFyVGltZW91dChob3ZlcklkbGUpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGFjdGl2ZSAmJiBhY3RpdmUgPT0gJHRoaXMpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gcHNldWRvIG1hbnVBaW1cclxuICAgICAgICAgICAgICAgICAgICBpZiAoYWN0aXZlICYmIGFjdGl2ZSAhPSAkdGhpcykge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgaG92ZXJJZGxlID0gc2V0VGltZW91dChmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhvdmVySWRsZSA9IHNldFRpbWVvdXQoJHRoaXMuc2hvdy5iaW5kKCR0aGlzKSwgJHRoaXMub3B0aW9ucy5kZWxheSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sICR0aGlzLm9wdGlvbnMuaG92ZXJEZWxheUlkbGUpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgaG92ZXJJZGxlID0gc2V0VGltZW91dCgkdGhpcy5zaG93LmJpbmQoJHRoaXMpLCAkdGhpcy5vcHRpb25zLmRlbGF5KTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgfSkub24oXCJtb3VzZWxlYXZlXCIsIGZ1bmN0aW9uKCkge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoaG92ZXJJZGxlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsZWFyVGltZW91dChob3ZlcklkbGUpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgJHRoaXMucmVtYWluSWRsZSA9IHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChhY3RpdmUgJiYgYWN0aXZlID09ICR0aGlzKSAkdGhpcy5oaWRlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSwgJHRoaXMub3B0aW9ucy5yZW1haW50aW1lKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgJHRoaXMudHJpZ2dlcigncG9pbnRlcmxlYXZlLnVrLmRyb3Bkb3duJywgWyR0aGlzXSk7XHJcblxyXG4gICAgICAgICAgICAgICAgfSkub24oXCJjbGlja1wiLCBmdW5jdGlvbihlKXtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgdmFyICR0YXJnZXQgPSBVSS4kKGUudGFyZ2V0KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCR0aGlzLnJlbWFpbklkbGUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2xlYXJUaW1lb3V0KCR0aGlzLnJlbWFpbklkbGUpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGFjdGl2ZSAmJiBhY3RpdmUgPT0gJHRoaXMpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCR0YXJnZXQuaXMoXCJhW2hyZWY9JyMnXVwiKSB8fCAkdGFyZ2V0LnBhcmVudCgpLmlzKFwiYVtocmVmPScjJ11cIikpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAkdGhpcy5zaG93KCk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0sXHJcblxyXG4gICAgICAgIHNob3c6IGZ1bmN0aW9uKCl7XHJcblxyXG4gICAgICAgICAgICBVSS4kaHRtbC5vZmYoXCJjbGljay5vdXRlci5kcm9wZG93blwiKTtcclxuXHJcbiAgICAgICAgICAgIGlmIChhY3RpdmUgJiYgYWN0aXZlICE9IHRoaXMpIHtcclxuICAgICAgICAgICAgICAgIGFjdGl2ZS5oaWRlKHRydWUpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAoaG92ZXJJZGxlKSB7XHJcbiAgICAgICAgICAgICAgICBjbGVhclRpbWVvdXQoaG92ZXJJZGxlKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdGhpcy50cmlnZ2VyKCdiZWZvcmVzaG93LnVrLmRyb3Bkb3duJywgW3RoaXNdKTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuY2hlY2tEaW1lbnNpb25zKCk7XHJcbiAgICAgICAgICAgIHRoaXMuZWxlbWVudC5hZGRDbGFzcygndWstb3BlbicpO1xyXG5cclxuICAgICAgICAgICAgLy8gVXBkYXRlIEFSSUFcclxuICAgICAgICAgICAgdGhpcy5lbGVtZW50LmF0dHIoJ2FyaWEtZXhwYW5kZWQnLCAndHJ1ZScpO1xyXG5cclxuICAgICAgICAgICAgdGhpcy50cmlnZ2VyKCdzaG93LnVrLmRyb3Bkb3duJywgW3RoaXNdKTtcclxuXHJcbiAgICAgICAgICAgIFVJLlV0aWxzLmNoZWNrRGlzcGxheSh0aGlzLmRyb3Bkb3duLCB0cnVlKTtcclxuICAgICAgICAgICAgYWN0aXZlID0gdGhpcztcclxuXHJcbiAgICAgICAgICAgIHRoaXMucmVnaXN0ZXJPdXRlckNsaWNrKCk7XHJcbiAgICAgICAgfSxcclxuXHJcbiAgICAgICAgaGlkZTogZnVuY3Rpb24oZm9yY2UpIHtcclxuXHJcbiAgICAgICAgICAgIHRoaXMudHJpZ2dlcignYmVmb3JlaGlkZS51ay5kcm9wZG93bicsIFt0aGlzLCBmb3JjZV0pO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5lbGVtZW50LnJlbW92ZUNsYXNzKCd1ay1vcGVuJyk7XHJcblxyXG4gICAgICAgICAgICBpZiAodGhpcy5yZW1haW5JZGxlKSB7XHJcbiAgICAgICAgICAgICAgICBjbGVhclRpbWVvdXQodGhpcy5yZW1haW5JZGxlKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdGhpcy5yZW1haW5JZGxlID0gZmFsc2U7XHJcblxyXG4gICAgICAgICAgICAvLyBVcGRhdGUgQVJJQVxyXG4gICAgICAgICAgICB0aGlzLmVsZW1lbnQuYXR0cignYXJpYS1leHBhbmRlZCcsICdmYWxzZScpO1xyXG5cclxuICAgICAgICAgICAgdGhpcy50cmlnZ2VyKCdoaWRlLnVrLmRyb3Bkb3duJywgW3RoaXMsIGZvcmNlXSk7XHJcblxyXG4gICAgICAgICAgICBpZiAoYWN0aXZlID09IHRoaXMpIGFjdGl2ZSA9IGZhbHNlO1xyXG4gICAgICAgIH0sXHJcblxyXG4gICAgICAgIHJlZ2lzdGVyT3V0ZXJDbGljazogZnVuY3Rpb24oKXtcclxuXHJcbiAgICAgICAgICAgIHZhciAkdGhpcyA9IHRoaXM7XHJcblxyXG4gICAgICAgICAgICBVSS4kaHRtbC5vZmYoXCJjbGljay5vdXRlci5kcm9wZG93blwiKTtcclxuXHJcbiAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgVUkuJGh0bWwub24oXCJjbGljay5vdXRlci5kcm9wZG93blwiLCBmdW5jdGlvbihlKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChob3ZlcklkbGUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2xlYXJUaW1lb3V0KGhvdmVySWRsZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICB2YXIgJHRhcmdldCA9IFVJLiQoZS50YXJnZXQpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoYWN0aXZlID09ICR0aGlzICYmICEkdGhpcy5lbGVtZW50LmZpbmQoZS50YXJnZXQpLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkdGhpcy5oaWRlKHRydWUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBVSS4kaHRtbC5vZmYoXCJjbGljay5vdXRlci5kcm9wZG93blwiKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSwgMTApO1xyXG4gICAgICAgIH0sXHJcblxyXG4gICAgICAgIGNoZWNrRGltZW5zaW9uczogZnVuY3Rpb24oKSB7XHJcblxyXG4gICAgICAgICAgICBpZiAoIXRoaXMuZHJvcGRvd24ubGVuZ3RoKSByZXR1cm47XHJcblxyXG4gICAgICAgICAgICBpZiAodGhpcy5qdXN0aWZpZWQgJiYgdGhpcy5qdXN0aWZpZWQubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmRyb3Bkb3duLmNzcyhcIm1pbi13aWR0aFwiLCBcIlwiKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdmFyICR0aGlzICAgICA9IHRoaXMsXHJcbiAgICAgICAgICAgICAgICBkcm9wZG93biAgPSB0aGlzLmRyb3Bkb3duLmNzcyhcIm1hcmdpbi1cIiArIFVJLmxhbmdkaXJlY3Rpb24sIFwiXCIpLFxyXG4gICAgICAgICAgICAgICAgb2Zmc2V0ICAgID0gZHJvcGRvd24uc2hvdygpLm9mZnNldCgpLFxyXG4gICAgICAgICAgICAgICAgd2lkdGggICAgID0gZHJvcGRvd24ub3V0ZXJXaWR0aCgpLFxyXG4gICAgICAgICAgICAgICAgYm91bmRhcnl3aWR0aCAgPSB0aGlzLmJvdW5kYXJ5LndpZHRoKCksXHJcbiAgICAgICAgICAgICAgICBib3VuZGFyeW9mZnNldCA9IHRoaXMuYm91bmRhcnkub2Zmc2V0KCkgPyB0aGlzLmJvdW5kYXJ5Lm9mZnNldCgpLmxlZnQ6MDtcclxuXHJcbiAgICAgICAgICAgIC8vIGNlbnRlcmVkIGRyb3Bkb3duXHJcbiAgICAgICAgICAgIGlmICh0aGlzLmNlbnRlcmVkKSB7XHJcbiAgICAgICAgICAgICAgICBkcm9wZG93bi5jc3MoXCJtYXJnaW4tXCIgKyBVSS5sYW5nZGlyZWN0aW9uLCAocGFyc2VGbG9hdCh3aWR0aCkgLyAyIC0gZHJvcGRvd24ucGFyZW50KCkud2lkdGgoKSAvIDIpICogLTEpO1xyXG4gICAgICAgICAgICAgICAgb2Zmc2V0ID0gZHJvcGRvd24ub2Zmc2V0KCk7XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gcmVzZXQgZHJvcGRvd25cclxuICAgICAgICAgICAgICAgIGlmICgod2lkdGggKyBvZmZzZXQubGVmdCkgPiBib3VuZGFyeXdpZHRoIHx8IG9mZnNldC5sZWZ0IDwgMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGRyb3Bkb3duLmNzcyhcIm1hcmdpbi1cIiArIFVJLmxhbmdkaXJlY3Rpb24sIFwiXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIG9mZnNldCA9IGRyb3Bkb3duLm9mZnNldCgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyBqdXN0aWZ5IGRyb3Bkb3duXHJcbiAgICAgICAgICAgIGlmICh0aGlzLmp1c3RpZmllZCAmJiB0aGlzLmp1c3RpZmllZC5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgIGp1c3RpZnkoZHJvcGRvd24sIHRoaXMuanVzdGlmaWVkLCBib3VuZGFyeXdpZHRoLCBvZmZzZXQpO1xyXG4gICAgICAgICAgICAgICAgb2Zmc2V0ID0gZHJvcGRvd24ub2Zmc2V0KCk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmICgod2lkdGggKyAob2Zmc2V0LmxlZnQtYm91bmRhcnlvZmZzZXQpKSA+IGJvdW5kYXJ5d2lkdGgpIHtcclxuICAgICAgICAgICAgICAgIGRyb3Bkb3duLmFkZENsYXNzKCd1ay1kcm9wZG93bi1mbGlwJyk7XHJcbiAgICAgICAgICAgICAgICBvZmZzZXQgPSBkcm9wZG93bi5vZmZzZXQoKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKChvZmZzZXQubGVmdC1ib3VuZGFyeW9mZnNldCkgPCAwKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgZHJvcGRvd24uYWRkQ2xhc3MoXCJ1ay1kcm9wZG93bi1zdGFja1wiKTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoZHJvcGRvd24uaGFzQ2xhc3MoJ3VrLWRyb3Bkb3duLWZsaXAnKSkge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoIXRoaXMuZmxpcHBlZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkcm9wZG93bi5yZW1vdmVDbGFzcygndWstZHJvcGRvd24tZmxpcCcpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBvZmZzZXQgPSBkcm9wZG93bi5vZmZzZXQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZHJvcGRvd24uYWRkQ2xhc3MoJ3VrLWRyb3Bkb3duLWZsaXAnKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKXtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgoZHJvcGRvd24ub2Zmc2V0KCkubGVmdC1ib3VuZGFyeW9mZnNldCkgPCAwIHx8ICEkdGhpcy5mbGlwcGVkICYmIChkcm9wZG93bi5vdXRlcldpZHRoKCkgKyAob2Zmc2V0LmxlZnQtYm91bmRhcnlvZmZzZXQpKSA8IGJvdW5kYXJ5d2lkdGgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRyb3Bkb3duLnJlbW92ZUNsYXNzKCd1ay1kcm9wZG93bi1mbGlwJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9LCAwKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICB0aGlzLnRyaWdnZXIoJ3N0YWNrLnVrLmRyb3Bkb3duJywgW3RoaXNdKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgZHJvcGRvd24uY3NzKFwiZGlzcGxheVwiLCBcIlwiKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgfSk7XHJcblxyXG5cclxuICAgIFVJLmNvbXBvbmVudCgnZHJvcGRvd25PdmVybGF5Jywge1xyXG5cclxuICAgICAgICBkZWZhdWx0czoge1xyXG4gICAgICAgICAgICdqdXN0aWZ5JyA6IGZhbHNlLFxyXG4gICAgICAgICAgICdjbHMnICAgICA6ICcnLFxyXG4gICAgICAgICAgICdkdXJhdGlvbic6IDIwMFxyXG4gICAgICAgIH0sXHJcblxyXG4gICAgICAgIGJvb3Q6IGZ1bmN0aW9uKCkge1xyXG5cclxuICAgICAgICAgICAgLy8gaW5pdCBjb2RlXHJcbiAgICAgICAgICAgIFVJLnJlYWR5KGZ1bmN0aW9uKGNvbnRleHQpIHtcclxuXHJcbiAgICAgICAgICAgICAgICBVSS4kKFwiW2RhdGEtdWstZHJvcGRvd24tb3ZlcmxheV1cIiwgY29udGV4dCkuZWFjaChmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgZWxlID0gVUkuJCh0aGlzKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFlbGUuZGF0YShcImRyb3Bkb3duT3ZlcmxheVwiKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBVSS5kcm9wZG93bk92ZXJsYXkoZWxlLCBVSS5VdGlscy5vcHRpb25zKGVsZS5hdHRyKFwiZGF0YS11ay1kcm9wZG93bi1vdmVybGF5XCIpKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0sXHJcblxyXG4gICAgICAgIGluaXQ6IGZ1bmN0aW9uKCkge1xyXG5cclxuICAgICAgICAgICAgdmFyICR0aGlzID0gdGhpcztcclxuXHJcbiAgICAgICAgICAgIHRoaXMuanVzdGlmaWVkID0gdGhpcy5vcHRpb25zLmp1c3RpZnkgPyBVSS4kKHRoaXMub3B0aW9ucy5qdXN0aWZ5KSA6IGZhbHNlO1xyXG4gICAgICAgICAgICB0aGlzLm92ZXJsYXkgICA9IHRoaXMuZWxlbWVudC5maW5kKCd1ay1kcm9wZG93bi1vdmVybGF5Jyk7XHJcblxyXG4gICAgICAgICAgICBpZiAoIXRoaXMub3ZlcmxheS5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMub3ZlcmxheSA9IFVJLiQoJzxkaXYgY2xhc3M9XCJ1ay1kcm9wZG93bi1vdmVybGF5XCI+PC9kaXY+JykuYXBwZW5kVG8odGhpcy5lbGVtZW50KTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdGhpcy5vdmVybGF5LmFkZENsYXNzKHRoaXMub3B0aW9ucy5jbHMpO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5vbih7XHJcblxyXG4gICAgICAgICAgICAgICAgJ2JlZm9yZXNob3cudWsuZHJvcGRvd24nOiBmdW5jdGlvbihlLCBkcm9wZG93bikge1xyXG4gICAgICAgICAgICAgICAgICAgICR0aGlzLmRyb3Bkb3duID0gZHJvcGRvd247XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmICgkdGhpcy5qdXN0aWZpZWQgJiYgJHRoaXMuanVzdGlmaWVkLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBqdXN0aWZ5KCR0aGlzLm92ZXJsYXkuY3NzKHsnZGlzcGxheSc6J2Jsb2NrJywgJ21hcmdpbi1sZWZ0JzonJywnbWFyZ2luLXJpZ2h0JzonJ30pLCAkdGhpcy5qdXN0aWZpZWQsICR0aGlzLmp1c3RpZmllZC5vdXRlcldpZHRoKCkpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0sXHJcblxyXG4gICAgICAgICAgICAgICAgJ3Nob3cudWsuZHJvcGRvd24nOiBmdW5jdGlvbihlLCBkcm9wZG93bikge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB2YXIgaCA9ICR0aGlzLmRyb3Bkb3duLmRyb3Bkb3duLm91dGVySGVpZ2h0KHRydWUpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAkdGhpcy5kcm9wZG93bi5lbGVtZW50LnJlbW92ZUNsYXNzKCd1ay1vcGVuJyk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICR0aGlzLm92ZXJsYXkuc3RvcCgpLmNzcygnZGlzcGxheScsICdibG9jaycpLmFuaW1hdGUoe2hlaWdodDogaH0sICR0aGlzLm9wdGlvbnMuZHVyYXRpb24sIGZ1bmN0aW9uKCkge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAkdGhpcy5kcm9wZG93bi5kcm9wZG93bi5jc3MoJ3Zpc2liaWxpdHknLCAnJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgJHRoaXMuZHJvcGRvd24uZWxlbWVudC5hZGRDbGFzcygndWstb3BlbicpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICBVSS5VdGlscy5jaGVja0Rpc3BsYXkoJHRoaXMuZHJvcGRvd24uZHJvcGRvd24sIHRydWUpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAkdGhpcy5wb2ludGVybGVhdmUgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIH0sXHJcblxyXG4gICAgICAgICAgICAgICAgJ2hpZGUudWsuZHJvcGRvd24nOiBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgICAgICAkdGhpcy5vdmVybGF5LnN0b3AoKS5hbmltYXRlKHtoZWlnaHQ6IDB9LCAkdGhpcy5vcHRpb25zLmR1cmF0aW9uKTtcclxuICAgICAgICAgICAgICAgIH0sXHJcblxyXG4gICAgICAgICAgICAgICAgJ3BvaW50ZXJlbnRlci51ay5kcm9wZG93bic6IGZ1bmN0aW9uKGUsIGRyb3Bkb3duKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2xlYXJUaW1lb3V0KCR0aGlzLnJlbWFpbklkbGUpO1xyXG4gICAgICAgICAgICAgICAgfSxcclxuXHJcbiAgICAgICAgICAgICAgICAncG9pbnRlcmxlYXZlLnVrLmRyb3Bkb3duJzogZnVuY3Rpb24oZSwgZHJvcGRvd24pIHtcclxuICAgICAgICAgICAgICAgICAgICAkdGhpcy5wb2ludGVybGVhdmUgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuXHJcblxyXG4gICAgICAgICAgICB0aGlzLm92ZXJsYXkub24oe1xyXG5cclxuICAgICAgICAgICAgICAgICdtb3VzZWVudGVyJzogZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCR0aGlzLnJlbWFpbklkbGUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2xlYXJUaW1lb3V0KCR0aGlzLmRyb3Bkb3duLnJlbWFpbklkbGUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjbGVhclRpbWVvdXQoJHRoaXMucmVtYWluSWRsZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSxcclxuXHJcbiAgICAgICAgICAgICAgICAnbW91c2VsZWF2ZSc6IGZ1bmN0aW9uKCl7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmICgkdGhpcy5wb2ludGVybGVhdmUgJiYgYWN0aXZlKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAkdGhpcy5yZW1haW5JZGxlID0gc2V0VGltZW91dChmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoYWN0aXZlKSBhY3RpdmUuaGlkZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9LCBhY3RpdmUub3B0aW9ucy5yZW1haW50aW1lKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfVxyXG5cclxuICAgIH0pO1xyXG5cclxuXHJcbiAgICBmdW5jdGlvbiBqdXN0aWZ5KGVsZSwganVzdGlmeVRvLCBib3VuZGFyeXdpZHRoLCBvZmZzZXQpIHtcclxuXHJcbiAgICAgICAgZWxlICAgICAgICAgICA9IFVJLiQoZWxlKTtcclxuICAgICAgICBqdXN0aWZ5VG8gICAgID0gVUkuJChqdXN0aWZ5VG8pO1xyXG4gICAgICAgIGJvdW5kYXJ5d2lkdGggPSBib3VuZGFyeXdpZHRoIHx8IHdpbmRvdy5pbm5lcldpZHRoO1xyXG4gICAgICAgIG9mZnNldCAgICAgICAgPSBvZmZzZXQgfHwgZWxlLm9mZnNldCgpO1xyXG5cclxuICAgICAgICBpZiAoanVzdGlmeVRvLmxlbmd0aCkge1xyXG5cclxuICAgICAgICAgICAgdmFyIGp3aWR0aCA9IGp1c3RpZnlUby5vdXRlcldpZHRoKCk7XHJcblxyXG4gICAgICAgICAgICBlbGUuY3NzKFwibWluLXdpZHRoXCIsIGp3aWR0aCk7XHJcblxyXG4gICAgICAgICAgICBpZiAoVUkubGFuZ2RpcmVjdGlvbiA9PSAncmlnaHQnKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIHJpZ2h0MSAgID0gYm91bmRhcnl3aWR0aCAtIChqdXN0aWZ5VG8ub2Zmc2V0KCkubGVmdCArIGp3aWR0aCksXHJcbiAgICAgICAgICAgICAgICAgICAgcmlnaHQyICAgPSBib3VuZGFyeXdpZHRoIC0gKGVsZS5vZmZzZXQoKS5sZWZ0ICsgZWxlLm91dGVyV2lkdGgoKSk7XHJcblxyXG4gICAgICAgICAgICAgICAgZWxlLmNzcyhcIm1hcmdpbi1yaWdodFwiLCByaWdodDEgLSByaWdodDIpO1xyXG5cclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGVsZS5jc3MoXCJtYXJnaW4tbGVmdFwiLCBqdXN0aWZ5VG8ub2Zmc2V0KCkubGVmdCAtIG9mZnNldC5sZWZ0KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbn0pKFVJa2l0KTtcclxuLyohIFVJa2l0IDIuMjIuMCB8IGh0dHA6Ly93d3cuZ2V0dWlraXQuY29tIHwgKGMpIDIwMTQgWU9PdGhlbWUgfCBNSVQgTGljZW5zZSAqL1xyXG4oZnVuY3Rpb24oVUkpIHtcclxuXHJcbiAgICBcInVzZSBzdHJpY3RcIjtcclxuXHJcbiAgICB2YXIgZ3JpZHMgPSBbXTtcclxuXHJcbiAgICBVSS5jb21wb25lbnQoJ2dyaWRNYXRjaEhlaWdodCcsIHtcclxuXHJcbiAgICAgICAgZGVmYXVsdHM6IHtcclxuICAgICAgICAgICAgXCJ0YXJnZXRcIiAgICAgICAgOiBmYWxzZSxcclxuICAgICAgICAgICAgXCJyb3dcIiAgICAgICAgICAgOiB0cnVlLFxyXG4gICAgICAgICAgICBcImlnbm9yZXN0YWNrZWRcIiA6IGZhbHNlXHJcbiAgICAgICAgfSxcclxuXHJcbiAgICAgICAgYm9vdDogZnVuY3Rpb24oKSB7XHJcblxyXG4gICAgICAgICAgICAvLyBpbml0IGNvZGVcclxuICAgICAgICAgICAgVUkucmVhZHkoZnVuY3Rpb24oY29udGV4dCkge1xyXG5cclxuICAgICAgICAgICAgICAgIFVJLiQoXCJbZGF0YS11ay1ncmlkLW1hdGNoXVwiLCBjb250ZXh0KS5lYWNoKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBncmlkID0gVUkuJCh0aGlzKSwgb2JqO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoIWdyaWQuZGF0YShcImdyaWRNYXRjaEhlaWdodFwiKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBvYmogPSBVSS5ncmlkTWF0Y2hIZWlnaHQoZ3JpZCwgVUkuVXRpbHMub3B0aW9ucyhncmlkLmF0dHIoXCJkYXRhLXVrLWdyaWQtbWF0Y2hcIikpKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSxcclxuXHJcbiAgICAgICAgaW5pdDogZnVuY3Rpb24oKSB7XHJcblxyXG4gICAgICAgICAgICB2YXIgJHRoaXMgPSB0aGlzO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5jb2x1bW5zICA9IHRoaXMuZWxlbWVudC5jaGlsZHJlbigpO1xyXG4gICAgICAgICAgICB0aGlzLmVsZW1lbnRzID0gdGhpcy5vcHRpb25zLnRhcmdldCA/IHRoaXMuZmluZCh0aGlzLm9wdGlvbnMudGFyZ2V0KSA6IHRoaXMuY29sdW1ucztcclxuXHJcbiAgICAgICAgICAgIGlmICghdGhpcy5jb2x1bW5zLmxlbmd0aCkgcmV0dXJuO1xyXG5cclxuICAgICAgICAgICAgVUkuJHdpbi5vbignbG9hZCByZXNpemUgb3JpZW50YXRpb25jaGFuZ2UnLCAoZnVuY3Rpb24oKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIGZuID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJHRoaXMubWF0Y2goKTtcclxuICAgICAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAgICAgVUkuJChmdW5jdGlvbigpIHsgZm4oKTsgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFVJLlV0aWxzLmRlYm91bmNlKGZuLCA1MCk7XHJcbiAgICAgICAgICAgIH0pKCkpO1xyXG5cclxuICAgICAgICAgICAgVUkuJGh0bWwub24oXCJjaGFuZ2VkLnVrLmRvbVwiLCBmdW5jdGlvbihlKSB7XHJcbiAgICAgICAgICAgICAgICAkdGhpcy5jb2x1bW5zICA9ICR0aGlzLmVsZW1lbnQuY2hpbGRyZW4oKTtcclxuICAgICAgICAgICAgICAgICR0aGlzLmVsZW1lbnRzID0gJHRoaXMub3B0aW9ucy50YXJnZXQgPyAkdGhpcy5maW5kKCR0aGlzLm9wdGlvbnMudGFyZ2V0KSA6ICR0aGlzLmNvbHVtbnM7XHJcbiAgICAgICAgICAgICAgICAkdGhpcy5tYXRjaCgpO1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMub24oXCJkaXNwbGF5LnVrLmNoZWNrXCIsIGZ1bmN0aW9uKGUpIHtcclxuICAgICAgICAgICAgICAgIGlmKHRoaXMuZWxlbWVudC5pcyhcIjp2aXNpYmxlXCIpKSB0aGlzLm1hdGNoKCk7XHJcbiAgICAgICAgICAgIH0uYmluZCh0aGlzKSk7XHJcblxyXG4gICAgICAgICAgICBncmlkcy5wdXNoKHRoaXMpO1xyXG4gICAgICAgIH0sXHJcblxyXG4gICAgICAgIG1hdGNoOiBmdW5jdGlvbigpIHtcclxuXHJcbiAgICAgICAgICAgIHZhciBmaXJzdHZpc2libGUgPSB0aGlzLmNvbHVtbnMuZmlsdGVyKFwiOnZpc2libGU6Zmlyc3RcIik7XHJcblxyXG4gICAgICAgICAgICBpZiAoIWZpcnN0dmlzaWJsZS5sZW5ndGgpIHJldHVybjtcclxuXHJcbiAgICAgICAgICAgIHZhciBzdGFja2VkID0gTWF0aC5jZWlsKDEwMCAqIHBhcnNlRmxvYXQoZmlyc3R2aXNpYmxlLmNzcygnd2lkdGgnKSkgLyBwYXJzZUZsb2F0KGZpcnN0dmlzaWJsZS5wYXJlbnQoKS5jc3MoJ3dpZHRoJykpKSA+PSAxMDA7XHJcblxyXG4gICAgICAgICAgICBpZiAoc3RhY2tlZCAmJiAhdGhpcy5vcHRpb25zLmlnbm9yZXN0YWNrZWQpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMucmV2ZXJ0KCk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBVSS5VdGlscy5tYXRjaEhlaWdodHModGhpcy5lbGVtZW50cywgdGhpcy5vcHRpb25zKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICAgICAgfSxcclxuXHJcbiAgICAgICAgcmV2ZXJ0OiBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgdGhpcy5lbGVtZW50cy5jc3MoJ21pbi1oZWlnaHQnLCAnJyk7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG5cclxuICAgIFVJLmNvbXBvbmVudCgnZ3JpZE1hcmdpbicsIHtcclxuXHJcbiAgICAgICAgZGVmYXVsdHM6IHtcclxuICAgICAgICAgICAgXCJjbHNcIjogXCJ1ay1ncmlkLW1hcmdpblwiXHJcbiAgICAgICAgfSxcclxuXHJcbiAgICAgICAgYm9vdDogZnVuY3Rpb24oKSB7XHJcblxyXG4gICAgICAgICAgICAvLyBpbml0IGNvZGVcclxuICAgICAgICAgICAgVUkucmVhZHkoZnVuY3Rpb24oY29udGV4dCkge1xyXG5cclxuICAgICAgICAgICAgICAgIFVJLiQoXCJbZGF0YS11ay1ncmlkLW1hcmdpbl1cIiwgY29udGV4dCkuZWFjaChmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgZ3JpZCA9IFVJLiQodGhpcyksIG9iajtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFncmlkLmRhdGEoXCJncmlkTWFyZ2luXCIpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9iaiA9IFVJLmdyaWRNYXJnaW4oZ3JpZCwgVUkuVXRpbHMub3B0aW9ucyhncmlkLmF0dHIoXCJkYXRhLXVrLWdyaWQtbWFyZ2luXCIpKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0sXHJcblxyXG4gICAgICAgIGluaXQ6IGZ1bmN0aW9uKCkge1xyXG5cclxuICAgICAgICAgICAgdmFyIHN0YWNrTWFyZ2luID0gVUkuc3RhY2tNYXJnaW4odGhpcy5lbGVtZW50LCB0aGlzLm9wdGlvbnMpO1xyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG5cclxufSkoVUlraXQpO1xyXG4vKiEgVUlraXQgMi4yMi4wIHwgaHR0cDovL3d3dy5nZXR1aWtpdC5jb20gfCAoYykgMjAxNCBZT090aGVtZSB8IE1JVCBMaWNlbnNlICovXHJcbihmdW5jdGlvbihVSSkge1xyXG5cclxuICAgIFwidXNlIHN0cmljdFwiO1xyXG5cclxuICAgIHZhciBhY3RpdmUgPSBmYWxzZSwgYWN0aXZlQ291bnQgPSAwLCAkaHRtbCA9IFVJLiRodG1sLCBib2R5O1xyXG5cclxuICAgIFVJLmNvbXBvbmVudCgnbW9kYWwnLCB7XHJcblxyXG4gICAgICAgIGRlZmF1bHRzOiB7XHJcbiAgICAgICAgICAgIGtleWJvYXJkOiB0cnVlLFxyXG4gICAgICAgICAgICBiZ2Nsb3NlOiB0cnVlLFxyXG4gICAgICAgICAgICBtaW5TY3JvbGxIZWlnaHQ6IDE1MCxcclxuICAgICAgICAgICAgY2VudGVyOiBmYWxzZSxcclxuICAgICAgICAgICAgbW9kYWw6IHRydWVcclxuICAgICAgICB9LFxyXG5cclxuICAgICAgICBzY3JvbGxhYmxlOiBmYWxzZSxcclxuICAgICAgICB0cmFuc2l0aW9uOiBmYWxzZSxcclxuXHJcbiAgICAgICAgaW5pdDogZnVuY3Rpb24oKSB7XHJcblxyXG4gICAgICAgICAgICBpZiAoIWJvZHkpIGJvZHkgPSBVSS4kKCdib2R5Jyk7XHJcblxyXG4gICAgICAgICAgICBpZiAoIXRoaXMuZWxlbWVudC5sZW5ndGgpIHJldHVybjtcclxuXHJcbiAgICAgICAgICAgIHZhciAkdGhpcyA9IHRoaXM7XHJcblxyXG4gICAgICAgICAgICB0aGlzLnBhZGRpbmdkaXIgPSBcInBhZGRpbmctXCIgKyAoVUkubGFuZ2RpcmVjdGlvbiA9PSAnbGVmdCcgPyBcInJpZ2h0XCI6XCJsZWZ0XCIpO1xyXG4gICAgICAgICAgICB0aGlzLmRpYWxvZyAgICAgPSB0aGlzLmZpbmQoXCIudWstbW9kYWwtZGlhbG9nXCIpO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5hY3RpdmUgICAgID0gZmFsc2U7XHJcblxyXG4gICAgICAgICAgICAvLyBVcGRhdGUgQVJJQVxyXG4gICAgICAgICAgICB0aGlzLmVsZW1lbnQuYXR0cignYXJpYS1oaWRkZW4nLCB0aGlzLmVsZW1lbnQuaGFzQ2xhc3MoXCJ1ay1vcGVuXCIpKTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMub24oXCJjbGlja1wiLCBcIi51ay1tb2RhbC1jbG9zZVwiLCBmdW5jdGlvbihlKSB7XHJcbiAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgICAgICAkdGhpcy5oaWRlKCk7XHJcbiAgICAgICAgICAgIH0pLm9uKFwiY2xpY2tcIiwgZnVuY3Rpb24oZSkge1xyXG5cclxuICAgICAgICAgICAgICAgIHZhciB0YXJnZXQgPSBVSS4kKGUudGFyZ2V0KTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAodGFyZ2V0WzBdID09ICR0aGlzLmVsZW1lbnRbMF0gJiYgJHRoaXMub3B0aW9ucy5iZ2Nsb3NlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJHRoaXMuaGlkZSgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9LFxyXG5cclxuICAgICAgICB0b2dnbGU6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpc1t0aGlzLmlzQWN0aXZlKCkgPyBcImhpZGVcIiA6IFwic2hvd1wiXSgpO1xyXG4gICAgICAgIH0sXHJcblxyXG4gICAgICAgIHNob3c6IGZ1bmN0aW9uKCkge1xyXG5cclxuICAgICAgICAgICAgaWYgKCF0aGlzLmVsZW1lbnQubGVuZ3RoKSByZXR1cm47XHJcblxyXG4gICAgICAgICAgICB2YXIgJHRoaXMgPSB0aGlzO1xyXG5cclxuICAgICAgICAgICAgaWYgKHRoaXMuaXNBY3RpdmUoKSkgcmV0dXJuO1xyXG5cclxuICAgICAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5tb2RhbCAmJiBhY3RpdmUpIHtcclxuICAgICAgICAgICAgICAgIGFjdGl2ZS5oaWRlKHRydWUpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB0aGlzLmVsZW1lbnQucmVtb3ZlQ2xhc3MoXCJ1ay1vcGVuXCIpLnNob3coKTtcclxuICAgICAgICAgICAgdGhpcy5yZXNpemUoKTtcclxuXHJcbiAgICAgICAgICAgIGlmICh0aGlzLm9wdGlvbnMubW9kYWwpIHtcclxuICAgICAgICAgICAgICAgIGFjdGl2ZSA9IHRoaXM7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHRoaXMuYWN0aXZlID0gdHJ1ZTtcclxuXHJcbiAgICAgICAgICAgIGFjdGl2ZUNvdW50Kys7XHJcblxyXG4gICAgICAgICAgICB0aGlzLmVsZW1lbnQuYWRkQ2xhc3MoXCJ1ay1vcGVuXCIpO1xyXG5cclxuICAgICAgICAgICAgJGh0bWwuYWRkQ2xhc3MoXCJ1ay1tb2RhbC1wYWdlXCIpLmhlaWdodCgpOyAvLyBmb3JjZSBicm93c2VyIGVuZ2luZSByZWRyYXdcclxuXHJcbiAgICAgICAgICAgIC8vIFVwZGF0ZSBBUklBXHJcbiAgICAgICAgICAgIHRoaXMuZWxlbWVudC5hdHRyKCdhcmlhLWhpZGRlbicsICdmYWxzZScpO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5lbGVtZW50LnRyaWdnZXIoXCJzaG93LnVrLm1vZGFsXCIpO1xyXG5cclxuICAgICAgICAgICAgVUkuVXRpbHMuY2hlY2tEaXNwbGF5KHRoaXMuZGlhbG9nLCB0cnVlKTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgICAgIH0sXHJcblxyXG4gICAgICAgIGhpZGU6IGZ1bmN0aW9uKGZvcmNlKSB7XHJcblxyXG4gICAgICAgICAgICBpZiAoIWZvcmNlICYmIFVJLnN1cHBvcnQudHJhbnNpdGlvbikge1xyXG5cclxuICAgICAgICAgICAgICAgIHZhciAkdGhpcyA9IHRoaXM7XHJcblxyXG4gICAgICAgICAgICAgICAgdGhpcy5vbmUoVUkuc3VwcG9ydC50cmFuc2l0aW9uLmVuZCwgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJHRoaXMuX2hpZGUoKTtcclxuICAgICAgICAgICAgICAgIH0pLnJlbW92ZUNsYXNzKFwidWstb3BlblwiKTtcclxuXHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcblxyXG4gICAgICAgICAgICAgICAgdGhpcy5faGlkZSgpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gdGhpcztcclxuICAgICAgICB9LFxyXG5cclxuICAgICAgICByZXNpemU6IGZ1bmN0aW9uKCkge1xyXG5cclxuICAgICAgICAgICAgdmFyIGJvZHl3aWR0aCAgPSBib2R5LndpZHRoKCk7XHJcblxyXG4gICAgICAgICAgICB0aGlzLnNjcm9sbGJhcndpZHRoID0gd2luZG93LmlubmVyV2lkdGggLSBib2R5d2lkdGg7XHJcblxyXG4gICAgICAgICAgICBib2R5LmNzcyh0aGlzLnBhZGRpbmdkaXIsIHRoaXMuc2Nyb2xsYmFyd2lkdGgpO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5lbGVtZW50LmNzcygnb3ZlcmZsb3cteScsIHRoaXMuc2Nyb2xsYmFyd2lkdGggPyAnc2Nyb2xsJyA6ICdhdXRvJyk7XHJcblxyXG4gICAgICAgICAgICBpZiAoIXRoaXMudXBkYXRlU2Nyb2xsYWJsZSgpICYmIHRoaXMub3B0aW9ucy5jZW50ZXIpIHtcclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgZGggID0gdGhpcy5kaWFsb2cub3V0ZXJIZWlnaHQoKSxcclxuICAgICAgICAgICAgICAgIHBhZCA9IHBhcnNlSW50KHRoaXMuZGlhbG9nLmNzcygnbWFyZ2luLXRvcCcpLCAxMCkgKyBwYXJzZUludCh0aGlzLmRpYWxvZy5jc3MoJ21hcmdpbi1ib3R0b20nKSwgMTApO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmICgoZGggKyBwYWQpIDwgd2luZG93LmlubmVySGVpZ2h0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kaWFsb2cuY3NzKHsndG9wJzogKHdpbmRvdy5pbm5lckhlaWdodC8yIC0gZGgvMikgLSBwYWQgfSk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZGlhbG9nLmNzcyh7J3RvcCc6ICcnfSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LFxyXG5cclxuICAgICAgICB1cGRhdGVTY3JvbGxhYmxlOiBmdW5jdGlvbigpIHtcclxuXHJcbiAgICAgICAgICAgIC8vIGhhcyBzY3JvbGxhYmxlP1xyXG4gICAgICAgICAgICB2YXIgc2Nyb2xsYWJsZSA9IHRoaXMuZGlhbG9nLmZpbmQoJy51ay1vdmVyZmxvdy1jb250YWluZXI6dmlzaWJsZTpmaXJzdCcpO1xyXG5cclxuICAgICAgICAgICAgaWYgKHNjcm9sbGFibGUubGVuZ3RoKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgc2Nyb2xsYWJsZS5jc3MoXCJoZWlnaHRcIiwgMCk7XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIG9mZnNldCA9IE1hdGguYWJzKHBhcnNlSW50KHRoaXMuZGlhbG9nLmNzcyhcIm1hcmdpbi10b3BcIiksIDEwKSksXHJcbiAgICAgICAgICAgICAgICBkaCAgICAgPSB0aGlzLmRpYWxvZy5vdXRlckhlaWdodCgpLFxyXG4gICAgICAgICAgICAgICAgd2ggICAgID0gd2luZG93LmlubmVySGVpZ2h0LFxyXG4gICAgICAgICAgICAgICAgaCAgICAgID0gd2ggLSAyKihvZmZzZXQgPCAyMCA/IDIwOm9mZnNldCkgLSBkaDtcclxuXHJcbiAgICAgICAgICAgICAgICBzY3JvbGxhYmxlLmNzcyhcImhlaWdodFwiLCBoIDwgdGhpcy5vcHRpb25zLm1pblNjcm9sbEhlaWdodCA/IFwiXCI6aCk7XHJcblxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9LFxyXG5cclxuICAgICAgICBfaGlkZTogZnVuY3Rpb24oKSB7XHJcblxyXG4gICAgICAgICAgICB0aGlzLmFjdGl2ZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICBhY3RpdmVDb3VudC0tO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5lbGVtZW50LmhpZGUoKS5yZW1vdmVDbGFzcyhcInVrLW9wZW5cIik7XHJcblxyXG4gICAgICAgICAgICAvLyBVcGRhdGUgQVJJQVxyXG4gICAgICAgICAgICB0aGlzLmVsZW1lbnQuYXR0cignYXJpYS1oaWRkZW4nLCAndHJ1ZScpO1xyXG5cclxuICAgICAgICAgICAgaWYgKCFhY3RpdmVDb3VudCkge1xyXG4gICAgICAgICAgICAgICAgJGh0bWwucmVtb3ZlQ2xhc3MoXCJ1ay1tb2RhbC1wYWdlXCIpO1xyXG4gICAgICAgICAgICAgICAgYm9keS5jc3ModGhpcy5wYWRkaW5nZGlyLCBcIlwiKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYoYWN0aXZlPT09dGhpcykgYWN0aXZlID0gZmFsc2U7XHJcblxyXG4gICAgICAgICAgICB0aGlzLnRyaWdnZXIoXCJoaWRlLnVrLm1vZGFsXCIpO1xyXG4gICAgICAgIH0sXHJcblxyXG4gICAgICAgIGlzQWN0aXZlOiBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuYWN0aXZlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICB9KTtcclxuXHJcbiAgICBVSS5jb21wb25lbnQoJ21vZGFsVHJpZ2dlcicsIHtcclxuXHJcbiAgICAgICAgYm9vdDogZnVuY3Rpb24oKSB7XHJcblxyXG4gICAgICAgICAgICAvLyBpbml0IGNvZGVcclxuICAgICAgICAgICAgVUkuJGh0bWwub24oXCJjbGljay5tb2RhbC51aWtpdFwiLCBcIltkYXRhLXVrLW1vZGFsXVwiLCBmdW5jdGlvbihlKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIGVsZSA9IFVJLiQodGhpcyk7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKGVsZS5pcyhcImFcIikpIHtcclxuICAgICAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKCFlbGUuZGF0YShcIm1vZGFsVHJpZ2dlclwiKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBtb2RhbCA9IFVJLm1vZGFsVHJpZ2dlcihlbGUsIFVJLlV0aWxzLm9wdGlvbnMoZWxlLmF0dHIoXCJkYXRhLXVrLW1vZGFsXCIpKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgbW9kYWwuc2hvdygpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAvLyBjbG9zZSBtb2RhbCBvbiBlc2MgYnV0dG9uXHJcbiAgICAgICAgICAgIFVJLiRodG1sLm9uKCdrZXlkb3duLm1vZGFsLnVpa2l0JywgZnVuY3Rpb24gKGUpIHtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoYWN0aXZlICYmIGUua2V5Q29kZSA9PT0gMjcgJiYgYWN0aXZlLm9wdGlvbnMua2V5Ym9hcmQpIHsgLy8gRVNDXHJcbiAgICAgICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGFjdGl2ZS5oaWRlKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgVUkuJHdpbi5vbihcInJlc2l6ZSBvcmllbnRhdGlvbmNoYW5nZVwiLCBVSS5VdGlscy5kZWJvdW5jZShmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICAgICAgaWYgKGFjdGl2ZSkgYWN0aXZlLnJlc2l6ZSgpO1xyXG4gICAgICAgICAgICB9LCAxNTApKTtcclxuICAgICAgICB9LFxyXG5cclxuICAgICAgICBpbml0OiBmdW5jdGlvbigpIHtcclxuXHJcbiAgICAgICAgICAgIHZhciAkdGhpcyA9IHRoaXM7XHJcblxyXG4gICAgICAgICAgICB0aGlzLm9wdGlvbnMgPSBVSS4kLmV4dGVuZCh7XHJcbiAgICAgICAgICAgICAgICBcInRhcmdldFwiOiAkdGhpcy5lbGVtZW50LmlzKFwiYVwiKSA/ICR0aGlzLmVsZW1lbnQuYXR0cihcImhyZWZcIikgOiBmYWxzZVxyXG4gICAgICAgICAgICB9LCB0aGlzLm9wdGlvbnMpO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5tb2RhbCA9IFVJLm1vZGFsKHRoaXMub3B0aW9ucy50YXJnZXQsIHRoaXMub3B0aW9ucyk7XHJcblxyXG4gICAgICAgICAgICB0aGlzLm9uKFwiY2xpY2tcIiwgZnVuY3Rpb24oZSkge1xyXG4gICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICAgICAgJHRoaXMuc2hvdygpO1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIC8vbWV0aG9kc1xyXG4gICAgICAgICAgICB0aGlzLnByb3h5KHRoaXMubW9kYWwsIFwic2hvdyBoaWRlIGlzQWN0aXZlXCIpO1xyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG5cclxuICAgIFVJLm1vZGFsLmRpYWxvZyA9IGZ1bmN0aW9uKGNvbnRlbnQsIG9wdGlvbnMpIHtcclxuXHJcbiAgICAgICAgdmFyIG1vZGFsID0gVUkubW9kYWwoVUkuJChVSS5tb2RhbC5kaWFsb2cudGVtcGxhdGUpLmFwcGVuZFRvKFwiYm9keVwiKSwgb3B0aW9ucyk7XHJcblxyXG4gICAgICAgIG1vZGFsLm9uKFwiaGlkZS51ay5tb2RhbFwiLCBmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICBpZiAobW9kYWwucGVyc2lzdCkge1xyXG4gICAgICAgICAgICAgICAgbW9kYWwucGVyc2lzdC5hcHBlbmRUbyhtb2RhbC5wZXJzaXN0LmRhdGEoXCJtb2RhbFBlcnNpc3RQYXJlbnRcIikpO1xyXG4gICAgICAgICAgICAgICAgbW9kYWwucGVyc2lzdCA9IGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIG1vZGFsLmVsZW1lbnQucmVtb3ZlKCk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHNldENvbnRlbnQoY29udGVudCwgbW9kYWwpO1xyXG5cclxuICAgICAgICByZXR1cm4gbW9kYWw7XHJcbiAgICB9O1xyXG5cclxuICAgIFVJLm1vZGFsLmRpYWxvZy50ZW1wbGF0ZSA9ICc8ZGl2IGNsYXNzPVwidWstbW9kYWxcIj48ZGl2IGNsYXNzPVwidWstbW9kYWwtZGlhbG9nXCIgc3R5bGU9XCJtaW4taGVpZ2h0OjA7XCI+PC9kaXY+PC9kaXY+JztcclxuXHJcbiAgICBVSS5tb2RhbC5hbGVydCA9IGZ1bmN0aW9uKGNvbnRlbnQsIG9wdGlvbnMpIHtcclxuXHJcbiAgICAgICAgb3B0aW9ucyA9IFVJLiQuZXh0ZW5kKHRydWUsIHtiZ2Nsb3NlOmZhbHNlLCBrZXlib2FyZDpmYWxzZSwgbW9kYWw6ZmFsc2UsIGxhYmVsczpVSS5tb2RhbC5sYWJlbHN9LCBvcHRpb25zKTtcclxuXHJcbiAgICAgICAgdmFyIG1vZGFsID0gVUkubW9kYWwuZGlhbG9nKChbXHJcbiAgICAgICAgICAgICc8ZGl2IGNsYXNzPVwidWstbWFyZ2luIHVrLW1vZGFsLWNvbnRlbnRcIj4nK1N0cmluZyhjb250ZW50KSsnPC9kaXY+JyxcclxuICAgICAgICAgICAgJzxkaXYgY2xhc3M9XCJ1ay1tb2RhbC1mb290ZXIgdWstdGV4dC1yaWdodFwiPjxidXR0b24gY2xhc3M9XCJ1ay1idXR0b24gdWstYnV0dG9uLXByaW1hcnkgdWstbW9kYWwtY2xvc2VcIj4nK29wdGlvbnMubGFiZWxzLk9rKyc8L2J1dHRvbj48L2Rpdj4nXHJcbiAgICAgICAgXSkuam9pbihcIlwiKSwgb3B0aW9ucyk7XHJcblxyXG4gICAgICAgIG1vZGFsLm9uKCdzaG93LnVrLm1vZGFsJywgZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICAgICAgbW9kYWwuZWxlbWVudC5maW5kKCdidXR0b246Zmlyc3QnKS5mb2N1cygpO1xyXG4gICAgICAgICAgICB9LCA1MCk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHJldHVybiBtb2RhbC5zaG93KCk7XHJcbiAgICB9O1xyXG5cclxuICAgIFVJLm1vZGFsLmNvbmZpcm0gPSBmdW5jdGlvbihjb250ZW50LCBvbmNvbmZpcm0sIG9wdGlvbnMpIHtcclxuXHJcbiAgICAgICAgb25jb25maXJtID0gVUkuJC5pc0Z1bmN0aW9uKG9uY29uZmlybSkgPyBvbmNvbmZpcm0gOiBmdW5jdGlvbigpe307XHJcbiAgICAgICAgb3B0aW9ucyAgID0gVUkuJC5leHRlbmQodHJ1ZSwge2JnY2xvc2U6ZmFsc2UsIGtleWJvYXJkOmZhbHNlLCBtb2RhbDpmYWxzZSwgbGFiZWxzOlVJLm1vZGFsLmxhYmVsc30sIG9wdGlvbnMpO1xyXG5cclxuICAgICAgICB2YXIgbW9kYWwgPSBVSS5tb2RhbC5kaWFsb2coKFtcclxuICAgICAgICAgICAgJzxkaXYgY2xhc3M9XCJ1ay1tYXJnaW4gdWstbW9kYWwtY29udGVudFwiPicrU3RyaW5nKGNvbnRlbnQpKyc8L2Rpdj4nLFxyXG4gICAgICAgICAgICAnPGRpdiBjbGFzcz1cInVrLW1vZGFsLWZvb3RlciB1ay10ZXh0LXJpZ2h0XCI+PGJ1dHRvbiBjbGFzcz1cInVrLWJ1dHRvbiB1ay1tb2RhbC1jbG9zZVwiPicrb3B0aW9ucy5sYWJlbHMuQ2FuY2VsKyc8L2J1dHRvbj4gPGJ1dHRvbiBjbGFzcz1cInVrLWJ1dHRvbiB1ay1idXR0b24tcHJpbWFyeSBqcy1tb2RhbC1jb25maXJtXCI+JytvcHRpb25zLmxhYmVscy5PaysnPC9idXR0b24+PC9kaXY+J1xyXG4gICAgICAgIF0pLmpvaW4oXCJcIiksIG9wdGlvbnMpO1xyXG5cclxuICAgICAgICBtb2RhbC5lbGVtZW50LmZpbmQoXCIuanMtbW9kYWwtY29uZmlybVwiKS5vbihcImNsaWNrXCIsIGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgIG9uY29uZmlybSgpO1xyXG4gICAgICAgICAgICBtb2RhbC5oaWRlKCk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIG1vZGFsLm9uKCdzaG93LnVrLm1vZGFsJywgZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICAgICAgbW9kYWwuZWxlbWVudC5maW5kKCcuanMtbW9kYWwtY29uZmlybScpLmZvY3VzKCk7XHJcbiAgICAgICAgICAgIH0sIDUwKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgcmV0dXJuIG1vZGFsLnNob3coKTtcclxuICAgIH07XHJcblxyXG4gICAgVUkubW9kYWwucHJvbXB0ID0gZnVuY3Rpb24odGV4dCwgdmFsdWUsIG9uc3VibWl0LCBvcHRpb25zKSB7XHJcblxyXG4gICAgICAgIG9uc3VibWl0ID0gVUkuJC5pc0Z1bmN0aW9uKG9uc3VibWl0KSA/IG9uc3VibWl0IDogZnVuY3Rpb24odmFsdWUpe307XHJcbiAgICAgICAgb3B0aW9ucyAgPSBVSS4kLmV4dGVuZCh0cnVlLCB7YmdjbG9zZTpmYWxzZSwga2V5Ym9hcmQ6ZmFsc2UsIG1vZGFsOmZhbHNlLCBsYWJlbHM6VUkubW9kYWwubGFiZWxzfSwgb3B0aW9ucyk7XHJcblxyXG4gICAgICAgIHZhciBtb2RhbCA9IFVJLm1vZGFsLmRpYWxvZygoW1xyXG4gICAgICAgICAgICB0ZXh0ID8gJzxkaXYgY2xhc3M9XCJ1ay1tb2RhbC1jb250ZW50IHVrLWZvcm1cIj4nK1N0cmluZyh0ZXh0KSsnPC9kaXY+JzonJyxcclxuICAgICAgICAgICAgJzxkaXYgY2xhc3M9XCJ1ay1tYXJnaW4tc21hbGwtdG9wIHVrLW1vZGFsLWNvbnRlbnQgdWstZm9ybVwiPjxwPjxpbnB1dCB0eXBlPVwidGV4dFwiIGNsYXNzPVwidWstd2lkdGgtMS0xXCI+PC9wPjwvZGl2PicsXHJcbiAgICAgICAgICAgICc8ZGl2IGNsYXNzPVwidWstbW9kYWwtZm9vdGVyIHVrLXRleHQtcmlnaHRcIj48YnV0dG9uIGNsYXNzPVwidWstYnV0dG9uIHVrLW1vZGFsLWNsb3NlXCI+JytvcHRpb25zLmxhYmVscy5DYW5jZWwrJzwvYnV0dG9uPiA8YnV0dG9uIGNsYXNzPVwidWstYnV0dG9uIHVrLWJ1dHRvbi1wcmltYXJ5IGpzLW1vZGFsLW9rXCI+JytvcHRpb25zLmxhYmVscy5PaysnPC9idXR0b24+PC9kaXY+J1xyXG4gICAgICAgIF0pLmpvaW4oXCJcIiksIG9wdGlvbnMpLFxyXG5cclxuICAgICAgICBpbnB1dCA9IG1vZGFsLmVsZW1lbnQuZmluZChcImlucHV0W3R5cGU9J3RleHQnXVwiKS52YWwodmFsdWUgfHwgJycpLm9uKCdrZXl1cCcsIGZ1bmN0aW9uKGUpe1xyXG4gICAgICAgICAgICBpZiAoZS5rZXlDb2RlID09IDEzKSB7XHJcbiAgICAgICAgICAgICAgICBtb2RhbC5lbGVtZW50LmZpbmQoXCIuanMtbW9kYWwtb2tcIikudHJpZ2dlcignY2xpY2snKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBtb2RhbC5lbGVtZW50LmZpbmQoXCIuanMtbW9kYWwtb2tcIikub24oXCJjbGlja1wiLCBmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICBpZiAob25zdWJtaXQoaW5wdXQudmFsKCkpIT09ZmFsc2Upe1xyXG4gICAgICAgICAgICAgICAgbW9kYWwuaGlkZSgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIG1vZGFsLm9uKCdzaG93LnVrLm1vZGFsJywgZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICAgICAgaW5wdXQuZm9jdXMoKTtcclxuICAgICAgICAgICAgfSwgNTApO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICByZXR1cm4gbW9kYWwuc2hvdygpO1xyXG4gICAgfTtcclxuXHJcbiAgICBVSS5tb2RhbC5ibG9ja1VJID0gZnVuY3Rpb24oY29udGVudCwgb3B0aW9ucykge1xyXG5cclxuICAgICAgICB2YXIgbW9kYWwgPSBVSS5tb2RhbC5kaWFsb2coKFtcclxuICAgICAgICAgICAgJzxkaXYgY2xhc3M9XCJ1ay1tYXJnaW4gdWstbW9kYWwtY29udGVudFwiPicrU3RyaW5nKGNvbnRlbnQgfHwgJzxkaXYgY2xhc3M9XCJ1ay10ZXh0LWNlbnRlclwiPi4uLjwvZGl2PicpKyc8L2Rpdj4nXHJcbiAgICAgICAgXSkuam9pbihcIlwiKSwgVUkuJC5leHRlbmQoe2JnY2xvc2U6ZmFsc2UsIGtleWJvYXJkOmZhbHNlLCBtb2RhbDpmYWxzZX0sIG9wdGlvbnMpKTtcclxuXHJcbiAgICAgICAgbW9kYWwuY29udGVudCA9IG1vZGFsLmVsZW1lbnQuZmluZCgnLnVrLW1vZGFsLWNvbnRlbnQ6Zmlyc3QnKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIG1vZGFsLnNob3coKTtcclxuICAgIH07XHJcblxyXG5cclxuICAgIFVJLm1vZGFsLmxhYmVscyA9IHtcclxuICAgICAgICAnT2snOiAnT2snLFxyXG4gICAgICAgICdDYW5jZWwnOiAnQ2FuY2VsJ1xyXG4gICAgfTtcclxuXHJcblxyXG4gICAgLy8gaGVscGVyIGZ1bmN0aW9uc1xyXG4gICAgZnVuY3Rpb24gc2V0Q29udGVudChjb250ZW50LCBtb2RhbCl7XHJcblxyXG4gICAgICAgIGlmKCFtb2RhbCkgcmV0dXJuO1xyXG5cclxuICAgICAgICBpZiAodHlwZW9mIGNvbnRlbnQgPT09ICdvYmplY3QnKSB7XHJcblxyXG4gICAgICAgICAgICAvLyBjb252ZXJ0IERPTSBvYmplY3QgdG8gYSBqUXVlcnkgb2JqZWN0XHJcbiAgICAgICAgICAgIGNvbnRlbnQgPSBjb250ZW50IGluc3RhbmNlb2YgalF1ZXJ5ID8gY29udGVudCA6IFVJLiQoY29udGVudCk7XHJcblxyXG4gICAgICAgICAgICBpZihjb250ZW50LnBhcmVudCgpLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgbW9kYWwucGVyc2lzdCA9IGNvbnRlbnQ7XHJcbiAgICAgICAgICAgICAgICBtb2RhbC5wZXJzaXN0LmRhdGEoXCJtb2RhbFBlcnNpc3RQYXJlbnRcIiwgY29udGVudC5wYXJlbnQoKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9ZWxzZSBpZiAodHlwZW9mIGNvbnRlbnQgPT09ICdzdHJpbmcnIHx8IHR5cGVvZiBjb250ZW50ID09PSAnbnVtYmVyJykge1xyXG4gICAgICAgICAgICAgICAgLy8ganVzdCBpbnNlcnQgdGhlIGRhdGEgYXMgaW5uZXJIVE1MXHJcbiAgICAgICAgICAgICAgICBjb250ZW50ID0gVUkuJCgnPGRpdj48L2Rpdj4nKS5odG1sKGNvbnRlbnQpO1xyXG4gICAgICAgIH1lbHNlIHtcclxuICAgICAgICAgICAgICAgIC8vIHVuc3VwcG9ydGVkIGRhdGEgdHlwZSFcclxuICAgICAgICAgICAgICAgIGNvbnRlbnQgPSBVSS4kKCc8ZGl2PjwvZGl2PicpLmh0bWwoJ1VJa2l0Lm1vZGFsIEVycm9yOiBVbnN1cHBvcnRlZCBkYXRhIHR5cGU6ICcgKyB0eXBlb2YgY29udGVudCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb250ZW50LmFwcGVuZFRvKG1vZGFsLmVsZW1lbnQuZmluZCgnLnVrLW1vZGFsLWRpYWxvZycpKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIG1vZGFsO1xyXG4gICAgfVxyXG5cclxufSkoVUlraXQpO1xyXG4vKiEgVUlraXQgMi4yMi4wIHwgaHR0cDovL3d3dy5nZXR1aWtpdC5jb20gfCAoYykgMjAxNCBZT090aGVtZSB8IE1JVCBMaWNlbnNlICovXHJcbihmdW5jdGlvbihVSSkge1xyXG5cclxuICAgIFwidXNlIHN0cmljdFwiO1xyXG5cclxuICAgIFVJLmNvbXBvbmVudCgnbmF2Jywge1xyXG5cclxuICAgICAgICBkZWZhdWx0czoge1xyXG4gICAgICAgICAgICBcInRvZ2dsZVwiOiBcIj5saS51ay1wYXJlbnQgPiBhW2hyZWY9JyMnXVwiLFxyXG4gICAgICAgICAgICBcImxpc3RzXCI6IFwiPmxpLnVrLXBhcmVudCA+IHVsXCIsXHJcbiAgICAgICAgICAgIFwibXVsdGlwbGVcIjogZmFsc2VcclxuICAgICAgICB9LFxyXG5cclxuICAgICAgICBib290OiBmdW5jdGlvbigpIHtcclxuXHJcbiAgICAgICAgICAgIC8vIGluaXQgY29kZVxyXG4gICAgICAgICAgICBVSS5yZWFkeShmdW5jdGlvbihjb250ZXh0KSB7XHJcblxyXG4gICAgICAgICAgICAgICAgVUkuJChcIltkYXRhLXVrLW5hdl1cIiwgY29udGV4dCkuZWFjaChmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgbmF2ID0gVUkuJCh0aGlzKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFuYXYuZGF0YShcIm5hdlwiKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgb2JqID0gVUkubmF2KG5hdiwgVUkuVXRpbHMub3B0aW9ucyhuYXYuYXR0cihcImRhdGEtdWstbmF2XCIpKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0sXHJcblxyXG4gICAgICAgIGluaXQ6IGZ1bmN0aW9uKCkge1xyXG5cclxuICAgICAgICAgICAgdmFyICR0aGlzID0gdGhpcztcclxuXHJcbiAgICAgICAgICAgIHRoaXMub24oXCJjbGljay51aWtpdC5uYXZcIiwgdGhpcy5vcHRpb25zLnRvZ2dsZSwgZnVuY3Rpb24oZSkge1xyXG4gICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICAgICAgdmFyIGVsZSA9IFVJLiQodGhpcyk7XHJcbiAgICAgICAgICAgICAgICAkdGhpcy5vcGVuKGVsZS5wYXJlbnQoKVswXSA9PSAkdGhpcy5lbGVtZW50WzBdID8gZWxlIDogZWxlLnBhcmVudChcImxpXCIpKTtcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICB0aGlzLmZpbmQodGhpcy5vcHRpb25zLmxpc3RzKS5lYWNoKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgdmFyICRlbGUgICA9IFVJLiQodGhpcyksXHJcbiAgICAgICAgICAgICAgICAgICAgcGFyZW50ID0gJGVsZS5wYXJlbnQoKSxcclxuICAgICAgICAgICAgICAgICAgICBhY3RpdmUgPSBwYXJlbnQuaGFzQ2xhc3MoXCJ1ay1hY3RpdmVcIik7XHJcblxyXG4gICAgICAgICAgICAgICAgJGVsZS53cmFwKCc8ZGl2IHN0eWxlPVwib3ZlcmZsb3c6aGlkZGVuO2hlaWdodDowO3Bvc2l0aW9uOnJlbGF0aXZlO1wiPjwvZGl2PicpO1xyXG4gICAgICAgICAgICAgICAgcGFyZW50LmRhdGEoXCJsaXN0LWNvbnRhaW5lclwiLCAkZWxlLnBhcmVudCgpW2FjdGl2ZSA/ICdyZW1vdmVDbGFzcyc6J2FkZENsYXNzJ10oJ3VrLWhpZGRlbicpKTtcclxuXHJcbiAgICAgICAgICAgICAgICAvLyBJbml0IEFSSUFcclxuICAgICAgICAgICAgICAgIHBhcmVudC5hdHRyKCdhcmlhLWV4cGFuZGVkJywgcGFyZW50Lmhhc0NsYXNzKFwidWstb3BlblwiKSk7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKGFjdGl2ZSkgJHRoaXMub3BlbihwYXJlbnQsIHRydWUpO1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgfSxcclxuXHJcbiAgICAgICAgb3BlbjogZnVuY3Rpb24obGksIG5vYW5pbWF0aW9uKSB7XHJcblxyXG4gICAgICAgICAgICB2YXIgJHRoaXMgPSB0aGlzLCBlbGVtZW50ID0gdGhpcy5lbGVtZW50LCAkbGkgPSBVSS4kKGxpKSwgJGNvbnRhaW5lciA9ICRsaS5kYXRhKCdsaXN0LWNvbnRhaW5lcicpO1xyXG5cclxuICAgICAgICAgICAgaWYgKCF0aGlzLm9wdGlvbnMubXVsdGlwbGUpIHtcclxuXHJcbiAgICAgICAgICAgICAgICBlbGVtZW50LmNoaWxkcmVuKCcudWstb3BlbicpLm5vdChsaSkuZWFjaChmdW5jdGlvbigpIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGVsZSA9IFVJLiQodGhpcyk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChlbGUuZGF0YSgnbGlzdC1jb250YWluZXInKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbGUuZGF0YSgnbGlzdC1jb250YWluZXInKS5zdG9wKCkuYW5pbWF0ZSh7aGVpZ2h0OiAwfSwgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBVSS4kKHRoaXMpLnBhcmVudCgpLnJlbW92ZUNsYXNzKCd1ay1vcGVuJykuZW5kKCkuYWRkQ2xhc3MoJ3VrLWhpZGRlbicpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgJGxpLnRvZ2dsZUNsYXNzKCd1ay1vcGVuJyk7XHJcblxyXG4gICAgICAgICAgICAvLyBVcGRhdGUgQVJJQVxyXG4gICAgICAgICAgICAkbGkuYXR0cignYXJpYS1leHBhbmRlZCcsICRsaS5oYXNDbGFzcygndWstb3BlbicpKTtcclxuXHJcbiAgICAgICAgICAgIGlmICgkY29udGFpbmVyKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKCRsaS5oYXNDbGFzcygndWstb3BlbicpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJGNvbnRhaW5lci5yZW1vdmVDbGFzcygndWstaGlkZGVuJyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKG5vYW5pbWF0aW9uKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICRjb250YWluZXIuc3RvcCgpLmhlaWdodCgkbGkuaGFzQ2xhc3MoJ3VrLW9wZW4nKSA/ICdhdXRvJyA6IDApO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoISRsaS5oYXNDbGFzcygndWstb3BlbicpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICRjb250YWluZXIuYWRkQ2xhc3MoJ3VrLWhpZGRlbicpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50cmlnZ2VyKCdkaXNwbGF5LnVrLmNoZWNrJyk7XHJcblxyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgJGNvbnRhaW5lci5zdG9wKCkuYW5pbWF0ZSh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGhlaWdodDogKCRsaS5oYXNDbGFzcygndWstb3BlbicpID8gZ2V0SGVpZ2h0KCRjb250YWluZXIuZmluZCgndWw6Zmlyc3QnKSkgOiAwKVxyXG4gICAgICAgICAgICAgICAgICAgIH0sIGZ1bmN0aW9uKCkge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEkbGkuaGFzQ2xhc3MoJ3VrLW9wZW4nKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJGNvbnRhaW5lci5hZGRDbGFzcygndWstaGlkZGVuJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkY29udGFpbmVyLmNzcygnaGVpZ2h0JywgJycpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAkdGhpcy50cmlnZ2VyKCdkaXNwbGF5LnVrLmNoZWNrJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9KTtcclxuXHJcblxyXG4gICAgLy8gaGVscGVyXHJcblxyXG4gICAgZnVuY3Rpb24gZ2V0SGVpZ2h0KGVsZSkge1xyXG4gICAgICAgIHZhciAkZWxlID0gVUkuJChlbGUpLCBoZWlnaHQgPSBcImF1dG9cIjtcclxuXHJcbiAgICAgICAgaWYgKCRlbGUuaXMoXCI6dmlzaWJsZVwiKSkge1xyXG4gICAgICAgICAgICBoZWlnaHQgPSAkZWxlLm91dGVySGVpZ2h0KCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdmFyIHRtcCA9IHtcclxuICAgICAgICAgICAgICAgIHBvc2l0aW9uOiAkZWxlLmNzcyhcInBvc2l0aW9uXCIpLFxyXG4gICAgICAgICAgICAgICAgdmlzaWJpbGl0eTogJGVsZS5jc3MoXCJ2aXNpYmlsaXR5XCIpLFxyXG4gICAgICAgICAgICAgICAgZGlzcGxheTogJGVsZS5jc3MoXCJkaXNwbGF5XCIpXHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICBoZWlnaHQgPSAkZWxlLmNzcyh7cG9zaXRpb246ICdhYnNvbHV0ZScsIHZpc2liaWxpdHk6ICdoaWRkZW4nLCBkaXNwbGF5OiAnYmxvY2snfSkub3V0ZXJIZWlnaHQoKTtcclxuXHJcbiAgICAgICAgICAgICRlbGUuY3NzKHRtcCk7IC8vIHJlc2V0IGVsZW1lbnRcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBoZWlnaHQ7XHJcbiAgICB9XHJcblxyXG59KShVSWtpdCk7XHJcbi8qISBVSWtpdCAyLjIyLjAgfCBodHRwOi8vd3d3LmdldHVpa2l0LmNvbSB8IChjKSAyMDE0IFlPT3RoZW1lIHwgTUlUIExpY2Vuc2UgKi9cclxuKGZ1bmN0aW9uKFVJKSB7XHJcblxyXG4gICAgXCJ1c2Ugc3RyaWN0XCI7XHJcblxyXG4gICAgdmFyIHNjcm9sbHBvcyA9IHt4OiB3aW5kb3cuc2Nyb2xsWCwgeTogd2luZG93LnNjcm9sbFl9LFxyXG4gICAgICAgICR3aW4gICAgICA9IFVJLiR3aW4sXHJcbiAgICAgICAgJGRvYyAgICAgID0gVUkuJGRvYyxcclxuICAgICAgICAkaHRtbCAgICAgPSBVSS4kaHRtbCxcclxuICAgICAgICBPZmZjYW52YXMgPSB7XHJcblxyXG4gICAgICAgIHNob3c6IGZ1bmN0aW9uKGVsZW1lbnQpIHtcclxuXHJcbiAgICAgICAgICAgIGVsZW1lbnQgPSBVSS4kKGVsZW1lbnQpO1xyXG5cclxuICAgICAgICAgICAgaWYgKCFlbGVtZW50Lmxlbmd0aCkgcmV0dXJuO1xyXG5cclxuICAgICAgICAgICAgdmFyICRib2R5ICAgICA9IFVJLiQoJ2JvZHknKSxcclxuICAgICAgICAgICAgICAgIGJhciAgICAgICA9IGVsZW1lbnQuZmluZChcIi51ay1vZmZjYW52YXMtYmFyOmZpcnN0XCIpLFxyXG4gICAgICAgICAgICAgICAgcnRsICAgICAgID0gKFVJLmxhbmdkaXJlY3Rpb24gPT0gXCJyaWdodFwiKSxcclxuICAgICAgICAgICAgICAgIGZsaXAgICAgICA9IGJhci5oYXNDbGFzcyhcInVrLW9mZmNhbnZhcy1iYXItZmxpcFwiKSA/IC0xOjEsXHJcbiAgICAgICAgICAgICAgICBkaXIgICAgICAgPSBmbGlwICogKHJ0bCA/IC0xIDogMSksXHJcblxyXG4gICAgICAgICAgICAgICAgc2Nyb2xsYmFyd2lkdGggPSAgd2luZG93LmlubmVyV2lkdGggLSAkYm9keS53aWR0aCgpO1xyXG5cclxuICAgICAgICAgICAgc2Nyb2xscG9zID0ge3g6IHdpbmRvdy5wYWdlWE9mZnNldCwgeTogd2luZG93LnBhZ2VZT2Zmc2V0fTtcclxuXHJcbiAgICAgICAgICAgIGVsZW1lbnQuYWRkQ2xhc3MoXCJ1ay1hY3RpdmVcIik7XHJcblxyXG4gICAgICAgICAgICAkYm9keS5jc3Moe1wid2lkdGhcIjogd2luZG93LmlubmVyV2lkdGggLSBzY3JvbGxiYXJ3aWR0aCwgXCJoZWlnaHRcIjogd2luZG93LmlubmVySGVpZ2h0fSkuYWRkQ2xhc3MoXCJ1ay1vZmZjYW52YXMtcGFnZVwiKTtcclxuICAgICAgICAgICAgJGJvZHkuY3NzKChydGwgPyBcIm1hcmdpbi1yaWdodFwiIDogXCJtYXJnaW4tbGVmdFwiKSwgKHJ0bCA/IC0xIDogMSkgKiAoYmFyLm91dGVyV2lkdGgoKSAqIGRpcikpLndpZHRoKCk7IC8vIC53aWR0aCgpIC0gZm9yY2UgcmVkcmF3XHJcblxyXG4gICAgICAgICAgICAkaHRtbC5jc3MoJ21hcmdpbi10b3AnLCBzY3JvbGxwb3MueSAqIC0xKTtcclxuXHJcbiAgICAgICAgICAgIGJhci5hZGRDbGFzcyhcInVrLW9mZmNhbnZhcy1iYXItc2hvd1wiKTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuX2luaXRFbGVtZW50KGVsZW1lbnQpO1xyXG5cclxuICAgICAgICAgICAgYmFyLnRyaWdnZXIoJ3Nob3cudWsub2ZmY2FudmFzJywgW2VsZW1lbnQsIGJhcl0pO1xyXG5cclxuICAgICAgICAgICAgLy8gVXBkYXRlIEFSSUFcclxuICAgICAgICAgICAgZWxlbWVudC5hdHRyKCdhcmlhLWhpZGRlbicsICdmYWxzZScpO1xyXG4gICAgICAgIH0sXHJcblxyXG4gICAgICAgIGhpZGU6IGZ1bmN0aW9uKGZvcmNlKSB7XHJcblxyXG4gICAgICAgICAgICB2YXIgJGJvZHkgPSBVSS4kKCdib2R5JyksXHJcbiAgICAgICAgICAgICAgICBwYW5lbCA9IFVJLiQoXCIudWstb2ZmY2FudmFzLnVrLWFjdGl2ZVwiKSxcclxuICAgICAgICAgICAgICAgIHJ0bCAgID0gKFVJLmxhbmdkaXJlY3Rpb24gPT0gXCJyaWdodFwiKSxcclxuICAgICAgICAgICAgICAgIGJhciAgID0gcGFuZWwuZmluZChcIi51ay1vZmZjYW52YXMtYmFyOmZpcnN0XCIpLFxyXG4gICAgICAgICAgICAgICAgZmluYWxpemUgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgICAgICAkYm9keS5yZW1vdmVDbGFzcyhcInVrLW9mZmNhbnZhcy1wYWdlXCIpLmNzcyh7XCJ3aWR0aFwiOiBcIlwiLCBcImhlaWdodFwiOiBcIlwiLCBcIm1hcmdpbi1sZWZ0XCI6IFwiXCIsIFwibWFyZ2luLXJpZ2h0XCI6IFwiXCJ9KTtcclxuICAgICAgICAgICAgICAgICAgICBwYW5lbC5yZW1vdmVDbGFzcyhcInVrLWFjdGl2ZVwiKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgYmFyLnJlbW92ZUNsYXNzKFwidWstb2ZmY2FudmFzLWJhci1zaG93XCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICRodG1sLmNzcygnbWFyZ2luLXRvcCcsICcnKTtcclxuICAgICAgICAgICAgICAgICAgICB3aW5kb3cuc2Nyb2xsVG8oc2Nyb2xscG9zLngsIHNjcm9sbHBvcy55KTtcclxuICAgICAgICAgICAgICAgICAgICBiYXIudHJpZ2dlcignaGlkZS51ay5vZmZjYW52YXMnLCBbcGFuZWwsIGJhcl0pO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAvLyBVcGRhdGUgQVJJQVxyXG4gICAgICAgICAgICAgICAgICAgIHBhbmVsLmF0dHIoJ2FyaWEtaGlkZGVuJywgJ3RydWUnKTtcclxuICAgICAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICBpZiAoIXBhbmVsLmxlbmd0aCkgcmV0dXJuO1xyXG5cclxuICAgICAgICAgICAgaWYgKFVJLnN1cHBvcnQudHJhbnNpdGlvbiAmJiAhZm9yY2UpIHtcclxuXHJcbiAgICAgICAgICAgICAgICAkYm9keS5vbmUoVUkuc3VwcG9ydC50cmFuc2l0aW9uLmVuZCwgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZmluYWxpemUoKTtcclxuICAgICAgICAgICAgICAgIH0pLmNzcygocnRsID8gXCJtYXJnaW4tcmlnaHRcIiA6IFwibWFyZ2luLWxlZnRcIiksIFwiXCIpO1xyXG5cclxuICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgICAgICAgICBiYXIucmVtb3ZlQ2xhc3MoXCJ1ay1vZmZjYW52YXMtYmFyLXNob3dcIik7XHJcbiAgICAgICAgICAgICAgICB9LCAwKTtcclxuXHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBmaW5hbGl6ZSgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSxcclxuXHJcbiAgICAgICAgX2luaXRFbGVtZW50OiBmdW5jdGlvbihlbGVtZW50KSB7XHJcblxyXG4gICAgICAgICAgICBpZiAoZWxlbWVudC5kYXRhKFwiT2ZmY2FudmFzSW5pdFwiKSkgcmV0dXJuO1xyXG5cclxuICAgICAgICAgICAgZWxlbWVudC5vbihcImNsaWNrLnVrLm9mZmNhbnZhcyBzd2lwZVJpZ2h0LnVrLm9mZmNhbnZhcyBzd2lwZUxlZnQudWsub2ZmY2FudmFzXCIsIGZ1bmN0aW9uKGUpIHtcclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgdGFyZ2V0ID0gVUkuJChlLnRhcmdldCk7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKCFlLnR5cGUubWF0Y2goL3N3aXBlLykpIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCF0YXJnZXQuaGFzQ2xhc3MoXCJ1ay1vZmZjYW52YXMtY2xvc2VcIikpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRhcmdldC5oYXNDbGFzcyhcInVrLW9mZmNhbnZhcy1iYXJcIikpIHJldHVybjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRhcmdldC5wYXJlbnRzKFwiLnVrLW9mZmNhbnZhcy1iYXI6Zmlyc3RcIikubGVuZ3RoKSByZXR1cm47XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGUuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKCk7XHJcbiAgICAgICAgICAgICAgICBPZmZjYW52YXMuaGlkZSgpO1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIGVsZW1lbnQub24oXCJjbGlja1wiLCBcImFbaHJlZl49JyMnXVwiLCBmdW5jdGlvbihlKXtcclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgbGluayA9IFVJLiQodGhpcyksXHJcbiAgICAgICAgICAgICAgICAgICAgaHJlZiA9IGxpbmsuYXR0cihcImhyZWZcIik7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKGhyZWYgPT0gXCIjXCIpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgVUkuJGRvYy5vbmUoJ2hpZGUudWsub2ZmY2FudmFzJywgZnVuY3Rpb24oKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHZhciB0YXJnZXQ7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldCA9IFVJLiQoaHJlZik7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoZSl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldCA9IFwiXCJcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmICghdGFyZ2V0Lmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXQgPSBVSS4kKCdbbmFtZT1cIicraHJlZi5yZXBsYWNlKCcjJywnJykrJ1wiXScpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRhcmdldC5sZW5ndGggJiYgbGluay5hdHRyKCdkYXRhLXVrLXNtb290aC1zY3JvbGwnKSAmJiBVSS5VdGlscy5zY3JvbGxUb0VsZW1lbnQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgVUkuVXRpbHMuc2Nyb2xsVG9FbGVtZW50KHRhcmdldCwgVUkuVXRpbHMub3B0aW9ucyhsaW5rLmF0dHIoJ2RhdGEtdWstc21vb3RoLXNjcm9sbCcpIHx8ICd7fScpKTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9IGhyZWY7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgT2ZmY2FudmFzLmhpZGUoKTtcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICBlbGVtZW50LmRhdGEoXCJPZmZjYW52YXNJbml0XCIsIHRydWUpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgVUkuY29tcG9uZW50KCdvZmZjYW52YXNUcmlnZ2VyJywge1xyXG5cclxuICAgICAgICBib290OiBmdW5jdGlvbigpIHtcclxuXHJcbiAgICAgICAgICAgIC8vIGluaXQgY29kZVxyXG4gICAgICAgICAgICAkaHRtbC5vbihcImNsaWNrLm9mZmNhbnZhcy51aWtpdFwiLCBcIltkYXRhLXVrLW9mZmNhbnZhc11cIiwgZnVuY3Rpb24oZSkge1xyXG5cclxuICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgZWxlID0gVUkuJCh0aGlzKTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoIWVsZS5kYXRhKFwib2ZmY2FudmFzVHJpZ2dlclwiKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBvYmogPSBVSS5vZmZjYW52YXNUcmlnZ2VyKGVsZSwgVUkuVXRpbHMub3B0aW9ucyhlbGUuYXR0cihcImRhdGEtdWstb2ZmY2FudmFzXCIpKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgZWxlLnRyaWdnZXIoXCJjbGlja1wiKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAkaHRtbC5vbigna2V5ZG93bi51ay5vZmZjYW52YXMnLCBmdW5jdGlvbihlKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKGUua2V5Q29kZSA9PT0gMjcpIHsgLy8gRVNDXHJcbiAgICAgICAgICAgICAgICAgICAgT2ZmY2FudmFzLmhpZGUoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSxcclxuXHJcbiAgICAgICAgaW5pdDogZnVuY3Rpb24oKSB7XHJcblxyXG4gICAgICAgICAgICB2YXIgJHRoaXMgPSB0aGlzO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5vcHRpb25zID0gVUkuJC5leHRlbmQoe1xyXG4gICAgICAgICAgICAgICAgXCJ0YXJnZXRcIjogJHRoaXMuZWxlbWVudC5pcyhcImFcIikgPyAkdGhpcy5lbGVtZW50LmF0dHIoXCJocmVmXCIpIDogZmFsc2VcclxuICAgICAgICAgICAgfSwgdGhpcy5vcHRpb25zKTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMub24oXCJjbGlja1wiLCBmdW5jdGlvbihlKSB7XHJcbiAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgICAgICBPZmZjYW52YXMuc2hvdygkdGhpcy5vcHRpb25zLnRhcmdldCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG5cclxuICAgIFVJLm9mZmNhbnZhcyA9IE9mZmNhbnZhcztcclxuXHJcbn0pKFVJa2l0KTtcclxuLyohIFVJa2l0IDIuMjIuMCB8IGh0dHA6Ly93d3cuZ2V0dWlraXQuY29tIHwgKGMpIDIwMTQgWU9PdGhlbWUgfCBNSVQgTGljZW5zZSAqL1xyXG4oZnVuY3Rpb24oVUkpIHtcclxuXHJcbiAgICBcInVzZSBzdHJpY3RcIjtcclxuXHJcbiAgICB2YXIgQW5pbWF0aW9ucztcclxuXHJcbiAgICBVSS5jb21wb25lbnQoJ3N3aXRjaGVyJywge1xyXG5cclxuICAgICAgICBkZWZhdWx0czoge1xyXG4gICAgICAgICAgICBjb25uZWN0ICAgOiBmYWxzZSxcclxuICAgICAgICAgICAgdG9nZ2xlICAgIDogXCI+KlwiLFxyXG4gICAgICAgICAgICBhY3RpdmUgICAgOiAwLFxyXG4gICAgICAgICAgICBhbmltYXRpb24gOiBmYWxzZSxcclxuICAgICAgICAgICAgZHVyYXRpb24gIDogMjAwLFxyXG4gICAgICAgICAgICBzd2lwaW5nICAgOiB0cnVlXHJcbiAgICAgICAgfSxcclxuXHJcbiAgICAgICAgYW5pbWF0aW5nOiBmYWxzZSxcclxuXHJcbiAgICAgICAgYm9vdDogZnVuY3Rpb24oKSB7XHJcblxyXG4gICAgICAgICAgICAvLyBpbml0IGNvZGVcclxuICAgICAgICAgICAgVUkucmVhZHkoZnVuY3Rpb24oY29udGV4dCkge1xyXG5cclxuICAgICAgICAgICAgICAgIFVJLiQoXCJbZGF0YS11ay1zd2l0Y2hlcl1cIiwgY29udGV4dCkuZWFjaChmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgc3dpdGNoZXIgPSBVSS4kKHRoaXMpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoIXN3aXRjaGVyLmRhdGEoXCJzd2l0Y2hlclwiKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgb2JqID0gVUkuc3dpdGNoZXIoc3dpdGNoZXIsIFVJLlV0aWxzLm9wdGlvbnMoc3dpdGNoZXIuYXR0cihcImRhdGEtdWstc3dpdGNoZXJcIikpKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSxcclxuXHJcbiAgICAgICAgaW5pdDogZnVuY3Rpb24oKSB7XHJcblxyXG4gICAgICAgICAgICB2YXIgJHRoaXMgPSB0aGlzO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5vbihcImNsaWNrLnVpa2l0LnN3aXRjaGVyXCIsIHRoaXMub3B0aW9ucy50b2dnbGUsIGZ1bmN0aW9uKGUpIHtcclxuICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgICAgICR0aGlzLnNob3codGhpcyk7XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5jb25uZWN0KSB7XHJcblxyXG4gICAgICAgICAgICAgICAgdGhpcy5jb25uZWN0ID0gVUkuJCh0aGlzLm9wdGlvbnMuY29ubmVjdCk7XHJcblxyXG4gICAgICAgICAgICAgICAgdGhpcy5jb25uZWN0LmZpbmQoXCIudWstYWN0aXZlXCIpLnJlbW92ZUNsYXNzKFwiLnVrLWFjdGl2ZVwiKTtcclxuXHJcbiAgICAgICAgICAgICAgICAvLyBkZWxlZ2F0ZSBzd2l0Y2ggY29tbWFuZHMgd2l0aGluIGNvbnRhaW5lciBjb250ZW50XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5jb25uZWN0Lmxlbmd0aCkge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAvLyBJbml0IEFSSUEgZm9yIGNvbm5lY3RcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbm5lY3QuY2hpbGRyZW4oKS5hdHRyKCdhcmlhLWhpZGRlbicsICd0cnVlJyk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY29ubmVjdC5vbihcImNsaWNrXCIsICdbZGF0YS11ay1zd2l0Y2hlci1pdGVtXScsIGZ1bmN0aW9uKGUpIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpdGVtID0gVUkuJCh0aGlzKS5hdHRyKCdkYXRhLXVrLXN3aXRjaGVyLWl0ZW0nKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgkdGhpcy5pbmRleCA9PSBpdGVtKSByZXR1cm47XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2goaXRlbSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnbmV4dCc6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdwcmV2aW91cyc6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHRoaXMuc2hvdygkdGhpcy5pbmRleCArIChpdGVtPT0nbmV4dCcgPyAxOi0xKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICR0aGlzLnNob3cocGFyc2VJbnQoaXRlbSwgMTApKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH0pXHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLm9wdGlvbnMuc3dpcGluZykge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jb25uZWN0Lm9uKCdzd2lwZVJpZ2h0IHN3aXBlTGVmdCcsIGZ1bmN0aW9uKGUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKCF3aW5kb3cuZ2V0U2VsZWN0aW9uKCkudG9TdHJpbmcoKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICR0aGlzLnNob3coJHRoaXMuaW5kZXggKyAoZS50eXBlID09ICdzd2lwZUxlZnQnID8gMSA6IC0xKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgdG9nZ2xlcyA9IHRoaXMuZmluZCh0aGlzLm9wdGlvbnMudG9nZ2xlKSxcclxuICAgICAgICAgICAgICAgICAgICBhY3RpdmUgID0gdG9nZ2xlcy5maWx0ZXIoXCIudWstYWN0aXZlXCIpO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChhY3RpdmUubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zaG93KGFjdGl2ZSwgZmFsc2UpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5hY3RpdmU9PT1mYWxzZSkgcmV0dXJuO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBhY3RpdmUgPSB0b2dnbGVzLmVxKHRoaXMub3B0aW9ucy5hY3RpdmUpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2hvdyhhY3RpdmUubGVuZ3RoID8gYWN0aXZlIDogdG9nZ2xlcy5lcSgwKSwgZmFsc2UpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIC8vIEluaXQgQVJJQSBmb3IgdG9nZ2xlc1xyXG4gICAgICAgICAgICAgICAgdG9nZ2xlcy5ub3QoYWN0aXZlKS5hdHRyKCdhcmlhLWV4cGFuZGVkJywgJ2ZhbHNlJyk7XHJcbiAgICAgICAgICAgICAgICBhY3RpdmUuYXR0cignYXJpYS1leHBhbmRlZCcsICd0cnVlJyk7XHJcblxyXG4gICAgICAgICAgICAgICAgdGhpcy5vbignY2hhbmdlZC51ay5kb20nLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgICAgICAkdGhpcy5jb25uZWN0ID0gVUkuJCgkdGhpcy5vcHRpb25zLmNvbm5lY3QpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgfSxcclxuXHJcbiAgICAgICAgc2hvdzogZnVuY3Rpb24odGFiLCBhbmltYXRlKSB7XHJcblxyXG4gICAgICAgICAgICBpZiAodGhpcy5hbmltYXRpbmcpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKGlzTmFOKHRhYikpIHtcclxuICAgICAgICAgICAgICAgIHRhYiA9IFVJLiQodGFiKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgdG9nZ2xlcyA9IHRoaXMuZmluZCh0aGlzLm9wdGlvbnMudG9nZ2xlKTtcclxuXHJcbiAgICAgICAgICAgICAgICB0YWIgPSB0YWIgPCAwID8gdG9nZ2xlcy5sZW5ndGgtMSA6IHRhYjtcclxuICAgICAgICAgICAgICAgIHRhYiA9IHRvZ2dsZXMuZXEodG9nZ2xlc1t0YWJdID8gdGFiIDogMCk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHZhciAkdGhpcyAgICAgPSB0aGlzLFxyXG4gICAgICAgICAgICAgICAgdG9nZ2xlcyAgID0gdGhpcy5maW5kKHRoaXMub3B0aW9ucy50b2dnbGUpLFxyXG4gICAgICAgICAgICAgICAgYWN0aXZlICAgID0gVUkuJCh0YWIpLFxyXG4gICAgICAgICAgICAgICAgYW5pbWF0aW9uID0gQW5pbWF0aW9uc1t0aGlzLm9wdGlvbnMuYW5pbWF0aW9uXSB8fCBmdW5jdGlvbihjdXJyZW50LCBuZXh0KSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmICghJHRoaXMub3B0aW9ucy5hbmltYXRpb24pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIEFuaW1hdGlvbnMubm9uZS5hcHBseSgkdGhpcyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICB2YXIgYW5pbSA9ICR0aGlzLm9wdGlvbnMuYW5pbWF0aW9uLnNwbGl0KCcsJyk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChhbmltLmxlbmd0aCA9PSAxKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFuaW1bMV0gPSBhbmltWzBdO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgYW5pbVswXSA9IGFuaW1bMF0udHJpbSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGFuaW1bMV0gPSBhbmltWzFdLnRyaW0oKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNvcmVBbmltYXRpb24uYXBwbHkoJHRoaXMsIFthbmltLCBjdXJyZW50LCBuZXh0XSk7XHJcbiAgICAgICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgaWYgKGFuaW1hdGU9PT1mYWxzZSB8fCAhVUkuc3VwcG9ydC5hbmltYXRpb24pIHtcclxuICAgICAgICAgICAgICAgIGFuaW1hdGlvbiA9IEFuaW1hdGlvbnMubm9uZTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKGFjdGl2ZS5oYXNDbGFzcyhcInVrLWRpc2FibGVkXCIpKSByZXR1cm47XHJcblxyXG4gICAgICAgICAgICAvLyBVcGRhdGUgQVJJQSBmb3IgVG9nZ2xlc1xyXG4gICAgICAgICAgICB0b2dnbGVzLmF0dHIoJ2FyaWEtZXhwYW5kZWQnLCAnZmFsc2UnKTtcclxuICAgICAgICAgICAgYWN0aXZlLmF0dHIoJ2FyaWEtZXhwYW5kZWQnLCAndHJ1ZScpO1xyXG5cclxuICAgICAgICAgICAgdG9nZ2xlcy5maWx0ZXIoXCIudWstYWN0aXZlXCIpLnJlbW92ZUNsYXNzKFwidWstYWN0aXZlXCIpO1xyXG4gICAgICAgICAgICBhY3RpdmUuYWRkQ2xhc3MoXCJ1ay1hY3RpdmVcIik7XHJcblxyXG4gICAgICAgICAgICBpZiAodGhpcy5vcHRpb25zLmNvbm5lY3QgJiYgdGhpcy5jb25uZWN0Lmxlbmd0aCkge1xyXG5cclxuICAgICAgICAgICAgICAgIHRoaXMuaW5kZXggPSB0aGlzLmZpbmQodGhpcy5vcHRpb25zLnRvZ2dsZSkuaW5kZXgoYWN0aXZlKTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5pbmRleCA9PSAtMSApIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmluZGV4ID0gMDtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICB0aGlzLmNvbm5lY3QuZWFjaChmdW5jdGlvbigpIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGNvbnRhaW5lciA9IFVJLiQodGhpcyksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNoaWxkcmVuICA9IFVJLiQoY29udGFpbmVyLmNoaWxkcmVuKCkpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50ICAgPSBVSS4kKGNoaWxkcmVuLmZpbHRlcignLnVrLWFjdGl2ZScpKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgbmV4dCAgICAgID0gVUkuJChjaGlsZHJlbi5lcSgkdGhpcy5pbmRleCkpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgJHRoaXMuYW5pbWF0aW5nID0gdHJ1ZTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFuaW1hdGlvbi5hcHBseSgkdGhpcywgW2N1cnJlbnQsIG5leHRdKS50aGVuKGZ1bmN0aW9uKCl7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudC5yZW1vdmVDbGFzcyhcInVrLWFjdGl2ZVwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5leHQuYWRkQ2xhc3MoXCJ1ay1hY3RpdmVcIik7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gVXBkYXRlIEFSSUEgZm9yIGNvbm5lY3RcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnQuYXR0cignYXJpYS1oaWRkZW4nLCAndHJ1ZScpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV4dC5hdHRyKCdhcmlhLWhpZGRlbicsICdmYWxzZScpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFVJLlV0aWxzLmNoZWNrRGlzcGxheShuZXh0LCB0cnVlKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkdGhpcy5hbmltYXRpbmcgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdGhpcy50cmlnZ2VyKFwic2hvdy51ay5zd2l0Y2hlclwiLCBbYWN0aXZlXSk7XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcblxyXG4gICAgQW5pbWF0aW9ucyA9IHtcclxuXHJcbiAgICAgICAgJ25vbmUnOiBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgdmFyIGQgPSBVSS4kLkRlZmVycmVkKCk7XHJcbiAgICAgICAgICAgIGQucmVzb2x2ZSgpO1xyXG4gICAgICAgICAgICByZXR1cm4gZC5wcm9taXNlKCk7XHJcbiAgICAgICAgfSxcclxuXHJcbiAgICAgICAgJ2ZhZGUnOiBmdW5jdGlvbihjdXJyZW50LCBuZXh0KSB7XHJcbiAgICAgICAgICAgIHJldHVybiBjb3JlQW5pbWF0aW9uLmFwcGx5KHRoaXMsIFsndWstYW5pbWF0aW9uLWZhZGUnLCBjdXJyZW50LCBuZXh0XSk7XHJcbiAgICAgICAgfSxcclxuXHJcbiAgICAgICAgJ3NsaWRlLWJvdHRvbSc6IGZ1bmN0aW9uKGN1cnJlbnQsIG5leHQpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGNvcmVBbmltYXRpb24uYXBwbHkodGhpcywgWyd1ay1hbmltYXRpb24tc2xpZGUtYm90dG9tJywgY3VycmVudCwgbmV4dF0pO1xyXG4gICAgICAgIH0sXHJcblxyXG4gICAgICAgICdzbGlkZS10b3AnOiBmdW5jdGlvbihjdXJyZW50LCBuZXh0KSB7XHJcbiAgICAgICAgICAgIHJldHVybiBjb3JlQW5pbWF0aW9uLmFwcGx5KHRoaXMsIFsndWstYW5pbWF0aW9uLXNsaWRlLXRvcCcsIGN1cnJlbnQsIG5leHRdKTtcclxuICAgICAgICB9LFxyXG5cclxuICAgICAgICAnc2xpZGUtdmVydGljYWwnOiBmdW5jdGlvbihjdXJyZW50LCBuZXh0LCBkaXIpIHtcclxuXHJcbiAgICAgICAgICAgIHZhciBhbmltID0gWyd1ay1hbmltYXRpb24tc2xpZGUtdG9wJywgJ3VrLWFuaW1hdGlvbi1zbGlkZS1ib3R0b20nXTtcclxuXHJcbiAgICAgICAgICAgIGlmIChjdXJyZW50ICYmIGN1cnJlbnQuaW5kZXgoKSA+IG5leHQuaW5kZXgoKSkge1xyXG4gICAgICAgICAgICAgICAgYW5pbS5yZXZlcnNlKCk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBjb3JlQW5pbWF0aW9uLmFwcGx5KHRoaXMsIFthbmltLCBjdXJyZW50LCBuZXh0XSk7XHJcbiAgICAgICAgfSxcclxuXHJcbiAgICAgICAgJ3NsaWRlLWxlZnQnOiBmdW5jdGlvbihjdXJyZW50LCBuZXh0KSB7XHJcbiAgICAgICAgICAgIHJldHVybiBjb3JlQW5pbWF0aW9uLmFwcGx5KHRoaXMsIFsndWstYW5pbWF0aW9uLXNsaWRlLWxlZnQnLCBjdXJyZW50LCBuZXh0XSk7XHJcbiAgICAgICAgfSxcclxuXHJcbiAgICAgICAgJ3NsaWRlLXJpZ2h0JzogZnVuY3Rpb24oY3VycmVudCwgbmV4dCkge1xyXG4gICAgICAgICAgICByZXR1cm4gY29yZUFuaW1hdGlvbi5hcHBseSh0aGlzLCBbJ3VrLWFuaW1hdGlvbi1zbGlkZS1yaWdodCcsIGN1cnJlbnQsIG5leHRdKTtcclxuICAgICAgICB9LFxyXG5cclxuICAgICAgICAnc2xpZGUtaG9yaXpvbnRhbCc6IGZ1bmN0aW9uKGN1cnJlbnQsIG5leHQsIGRpcikge1xyXG5cclxuICAgICAgICAgICAgdmFyIGFuaW0gPSBbJ3VrLWFuaW1hdGlvbi1zbGlkZS1yaWdodCcsICd1ay1hbmltYXRpb24tc2xpZGUtbGVmdCddO1xyXG5cclxuICAgICAgICAgICAgaWYgKGN1cnJlbnQgJiYgY3VycmVudC5pbmRleCgpID4gbmV4dC5pbmRleCgpKSB7XHJcbiAgICAgICAgICAgICAgICBhbmltLnJldmVyc2UoKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIGNvcmVBbmltYXRpb24uYXBwbHkodGhpcywgW2FuaW0sIGN1cnJlbnQsIG5leHRdKTtcclxuICAgICAgICB9LFxyXG5cclxuICAgICAgICAnc2NhbGUnOiBmdW5jdGlvbihjdXJyZW50LCBuZXh0KSB7XHJcbiAgICAgICAgICAgIHJldHVybiBjb3JlQW5pbWF0aW9uLmFwcGx5KHRoaXMsIFsndWstYW5pbWF0aW9uLXNjYWxlLXVwJywgY3VycmVudCwgbmV4dF0pO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgVUkuc3dpdGNoZXIuYW5pbWF0aW9ucyA9IEFuaW1hdGlvbnM7XHJcblxyXG5cclxuICAgIC8vIGhlbHBlcnNcclxuXHJcbiAgICBmdW5jdGlvbiBjb3JlQW5pbWF0aW9uKGNscywgY3VycmVudCwgbmV4dCkge1xyXG5cclxuICAgICAgICB2YXIgZCA9IFVJLiQuRGVmZXJyZWQoKSwgY2xzSW4gPSBjbHMsIGNsc091dCA9IGNscywgcmVsZWFzZTtcclxuXHJcbiAgICAgICAgaWYgKG5leHRbMF09PT1jdXJyZW50WzBdKSB7XHJcbiAgICAgICAgICAgIGQucmVzb2x2ZSgpO1xyXG4gICAgICAgICAgICByZXR1cm4gZC5wcm9taXNlKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAodHlwZW9mKGNscykgPT0gJ29iamVjdCcpIHtcclxuICAgICAgICAgICAgY2xzSW4gID0gY2xzWzBdO1xyXG4gICAgICAgICAgICBjbHNPdXQgPSBjbHNbMV0gfHwgY2xzWzBdO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmVsZWFzZSA9IGZ1bmN0aW9uKCkge1xyXG5cclxuICAgICAgICAgICAgaWYgKGN1cnJlbnQpIGN1cnJlbnQuaGlkZSgpLnJlbW92ZUNsYXNzKCd1ay1hY3RpdmUgJytjbHNPdXQrJyB1ay1hbmltYXRpb24tcmV2ZXJzZScpO1xyXG5cclxuICAgICAgICAgICAgbmV4dC5hZGRDbGFzcyhjbHNJbikub25lKFVJLnN1cHBvcnQuYW5pbWF0aW9uLmVuZCwgZnVuY3Rpb24oKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgbmV4dC5yZW1vdmVDbGFzcygnJytjbHNJbisnJykuY3NzKHtvcGFjaXR5OicnLCBkaXNwbGF5OicnfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgZC5yZXNvbHZlKCk7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKGN1cnJlbnQpIGN1cnJlbnQuY3NzKHtvcGFjaXR5OicnLCBkaXNwbGF5OicnfSk7XHJcblxyXG4gICAgICAgICAgICB9LmJpbmQodGhpcykpLnNob3coKTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBuZXh0LmNzcygnYW5pbWF0aW9uLWR1cmF0aW9uJywgdGhpcy5vcHRpb25zLmR1cmF0aW9uKydtcycpO1xyXG5cclxuICAgICAgICBpZiAoY3VycmVudCAmJiBjdXJyZW50Lmxlbmd0aCkge1xyXG5cclxuICAgICAgICAgICAgY3VycmVudC5jc3MoJ2FuaW1hdGlvbi1kdXJhdGlvbicsIHRoaXMub3B0aW9ucy5kdXJhdGlvbisnbXMnKTtcclxuXHJcbiAgICAgICAgICAgIGN1cnJlbnQuY3NzKCdkaXNwbGF5JywgJ25vbmUnKS5hZGRDbGFzcyhjbHNPdXQrJyB1ay1hbmltYXRpb24tcmV2ZXJzZScpLm9uZShVSS5zdXBwb3J0LmFuaW1hdGlvbi5lbmQsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgcmVsZWFzZSgpO1xyXG4gICAgICAgICAgICB9LmJpbmQodGhpcykpLmNzcygnZGlzcGxheScsICcnKTtcclxuXHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgbmV4dC5hZGRDbGFzcygndWstYWN0aXZlJyk7XHJcbiAgICAgICAgICAgIHJlbGVhc2UoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBkLnByb21pc2UoKTtcclxuICAgIH1cclxuXHJcbn0pKFVJa2l0KTtcclxuLyohIFVJa2l0IDIuMjIuMCB8IGh0dHA6Ly93d3cuZ2V0dWlraXQuY29tIHwgKGMpIDIwMTQgWU9PdGhlbWUgfCBNSVQgTGljZW5zZSAqL1xyXG4oZnVuY3Rpb24oVUkpIHtcclxuXHJcbiAgICBcInVzZSBzdHJpY3RcIjtcclxuXHJcbiAgICBVSS5jb21wb25lbnQoJ3RhYicsIHtcclxuXHJcbiAgICAgICAgZGVmYXVsdHM6IHtcclxuICAgICAgICAgICAgJ3RhcmdldCcgICAgOiAnPmxpOm5vdCgudWstdGFiLXJlc3BvbnNpdmUsIC51ay1kaXNhYmxlZCknLFxyXG4gICAgICAgICAgICAnY29ubmVjdCcgICA6IGZhbHNlLFxyXG4gICAgICAgICAgICAnYWN0aXZlJyAgICA6IDAsXHJcbiAgICAgICAgICAgICdhbmltYXRpb24nIDogZmFsc2UsXHJcbiAgICAgICAgICAgICdkdXJhdGlvbicgIDogMjAwXHJcbiAgICAgICAgfSxcclxuXHJcbiAgICAgICAgYm9vdDogZnVuY3Rpb24oKSB7XHJcblxyXG4gICAgICAgICAgICAvLyBpbml0IGNvZGVcclxuICAgICAgICAgICAgVUkucmVhZHkoZnVuY3Rpb24oY29udGV4dCkge1xyXG5cclxuICAgICAgICAgICAgICAgIFVJLiQoXCJbZGF0YS11ay10YWJdXCIsIGNvbnRleHQpLmVhY2goZnVuY3Rpb24oKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHZhciB0YWIgPSBVSS4kKHRoaXMpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoIXRhYi5kYXRhKFwidGFiXCIpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBvYmogPSBVSS50YWIodGFiLCBVSS5VdGlscy5vcHRpb25zKHRhYi5hdHRyKFwiZGF0YS11ay10YWJcIikpKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSxcclxuXHJcbiAgICAgICAgaW5pdDogZnVuY3Rpb24oKSB7XHJcblxyXG4gICAgICAgICAgICB2YXIgJHRoaXMgPSB0aGlzO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5jdXJyZW50ID0gZmFsc2U7XHJcblxyXG4gICAgICAgICAgICB0aGlzLm9uKFwiY2xpY2sudWlraXQudGFiXCIsIHRoaXMub3B0aW9ucy50YXJnZXQsIGZ1bmN0aW9uKGUpIHtcclxuXHJcbiAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKCR0aGlzLnN3aXRjaGVyICYmICR0aGlzLnN3aXRjaGVyLmFuaW1hdGluZykge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgY3VycmVudCA9ICR0aGlzLmZpbmQoJHRoaXMub3B0aW9ucy50YXJnZXQpLm5vdCh0aGlzKTtcclxuXHJcbiAgICAgICAgICAgICAgICBjdXJyZW50LnJlbW92ZUNsYXNzKFwidWstYWN0aXZlXCIpLmJsdXIoKTtcclxuXHJcbiAgICAgICAgICAgICAgICAkdGhpcy50cmlnZ2VyKFwiY2hhbmdlLnVrLnRhYlwiLCBbVUkuJCh0aGlzKS5hZGRDbGFzcyhcInVrLWFjdGl2ZVwiKSwgJHRoaXMuY3VycmVudF0pO1xyXG5cclxuICAgICAgICAgICAgICAgICR0aGlzLmN1cnJlbnQgPSBVSS4kKHRoaXMpO1xyXG5cclxuICAgICAgICAgICAgICAgIC8vIFVwZGF0ZSBBUklBXHJcbiAgICAgICAgICAgICAgICBpZiAoISR0aGlzLm9wdGlvbnMuY29ubmVjdCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGN1cnJlbnQuYXR0cignYXJpYS1leHBhbmRlZCcsICdmYWxzZScpO1xyXG4gICAgICAgICAgICAgICAgICAgIFVJLiQodGhpcykuYXR0cignYXJpYS1leHBhbmRlZCcsICd0cnVlJyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5jb25uZWN0KSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNvbm5lY3QgPSBVSS4kKHRoaXMub3B0aW9ucy5jb25uZWN0KTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8gaW5pdCByZXNwb25zaXZlIHRhYlxyXG4gICAgICAgICAgICB0aGlzLnJlc3BvbnNpdmV0YWIgPSBVSS4kKCc8bGkgY2xhc3M9XCJ1ay10YWItcmVzcG9uc2l2ZSB1ay1hY3RpdmVcIj48YT48L2E+PC9saT4nKS5hcHBlbmQoJzxkaXYgY2xhc3M9XCJ1ay1kcm9wZG93biB1ay1kcm9wZG93bi1zbWFsbFwiPjx1bCBjbGFzcz1cInVrLW5hdiB1ay1uYXYtZHJvcGRvd25cIj48L3VsPjxkaXY+Jyk7XHJcblxyXG4gICAgICAgICAgICB0aGlzLnJlc3BvbnNpdmV0YWIuZHJvcGRvd24gPSB0aGlzLnJlc3BvbnNpdmV0YWIuZmluZCgnLnVrLWRyb3Bkb3duJyk7XHJcbiAgICAgICAgICAgIHRoaXMucmVzcG9uc2l2ZXRhYi5sc3QgICAgICA9IHRoaXMucmVzcG9uc2l2ZXRhYi5kcm9wZG93bi5maW5kKCd1bCcpO1xyXG4gICAgICAgICAgICB0aGlzLnJlc3BvbnNpdmV0YWIuY2FwdGlvbiAgPSB0aGlzLnJlc3BvbnNpdmV0YWIuZmluZCgnYTpmaXJzdCcpO1xyXG5cclxuICAgICAgICAgICAgaWYgKHRoaXMuZWxlbWVudC5oYXNDbGFzcyhcInVrLXRhYi1ib3R0b21cIikpIHRoaXMucmVzcG9uc2l2ZXRhYi5kcm9wZG93bi5hZGRDbGFzcyhcInVrLWRyb3Bkb3duLXVwXCIpO1xyXG5cclxuICAgICAgICAgICAgLy8gaGFuZGxlIGNsaWNrXHJcbiAgICAgICAgICAgIHRoaXMucmVzcG9uc2l2ZXRhYi5sc3Qub24oJ2NsaWNrLnVpa2l0LnRhYicsICdhJywgZnVuY3Rpb24oZSkge1xyXG5cclxuICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIGxpbmsgPSBVSS4kKHRoaXMpO1xyXG5cclxuICAgICAgICAgICAgICAgICR0aGlzLmVsZW1lbnQuY2hpbGRyZW4oJ2xpOm5vdCgudWstdGFiLXJlc3BvbnNpdmUpJykuZXEobGluay5kYXRhKCdpbmRleCcpKS50cmlnZ2VyKCdjbGljaycpO1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMub24oJ3Nob3cudWsuc3dpdGNoZXIgY2hhbmdlLnVrLnRhYicsIGZ1bmN0aW9uKGUsIHRhYikge1xyXG4gICAgICAgICAgICAgICAgJHRoaXMucmVzcG9uc2l2ZXRhYi5jYXB0aW9uLmh0bWwodGFiLnRleHQoKSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5lbGVtZW50LmFwcGVuZCh0aGlzLnJlc3BvbnNpdmV0YWIpO1xyXG5cclxuICAgICAgICAgICAgLy8gaW5pdCBVSWtpdCBjb21wb25lbnRzXHJcbiAgICAgICAgICAgIGlmICh0aGlzLm9wdGlvbnMuY29ubmVjdCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zd2l0Y2hlciA9IFVJLnN3aXRjaGVyKHRoaXMuZWxlbWVudCwge1xyXG4gICAgICAgICAgICAgICAgICAgIFwidG9nZ2xlXCIgICAgOiBcIj5saTpub3QoLnVrLXRhYi1yZXNwb25zaXZlKVwiLFxyXG4gICAgICAgICAgICAgICAgICAgIFwiY29ubmVjdFwiICAgOiB0aGlzLm9wdGlvbnMuY29ubmVjdCxcclxuICAgICAgICAgICAgICAgICAgICBcImFjdGl2ZVwiICAgIDogdGhpcy5vcHRpb25zLmFjdGl2ZSxcclxuICAgICAgICAgICAgICAgICAgICBcImFuaW1hdGlvblwiIDogdGhpcy5vcHRpb25zLmFuaW1hdGlvbixcclxuICAgICAgICAgICAgICAgICAgICBcImR1cmF0aW9uXCIgIDogdGhpcy5vcHRpb25zLmR1cmF0aW9uXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgVUkuZHJvcGRvd24odGhpcy5yZXNwb25zaXZldGFiLCB7XCJtb2RlXCI6IFwiY2xpY2tcIn0pO1xyXG5cclxuICAgICAgICAgICAgLy8gaW5pdFxyXG4gICAgICAgICAgICAkdGhpcy50cmlnZ2VyKFwiY2hhbmdlLnVrLnRhYlwiLCBbdGhpcy5lbGVtZW50LmZpbmQodGhpcy5vcHRpb25zLnRhcmdldCkubm90KCcudWstdGFiLXJlc3BvbnNpdmUnKS5maWx0ZXIoJy51ay1hY3RpdmUnKV0pO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5jaGVjaygpO1xyXG5cclxuICAgICAgICAgICAgVUkuJHdpbi5vbigncmVzaXplIG9yaWVudGF0aW9uY2hhbmdlJywgVUkuVXRpbHMuZGVib3VuY2UoZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgICAgIGlmICgkdGhpcy5lbGVtZW50LmlzKFwiOnZpc2libGVcIikpICAkdGhpcy5jaGVjaygpO1xyXG4gICAgICAgICAgICB9LCAxMDApKTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMub24oJ2Rpc3BsYXkudWsuY2hlY2snLCBmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICAgICAgaWYgKCR0aGlzLmVsZW1lbnQuaXMoXCI6dmlzaWJsZVwiKSkgICR0aGlzLmNoZWNrKCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0sXHJcblxyXG4gICAgICAgIGNoZWNrOiBmdW5jdGlvbigpIHtcclxuXHJcbiAgICAgICAgICAgIHZhciBjaGlsZHJlbiA9IHRoaXMuZWxlbWVudC5jaGlsZHJlbignbGk6bm90KC51ay10YWItcmVzcG9uc2l2ZSknKS5yZW1vdmVDbGFzcygndWstaGlkZGVuJyk7XHJcblxyXG4gICAgICAgICAgICBpZiAoIWNoaWxkcmVuLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5yZXNwb25zaXZldGFiLmFkZENsYXNzKCd1ay1oaWRkZW4nKTtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdmFyIHRvcCAgICAgICAgICA9IChjaGlsZHJlbi5lcSgwKS5vZmZzZXQoKS50b3AgKyBNYXRoLmNlaWwoY2hpbGRyZW4uZXEoMCkuaGVpZ2h0KCkvMikpLFxyXG4gICAgICAgICAgICAgICAgZG9yZXNwb25zaXZlID0gZmFsc2UsXHJcbiAgICAgICAgICAgICAgICBpdGVtLCBsaW5rLCBjbG9uZTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMucmVzcG9uc2l2ZXRhYi5sc3QuZW1wdHkoKTtcclxuXHJcbiAgICAgICAgICAgIGNoaWxkcmVuLmVhY2goZnVuY3Rpb24oKXtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoVUkuJCh0aGlzKS5vZmZzZXQoKS50b3AgPiB0b3ApIHtcclxuICAgICAgICAgICAgICAgICAgICBkb3Jlc3BvbnNpdmUgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIGlmIChkb3Jlc3BvbnNpdmUpIHtcclxuXHJcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNoaWxkcmVuLmxlbmd0aDsgaSsrKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGl0ZW0gID0gVUkuJChjaGlsZHJlbi5lcShpKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgbGluayAgPSBpdGVtLmZpbmQoJ2EnKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGl0ZW0uY3NzKCdmbG9hdCcpICE9ICdub25lJyAmJiAhaXRlbS5hdHRyKCd1ay1kcm9wZG93bicpKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWl0ZW0uaGFzQ2xhc3MoJ3VrLWRpc2FibGVkJykpIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbG9uZSA9IGl0ZW1bMF0ub3V0ZXJIVE1MLnJlcGxhY2UoJzxhICcsICc8YSBkYXRhLWluZGV4PVwiJytpKydcIiAnKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJlc3BvbnNpdmV0YWIubHN0LmFwcGVuZChjbG9uZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW0uYWRkQ2xhc3MoJ3VrLWhpZGRlbicpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdGhpcy5yZXNwb25zaXZldGFiW3RoaXMucmVzcG9uc2l2ZXRhYi5sc3QuY2hpbGRyZW4oJ2xpJykubGVuZ3RoID8gJ3JlbW92ZUNsYXNzJzonYWRkQ2xhc3MnXSgndWstaGlkZGVuJyk7XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcblxyXG59KShVSWtpdCk7XHJcbi8qISBVSWtpdCAyLjIyLjAgfCBodHRwOi8vd3d3LmdldHVpa2l0LmNvbSB8IChjKSAyMDE0IFlPT3RoZW1lIHwgTUlUIExpY2Vuc2UgKi9cclxuKGZ1bmN0aW9uKFVJKXtcclxuXHJcbiAgICBcInVzZSBzdHJpY3RcIjtcclxuXHJcbiAgICBVSS5jb21wb25lbnQoJ2NvdmVyJywge1xyXG5cclxuICAgICAgICBkZWZhdWx0czoge1xyXG4gICAgICAgICAgICBhdXRvbXV0ZSA6IHRydWVcclxuICAgICAgICB9LFxyXG5cclxuICAgICAgICBib290OiBmdW5jdGlvbigpIHtcclxuXHJcbiAgICAgICAgICAgIC8vIGF1dG8gaW5pdFxyXG4gICAgICAgICAgICBVSS5yZWFkeShmdW5jdGlvbihjb250ZXh0KSB7XHJcblxyXG4gICAgICAgICAgICAgICAgVUkuJChcIltkYXRhLXVrLWNvdmVyXVwiLCBjb250ZXh0KS5lYWNoKGZ1bmN0aW9uKCl7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHZhciBlbGUgPSBVSS4kKHRoaXMpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZighZWxlLmRhdGEoXCJjb3ZlclwiKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgcGx1Z2luID0gVUkuY292ZXIoZWxlLCBVSS5VdGlscy5vcHRpb25zKGVsZS5hdHRyKFwiZGF0YS11ay1jb3ZlclwiKSkpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9LFxyXG5cclxuICAgICAgICBpbml0OiBmdW5jdGlvbigpIHtcclxuXHJcbiAgICAgICAgICAgIHRoaXMucGFyZW50ID0gdGhpcy5lbGVtZW50LnBhcmVudCgpO1xyXG5cclxuICAgICAgICAgICAgVUkuJHdpbi5vbignbG9hZCByZXNpemUgb3JpZW50YXRpb25jaGFuZ2UnLCBVSS5VdGlscy5kZWJvdW5jZShmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jaGVjaygpO1xyXG4gICAgICAgICAgICB9LmJpbmQodGhpcyksIDEwMCkpO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5vbihcImRpc3BsYXkudWsuY2hlY2tcIiwgZnVuY3Rpb24oZSkge1xyXG4gICAgICAgICAgICAgICAgaWYodGhpcy5lbGVtZW50LmlzKFwiOnZpc2libGVcIikpIHRoaXMuY2hlY2soKTtcclxuICAgICAgICAgICAgfS5iaW5kKHRoaXMpKTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuY2hlY2soKTtcclxuXHJcbiAgICAgICAgICAgIGlmICh0aGlzLmVsZW1lbnQuaXMoJ2lmcmFtZScpICYmIHRoaXMub3B0aW9ucy5hdXRvbXV0ZSkge1xyXG5cclxuICAgICAgICAgICAgICAgIHZhciBzcmMgPSB0aGlzLmVsZW1lbnQuYXR0cignc3JjJyk7XHJcblxyXG4gICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50LmF0dHIoJ3NyYycsICcnKS5vbignbG9hZCcsIGZ1bmN0aW9uKCl7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY29udGVudFdpbmRvdy5wb3N0TWVzc2FnZSgneyBcImV2ZW50XCI6IFwiY29tbWFuZFwiLCBcImZ1bmNcIjogXCJtdXRlXCIsIFwibWV0aG9kXCI6XCJzZXRWb2x1bWVcIiwgXCJ2YWx1ZVwiOjB9JywgJyonKTtcclxuXHJcbiAgICAgICAgICAgICAgICB9KS5hdHRyKCdzcmMnLCBbc3JjLCAoc3JjLmluZGV4T2YoJz8nKSA+IC0xID8gJyYnOic/JyksICdlbmFibGVqc2FwaT0xJmFwaT0xJ10uam9pbignJykpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSxcclxuXHJcbiAgICAgICAgY2hlY2s6IGZ1bmN0aW9uKCkge1xyXG5cclxuICAgICAgICAgICAgdGhpcy5lbGVtZW50LmNzcyh7XHJcbiAgICAgICAgICAgICAgICAnd2lkdGgnICA6ICcnLFxyXG4gICAgICAgICAgICAgICAgJ2hlaWdodCcgOiAnJ1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuZGltZW5zaW9uID0ge3c6IHRoaXMuZWxlbWVudC53aWR0aCgpLCBoOiB0aGlzLmVsZW1lbnQuaGVpZ2h0KCl9O1xyXG5cclxuICAgICAgICAgICAgaWYgKHRoaXMuZWxlbWVudC5hdHRyKCd3aWR0aCcpICYmICFpc05hTih0aGlzLmVsZW1lbnQuYXR0cignd2lkdGgnKSkpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuZGltZW5zaW9uLncgPSB0aGlzLmVsZW1lbnQuYXR0cignd2lkdGgnKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKHRoaXMuZWxlbWVudC5hdHRyKCdoZWlnaHQnKSAmJiAhaXNOYU4odGhpcy5lbGVtZW50LmF0dHIoJ2hlaWdodCcpKSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5kaW1lbnNpb24uaCA9IHRoaXMuZWxlbWVudC5hdHRyKCdoZWlnaHQnKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdGhpcy5yYXRpbyAgICAgPSB0aGlzLmRpbWVuc2lvbi53IC8gdGhpcy5kaW1lbnNpb24uaDtcclxuXHJcbiAgICAgICAgICAgIHZhciB3ID0gdGhpcy5wYXJlbnQud2lkdGgoKSwgaCA9IHRoaXMucGFyZW50LmhlaWdodCgpLCB3aWR0aCwgaGVpZ2h0O1xyXG5cclxuICAgICAgICAgICAgLy8gaWYgZWxlbWVudCBoZWlnaHQgPCBwYXJlbnQgaGVpZ2h0IChnYXAgdW5kZXJuZWF0aClcclxuICAgICAgICAgICAgaWYgKCh3IC8gdGhpcy5yYXRpbykgPCBoKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgd2lkdGggID0gTWF0aC5jZWlsKGggKiB0aGlzLnJhdGlvKTtcclxuICAgICAgICAgICAgICAgIGhlaWdodCA9IGg7XHJcblxyXG4gICAgICAgICAgICAvLyBlbGVtZW50IHdpZHRoIDwgcGFyZW50IHdpZHRoIChnYXAgdG8gcmlnaHQpXHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcblxyXG4gICAgICAgICAgICAgICAgd2lkdGggID0gdztcclxuICAgICAgICAgICAgICAgIGhlaWdodCA9IE1hdGguY2VpbCh3IC8gdGhpcy5yYXRpbyk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHRoaXMuZWxlbWVudC5jc3Moe1xyXG4gICAgICAgICAgICAgICAgJ3dpZHRoJyAgOiB3aWR0aCxcclxuICAgICAgICAgICAgICAgICdoZWlnaHQnIDogaGVpZ2h0XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG5cclxufSkoVUlraXQpO1xyXG4vKiEgVUlraXQgMi4yMi4wIHwgaHR0cDovL3d3dy5nZXR1aWtpdC5jb20gfCAoYykgMjAxNCBZT090aGVtZSB8IE1JVCBMaWNlbnNlICovXHJcbihmdW5jdGlvbihhZGRvbikge1xyXG5cclxuICAgIHZhciBjb21wb25lbnQ7XHJcblxyXG4gICAgaWYgKHdpbmRvdy5VSWtpdCkge1xyXG4gICAgICAgIGNvbXBvbmVudCA9IGFkZG9uKFVJa2l0KTtcclxuICAgIH1cclxuXHJcbiAgICBpZiAodHlwZW9mIGRlZmluZSA9PSBcImZ1bmN0aW9uXCIgJiYgZGVmaW5lLmFtZCkge1xyXG4gICAgICAgIGRlZmluZShcInVpa2l0LXN0aWNreVwiLCBbXCJ1aWtpdFwiXSwgZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgcmV0dXJuIGNvbXBvbmVudCB8fCBhZGRvbihVSWtpdCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG59KShmdW5jdGlvbihVSSl7XHJcblxyXG4gICAgXCJ1c2Ugc3RyaWN0XCI7XHJcblxyXG4gICAgdmFyICR3aW4gICAgICAgICA9IFVJLiR3aW4sXHJcbiAgICAgICAgJGRvYyAgICAgICAgID0gVUkuJGRvYyxcclxuICAgICAgICBzdGlja2VkICAgICAgPSBbXSxcclxuICAgICAgICBkaXJlY3Rpb24gICAgPSAxO1xyXG5cclxuICAgIFVJLmNvbXBvbmVudCgnc3RpY2t5Jywge1xyXG5cclxuICAgICAgICBkZWZhdWx0czoge1xyXG4gICAgICAgICAgICB0b3AgICAgICAgICAgOiAwLFxyXG4gICAgICAgICAgICBib3R0b20gICAgICAgOiAwLFxyXG4gICAgICAgICAgICBhbmltYXRpb24gICAgOiAnJyxcclxuICAgICAgICAgICAgY2xzaW5pdCAgICAgIDogJ3VrLXN0aWNreS1pbml0JyxcclxuICAgICAgICAgICAgY2xzYWN0aXZlICAgIDogJ3VrLWFjdGl2ZScsXHJcbiAgICAgICAgICAgIGNsc2luYWN0aXZlICA6ICcnLFxyXG4gICAgICAgICAgICBnZXRXaWR0aEZyb20gOiAnJyxcclxuICAgICAgICAgICAgc2hvd3VwICAgICAgOiBmYWxzZSxcclxuICAgICAgICAgICAgYm91bmRhcnkgICAgIDogZmFsc2UsXHJcbiAgICAgICAgICAgIG1lZGlhICAgICAgICA6IGZhbHNlLFxyXG4gICAgICAgICAgICB0YXJnZXQgICAgICAgOiBmYWxzZSxcclxuICAgICAgICAgICAgZGlzYWJsZWQgICAgIDogZmFsc2VcclxuICAgICAgICB9LFxyXG5cclxuICAgICAgICBib290OiBmdW5jdGlvbigpIHtcclxuXHJcbiAgICAgICAgICAgIC8vIHNob3VsZCBiZSBtb3JlIGVmZmljaWVudCB0aGFuIHVzaW5nICR3aW4uc2Nyb2xsKGNoZWNrc2Nyb2xscG9zaXRpb24pOlxyXG4gICAgICAgICAgICBVSS4kZG9jLm9uKCdzY3JvbGxpbmcudWsuZG9jdW1lbnQnLCBmdW5jdGlvbihlLCBkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICBkaXJlY3Rpb24gPSBkYXRhLmRpci55O1xyXG4gICAgICAgICAgICAgICAgY2hlY2tzY3JvbGxwb3NpdGlvbigpO1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIFVJLiR3aW4ub24oJ3Jlc2l6ZSBvcmllbnRhdGlvbmNoYW5nZScsIFVJLlV0aWxzLmRlYm91bmNlKGZ1bmN0aW9uKCkge1xyXG5cclxuICAgICAgICAgICAgICAgIGlmICghc3RpY2tlZC5sZW5ndGgpIHJldHVybjtcclxuXHJcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHN0aWNrZWQubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgICBzdGlja2VkW2ldLnJlc2V0KHRydWUpO1xyXG4gICAgICAgICAgICAgICAgICAgIHN0aWNrZWRbaV0uc2VsZi5jb21wdXRlV3JhcHBlcigpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGNoZWNrc2Nyb2xscG9zaXRpb24oKTtcclxuICAgICAgICAgICAgfSwgMTAwKSk7XHJcblxyXG4gICAgICAgICAgICAvLyBpbml0IGNvZGVcclxuICAgICAgICAgICAgVUkucmVhZHkoZnVuY3Rpb24oY29udGV4dCkge1xyXG5cclxuICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKXtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgVUkuJChcIltkYXRhLXVrLXN0aWNreV1cIiwgY29udGV4dCkuZWFjaChmdW5jdGlvbigpe1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyICRlbGUgPSBVSS4kKHRoaXMpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYoISRlbGUuZGF0YShcInN0aWNreVwiKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgVUkuc3RpY2t5KCRlbGUsIFVJLlV0aWxzLm9wdGlvbnMoJGVsZS5hdHRyKCdkYXRhLXVrLXN0aWNreScpKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgY2hlY2tzY3JvbGxwb3NpdGlvbigpO1xyXG4gICAgICAgICAgICAgICAgfSwgMCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0sXHJcblxyXG4gICAgICAgIGluaXQ6IGZ1bmN0aW9uKCkge1xyXG5cclxuICAgICAgICAgICAgdmFyIHdyYXBwZXIgID0gVUkuJCgnPGRpdiBjbGFzcz1cInVrLXN0aWNreS1wbGFjZWhvbGRlclwiPjwvZGl2PicpLCBib3VuZGFyeSA9IHRoaXMub3B0aW9ucy5ib3VuZGFyeSwgYm91bmR0b3BhcmVudDtcclxuXHJcbiAgICAgICAgICAgIHRoaXMud3JhcHBlciA9IHRoaXMuZWxlbWVudC5jc3MoJ21hcmdpbicsIDApLndyYXAod3JhcHBlcikucGFyZW50KCk7XHJcblxyXG4gICAgICAgICAgICB0aGlzLmNvbXB1dGVXcmFwcGVyKCk7XHJcblxyXG4gICAgICAgICAgICBpZiAoYm91bmRhcnkpIHtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoYm91bmRhcnkgPT09IHRydWUpIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgYm91bmRhcnkgICAgICA9IHRoaXMud3JhcHBlci5wYXJlbnQoKTtcclxuICAgICAgICAgICAgICAgICAgICBib3VuZHRvcGFyZW50ID0gdHJ1ZTtcclxuXHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHR5cGVvZiBib3VuZGFyeSA9PT0gXCJzdHJpbmdcIikge1xyXG4gICAgICAgICAgICAgICAgICAgIGJvdW5kYXJ5ID0gVUkuJChib3VuZGFyeSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHRoaXMuc3RpY2t5ID0ge1xyXG4gICAgICAgICAgICAgICAgc2VsZiAgICAgICAgICA6IHRoaXMsXHJcbiAgICAgICAgICAgICAgICBvcHRpb25zICAgICAgIDogdGhpcy5vcHRpb25zLFxyXG4gICAgICAgICAgICAgICAgZWxlbWVudCAgICAgICA6IHRoaXMuZWxlbWVudCxcclxuICAgICAgICAgICAgICAgIGN1cnJlbnRUb3AgICAgOiBudWxsLFxyXG4gICAgICAgICAgICAgICAgd3JhcHBlciAgICAgICA6IHRoaXMud3JhcHBlcixcclxuICAgICAgICAgICAgICAgIGluaXQgICAgICAgICAgOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgIGdldFdpZHRoRnJvbSAgOiB0aGlzLm9wdGlvbnMuZ2V0V2lkdGhGcm9tIHx8IHRoaXMud3JhcHBlcixcclxuICAgICAgICAgICAgICAgIGJvdW5kYXJ5ICAgICAgOiBib3VuZGFyeSxcclxuICAgICAgICAgICAgICAgIGJvdW5kdG9wYXJlbnQgOiBib3VuZHRvcGFyZW50LFxyXG4gICAgICAgICAgICAgICAgdG9wICAgICAgICAgICA6IDAsXHJcbiAgICAgICAgICAgICAgICBjYWxjVG9wICAgICAgIDogZnVuY3Rpb24oKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHZhciB0b3AgPSB0aGlzLm9wdGlvbnMudG9wO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAvLyBkeW5hbWljIHRvcCBwYXJhbWV0ZXJcclxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5vcHRpb25zLnRvcCAmJiB0eXBlb2YodGhpcy5vcHRpb25zLnRvcCkgPT0gJ3N0cmluZycpIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGUuZy4gNTB2aFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5vcHRpb25zLnRvcC5tYXRjaCgvXigtfCkoXFxkKyl2aCQvKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdG9wID0gd2luZG93LmlubmVySGVpZ2h0ICogcGFyc2VJbnQodGhpcy5vcHRpb25zLnRvcCwgMTApLzEwMDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gZS5nLiAjZWxlbWVudElkLCBvciAuY2xhc3MtMSxjbGFzcy0yLC5jbGFzcy0zIChmaXJzdCBmb3VuZCBpcyB1c2VkKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0b3BFbGVtZW50ID0gVUkuJCh0aGlzLm9wdGlvbnMudG9wKS5maXJzdCgpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0b3BFbGVtZW50Lmxlbmd0aCAmJiB0b3BFbGVtZW50LmlzKCc6dmlzaWJsZScpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdG9wID0gLTEgKiAoKHRvcEVsZW1lbnQub2Zmc2V0KCkudG9wICsgdG9wRWxlbWVudC5vdXRlckhlaWdodCgpKSAtIHRoaXMud3JhcHBlci5vZmZzZXQoKS50b3ApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50b3AgPSB0b3A7XHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgcmVzZXQgICAgICAgICA6IGZ1bmN0aW9uKGZvcmNlKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY2FsY1RvcCgpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB2YXIgZmluYWxpemUgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50LmNzcyh7XCJwb3NpdGlvblwiOlwiXCIsIFwidG9wXCI6XCJcIiwgXCJ3aWR0aFwiOlwiXCIsIFwibGVmdFwiOlwiXCIsIFwibWFyZ2luXCI6XCIwXCJ9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50LnJlbW92ZUNsYXNzKFt0aGlzLm9wdGlvbnMuYW5pbWF0aW9uLCAndWstYW5pbWF0aW9uLXJldmVyc2UnLCB0aGlzLm9wdGlvbnMuY2xzYWN0aXZlXS5qb2luKCcgJykpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnQuYWRkQ2xhc3ModGhpcy5vcHRpb25zLmNsc2luYWN0aXZlKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY3VycmVudFRvcCA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYW5pbWF0ZSAgICA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgIH0uYmluZCh0aGlzKTtcclxuXHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmICghZm9yY2UgJiYgdGhpcy5vcHRpb25zLmFuaW1hdGlvbiAmJiBVSS5zdXBwb3J0LmFuaW1hdGlvbiAmJiAhVUkuVXRpbHMuaXNJblZpZXcodGhpcy53cmFwcGVyKSkge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5hbmltYXRlID0gdHJ1ZTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZWxlbWVudC5yZW1vdmVDbGFzcyh0aGlzLm9wdGlvbnMuYW5pbWF0aW9uKS5vbmUoVUkuc3VwcG9ydC5hbmltYXRpb24uZW5kLCBmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZmluYWxpemUoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSkud2lkdGgoKTsgLy8gZm9yY2UgcmVkcmF3XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnQuYWRkQ2xhc3ModGhpcy5vcHRpb25zLmFuaW1hdGlvbisnICcrJ3VrLWFuaW1hdGlvbi1yZXZlcnNlJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZmluYWxpemUoKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9LFxyXG5cclxuICAgICAgICAgICAgICAgIGNoZWNrOiBmdW5jdGlvbigpIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5kaXNhYmxlZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5vcHRpb25zLm1lZGlhKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2godHlwZW9mKHRoaXMub3B0aW9ucy5tZWRpYSkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ251bWJlcic6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHdpbmRvdy5pbm5lcldpZHRoIDwgdGhpcy5vcHRpb25zLm1lZGlhKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdzdHJpbmcnOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh3aW5kb3cubWF0Y2hNZWRpYSAmJiAhd2luZG93Lm1hdGNoTWVkaWEodGhpcy5vcHRpb25zLm1lZGlhKS5tYXRjaGVzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHZhciBzY3JvbGxUb3AgICAgICA9ICR3aW4uc2Nyb2xsVG9wKCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50SGVpZ2h0ID0gJGRvYy5oZWlnaHQoKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgZHdoICAgICAgICAgICAgPSBkb2N1bWVudEhlaWdodCAtIHdpbmRvdy5pbm5lckhlaWdodCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgZXh0cmEgICAgICAgICAgPSAoc2Nyb2xsVG9wID4gZHdoKSA/IGR3aCAtIHNjcm9sbFRvcCA6IDAsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnRUb3AgICAgID0gdGhpcy53cmFwcGVyLm9mZnNldCgpLnRvcCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgZXRzZSAgICAgICAgICAgPSBlbGVtZW50VG9wIC0gdGhpcy50b3AgLSBleHRyYSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgYWN0aXZlICAgICAgICAgPSAoc2Nyb2xsVG9wICA+PSBldHNlKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGFjdGl2ZSAmJiB0aGlzLm9wdGlvbnMuc2hvd3VwKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBzZXQgaW5hY3RpdiBpZiBzY3JvbGxpbmcgZG93blxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZGlyZWN0aW9uID09IDEpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjdGl2ZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBzZXQgaW5hY3RpdmUgd2hlbiB3cmFwcGVyIGlzIHN0aWxsIGluIHZpZXdcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGRpcmVjdGlvbiA9PSAtMSAmJiAhdGhpcy5lbGVtZW50Lmhhc0NsYXNzKHRoaXMub3B0aW9ucy5jbHNhY3RpdmUpICYmIFVJLlV0aWxzLmlzSW5WaWV3KHRoaXMud3JhcHBlcikpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjdGl2ZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gYWN0aXZlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgdGhpcy5zdGlja3kuY2FsY1RvcCgpO1xyXG5cclxuICAgICAgICAgICAgc3RpY2tlZC5wdXNoKHRoaXMuc3RpY2t5KTtcclxuICAgICAgICB9LFxyXG5cclxuICAgICAgICB1cGRhdGU6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICBjaGVja3Njcm9sbHBvc2l0aW9uKHRoaXMuc3RpY2t5KTtcclxuICAgICAgICB9LFxyXG5cclxuICAgICAgICBlbmFibGU6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICB0aGlzLm9wdGlvbnMuZGlzYWJsZWQgPSBmYWxzZTtcclxuICAgICAgICAgICAgdGhpcy51cGRhdGUoKTtcclxuICAgICAgICB9LFxyXG5cclxuICAgICAgICBkaXNhYmxlOiBmdW5jdGlvbihmb3JjZSkge1xyXG4gICAgICAgICAgICB0aGlzLm9wdGlvbnMuZGlzYWJsZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICB0aGlzLnN0aWNreS5yZXNldChmb3JjZSk7XHJcbiAgICAgICAgfSxcclxuXHJcbiAgICAgICAgY29tcHV0ZVdyYXBwZXI6IGZ1bmN0aW9uKCkge1xyXG5cclxuICAgICAgICAgICAgdGhpcy53cmFwcGVyLmNzcyh7XHJcbiAgICAgICAgICAgICAgICAnaGVpZ2h0JyA6IFsnYWJzb2x1dGUnLCdmaXhlZCddLmluZGV4T2YodGhpcy5lbGVtZW50LmNzcygncG9zaXRpb24nKSkgPT0gLTEgPyB0aGlzLmVsZW1lbnQub3V0ZXJIZWlnaHQoKSA6ICcnLFxyXG4gICAgICAgICAgICAgICAgJ2Zsb2F0JyAgOiB0aGlzLmVsZW1lbnQuY3NzKCdmbG9hdCcpICE9ICdub25lJyA/IHRoaXMuZWxlbWVudC5jc3MoJ2Zsb2F0JykgOiAnJyxcclxuICAgICAgICAgICAgICAgICdtYXJnaW4nIDogdGhpcy5lbGVtZW50LmNzcygnbWFyZ2luJylcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcblxyXG4gICAgZnVuY3Rpb24gY2hlY2tzY3JvbGxwb3NpdGlvbihkaXJlY3Rpb24pIHtcclxuXHJcbiAgICAgICAgdmFyIHN0aWNraWVzID0gYXJndW1lbnRzLmxlbmd0aCA/IGFyZ3VtZW50cyA6IHN0aWNrZWQ7XHJcblxyXG4gICAgICAgIGlmICghc3RpY2tpZXMubGVuZ3RoIHx8ICR3aW4uc2Nyb2xsVG9wKCkgPCAwKSByZXR1cm47XHJcblxyXG4gICAgICAgIHZhciBzY3JvbGxUb3AgICAgICAgPSAkd2luLnNjcm9sbFRvcCgpLFxyXG4gICAgICAgICAgICBkb2N1bWVudEhlaWdodCAgPSAkZG9jLmhlaWdodCgpLFxyXG4gICAgICAgICAgICB3aW5kb3dIZWlnaHQgICAgPSAkd2luLmhlaWdodCgpLFxyXG4gICAgICAgICAgICBkd2ggICAgICAgICAgICAgPSBkb2N1bWVudEhlaWdodCAtIHdpbmRvd0hlaWdodCxcclxuICAgICAgICAgICAgZXh0cmEgICAgICAgICAgID0gKHNjcm9sbFRvcCA+IGR3aCkgPyBkd2ggLSBzY3JvbGxUb3AgOiAwLFxyXG4gICAgICAgICAgICBuZXdUb3AsIGNvbnRhaW5lckJvdHRvbSwgc3RpY2t5SGVpZ2h0LCBzdGlja3k7XHJcblxyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc3RpY2tpZXMubGVuZ3RoOyBpKyspIHtcclxuXHJcbiAgICAgICAgICAgIHN0aWNreSA9IHN0aWNraWVzW2ldO1xyXG5cclxuICAgICAgICAgICAgaWYgKCFzdGlja3kuZWxlbWVudC5pcyhcIjp2aXNpYmxlXCIpIHx8IHN0aWNreS5hbmltYXRlKSB7XHJcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKCFzdGlja3kuY2hlY2soKSkge1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChzdGlja3kuY3VycmVudFRvcCAhPT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHN0aWNreS5yZXNldCgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoc3RpY2t5LnRvcCA8IDApIHtcclxuICAgICAgICAgICAgICAgICAgICBuZXdUb3AgPSAwO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBzdGlja3lIZWlnaHQgPSBzdGlja3kuZWxlbWVudC5vdXRlckhlaWdodCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIG5ld1RvcCA9IGRvY3VtZW50SGVpZ2h0IC0gc3RpY2t5SGVpZ2h0IC0gc3RpY2t5LnRvcCAtIHN0aWNreS5vcHRpb25zLmJvdHRvbSAtIHNjcm9sbFRvcCAtIGV4dHJhO1xyXG4gICAgICAgICAgICAgICAgICAgIG5ld1RvcCA9IG5ld1RvcCA8IDAgPyBuZXdUb3AgKyBzdGlja3kudG9wIDogc3RpY2t5LnRvcDtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoc3RpY2t5LmJvdW5kYXJ5ICYmIHN0aWNreS5ib3VuZGFyeS5sZW5ndGgpIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGJUb3AgPSBzdGlja3kuYm91bmRhcnkub2Zmc2V0KCkudG9wO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoc3RpY2t5LmJvdW5kdG9wYXJlbnQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29udGFpbmVyQm90dG9tID0gZG9jdW1lbnRIZWlnaHQgLSAoYlRvcCArIHN0aWNreS5ib3VuZGFyeS5vdXRlckhlaWdodCgpKSArIHBhcnNlSW50KHN0aWNreS5ib3VuZGFyeS5jc3MoJ3BhZGRpbmctYm90dG9tJykpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRhaW5lckJvdHRvbSA9IGRvY3VtZW50SGVpZ2h0IC0gYlRvcCAtIHBhcnNlSW50KHN0aWNreS5ib3VuZGFyeS5jc3MoJ21hcmdpbi10b3AnKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICBuZXdUb3AgPSAoc2Nyb2xsVG9wICsgc3RpY2t5SGVpZ2h0KSA+IChkb2N1bWVudEhlaWdodCAtIGNvbnRhaW5lckJvdHRvbSAtIChzdGlja3kudG9wIDwgMCA/IDAgOiBzdGlja3kudG9wKSkgPyAoZG9jdW1lbnRIZWlnaHQgLSBjb250YWluZXJCb3R0b20pIC0gKHNjcm9sbFRvcCArIHN0aWNreUhlaWdodCkgOiBuZXdUb3A7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG5cclxuICAgICAgICAgICAgICAgIGlmIChzdGlja3kuY3VycmVudFRvcCAhPSBuZXdUb3ApIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgc3RpY2t5LmVsZW1lbnQuY3NzKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgXCJwb3NpdGlvblwiIDogXCJmaXhlZFwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBcInRvcFwiICAgICAgOiBuZXdUb3AsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFwid2lkdGhcIiAgICA6ICh0eXBlb2Ygc3RpY2t5LmdldFdpZHRoRnJvbSAhPT0gJ3VuZGVmaW5lZCcpID8gVUkuJChzdGlja3kuZ2V0V2lkdGhGcm9tKS53aWR0aCgpIDogc3RpY2t5LmVsZW1lbnQud2lkdGgoKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgXCJsZWZ0XCIgICAgIDogc3RpY2t5LndyYXBwZXIub2Zmc2V0KCkubGVmdFxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoIXN0aWNreS5pbml0KSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzdGlja3kuZWxlbWVudC5hZGRDbGFzcyhzdGlja3kub3B0aW9ucy5jbHNpbml0KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChsb2NhdGlvbi5oYXNoICYmIHNjcm9sbFRvcCA+IDAgJiYgc3RpY2t5Lm9wdGlvbnMudGFyZ2V0KSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyICR0YXJnZXQgPSBVSS4kKGxvY2F0aW9uLmhhc2gpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgkdGFyZ2V0Lmxlbmd0aCkge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KChmdW5jdGlvbigkdGFyZ2V0LCBzdGlja3kpe1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0aWNreS5lbGVtZW50LndpZHRoKCk7IC8vIGZvcmNlIHJlZHJhd1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBvZmZzZXQgICAgICAgPSAkdGFyZ2V0Lm9mZnNldCgpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1heG9mZnNldCAgICA9IG9mZnNldC50b3AgKyAkdGFyZ2V0Lm91dGVySGVpZ2h0KCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RpY2t5T2Zmc2V0ID0gc3RpY2t5LmVsZW1lbnQub2Zmc2V0KCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RpY2t5SGVpZ2h0ID0gc3RpY2t5LmVsZW1lbnQub3V0ZXJIZWlnaHQoKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGlja3lNYXhPZmZzZXQgPSBzdGlja3lPZmZzZXQudG9wICsgc3RpY2t5SGVpZ2h0O1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzdGlja3lPZmZzZXQudG9wIDwgbWF4b2Zmc2V0ICYmIG9mZnNldC50b3AgPCBzdGlja3lNYXhPZmZzZXQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzY3JvbGxUb3AgPSBvZmZzZXQudG9wIC0gc3RpY2t5SGVpZ2h0IC0gc3RpY2t5Lm9wdGlvbnMudGFyZ2V0O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5zY3JvbGxUbygwLCBzY3JvbGxUb3ApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSgkdGFyZ2V0LCBzdGlja3kpLCAwKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgc3RpY2t5LmVsZW1lbnQuYWRkQ2xhc3Moc3RpY2t5Lm9wdGlvbnMuY2xzYWN0aXZlKS5yZW1vdmVDbGFzcyhzdGlja3kub3B0aW9ucy5jbHNpbmFjdGl2ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgc3RpY2t5LmVsZW1lbnQuY3NzKCdtYXJnaW4nLCAnJyk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChzdGlja3kub3B0aW9ucy5hbmltYXRpb24gJiYgc3RpY2t5LmluaXQgJiYgIVVJLlV0aWxzLmlzSW5WaWV3KHN0aWNreS53cmFwcGVyKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzdGlja3kuZWxlbWVudC5hZGRDbGFzcyhzdGlja3kub3B0aW9ucy5hbmltYXRpb24pO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgc3RpY2t5LmN1cnJlbnRUb3AgPSBuZXdUb3A7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHN0aWNreS5pbml0ID0gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIFVJLnN0aWNreTtcclxufSk7XHJcblxyXG5cclxudmFyIHRvcFRvb2xiYXJPZmZzZXRUb3AgPSAyMDA7XHJcbnZhciBhcmVUb3BUb29sYmFyRWxlbWVudHNWaXNpYmxlID0gZmFsc2U7XHJcblxyXG4kKGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbigpe1xyXG4gICAgdG9wVG9vbGJhck9mZnNldFRvcCA9ICQoJy50b29sYmFyLXRvcCcpLm9mZnNldCgpLnRvcDtcclxuICAgIGFyZVRvcFRvb2xiYXJFbGVtZW50c1Zpc2libGUgPSBmYWxzZTtcclxuXHJcbiAgICAkKFwiI2NvcHkteWVhclwiKS5odG1sKG5ldyBEYXRlKCkuZ2V0RnVsbFllYXIoKSk7XHJcbn0pO1xyXG5cclxuJCh3aW5kb3cpLm9uKCdzY3JvbGwnLCBmdW5jdGlvbihlKXtcclxuXHJcbiAgICBpZighYXJlVG9wVG9vbGJhckVsZW1lbnRzVmlzaWJsZSAmJiB3aW5kb3cucGFnZVlPZmZzZXQgPj0gdG9wVG9vbGJhck9mZnNldFRvcCl7XHJcbiAgICAgICAgJChcIiN0b29sYmFyLWxvZ28sI3Rvb2xiYXItbGFuZywjdG9vbGJhci1kaXZpZGVyXCIpLmFkZENsYXNzKFwidmlzaWJsZVwiKTtcclxuICAgICAgICBhcmVUb3BUb29sYmFyRWxlbWVudHNWaXNpYmxlID0gdHJ1ZTtcclxuICAgIH0gZWxzZSBpZihhcmVUb3BUb29sYmFyRWxlbWVudHNWaXNpYmxlICYmIHdpbmRvdy5wYWdlWU9mZnNldCA8PSAyMCkge1xyXG4gICAgICAgICQoXCIjdG9vbGJhci1sb2dvLCN0b29sYmFyLWxhbmcsI3Rvb2xiYXItZGl2aWRlclwiKS5yZW1vdmVDbGFzcyhcInZpc2libGVcIik7XHJcbiAgICAgICAgYXJlVG9wVG9vbGJhckVsZW1lbnRzVmlzaWJsZSA9IGZhbHNlO1xyXG4gICAgfVxyXG5cclxufSk7XHJcblxyXG5mdW5jdGlvbiBzdWJtaXRNZXNzYWdlKCl7XHJcbiAgICBzZW5kTWFpbChcclxuICAgICAgICBjb250ZW50ID0gZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgcmV0dXJuIFwiRnJvbTogXCIgKyAkKFwiI3NlbmQtbWVzc2FnZS1mb3JtLWNvbm5lY3Rpb25cIikudmFsKCkgKyBcIlxcblxcbjxicj48YnI+TWVzc2FnZTpcIiArICQoXCIjc2VuZC1tZXNzYWdlLWZvcm0tbWVzc2FnZVwiKS52YWwoKTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIG9uU3VjY2VzcyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgJChcIiNzZW5kLW1lc3NhZ2UtZm9ybS1jb25uZWN0aW9uXCIpLnZhbChcIlwiKTtcclxuICAgICAgICAgICAgJChcIiNzZW5kLW1lc3NhZ2UtZm9ybS1tZXNzYWdlXCIpLnZhbChcIlwiKTtcclxuICAgICAgICB9XHJcbiAgICApO1xyXG59XHJcblxyXG5mdW5jdGlvbiBzZW5kTWFpbChjb250ZW50LCBjYWxsQmFjaykge1xyXG4gICAgJC5hamF4KHtcclxuICAgICAgICB0eXBlOiBcIlBPU1RcIixcclxuICAgICAgICB1cmw6ICdodHRwczovL21hbmRyaWxsYXBwLmNvbS9hcGkvMS4wL21lc3NhZ2VzL3NlbmQuanNvbicsXHJcbiAgICAgICAgZGF0YToge1xyXG4gICAgICAgICAgICAna2V5JzogJ3E1bS0xN3RHaEhvWUFUb3VSenhLNkEnLFxyXG4gICAgICAgICAgICAnbWVzc2FnZSc6IHtcclxuICAgICAgICAgICAgICAgICdmcm9tX2VtYWlsJzogJ2luZm9AYWRtY29uc3VsdC5ieScsXHJcbiAgICAgICAgICAgICAgICAndG8nOiBbXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAnZW1haWwnOiAnZGFuaWxhLmRlZGtvdkBnbWFpbC5jb20nLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAnbmFtZSc6ICcnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAndHlwZSc6ICd0bydcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBdLFxyXG4gICAgICAgICAgICAgICAgJ2F1dG90ZXh0JzogJ3RydWUnLFxyXG4gICAgICAgICAgICAgICAgJ3N1YmplY3QnOiAnQURNIGNvbnN1bHQgd2Vic2l0ZSBtZXNzYWdlJyxcclxuICAgICAgICAgICAgICAgICdodG1sJzogY29udGVudFxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfSkuZG9uZShmdW5jdGlvbiAocmVzcG9uc2UpIHtcclxuICAgICAgICBpZihjYWxsQmFjayE9bnVsbClcclxuICAgICAgICAgICAgY2FsbEJhY2soKTtcclxuICAgIH0pO1xyXG59XHJcblxyXG5cclxuZnVuY3Rpb24gdHJhbnNsYXRlKGxhbmcpIHtcclxuICAgIHZhciBjdXJyZW50UGF0aCA9IHdpbmRvdy5sb2NhdGlvbi5wYXRobmFtZTtcclxuICAgIHZhciBub3JtYWxpemVkUGF0aCA9IGN1cnJlbnRQYXRoLnJlcGxhY2UoJ2VuLycsICcnKS5yZXBsYWNlKCdkZS8nLCAnJykucmVwbGFjZSgncnUvJywgJycpO1xyXG5cclxuICAgIHZhciBuZXdQYXRoID0gJy8nICsgbGFuZyArIG5vcm1hbGl6ZWRQYXRoO1xyXG4gICAgaWYobGFuZyA9PT0gJ3J1JylcclxuICAgICAgICBuZXdQYXRoID0gbm9ybWFsaXplZFBhdGg7XHJcblxyXG4gICAgd2luZG93LmxvY2F0aW9uLnBhdGhuYW1lID0gbmV3UGF0aDtcclxufSJdLCJmaWxlIjoibWFpbi5qcyIsInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9